var qR=Object.create;var ac=Object.defineProperty,VR=Object.defineProperties,HR=Object.getOwnPropertyDescriptor,jR=Object.getOwnPropertyDescriptors,GR=Object.getOwnPropertyNames,x_=Object.getOwnPropertySymbols,QR=Object.getPrototypeOf,D_=Object.prototype.hasOwnProperty,kR=Object.prototype.propertyIsEnumerable;var N_=(t,e,r)=>e in t?ac(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Do=(t,e)=>{for(var r in e||={})D_.call(e,r)&&N_(t,r,e[r]);if(x_)for(var r of x_(e))kR.call(e,r)&&N_(t,r,e[r]);return t},O_=(t,e)=>VR(t,jR(e));var P_=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var ge=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),st=(t,e)=>{for(var r in e)ac(t,r,{get:e[r],enumerable:!0})},cf=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of GR(e))!D_.call(t,i)&&i!==r&&ac(t,i,{get:()=>e[i],enumerable:!(n=HR(e,i))||n.enumerable});return t},Lt=(t,e,r)=>(cf(t,e,"default"),r&&cf(r,e,"default")),_e=(t,e,r)=>(r=t!=null?qR(QR(t)):{},cf(e||!t||!t.__esModule?ac(r,"default",{value:t,enumerable:!0}):r,t)),ot=t=>cf(ac({},"__esModule",{value:!0}),t);var Ce=(t,e,r)=>new Promise((n,i)=>{var s=u=>{try{a(r.next(u))}catch(l){i(l)}},o=u=>{try{a(r.throw(u))}catch(l){i(l)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((r=r.apply(t,e)).next())});var q0=v(lf=>{"use strict";c();lf.byteLength=zR;lf.toByteArray=$R;lf.fromByteArray=XR;var Gr=[],lr=[],KR=typeof Uint8Array<"u"?Uint8Array:Array,U0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(as=0,B_=U0.length;as<B_;++as)Gr[as]=U0[as],lr[U0.charCodeAt(as)]=as;var as,B_;lr["-".charCodeAt(0)]=62;lr["_".charCodeAt(0)]=63;function R_(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function zR(t){var e=R_(t),r=e[0],n=e[1];return(r+n)*3/4-n}function WR(t,e,r){return(e+r)*3/4-r}function $R(t){var e,r=R_(t),n=r[0],i=r[1],s=new KR(WR(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=lr[t.charCodeAt(u)]<<18|lr[t.charCodeAt(u+1)]<<12|lr[t.charCodeAt(u+2)]<<6|lr[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=lr[t.charCodeAt(u)]<<2|lr[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=lr[t.charCodeAt(u)]<<10|lr[t.charCodeAt(u+1)]<<4|lr[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function YR(t){return Gr[t>>18&63]+Gr[t>>12&63]+Gr[t>>6&63]+Gr[t&63]}function JR(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(YR(n));return i.join("")}function XR(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(JR(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Gr[e>>2]+Gr[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Gr[e>>10]+Gr[e>>4&63]+Gr[e<<2&63]+"=")),i.join("")}});var H0=v(V0=>{c();V0.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,l=u>>1,f=-7,d=r?i-1:0,y=r?-1:1,w=t[e+d];for(d+=y,s=w&(1<<-f)-1,w>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=y,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=y,f-=8);if(s===0)s=1-l;else{if(s===u)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(w?-1:1)*o*Math.pow(2,s-n)};V0.write=function(t,e,r,n,i,s){var o,a,u,l=s*8-i-1,f=(1<<l)-1,d=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:s-1,E=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=y/u:e+=y*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*u-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+w]=a&255,w+=E,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+w]=o&255,w+=E,o/=256,l-=8);t[r+w-E]|=O*128}});var z_=v(Po=>{"use strict";c();var j0=q0(),Oo=H0(),L_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Po.Buffer=W;Po.SlowBuffer=iL;Po.INSPECT_MAX_BYTES=50;var ff=2147483647;Po.kMaxLength=ff;W.TYPED_ARRAY_SUPPORT=ZR();!W.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ZR(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(W.prototype,"parent",{enumerable:!0,get:function(){if(W.isBuffer(this))return this.buffer}});Object.defineProperty(W.prototype,"offset",{enumerable:!0,get:function(){if(W.isBuffer(this))return this.byteOffset}});function On(t){if(t>ff)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,W.prototype),e}function W(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return K0(t)}return U_(t,e,r)}W.poolSize=8192;function U_(t,e,r){if(typeof t=="string")return tL(t,e);if(ArrayBuffer.isView(t))return rL(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Qr(t,ArrayBuffer)||t&&Qr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qr(t,SharedArrayBuffer)||t&&Qr(t.buffer,SharedArrayBuffer)))return Q0(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return W.from(n,e,r);var i=nL(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return W.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}W.from=function(t,e,r){return U_(t,e,r)};Object.setPrototypeOf(W.prototype,Uint8Array.prototype);Object.setPrototypeOf(W,Uint8Array);function q_(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function eL(t,e,r){return q_(t),t<=0?On(t):e!==void 0?typeof r=="string"?On(t).fill(e,r):On(t).fill(e):On(t)}W.alloc=function(t,e,r){return eL(t,e,r)};function K0(t){return q_(t),On(t<0?0:z0(t)|0)}W.allocUnsafe=function(t){return K0(t)};W.allocUnsafeSlow=function(t){return K0(t)};function tL(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!W.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=V_(t,e)|0,n=On(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function G0(t){for(var e=t.length<0?0:z0(t.length)|0,r=On(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function rL(t){if(Qr(t,Uint8Array)){var e=new Uint8Array(t);return Q0(e.buffer,e.byteOffset,e.byteLength)}return G0(t)}function Q0(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,W.prototype),n}function nL(t){if(W.isBuffer(t)){var e=z0(t.length)|0,r=On(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||W0(t.length)?On(0):G0(t);if(t.type==="Buffer"&&Array.isArray(t.data))return G0(t.data)}function z0(t){if(t>=ff)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ff.toString(16)+" bytes");return t|0}function iL(t){return+t!=t&&(t=0),W.alloc(+t)}W.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==W.prototype};W.compare=function(e,r){if(Qr(e,Uint8Array)&&(e=W.from(e,e.offset,e.byteLength)),Qr(r,Uint8Array)&&(r=W.from(r,r.offset,r.byteLength)),!W.isBuffer(e)||!W.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};W.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};W.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return W.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=W.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var o=e[n];if(Qr(o,Uint8Array))s+o.length>i.length?W.from(o).copy(i,s):Uint8Array.prototype.set.call(i,o,s);else if(W.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function V_(t,e){if(W.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Qr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return K_(t).length;default:if(i)return n?-1:k0(t).length;e=(""+e).toLowerCase(),i=!0}}W.byteLength=V_;function sL(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return gL(this,e,r);case"utf8":case"utf-8":return j_(this,e,r);case"ascii":return dL(this,e,r);case"latin1":case"binary":return pL(this,e,r);case"base64":return fL(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yL(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}W.prototype._isBuffer=!0;function us(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}W.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)us(this,r,r+1);return this};W.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)us(this,r,r+3),us(this,r+1,r+2);return this};W.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)us(this,r,r+7),us(this,r+1,r+6),us(this,r+2,r+5),us(this,r+3,r+4);return this};W.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?j_(this,0,e):sL.apply(this,arguments)};W.prototype.toLocaleString=W.prototype.toString;W.prototype.equals=function(e){if(!W.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:W.compare(this,e)===0};W.prototype.inspect=function(){var e="",r=Po.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};L_&&(W.prototype[L_]=W.prototype.inspect);W.prototype.compare=function(e,r,n,i,s){if(Qr(e,Uint8Array)&&(e=W.from(e,e.offset,e.byteLength)),!W.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=n-r,u=Math.min(o,a),l=this.slice(i,s),f=e.slice(r,n),d=0;d<u;++d)if(l[d]!==f[d]){o=l[d],a=f[d];break}return o<a?-1:a<o?1:0};function H_(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,W0(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=W.from(e,n)),W.isBuffer(e))return e.length===0?-1:F_(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):F_(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function F_(t,e,r,n,i){var s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(w,E){return s===1?w[E]:w.readUInt16BE(E*s)}var l;if(i){var f=-1;for(l=r;l<o;l++)if(u(t,l)===u(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===a)return f*s}else f!==-1&&(l-=l-f),f=-1}else for(r+a>o&&(r=o-a),l=r;l>=0;l--){for(var d=!0,y=0;y<a;y++)if(u(t,l+y)!==u(e,y)){d=!1;break}if(d)return l}return-1}W.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};W.prototype.indexOf=function(e,r,n){return H_(this,e,r,n,!0)};W.prototype.lastIndexOf=function(e,r,n){return H_(this,e,r,n,!1)};function oL(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(W0(a))return o;t[r+o]=a}return o}function aL(t,e,r,n){return hf(k0(e,t.length-r),t,r,n)}function uL(t,e,r,n){return hf(EL(e),t,r,n)}function cL(t,e,r,n){return hf(K_(e),t,r,n)}function lL(t,e,r,n){return hf(vL(e,t.length-r),t,r,n)}W.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return oL(this,e,r,n);case"utf8":case"utf-8":return aL(this,e,r,n);case"ascii":case"latin1":case"binary":return uL(this,e,r,n);case"base64":return cL(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lL(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};W.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fL(t,e,r){return e===0&&r===t.length?j0.fromByteArray(t):j0.fromByteArray(t.slice(e,r))}function j_(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){var u,l,f,d;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)===128&&(d=(s&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[i+1],l=t[i+2],(u&192)===128&&(l&192)===128&&(d=(s&15)<<12|(u&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[i+1],l=t[i+2],f=t[i+3],(u&192)===128&&(l&192)===128&&(f&192)===128&&(d=(s&15)<<18|(u&63)<<12|(l&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return hL(n)}var M_=4096;function hL(t){var e=t.length;if(e<=M_)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=M_));return r}function dL(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function pL(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function gL(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=AL[t[s]];return i}function yL(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}W.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,W.prototype),i};function Tt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}W.prototype.readUintLE=W.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return i};W.prototype.readUintBE=W.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};W.prototype.readUint8=W.prototype.readUInt8=function(e,r){return e=e>>>0,r||Tt(e,1,this.length),this[e]};W.prototype.readUint16LE=W.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Tt(e,2,this.length),this[e]|this[e+1]<<8};W.prototype.readUint16BE=W.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Tt(e,2,this.length),this[e]<<8|this[e+1]};W.prototype.readUint32LE=W.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};W.prototype.readUint32BE=W.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};W.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};W.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);for(var i=r,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};W.prototype.readInt8=function(e,r){return e=e>>>0,r||Tt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};W.prototype.readInt16LE=function(e,r){e=e>>>0,r||Tt(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};W.prototype.readInt16BE=function(e,r){e=e>>>0,r||Tt(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};W.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};W.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};W.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),Oo.read(this,e,!0,23,4)};W.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),Oo.read(this,e,!1,23,4)};W.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Tt(e,8,this.length),Oo.read(this,e,!0,52,8)};W.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Tt(e,8,this.length),Oo.read(this,e,!1,52,8)};function Jt(t,e,r,n,i,s){if(!W.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}W.prototype.writeUintLE=W.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Jt(this,e,r,n,s,0)}var o=1,a=0;for(this[r]=e&255;++a<n&&(o*=256);)this[r+a]=e/o&255;return r+n};W.prototype.writeUintBE=W.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Jt(this,e,r,n,s,0)}var o=n-1,a=1;for(this[r+o]=e&255;--o>=0&&(a*=256);)this[r+o]=e/a&255;return r+n};W.prototype.writeUint8=W.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,1,255,0),this[r]=e&255,r+1};W.prototype.writeUint16LE=W.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};W.prototype.writeUint16BE=W.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};W.prototype.writeUint32LE=W.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};W.prototype.writeUint32BE=W.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};W.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);Jt(this,e,r,n,s-1,-s)}var o=0,a=1,u=0;for(this[r]=e&255;++o<n&&(a*=256);)e<0&&u===0&&this[r+o-1]!==0&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n};W.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);Jt(this,e,r,n,s-1,-s)}var o=n-1,a=1,u=0;for(this[r+o]=e&255;--o>=0&&(a*=256);)e<0&&u===0&&this[r+o+1]!==0&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n};W.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};W.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};W.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};W.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};W.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function G_(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Q_(t,e,r,n,i){return e=+e,r=r>>>0,i||G_(t,e,r,4,34028234663852886e22,-34028234663852886e22),Oo.write(t,e,r,n,23,4),r+4}W.prototype.writeFloatLE=function(e,r,n){return Q_(this,e,r,!0,n)};W.prototype.writeFloatBE=function(e,r,n){return Q_(this,e,r,!1,n)};function k_(t,e,r,n,i){return e=+e,r=r>>>0,i||G_(t,e,r,8,17976931348623157e292,-17976931348623157e292),Oo.write(t,e,r,n,52,8),r+8}W.prototype.writeDoubleLE=function(e,r,n){return k_(this,e,r,!0,n)};W.prototype.writeDoubleBE=function(e,r,n){return k_(this,e,r,!1,n)};W.prototype.copy=function(e,r,n,i){if(!W.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};W.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!W.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var a=W.isBuffer(e)?e:W.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=a[o%u]}return this};var mL=/[^+/0-9A-Za-z-_]/g;function wL(t){if(t=t.split("=")[0],t=t.trim().replace(mL,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function k0(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function EL(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function vL(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function K_(t){return j0.toByteArray(wL(t))}function hf(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Qr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function W0(t){return t!==t}var AL=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()});var X_=v((oX,J_)=>{c();var ft=J_.exports={},kr,Kr;function $0(){throw new Error("setTimeout has not been defined")}function Y0(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?kr=setTimeout:kr=$0}catch{kr=$0}try{typeof clearTimeout=="function"?Kr=clearTimeout:Kr=Y0}catch{Kr=Y0}})();function W_(t){if(kr===setTimeout)return setTimeout(t,0);if((kr===$0||!kr)&&setTimeout)return kr=setTimeout,setTimeout(t,0);try{return kr(t,0)}catch{try{return kr.call(null,t,0)}catch{return kr.call(this,t,0)}}}function _L(t){if(Kr===clearTimeout)return clearTimeout(t);if((Kr===Y0||!Kr)&&clearTimeout)return Kr=clearTimeout,clearTimeout(t);try{return Kr(t)}catch{try{return Kr.call(null,t)}catch{return Kr.call(this,t)}}}var Pn=[],Bo=!1,cs,df=-1;function bL(){!Bo||!cs||(Bo=!1,cs.length?Pn=cs.concat(Pn):df=-1,Pn.length&&$_())}function $_(){if(!Bo){var t=W_(bL);Bo=!0;for(var e=Pn.length;e;){for(cs=Pn,Pn=[];++df<e;)cs&&cs[df].run();df=-1,e=Pn.length}cs=null,Bo=!1,_L(t)}}ft.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Pn.push(new Y_(t,e)),Pn.length===1&&!Bo&&W_($_)};function Y_(t,e){this.fun=t,this.array=e}Y_.prototype.run=function(){this.fun.apply(null,this.array)};ft.title="browser";ft.browser=!0;ft.env={};ft.argv=[];ft.version="";ft.versions={};function Bn(){}ft.on=Bn;ft.addListener=Bn;ft.once=Bn;ft.off=Bn;ft.removeListener=Bn;ft.removeAllListeners=Bn;ft.emit=Bn;ft.prependListener=Bn;ft.prependOnceListener=Bn;ft.listeners=function(t){return[]};ft.binding=function(t){throw new Error("process.binding is not supported")};ft.cwd=function(){return"/"};ft.chdir=function(t){throw new Error("process.chdir is not supported")};ft.umask=function(){return 0}});var h,p,IL,global,c=ge(()=>{h=_e(z_()),p=_e(X_()),IL=function(t){function e(){var n=this||self;return delete t.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object),global=IL});var Wt=v((Z_,pf)=>{c();(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,u=14,l=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,y=1e9;function w(P){var B,_,S,F=q.prototype={constructor:q,toString:null,valueOf:null},Z=new q(1),K=20,j=4,G=-7,$=21,pe=-1e7,ae=1e7,re=!1,Y=1,ie=0,ee={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ne="0123456789abcdefghijklmnopqrstuvwxyz";function q(g,m){var A,D,I,N,R,C,M,H,V=this;if(!(V instanceof q))return new q(g,m);if(m==null){if(g&&g._isBigNumber===!0){V.s=g.s,!g.c||g.e>ae?V.c=V.e=null:g.e<pe?V.c=[V.e=0]:(V.e=g.e,V.c=g.c.slice());return}if((C=typeof g=="number")&&g*0==0){if(V.s=1/g<0?(g=-g,-1):1,g===~~g){for(N=0,R=g;R>=10;R/=10,N++);N>ae?V.c=V.e=null:(V.e=N,V.c=[g]);return}H=String(g)}else{if(!r.test(H=String(g)))return S(V,H,C);V.s=H.charCodeAt(0)==45?(H=H.slice(1),-1):1}(N=H.indexOf("."))>-1&&(H=H.replace(".","")),(R=H.search(/e/i))>0?(N<0&&(N=R),N+=+H.slice(R+1),H=H.substring(0,R)):N<0&&(N=H.length)}else{if(U(m,2,ne.length,"Base"),m==10)return V=new q(g),se(V,K+V.e+1,j);if(H=String(g),C=typeof g=="number"){if(g*0!=0)return S(V,H,C,m);if(V.s=1/g<0?(H=H.slice(1),-1):1,q.DEBUG&&H.replace(/^0\.0*|\./,"").length>15)throw Error(o+g)}else V.s=H.charCodeAt(0)===45?(H=H.slice(1),-1):1;for(A=ne.slice(0,m),N=R=0,M=H.length;R<M;R++)if(A.indexOf(D=H.charAt(R))<0){if(D=="."){if(R>N){N=M;continue}}else if(!I&&(H==H.toUpperCase()&&(H=H.toLowerCase())||H==H.toLowerCase()&&(H=H.toUpperCase()))){I=!0,R=-1,N=0;continue}return S(V,String(g),C,m)}C=!1,H=_(H,m,10,V.s),(N=H.indexOf("."))>-1?H=H.replace(".",""):N=H.length}for(R=0;H.charCodeAt(R)===48;R++);for(M=H.length;H.charCodeAt(--M)===48;);if(H=H.slice(R,++M)){if(M-=R,C&&q.DEBUG&&M>15&&(g>l||g!==i(g)))throw Error(o+V.s*g);if((N=N-R-1)>ae)V.c=V.e=null;else if(N<pe)V.c=[V.e=0];else{if(V.e=N,V.c=[],R=(N+1)%u,N<0&&(R+=u),R<M){for(R&&V.c.push(+H.slice(0,R)),M-=u;R<M;)V.c.push(+H.slice(R,R+=u));R=u-(H=H.slice(R)).length}else R-=M;for(;R--;H+="0");V.c.push(+H)}}else V.c=[V.e=0]}q.clone=w,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(g){var m,A;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(m="DECIMAL_PLACES")&&(A=g[m],U(A,0,y,m),K=A),g.hasOwnProperty(m="ROUNDING_MODE")&&(A=g[m],U(A,0,8,m),j=A),g.hasOwnProperty(m="EXPONENTIAL_AT")&&(A=g[m],A&&A.pop?(U(A[0],-y,0,m),U(A[1],0,y,m),G=A[0],$=A[1]):(U(A,-y,y,m),G=-($=A<0?-A:A))),g.hasOwnProperty(m="RANGE"))if(A=g[m],A&&A.pop)U(A[0],-y,-1,m),U(A[1],1,y,m),pe=A[0],ae=A[1];else if(U(A,-y,y,m),A)pe=-(ae=A<0?-A:A);else throw Error(s+m+" cannot be zero: "+A);if(g.hasOwnProperty(m="CRYPTO"))if(A=g[m],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=A;else throw re=!A,Error(s+"crypto unavailable");else re=A;else throw Error(s+m+" not true or false: "+A);if(g.hasOwnProperty(m="MODULO_MODE")&&(A=g[m],U(A,0,9,m),Y=A),g.hasOwnProperty(m="POW_PRECISION")&&(A=g[m],U(A,0,y,m),ie=A),g.hasOwnProperty(m="FORMAT"))if(A=g[m],typeof A=="object")ee=A;else throw Error(s+m+" not an object: "+A);if(g.hasOwnProperty(m="ALPHABET"))if(A=g[m],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))ne=A;else throw Error(s+m+" invalid: "+A)}else throw Error(s+"Object expected: "+g);return{DECIMAL_PLACES:K,ROUNDING_MODE:j,EXPONENTIAL_AT:[G,$],RANGE:[pe,ae],CRYPTO:re,MODULO_MODE:Y,POW_PRECISION:ie,FORMAT:ee,ALPHABET:ne}},q.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!q.DEBUG)return!0;var m,A,D=g.c,I=g.e,N=g.s;e:if({}.toString.call(D)=="[object Array]"){if((N===1||N===-1)&&I>=-y&&I<=y&&I===i(I)){if(D[0]===0){if(I===0&&D.length===1)return!0;break e}if(m=(I+1)%u,m<1&&(m+=u),String(D[0]).length==m){for(m=0;m<D.length;m++)if(A=D[m],A<0||A>=a||A!==i(A))break e;if(A!==0)return!0}}}else if(D===null&&I===null&&(N===null||N===1||N===-1))return!0;throw Error(s+"Invalid BigNumber: "+g)},q.maximum=q.max=function(){return oe(arguments,F.lt)},q.minimum=q.min=function(){return oe(arguments,F.gt)},q.random=function(){var g=9007199254740992,m=Math.random()*g&2097151?function(){return i(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var D,I,N,R,C,M=0,H=[],V=new q(Z);if(A==null?A=K:U(A,0,y),R=n(A/u),re)if(crypto.getRandomValues){for(D=crypto.getRandomValues(new Uint32Array(R*=2));M<R;)C=D[M]*131072+(D[M+1]>>>11),C>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),D[M]=I[0],D[M+1]=I[1]):(H.push(C%1e14),M+=2);M=R/2}else if(crypto.randomBytes){for(D=crypto.randomBytes(R*=7);M<R;)C=(D[M]&31)*281474976710656+D[M+1]*1099511627776+D[M+2]*4294967296+D[M+3]*16777216+(D[M+4]<<16)+(D[M+5]<<8)+D[M+6],C>=9e15?crypto.randomBytes(7).copy(D,M):(H.push(C%1e14),M+=7);M=R/7}else throw re=!1,Error(s+"crypto unavailable");if(!re)for(;M<R;)C=m(),C<9e15&&(H[M++]=C%1e14);for(R=H[--M],A%=u,R&&A&&(C=f[u-A],H[M]=i(R/C)*C);H[M]===0;H.pop(),M--);if(M<0)H=[N=0];else{for(N=-1;H[0]===0;H.splice(0,1),N-=u);for(M=1,C=H[0];C>=10;C/=10,M++);M<u&&(N-=u-M)}return V.e=N,V.c=H,V}}(),q.sum=function(){for(var g=1,m=arguments,A=new q(m[0]);g<m.length;)A=A.plus(m[g++]);return A},_=function(){var g="0123456789";function m(A,D,I,N){for(var R,C=[0],M,H=0,V=A.length;H<V;){for(M=C.length;M--;C[M]*=D);for(C[0]+=N.indexOf(A.charAt(H++)),R=0;R<C.length;R++)C[R]>I-1&&(C[R+1]==null&&(C[R+1]=0),C[R+1]+=C[R]/I|0,C[R]%=I)}return C.reverse()}return function(A,D,I,N,R){var C,M,H,V,X,ye,we,Pe,$e=A.indexOf("."),it=K,De=j;for($e>=0&&(V=ie,ie=0,A=A.replace(".",""),Pe=new q(D),ye=Pe.pow(A.length-$e),ie=V,Pe.c=m(x(O(ye.c),ye.e,"0"),10,I,g),Pe.e=Pe.c.length),we=m(A,D,I,R?(C=ne,g):(C=g,ne)),H=V=we.length;we[--V]==0;we.pop());if(!we[0])return C.charAt(0);if($e<0?--H:(ye.c=we,ye.e=H,ye.s=N,ye=B(ye,Pe,it,De,I),we=ye.c,X=ye.r,H=ye.e),M=H+it+1,$e=we[M],V=I/2,X=X||M<0||we[M+1]!=null,X=De<4?($e!=null||X)&&(De==0||De==(ye.s<0?3:2)):$e>V||$e==V&&(De==4||X||De==6&&we[M-1]&1||De==(ye.s<0?8:7)),M<1||!we[0])A=X?x(C.charAt(1),-it,C.charAt(0)):C.charAt(0);else{if(we.length=M,X)for(--I;++we[--M]>I;)we[M]=0,M||(++H,we=[1].concat(we));for(V=we.length;!we[--V];);for($e=0,A="";$e<=V;A+=C.charAt(we[$e++]));A=x(A,H,C.charAt(0))}return A}}(),B=function(){function g(D,I,N){var R,C,M,H,V=0,X=D.length,ye=I%d,we=I/d|0;for(D=D.slice();X--;)M=D[X]%d,H=D[X]/d|0,R=we*M+H*ye,C=ye*M+R%d*d+V,V=(C/N|0)+(R/d|0)+we*H,D[X]=C%N;return V&&(D=[V].concat(D)),D}function m(D,I,N,R){var C,M;if(N!=R)M=N>R?1:-1;else for(C=M=0;C<N;C++)if(D[C]!=I[C]){M=D[C]>I[C]?1:-1;break}return M}function A(D,I,N,R){for(var C=0;N--;)D[N]-=C,C=D[N]<I[N]?1:0,D[N]=C*R+D[N]-I[N];for(;!D[0]&&D.length>1;D.splice(0,1));}return function(D,I,N,R,C){var M,H,V,X,ye,we,Pe,$e,it,De,Me,vt,ni,ss,os,Yt,Dn,qt=D.s==I.s?1:-1,At=D.c,Qe=I.c;if(!At||!At[0]||!Qe||!Qe[0])return new q(!D.s||!I.s||(At?Qe&&At[0]==Qe[0]:!Qe)?NaN:At&&At[0]==0||!Qe?qt*0:qt/0);for($e=new q(qt),it=$e.c=[],H=D.e-I.e,qt=N+H+1,C||(C=a,H=E(D.e/u)-E(I.e/u),qt=qt/u|0),V=0;Qe[V]==(At[V]||0);V++);if(Qe[V]>(At[V]||0)&&H--,qt<0)it.push(1),X=!0;else{for(ss=At.length,Yt=Qe.length,V=0,qt+=2,ye=i(C/(Qe[0]+1)),ye>1&&(Qe=g(Qe,ye,C),At=g(At,ye,C),Yt=Qe.length,ss=At.length),ni=Yt,De=At.slice(0,Yt),Me=De.length;Me<Yt;De[Me++]=0);Dn=Qe.slice(),Dn=[0].concat(Dn),os=Qe[0],Qe[1]>=C/2&&os++;do{if(ye=0,M=m(Qe,De,Yt,Me),M<0){if(vt=De[0],Yt!=Me&&(vt=vt*C+(De[1]||0)),ye=i(vt/os),ye>1)for(ye>=C&&(ye=C-1),we=g(Qe,ye,C),Pe=we.length,Me=De.length;m(we,De,Pe,Me)==1;)ye--,A(we,Yt<Pe?Dn:Qe,Pe,C),Pe=we.length,M=1;else ye==0&&(M=ye=1),we=Qe.slice(),Pe=we.length;if(Pe<Me&&(we=[0].concat(we)),A(De,we,Me,C),Me=De.length,M==-1)for(;m(Qe,De,Yt,Me)<1;)ye++,A(De,Yt<Me?Dn:Qe,Me,C),Me=De.length}else M===0&&(ye++,De=[0]);it[V++]=ye,De[0]?De[Me++]=At[ni]||0:(De=[At[ni]],Me=1)}while((ni++<ss||De[0]!=null)&&qt--);X=De[0]!=null,it[0]||it.splice(0,1)}if(C==a){for(V=1,qt=it[0];qt>=10;qt/=10,V++);se($e,N+($e.e=V+H*u-1)+1,R,X)}else $e.e=H,$e.r=+X;return $e}}();function ce(g,m,A,D){var I,N,R,C,M;if(A==null?A=j:U(A,0,8),!g.c)return g.toString();if(I=g.c[0],R=g.e,m==null)M=O(g.c),M=D==1||D==2&&(R<=G||R>=$)?b(M,R):x(M,R,"0");else if(g=se(new q(g),m,A),N=g.e,M=O(g.c),C=M.length,D==1||D==2&&(m<=N||N<=G)){for(;C<m;M+="0",C++);M=b(M,N)}else if(m-=R,M=x(M,N,"0"),N+1>C){if(--m>0)for(M+=".";m--;M+="0");}else if(m+=N-C,m>0)for(N+1==C&&(M+=".");m--;M+="0");return g.s<0&&I?"-"+M:M}function oe(g,m){for(var A,D=1,I=new q(g[0]);D<g.length;D++)if(A=new q(g[D]),A.s)m.call(I,A)&&(I=A);else{I=A;break}return I}function le(g,m,A){for(var D=1,I=m.length;!m[--I];m.pop());for(I=m[0];I>=10;I/=10,D++);return(A=D+A*u-1)>ae?g.c=g.e=null:A<pe?g.c=[g.e=0]:(g.e=A,g.c=m),g}S=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,m=/^([^.]+)\.$/,A=/^\.([^.]+)$/,D=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,R,C,M){var H,V=C?R:R.replace(I,"");if(D.test(V))N.s=isNaN(V)?null:V<0?-1:1;else{if(!C&&(V=V.replace(g,function(X,ye,we){return H=(we=we.toLowerCase())=="x"?16:we=="b"?2:8,!M||M==H?ye:X}),M&&(H=M,V=V.replace(m,"$1").replace(A,"0.$1")),R!=V))return new q(V,H);if(q.DEBUG)throw Error(s+"Not a"+(M?" base "+M:"")+" number: "+R);N.s=null}N.c=N.e=null}}();function se(g,m,A,D){var I,N,R,C,M,H,V,X=g.c,ye=f;if(X){e:{for(I=1,C=X[0];C>=10;C/=10,I++);if(N=m-I,N<0)N+=u,R=m,M=X[H=0],V=M/ye[I-R-1]%10|0;else if(H=n((N+1)/u),H>=X.length)if(D){for(;X.length<=H;X.push(0));M=V=0,I=1,N%=u,R=N-u+1}else break e;else{for(M=C=X[H],I=1;C>=10;C/=10,I++);N%=u,R=N-u+I,V=R<0?0:M/ye[I-R-1]%10|0}if(D=D||m<0||X[H+1]!=null||(R<0?M:M%ye[I-R-1]),D=A<4?(V||D)&&(A==0||A==(g.s<0?3:2)):V>5||V==5&&(A==4||D||A==6&&(N>0?R>0?M/ye[I-R]:0:X[H-1])%10&1||A==(g.s<0?8:7)),m<1||!X[0])return X.length=0,D?(m-=g.e+1,X[0]=ye[(u-m%u)%u],g.e=-m||0):X[0]=g.e=0,g;if(N==0?(X.length=H,C=1,H--):(X.length=H+1,C=ye[u-N],X[H]=R>0?i(M/ye[I-R]%ye[R])*C:0),D)for(;;)if(H==0){for(N=1,R=X[0];R>=10;R/=10,N++);for(R=X[0]+=C,C=1;R>=10;R/=10,C++);N!=C&&(g.e++,X[0]==a&&(X[0]=1));break}else{if(X[H]+=C,X[H]!=a)break;X[H--]=0,C=1}for(N=X.length;X[--N]===0;X.pop());}g.e>ae?g.c=g.e=null:g.e<pe&&(g.c=[g.e=0])}return g}function ue(g){var m,A=g.e;return A===null?g.toString():(m=O(g.c),m=A<=G||A>=$?b(m,A):x(m,A,"0"),g.s<0?"-"+m:m)}return F.absoluteValue=F.abs=function(){var g=new q(this);return g.s<0&&(g.s=1),g},F.comparedTo=function(g,m){return L(this,new q(g,m))},F.decimalPlaces=F.dp=function(g,m){var A,D,I,N=this;if(g!=null)return U(g,0,y),m==null?m=j:U(m,0,8),se(new q(N),g+N.e+1,m);if(!(A=N.c))return null;if(D=((I=A.length-1)-E(this.e/u))*u,I=A[I])for(;I%10==0;I/=10,D--);return D<0&&(D=0),D},F.dividedBy=F.div=function(g,m){return B(this,new q(g,m),K,j)},F.dividedToIntegerBy=F.idiv=function(g,m){return B(this,new q(g,m),0,1)},F.exponentiatedBy=F.pow=function(g,m){var A,D,I,N,R,C,M,H,V,X=this;if(g=new q(g),g.c&&!g.isInteger())throw Error(s+"Exponent not an integer: "+ue(g));if(m!=null&&(m=new q(m)),C=g.e>14,!X.c||!X.c[0]||X.c[0]==1&&!X.e&&X.c.length==1||!g.c||!g.c[0])return V=new q(Math.pow(+ue(X),C?2-T(g):+ue(g))),m?V.mod(m):V;if(M=g.s<0,m){if(m.c?!m.c[0]:!m.s)return new q(NaN);D=!M&&X.isInteger()&&m.isInteger(),D&&(X=X.mod(m))}else{if(g.e>9&&(X.e>0||X.e<-1||(X.e==0?X.c[0]>1||C&&X.c[1]>=24e7:X.c[0]<8e13||C&&X.c[0]<=9999975e7)))return N=X.s<0&&T(g)?-0:0,X.e>-1&&(N=1/N),new q(M?1/N:N);ie&&(N=n(ie/u+2))}for(C?(A=new q(.5),M&&(g.s=1),H=T(g)):(I=Math.abs(+ue(g)),H=I%2),V=new q(Z);;){if(H){if(V=V.times(X),!V.c)break;N?V.c.length>N&&(V.c.length=N):D&&(V=V.mod(m))}if(I){if(I=i(I/2),I===0)break;H=I%2}else if(g=g.times(A),se(g,g.e+1,1),g.e>14)H=T(g);else{if(I=+ue(g),I===0)break;H=I%2}X=X.times(X),N?X.c&&X.c.length>N&&(X.c.length=N):D&&(X=X.mod(m))}return D?V:(M&&(V=Z.div(V)),m?V.mod(m):N?se(V,ie,j,R):V)},F.integerValue=function(g){var m=new q(this);return g==null?g=j:U(g,0,8),se(m,m.e+1,g)},F.isEqualTo=F.eq=function(g,m){return L(this,new q(g,m))===0},F.isFinite=function(){return!!this.c},F.isGreaterThan=F.gt=function(g,m){return L(this,new q(g,m))>0},F.isGreaterThanOrEqualTo=F.gte=function(g,m){return(m=L(this,new q(g,m)))===1||m===0},F.isInteger=function(){return!!this.c&&E(this.e/u)>this.c.length-2},F.isLessThan=F.lt=function(g,m){return L(this,new q(g,m))<0},F.isLessThanOrEqualTo=F.lte=function(g,m){return(m=L(this,new q(g,m)))===-1||m===0},F.isNaN=function(){return!this.s},F.isNegative=function(){return this.s<0},F.isPositive=function(){return this.s>0},F.isZero=function(){return!!this.c&&this.c[0]==0},F.minus=function(g,m){var A,D,I,N,R=this,C=R.s;if(g=new q(g,m),m=g.s,!C||!m)return new q(NaN);if(C!=m)return g.s=-m,R.plus(g);var M=R.e/u,H=g.e/u,V=R.c,X=g.c;if(!M||!H){if(!V||!X)return V?(g.s=-m,g):new q(X?R:NaN);if(!V[0]||!X[0])return X[0]?(g.s=-m,g):new q(V[0]?R:j==3?-0:0)}if(M=E(M),H=E(H),V=V.slice(),C=M-H){for((N=C<0)?(C=-C,I=V):(H=M,I=X),I.reverse(),m=C;m--;I.push(0));I.reverse()}else for(D=(N=(C=V.length)<(m=X.length))?C:m,C=m=0;m<D;m++)if(V[m]!=X[m]){N=V[m]<X[m];break}if(N&&(I=V,V=X,X=I,g.s=-g.s),m=(D=X.length)-(A=V.length),m>0)for(;m--;V[A++]=0);for(m=a-1;D>C;){if(V[--D]<X[D]){for(A=D;A&&!V[--A];V[A]=m);--V[A],V[D]+=a}V[D]-=X[D]}for(;V[0]==0;V.splice(0,1),--H);return V[0]?le(g,V,H):(g.s=j==3?-1:1,g.c=[g.e=0],g)},F.modulo=F.mod=function(g,m){var A,D,I=this;return g=new q(g,m),!I.c||!g.s||g.c&&!g.c[0]?new q(NaN):!g.c||I.c&&!I.c[0]?new q(I):(Y==9?(D=g.s,g.s=1,A=B(I,g,0,3),g.s=D,A.s*=D):A=B(I,g,0,Y),g=I.minus(A.times(g)),!g.c[0]&&Y==1&&(g.s=I.s),g)},F.multipliedBy=F.times=function(g,m){var A,D,I,N,R,C,M,H,V,X,ye,we,Pe,$e,it,De=this,Me=De.c,vt=(g=new q(g,m)).c;if(!Me||!vt||!Me[0]||!vt[0])return!De.s||!g.s||Me&&!Me[0]&&!vt||vt&&!vt[0]&&!Me?g.c=g.e=g.s=null:(g.s*=De.s,!Me||!vt?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(D=E(De.e/u)+E(g.e/u),g.s*=De.s,M=Me.length,X=vt.length,M<X&&(Pe=Me,Me=vt,vt=Pe,I=M,M=X,X=I),I=M+X,Pe=[];I--;Pe.push(0));for($e=a,it=d,I=X;--I>=0;){for(A=0,ye=vt[I]%it,we=vt[I]/it|0,R=M,N=I+R;N>I;)H=Me[--R]%it,V=Me[R]/it|0,C=we*H+V*ye,H=ye*H+C%it*it+Pe[N]+A,A=(H/$e|0)+(C/it|0)+we*V,Pe[N--]=H%$e;Pe[N]=A}return A?++D:Pe.splice(0,1),le(g,Pe,D)},F.negated=function(){var g=new q(this);return g.s=-g.s||null,g},F.plus=function(g,m){var A,D=this,I=D.s;if(g=new q(g,m),m=g.s,!I||!m)return new q(NaN);if(I!=m)return g.s=-m,D.minus(g);var N=D.e/u,R=g.e/u,C=D.c,M=g.c;if(!N||!R){if(!C||!M)return new q(I/0);if(!C[0]||!M[0])return M[0]?g:new q(C[0]?D:I*0)}if(N=E(N),R=E(R),C=C.slice(),I=N-R){for(I>0?(R=N,A=M):(I=-I,A=C),A.reverse();I--;A.push(0));A.reverse()}for(I=C.length,m=M.length,I-m<0&&(A=M,M=C,C=A,m=I),I=0;m;)I=(C[--m]=C[m]+M[m]+I)/a|0,C[m]=a===C[m]?0:C[m]%a;return I&&(C=[I].concat(C),++R),le(g,C,R)},F.precision=F.sd=function(g,m){var A,D,I,N=this;if(g!=null&&g!==!!g)return U(g,1,y),m==null?m=j:U(m,0,8),se(new q(N),g,m);if(!(A=N.c))return null;if(I=A.length-1,D=I*u+1,I=A[I]){for(;I%10==0;I/=10,D--);for(I=A[0];I>=10;I/=10,D++);}return g&&N.e+1>D&&(D=N.e+1),D},F.shiftedBy=function(g){return U(g,-l,l),this.times("1e"+g)},F.squareRoot=F.sqrt=function(){var g,m,A,D,I,N=this,R=N.c,C=N.s,M=N.e,H=K+4,V=new q("0.5");if(C!==1||!R||!R[0])return new q(!C||C<0&&(!R||R[0])?NaN:R?N:1/0);if(C=Math.sqrt(+ue(N)),C==0||C==1/0?(m=O(R),(m.length+M)%2==0&&(m+="0"),C=Math.sqrt(+m),M=E((M+1)/2)-(M<0||M%2),C==1/0?m="5e"+M:(m=C.toExponential(),m=m.slice(0,m.indexOf("e")+1)+M),A=new q(m)):A=new q(C+""),A.c[0]){for(M=A.e,C=M+H,C<3&&(C=0);;)if(I=A,A=V.times(I.plus(B(N,I,H,1))),O(I.c).slice(0,C)===(m=O(A.c)).slice(0,C))if(A.e<M&&--C,m=m.slice(C-3,C+1),m=="9999"||!D&&m=="4999"){if(!D&&(se(I,I.e+K+2,0),I.times(I).eq(N))){A=I;break}H+=4,C+=4,D=1}else{(!+m||!+m.slice(1)&&m.charAt(0)=="5")&&(se(A,A.e+K+2,1),g=!A.times(A).eq(N));break}}return se(A,A.e+K+1,j,g)},F.toExponential=function(g,m){return g!=null&&(U(g,0,y),g++),ce(this,g,m,1)},F.toFixed=function(g,m){return g!=null&&(U(g,0,y),g=g+this.e+1),ce(this,g,m)},F.toFormat=function(g,m,A){var D,I=this;if(A==null)g!=null&&m&&typeof m=="object"?(A=m,m=null):g&&typeof g=="object"?(A=g,g=m=null):A=ee;else if(typeof A!="object")throw Error(s+"Argument not an object: "+A);if(D=I.toFixed(g,m),I.c){var N,R=D.split("."),C=+A.groupSize,M=+A.secondaryGroupSize,H=A.groupSeparator||"",V=R[0],X=R[1],ye=I.s<0,we=ye?V.slice(1):V,Pe=we.length;if(M&&(N=C,C=M,M=N,Pe-=N),C>0&&Pe>0){for(N=Pe%C||C,V=we.substr(0,N);N<Pe;N+=C)V+=H+we.substr(N,C);M>0&&(V+=H+we.slice(N)),ye&&(V="-"+V)}D=X?V+(A.decimalSeparator||"")+((M=+A.fractionGroupSize)?X.replace(new RegExp("\\d{"+M+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):X):V}return(A.prefix||"")+D+(A.suffix||"")},F.toFraction=function(g){var m,A,D,I,N,R,C,M,H,V,X,ye,we=this,Pe=we.c;if(g!=null&&(C=new q(g),!C.isInteger()&&(C.c||C.s!==1)||C.lt(Z)))throw Error(s+"Argument "+(C.isInteger()?"out of range: ":"not an integer: ")+ue(C));if(!Pe)return new q(we);for(m=new q(Z),H=A=new q(Z),D=M=new q(Z),ye=O(Pe),N=m.e=ye.length-we.e-1,m.c[0]=f[(R=N%u)<0?u+R:R],g=!g||C.comparedTo(m)>0?N>0?m:H:C,R=ae,ae=1/0,C=new q(ye),M.c[0]=0;V=B(C,m,0,1),I=A.plus(V.times(D)),I.comparedTo(g)!=1;)A=D,D=I,H=M.plus(V.times(I=H)),M=I,m=C.minus(V.times(I=m)),C=I;return I=B(g.minus(A),D,0,1),M=M.plus(I.times(H)),A=A.plus(I.times(D)),M.s=H.s=we.s,N=N*2,X=B(H,D,N,j).minus(we).abs().comparedTo(B(M,A,N,j).minus(we).abs())<1?[H,D]:[M,A],ae=R,X},F.toNumber=function(){return+ue(this)},F.toPrecision=function(g,m){return g!=null&&U(g,1,y),ce(this,g,m,2)},F.toString=function(g){var m,A=this,D=A.s,I=A.e;return I===null?D?(m="Infinity",D<0&&(m="-"+m)):m="NaN":(g==null?m=I<=G||I>=$?b(O(A.c),I):x(O(A.c),I,"0"):g===10?(A=se(new q(A),K+I+1,j),m=x(O(A.c),A.e,"0")):(U(g,2,ne.length,"Base"),m=_(x(O(A.c),I,"0"),10,g,D,!0)),D<0&&A.c[0]&&(m="-"+m)),m},F.valueOf=F.toJSON=function(){return ue(this)},F._isBigNumber=!0,P!=null&&q.set(P),q}function E(P){var B=P|0;return P>0||P===B?B:B-1}function O(P){for(var B,_,S=1,F=P.length,Z=P[0]+"";S<F;){for(B=P[S++]+"",_=u-B.length;_--;B="0"+B);Z+=B}for(F=Z.length;Z.charCodeAt(--F)===48;);return Z.slice(0,F+1||1)}function L(P,B){var _,S,F=P.c,Z=B.c,K=P.s,j=B.s,G=P.e,$=B.e;if(!K||!j)return null;if(_=F&&!F[0],S=Z&&!Z[0],_||S)return _?S?0:-j:K;if(K!=j)return K;if(_=K<0,S=G==$,!F||!Z)return S?0:!F^_?1:-1;if(!S)return G>$^_?1:-1;for(j=(G=F.length)<($=Z.length)?G:$,K=0;K<j;K++)if(F[K]!=Z[K])return F[K]>Z[K]^_?1:-1;return G==$?0:G>$^_?1:-1}function U(P,B,_,S){if(P<B||P>_||P!==i(P))throw Error(s+(S||"Argument")+(typeof P=="number"?P<B||P>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(P))}function T(P){var B=P.c.length-1;return E(P.e/u)==B&&P.c[B]%2!=0}function b(P,B){return(P.length>1?P.charAt(0)+"."+P.slice(1):P)+(B<0?"e":"e+")+B}function x(P,B,_){var S,F;if(B<0){for(F=_+".";++B;F+=_);P=F+P}else if(S=P.length,++B>S){for(F=_,B-=S;--B;F+=_);P+=F}else B<S&&(P=P.slice(0,B)+"."+P.slice(B));return P}e=w(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof pf<"u"&&pf.exports?pf.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(Z_)});var He=v(fe=>{"use strict";c();Object.defineProperty(fe,"__esModule",{value:!0});fe.ErrGasLimitShouldBe0ForInnerTransaction=fe.ErrInvalidRelayedV2BuilderArguments=fe.ErrInvalidRelayedV1BuilderArguments=fe.ErrNotImplemented=fe.ErrContractInteraction=fe.ErrCodec=fe.ErrCannotParseTransactionOutcome=fe.ErrCannotParseContractResults=fe.ErrMissingFieldOnEnum=fe.ErrMissingFieldOnStruct=fe.ErrTypeInferenceSystemRequiresRegularJavascriptObjects=fe.ErrTypingSystem=fe.ErrMock=fe.ErrContractHasNoAddress=fe.ErrContract=fe.ErrExpectedTransactionEventsNotFound=fe.ErrExpectedTransactionStatusNotReached=fe.ErrTransactionWatcherTimeout=fe.ErrAsyncTimerAborted=fe.ErrAsyncTimerAlreadyRunning=fe.ErrInvalidFunctionName=fe.ErrSignatureCannotCreate=fe.ErrTransactionOptionsInvalid=fe.ErrTransactionVersionInvalid=fe.ErrNonceInvalid=fe.ErrNotEnoughGas=fe.ErrAddressEmpty=fe.ErrAddressBadHrp=fe.ErrAddressCannotCreate=fe.ErrUnexpectedCondition=fe.ErrInvariantFailed=fe.ErrBadType=fe.ErrUnsupportedOperation=fe.ErrInvalidArgument=fe.Err=void 0;var Be=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}summary(){let e=[];e.push({name:this.name,message:this.message});let r=this.inner;for(;r;)e.push({name:r.name,message:r.message}),r=r.inner;return e}};fe.Err=Be;var J0=class extends Be{constructor(e,r){super(`Invalid argument: ${e}`,r)}};fe.ErrInvalidArgument=J0;var X0=class extends Be{constructor(e,r="not specified"){super(`Operation "${e}" not supported. Reason: ${r}`)}};fe.ErrUnsupportedOperation=X0;var Z0=class extends Be{constructor(e,r,n){super(`Bad type of "${e}": ${n}. Expected type: ${r}`)}};fe.ErrBadType=Z0;var ey=class extends Be{constructor(e){super(`Invariant failed: [${e}]`)}};fe.ErrInvariantFailed=ey;var ty=class extends Be{constructor(e){super(`Unexpected condition: [${e}]`)}};fe.ErrUnexpectedCondition=ty;var ry=class extends Be{constructor(e,r){let n=`Cannot create address from: ${e}`;super(n,r)}};fe.ErrAddressCannotCreate=ry;var ny=class extends Be{constructor(e,r){super(`Wrong address HRP. Expected: ${e}, got ${r}`)}};fe.ErrAddressBadHrp=ny;var iy=class extends Be{constructor(){super("Address is empty")}};fe.ErrAddressEmpty=iy;var sy=class extends Be{constructor(e){super(`Not enough gas provided: ${e}`)}};fe.ErrNotEnoughGas=sy;var oy=class extends Be{constructor(e){super(`Invalid nonce: ${e}`)}};fe.ErrNonceInvalid=oy;var ay=class extends Be{constructor(e){super(`Invalid transaction version: ${e}`)}};fe.ErrTransactionVersionInvalid=ay;var uy=class extends Be{constructor(e){super(`Invalid transaction options: ${e}`)}};fe.ErrTransactionOptionsInvalid=uy;var cy=class extends Be{constructor(e,r){let n=`Cannot create signature from: ${e}`;super(n,r)}};fe.ErrSignatureCannotCreate=cy;var ly=class extends Be{constructor(){super("Invalid function name")}};fe.ErrInvalidFunctionName=ly;var fy=class extends Be{constructor(){super("Async timer already running")}};fe.ErrAsyncTimerAlreadyRunning=fy;var hy=class extends Be{constructor(){super("Async timer aborted")}};fe.ErrAsyncTimerAborted=hy;var dy=class extends Be{constructor(){super("TransactionWatcher has timed out")}};fe.ErrTransactionWatcherTimeout=dy;var py=class extends Be{constructor(){super("Expected transaction status not reached")}};fe.ErrExpectedTransactionStatusNotReached=py;var gy=class extends Be{constructor(){super("Expected transaction events not found")}};fe.ErrExpectedTransactionEventsNotFound=gy;var gf=class extends Be{constructor(e){super(e)}};fe.ErrContract=gf;var yy=class extends gf{constructor(){super(`
The smart contract has no address set. Make sure you provide the address in the constructor, or call setAddress() appropriately.
If you need to recompute the address of the contract, make use of SmartContract.computeAddress() (static method). 
`)}};fe.ErrContractHasNoAddress=yy;var my=class extends Be{constructor(e){super(e)}};fe.ErrMock=my;var yf=class extends Be{constructor(e){super(e)}};fe.ErrTypingSystem=yf;var wy=class extends yf{constructor(e){super(`
argument at position ${e} seems to be a TypedValue. The automatic type inference system requires regular javascript objects as input.
This error might occur when you pass a TypedValue to contract.methods.myFunction([...]). For passing TypedValues instead of regular javascript objects, and bypass the automatic type inference system, use contract.methodsExplicit.myFunction([...]) instead.
Also see https://github.com/multiversx/mx-sdk-js-core/pull/187.
`)}};fe.ErrTypeInferenceSystemRequiresRegularJavascriptObjects=wy;var Ey=class extends Be{constructor(e,r){super(`field ${e} does not exist on struct ${r}`)}};fe.ErrMissingFieldOnStruct=Ey;var vy=class extends Be{constructor(e,r){super(`field ${e} does not exist on enum ${r}`)}};fe.ErrMissingFieldOnEnum=vy;var Ay=class extends Be{constructor(e){super(`cannot parse contract results: ${e}`)}};fe.ErrCannotParseContractResults=Ay;var _y=class extends Be{constructor(e,r){super(`cannot parse outcome of transaction ${e}: ${r}`)}};fe.ErrCannotParseTransactionOutcome=_y;var by=class extends Be{constructor(e){super(e)}};fe.ErrCodec=by;var Iy=class extends Be{constructor(e){super(e)}};fe.ErrContractInteraction=Iy;var Sy=class extends Be{constructor(){super("Method not yet implemented")}};fe.ErrNotImplemented=Sy;var Cy=class extends Be{constructor(){super("invalid arguments for relayed v1 builder")}};fe.ErrInvalidRelayedV1BuilderArguments=Cy;var Ty=class extends Be{constructor(){super("invalid arguments for relayed v2 builder")}};fe.ErrInvalidRelayedV2BuilderArguments=Ty;var xy=class extends Be{constructor(){super("gas limit must be 0 for the inner transaction for relayed v2")}};fe.ErrGasLimitShouldBe0ForInnerTransaction=xy});var rb=v(ii=>{"use strict";c();var SL=ii&&ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ii,"__esModule",{value:!0});ii.TokenPayment=ii.TokenTransfer=void 0;var uc=SL(Wt()),CL=He(),eb="EGLD",tb=18;uc.default.set({ROUNDING_MODE:1});var zr=class{constructor(e){let r=new uc.default(e.amountAsBigInteger);if(!r.isInteger()||r.isNegative())throw new CL.ErrInvalidArgument(`bad amountAsBigInteger: ${e.amountAsBigInteger}`);this.tokenIdentifier=e.tokenIdentifier,this.nonce=e.nonce,this.amountAsBigInteger=r,this.numDecimals=e.numDecimals}static egldFromAmount(e){let r=new uc.default(e).shiftedBy(tb).decimalPlaces(0);return this.egldFromBigInteger(r)}static egldFromBigInteger(e){return new zr({tokenIdentifier:eb,nonce:0,amountAsBigInteger:e,numDecimals:tb})}static fungibleFromAmount(e,r,n){let i=new uc.default(r).shiftedBy(n).decimalPlaces(0);return this.fungibleFromBigInteger(e,i,n)}static fungibleFromBigInteger(e,r,n=0){return new zr({tokenIdentifier:e,nonce:0,amountAsBigInteger:r,numDecimals:n})}static nonFungible(e,r){return new zr({tokenIdentifier:e,nonce:r,amountAsBigInteger:1,numDecimals:0})}static semiFungible(e,r,n){return new zr({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:0})}static metaEsdtFromAmount(e,r,n,i){let s=new uc.default(n).shiftedBy(i).decimalPlaces(0);return this.metaEsdtFromBigInteger(e,r,s,i)}static metaEsdtFromBigInteger(e,r,n,i=0){return new zr({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}toString(){return this.amountAsBigInteger.toFixed(0)}valueOf(){return this.amountAsBigInteger}toPrettyString(){return`${this.toAmount()} ${this.tokenIdentifier}`}toAmount(){return this.amountAsBigInteger.shiftedBy(-this.numDecimals).toFixed(this.numDecimals)}isEgld(){return this.tokenIdentifier==eb}isFungible(){return this.nonce==0}};ii.TokenTransfer=zr;var Ny=class extends zr{constructor(e,r,n,i){super({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}};ii.TokenPayment=Ny});var Ro=v(ke=>{"use strict";c();Object.defineProperty(ke,"__esModule",{value:!0});ke.ARGUMENTS_SEPARATOR=ke.ESDT_TRANSFER_VALUE=ke.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME=ke.ESDTNFT_TRANSFER_FUNCTION_NAME=ke.ESDT_TRANSFER_FUNCTION_NAME=ke.ESDT_TRANSFER_GAS_LIMIT=ke.TRANSACTION_VERSION_WITH_OPTIONS=ke.TRANSACTION_VERSION_DEFAULT=ke.TRANSACTION_OPTIONS_TX_GUARDED=ke.TRANSACTION_OPTIONS_TX_HASH_SIGN=ke.TRANSACTION_OPTIONS_DEFAULT=ke.TRANSACTION_MIN_GAS_PRICE=void 0;ke.TRANSACTION_MIN_GAS_PRICE=1e9;ke.TRANSACTION_OPTIONS_DEFAULT=0;ke.TRANSACTION_OPTIONS_TX_HASH_SIGN=1;ke.TRANSACTION_OPTIONS_TX_GUARDED=2;ke.TRANSACTION_VERSION_DEFAULT=1;ke.TRANSACTION_VERSION_WITH_OPTIONS=2;ke.ESDT_TRANSFER_GAS_LIMIT=5e5;ke.ESDT_TRANSFER_FUNCTION_NAME="ESDTTransfer";ke.ESDTNFT_TRANSFER_FUNCTION_NAME="ESDTNFTTransfer";ke.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME="MultiESDTNFTTransfer";ke.ESDT_TRANSFER_VALUE="0";ke.ARGUMENTS_SEPARATOR="@"});var fr=v(Je=>{"use strict";c();var TL=Je&&Je.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xL=Je&&Je.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NL=Je&&Je.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&TL(e,t,r);return xL(e,t),e};Object.defineProperty(Je,"__esModule",{value:!0});Je.isEmpty=Je.guardEmpty=Je.guardNotEmpty=Je.guardLength=Je.guardSameLength=Je.guardValueIsSetWithMessage=Je.guardValueIsSet=Je.guardTrue=void 0;var Lo=NL(He());function DL(t,e){if(!t)throw new Lo.ErrInvariantFailed(`[<${e}>] isn't true`)}Je.guardTrue=DL;function OL(t,e){nb(`${t} isn't set (null or undefined)`,e)}Je.guardValueIsSet=OL;function nb(t,e){if(e==null||e===void 0)throw new Lo.ErrInvariantFailed(t)}Je.guardValueIsSetWithMessage=nb;function PL(t,e){if(t=t||[],e=e||[],t.length!=e.length)throw new Lo.ErrInvariantFailed("arrays do not have the same length")}Je.guardSameLength=PL;function BL(t,e){let r=t.length||0;if(r!=e)throw new Lo.ErrInvariantFailed(`wrong length, expected: ${e}, actual: ${r}`)}Je.guardLength=BL;function RL(t,e){if(Dy(t))throw new Lo.ErrInvariantFailed(`${e} is empty`)}Je.guardNotEmpty=RL;function LL(t,e){if(!Dy(t))throw new Lo.ErrInvariantFailed(`${e} is not empty`)}Je.guardEmpty=LL;function Dy(t){return t.isEmpty?t.isEmpty():t.length===0}Je.isEmpty=Dy});var ib=v(mf=>{"use strict";c();Object.defineProperty(mf,"__esModule",{value:!0});mf.getJavascriptPrototypesInHierarchy=void 0;function FL(t,e){let r=[],n=Object.getPrototypeOf(t);for(;n&&e(n);)r.push(n),n=Object.getPrototypeOf(n);return r}mf.getJavascriptPrototypesInHierarchy=FL});var mt=v(yt=>{"use strict";c();Object.defineProperty(yt,"__esModule",{value:!0});yt.NullType=yt.TypePlaceholder=yt.isTyped=yt.PrimitiveValue=yt.TypedValue=yt.CustomType=yt.PrimitiveType=yt.TypeCardinality=yt.Type=void 0;var Oy=ib(),sb=fr(),sr=class{constructor(e,r=[],n=Rn.fixed(1)){sb.guardValueIsSet("name",e),this.name=e,this.typeParameters=r,this.cardinality=n}getName(){return this.name}getClassName(){return sr.ClassName}getClassHierarchy(){return Oy.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getFullyQualifiedName(){let e=this.getTypeParameters().map(r=>r.getFullyQualifiedName()).join(", ");return this.isGenericType()?`multiversx:types:${this.getName()}<${e}>`:`multiversx:types:${this.getName()}`}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}getTypeParameters(){return this.typeParameters}isGenericType(){return this.typeParameters.length>0}getFirstTypeParameter(){return sb.guardTrue(this.typeParameters.length>0,"type parameters length > 0"),this.typeParameters[0]}toString(){let e=this.getTypeParameters().map(n=>n.toString()).join(", "),r=e?`<${e}>`:"";return`${this.name}${r}`}equals(e){return sr.equals(this,e)}static equals(e,r){return e.getFullyQualifiedName()==r.getFullyQualifiedName()}static equalsMany(e,r){return e.every((n,i)=>n.equals(r[i]))}static isAssignableFromMany(e,r){return e.every((n,i)=>n.isAssignableFrom(r[i]))}differs(e){return!this.equals(e)}valueOf(){return this.name}isAssignableFrom(e){if(!sr.equalsMany(this.getTypeParameters(),e.getTypeParameters()))return!1;let n=this.getFullyQualifiedName();return sr.getFullyQualifiedNamesInHierarchy(e).includes(n)?!0:e.hasClassOrSuperclass(this.getClassName())}static getFullyQualifiedNamesInHierarchy(e){return Oy.getJavascriptPrototypesInHierarchy(e,i=>i.belongsToTypesystem).map(i=>i.getFullyQualifiedName.call(e))}getNamesOfDependencies(){let e=[];for(let r of this.typeParameters)e.push(r.getName()),e.push(...r.getNamesOfDependencies());return[...new Set(e)]}toJSON(){return{name:this.name,typeParameters:this.typeParameters.map(e=>e.toJSON())}}getCardinality(){return this.cardinality}belongsToTypesystem(){}};yt.Type=sr;sr.ClassName="Type";var Rn=class{constructor(e,r){this.lowerBound=e,this.upperBound=r}static fixed(e){return new Rn(e,e)}static variable(e){return new Rn(0,e)}isSingular(){return this.lowerBound==1&&this.upperBound==1}isSingularOrNone(){return this.lowerBound==0&&this.upperBound==1}isComposite(){return this.upperBound!=1}isFixed(){return this.lowerBound==this.upperBound}getLowerBound(){return this.lowerBound}getUpperBound(){return this.upperBound||Rn.MaxCardinality}};yt.TypeCardinality=Rn;Rn.MaxCardinality=4096;var Fo=class extends sr{constructor(e){super(e)}getClassName(){return Fo.ClassName}};yt.PrimitiveType=Fo;Fo.ClassName="PrimitiveType";var Mo=class extends sr{getClassName(){return Mo.ClassName}};yt.CustomType=Mo;Mo.ClassName="CustomType";var ls=class{constructor(e){this.type=e}getClassName(){return ls.ClassName}getClassHierarchy(){return Oy.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getType(){return this.type}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}belongsToTypesystem(){}};yt.TypedValue=ls;ls.ClassName="TypedValue";var Uo=class extends ls{constructor(e){super(e)}getClassName(){return Uo.ClassName}};yt.PrimitiveValue=Uo;Uo.ClassName="PrimitiveValue";function ML(t){return t.belongsToTypesystem!==void 0}yt.isTyped=ML;var qo=class extends sr{constructor(){super("...")}getClassName(){return qo.ClassName}};yt.TypePlaceholder=qo;qo.ClassName="TypePlaceholder";var Vo=class extends sr{constructor(){super("?")}getClassName(){return Vo.ClassName}};yt.NullType=Vo;Vo.ClassName="NullType"});var ob=v((Ho,jo)=>{c();(function(t){var e=typeof Ho=="object"&&Ho&&!Ho.nodeType&&Ho,r=typeof jo=="object"&&jo&&!jo.nodeType&&jo,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(t=n);var i,s=2147483647,o=36,a=1,u=26,l=38,f=700,d=72,y=128,w="-",E=/^xn--/,O=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=o-a,b=Math.floor,x=String.fromCharCode,P;function B(Y){throw new RangeError(U[Y])}function _(Y,ie){for(var ee=Y.length,ne=[];ee--;)ne[ee]=ie(Y[ee]);return ne}function S(Y,ie){var ee=Y.split("@"),ne="";ee.length>1&&(ne=ee[0]+"@",Y=ee[1]),Y=Y.replace(L,".");var q=Y.split("."),ce=_(q,ie).join(".");return ne+ce}function F(Y){for(var ie=[],ee=0,ne=Y.length,q,ce;ee<ne;)q=Y.charCodeAt(ee++),q>=55296&&q<=56319&&ee<ne?(ce=Y.charCodeAt(ee++),(ce&64512)==56320?ie.push(((q&1023)<<10)+(ce&1023)+65536):(ie.push(q),ee--)):ie.push(q);return ie}function Z(Y){return _(Y,function(ie){var ee="";return ie>65535&&(ie-=65536,ee+=x(ie>>>10&1023|55296),ie=56320|ie&1023),ee+=x(ie),ee}).join("")}function K(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:o}function j(Y,ie){return Y+22+75*(Y<26)-((ie!=0)<<5)}function G(Y,ie,ee){var ne=0;for(Y=ee?b(Y/f):Y>>1,Y+=b(Y/ie);Y>T*u>>1;ne+=o)Y=b(Y/T);return b(ne+(T+1)*Y/(Y+l))}function $(Y){var ie=[],ee=Y.length,ne,q=0,ce=y,oe=d,le,se,ue,g,m,A,D,I,N;for(le=Y.lastIndexOf(w),le<0&&(le=0),se=0;se<le;++se)Y.charCodeAt(se)>=128&&B("not-basic"),ie.push(Y.charCodeAt(se));for(ue=le>0?le+1:0;ue<ee;){for(g=q,m=1,A=o;ue>=ee&&B("invalid-input"),D=K(Y.charCodeAt(ue++)),(D>=o||D>b((s-q)/m))&&B("overflow"),q+=D*m,I=A<=oe?a:A>=oe+u?u:A-oe,!(D<I);A+=o)N=o-I,m>b(s/N)&&B("overflow"),m*=N;ne=ie.length+1,oe=G(q-g,ne,g==0),b(q/ne)>s-ce&&B("overflow"),ce+=b(q/ne),q%=ne,ie.splice(q++,0,ce)}return Z(ie)}function pe(Y){var ie,ee,ne,q,ce,oe,le,se,ue,g,m,A=[],D,I,N,R;for(Y=F(Y),D=Y.length,ie=y,ee=0,ce=d,oe=0;oe<D;++oe)m=Y[oe],m<128&&A.push(x(m));for(ne=q=A.length,q&&A.push(w);ne<D;){for(le=s,oe=0;oe<D;++oe)m=Y[oe],m>=ie&&m<le&&(le=m);for(I=ne+1,le-ie>b((s-ee)/I)&&B("overflow"),ee+=(le-ie)*I,ie=le,oe=0;oe<D;++oe)if(m=Y[oe],m<ie&&++ee>s&&B("overflow"),m==ie){for(se=ee,ue=o;g=ue<=ce?a:ue>=ce+u?u:ue-ce,!(se<g);ue+=o)R=se-g,N=o-g,A.push(x(j(g+R%N,0))),se=b(R/N);A.push(x(j(se,0))),ce=G(ee,I,ne==q),ee=0,++ne}++ee,++ie}return A.join("")}function ae(Y){return S(Y,function(ie){return E.test(ie)?$(ie.slice(4).toLowerCase()):ie})}function re(Y){return S(Y,function(ie){return O.test(ie)?"xn--"+pe(ie):ie})}if(i={version:"1.4.1",ucs2:{decode:F,encode:Z},decode:$,encode:pe,toASCII:re,toUnicode:ae},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&r)if(jo.exports==e)r.exports=i;else for(P in i)i.hasOwnProperty(P)&&(e[P]=i[P]);else t.punycode=i})(Ho)});var lb=v((bX,By)=>{"use strict";c();var ub=ob();function UL(t,e){this.__proto__=new Error(e),this.__proto__.name="BackslashError",this.offset=t}function Py(t){return t>="0"&&t<="7"}function qL(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"}function ab(t){return t=parseInt(t,16),ub.ucs2.encode([t])}function cb(t,e,r){var n=!1,i=[];function s(u){var l=t[u];if(!qL(l))throw new UL(u,"Unexpected token ILLEGAL");return l}for(;e<t.length;){var o=t[e];if(e++,n){switch(n=!1,o){case"n":i.push(`
`);continue;case"r":i.push("\r");continue;case"f":i.push("\f");continue;case"b":i.push("\b");continue;case"t":i.push("	");continue;case"v":i.push("\v");continue;case"\\":i.push("\\");continue}if(o==="x"){i.push(ab(s(e)+s(e+1))),e+=2;continue}if(o==="u"){i.push(ab(s(e)+s(e+1)+s(e+2)+s(e+3))),e+=4;continue}if(Py(o)){var a;Py(a=t[e])&&(e++,o+=a,Py(a=t[e])&&o[0]<="3"&&(e++,o+=a)),i.push(ub.ucs2.encode([parseInt(o,8)]));continue}i.push(o)}else if(o==="\\")n=!0;else if(o===r){e--;break}else i.push(o)}return arguments.length===3?{end:e,value:i.join("")}:i.join("")}By.exports=function(e){return cb(e,0)};By.exports.parseUntil=function(e,r,n){return cb(e,r,n)}});var mb=v((SX,yb)=>{c();var db=lb();yb.exports={validate:VL,parse:HL};function VL(t,e){var r;if(e=e||!1,typeof t!="string")r="Input must be a string";else try{wf(t,0,e,!1)}catch(n){r=n.message}return r}function HL(t,e){if(typeof t!="string")throw new Error("Input must be a string");e=e||!1;var r=wf(t,0,e,!0);return r.value}function pb(t,e){for(var r=t.length,n=e,i,s=e;s<r;s++){var o=t[s];if(o===","){i=s;break}else if(o==="]"||o==="}"){i=s-1;break}else if(!fs(o))throw Ln(t,s,"expecting end of expression or separator")}var a;return i===void 0?(i=r,a=t[i]):(a=t[i],i++),{start:n,end:i,value:a}}function jL(t,e){for(var r=t.length,n=e,i,s=e;s<r;s++){var o=t[s];if(o===":"){i=s;break}else if(!fs(o))throw Ln(t,s,"expecting ':'")}if(i===void 0)throw Ln(t,s,"expecting ':'");return i++,{start:n,end:i}}function wf(t,e,r,n){for(var i=t.length,s,o,a=!1,u=!1,l=!1,f=!1,d=!1,y=!1,w,E=e;E<i;E++){var O=t[E];if(s===void 0){if(!fs(O)){if(O==="[")a=!0;else if(O==="{")u=!0;else if(O==='"')l=!0;else if(KL(t,E)){s=E,E=E+3,o=E,w=!0;break}else if(zL(t,E)){s=E,E=E+4,o=E,w=!1;break}else if(WL(t,E)){s=E,E=E+3,o=E,w=null;break}else if(fb(O))f=!0;else if(O==="-")f=!0;else throw Ln(t,E,"");s=E}}else if(a){var L=kL(t,E,r,n);o=L.end,w=L.value;break}else if(u){var U=QL(t,E,r,n);o=U.end,w=U.value;break}else if(l&&O==='"'&&gb(t,E-1)){o=E,w=db(t.substring(s+1,o));break}else if(f)if(fs(O))y=!0;else if(O===","||O==="]"||O==="}"){w=parseFloat(t.substring(s,o),10),o=E-1;break}else{if(fb(O)&&!y)continue;if(O==="."&&!d&&!y)d=!0;else throw Ln(t,E,"expecting number")}}if(o===void 0)if(f)w=parseFloat(t.substring(s,E),10),o=E-1;else throw Ln(t,E,"unclosed statement");return o++,{value:w,start:s,end:o}}function GL(t,e){for(var r=t.length,n,i,s=e;s<r;s++){var o=t[s];if(n===void 0){if(!fs(o)){if(o!=='"')throw Ln(t,s,"expecting String");n=s}}else if(o==='"'&&gb(t,s-1)){i=s;break}}if(i===void 0)throw Ln(t,r,"expecting String");var a=db(t.substring(n+1,i));if(a==="")throw Ln(t,n,"empty string");return i++,{start:n,end:i,value:a}}function QL(t,e,r,n){for(var i=e,s=",",o={},a=[],u=[],l=e;fs(t[l]);)l++;if(t[l]==="}")return{start:e,end:l,value:o};for(;s===",";){var f=GL(t,i),d=jL(t,f.end),y=wf(t,d.end,r,n),w=pb(t,y.end);r||a.indexOf(f.value)!==-1&&(f.value=f.value+"1"),a.push(f.value),u.push(y.value),i=w.end,s=w.value}if(n){var E=0;for(E=0;E<a.length;E++)o[a[E]]=u[E]}return{start:e,end:i,value:o}}function gb(t,e){for(var r=e,n=0;r>-1&&t[r]==="\\";)n++,r--;return n%2===0}function kL(t,e,r,n){for(var i=e,s=",",o=[],a=e;fs(t[a]);)a++;if(t[a]==="]")return{start:e,end:a,value:o};for(;s===",";){var u=wf(t,i,r,n),l=pb(t,u.end);n&&o.push(u.value),i=l.end,s=l.value}return{start:e,end:i,value:o}}function KL(t,e){return t.substr(e,4)==="true"}function zL(t,e){return t.substr(e,5)==="false"}function WL(t,e){return t.substr(e,4)==="null"}var $L=new RegExp(/^\s$/);function fs(t){return $L.test(t)}var YL=new RegExp(/^\d$/);function fb(t){return YL.test(t)}function Ln(t,e,r){var n=10,i;t.length<e+n?i=t.substr(hb(t.length-n),t.length):e-n/2<0?i=t.substr(0,n):i=t.substr(hb(e-n/2),n);var s;return r?s="Syntax error: "+r+" near "+i:s="Syntax error near "+i,new Error(s)}function hb(t){return t<0?0:t}});var Ef=v(Wr=>{"use strict";c();var JL=Wr&&Wr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XL=Wr&&Wr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZL=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&JL(e,t,r);return XL(e,t),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.TypeExpressionParser=void 0;var wb=ZL(He()),e5=mt(),t5=mb(),Ry=class{parse(e){let r=this.doParse(e),n=Object.keys(r);if(n.length!=1)throw new wb.ErrTypingSystem(`bad type expression: ${e}`);let i=n[0];return this.nodeToType(i,r[i])}doParse(e){let r=this.getJsonedString(e);try{return t5.parse(r)}catch{throw new wb.ErrTypingSystem(`cannot parse type expression: ${e}. internal json: ${r}.`)}}getJsonedString(e){let r="";for(var n=0;n<e.length;n++){let o=e.charAt(n),a=e.charAt(n-1),u=e.charAt(n+1);o=="<"?r+=": {":o==">"?a!=">"?r+=": {} }":r+="}":o==","?u==">"||(a==">"?r+=",":r+=": {},"):r+=o}let i=/(:|\{|\}|,|\s)/,s=r.replace(/utf\-8\sstring/ig,"utf-8-string").split(i).filter(o=>o);return r=s.map(o=>i.test(o)?o:`"${o}"`).map(o=>o.replace(/utf\-8\-string/ig,"utf-8 string")).join(""),s.length==1?`{${r}: {}}`:`{${r}}`}nodeToType(e,r){e.charAt(e.length-1)==="1"&&(e=e.slice(0,-1));let n=Object.keys(r).map(i=>this.nodeToType(i,r[i]));return new e5.Type(e,n)}};Wr.TypeExpressionParser=Ry});var Ly=v(si=>{"use strict";c();Object.defineProperty(si,"__esModule",{value:!0});si.EndpointParameterDefinition=si.EndpointModifiers=si.EndpointDefinition=void 0;var r5=Ef(),Eb="?",n5="N / A",cc=class{constructor(e,r,n,i){this.input=[],this.output=[],this.name=e,this.input=r||[],this.output=n||[],this.modifiers=i}isConstructor(){return this.name=="constructor"}static fromJSON(e){e.name=e.name==null?Eb:e.name,e.payableInTokens=e.payableInTokens||[],e.inputs=e.inputs||[],e.outputs=e.outputs||[];let r=e.inputs.map(s=>hs.fromJSON(s)),n=e.outputs.map(s=>hs.fromJSON(s)),i=new vf(e.mutability,e.payableInTokens);return new cc(e.name,r,n,i)}};si.EndpointDefinition=cc;var vf=class{constructor(e,r){this.mutability=e||"",this.payableInTokens=r||[]}isPayableInEGLD(){return this.isPayableInToken("EGLD")}isPayableInToken(e){return this.payableInTokens.includes(e)?!0:this.payableInTokens.includes(`!${e}`)?!1:!!this.payableInTokens.includes("*")}isPayable(){return this.payableInTokens.length!=0}isReadonly(){return this.mutability=="readonly"}};si.EndpointModifiers=vf;var hs=class{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new r5.TypeExpressionParser().parse(e.type);return new hs(e.name||Eb,e.description||n5,r)}};si.EndpointParameterDefinition=hs});var Go=v(Xt=>{"use strict";c();var i5=Xt&&Xt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),s5=Xt&&Xt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o5=Xt&&Xt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&i5(e,t,r);return s5(e,t),e};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.Fields=Xt.Field=Xt.FieldDefinition=void 0;var Fy=o5(He()),a5=Ef(),lc=class{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new a5.TypeExpressionParser().parse(e.type);return new lc(e.name,e.description,r)}};Xt.FieldDefinition=lc;var My=class{constructor(e,r=""){this.value=e,this.name=r}checkTyping(e){let r=this.value.getType();if(!r.equals(e.type))throw new Fy.ErrTypingSystem(`check type of field "${e.name}; expected: ${e.type}, actual: ${r}"`);if(this.name!=e.name)throw new Fy.ErrTypingSystem(`check name of field "${e.name}"`)}equals(e){return this.name==e.name&&this.value.equals(e.value)}};Xt.Field=My;var Uy=class{static checkTyping(e,r){if(e.length!=r.length)throw new Fy.ErrTypingSystem("fields length vs. field definitions length");for(let n=0;n<e.length;n++){let i=e[n],s=r[n];i.checkTyping(s)}}static equals(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(!i.equals(s))return!1}return!0}static getNamesOfTypeDependencies(e){let r=[];for(let n of e)r.push(n.type.getName()),r.push(...n.type.getNamesOfDependencies());return[...new Set(r)]}};Xt.Fields=Uy});var fc=v(ai=>{"use strict";c();Object.defineProperty(ai,"__esModule",{value:!0});ai.EnumValue=ai.EnumVariantDefinition=ai.EnumType=void 0;var u5=He(),qy=fr(),Af=Go(),Ab=mt(),vb=256,ds=class extends Ab.CustomType{constructor(e,r){super(e),this.variants=[],this.variants=r}getClassName(){return ds.ClassName}static fromJSON(e){let r=(e.variants||[]).map(n=>Qo.fromJSON(n));return new ds(e.name,r)}getVariantByDiscriminant(e){let r=this.variants.find(n=>n.discriminant==e);return qy.guardValueIsSet(`variant by discriminant (${e})`,r),r}getVariantByName(e){let r=this.variants.find(n=>n.name==e);return qy.guardValueIsSet(`variant by name (${e})`,r),r}getNamesOfDependencies(){let e=[];for(let r of this.variants)e.push(...r.getNamesOfDependencies());return[...new Set(e)]}};ai.EnumType=ds;ds.ClassName="EnumType";var Qo=class{constructor(e,r,n=[]){this.fieldsDefinitions=[],qy.guardTrue(r<vb,`discriminant for simple enum should be less than ${vb}`),this.name=e,this.discriminant=r,this.fieldsDefinitions=n}static fromJSON(e){let r=(e.fields||[]).map(n=>Af.FieldDefinition.fromJSON(n));return new Qo(e.name,e.discriminant,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return Af.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};ai.EnumVariantDefinition=Qo;var oi=class extends Ab.TypedValue{constructor(e,r,n){super(e),this.fields=[],this.name=r.name,this.discriminant=r.discriminant,this.fields=n,this.fieldsByName=new Map(n.map(s=>[s.name,s]));let i=r.getFieldsDefinitions();Af.Fields.checkTyping(this.fields,i)}getClassName(){return oi.ClassName}static fromName(e,r){let n=e.getVariantByName(r);return new oi(e,n,[])}static fromDiscriminant(e,r){let n=e.getVariantByDiscriminant(r);return new oi(e,n,[])}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields(),i=this.name==e.name,s=this.discriminant==e.discriminant,o=Af.Fields.equals(r,n);return i&&s&&o}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new u5.ErrMissingFieldOnEnum(e,this.getType().getName())}valueOf(){let e={name:this.name,fields:[]};return this.fields.forEach(r=>e.fields[r.name]=r.value.valueOf()),e}};ai.EnumValue=oi;oi.ClassName="EnumValue"});var gs=v(Ko=>{"use strict";c();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.Struct=Ko.StructType=void 0;var c5=He(),_f=Go(),_b=mt(),ps=class extends _b.CustomType{constructor(e,r){super(e),this.fieldsDefinitions=[],this.fieldsDefinitions=r}getClassName(){return ps.ClassName}static fromJSON(e){let r=(e.fields||[]).map(n=>_f.FieldDefinition.fromJSON(n));return new ps(e.name,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return _f.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};Ko.StructType=ps;ps.ClassName="StructType";var ko=class extends _b.TypedValue{constructor(e,r){super(e),this.fields=r,this.fieldsByName=new Map(r.map(n=>[n.name,n])),this.checkTyping()}getClassName(){return ko.ClassName}checkTyping(){let r=this.getType().getFieldsDefinitions();_f.Fields.checkTyping(this.fields,r)}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new c5.ErrMissingFieldOnStruct(e,this.getType().getName())}valueOf(){let e={};for(let r of this.fields)e[r.name]=r.value.valueOf();return e}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields();return _f.Fields.equals(r,n)}};Ko.Struct=ko;ko.ClassName="Struct"});var Cf=v((MX,Sb)=>{"use strict";c();var If="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Vy={};for(hc=0;hc<If.length;hc++){if(bf=If.charAt(hc),Vy[bf]!==void 0)throw new TypeError(bf+" is ambiguous");Vy[bf]=hc}var bf,hc;function zo(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function bb(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=zo(e)^n>>5}for(e=zo(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=zo(e)^i&31}return e}function l5(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=bb(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=zo(n)^o,i+=If.charAt(o)}for(s=0;s<6;++s)n=zo(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=If.charAt(a)}return i}function Ib(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=bb(s);if(typeof a=="string")return a;for(var u=[],l=0;l<o.length;++l){var f=o.charAt(l),d=Vy[f];if(d===void 0)return"Unknown character "+f;a=zo(a)^d,!(l+6>=o.length)&&u.push(d)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:u}}function f5(){var t=Ib.apply(null,arguments);if(typeof t=="object")return t}function h5(t){var e=Ib.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Sf(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],u=0;u<t.length;++u)for(i=i<<e|t[u],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function d5(t){var e=Sf(t,8,5,!0);if(Array.isArray(e))return e}function p5(t){var e=Sf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function g5(t){var e=Sf(t,5,8,!1);if(Array.isArray(e))return e}function y5(t){var e=Sf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}Sb.exports={decodeUnsafe:f5,decode:h5,encode:l5,toWordsUnsafe:d5,toWords:p5,fromWordsUnsafe:g5,fromWords:y5}});var Zt=v($r=>{"use strict";c();var m5=$r&&$r.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),w5=$r&&$r.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cb=$r&&$r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&m5(e,t,r);return w5(e,t),e};Object.defineProperty($r,"__esModule",{value:!0});$r.Address=void 0;var Tf=Cb(Cf()),Wo=Cb(He()),Hy="erd",jy=32,E5="0".repeat(16),_t=class{constructor(e){if(this.valueHex="",!!e){if(e instanceof _t)return _t.fromAddress(e);if(e instanceof h.Buffer)return _t.fromBuffer(e);if(typeof e=="string")return _t.fromString(e);throw new Wo.ErrAddressCannotCreate(e)}}static fromAddress(e){return _t.fromValidHex(e.valueHex)}static fromValidHex(e){let r=new _t;return r.valueHex=e,r}static fromBuffer(e){if(e.length!=jy)throw new Wo.ErrAddressCannotCreate(e);return _t.fromValidHex(e.toString("hex"))}static fromString(e){return _t.isValidHex(e)?_t.fromValidHex(e):_t.fromBech32(e)}static isValidHex(e){return h.Buffer.from(e,"hex").length==jy}static fromHex(e){if(!_t.isValidHex(e))throw new Wo.ErrAddressCannotCreate(e);return _t.fromValidHex(e)}static empty(){return new _t}static fromBech32(e){let r;try{r=Tf.decode(e)}catch(s){throw new Wo.ErrAddressCannotCreate(e,s)}let n=r.prefix;if(n!=Hy)throw new Wo.ErrAddressBadHrp(Hy,n);let i=h.Buffer.from(Tf.fromWords(r.words));if(i.length!=jy)throw new Wo.ErrAddressCannotCreate(e);return _t.fromValidHex(i.toString("hex"))}hex(){return this.isEmpty()?"":this.valueHex}bech32(){if(this.isEmpty())return"";let e=Tf.toWords(this.pubkey());return Tf.encode(Hy,e)}pubkey(){return this.isEmpty()?h.Buffer.from([]):h.Buffer.from(this.valueHex,"hex")}isEmpty(){return!this.valueHex}equals(e){return e?this.valueHex==e.valueHex:!1}toString(){return this.bech32()}toJSON(){return{bech32:this.bech32(),pubkey:this.hex()}}static Zero(){return new _t("0".repeat(64))}isContractAddress(){return this.hex().startsWith(E5)}};$r.Address=_t});var Jo=v(Yo=>{"use strict";c();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.AddressValue=Yo.AddressType=void 0;var v5=Zt(),Tb=mt(),ys=class extends Tb.PrimitiveType{constructor(){super("Address")}getClassName(){return ys.ClassName}};Yo.AddressType=ys;ys.ClassName="AddressType";var $o=class extends Tb.PrimitiveValue{constructor(e){super(new ys),this.value=new v5.Address(e.bech32())}getClassName(){return $o.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};Yo.AddressValue=$o;$o.ClassName="AddressValue"});var xf=v(Xo=>{"use strict";c();Object.defineProperty(Xo,"__esModule",{value:!0});Xo.OptionalValue=Xo.OptionalType=void 0;var A5=fr(),dc=mt(),ui=class extends dc.Type{constructor(e){super("Optional",[e],dc.TypeCardinality.variable(1))}getClassName(){return ui.ClassName}isAssignableFrom(e){if(!e.hasExactClass(ui.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(dc.NullType.ClassName);return r||n}};Xo.OptionalType=ui;ui.ClassName="OptionalType";var ms=class extends dc.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return ms.ClassName}static newMissing(){let e=new ui(new dc.NullType);return new ms(e)}isSet(){return!!this.value}getTypedValue(){return A5.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){var r;return((r=this.value)===null||r===void 0?void 0:r.equals(e.value))||!1}};Xo.OptionalValue=ms;ms.ClassName="OptionalValue"});var pc=v(ea=>{"use strict";c();Object.defineProperty(ea,"__esModule",{value:!0});ea.BooleanValue=ea.BooleanType=void 0;var xb=mt(),ws=class extends xb.PrimitiveType{constructor(){super("bool")}getClassName(){return ws.ClassName}};ea.BooleanType=ws;ws.ClassName="BooleanType";var Zo=class extends xb.PrimitiveValue{constructor(e){super(new ws),this.value=e}getClassName(){return Zo.ClassName}equals(e){return this.value===e.value}isTrue(){return this.value===!0}isFalse(){return!this.isTrue()}valueOf(){return this.value}};ea.BooleanValue=Zo;Zo.ClassName="BooleanValue"});var li=v(ta=>{"use strict";c();Object.defineProperty(ta,"__esModule",{value:!0});ta.BytesValue=ta.BytesType=void 0;var Nb=mt(),Es=class extends Nb.PrimitiveType{constructor(){super("bytes")}getClassName(){return Es.ClassName}};ta.BytesType=Es;Es.ClassName="BytesType";var ci=class extends Nb.PrimitiveValue{constructor(e){super(new Es),this.value=e}getClassName(){return ci.ClassName}static fromUTF8(e){let r=h.Buffer.from(e,"utf-8");return new ci(r)}static fromHex(e){let r=h.Buffer.from(e,"hex");return new ci(r)}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value.equals(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};ta.BytesValue=ci;ci.ClassName="BytesValue"});var Ob=v(ra=>{"use strict";c();Object.defineProperty(ra,"__esModule",{value:!0});ra.CodeMetadataValue=ra.CodeMetadataType=void 0;var Db=mt(),Nf=class extends Db.PrimitiveType{constructor(){super("CodeMetadata")}};ra.CodeMetadataType=Nf;var Gy=class extends Db.PrimitiveValue{constructor(e){super(new Nf),this.value=e}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};ra.CodeMetadataValue=Gy});var Df=v(na=>{"use strict";c();Object.defineProperty(na,"__esModule",{value:!0});na.CompositeValue=na.CompositeType=void 0;var _5=fr(),Qy=mt(),vs=class extends Qy.Type{constructor(...e){super("Composite",e,Qy.TypeCardinality.variable(e.length))}getClassName(){return vs.ClassName}};na.CompositeType=vs;vs.ClassName="CompositeType";var As=class extends Qy.TypedValue{constructor(e,r){super(e),_5.guardLength(r,e.getTypeParameters().length),this.items=r}getClassName(){return As.ClassName}static fromItems(...e){let r=e.map(i=>i.getType()),n=new vs(...r);return new As(n,e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e?.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};na.CompositeValue=As;As.ClassName="CompositeValue"});var Ky=v(Of=>{"use strict";c();Object.defineProperty(Of,"__esModule",{value:!0});Of.CollectionOfTypedValues=void 0;var ky=class{constructor(e){this.items=e}getLength(){return this.items.length}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getLength()!=e.getLength())return!1;for(let r=0;r<this.getLength();r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Of.CollectionOfTypedValues=ky});var gc=v(Yr=>{"use strict";c();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.List=Yr.OptionValue=Yr.ListType=Yr.OptionType=void 0;var b5=fr(),I5=Ky(),_s=mt(),Jr=class extends _s.Type{constructor(e){super("Option",[e])}getClassName(){return Jr.ClassName}isAssignableFrom(e){if(!e.hasExactClass(Jr.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(_s.NullType.ClassName);return r||n}};Yr.OptionType=Jr;Jr.ClassName="OptionType";var bs=class extends _s.Type{constructor(e){super("List",[e])}getClassName(){return bs.ClassName}};Yr.ListType=bs;bs.ClassName="ListType";var Fn=class extends _s.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return Fn.ClassName}static newMissing(){let e=new Jr(new _s.NullType);return new Fn(e)}static newMissingTyped(e){return new Fn(new Jr(e))}static newProvided(e){let r=new Jr(e.getType());return new Fn(r,e)}isSet(){return!!this.value}getTypedValue(){return b5.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){var r;return((r=this.value)===null||r===void 0?void 0:r.equals(e.value))||!1}};Yr.OptionValue=Fn;Fn.ClassName="OptionValue";var fi=class extends _s.TypedValue{constructor(e,r){super(e),this.backingCollection=new I5.CollectionOfTypedValues(r)}getClassName(){return fi.ClassName}static fromItems(e){if(e.length==0)return new fi(new _s.TypePlaceholder,[]);let r=e[0].getType(),n=new bs(r);return new fi(n,e)}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};Yr.List=fi;fi.ClassName="List"});var Pf=v(oa=>{"use strict";c();Object.defineProperty(oa,"__esModule",{value:!0});oa.ArrayVec=oa.ArrayVecType=void 0;var Pb=fr(),S5=Ky(),Bb=mt(),ia=class extends Bb.Type{constructor(e,r){super("Array",[r]),Pb.guardTrue(e>0,"array length > 0"),this.length=e}getClassName(){return ia.ClassName}};oa.ArrayVecType=ia;ia.ClassName="ArrayVecType";var sa=class extends Bb.TypedValue{constructor(e,r){super(e),Pb.guardLength(r,e.length),this.backingCollection=new S5.CollectionOfTypedValues(r)}getClassName(){return sa.ClassName}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};oa.ArrayVec=sa;sa.ClassName="ArrayVec"});var yc=v(ua=>{"use strict";c();Object.defineProperty(ua,"__esModule",{value:!0});ua.H256Value=ua.H256Type=void 0;var Rb=mt(),Is=class extends Rb.PrimitiveType{constructor(){super("H256")}getClassName(){return Is.ClassName}};ua.H256Type=Is;Is.ClassName="H256Type";var aa=class extends Rb.PrimitiveValue{constructor(e){super(new Is),this.value=e}getClassName(){return aa.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};ua.H256Value=aa;aa.ClassName="H256Value"});var Bf=v(la=>{"use strict";c();Object.defineProperty(la,"__esModule",{value:!0});la.NothingValue=la.NothingType=void 0;var Lb=mt(),Ss=class extends Lb.PrimitiveType{constructor(){super("nothing")}getClassName(){return Ss.ClassName}};la.NothingType=Ss;Ss.ClassName="NothingType";var ca=class extends Lb.PrimitiveValue{constructor(){super(new Ss)}getClassName(){return ca.ClassName}equals(e){return!1}valueOf(){return{}}};la.NothingValue=ca;ca.ClassName="NothingValue"});var mc=v(Ae=>{"use strict";c();var C5=Ae&&Ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),T5=Ae&&Ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),x5=Ae&&Ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&C5(e,t,r);return T5(e,t),e},N5=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.BigIntValue=Ae.BigUIntValue=Ae.I64Value=Ae.U64Value=Ae.I32Value=Ae.U32Value=Ae.I16Value=Ae.U16Value=Ae.I8Value=Ae.U8Value=Ae.NumericalValue=Ae.BigIntType=Ae.BigUIntType=Ae.I64Type=Ae.U64Type=Ae.I32Type=Ae.U32Type=Ae.I16Type=Ae.U16Type=Ae.I8Type=Ae.U8Type=Ae.NumericalType=void 0;var Fb=x5(He()),Mb=mt(),Fs=N5(Wt()),Vt=class extends Mb.PrimitiveType{constructor(e,r,n){super(e),this.sizeInBytes=r,this.withSign=n}getClassName(){return Vt.ClassName}hasFixedSize(){return!!this.sizeInBytes}hasArbitrarySize(){return!this.hasFixedSize()}};Ae.NumericalType=Vt;Vt.ClassName="NumericalType";var Cs=class extends Vt{constructor(){super("u8",1,!1)}getClassName(){return Cs.ClassName}};Ae.U8Type=Cs;Cs.ClassName="U8Type";var Ts=class extends Vt{constructor(){super("i8",1,!0)}getClassName(){return Ts.ClassName}};Ae.I8Type=Ts;Ts.ClassName="I8Type";var xs=class extends Vt{constructor(){super("u16",2,!1)}getClassName(){return xs.ClassName}};Ae.U16Type=xs;xs.ClassName="U16Type";var Ns=class extends Vt{constructor(){super("i16",2,!0)}getClassName(){return Ns.ClassName}};Ae.I16Type=Ns;Ns.ClassName="I16Type";var Ds=class extends Vt{constructor(){super("u32",4,!1)}getClassName(){return Ds.ClassName}};Ae.U32Type=Ds;Ds.ClassName="U32Type";var Os=class extends Vt{constructor(){super("i32",4,!0)}getClassName(){return Os.ClassName}};Ae.I32Type=Os;Os.ClassName="I32Type";var Ps=class extends Vt{constructor(){super("u64",8,!1)}getClassName(){return Ps.ClassName}};Ae.U64Type=Ps;Ps.ClassName="U64Type";var Bs=class extends Vt{constructor(){super("i64",8,!0)}getClassName(){return Bs.ClassName}};Ae.I64Type=Bs;Bs.ClassName="I64Type";var Rs=class extends Vt{constructor(){super("BigUint",0,!1)}getClassName(){return Rs.ClassName}};Ae.BigUIntType=Rs;Rs.ClassName="BigUIntType";var Ls=class extends Vt{constructor(){super("Bigint",0,!0)}getClassName(){return Ls.ClassName}};Ae.BigIntType=Ls;Ls.ClassName="BigIntType";var Ht=class extends Mb.PrimitiveValue{constructor(e,r){if(super(e),this.value=new Fs.default(r),this.sizeInBytes=e.sizeInBytes,this.withSign=e.withSign,this.value.isNaN())throw new Fb.ErrInvalidArgument(`not a number: ${r}`);if(!this.withSign&&this.value.isNegative())throw new Fb.ErrInvalidArgument(`negative, but type is unsigned: ${r}`)}getClassName(){return Ht.ClassName}equals(e){return this.value.isEqualTo(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};Ae.NumericalValue=Ht;Ht.ClassName="NumericalValue";var fa=class extends Ht{constructor(e){super(new Cs,new Fs.default(e))}getClassName(){return fa.ClassName}};Ae.U8Value=fa;fa.ClassName="U8Value";var ha=class extends Ht{constructor(e){super(new Ts,new Fs.default(e))}getClassName(){return ha.ClassName}};Ae.I8Value=ha;ha.ClassName="I8Value";var da=class extends Ht{constructor(e){super(new xs,new Fs.default(e))}getClassName(){return da.ClassName}};Ae.U16Value=da;da.ClassName="U16Value";var pa=class extends Ht{constructor(e){super(new Ns,new Fs.default(e))}getClassName(){return pa.ClassName}};Ae.I16Value=pa;pa.ClassName="I16Value";var ga=class extends Ht{constructor(e){super(new Ds,new Fs.default(e))}getClassName(){return ga.ClassName}};Ae.U32Value=ga;ga.ClassName="U32Value";var ya=class extends Ht{constructor(e){super(new Os,new Fs.default(e))}getClassName(){return ya.ClassName}};Ae.I32Value=ya;ya.ClassName="I32Value";var ma=class extends Ht{constructor(e){super(new Ps,e)}getClassName(){return ma.ClassName}};Ae.U64Value=ma;ma.ClassName="U64Value";var wa=class extends Ht{constructor(e){super(new Bs,e)}getClassName(){return wa.ClassName}};Ae.I64Value=wa;wa.ClassName="I64Value";var Ea=class extends Ht{constructor(e){super(new Rs,e)}getClassName(){return Ea.ClassName}};Ae.BigUIntValue=Ea;Ea.ClassName="BigUIntValue";var va=class extends Ht{constructor(e){super(new Ls,e)}getClassName(){return va.ClassName}};Ae.BigIntValue=va;va.ClassName="BigIntValue"});var Rf=v(Aa=>{"use strict";c();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.StringValue=Aa.StringType=void 0;var Ub=mt(),Ms=class extends Ub.PrimitiveType{constructor(){super("utf-8 string")}getClassName(){return Ms.ClassName}};Aa.StringType=Ms;Ms.ClassName="StringType";var hi=class extends Ub.PrimitiveValue{constructor(e){super(new Ms),this.value=e}getClassName(){return hi.ClassName}static fromUTF8(e){return new hi(e)}static fromHex(e){let r=h.Buffer.from(e,"hex").toString();return new hi(r)}getLength(){return this.value.length}equals(e){return this.value===e.value}valueOf(){return this.value}};Aa.StringValue=hi;hi.ClassName="StringValue"});var ba=v(_a=>{"use strict";c();Object.defineProperty(_a,"__esModule",{value:!0});_a.TokenIdentifierValue=_a.TokenIdentifierType=void 0;var qb=mt(),D5="EGLD",Us=class extends qb.PrimitiveType{constructor(){super("TokenIdentifier")}getClassName(){return Us.ClassName}};_a.TokenIdentifierType=Us;Us.ClassName="TokenIdentifierType";var di=class extends qb.PrimitiveValue{constructor(e){super(new Us),this.value=e}static egld(){return new di(D5)}static esdtTokenIdentifier(e){return new di(e)}getClassName(){return di.ClassName}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value==e.value}valueOf(){return this.value}toString(){return this.value.toString()}};_a.TokenIdentifierValue=di;di.ClassName="TokenIdentifierValue"});var Lf=v(hr=>{"use strict";c();var O5=hr&&hr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),P5=hr&&hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),B5=hr&&hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&O5(e,t,r);return P5(e,t),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.Tuple=hr.TupleType=void 0;var R5=B5(He()),L5=gs(),Vb=Go(),F5=gs(),Mn=class extends F5.StructType{constructor(...e){super(Mn.prepareName(e),Mn.prepareFieldDefinitions(e))}getClassName(){return Mn.ClassName}static prepareName(e){let r=e.map(i=>i.toString()).join(", ");return`tuple${r.length}<${r}>`}static prepareFieldDefinitions(e){return e.map((n,i)=>new Vb.FieldDefinition(Hb(i),"anonymous tuple field",n))}};hr.TupleType=Mn;Mn.ClassName="TupleType";function Hb(t){return`field${t}`}var qs=class extends L5.Struct{constructor(e,r){super(e,r)}getClassName(){return qs.ClassName}static fromItems(e){if(e.length<1)throw new R5.ErrTypingSystem("bad tuple items");let r=e.map(s=>s.getType()),n=new Mn(...r),i=e.map((s,o)=>new Vb.Field(s,Hb(o)));return new qs(n,i)}};hr.Tuple=qs;qs.ClassName="Tuple"});var Mf=v(Ia=>{"use strict";c();Object.defineProperty(Ia,"__esModule",{value:!0});Ia.VariadicValue=Ia.VariadicType=void 0;var Ff=mt(),gi=class extends Ff.Type{constructor(e){super("Variadic",[e],Ff.TypeCardinality.variable())}getClassName(){return gi.ClassName}};Ia.VariadicType=gi;gi.ClassName="VariadicType";var pi=class extends Ff.TypedValue{constructor(e,r){super(e),this.items=r}getClassName(){return pi.ClassName}static fromItems(...e){if(e.length==0)return new pi(new gi(new Ff.TypePlaceholder),[]);let r=e[0].getType();return new pi(new gi(r),e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Ia.VariadicValue=pi;pi.ClassName="VariadicValue"});var Jy=v(Xr=>{"use strict";c();var M5=Xr&&Xr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),U5=Xr&&Xr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),q5=Xr&&Xr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&M5(e,t,r);return U5(e,t),e};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.TypeMapper=void 0;var jb=q5(He()),V5=Jo(),zy=xf(),H5=pc(),j5=li(),G5=Ob(),Uf=Df(),Wy=fc(),Q5=Go(),Gb=gc(),qf=Pf(),k5=yc(),Qb=Bf(),dr=mc(),K5=Rf(),kb=gs(),Kb=ba(),yi=Lf(),$y=Mf(),Yy=class{constructor(e=[]){this.openTypesFactories=new Map([["Option",(...r)=>new Gb.OptionType(r[0])],["List",(...r)=>new Gb.ListType(r[0])],["VarArgs",(...r)=>new $y.VariadicType(r[0])],["MultiResultVec",(...r)=>new $y.VariadicType(r[0])],["variadic",(...r)=>new $y.VariadicType(r[0])],["OptionalArg",(...r)=>new zy.OptionalType(r[0])],["optional",(...r)=>new zy.OptionalType(r[0])],["OptionalResult",(...r)=>new zy.OptionalType(r[0])],["multi",(...r)=>new Uf.CompositeType(...r)],["MultiArg",(...r)=>new Uf.CompositeType(...r)],["MultiResult",(...r)=>new Uf.CompositeType(...r)],["multi",(...r)=>new Uf.CompositeType(...r)],["tuple",(...r)=>new yi.TupleType(...r)],["tuple2",(...r)=>new yi.TupleType(...r)],["tuple3",(...r)=>new yi.TupleType(...r)],["tuple4",(...r)=>new yi.TupleType(...r)],["tuple5",(...r)=>new yi.TupleType(...r)],["tuple6",(...r)=>new yi.TupleType(...r)],["tuple7",(...r)=>new yi.TupleType(...r)],["tuple8",(...r)=>new yi.TupleType(...r)],["array20",(...r)=>new qf.ArrayVecType(20,r[0])],["array32",(...r)=>new qf.ArrayVecType(32,r[0])],["array46",(...r)=>new qf.ArrayVecType(46,r[0])],["array64",(...r)=>new qf.ArrayVecType(64,r[0])]]),this.closedTypesMap=new Map([["u8",new dr.U8Type],["u16",new dr.U16Type],["u32",new dr.U32Type],["u64",new dr.U64Type],["U64",new dr.U64Type],["BigUint",new dr.BigUIntType],["i8",new dr.I8Type],["i16",new dr.I16Type],["i32",new dr.I32Type],["i64",new dr.I64Type],["Bigint",new dr.BigIntType],["BigInt",new dr.BigIntType],["bool",new H5.BooleanType],["bytes",new j5.BytesType],["Address",new V5.AddressType],["H256",new k5.H256Type],["utf-8 string",new K5.StringType],["TokenIdentifier",new Kb.TokenIdentifierType],["EgldOrEsdtTokenIdentifier",new Kb.TokenIdentifierType],["CodeMetadata",new G5.CodeMetadataType],["nothing",new Qb.NothingType],["AsyncCall",new Qb.NothingType]]),this.learnedTypesMap=new Map;for(let r of e)this.learnedTypesMap.set(r.getName(),r)}mapType(e){let r=this.mapTypeRecursively(e);if(r)return r.isGenericType()||this.learnType(r),r;throw new jb.ErrTypingSystem(`Cannot map the type "${e.getName()}" to a known type`)}mapTypeRecursively(e){let r=e.isGenericType(),n=this.learnedTypesMap.get(e.getName());if(n)return n;let i=this.closedTypesMap.get(e.getName());return i||(e.hasExactClass(Wy.EnumType.ClassName)?this.mapEnumType(e):e.hasExactClass(kb.StructType.ClassName)?this.mapStructType(e):r?this.mapGenericType(e):null)}learnType(e){this.learnedTypesMap.delete(e.getName()),this.learnedTypesMap.set(e.getName(),e)}mapStructType(e){let r=this.mappedFields(e.getFieldsDefinitions());return new kb.StructType(e.getName(),r)}mapEnumType(e){let r=e.variants.map(i=>new Wy.EnumVariantDefinition(i.name,i.discriminant,this.mappedFields(i.getFieldsDefinitions())));return new Wy.EnumType(e.getName(),r)}mappedFields(e){return e.map(r=>new Q5.FieldDefinition(r.name,r.description,this.mapType(r.type)))}mapGenericType(e){let n=e.getTypeParameters().map(s=>this.mapType(s)),i=this.openTypesFactories.get(e.getName());if(!i)throw new jb.ErrTypingSystem(`Cannot map the generic type "${e.getName()}" to a known type`);return i(...n)}};Xr.TypeMapper=Yy});var Jb=v(Zr=>{"use strict";c();var z5=Zr&&Zr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W5=Zr&&Zr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$5=Zr&&Zr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&z5(e,t,r);return W5(e,t),e};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.AbiRegistry=void 0;var zb=$5(He()),Xy=fr(),wc=Ly(),Wb=fc(),$b=gs(),Y5=Jy(),J5="?",Sa=class{constructor(e){this.endpoints=[],this.customTypes=[],this.name=e.name,this.constructorDefinition=e.constructorDefinition,this.endpoints=e.endpoints,this.customTypes=e.customTypes}static create(e){let r=e.name||J5,n=e.constructor||{},i=e.endpoints||[],s=e.types||{},o=wc.EndpointDefinition.fromJSON(Object.assign({name:"constructor"},n)),a=i.map(d=>wc.EndpointDefinition.fromJSON(d)),u=[];for(let d in s){let y=s[d];if(y.type=="struct")u.push($b.StructType.fromJSON({name:d,fields:y.fields}));else if(y.type=="enum")u.push(Wb.EnumType.fromJSON({name:d,variants:y.variants}));else throw new zb.ErrTypingSystem(`Cannot handle custom type: ${d}`)}return new Sa({name:r,constructorDefinition:o,endpoints:a,customTypes:u}).remapToKnownTypes()}getStruct(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass($b.StructType.ClassName));return Xy.guardValueIsSetWithMessage(`struct [${e}] not found`,r),r}getStructs(e){return e.map(r=>this.getStruct(r))}getEnum(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass(Wb.EnumType.ClassName));return Xy.guardValueIsSetWithMessage(`enum [${e}] not found`,r),r}getEnums(e){return e.map(r=>this.getEnum(r))}getEndpoints(){return this.endpoints}getEndpoint(e){let r=this.endpoints.find(n=>n.name==e);return Xy.guardValueIsSetWithMessage(`endpoint [${e}] not found`,r),r}remapToKnownTypes(){let e=new Y5.TypeMapper([]),r=[];for(let o of this.customTypes)this.mapCustomTypeDepthFirst(o,this.customTypes,e,r);if(this.customTypes.length!=r.length)throw new zb.ErrTypingSystem("Did not re-map all custom types");let n=Yb(this.constructorDefinition,e),i=[];for(let o of this.endpoints)i.push(Yb(o,e));return new Sa({name:this.name,constructorDefinition:n,endpoints:i,customTypes:r})}mapCustomTypeDepthFirst(e,r,n,i){if(i.findIndex(a=>a.getName()==e.getName())>=0)return;for(let a of e.getNamesOfDependencies()){let u=r.find(l=>l.getName()==a);u&&this.mapCustomTypeDepthFirst(u,r,n,i)}let o=n.mapType(e);i.push(o)}};Zr.AbiRegistry=Sa;function Yb(t,e){let r=t.input.map(i=>new wc.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type))),n=t.output.map(i=>new wc.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type)));return new wc.EndpointDefinition(t.name,r,n,t.modifiers)}});var Zb=v(Ca=>{"use strict";c();Object.defineProperty(Ca,"__esModule",{value:!0});Ca.createListOfTokenIdentifiers=Ca.createListOfAddresses=void 0;var X5=Jo(),Xb=gc(),Z5=ba();function eF(t){let e=t.map(n=>new X5.AddressValue(n));return Xb.List.fromItems(e)}Ca.createListOfAddresses=eF;function tF(t){let e=t.map(n=>new Z5.TokenIdentifierValue(n));return Xb.List.fromItems(e)}Ca.createListOfTokenIdentifiers=tF});var dI=v(jt=>{"use strict";c();var rF=jt&&jt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nF=jt&&jt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iF=jt&&jt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rF(e,t,r);return nF(e,t),e};Object.defineProperty(jt,"__esModule",{value:!0});jt.onPrimitiveTypeSelect=jt.onPrimitiveValueSelect=jt.onTypedValueSelect=jt.onTypeSelect=void 0;var Hf=iF(He()),eI=Jo(),tI=pc(),rI=li(),nI=fc(),Vf=gc(),iI=yc(),sI=mc(),oI=Bf(),aI=gs(),uI=ba(),cI=Lf(),lI=mt(),fI=Pf(),hI=Rf();function sF(t,e){if(t.hasExactClass(Vf.OptionType.ClassName))return e.onOption();if(t.hasExactClass(Vf.ListType.ClassName))return e.onList();if(t.hasExactClass(fI.ArrayVecType.ClassName))return e.onArray();if(t.hasClassOrSuperclass(lI.PrimitiveType.ClassName))return e.onPrimitive();if(t.hasExactClass(aI.StructType.ClassName))return e.onStruct();if(t.hasExactClass(cI.TupleType.ClassName))return e.onTuple();if(t.hasExactClass(nI.EnumType.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new Hf.ErrTypingSystem(`type isn't known: ${t}`)}jt.onTypeSelect=sF;function oF(t,e){if(t.hasClassOrSuperclass(lI.PrimitiveValue.ClassName))return e.onPrimitive();if(t.hasExactClass(Vf.OptionValue.ClassName))return e.onOption();if(t.hasExactClass(Vf.List.ClassName))return e.onList();if(t.hasExactClass(fI.ArrayVec.ClassName))return e.onArray();if(t.hasExactClass(aI.Struct.ClassName))return e.onStruct();if(t.hasExactClass(cI.Tuple.ClassName))return e.onTuple();if(t.hasExactClass(nI.EnumValue.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new Hf.ErrTypingSystem(`value isn't typed: ${t}`)}jt.onTypedValueSelect=oF;function aF(t,e){if(t.hasExactClass(tI.BooleanValue.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(sI.NumericalValue.ClassName))return e.onNumerical();if(t.hasExactClass(eI.AddressValue.ClassName))return e.onAddress();if(t.hasExactClass(rI.BytesValue.ClassName))return e.onBytes();if(t.hasExactClass(hI.StringValue.ClassName))return e.onString();if(t.hasExactClass(iI.H256Value.ClassName))return e.onH256();if(t.hasExactClass(uI.TokenIdentifierValue.ClassName))return e.onTypeIdentifier();if(t.hasExactClass(oI.NothingValue.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new Hf.ErrTypingSystem(`value isn't a primitive: ${t.getType()}`)}jt.onPrimitiveValueSelect=aF;function uF(t,e){if(t.hasExactClass(tI.BooleanType.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(sI.NumericalType.ClassName))return e.onNumerical();if(t.hasExactClass(eI.AddressType.ClassName))return e.onAddress();if(t.hasExactClass(rI.BytesType.ClassName))return e.onBytes();if(t.hasExactClass(hI.StringType.ClassName))return e.onString();if(t.hasExactClass(iI.H256Type.ClassName))return e.onH256();if(t.hasExactClass(uI.TokenIdentifierType.ClassName))return e.onTokenIndetifier();if(t.hasExactClass(oI.NothingType.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new Hf.ErrTypingSystem(`type isn't a known primitive: ${t}`)}jt.onPrimitiveTypeSelect=uF});var bt=v(Ue=>{"use strict";c();var cF=Ue&&Ue.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xe=Ue&&Ue.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cF(e,t,r)};Object.defineProperty(Ue,"__esModule",{value:!0});Xe(Jb(),Ue);Xe(Jo(),Ue);Xe(xf(),Ue);Xe(pc(),Ue);Xe(li(),Ue);Xe(Df(),Ue);Xe(Ly(),Ue);Xe(fc(),Ue);Xe(Zb(),Ue);Xe(Go(),Ue);Xe(gc(),Ue);Xe(Pf(),Ue);Xe(yc(),Ue);Xe(dI(),Ue);Xe(Bf(),Ue);Xe(mc(),Ue);Xe(Rf(),Ue);Xe(gs(),Ue);Xe(ba(),Ue);Xe(Lf(),Ue);Xe(Ef(),Ue);Xe(Jy(),Ue);Xe(mt(),Ue);Xe(Mf(),Ue)});var gI=v(en=>{"use strict";c();var lF=en&&en.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fF=en&&en.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hF=en&&en.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lF(e,t,r);return fF(e,t),e};Object.defineProperty(en,"__esModule",{value:!0});en.OptionValueBinaryCodec=void 0;var pI=hF(He()),jf=bt(),Zy=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){if(e[0]==0)return[jf.OptionValue.newMissingTyped(r),1];if(e[0]!=1)throw new pI.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return[jf.OptionValue.newProvided(n),i+1]}decodeTopLevel(e,r){if(e.length==0)return new jf.OptionValue(r);if(e[0]!=1)throw new pI.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return new jf.OptionValue(r,n)}encodeNested(e){return e.isSet()?h.Buffer.concat([h.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):h.Buffer.from([0])}encodeTopLevel(e){return e.isSet()?h.Buffer.concat([h.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):h.Buffer.from([])}};en.OptionValueBinaryCodec=Zy});var yI=v(Gf=>{"use strict";c();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.AddressBinaryCodec=void 0;var dF=Zt(),pF=bt(),em=class{decodeNested(e){let r=e.slice(0,32),n=new dF.Address(r);return[new pF.AddressValue(n),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf().pubkey()}encodeTopLevel(e){return e.valueOf().pubkey()}};Gf.AddressBinaryCodec=em});var wI=v(tn=>{"use strict";c();var gF=tn&&tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yF=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mF=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gF(e,t,r);return yF(e,t),e};Object.defineProperty(tn,"__esModule",{value:!0});tn.BooleanBinaryCodec=void 0;var wF=mF(He()),mI=bt(),Dr=class{decodeNested(e){let r=e.readUInt8(0);return[new mI.BooleanValue(r==Dr.TRUE),1]}decodeTopLevel(e){if(e.length>1)throw new wF.ErrInvalidArgument("buffer should be of size <= 1");let r=e[0];return new mI.BooleanValue(r==Dr.TRUE)}encodeNested(e){return e.isTrue()?h.Buffer.from([Dr.TRUE]):h.Buffer.from([Dr.FALSE])}encodeTopLevel(e){return e.isTrue()?h.Buffer.from([Dr.TRUE]):h.Buffer.from([])}};tn.BooleanBinaryCodec=Dr;Dr.TRUE=1;Dr.FALSE=0});var kf=v(Qf=>{"use strict";c();Object.defineProperty(Qf,"__esModule",{value:!0});Qf.SizeOfU32=void 0;Qf.SizeOfU32=4});var tm=v(rn=>{"use strict";c();var EF=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rn,"__esModule",{value:!0});rn.zeroPadStringIfOddLength=rn.isPaddedHex=rn.numberToPaddedHex=void 0;var vF=EF(Wt());function AF(t){let e=new vF.default(t).toString(16);return EI(e)}rn.numberToPaddedHex=AF;function _F(t){t=t||"";let e=h.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}rn.isPaddedHex=_F;function EI(t){return t=t||"",t.length%2==1?"0"+t:t}rn.zeroPadStringIfOddLength=EI});var Kf=v(wt=>{"use strict";c();var bF=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wt,"__esModule",{value:!0});wt.prependByteToBuffer=wt.flipBufferBitsInPlace=wt.getHexMagnitudeOfBigInt=wt.bigIntToBuffer=wt.bufferToBigInt=wt.cloneBuffer=wt.isMsbZero=wt.isMsbOne=void 0;var rm=bF(Wt()),IF=tm();function vI(t,e=0){return t[e]>>7==1}wt.isMsbOne=vI;function SF(t,e=0){return!vI(t,e)}wt.isMsbZero=SF;function CF(t){let e=h.Buffer.alloc(t.length);return t.copy(e),e}wt.cloneBuffer=CF;function TF(t){let e=t.toString("hex");return new rm.default(`0x${e}`,16)}wt.bufferToBigInt=TF;function xF(t){let e=AI(t);return h.Buffer.from(e,"hex")}wt.bigIntToBuffer=xF;function AI(t){return t=new rm.default(t),t?(t.isNegative()&&(t=t.multipliedBy(new rm.default(-1))),IF.numberToPaddedHex(t)):""}wt.getHexMagnitudeOfBigInt=AI;function NF(t){for(let e=0;e<t.length;e++)t[e]=~t[e]}wt.flipBufferBitsInPlace=NF;function DF(t,e){return h.Buffer.concat([h.Buffer.from([e]),t])}wt.prependByteToBuffer=DF});var bI=v(Ta=>{"use strict";c();var OF=Ta&&Ta.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.NumericalBinaryCodec=void 0;var Ec=OF(Wt()),nm=bt(),_I=kf(),ht=Kf(),im=class{decodeNested(e,r){let n=0,i=r.sizeInBytes;i||(n=_I.SizeOfU32,i=e.readUInt32BE(0));let s=e.slice(n,n+i),o=this.decodeTopLevel(s,r),a=i+n;return[o,a]}decodeTopLevel(e,r){let n=ht.cloneBuffer(e);if(e.length==0)return new nm.NumericalValue(r,new Ec.default(0));if(!r.withSign||ht.isMsbZero(n)){let l=ht.bufferToBigInt(n);return new nm.NumericalValue(r,l)}ht.flipBufferBitsInPlace(n);let u=ht.bufferToBigInt(n).multipliedBy(new Ec.default(-1)).minus(new Ec.default(1));return new nm.NumericalValue(r,u)}encodeNested(e){if(e.sizeInBytes)return this.encodeNestedFixedSize(e,e.sizeInBytes);let r=this.encodeTopLevel(e),n=h.Buffer.alloc(_I.SizeOfU32);return n.writeUInt32BE(r.length),h.Buffer.concat([n,r])}encodeNestedFixedSize(e,r){if(e.value.isZero())return h.Buffer.alloc(r,0);if(!e.withSign){let o=ht.bigIntToBuffer(e.value),a=h.Buffer.alloc(r-o.length,0);return h.Buffer.concat([a,o])}if(e.value.isPositive()){let o=ht.bigIntToBuffer(e.value);ht.isMsbOne(o)&&(o=ht.prependByteToBuffer(o,0));let a=h.Buffer.alloc(r-o.length,0);return h.Buffer.concat([a,o])}let n=e.value.plus(new Ec.default(1)),i=ht.bigIntToBuffer(n);ht.flipBufferBitsInPlace(i),ht.isMsbZero(i)&&(i=ht.prependByteToBuffer(i,255));let s=h.Buffer.alloc(r-i.length,255);return h.Buffer.concat([s,i])}encodeTopLevel(e){let r=e.withSign;return e.value.isZero()?h.Buffer.alloc(0):r?this.encodePrimitive(e):ht.bigIntToBuffer(e.value)}encodePrimitive(e){if(e.value.isPositive()){let i=ht.bigIntToBuffer(e.value);return ht.isMsbOne(i)&&(i=ht.prependByteToBuffer(i,0)),i}let r=e.value.plus(new Ec.default(1)),n=ht.bigIntToBuffer(r);return ht.flipBufferBitsInPlace(n),ht.isMsbZero(n)&&(n=ht.prependByteToBuffer(n,255)),n}};Ta.NumericalBinaryCodec=im});var II=v(zf=>{"use strict";c();Object.defineProperty(zf,"__esModule",{value:!0});zf.H256BinaryCodec=void 0;var PF=yc(),sm=class{decodeNested(e){let r=e.slice(0,32);return[new PF.H256Value(r),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf()}encodeTopLevel(e){return e.valueOf()}};zf.H256BinaryCodec=sm});var Yf=v($f=>{"use strict";c();Object.defineProperty($f,"__esModule",{value:!0});$f.BytesBinaryCodec=void 0;var SI=li(),Wf=kf(),om=class{decodeNested(e){let r=e.readUInt32BE(0),n=e.slice(Wf.SizeOfU32,Wf.SizeOfU32+r);return[new SI.BytesValue(n),Wf.SizeOfU32+r]}decodeTopLevel(e){return new SI.BytesValue(e)}encodeNested(e){let r=h.Buffer.alloc(Wf.SizeOfU32);return r.writeUInt32BE(e.getLength()),h.Buffer.concat([r,e.valueOf()])}encodeTopLevel(e){return e.valueOf()}};$f.BytesBinaryCodec=om});var TI=v(Jf=>{"use strict";c();Object.defineProperty(Jf,"__esModule",{value:!0});Jf.TokenIdentifierCodec=void 0;var BF=li(),CI=ba(),RF=Yf(),am=class{constructor(){this.bytesCodec=new RF.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesCodec.decodeNested(e);return[new CI.TokenIdentifierValue(r.toString()),n]}decodeTopLevel(e){let r=this.bytesCodec.decodeTopLevel(e);return new CI.TokenIdentifierValue(r.toString())}encodeNested(e){let r=BF.BytesValue.fromUTF8(e.valueOf());return this.bytesCodec.encodeNested(r)}encodeTopLevel(e){return h.Buffer.from(e.valueOf())}};Jf.TokenIdentifierCodec=am});var NI=v(Xf=>{"use strict";c();Object.defineProperty(Xf,"__esModule",{value:!0});Xf.NothingCodec=void 0;var xI=bt(),um=class{decodeNested(){return[new xI.NothingValue,0]}decodeTopLevel(){return new xI.NothingValue}encodeNested(){return h.Buffer.from([])}encodeTopLevel(){return h.Buffer.from([])}};Xf.NothingCodec=um});var OI=v(Zf=>{"use strict";c();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.StringBinaryCodec=void 0;var DI=bt(),LF=li(),FF=Yf(),cm=class{constructor(){this.bytesBinaryCodec=new FF.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesBinaryCodec.decodeNested(e);return[new DI.StringValue(r.valueOf().toString()),n]}decodeTopLevel(e){return new DI.StringValue(e.toString())}encodeNested(e){let r=LF.BytesValue.fromUTF8(e.valueOf());return this.bytesBinaryCodec.encodeNested(r)}encodeTopLevel(e){return h.Buffer.from(e.valueOf())}};Zf.StringBinaryCodec=cm});var PI=v(th=>{"use strict";c();Object.defineProperty(th,"__esModule",{value:!0});th.PrimitiveBinaryCodec=void 0;var eh=bt(),MF=yI(),UF=wI(),qF=bI(),VF=II(),HF=Yf(),jF=TI(),GF=NI(),QF=OI(),lm=class{constructor(e){this.binaryCodec=e,this.booleanCodec=new UF.BooleanBinaryCodec,this.numericalCodec=new qF.NumericalBinaryCodec,this.addressCodec=new MF.AddressBinaryCodec,this.h256Codec=new VF.H256BinaryCodec,this.bytesCodec=new HF.BytesBinaryCodec,this.stringCodec=new QF.StringBinaryCodec,this.tokenIdentifierCodec=new jF.TokenIdentifierCodec,this.nothingCodec=new GF.NothingCodec}decodeNested(e,r){return eh.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeNested(e),onNumerical:()=>this.numericalCodec.decodeNested(e,r),onAddress:()=>this.addressCodec.decodeNested(e),onBytes:()=>this.bytesCodec.decodeNested(e),onString:()=>this.stringCodec.decodeNested(e),onH256:()=>this.h256Codec.decodeNested(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeNested(e),onNothing:()=>this.nothingCodec.decodeNested()})}decodeTopLevel(e,r){return eh.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeTopLevel(e),onNumerical:()=>this.numericalCodec.decodeTopLevel(e,r),onAddress:()=>this.addressCodec.decodeTopLevel(e),onBytes:()=>this.bytesCodec.decodeTopLevel(e),onString:()=>this.stringCodec.decodeTopLevel(e),onH256:()=>this.h256Codec.decodeTopLevel(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeTopLevel(e),onNothing:()=>this.nothingCodec.decodeTopLevel()})}encodeNested(e){return eh.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeNested(e),onNumerical:()=>this.numericalCodec.encodeNested(e),onAddress:()=>this.addressCodec.encodeNested(e),onBytes:()=>this.bytesCodec.encodeNested(e),onString:()=>this.stringCodec.encodeNested(e),onH256:()=>this.h256Codec.encodeNested(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeNested(e),onNothing:()=>this.nothingCodec.encodeNested()})}encodeTopLevel(e){return eh.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeTopLevel(e),onNumerical:()=>this.numericalCodec.encodeTopLevel(e),onAddress:()=>this.addressCodec.encodeTopLevel(e),onBytes:()=>this.bytesCodec.encodeTopLevel(e),onString:()=>this.stringCodec.encodeTopLevel(e),onH256:()=>this.h256Codec.encodeTopLevel(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeTopLevel(e),onNothing:()=>this.nothingCodec.encodeTopLevel()})}};th.PrimitiveBinaryCodec=lm});var LI=v(rh=>{"use strict";c();Object.defineProperty(rh,"__esModule",{value:!0});rh.ListBinaryCodec=void 0;var BI=bt(),RI=kf(),fm=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.getFirstTypeParameter(),i=[],s=e.readUInt32BE(0);this.binaryCodec.constraints.checkListLength(s);let o=e,a=RI.SizeOfU32;e=o.slice(a);for(let u=0;u<s;u++){let[l,f]=this.binaryCodec.decodeNested(e,n);i.push(l),a+=f,e=o.slice(a)}return[new BI.List(r,i),a]}decodeTopLevel(e,r){let n=r.getFirstTypeParameter(),i=[],s=e,o=0;for(;e.length>0;){let[a,u]=this.binaryCodec.decodeNested(e,n);i.push(a),o+=u,e=s.slice(o),this.binaryCodec.constraints.checkListLength(i.length)}return new BI.List(r,i)}encodeNested(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=h.Buffer.alloc(RI.SizeOfU32);r.writeUInt32BE(e.getLength());let n=[];for(let s of e.getItems()){let o=this.binaryCodec.encodeNested(s);n.push(o)}return h.Buffer.concat([r,...n])}encodeTopLevel(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=[];for(let i of e.getItems()){let s=this.binaryCodec.encodeNested(i);r.push(s)}return h.Buffer.concat(r)}};rh.ListBinaryCodec=fm});var dm=v(nh=>{"use strict";c();Object.defineProperty(nh,"__esModule",{value:!0});nh.FieldsBinaryCodec=void 0;var kF=bt(),hm=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=[],i=0;for(let s of r){let[o,a]=this.binaryCodec.decodeNested(e,s.type);e=e.slice(a),i+=a;let u=new kF.Field(o,s.name);n.push(u)}return[n,i]}encodeNested(e){let r=[];for(let n of e){let i=this.binaryCodec.encodeNested(n.value);r.push(i)}return h.Buffer.concat(r)}};nh.FieldsBinaryCodec=hm});var gm=v(ih=>{"use strict";c();Object.defineProperty(ih,"__esModule",{value:!0});ih.StructBinaryCodec=void 0;var KF=bt(),zF=dm(),pm=class{constructor(e){this.fieldsCodec=new zF.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let n=r.getFieldsDefinitions(),[i,s]=this.fieldsCodec.decodeNested(e,n);return[new KF.Struct(r,i),s]}encodeNested(e){let r=e.getFields();return this.fieldsCodec.encodeNested(r)}encodeTopLevel(e){return this.encodeNested(e)}};ih.StructBinaryCodec=pm});var FI=v(oh=>{"use strict";c();Object.defineProperty(oh,"__esModule",{value:!0});oh.EnumBinaryCodec=void 0;var sh=bt(),WF=dm(),ym=class{constructor(e){this.binaryCodec=e,this.fieldsCodec=new WF.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let[n,i]=this.readDiscriminant(e);e=e.slice(i);let s=r.getVariantByDiscriminant(n),o=s.getFieldsDefinitions(),[a,u]=this.fieldsCodec.decodeNested(e,o);return[new sh.EnumValue(r,s,a),i+u]}readDiscriminant(e){let[r,n]=this.binaryCodec.decodeNested(e,new sh.U8Type);return[r.valueOf(),n]}encodeNested(e){let r=new sh.U8Value(e.discriminant),n=this.binaryCodec.encodeNested(r),i=e.getFields(),s=this.fieldsCodec.encodeNested(i);return h.Buffer.concat([n,s])}encodeTopLevel(e){let r=e.getFields(),n=r.length>0,i=this.fieldsCodec.encodeNested(r),s=new sh.U8Value(e.discriminant),o=n?this.binaryCodec.encodeNested(s):this.binaryCodec.encodeTopLevel(s);return h.Buffer.concat([o,i])}};oh.EnumBinaryCodec=ym});var MI=v(ah=>{"use strict";c();Object.defineProperty(ah,"__esModule",{value:!0});ah.TupleBinaryCodec=void 0;var $F=gm(),mm=class{constructor(e){this.structCodec=new $F.StructBinaryCodec(e)}decodeTopLevel(e,r){return this.structCodec.decodeTopLevel(e,r)}decodeNested(e,r){return this.structCodec.decodeNested(e,r)}encodeNested(e){return this.structCodec.encodeNested(e)}encodeTopLevel(e){return this.structCodec.encodeTopLevel(e)}};ah.TupleBinaryCodec=mm});var UI=v(uh=>{"use strict";c();Object.defineProperty(uh,"__esModule",{value:!0});uh.ArrayVecBinaryCodec=void 0;var YF=bt(),wm=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.length,i=r.getFirstTypeParameter(),s=[],o=0;for(let a=0;a<n;a++){let[u,l]=this.binaryCodec.decodeNested(e,i);s.push(u),o+=l,e=e.slice(l)}return[new YF.ArrayVec(r,s),o]}decodeTopLevel(e,r){let[n,i]=this.decodeNested(e,r);return n}encodeNested(e){let r=[];for(let n of e.getItems()){let i=this.binaryCodec.encodeNested(n);r.push(i)}return h.Buffer.concat(r)}encodeTopLevel(e){return this.encodeNested(e)}};uh.ArrayVecBinaryCodec=wm});var vm=v(pr=>{"use strict";c();var JF=pr&&pr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XF=pr&&pr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZF=pr&&pr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&JF(e,t,r);return XF(e,t),e};Object.defineProperty(pr,"__esModule",{value:!0});pr.BinaryCodecConstraints=pr.BinaryCodec=void 0;var qI=ZF(He()),ch=bt(),VI=fr(),e4=gI(),t4=PI(),r4=LI(),n4=gm(),i4=FI(),s4=MI(),o4=UI(),Em=class{constructor(e=null){this.constraints=e||new lh,this.optionCodec=new e4.OptionValueBinaryCodec(this),this.listCodec=new r4.ListBinaryCodec(this),this.arrayCodec=new o4.ArrayVecBinaryCodec(this),this.primitiveCodec=new t4.PrimitiveBinaryCodec(this),this.structCodec=new n4.StructBinaryCodec(this),this.tupleCodec=new s4.TupleBinaryCodec(this),this.enumCodec=new i4.EnumBinaryCodec(this)}decodeTopLevel(e,r){return this.constraints.checkBufferLength(e),ch.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeTopLevel(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeTopLevel(e,r),onArray:()=>this.arrayCodec.decodeTopLevel(e,r),onPrimitive:()=>this.primitiveCodec.decodeTopLevel(e,r),onStruct:()=>this.structCodec.decodeTopLevel(e,r),onTuple:()=>this.tupleCodec.decodeTopLevel(e,r),onEnum:()=>this.enumCodec.decodeTopLevel(e,r)})}decodeNested(e,r){this.constraints.checkBufferLength(e);let[n,i]=ch.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeNested(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeNested(e,r),onArray:()=>this.arrayCodec.decodeNested(e,r),onPrimitive:()=>this.primitiveCodec.decodeNested(e,r),onStruct:()=>this.structCodec.decodeNested(e,r),onTuple:()=>this.tupleCodec.decodeNested(e,r),onEnum:()=>this.enumCodec.decodeNested(e,r)});return[n,i]}encodeNested(e){return VI.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),ch.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeNested(e),onOption:()=>this.optionCodec.encodeNested(e),onList:()=>this.listCodec.encodeNested(e),onArray:()=>this.arrayCodec.encodeNested(e),onStruct:()=>this.structCodec.encodeNested(e),onTuple:()=>this.tupleCodec.encodeNested(e),onEnum:()=>this.enumCodec.encodeNested(e)})}encodeTopLevel(e){return VI.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),ch.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeTopLevel(e),onOption:()=>this.optionCodec.encodeTopLevel(e),onList:()=>this.listCodec.encodeTopLevel(e),onArray:()=>this.arrayCodec.encodeTopLevel(e),onStruct:()=>this.structCodec.encodeTopLevel(e),onTuple:()=>this.tupleCodec.encodeTopLevel(e),onEnum:()=>this.enumCodec.encodeTopLevel(e)})}};pr.BinaryCodec=Em;var lh=class{constructor(e){this.maxBufferLength=e?.maxBufferLength||40960,this.maxListLength=e?.maxListLength||8192}checkBufferLength(e){if(e.length>this.maxBufferLength)throw new qI.ErrCodec(`Buffer too large: ${e.length} > ${this.maxBufferLength}`)}checkListLength(e){if(e>this.maxListLength)throw new qI.ErrCodec(`List too large: ${e} > ${this.maxListLength}`)}};pr.BinaryCodecConstraints=lh});var HI=v(gr=>{"use strict";c();var a4=gr&&gr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gr,"__esModule",{value:!0});gr.decodeBigNumber=gr.decodeString=gr.decodeBool=gr.decodeUnsignedNumber=void 0;var u4=a4(Wt()),fh=bt(),c4=vm(),hh=new c4.BinaryCodec;function l4(t){let e=hh.decodeTopLevel(t,new fh.BigUIntType);return Number(e.valueOf())}gr.decodeUnsignedNumber=l4;function f4(t){return!!hh.decodeTopLevel(t,new fh.BooleanType).valueOf()}gr.decodeBool=f4;function h4(t){let e=hh.decodeTopLevel(t,new fh.BytesType);return String(e.valueOf())}gr.decodeString=h4;function d4(t){let e=hh.decodeTopLevel(t,new fh.BigUIntType);return new u4.default(e.valueOf())}gr.decodeBigNumber=d4});var GI=v(mi=>{"use strict";c();var p4=mi&&mi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jI=mi&&mi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&p4(e,t,r)};Object.defineProperty(mi,"__esModule",{value:!0});jI(vm(),mi);jI(HI(),mi)});var ph=v(dh=>{"use strict";c();Object.defineProperty(dh,"__esModule",{value:!0});dh.ArgSerializer=void 0;var QI=Ro(),g4=GI(),Am=xf(),_m=Df(),bm=Mf(),y4={codec:new g4.BinaryCodec},Im=class{constructor(e){e=Object.assign(Object.assign({},y4),e),this.codec=e.codec}stringToValues(e,r){let n=this.stringToBuffers(e);return this.buffersToValues(n,r)}stringToBuffers(e){return e.split(QI.ARGUMENTS_SEPARATOR).map(r=>h.Buffer.from(r,"hex"))}buffersToValues(e,r){let n=this;e=e||[];let i=[],s=0,o=e.length;for(let f=0;f<r.length;f++){let y=r[f].type,w=a(y);i.push(w)}function a(f){if(f.hasExactClass(Am.OptionalType.ClassName)){let d=a(f.getFirstTypeParameter());return new Am.OptionalValue(f,d)}else if(f.hasExactClass(bm.VariadicType.ClassName)){let d=[];for(;!l();)d.push(a(f.getFirstTypeParameter()));return new bm.VariadicValue(f,d)}else if(f.hasExactClass(_m.CompositeType.ClassName)){let d=[];for(let y of f.getTypeParameters())d.push(a(y));return new _m.CompositeValue(f,d)}else return u(f)}function u(f){if(l())return null;let d=e[s++];return n.codec.decodeTopLevel(d,f)}function l(){return s>=o}return i}valuesToString(e){let r=this.valuesToStrings(e),n=r.join(QI.ARGUMENTS_SEPARATOR),i=r.length;return{argumentsString:n,count:i}}valuesToStrings(e){return this.valuesToBuffers(e).map(i=>i.toString("hex"))}valuesToBuffers(e){let r=this,n=[];for(let s of e)i(s);function i(s){if(s.hasExactClass(Am.OptionalValue.ClassName)){let o=s;o.isSet()&&i(o.getTypedValue())}else if(s.hasExactClass(bm.VariadicValue.ClassName)){let o=s;for(let a of o.getItems())i(a)}else if(s.hasExactClass(_m.CompositeValue.ClassName)){let o=s;for(let a of o.getItems())i(a)}else{let o=r.codec.encodeTopLevel(s);n.push(o)}}return n}};dh.ArgSerializer=Im});var mh=v(yh=>{"use strict";c();Object.defineProperty(yh,"__esModule",{value:!0});yh.Compatibility=void 0;var m4=Zt(),gh=class{static guardAddressIsSetAndNonZero(e,r,n){this.areWarningsEnabled&&(!e||e.bech32()==""?console.warn(`${r}: address should be set; ${n}. In the future, this will throw an exception instead of emitting a WARN.`):e.bech32()==m4.Address.Zero().bech32()&&console.warn(`${r}: address should not be the 'zero' address (also known as the 'contracts deployment address'); ${n}. In the future, this will throw an exception instead of emitting a WARN.`))}};yh.Compatibility=gh;gh.areWarningsEnabled=!0});var kI=v(nn=>{"use strict";c();var w4=nn&&nn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),E4=nn&&nn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),v4=nn&&nn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&w4(e,t,r);return E4(e,t),e};Object.defineProperty(nn,"__esModule",{value:!0});nn.Hash=void 0;var A4=v4(He()),vc=class{constructor(e){if(!e)this.hash=h.Buffer.from([]);else if(e instanceof h.Buffer)this.hash=e;else if(typeof e=="string")this.hash=h.Buffer.from(e,"hex");else throw new A4.ErrBadType("hash","buffer | string",e)}static empty(){return new vc(h.Buffer.from([]))}isEmpty(){return this.hash.length==0}toString(){return this.hex()}hex(){return this.hash.toString("hex")}valueOf(){return this.hash}};nn.Hash=vc});var zI=v(yr=>{"use strict";c();var _4=yr&&yr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),b4=yr&&yr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),I4=yr&&yr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_4(e,t,r);return b4(e,t),e};Object.defineProperty(yr,"__esModule",{value:!0});yr.TransactionOptions=yr.TransactionVersion=void 0;var Or=Ro(),KI=I4(He()),xa=class{constructor(e){if(e=Number(e),e<1)throw new KI.ErrTransactionVersionInvalid(e);this.value=e}static withDefaultVersion(){return new xa(Or.TRANSACTION_VERSION_DEFAULT)}static withTxOptions(){return new xa(Or.TRANSACTION_VERSION_WITH_OPTIONS)}valueOf(){return this.value}};yr.TransactionVersion=xa;var Na=class{constructor(e){if(e=Number(e),e<0)throw new KI.ErrTransactionOptionsInvalid(e);this.value=e}static withDefaultOptions(){return new Na(Or.TRANSACTION_OPTIONS_DEFAULT)}static withOptions(e){let r=0;return e.hashSign&&(r|=Or.TRANSACTION_OPTIONS_TX_HASH_SIGN),e.guarded&&(r|=Or.TRANSACTION_OPTIONS_TX_GUARDED),new Na(r)}isWithHashSign(){return(this.value&Or.TRANSACTION_OPTIONS_TX_HASH_SIGN)==Or.TRANSACTION_OPTIONS_TX_HASH_SIGN}isWithGuardian(){return(this.value&Or.TRANSACTION_OPTIONS_TX_GUARDED)==Or.TRANSACTION_OPTIONS_TX_GUARDED}setWithHashSign(){this.value|=Or.TRANSACTION_OPTIONS_TX_HASH_SIGN}setWithGuardian(){this.value|=Or.TRANSACTION_OPTIONS_TX_GUARDED}valueOf(){return this.value}};yr.TransactionOptions=Na});var $I=v((Tee,WI)=>{"use strict";c();WI.exports=S4;function S4(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var d=new Array(arguments.length-1),y=0;y<d.length;)d[y++]=arguments[y];a.apply(null,d)}};try{t.apply(e||null,r)}catch(l){s&&(s=!1,u(l))}})}});var ZI=v(XI=>{"use strict";c();var wh=XI;wh.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Da=new Array(64),JI=new Array(123);for(Pr=0;Pr<64;)JI[Da[Pr]=Pr<26?Pr+65:Pr<52?Pr+71:Pr<62?Pr-4:Pr-59|43]=Pr++;var Pr;wh.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var l=e[r++];switch(a){case 0:s[o++]=Da[l>>2],u=(l&3)<<4,a=1;break;case 1:s[o++]=Da[u|l>>4],u=(l&15)<<2,a=2;break;case 2:s[o++]=Da[u|l>>6],s[o++]=Da[l&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Da[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var YI="invalid encoding";wh.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&s>1)break;if((u=JI[u])===void 0)throw Error(YI);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(YI);return n-i};wh.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var tS=v((Oee,eS)=>{"use strict";c();eS.exports=Eh;function Eh(){this._listeners={}}Eh.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Eh.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Eh.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var uS=v((Bee,aS)=>{"use strict";c();aS.exports=rS(rS);function rS(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,l,f){e[0]=u,l[f]=r[0],l[f+1]=r[1],l[f+2]=r[2],l[f+3]=r[3]}function s(u,l,f){e[0]=u,l[f]=r[3],l[f+1]=r[2],l[f+2]=r[1],l[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(u,l){return r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],r[3]=u[l+3],e[0]}function a(u,l){return r[3]=u[l],r[2]=u[l+1],r[1]=u[l+2],r[0]=u[l+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),l=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|l)>>>0,s,o)}}t.writeFloatLE=e.bind(null,nS),t.writeFloatBE=e.bind(null,iS);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,l=o&8388607;return u===255?l?NaN:a*(1/0):u===0?a*1401298464324817e-60*l:a*Math.pow(2,u-150)*(l+8388608)}t.readFloatLE=r.bind(null,sS),t.readFloatBE=r.bind(null,oS)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,l,f){e[0]=u,l[f]=r[0],l[f+1]=r[1],l[f+2]=r[2],l[f+3]=r[3],l[f+4]=r[4],l[f+5]=r[5],l[f+6]=r[6],l[f+7]=r[7]}function s(u,l,f){e[0]=u,l[f]=r[7],l[f+1]=r[6],l[f+2]=r[5],l[f+3]=r[4],l[f+4]=r[3],l[f+5]=r[2],l[f+6]=r[1],l[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(u,l){return r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],r[3]=u[l+3],r[4]=u[l+4],r[5]=u[l+5],r[6]=u[l+6],r[7]=u[l+7],e[0]}function a(u,l){return r[7]=u[l],r[6]=u[l+1],r[5]=u[l+2],r[4]=u[l+3],r[3]=u[l+4],r[2]=u[l+5],r[1]=u[l+6],r[0]=u[l+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,u){var l=o<0?1:0;if(l&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((l<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((l<<31|f/4294967296)>>>0,a,u+s);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),f=o*Math.pow(2,-d),n(f*4503599627370496>>>0,a,u+i),n((l<<31|d+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}t.writeDoubleLE=e.bind(null,nS,0,4),t.writeDoubleBE=e.bind(null,iS,4,0);function r(n,i,s,o,a){var u=n(o,a+i),l=n(o,a+s),f=(l>>31)*2+1,d=l>>>20&2047,y=4294967296*(l&1048575)+u;return d===2047?y?NaN:f*(1/0):d===0?f*5e-324*y:f*Math.pow(2,d-1075)*(y+4503599627370496)}t.readDoubleLE=r.bind(null,sS,0,4),t.readDoubleBE=r.bind(null,oS,4,0)}(),t}function nS(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function iS(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function sS(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function oS(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var cS=v((exports,module)=>{"use strict";c();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var fS=v(lS=>{"use strict";c();var Sm=lS;Sm.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};Sm.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=e[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Sm.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var dS=v((Uee,hS)=>{"use strict";c();hS.exports=C4;function C4(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return t(u);o+u>n&&(s=t(n),o=0);var l=e.call(s,o,o+=u);return o&7&&(o=(o|7)+1),l}}});var gS=v((Vee,pS)=>{"use strict";c();pS.exports=xt;var Ac=Ei();function xt(t,e){this.lo=t>>>0,this.hi=e>>>0}var Vs=xt.zero=new xt(0,0);Vs.toNumber=function(){return 0};Vs.zzEncode=Vs.zzDecode=function(){return this};Vs.length=function(){return 1};var T4=xt.zeroHash="\0\0\0\0\0\0\0\0";xt.fromNumber=function(e){if(e===0)return Vs;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new xt(n,i)};xt.from=function(e){if(typeof e=="number")return xt.fromNumber(e);if(Ac.isString(e))if(Ac.Long)e=Ac.Long.fromString(e);else return xt.fromNumber(parseInt(e,10));return e.low||e.high?new xt(e.low>>>0,e.high>>>0):Vs};xt.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};xt.prototype.toLong=function(e){return Ac.Long?new Ac.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var wi=String.prototype.charCodeAt;xt.fromHash=function(e){return e===T4?Vs:new xt((wi.call(e,0)|wi.call(e,1)<<8|wi.call(e,2)<<16|wi.call(e,3)<<24)>>>0,(wi.call(e,4)|wi.call(e,5)<<8|wi.call(e,6)<<16|wi.call(e,7)<<24)>>>0)};xt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};xt.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};xt.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};xt.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Ei=v(Cm=>{"use strict";c();var me=Cm;me.asPromise=$I();me.base64=ZI();me.EventEmitter=tS();me.float=uS();me.inquire=cS();me.utf8=fS();me.pool=dS();me.LongBits=gS();me.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);me.global=me.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Cm;me.emptyArray=Object.freeze?Object.freeze([]):[];me.emptyObject=Object.freeze?Object.freeze({}):{};me.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};me.isString=function(e){return typeof e=="string"||e instanceof String};me.isObject=function(e){return e&&typeof e=="object"};me.isset=me.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};me.Buffer=function(){try{var t=me.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();me._Buffer_from=null;me._Buffer_allocUnsafe=null;me.newBuffer=function(e){return typeof e=="number"?me.Buffer?me._Buffer_allocUnsafe(e):new me.Array(e):me.Buffer?me._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};me.Array=typeof Uint8Array<"u"?Uint8Array:Array;me.Long=me.global.dcodeIO&&me.global.dcodeIO.Long||me.global.Long||me.inquire("long");me.key2Re=/^true|false|0|1$/;me.key32Re=/^-?(?:0|[1-9][0-9]*)$/;me.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;me.longToHash=function(e){return e?me.LongBits.from(e).toHash():me.LongBits.zeroHash};me.longFromHash=function(e,r){var n=me.LongBits.fromHash(e);return me.Long?me.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function yS(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}me.merge=yS;me.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function mS(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&yS(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}me.newError=mS;me.ProtocolError=mS("ProtocolError");me.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};me.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};me.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};me._configure=function(){var t=me.Buffer;if(!t){me._Buffer_from=me._Buffer_allocUnsafe=null;return}me._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},me._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Bm=v((Qee,AS)=>{"use strict";c();AS.exports=Le;var mr=Ei(),Tm,vh=mr.LongBits,wS=mr.base64,ES=mr.utf8;function _c(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Nm(){}function x4(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Le(){this.len=0,this.head=new _c(Nm,0,0),this.tail=this.head,this.states=null}var vS=function(){return mr.Buffer?function(){return(Le.create=function(){return new Tm})()}:function(){return new Le}};Le.create=vS();Le.alloc=function(e){return new mr.Array(e)};mr.Array!==Array&&(Le.alloc=mr.pool(Le.alloc,mr.Array.prototype.subarray));Le.prototype._push=function(e,r,n){return this.tail=this.tail.next=new _c(e,r,n),this.len+=r,this};function Dm(t,e,r){e[r]=t&255}function N4(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Om(t,e){this.len=t,this.next=void 0,this.val=e}Om.prototype=Object.create(_c.prototype);Om.prototype.fn=N4;Le.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Om((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Le.prototype.int32=function(e){return e<0?this._push(Pm,10,vh.fromNumber(e)):this.uint32(e)};Le.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Pm(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Le.prototype.uint64=function(e){var r=vh.from(e);return this._push(Pm,r.length(),r)};Le.prototype.int64=Le.prototype.uint64;Le.prototype.sint64=function(e){var r=vh.from(e).zzEncode();return this._push(Pm,r.length(),r)};Le.prototype.bool=function(e){return this._push(Dm,1,e?1:0)};function xm(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Le.prototype.fixed32=function(e){return this._push(xm,4,e>>>0)};Le.prototype.sfixed32=Le.prototype.fixed32;Le.prototype.fixed64=function(e){var r=vh.from(e);return this._push(xm,4,r.lo)._push(xm,4,r.hi)};Le.prototype.sfixed64=Le.prototype.fixed64;Le.prototype.float=function(e){return this._push(mr.float.writeFloatLE,4,e)};Le.prototype.double=function(e){return this._push(mr.float.writeDoubleLE,8,e)};var D4=mr.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};Le.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Dm,1,0);if(mr.isString(e)){var n=Le.alloc(r=wS.length(e));wS.decode(e,n,0),e=n}return this.uint32(r)._push(D4,r,e)};Le.prototype.string=function(e){var r=ES.length(e);return r?this.uint32(r)._push(ES.write,r,e):this._push(Dm,1,0)};Le.prototype.fork=function(){return this.states=new x4(this),this.head=this.tail=new _c(Nm,0,0),this.len=0,this};Le.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new _c(Nm,0,0),this.len=0),this};Le.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Le.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Le._configure=function(t){Tm=t,Le.create=vS(),Tm._configure()}});var IS=v((Kee,bS)=>{"use strict";c();bS.exports=sn;var _S=Bm();(sn.prototype=Object.create(_S.prototype)).constructor=sn;var vi=Ei();function sn(){_S.call(this)}sn._configure=function(){sn.alloc=vi._Buffer_allocUnsafe,sn.writeBytesBuffer=vi.Buffer&&vi.Buffer.prototype instanceof Uint8Array&&vi.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};sn.prototype.bytes=function(e){vi.isString(e)&&(e=vi._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(sn.writeBytesBuffer,r,e),this};function O4(t,e,r){t.length<40?vi.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}sn.prototype.string=function(e){var r=vi.Buffer.byteLength(e);return this.uint32(r),r&&this._push(O4,r,e),this};sn._configure()});var Fm=v((Wee,NS)=>{"use strict";c();NS.exports=dt;var on=Ei(),Lm,TS=on.LongBits,P4=on.utf8;function Br(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function dt(t){this.buf=t,this.pos=0,this.len=t.length}var SS=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new dt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new dt(e);throw Error("illegal buffer")},xS=function(){return on.Buffer?function(r){return(dt.create=function(i){return on.Buffer.isBuffer(i)?new Lm(i):SS(i)})(r)}:SS};dt.create=xS();dt.prototype._slice=on.Array.prototype.subarray||on.Array.prototype.slice;dt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Br(this,10);return e}}();dt.prototype.int32=function(){return this.uint32()|0};dt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Rm(){var t=new TS(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Br(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Br(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}dt.prototype.bool=function(){return this.uint32()!==0};function Ah(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}dt.prototype.fixed32=function(){if(this.pos+4>this.len)throw Br(this,4);return Ah(this.buf,this.pos+=4)};dt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Br(this,4);return Ah(this.buf,this.pos+=4)|0};function CS(){if(this.pos+8>this.len)throw Br(this,8);return new TS(Ah(this.buf,this.pos+=4),Ah(this.buf,this.pos+=4))}dt.prototype.float=function(){if(this.pos+4>this.len)throw Br(this,4);var e=on.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};dt.prototype.double=function(){if(this.pos+8>this.len)throw Br(this,4);var e=on.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};dt.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Br(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};dt.prototype.string=function(){var e=this.bytes();return P4.read(e,0,e.length)};dt.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Br(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Br(this);while(this.buf[this.pos++]&128);return this};dt.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};dt._configure=function(t){Lm=t,dt.create=xS(),Lm._configure();var e=on.Long?"toLong":"toNumber";on.merge(dt.prototype,{int64:function(){return Rm.call(this)[e](!1)},uint64:function(){return Rm.call(this)[e](!0)},sint64:function(){return Rm.call(this).zzDecode()[e](!1)},fixed64:function(){return CS.call(this)[e](!0)},sfixed64:function(){return CS.call(this)[e](!1)}})}});var BS=v((Yee,PS)=>{"use strict";c();PS.exports=Hs;var OS=Fm();(Hs.prototype=Object.create(OS.prototype)).constructor=Hs;var DS=Ei();function Hs(t){OS.call(this,t)}Hs._configure=function(){DS.Buffer&&(Hs.prototype._slice=DS.Buffer.prototype.slice)};Hs.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Hs._configure()});var LS=v((Xee,RS)=>{"use strict";c();RS.exports=bc;var Mm=Ei();(bc.prototype=Object.create(Mm.EventEmitter.prototype)).constructor=bc;function bc(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Mm.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r}bc.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Mm.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,l){if(u)return o.emit("error",u,e),s(u);if(l===null){o.end(!0);return}if(!(l instanceof n))try{l=n[o.responseDelimited?"decodeDelimited":"decode"](l)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",l,e),s(null,l)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};bc.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var MS=v(FS=>{"use strict";c();var B4=FS;B4.Service=LS()});var qS=v((rte,US)=>{"use strict";c();US.exports={}});var jS=v(HS=>{"use strict";c();var er=HS;er.build="minimal";er.Writer=Bm();er.BufferWriter=IS();er.Reader=Fm();er.BufferReader=BS();er.util=Ei();er.rpc=MS();er.roots=qS();er.configure=VS;function VS(){er.util._configure(),er.Writer._configure(er.BufferWriter),er.Reader._configure(er.BufferReader)}VS()});var QS=v((ote,GS)=>{"use strict";c();GS.exports=jS()});var KS=v((ute,kS)=>{"use strict";c();var Oa=QS(),_h=Oa.Reader,R4=Oa.Writer,J=Oa.util,Ic=Oa.roots.default||(Oa.roots.default={});Ic.proto=function(){var t={};return t.Transaction=function(){function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.Nonce=J.Long?J.Long.fromBits(0,0,!0):0,e.prototype.Value=J.newBuffer([]),e.prototype.RcvAddr=J.newBuffer([]),e.prototype.RcvUserName=J.newBuffer([]),e.prototype.SndAddr=J.newBuffer([]),e.prototype.SndUserName=J.newBuffer([]),e.prototype.GasPrice=J.Long?J.Long.fromBits(0,0,!0):0,e.prototype.GasLimit=J.Long?J.Long.fromBits(0,0,!0):0,e.prototype.Data=J.newBuffer([]),e.prototype.ChainID=J.newBuffer([]),e.prototype.Version=0,e.prototype.Signature=J.newBuffer([]),e.prototype.Options=0,e.prototype.GuardAddr=J.newBuffer([]),e.prototype.GuardSignature=J.newBuffer([]),e.create=function(n){return new e(n)},e.encode=function(n,i){return i||(i=R4.create()),n.Nonce!=null&&Object.hasOwnProperty.call(n,"Nonce")&&i.uint32(8).uint64(n.Nonce),n.Value!=null&&Object.hasOwnProperty.call(n,"Value")&&i.uint32(18).bytes(n.Value),n.RcvAddr!=null&&Object.hasOwnProperty.call(n,"RcvAddr")&&i.uint32(26).bytes(n.RcvAddr),n.RcvUserName!=null&&Object.hasOwnProperty.call(n,"RcvUserName")&&i.uint32(34).bytes(n.RcvUserName),n.SndAddr!=null&&Object.hasOwnProperty.call(n,"SndAddr")&&i.uint32(42).bytes(n.SndAddr),n.SndUserName!=null&&Object.hasOwnProperty.call(n,"SndUserName")&&i.uint32(50).bytes(n.SndUserName),n.GasPrice!=null&&Object.hasOwnProperty.call(n,"GasPrice")&&i.uint32(56).uint64(n.GasPrice),n.GasLimit!=null&&Object.hasOwnProperty.call(n,"GasLimit")&&i.uint32(64).uint64(n.GasLimit),n.Data!=null&&Object.hasOwnProperty.call(n,"Data")&&i.uint32(74).bytes(n.Data),n.ChainID!=null&&Object.hasOwnProperty.call(n,"ChainID")&&i.uint32(82).bytes(n.ChainID),n.Version!=null&&Object.hasOwnProperty.call(n,"Version")&&i.uint32(88).uint32(n.Version),n.Signature!=null&&Object.hasOwnProperty.call(n,"Signature")&&i.uint32(98).bytes(n.Signature),n.Options!=null&&Object.hasOwnProperty.call(n,"Options")&&i.uint32(104).uint32(n.Options),n.GuardAddr!=null&&Object.hasOwnProperty.call(n,"GuardAddr")&&i.uint32(114).bytes(n.GuardAddr),n.GuardSignature!=null&&Object.hasOwnProperty.call(n,"GuardSignature")&&i.uint32(122).bytes(n.GuardSignature),i},e.encodeDelimited=function(n,i){return this.encode(n,i).ldelim()},e.decode=function(n,i){n instanceof _h||(n=_h.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new Ic.proto.Transaction;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.Nonce=n.uint64();break;case 2:o.Value=n.bytes();break;case 3:o.RcvAddr=n.bytes();break;case 4:o.RcvUserName=n.bytes();break;case 5:o.SndAddr=n.bytes();break;case 6:o.SndUserName=n.bytes();break;case 7:o.GasPrice=n.uint64();break;case 8:o.GasLimit=n.uint64();break;case 9:o.Data=n.bytes();break;case 10:o.ChainID=n.bytes();break;case 11:o.Version=n.uint32();break;case 12:o.Signature=n.bytes();break;case 13:o.Options=n.uint32();break;case 14:o.GuardAddr=n.bytes();break;case 15:o.GuardSignature=n.bytes();break;default:n.skipType(a&7);break}}return o},e.decodeDelimited=function(n){return n instanceof _h||(n=new _h(n)),this.decode(n,n.uint32())},e.verify=function(n){return typeof n!="object"||n===null?"object expected":n.Nonce!=null&&n.hasOwnProperty("Nonce")&&!J.isInteger(n.Nonce)&&!(n.Nonce&&J.isInteger(n.Nonce.low)&&J.isInteger(n.Nonce.high))?"Nonce: integer|Long expected":n.Value!=null&&n.hasOwnProperty("Value")&&!(n.Value&&typeof n.Value.length=="number"||J.isString(n.Value))?"Value: buffer expected":n.RcvAddr!=null&&n.hasOwnProperty("RcvAddr")&&!(n.RcvAddr&&typeof n.RcvAddr.length=="number"||J.isString(n.RcvAddr))?"RcvAddr: buffer expected":n.RcvUserName!=null&&n.hasOwnProperty("RcvUserName")&&!(n.RcvUserName&&typeof n.RcvUserName.length=="number"||J.isString(n.RcvUserName))?"RcvUserName: buffer expected":n.SndAddr!=null&&n.hasOwnProperty("SndAddr")&&!(n.SndAddr&&typeof n.SndAddr.length=="number"||J.isString(n.SndAddr))?"SndAddr: buffer expected":n.SndUserName!=null&&n.hasOwnProperty("SndUserName")&&!(n.SndUserName&&typeof n.SndUserName.length=="number"||J.isString(n.SndUserName))?"SndUserName: buffer expected":n.GasPrice!=null&&n.hasOwnProperty("GasPrice")&&!J.isInteger(n.GasPrice)&&!(n.GasPrice&&J.isInteger(n.GasPrice.low)&&J.isInteger(n.GasPrice.high))?"GasPrice: integer|Long expected":n.GasLimit!=null&&n.hasOwnProperty("GasLimit")&&!J.isInteger(n.GasLimit)&&!(n.GasLimit&&J.isInteger(n.GasLimit.low)&&J.isInteger(n.GasLimit.high))?"GasLimit: integer|Long expected":n.Data!=null&&n.hasOwnProperty("Data")&&!(n.Data&&typeof n.Data.length=="number"||J.isString(n.Data))?"Data: buffer expected":n.ChainID!=null&&n.hasOwnProperty("ChainID")&&!(n.ChainID&&typeof n.ChainID.length=="number"||J.isString(n.ChainID))?"ChainID: buffer expected":n.Version!=null&&n.hasOwnProperty("Version")&&!J.isInteger(n.Version)?"Version: integer expected":n.Signature!=null&&n.hasOwnProperty("Signature")&&!(n.Signature&&typeof n.Signature.length=="number"||J.isString(n.Signature))?"Signature: buffer expected":n.Options!=null&&n.hasOwnProperty("Options")&&!J.isInteger(n.Options)?"Options: integer expected":n.GuardAddr!=null&&n.hasOwnProperty("GuardAddr")&&!(n.GuardAddr&&typeof n.GuardAddr.length=="number"||J.isString(n.GuardAddr))?"GuardAddr: buffer expected":n.GuardSignature!=null&&n.hasOwnProperty("GuardSignature")&&!(n.GuardSignature&&typeof n.GuardSignature.length=="number"||J.isString(n.GuardSignature))?"GuardSignature: buffer expected":null},e.fromObject=function(n){if(n instanceof Ic.proto.Transaction)return n;var i=new Ic.proto.Transaction;return n.Nonce!=null&&(J.Long?(i.Nonce=J.Long.fromValue(n.Nonce)).unsigned=!0:typeof n.Nonce=="string"?i.Nonce=parseInt(n.Nonce,10):typeof n.Nonce=="number"?i.Nonce=n.Nonce:typeof n.Nonce=="object"&&(i.Nonce=new J.LongBits(n.Nonce.low>>>0,n.Nonce.high>>>0).toNumber(!0))),n.Value!=null&&(typeof n.Value=="string"?J.base64.decode(n.Value,i.Value=J.newBuffer(J.base64.length(n.Value)),0):n.Value.length&&(i.Value=n.Value)),n.RcvAddr!=null&&(typeof n.RcvAddr=="string"?J.base64.decode(n.RcvAddr,i.RcvAddr=J.newBuffer(J.base64.length(n.RcvAddr)),0):n.RcvAddr.length&&(i.RcvAddr=n.RcvAddr)),n.RcvUserName!=null&&(typeof n.RcvUserName=="string"?J.base64.decode(n.RcvUserName,i.RcvUserName=J.newBuffer(J.base64.length(n.RcvUserName)),0):n.RcvUserName.length&&(i.RcvUserName=n.RcvUserName)),n.SndAddr!=null&&(typeof n.SndAddr=="string"?J.base64.decode(n.SndAddr,i.SndAddr=J.newBuffer(J.base64.length(n.SndAddr)),0):n.SndAddr.length&&(i.SndAddr=n.SndAddr)),n.SndUserName!=null&&(typeof n.SndUserName=="string"?J.base64.decode(n.SndUserName,i.SndUserName=J.newBuffer(J.base64.length(n.SndUserName)),0):n.SndUserName.length&&(i.SndUserName=n.SndUserName)),n.GasPrice!=null&&(J.Long?(i.GasPrice=J.Long.fromValue(n.GasPrice)).unsigned=!0:typeof n.GasPrice=="string"?i.GasPrice=parseInt(n.GasPrice,10):typeof n.GasPrice=="number"?i.GasPrice=n.GasPrice:typeof n.GasPrice=="object"&&(i.GasPrice=new J.LongBits(n.GasPrice.low>>>0,n.GasPrice.high>>>0).toNumber(!0))),n.GasLimit!=null&&(J.Long?(i.GasLimit=J.Long.fromValue(n.GasLimit)).unsigned=!0:typeof n.GasLimit=="string"?i.GasLimit=parseInt(n.GasLimit,10):typeof n.GasLimit=="number"?i.GasLimit=n.GasLimit:typeof n.GasLimit=="object"&&(i.GasLimit=new J.LongBits(n.GasLimit.low>>>0,n.GasLimit.high>>>0).toNumber(!0))),n.Data!=null&&(typeof n.Data=="string"?J.base64.decode(n.Data,i.Data=J.newBuffer(J.base64.length(n.Data)),0):n.Data.length&&(i.Data=n.Data)),n.ChainID!=null&&(typeof n.ChainID=="string"?J.base64.decode(n.ChainID,i.ChainID=J.newBuffer(J.base64.length(n.ChainID)),0):n.ChainID.length&&(i.ChainID=n.ChainID)),n.Version!=null&&(i.Version=n.Version>>>0),n.Signature!=null&&(typeof n.Signature=="string"?J.base64.decode(n.Signature,i.Signature=J.newBuffer(J.base64.length(n.Signature)),0):n.Signature.length&&(i.Signature=n.Signature)),n.Options!=null&&(i.Options=n.Options>>>0),n.GuardAddr!=null&&(typeof n.GuardAddr=="string"?J.base64.decode(n.GuardAddr,i.GuardAddr=J.newBuffer(J.base64.length(n.GuardAddr)),0):n.GuardAddr.length&&(i.GuardAddr=n.GuardAddr)),n.GuardSignature!=null&&(typeof n.GuardSignature=="string"?J.base64.decode(n.GuardSignature,i.GuardSignature=J.newBuffer(J.base64.length(n.GuardSignature)),0):n.GuardSignature.length&&(i.GuardSignature=n.GuardSignature)),i},e.toObject=function(n,i){i||(i={});var s={};if(i.defaults){if(J.Long){var o=new J.Long(0,0,!0);s.Nonce=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.Nonce=i.longs===String?"0":0;if(i.bytes===String?s.Value="":(s.Value=[],i.bytes!==Array&&(s.Value=J.newBuffer(s.Value))),i.bytes===String?s.RcvAddr="":(s.RcvAddr=[],i.bytes!==Array&&(s.RcvAddr=J.newBuffer(s.RcvAddr))),i.bytes===String?s.RcvUserName="":(s.RcvUserName=[],i.bytes!==Array&&(s.RcvUserName=J.newBuffer(s.RcvUserName))),i.bytes===String?s.SndAddr="":(s.SndAddr=[],i.bytes!==Array&&(s.SndAddr=J.newBuffer(s.SndAddr))),i.bytes===String?s.SndUserName="":(s.SndUserName=[],i.bytes!==Array&&(s.SndUserName=J.newBuffer(s.SndUserName))),J.Long){var o=new J.Long(0,0,!0);s.GasPrice=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.GasPrice=i.longs===String?"0":0;if(J.Long){var o=new J.Long(0,0,!0);s.GasLimit=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.GasLimit=i.longs===String?"0":0;i.bytes===String?s.Data="":(s.Data=[],i.bytes!==Array&&(s.Data=J.newBuffer(s.Data))),i.bytes===String?s.ChainID="":(s.ChainID=[],i.bytes!==Array&&(s.ChainID=J.newBuffer(s.ChainID))),s.Version=0,i.bytes===String?s.Signature="":(s.Signature=[],i.bytes!==Array&&(s.Signature=J.newBuffer(s.Signature))),s.Options=0,i.bytes===String?s.GuardAddr="":(s.GuardAddr=[],i.bytes!==Array&&(s.GuardAddr=J.newBuffer(s.GuardAddr))),i.bytes===String?s.GuardSignature="":(s.GuardSignature=[],i.bytes!==Array&&(s.GuardSignature=J.newBuffer(s.GuardSignature)))}return n.Nonce!=null&&n.hasOwnProperty("Nonce")&&(typeof n.Nonce=="number"?s.Nonce=i.longs===String?String(n.Nonce):n.Nonce:s.Nonce=i.longs===String?J.Long.prototype.toString.call(n.Nonce):i.longs===Number?new J.LongBits(n.Nonce.low>>>0,n.Nonce.high>>>0).toNumber(!0):n.Nonce),n.Value!=null&&n.hasOwnProperty("Value")&&(s.Value=i.bytes===String?J.base64.encode(n.Value,0,n.Value.length):i.bytes===Array?Array.prototype.slice.call(n.Value):n.Value),n.RcvAddr!=null&&n.hasOwnProperty("RcvAddr")&&(s.RcvAddr=i.bytes===String?J.base64.encode(n.RcvAddr,0,n.RcvAddr.length):i.bytes===Array?Array.prototype.slice.call(n.RcvAddr):n.RcvAddr),n.RcvUserName!=null&&n.hasOwnProperty("RcvUserName")&&(s.RcvUserName=i.bytes===String?J.base64.encode(n.RcvUserName,0,n.RcvUserName.length):i.bytes===Array?Array.prototype.slice.call(n.RcvUserName):n.RcvUserName),n.SndAddr!=null&&n.hasOwnProperty("SndAddr")&&(s.SndAddr=i.bytes===String?J.base64.encode(n.SndAddr,0,n.SndAddr.length):i.bytes===Array?Array.prototype.slice.call(n.SndAddr):n.SndAddr),n.SndUserName!=null&&n.hasOwnProperty("SndUserName")&&(s.SndUserName=i.bytes===String?J.base64.encode(n.SndUserName,0,n.SndUserName.length):i.bytes===Array?Array.prototype.slice.call(n.SndUserName):n.SndUserName),n.GasPrice!=null&&n.hasOwnProperty("GasPrice")&&(typeof n.GasPrice=="number"?s.GasPrice=i.longs===String?String(n.GasPrice):n.GasPrice:s.GasPrice=i.longs===String?J.Long.prototype.toString.call(n.GasPrice):i.longs===Number?new J.LongBits(n.GasPrice.low>>>0,n.GasPrice.high>>>0).toNumber(!0):n.GasPrice),n.GasLimit!=null&&n.hasOwnProperty("GasLimit")&&(typeof n.GasLimit=="number"?s.GasLimit=i.longs===String?String(n.GasLimit):n.GasLimit:s.GasLimit=i.longs===String?J.Long.prototype.toString.call(n.GasLimit):i.longs===Number?new J.LongBits(n.GasLimit.low>>>0,n.GasLimit.high>>>0).toNumber(!0):n.GasLimit),n.Data!=null&&n.hasOwnProperty("Data")&&(s.Data=i.bytes===String?J.base64.encode(n.Data,0,n.Data.length):i.bytes===Array?Array.prototype.slice.call(n.Data):n.Data),n.ChainID!=null&&n.hasOwnProperty("ChainID")&&(s.ChainID=i.bytes===String?J.base64.encode(n.ChainID,0,n.ChainID.length):i.bytes===Array?Array.prototype.slice.call(n.ChainID):n.ChainID),n.Version!=null&&n.hasOwnProperty("Version")&&(s.Version=n.Version),n.Signature!=null&&n.hasOwnProperty("Signature")&&(s.Signature=i.bytes===String?J.base64.encode(n.Signature,0,n.Signature.length):i.bytes===Array?Array.prototype.slice.call(n.Signature):n.Signature),n.Options!=null&&n.hasOwnProperty("Options")&&(s.Options=n.Options),n.GuardAddr!=null&&n.hasOwnProperty("GuardAddr")&&(s.GuardAddr=i.bytes===String?J.base64.encode(n.GuardAddr,0,n.GuardAddr.length):i.bytes===Array?Array.prototype.slice.call(n.GuardAddr):n.GuardAddr),n.GuardSignature!=null&&n.hasOwnProperty("GuardSignature")&&(s.GuardSignature=i.bytes===String?J.base64.encode(n.GuardSignature,0,n.GuardSignature.length):i.bytes===Array?Array.prototype.slice.call(n.GuardSignature):n.GuardSignature),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Oa.util.toJSONOptions)},e}(),t}();kS.exports=Ic});var WS=v(wr=>{"use strict";c();var L4=wr&&wr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),F4=wr&&wr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),M4=wr&&wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&L4(e,t,r);return F4(e,t),e},U4=wr&&wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});wr.ProtoSerializer=void 0;var q4=U4(Wt()),Um=Zt(),V4=Ro(),H4=M4(He()),j4=Kf(),zS=KS(),qm=class{serializeTransaction(e){let r=new Um.Address(e.getReceiver().bech32()).pubkey(),n=new Um.Address(e.getSender().bech32()).pubkey(),i=new zS.proto.Transaction({Nonce:e.getNonce().valueOf()?e.getNonce().valueOf():void 0,Value:this.serializeTransactionValue(e.getValue()),RcvAddr:r,RcvUserName:null,SndAddr:n,SndUserName:null,GasPrice:e.getGasPrice().valueOf(),GasLimit:e.getGasLimit().valueOf(),Data:e.getData().length()==0?null:e.getData().valueOf(),ChainID:h.Buffer.from(e.getChainID().valueOf()),Version:e.getVersion().valueOf(),Signature:e.getSignature()});if(e.getOptions().valueOf()!==V4.TRANSACTION_OPTIONS_DEFAULT&&(i.Options=e.getOptions().valueOf()),e.isGuardedTransaction()){let a=e.getGuardian();i.GuardAddr=new Um.Address(a.bech32()).pubkey(),i.GuardSignature=e.getGuardianSignature()}let s=zS.proto.Transaction.encode(i).finish();return h.Buffer.from(s)}serializeTransactionValue(e){let r=new q4.default(e.toString());if(r.isZero())return h.Buffer.from([0,0]);let n=j4.bigIntToBuffer(r);return n=h.Buffer.concat([h.Buffer.from([0]),n]),n}deserializeTransaction(e){throw new H4.ErrUnsupportedOperation("deserializeTransaction")}};wr.ProtoSerializer=qm});var $S=v(js=>{"use strict";c();var G4=js&&js.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Q4=js&&js.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&G4(e,t,r)};Object.defineProperty(js,"__esModule",{value:!0});Q4(WS(),js)});var XS=v(an=>{"use strict";c();var k4=an&&an.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),K4=an&&an.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),z4=an&&an.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&k4(e,t,r);return K4(e,t),e};Object.defineProperty(an,"__esModule",{value:!0});an.Signature=void 0;var YS=z4(He()),JS=64,Rr=class{constructor(e){if(this.valueHex="",!!e){if(typeof e=="string")return Rr.fromHex(e);if(e instanceof h.Buffer)return Rr.fromBuffer(e)}}static empty(){return new Rr}static fromHex(e){if(e.startsWith("0x")&&(e=e.slice(2)),!Rr.isValidHex(e))throw new YS.ErrSignatureCannotCreate(e);return Rr.fromValidHex(e)}static isValidHex(e){return h.Buffer.from(e,"hex").length==JS}static fromValidHex(e){let r=new Rr;return r.valueHex=e,r}static fromBuffer(e){if(e.length!=JS)throw new YS.ErrSignatureCannotCreate(e);return Rr.fromValidHex(e.toString("hex"))}hex(){return this.valueHex}};an.Signature=Rr});var Sc=v(bh=>{"use strict";c();Object.defineProperty(bh,"__esModule",{value:!0});bh.TransactionPayload=void 0;var Pa=class{constructor(e){this.data=h.Buffer.from(e||[])}static fromEncoded(e){if(!e)return new Pa("");let r=h.Buffer.from(e,"base64").toString();return new Pa(r)}isEmpty(){return this.data.length==0}encoded(){return this.data.toString("base64")}valueOf(){return this.data}toString(){return this.data.toString()}getEncodedArguments(){return this.toString().split("@")}getRawArguments(){return this.getEncodedArguments().map(e=>h.Buffer.from(e,"hex"))}length(){return h.Buffer.from(this.data).length}};bh.TransactionPayload=Pa});var Vm=v((wte,ZS)=>{c();Un.notEqual=$4;Un.notOk=Y4;Un.equal=W4;Un.ok=Un;ZS.exports=Un;function W4(t,e,r){Un(t==e,r)}function $4(t,e,r){Un(t!=e,r)}function Y4(t,e){Un(!t,e)}function Un(t,e){if(!t)throw new Error(e||"AssertionError")}});var Ma=v(Fa=>{"use strict";c();var Hm=q0(),Ra=H0(),eC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Fa.Buffer=z;Fa.SlowBuffer=rM;Fa.INSPECT_MAX_BYTES=50;var Ih=2147483647;Fa.kMaxLength=Ih;z.TYPED_ARRAY_SUPPORT=J4();!z.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function J4(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(z.prototype,"parent",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.buffer}});Object.defineProperty(z.prototype,"offset",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.byteOffset}});function qn(t){if(t>Ih)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,z.prototype),e}function z(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return km(t)}return iC(t,e,r)}z.poolSize=8192;function iC(t,e,r){if(typeof t=="string")return Z4(t,e);if(ArrayBuffer.isView(t))return eM(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(un(t,ArrayBuffer)||t&&un(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(un(t,SharedArrayBuffer)||t&&un(t.buffer,SharedArrayBuffer)))return Gm(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return z.from(n,e,r);let i=tM(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return z.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}z.from=function(t,e,r){return iC(t,e,r)};Object.setPrototypeOf(z.prototype,Uint8Array.prototype);Object.setPrototypeOf(z,Uint8Array);function sC(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function X4(t,e,r){return sC(t),t<=0?qn(t):e!==void 0?typeof r=="string"?qn(t).fill(e,r):qn(t).fill(e):qn(t)}z.alloc=function(t,e,r){return X4(t,e,r)};function km(t){return sC(t),qn(t<0?0:Km(t)|0)}z.allocUnsafe=function(t){return km(t)};z.allocUnsafeSlow=function(t){return km(t)};function Z4(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!z.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=oC(t,e)|0,n=qn(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function jm(t){let e=t.length<0?0:Km(t.length)|0,r=qn(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function eM(t){if(un(t,Uint8Array)){let e=new Uint8Array(t);return Gm(e.buffer,e.byteOffset,e.byteLength)}return jm(t)}function Gm(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,z.prototype),n}function tM(t){if(z.isBuffer(t)){let e=Km(t.length)|0,r=qn(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Wm(t.length)?qn(0):jm(t);if(t.type==="Buffer"&&Array.isArray(t.data))return jm(t.data)}function Km(t){if(t>=Ih)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ih.toString(16)+" bytes");return t|0}function rM(t){return+t!=t&&(t=0),z.alloc(+t)}z.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==z.prototype};z.compare=function(e,r){if(un(e,Uint8Array)&&(e=z.from(e,e.offset,e.byteLength)),un(r,Uint8Array)&&(r=z.from(r,r.offset,r.byteLength)),!z.isBuffer(e)||!z.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};z.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};z.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return z.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=z.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(un(o,Uint8Array))s+o.length>i.length?(z.isBuffer(o)||(o=z.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(z.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function oC(t,e){if(z.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||un(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Qm(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return gC(t).length;default:if(i)return n?-1:Qm(t).length;e=(""+e).toLowerCase(),i=!0}}z.byteLength=oC;function nM(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return dM(this,e,r);case"utf8":case"utf-8":return uC(this,e,r);case"ascii":return fM(this,e,r);case"latin1":case"binary":return hM(this,e,r);case"base64":return cM(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pM(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}z.prototype._isBuffer=!0;function Gs(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}z.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Gs(this,r,r+1);return this};z.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Gs(this,r,r+3),Gs(this,r+1,r+2);return this};z.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Gs(this,r,r+7),Gs(this,r+1,r+6),Gs(this,r+2,r+5),Gs(this,r+3,r+4);return this};z.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?uC(this,0,e):nM.apply(this,arguments)};z.prototype.toLocaleString=z.prototype.toString;z.prototype.equals=function(e){if(!z.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:z.compare(this,e)===0};z.prototype.inspect=function(){let e="",r=Fa.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};eC&&(z.prototype[eC]=z.prototype.inspect);z.prototype.compare=function(e,r,n,i,s){if(un(e,Uint8Array)&&(e=z.from(e,e.offset,e.byteLength)),!z.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,u=Math.min(o,a),l=this.slice(i,s),f=e.slice(r,n);for(let d=0;d<u;++d)if(l[d]!==f[d]){o=l[d],a=f[d];break}return o<a?-1:a<o?1:0};function aC(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Wm(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=z.from(e,n)),z.isBuffer(e))return e.length===0?-1:tC(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):tC(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function tC(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(f,d){return s===1?f[d]:f.readUInt16BE(d*s)}let l;if(i){let f=-1;for(l=r;l<o;l++)if(u(t,l)===u(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===a)return f*s}else f!==-1&&(l-=l-f),f=-1}else for(r+a>o&&(r=o-a),l=r;l>=0;l--){let f=!0;for(let d=0;d<a;d++)if(u(t,l+d)!==u(e,d)){f=!1;break}if(f)return l}return-1}z.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};z.prototype.indexOf=function(e,r,n){return aC(this,e,r,n,!0)};z.prototype.lastIndexOf=function(e,r,n){return aC(this,e,r,n,!1)};function iM(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Wm(a))return o;t[r+o]=a}return o}function sM(t,e,r,n){return Sh(Qm(e,t.length-r),t,r,n)}function oM(t,e,r,n){return Sh(wM(e),t,r,n)}function aM(t,e,r,n){return Sh(gC(e),t,r,n)}function uM(t,e,r,n){return Sh(EM(e,t.length-r),t,r,n)}z.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return iM(this,e,r,n);case"utf8":case"utf-8":return sM(this,e,r,n);case"ascii":case"latin1":case"binary":return oM(this,e,r,n);case"base64":return aM(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uM(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function cM(t,e,r){return e===0&&r===t.length?Hm.fromByteArray(t):Hm.fromByteArray(t.slice(e,r))}function uC(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let u,l,f,d;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)===128&&(d=(s&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[i+1],l=t[i+2],(u&192)===128&&(l&192)===128&&(d=(s&15)<<12|(u&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[i+1],l=t[i+2],f=t[i+3],(u&192)===128&&(l&192)===128&&(f&192)===128&&(d=(s&15)<<18|(u&63)<<12|(l&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return lM(n)}var rC=4096;function lM(t){let e=t.length;if(e<=rC)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=rC));return r}function fM(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function hM(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function dM(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=vM[t[s]];return i}function pM(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}z.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,z.prototype),i};function Nt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}z.prototype.readUintLE=z.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Nt(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};z.prototype.readUintBE=z.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Nt(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};z.prototype.readUint8=z.prototype.readUInt8=function(e,r){return e=e>>>0,r||Nt(e,1,this.length),this[e]};z.prototype.readUint16LE=z.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Nt(e,2,this.length),this[e]|this[e+1]<<8};z.prototype.readUint16BE=z.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Nt(e,2,this.length),this[e]<<8|this[e+1]};z.prototype.readUint32LE=z.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};z.prototype.readUint32BE=z.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};z.prototype.readBigUInt64LE=Ai(function(e){e=e>>>0,La(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cc(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});z.prototype.readBigUInt64BE=Ai(function(e){e=e>>>0,La(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cc(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});z.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Nt(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};z.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Nt(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};z.prototype.readInt8=function(e,r){return e=e>>>0,r||Nt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};z.prototype.readInt16LE=function(e,r){e=e>>>0,r||Nt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};z.prototype.readInt16BE=function(e,r){e=e>>>0,r||Nt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};z.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};z.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};z.prototype.readBigInt64LE=Ai(function(e){e=e>>>0,La(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cc(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});z.prototype.readBigInt64BE=Ai(function(e){e=e>>>0,La(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cc(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});z.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),Ra.read(this,e,!0,23,4)};z.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Nt(e,4,this.length),Ra.read(this,e,!1,23,4)};z.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Nt(e,8,this.length),Ra.read(this,e,!0,52,8)};z.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Nt(e,8,this.length),Ra.read(this,e,!1,52,8)};function tr(t,e,r,n,i,s){if(!z.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}z.prototype.writeUintLE=z.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;tr(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};z.prototype.writeUintBE=z.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;tr(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};z.prototype.writeUint8=z.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,1,255,0),this[r]=e&255,r+1};z.prototype.writeUint16LE=z.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};z.prototype.writeUint16BE=z.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};z.prototype.writeUint32LE=z.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};z.prototype.writeUint32BE=z.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function cC(t,e,r,n,i){pC(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function lC(t,e,r,n,i){pC(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}z.prototype.writeBigUInt64LE=Ai(function(e,r=0){return cC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});z.prototype.writeBigUInt64BE=Ai(function(e,r=0){return lC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});z.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);tr(this,e,r,n,u-1,-u)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};z.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);tr(this,e,r,n,u-1,-u)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};z.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};z.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};z.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};z.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};z.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||tr(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};z.prototype.writeBigInt64LE=Ai(function(e,r=0){return cC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});z.prototype.writeBigInt64BE=Ai(function(e,r=0){return lC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fC(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function hC(t,e,r,n,i){return e=+e,r=r>>>0,i||fC(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ra.write(t,e,r,n,23,4),r+4}z.prototype.writeFloatLE=function(e,r,n){return hC(this,e,r,!0,n)};z.prototype.writeFloatBE=function(e,r,n){return hC(this,e,r,!1,n)};function dC(t,e,r,n,i){return e=+e,r=r>>>0,i||fC(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ra.write(t,e,r,n,52,8),r+8}z.prototype.writeDoubleLE=function(e,r,n){return dC(this,e,r,!0,n)};z.prototype.writeDoubleBE=function(e,r,n){return dC(this,e,r,!1,n)};z.prototype.copy=function(e,r,n,i){if(!z.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};z.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!z.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=z.isBuffer(e)?e:z.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Ba={};function zm(t,e,r){Ba[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}zm("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);zm("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);zm("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=nC(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=nC(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function nC(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function gM(t,e,r){La(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Cc(e,t.length-(r+1))}function pC(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Ba.ERR_OUT_OF_RANGE("value",a,t)}gM(n,i,s)}function La(t,e){if(typeof t!="number")throw new Ba.ERR_INVALID_ARG_TYPE(e,"number",t)}function Cc(t,e,r){throw Math.floor(t)!==t?(La(t,r),new Ba.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Ba.ERR_BUFFER_OUT_OF_BOUNDS:new Ba.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var yM=/[^+/0-9A-Za-z-_]/g;function mM(t){if(t=t.split("=")[0],t=t.trim().replace(yM,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Qm(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function wM(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function EM(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function gC(t){return Hm.toByteArray(mM(t))}function Sh(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function un(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Wm(t){return t!==t}var vM=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Ai(t){return typeof BigInt>"u"?AM:t}function AM(){throw new Error("BigInt not supported")}});var mC=v((bte,yC)=>{c();yC.exports=$m;$m.supported=typeof WebAssembly<"u";function $m(t){if(!$m.supported)return null;var e=t&&t.imports,r=_M("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMK00AElgMAIABCADcDACAAQQhqQgA3AwAgAEEQakIANwMAIABBGGpCADcDACAAQSBqQgA3AwAgAEEoakIANwMAIABBMGpCADcDACAAQThqQgA3AwAgAEHAAGpCADcDACAAQcgAakIANwMAIABB0ABqQgA3AwAgAEHYAGpCADcDACAAQeAAakIANwMAIABB6ABqQgA3AwAgAEHwAGpCADcDACAAQfgAakIANwMAIABBgAFqQoiS853/zPmE6gBBACkDAIU3AwAgAEGIAWpCu86qptjQ67O7f0EIKQMAhTcDACAAQZABakKr8NP0r+68tzxBECkDAIU3AwAgAEGYAWpC8e30+KWn/aelf0EYKQMAhTcDACAAQaABakLRhZrv+s+Uh9EAQSApAwCFNwMAIABBqAFqQp/Y+dnCkdqCm39BKCkDAIU3AwAgAEGwAWpC6/qG2r+19sEfQTApAwCFNwMAIABBuAFqQvnC+JuRo7Pw2wBBOCkDAIU3AwAgAEHAAWpCADcDACAAQcgBakIANwMAIABB0AFqQgA3AwALbQEDfyAAQcABaiEDIABByAFqIQQgBCkDAKchBQJAA0AgASACRg0BIAVBgAFGBEAgAyADKQMAIAWtfDcDAEEAIQUgABADCyAAIAVqIAEtAAA6AAAgBUEBaiEFIAFBAWohAQwACwsgBCAFrTcDAAtkAQN/IABBwAFqIQEgAEHIAWohAiABIAEpAwAgAikDAHw3AwAgAEHQAWpCfzcDACACKQMApyEDAkADQCADQYABRg0BIAAgA2pBADoAACADQQFqIQMMAAsLIAIgA603AwAgABADC+U7AiB+CX8gAEGAAWohISAAQYgBaiEiIABBkAFqISMgAEGYAWohJCAAQaABaiElIABBqAFqISYgAEGwAWohJyAAQbgBaiEoICEpAwAhASAiKQMAIQIgIykDACEDICQpAwAhBCAlKQMAIQUgJikDACEGICcpAwAhByAoKQMAIQhCiJLznf/M+YTqACEJQrvOqqbY0Ouzu38hCkKr8NP0r+68tzwhC0Lx7fT4paf9p6V/IQxC0YWa7/rPlIfRACENQp/Y+dnCkdqCm38hDkLr+obav7X2wR8hD0L5wvibkaOz8NsAIRAgACkDACERIABBCGopAwAhEiAAQRBqKQMAIRMgAEEYaikDACEUIABBIGopAwAhFSAAQShqKQMAIRYgAEEwaikDACEXIABBOGopAwAhGCAAQcAAaikDACEZIABByABqKQMAIRogAEHQAGopAwAhGyAAQdgAaikDACEcIABB4ABqKQMAIR0gAEHoAGopAwAhHiAAQfAAaikDACEfIABB+ABqKQMAISAgDSAAQcABaikDAIUhDSAPIABB0AFqKQMAhSEPIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBx8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAZfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgHXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBF8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAWfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgE3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIICB8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAefHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgG3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB98fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAUfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgF3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBh8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCASfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBV8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAYfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgGnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBR8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiASfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB18fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAcfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggH3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBN8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAXfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgFnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBt8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAVfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggEXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFICB8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAZfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgGnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBF8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAWfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBN8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAVfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggG3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIICB8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAffHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBx8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAdfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggF3x8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBl8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAUfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgHnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBN8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAdfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgF3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBt8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByARfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBl8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAUfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgFXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB58fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAYfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFnx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIICB8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAffHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgEnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBp8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAdfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgFnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBJ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAgfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgH3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB58fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAVfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggG3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBF8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAYfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgF3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBR8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAafHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggE3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBl8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAcfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBx8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAYfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgH3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIB18fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByASfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggFHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBp8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAWfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHICB8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAVfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBd8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSATfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgG3x8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBd8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAgfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgH3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBp8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAcfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBF8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAZfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgHXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBN8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAefHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgGHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBJ8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAVfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgG3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBZ8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAbfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgE3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBl8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAVfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGHx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBd8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCASfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggFnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGICB8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAcfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgGnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB98fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAUfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB58fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSARfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgEXx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBJ8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiATfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgFHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBV8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAWfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggF3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBh8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAZfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgGnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBt8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAcfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB58fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAffHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgIHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB98fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAbfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBl8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAafHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgIHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIB58fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAXfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEnx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB18fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByARfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgE3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBx8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAYfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgFnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBR8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFICEgISkDACABIAmFhTcDACAiICIpAwAgAiAKhYU3AwAgIyAjKQMAIAMgC4WFNwMAICQgJCkDACAEIAyFhTcDACAlICUpAwAgBSANhYU3AwAgJiAmKQMAIAYgDoWFNwMAICcgJykDACAHIA+FhTcDACAoICgpAwAgCCAQhYU3AwAL"),n=null,i={buffer:r,memory:null,exports:null,realloc:s,onload:o};return o(function(){}),i;function s(u){i.exports.memory.grow(Math.ceil(Math.abs(u-i.memory.length)/65536)),i.memory=new Uint8Array(i.exports.memory.buffer)}function o(u){if(i.exports)return u();if(n){n.then(u.bind(null,null)).catch(u);return}try{if(t&&t.async)throw new Error("async");a({instance:new WebAssembly.Instance(new WebAssembly.Module(r),e)})}catch{n=WebAssembly.instantiate(r,e).then(a)}o(u)}function a(u){i.exports=u.instance.exports,i.memory=i.exports.memory&&i.exports.memory.buffer&&new Uint8Array(i.exports.memory.buffer)}}function _M(t){return typeof atob=="function"?new Uint8Array(atob(t).split("").map(bM)):new(Ma()).Buffer(t,"base64")}function bM(t){return t.charCodeAt(0)}});var IC=v((Tte,ln)=>{c();var cn=Vm(),Ke=mC()(),Vn=64,Ch=[];ln.exports=Er;var wC=ln.exports.BYTES_MIN=16,EC=ln.exports.BYTES_MAX=64,Ste=ln.exports.BYTES=32,vC=ln.exports.KEYBYTES_MIN=16,AC=ln.exports.KEYBYTES_MAX=64,Cte=ln.exports.KEYBYTES=32,_C=ln.exports.SALTBYTES=16,bC=ln.exports.PERSONALBYTES=16;function Er(t,e,r,n,i){if(!(this instanceof Er))return new Er(t,e,r,n,i);if(!(Ke&&Ke.exports))throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),i!==!0&&(cn(t>=wC,"digestLength must be at least "+wC+", was given "+t),cn(t<=EC,"digestLength must be at most "+EC+", was given "+t),e!=null&&cn(e.length>=vC,"key must be at least "+vC+", was given "+e.length),e!=null&&cn(e.length<=AC,"key must be at least "+AC+", was given "+e.length),r!=null&&cn(r.length===_C,"salt must be exactly "+_C+", was given "+r.length),n!=null&&cn(n.length===bC,"personal must be exactly "+bC+", was given "+n.length)),Ch.length||(Ch.push(Vn),Vn+=216),this.digestLength=t,this.finalized=!1,this.pointer=Ch.pop(),Ke.memory.fill(0,0,64),Ke.memory[0]=this.digestLength,Ke.memory[1]=e?e.length:0,Ke.memory[2]=1,Ke.memory[3]=1,r&&Ke.memory.set(r,32),n&&Ke.memory.set(n,48),this.pointer+216>Ke.memory.length&&Ke.realloc(this.pointer+216),Ke.exports.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),Ke.memory.fill(0,Vn,Vn+e.length),Ke.memory[this.pointer+200]=128)}Er.prototype.update=function(t){return cn(this.finalized===!1,"Hash instance finalized"),cn(t,"input must be TypedArray or Buffer"),Vn+t.length>Ke.memory.length&&Ke.realloc(Vn+t.length),Ke.memory.set(t,Vn),Ke.exports.blake2b_update(this.pointer,Vn,Vn+t.length),this};Er.prototype.digest=function(t){if(cn(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,Ch.push(this.pointer),Ke.exports.blake2b_final(this.pointer),!t||t==="binary")return Ke.memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(t==="hex")return SM(Ke.memory,this.pointer+128,this.digestLength);cn(t.length>=this.digestLength,"input must be TypedArray or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=Ke.memory[this.pointer+128+e];return t};Er.prototype.final=Er.prototype.digest;Er.WASM=Ke&&Ke.buffer;Er.SUPPORTED=typeof WebAssembly<"u";Er.ready=function(t){if(t||(t=IM),!Ke)return t(new Error("WebAssembly not supported"));var e=new Promise(function(r,n){Ke.onload(function(i){i?n():r(),t(i)})});return e};Er.prototype.ready=Er.ready;function IM(){}function SM(t,e,r){for(var n="",i=0;i<r;i++)n+=CM(t[e+i]);return n}function CM(t){return t<16?"0"+t.toString(16):t.toString(16)}});var MC=v((Ote,rr)=>{c();var Ii=Vm(),xc=IC();function Th(t,e,r){var n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function SC(t,e,r,n){var i=t[e]+r;r<0&&(i+=4294967296);var s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function PC(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function _i(t,e,r,n,i,s){var o=Tc[i],a=Tc[i+1],u=Tc[s],l=Tc[s+1];Th(Ie,t,e),SC(Ie,t,o,a);var f=Ie[n]^Ie[t],d=Ie[n+1]^Ie[t+1];Ie[n]=d,Ie[n+1]=f,Th(Ie,r,n),f=Ie[e]^Ie[r],d=Ie[e+1]^Ie[r+1],Ie[e]=f>>>24^d<<8,Ie[e+1]=d>>>24^f<<8,Th(Ie,t,e),SC(Ie,t,u,l),f=Ie[n]^Ie[t],d=Ie[n+1]^Ie[t+1],Ie[n]=f>>>16^d<<16,Ie[n+1]=d>>>16^f<<16,Th(Ie,r,n),f=Ie[e]^Ie[r],d=Ie[e+1]^Ie[r+1],Ie[e]=d>>>31^f<<1,Ie[e+1]=f>>>31^d<<1}var BC=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),TM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Gt=new Uint8Array(TM.map(function(t){return t*2})),Ie=new Uint32Array(32),Tc=new Uint32Array(32);function RC(t,e){var r=0;for(r=0;r<16;r++)Ie[r]=t.h[r],Ie[r+16]=BC[r];for(Ie[24]=Ie[24]^t.t,Ie[25]=Ie[25]^t.t/4294967296,e&&(Ie[28]=~Ie[28],Ie[29]=~Ie[29]),r=0;r<32;r++)Tc[r]=PC(t.b,4*r);for(r=0;r<12;r++)_i(0,8,16,24,Gt[r*16+0],Gt[r*16+1]),_i(2,10,18,26,Gt[r*16+2],Gt[r*16+3]),_i(4,12,20,28,Gt[r*16+4],Gt[r*16+5]),_i(6,14,22,30,Gt[r*16+6],Gt[r*16+7]),_i(0,10,20,30,Gt[r*16+8],Gt[r*16+9]),_i(2,12,22,24,Gt[r*16+10],Gt[r*16+11]),_i(4,14,16,26,Gt[r*16+12],Gt[r*16+13]),_i(6,8,18,28,Gt[r*16+14],Gt[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Ie[r]^Ie[r+16]}var bi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Ua(t,e,r,n){bi.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,bi[0]=t,e&&(bi[1]=e.length),bi[2]=1,bi[3]=1,r&&bi.set(r,32),n&&bi.set(n,48);for(var i=0;i<16;i++)this.h[i]=BC[i]^PC(bi,i*4);e&&(LC(this,e),this.c=128)}Ua.prototype.update=function(t){return Ii(t!=null,"input must be Uint8Array or Buffer"),LC(this,t),this};Ua.prototype.digest=function(t){var e=!t||t==="binary"||t==="hex"?new Uint8Array(this.outlen):t;return Ii(e.length>=this.outlen,"out must have at least outlen bytes of space"),xM(this,e),t==="hex"?NM(e):e};Ua.prototype.final=Ua.prototype.digest;Ua.ready=function(t){xc.ready(function(){t()})};function LC(t,e){for(var r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,RC(t,!1),t.c=0),t.b[t.c++]=e[r]}function xM(t,e){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;RC(t,!0);for(var r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function NM(t){for(var e="",r=0;r<t.length;r++)e+=DM(t[r]);return e}function DM(t){return t<16?"0"+t.toString(16):t.toString(16)}var FC=Ua;rr.exports=function(e,r,n,i,s){return s!==!0&&(Ii(e>=CC,"outlen must be at least "+CC+", was given "+e),Ii(e<=TC,"outlen must be at most "+TC+", was given "+e),r!=null&&Ii(r.length>=xC,"key must be at least "+xC+", was given "+r.length),r!=null&&Ii(r.length<=NC,"key must be at most "+NC+", was given "+r.length),n!=null&&Ii(n.length===DC,"salt must be exactly "+DC+", was given "+n.length),i!=null&&Ii(i.length===OC,"personal must be exactly "+OC+", was given "+i.length)),new FC(e,r,n,i)};rr.exports.ready=function(t){xc.ready(function(){t()})};rr.exports.WASM_SUPPORTED=xc.SUPPORTED;rr.exports.WASM_LOADED=!1;var CC=rr.exports.BYTES_MIN=16,TC=rr.exports.BYTES_MAX=64,Nte=rr.exports.BYTES=32,xC=rr.exports.KEYBYTES_MIN=16,NC=rr.exports.KEYBYTES_MAX=64,Dte=rr.exports.KEYBYTES=32,DC=rr.exports.SALTBYTES=16,OC=rr.exports.PERSONALBYTES=16;xc.ready(function(t){t||(rr.exports.WASM_LOADED=!0,FC=xc)})});var Oc=v(vr=>{"use strict";c();var OM=vr&&vr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PM=vr&&vr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BM=vr&&vr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OM(e,t,r);return PM(e,t),e};Object.defineProperty(vr,"__esModule",{value:!0});vr.TransactionHash=vr.Transaction=void 0;var qa=Wt(),Nc=Zt(),RM=mh(),LM=Ro(),FM=BM(He()),MM=kI(),Hn=zI(),UM=$S(),UC=XS(),qC=Sc(),qM=fr(),VM=MC(),HM=32,Dc=class{constructor({nonce:e,value:r,receiver:n,sender:i,gasPrice:s,gasLimit:o,data:a,chainID:u,version:l,options:f,guardian:d}){this.nonce=e||0,this.value=r?new qa.BigNumber(r.toString()).toFixed(0):0,this.sender=i,this.receiver=n,this.gasPrice=s||LM.TRANSACTION_MIN_GAS_PRICE,this.gasLimit=o,this.data=a||new qC.TransactionPayload,this.chainID=u,this.version=l?new Hn.TransactionVersion(l.valueOf()):Hn.TransactionVersion.withDefaultVersion(),this.options=f?new Hn.TransactionOptions(f.valueOf()):Hn.TransactionOptions.withDefaultOptions(),this.guardian=d||Nc.Address.empty(),this.signature=h.Buffer.from([]),this.guardianSignature=h.Buffer.from([]),this.hash=Si.empty()}getNonce(){return this.nonce}setNonce(e){this.nonce=e}getValue(){return this.value}setValue(e){this.value=e}getSender(){return this.sender}setSender(e){this.sender=e}getReceiver(){return this.receiver}getGuardian(){return this.guardian}getGasPrice(){return this.gasPrice}setGasPrice(e){this.gasPrice=e}getGasLimit(){return this.gasLimit}setGasLimit(e){this.gasLimit=e}getData(){return this.data}getChainID(){return this.chainID}setChainID(e){this.chainID=e}getVersion(){return this.version}setVersion(e){this.version=new Hn.TransactionVersion(e.valueOf())}getOptions(){return new Hn.TransactionOptions(this.options.valueOf())}setOptions(e){this.options=new Hn.TransactionOptions(e.valueOf())}getSignature(){return this.signature}getGuardianSignature(){return this.guardianSignature}setGuardian(e){this.guardian=e}getHash(){return qM.guardNotEmpty(this.hash,"hash"),this.hash}serializeForSigning(){let e=this.toPlainObject();e.signature&&delete e.signature,e.guardianSignature&&delete e.guardianSignature,e.guardian||delete e.guardian;let r=JSON.stringify(e);return h.Buffer.from(r)}isGuardedTransaction(){let e=this.guardian.bech32().length>0,r=this.guardianSignature.length>0;return this.getOptions().isWithGuardian()&&e&&r}toPlainObject(){var e;let r={nonce:this.nonce.valueOf(),value:this.value.toString(),receiver:this.receiver.bech32(),sender:this.sender.bech32(),gasPrice:this.gasPrice.valueOf(),gasLimit:this.gasLimit.valueOf(),data:this.data.length()==0?void 0:this.data.encoded(),chainID:this.chainID.valueOf(),version:this.version.valueOf(),options:this.options.valueOf()==0?void 0:this.options.valueOf(),guardian:!((e=this.guardian)===null||e===void 0)&&e.bech32()?this.guardian.bech32()==""?void 0:this.guardian.bech32():void 0,signature:this.signature.toString("hex")?this.signature.toString("hex"):void 0,guardianSignature:this.guardianSignature.toString("hex")?this.guardianSignature.toString("hex"):void 0};return RM.Compatibility.guardAddressIsSetAndNonZero(new Nc.Address(r.sender),"'sender' of transaction","pass the actual sender to the Transaction constructor"),r}static fromPlainObject(e){let r=new Dc({nonce:Number(e.nonce),value:new qa.BigNumber(e.value).toFixed(0),receiver:Nc.Address.fromString(e.receiver),sender:Nc.Address.fromString(e.sender),guardian:e.guardian==null?void 0:Nc.Address.fromString(e.guardian||""),gasPrice:Number(e.gasPrice),gasLimit:Number(e.gasLimit),data:new qC.TransactionPayload(h.Buffer.from(e.data||"","base64")),chainID:String(e.chainID),version:new Hn.TransactionVersion(e.version),options:e.options==null?void 0:new Hn.TransactionOptions(e.options)});return e.signature&&r.applySignature(new UC.Signature(e.signature)),e.guardianSignature&&r.applyGuardianSignature(new UC.Signature(e.guardianSignature)),r}applySignature(e){e instanceof h.Buffer?this.signature=e:this.signature=h.Buffer.from(e.hex(),"hex"),this.hash=Si.compute(this)}applyGuardianSignature(e){e instanceof h.Buffer?this.guardianSignature=e:this.guardianSignature=h.Buffer.from(e.hex(),"hex"),this.hash=Si.compute(this)}toSendable(){return this.toPlainObject()}computeFee(e){let r=e.MinGasLimit.valueOf()+this.data.length()*e.GasPerDataByte.valueOf();if(r>this.gasLimit.valueOf())throw new FM.ErrNotEnoughGas(this.gasLimit.valueOf());let n=new qa.BigNumber(this.gasPrice.valueOf()),i=new qa.BigNumber(r).multipliedBy(n);if(r===this.gasLimit.valueOf())return i;let s=new qa.BigNumber(this.gasLimit.valueOf()-r),o=n.multipliedBy(new qa.BigNumber(e.GasPriceModifier.valueOf())),a=s.multipliedBy(o);return i.plus(a)}};vr.Transaction=Dc;var Si=class extends MM.Hash{constructor(e){super(e)}static compute(e){let n=new UM.ProtoSerializer().serializeTransaction(e),i=VM(HM).update(n).digest("hex");return new Si(i)}};vr.TransactionHash=Si});var VC=v(Nh=>{"use strict";c();Object.defineProperty(Nh,"__esModule",{value:!0});Nh.TransferTransactionsFactory=void 0;var Ym=ph(),Lr=bt(),xh=Oc(),Jm=Sc(),Xm=class{constructor(e){this.gasEstimator=e}createEGLDTransfer(e){var r;let n=((r=e.data)===null||r===void 0?void 0:r.length())||0,i=this.gasEstimator.forEGLDTransfer(n);return new xh.Transaction({nonce:e.nonce,value:e.value,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||i,data:e.data,chainID:e.chainID})}createESDTTransfer(e){let{argumentsString:r}=new Ym.ArgSerializer().valuesToString([Lr.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new Lr.BigUIntValue(e.tokenTransfer.valueOf())]),n=`ESDTTransfer@${r}`,i=new Jm.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTTransfer(s);return new xh.Transaction({nonce:e.nonce,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createESDTNFTTransfer(e){let{argumentsString:r}=new Ym.ArgSerializer().valuesToString([Lr.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new Lr.U64Value(e.tokenTransfer.nonce),new Lr.BigUIntValue(e.tokenTransfer.valueOf()),new Lr.AddressValue(e.destination)]),n=`ESDTNFTTransfer@${r}`,i=new Jm.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTNFTTransfer(s);return new xh.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createMultiESDTNFTTransfer(e){let r=[new Lr.AddressValue(e.destination),new Lr.U16Value(e.tokenTransfers.length)];for(let u of e.tokenTransfers)r.push(Lr.BytesValue.fromUTF8(u.tokenIdentifier),new Lr.U64Value(u.nonce),new Lr.BigUIntValue(u.valueOf()));let{argumentsString:n}=new Ym.ArgSerializer().valuesToString(r),i=`MultiESDTNFTTransfer@${n}`,s=new Jm.TransactionPayload(i),o=s.length()||0,a=this.gasEstimator.forMultiESDTNFTTransfer(o,e.tokenTransfers.length);return new xh.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||a,data:s,chainID:e.chainID})}};Nh.TransferTransactionsFactory=Xm});var jC=v(Qs=>{"use strict";c();Object.defineProperty(Qs,"__esModule",{value:!0});Qs.GasEstimator=Qs.DefaultGasConfiguration=void 0;Qs.DefaultGasConfiguration={minGasLimit:5e4,gasPerDataByte:1500,gasCostESDTTransfer:2e5,gasCostESDTNFTTransfer:2e5,gasCostESDTNFTMultiTransfer:2e5};var jM=1e5,HC=8e5,Zm=class{constructor(e){this.gasConfiguration=e||Qs.DefaultGasConfiguration}forEGLDTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasPerDataByte*e}forESDTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTTransfer+this.gasConfiguration.gasPerDataByte*e+jM}forESDTNFTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTNFTTransfer+this.gasConfiguration.gasPerDataByte*e+HC}forMultiESDTNFTTransfer(e,r){return this.gasConfiguration.minGasLimit+(this.gasConfiguration.gasCostESDTNFTMultiTransfer+HC)*r+this.gasConfiguration.gasPerDataByte*e}};Qs.GasEstimator=Zm});var Oh=v(Dh=>{"use strict";c();Object.defineProperty(Dh,"__esModule",{value:!0});Dh.Account=void 0;var GM=Zt(),ew=class{constructor(e){this.address=new GM.Address,this.nonce=0,this.balance="0",this.address=e}update(e){this.nonce=e.nonce,this.balance=e.balance}incrementNonce(){this.nonce=this.nonce.valueOf()+1}getNonceThenIncrement(){let e=this.nonce;return this.nonce=this.nonce.valueOf()+1,e}toJSON(){return{address:this.address.bech32(),nonce:this.nonce.valueOf(),balance:this.balance.toString()}}};Dh.Account=ew});var tw=v(Ks=>{"use strict";c();Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Logger=Ks.LogLevel=void 0;var ks;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.None=5]="None"})(ks=Ks.LogLevel||(Ks.LogLevel={}));var Fr=class{static setLevel(e){Fr.logLevel=e}static trace(e,...r){Fr.logLevel>=ks.Debug||console.debug(e,r)}static debug(e,...r){Fr.logLevel>=ks.Debug||console.debug(e,r)}static info(e,...r){Fr.logLevel>=ks.Info||console.log(e,r)}static warn(e,...r){Fr.logLevel>=ks.Warn||console.warn(e,r)}static error(e,...r){Fr.logLevel>=ks.Error||console.error(e,r)}};Ks.Logger=Fr;Fr.logLevel=ks.Debug});var GC=v(fn=>{"use strict";c();var QM=fn&&fn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kM=fn&&fn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KM=fn&&fn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QM(e,t,r);return kM(e,t),e};Object.defineProperty(fn,"__esModule",{value:!0});fn.AsyncTimer=void 0;var zM=KM(He()),WM=He(),rw=tw(),nw=class{constructor(e){this.timeoutHandle=null,this.rejectionFunc=null,this.name=e,this.correlationTag=0}start(e){if(this.timeoutHandle)throw new zM.ErrAsyncTimerAlreadyRunning;return this.correlationTag++,rw.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].start()`),new Promise((r,n)=>{this.rejectionFunc=n;let i=()=>{this.rejectionFunc=null,this.stop(),r()};this.timeoutHandle=setTimeout(i,e)})}abort(){rw.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].abort()`),this.rejectionFunc&&(this.rejectionFunc(new WM.ErrAsyncTimerAborted),this.rejectionFunc=null),this.stop()}stop(){this.isStopped()||(rw.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].stop()`),this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null))}isStopped(){return!this.timeoutHandle}};fn.AsyncTimer=nw});var ow=v(Ha=>{"use strict";c();var Ar=Ha&&Ha.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.TransactionWatcher=void 0;var iw=GC(),Va=He(),QC=tw(),_r=class{constructor(e,r={}){this.fetcher=new sw(e),this.pollingIntervalMilliseconds=r.pollingIntervalMilliseconds||_r.DefaultPollingInterval,this.timeoutMilliseconds=r.timeoutMilliseconds||_r.DefaultTimeout,this.patienceMilliseconds=r.patienceMilliseconds||_r.DefaultPatience}awaitPending(e){return Ar(this,void 0,void 0,function*(){let r=s=>s.status.isPending(),n=()=>Ar(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Va.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitCompleted(e){return Ar(this,void 0,void 0,function*(){let r=s=>s.isCompleted,n=()=>Ar(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Va.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitAllEvents(e,r){return Ar(this,void 0,void 0,function*(){let n=o=>{let a=this.getAllTransactionEvents(o).map(l=>l.identifier);return r.every(l=>a.includes(l))},i=()=>Ar(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),s=()=>new Va.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)})}awaitAnyEvent(e,r){return Ar(this,void 0,void 0,function*(){let n=o=>{let a=this.getAllTransactionEvents(o).map(l=>l.identifier);return r.find(l=>a.includes(l))!=null},i=()=>Ar(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),s=()=>new Va.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)})}awaitOnCondition(e,r){return Ar(this,void 0,void 0,function*(){let n=()=>Ar(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Va.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitConditionally(e,r,n){return Ar(this,void 0,void 0,function*(){let i=new iw.AsyncTimer("watcher:periodic"),s=new iw.AsyncTimer("watcher:patience"),o=new iw.AsyncTimer("watcher:timeout"),a=!1,u,l=!1;for(o.start(this.timeoutMilliseconds).finally(()=>{o.stop(),a=!0});!a;){yield i.start(this.pollingIntervalMilliseconds);try{if(u=yield r(),l=e(u),l||a)break}catch(f){if(QC.Logger.debug("TransactionWatcher.awaitConditionally(): cannot (yet) fetch data."),!(f instanceof Va.Err))throw f}}if(l&&(yield s.start(this.patienceMilliseconds)),o.isStopped()||o.stop(),!u||!l)throw n();return u})}getAllTransactionEvents(e){let r=[...e.logs.events];for(let n of e.contractResults.items)r.push(...n.logs.events);return r}};Ha.TransactionWatcher=_r;_r.DefaultPollingInterval=6e3;_r.DefaultTimeout=_r.DefaultPollingInterval*15;_r.DefaultPatience=0;_r.NoopOnStatusReceived=t=>{};var sw=class{constructor(e){this.fetcher=e}getTransaction(e){return Ar(this,void 0,void 0,function*(){return QC.Logger.debug(`transactionWatcher, getTransaction(${e})`),yield this.fetcher.getTransaction(e)})}}});var kC=v(Rh=>{"use strict";c();Object.defineProperty(Rh,"__esModule",{value:!0});Rh.CodeMetadata=void 0;var aw=class{constructor(e=!0,r=!1,n=!1,i=!1){this.upgradeable=e,this.readable=r,this.payable=n,this.payableBySc=i}toggleUpgradeable(e){this.upgradeable=e}toggleReadable(e){this.readable=e}togglePayable(e){this.payable=e}togglePayableBySc(e){this.payableBySc=e}toBuffer(){let e=0,r=0;return this.upgradeable&&(e|=Ph.Upgradeable),this.readable&&(e|=Ph.Readable),this.payable&&(r|=Bh.Payable),this.payableBySc&&(r|=Bh.PayableBySc),h.Buffer.from([e,r])}toString(){return this.toBuffer().toString("hex")}toJSON(){return{upgradeable:this.upgradeable,readable:this.readable,payable:this.payable,payableBySc:this.payableBySc}}equals(e){return this.upgradeable==e.upgradeable&&this.readable==e.readable&&this.payable==e.payable&&this.payableBySc==e.payableBySc}};Rh.CodeMetadata=aw;var Ph;(function(t){t[t.Upgradeable=1]="Upgradeable",t[t.Reserved2=2]="Reserved2",t[t.Readable=4]="Readable"})(Ph||(Ph={}));var Bh;(function(t){t[t.Reserved1=1]="Reserved1",t[t.Payable=2]="Payable",t[t.PayableBySc=4]="PayableBySc"})(Bh||(Bh={}))});var Lh=v(hn=>{"use strict";c();var $M=hn&&hn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),YM=hn&&hn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JM=hn&&hn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$M(e,t,r);return YM(e,t),e};Object.defineProperty(hn,"__esModule",{value:!0});hn.ContractFunction=void 0;var XM=JM(He()),Pc=class{constructor(e){if(this.name=e,e==null)throw new XM.ErrInvalidFunctionName}static none(){return new Pc("untitled")}toString(){return this.name}valueOf(){return this.name}};hn.ContractFunction=Pc});var KC=v(br=>{"use strict";c();var ZM=br&&br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eU=br&&br.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tU=br&&br.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZM(e,t,r);return eU(e,t),e},rU=br&&br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(br,"__esModule",{value:!0});br.InteractionChecker=void 0;var uw=tU(He()),nU=rU(Wt()),cw=class{checkInteraction(e,r){this.checkPayable(e,r),this.checkArguments(e,r)}checkPayable(e,r){let n=!new nU.default(e.getValue().toString()).isZero(),i=r.modifiers.isPayableInEGLD();if(n&&!i)throw new uw.ErrContractInteraction("cannot send EGLD value to non-payable")}checkArguments(e,r){let n=r.input,i=e.getArguments(),s=n.length,o=i.length;if(s!=o)throw new uw.ErrContractInteraction(`bad arguments, expected: ${s}, got: ${o}`);for(let a=0;a<s;a++){let u=n[a].type,f=i[a].getType();if(!u.isAssignableFrom(f))throw new uw.ErrContractInteraction(`type mismatch at index ${a}, expected: ${u}, got: ${f}`)}}};br.InteractionChecker=cw});var Mh=v(Fh=>{"use strict";c();Object.defineProperty(Fh,"__esModule",{value:!0});Fh.Query=void 0;var iU=Zt(),sU=ph(),lw=class{constructor(e){this.caller=e.caller||new iU.Address,this.address=e.address,this.func=e.func,this.args=e.args||[],this.value=e.value||0}getEncodedArguments(){return new sU.ArgSerializer().valuesToStrings(this.args)}};Fh.Query=lw});var WC=v(Uh=>{"use strict";c();Object.defineProperty(Uh,"__esModule",{value:!0});Uh.Interaction=void 0;var zC=Zt(),oU=mh(),fw=Ro(),hw=Lh(),aU=KC(),uU=Mh(),ja=bt(),dw=class{constructor(e,r,n){this.nonce=0,this.value="0",this.gasLimit=0,this.gasPrice=void 0,this.chainID="",this.querent=new zC.Address,this.sender=new zC.Address,this.isWithSingleESDTTransfer=!1,this.isWithSingleESDTNFTTransfer=!1,this.isWithMultiESDTNFTTransfer=!1,this.contract=e,this.function=r,this.args=n,this.tokenTransfers=new Ga([],this)}getContractAddress(){return this.contract.getAddress()}getFunction(){return this.function}getEndpoint(){return this.contract.getEndpoint(this.function)}getArguments(){return this.args}getValue(){return this.value}getTokenTransfers(){return this.tokenTransfers.getTransfers()}getGasLimit(){return this.gasLimit}getExplicitReceiver(){return this.explicitReceiver}buildTransaction(){oU.Compatibility.guardAddressIsSetAndNonZero(this.sender,"'sender' of interaction","use interaction.withSender()");let e=this.explicitReceiver||this.contract.getAddress(),r=this.function,n=this.args;this.isWithSingleESDTTransfer?(r=new hw.ContractFunction(fw.ESDT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForSingleESDTTransfer()):this.isWithSingleESDTNFTTransfer?(e=this.sender,r=new hw.ContractFunction(fw.ESDTNFT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForSingleESDTNFTTransfer()):this.isWithMultiESDTNFTTransfer&&(e=this.sender,r=new hw.ContractFunction(fw.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForMultiESDTNFTTransfer());let i=this.contract.call({func:r,gasLimit:this.gasLimit,gasPrice:this.gasPrice,args:n,value:this.value,receiver:e,chainID:this.chainID,caller:this.sender});return i.setNonce(this.nonce),i}buildQuery(){return new uU.Query({address:this.contract.getAddress(),func:this.function,args:this.args,value:this.value,caller:this.querent})}withValue(e){return this.value=e,this}withSingleESDTTransfer(e){return this.isWithSingleESDTTransfer=!0,this.tokenTransfers=new Ga([e],this),this}withSingleESDTNFTTransfer(e,r){return this.isWithSingleESDTNFTTransfer=!0,this.tokenTransfers=new Ga([e],this),r&&(this.sender=r),this}withMultiESDTNFTTransfer(e,r){return this.isWithMultiESDTNFTTransfer=!0,this.tokenTransfers=new Ga(e,this),r&&(this.sender=r),this}withGasLimit(e){return this.gasLimit=e,this}withGasPrice(e){return this.gasPrice=e,this}withNonce(e){return this.nonce=e,this}useThenIncrementNonceOf(e){return this.withNonce(e.getNonceThenIncrement())}withChainID(e){return this.chainID=e,this}withSender(e){return this.sender=e,this}withQuerent(e){return this.querent=e,this}withExplicitReceiver(e){return this.explicitReceiver=e,this}check(){return new aU.InteractionChecker().checkInteraction(this,this.getEndpoint()),this}};Uh.Interaction=dw;var Ga=class{constructor(e,r){this.transfers=e,this.interaction=r}getTransfers(){return this.transfers}buildArgsForSingleESDTTransfer(){let e=this.transfers[0];return[this.getTypedTokenIdentifier(e),this.getTypedTokenQuantity(e),this.getTypedInteractionFunction(),...this.getInteractionArguments()]}buildArgsForSingleESDTNFTTransfer(){let e=this.transfers[0];return[this.getTypedTokenIdentifier(e),this.getTypedTokenNonce(e),this.getTypedTokenQuantity(e),this.getTypedTokensReceiver(),this.getTypedInteractionFunction(),...this.getInteractionArguments()]}buildArgsForMultiESDTNFTTransfer(){let e=[];e.push(this.getTypedTokensReceiver()),e.push(this.getTypedNumberOfTransfers());for(let r of this.transfers)e.push(this.getTypedTokenIdentifier(r)),e.push(this.getTypedTokenNonce(r)),e.push(this.getTypedTokenQuantity(r));return e.push(this.getTypedInteractionFunction()),e.push(...this.getInteractionArguments()),e}getTypedNumberOfTransfers(){return new ja.U8Value(this.transfers.length)}getTypedTokenIdentifier(e){return ja.BytesValue.fromUTF8(e.tokenIdentifier)}getTypedTokenNonce(e){return new ja.U64Value(e.nonce)}getTypedTokenQuantity(e){return new ja.BigUIntValue(e.amountAsBigInteger)}getTypedTokensReceiver(){return new ja.AddressValue(this.interaction.getContractAddress())}getTypedInteractionFunction(){return ja.BytesValue.fromUTF8(this.interaction.getFunction().valueOf())}getInteractionArguments(){return this.interaction.getArguments()}}});var $C=v(qh=>{"use strict";c();Object.defineProperty(qh,"__esModule",{value:!0});qh.ArgumentErrorContext=void 0;var cU=He(),pw=class{constructor(e,r,n){this.endpointName=e,this.argumentIndex=r,this.parameterDefinition=n}throwError(e){throw new cU.ErrInvalidArgument(`Error when converting arguments for endpoint (endpoint name: ${this.endpointName}, argument index: ${this.argumentIndex}, name: ${this.parameterDefinition.name}, type: ${this.parameterDefinition.type})
Nested error: ${e}`)}convertError(e,r){this.throwError(`Can't convert argument (argument: ${e}, type ${typeof e}), wanted type: ${r})`)}unhandledType(e,r){this.throwError(`Unhandled type (function: ${e}, type: ${r})`)}guardSameLength(e,r){e=e||[],e.length!=r.length&&this.throwError(`Incorrect composite type length: have ${e.length}, expected ${r.length} (argument: ${e})`)}guardHasField(e,r){e=e||{},r in e||this.throwError(`Struct argument does not contain a field named "${r}" (argument: ${JSON.stringify(e)})`)}};qh.ArgumentErrorContext=pw});var JC=v(zs=>{"use strict";c();var lU=zs&&zs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zs,"__esModule",{value:!0});zs.NativeSerializer=void 0;var fU=lU(Wt()),be=bt(),hU=$C(),Vh=bt(),dU=Zt(),YC=He(),pU=tm(),gU;(function(t){function e(T,b){T=T||[],r(T),T=n(T,b);let x=b.input,P=[];for(let B=0;B<x.length;B++){let _=x[B],S=new hU.ArgumentErrorContext(b.name,B,_),F=s(T[B],_.type,S);P.push(F)}return P}t.nativeToTypedValues=e;function r(T){for(let b=0;b<T.length;b++){let x=T[b];if(x&&x.belongsToTypesystem)throw new YC.ErrTypeInferenceSystemRequiresRegularJavascriptObjects(b)}}function n(T,b){let x=b.input,{min:P,max:B,variadic:_}=i(x);if(!(P<=T.length&&T.length<=B))throw new YC.ErrInvalidArgument(`Wrong number of arguments for endpoint ${b.name}: expected between ${P} and ${B} arguments, have ${T.length}`);if(_){let S=x.length-1,F=T.slice(S);T[S]=F}return T}function i(T){let b=[...T].reverse(),x=T.length,P=T.length,B=!1;b.length>0&&b[0].type.getCardinality().isComposite()&&(P=1/0,B=!0);for(let _ of b){if(_.type.getCardinality().isSingular())break;x-=1}return{min:x,max:P,variadic:B}}function s(T,b,x){if(b instanceof be.OptionType)return o(T,b,x);if(b instanceof be.OptionalType)return a(T,b,x);if(b instanceof be.VariadicType)return u(T,b,x);if(b instanceof be.CompositeType)return f(T,b,x);if(b instanceof be.TupleType)return d(T,b,x);if(b instanceof Vh.StructType)return y(T,b,x);if(b instanceof be.ListType)return l(T,b,x);if(b instanceof be.PrimitiveType)return w(T,b,x);x.throwError(`convertToTypedValue: unhandled type ${b}`)}function o(T,b,x){if(T==null)return be.OptionValue.newMissing();let P=s(T,b.getFirstTypeParameter(),x);return be.OptionValue.newProvided(P)}function a(T,b,x){if(T==null)return new be.OptionalValue(b);let P=s(T,b.getFirstTypeParameter(),x);return new be.OptionalValue(b,P)}function u(T,b,x){T==null&&(T=[]),T.map===void 0&&x.convertError(T,"Variadic");let P=T.map(function(B){return s(B,b.getFirstTypeParameter(),x)});return new be.VariadicValue(b,P)}function l(T,b,x){T.map===void 0&&x.convertError(T,"List");let P=T.map(function(B){return s(B,b.getFirstTypeParameter(),x)});return new be.List(b,P)}function f(T,b,x){let P=[],B=b.getTypeParameters();x.guardSameLength(T,B);for(let _=0;_<B.length;_++)P.push(s(T[_],B[_],x));return new be.CompositeValue(b,P)}function d(T,b,x){let P=[],B=b.getFieldsDefinitions();x.guardSameLength(T,B);for(let _=0;_<B.length;_++)P.push(s(T[_],B[_].type,x));return Vh.Tuple.fromItems(P)}function y(T,b,x){let P=[],B=b.getFieldsDefinitions();for(let _=0;_<B.length;_++){let S=B[_].name;x.guardHasField(T,S);let F=T[S],Z=s(F,B[_].type,x);P.push(new Vh.Field(Z,S))}return new Vh.Struct(b,P)}function w(T,b,x){if(b instanceof be.NumericalType){let P=new fU.default(T);return U(P,b,x)}if(b instanceof be.BytesType)return E(T,x);if(b instanceof be.AddressType)return new be.AddressValue(L(T,x));if(b instanceof be.BooleanType)return new be.BooleanValue(T);if(b instanceof be.TokenIdentifierType)return new be.TokenIdentifierValue(O(T,x));x.throwError(`(function: toPrimitive) unsupported type ${b}`)}function E(T,b){let x=T.valueOf();if(T===void 0&&b.convertError(T,"BytesValue"),T instanceof h.Buffer)return new be.BytesValue(T);if(typeof T=="string")return be.BytesValue.fromUTF8(T);if(x instanceof h.Buffer)return new be.BytesValue(x);if(typeof x=="number")return be.BytesValue.fromHex(pU.numberToPaddedHex(x));b.convertError(T,"BytesValue")}function O(T,b){if(T===void 0&&b.convertError(T,"Buffer"),T instanceof h.Buffer)return T.toString();if(typeof T=="string")return T;b.convertError(T,"Buffer")}function L(T,b){if(T.bech32)return T;if(T.getAddress)return T.getAddress();switch(T.constructor){case h.Buffer:case String:return new dU.Address(T);default:b.convertError(T,"Address")}}t.convertNativeToAddress=L;function U(T,b,x){switch(b.constructor){case be.U8Type:return new be.U8Value(T);case be.I8Type:return new be.I8Value(T);case be.U16Type:return new be.U16Value(T);case be.I16Type:return new be.I16Value(T);case be.U32Type:return new be.U32Value(T);case be.I32Type:return new be.I32Value(T);case be.U64Type:return new be.U64Value(T);case be.I64Type:return new be.I64Value(T);case be.BigUIntType:return new be.BigUIntValue(T);case be.BigIntType:return new be.BigIntValue(T);default:x.unhandledType("convertNumericalType",b)}}})(gU=zs.NativeSerializer||(zs.NativeSerializer={}))});var XC=v(Mr=>{"use strict";c();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ContractCallPayloadBuilder=Mr.ContractUpgradePayloadBuilder=Mr.ContractDeployPayloadBuilder=Mr.ArwenVirtualMachine=void 0;var ww=Sc(),Ew=fr(),yU=ph();Mr.ArwenVirtualMachine="0500";var gw=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){Ew.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`${e}@${Mr.ArwenVirtualMachine}@${r}`;return n=vw(n,this.arguments),new ww.TransactionPayload(n)}};Mr.ContractDeployPayloadBuilder=gw;var yw=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){Ew.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`upgradeContract@${e}@${r}`;return n=vw(n,this.arguments),new ww.TransactionPayload(n)}};Mr.ContractUpgradePayloadBuilder=yw;var mw=class{constructor(){this.contractFunction=null,this.arguments=[]}setFunction(e){return this.contractFunction=e,this}addArg(e){return this.arguments.push(e),this}setArgs(e){return this.arguments=e,this}build(){Ew.guardValueIsSet("calledFunction",this.contractFunction);let e=this.contractFunction.name;return e=vw(e,this.arguments),new ww.TransactionPayload(e)}};Mr.ContractCallPayloadBuilder=mw;function vw(t,e){let{argumentsString:r,count:n}=new yU.ArgSerializer().valuesToString(e);return n==0?t:`${t}@${r}`}});var jn=v((cre,Aw)=>{"use strict";c();var Qa=typeof Reflect=="object"?Reflect:null,ZC=Qa&&typeof Qa.apply=="function"?Qa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Hh;Qa&&typeof Qa.ownKeys=="function"?Hh=Qa.ownKeys:Object.getOwnPropertySymbols?Hh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hh=function(e){return Object.getOwnPropertyNames(e)};function mU(t){console&&console.warn&&console.warn(t)}var tT=Number.isNaN||function(e){return e!==e};function je(){je.init.call(this)}Aw.exports=je;Aw.exports.once=AU;je.EventEmitter=je;je.prototype._events=void 0;je.prototype._eventsCount=0;je.prototype._maxListeners=void 0;var eT=10;function jh(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(je,"defaultMaxListeners",{enumerable:!0,get:function(){return eT},set:function(t){if(typeof t!="number"||t<0||tT(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");eT=t}});je.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};je.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tT(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rT(t){return t._maxListeners===void 0?je.defaultMaxListeners:t._maxListeners}je.prototype.getMaxListeners=function(){return rT(this)};je.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")ZC(u,this,r);else for(var l=u.length,f=aT(u,l),n=0;n<l;++n)ZC(f[n],this,r);return!0};function nT(t,e,r,n){var i,s,o;if(jh(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=rT(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,mU(a)}return t}je.prototype.addListener=function(e,r){return nT(this,e,r,!1)};je.prototype.on=je.prototype.addListener;je.prototype.prependListener=function(e,r){return nT(this,e,r,!0)};function wU(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function iT(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=wU.bind(n);return i.listener=r,n.wrapFn=i,i}je.prototype.once=function(e,r){return jh(r),this.on(e,iT(this,e,r)),this};je.prototype.prependOnceListener=function(e,r){return jh(r),this.prependListener(e,iT(this,e,r)),this};je.prototype.removeListener=function(e,r){var n,i,s,o,a;if(jh(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():EU(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};je.prototype.off=je.prototype.removeListener;je.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function sT(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?vU(i):aT(i,i.length)}je.prototype.listeners=function(e){return sT(this,e,!0)};je.prototype.rawListeners=function(e){return sT(this,e,!1)};je.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):oT.call(t,e)};je.prototype.listenerCount=oT;function oT(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}je.prototype.eventNames=function(){return this._eventsCount>0?Hh(this._events):[]};function aT(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function EU(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function vU(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function AU(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}uT(t,e,s,{once:!0}),e!=="error"&&_U(t,i,{once:!0})})}function _U(t,e,r){typeof t.on=="function"&&uT(t,"error",e,r)}function uT(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var _w=v((fre,cT)=>{c();cT.exports=jn().EventEmitter});var bw=v(()=>{c()});var gT=v((yre,pT)=>{"use strict";c();function lT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lT(Object(r),!0).forEach(function(n){bU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bU(t,e,r){return e=dT(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dT(n.key),n)}}function SU(t,e,r){return e&&hT(t.prototype,e),r&&hT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dT(t){var e=CU(t,"string");return typeof e=="symbol"?e:String(e)}function CU(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TU=Ma(),Gh=TU.Buffer,xU=bw(),Iw=xU.inspect,NU=Iw&&Iw.custom||"inspect";function DU(t,e,r){Gh.prototype.copy.call(t,e,r)}pT.exports=function(){function t(){IU(this,t),this.head=null,this.tail=null,this.length=0}return SU(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Gh.alloc(0);for(var n=Gh.allocUnsafe(r>>>0),i=this.head,s=0;i;)DU(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=Gh.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:NU,value:function(r,n){return Iw(this,fT(fT({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var Cw=v((wre,mT)=>{"use strict";c();function OU(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.default.nextTick(Sw,this,t)):p.default.nextTick(Sw,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?p.default.nextTick(Qh,r):(r._writableState.errorEmitted=!0,p.default.nextTick(yT,r,s)):p.default.nextTick(yT,r,s):e?(p.default.nextTick(Qh,r),e(s)):p.default.nextTick(Qh,r)}),this)}function yT(t,e){Sw(t,e),Qh(t)}function Qh(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function PU(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Sw(t,e){t.emit("error",e)}function BU(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}mT.exports={destroy:OU,undestroy:PU,errorOrDestroy:BU}});var Ws=v((vre,vT)=>{"use strict";c();function RU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ET={};function Ir(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){RU(o,s);function o(a,u,l){return s.call(this,n(a,u,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,ET[t]=i}function wT(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function LU(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function FU(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function MU(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Ir("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Ir("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&LU(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(FU(t," argument"))i="The ".concat(t," ").concat(n," ").concat(wT(e,"type"));else{var s=MU(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(wT(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Ir("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ir("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Ir("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ir("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Ir("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ir("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ir("ERR_STREAM_WRITE_AFTER_END","write after end");Ir("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ir("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Ir("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");vT.exports.codes=ET});var Tw=v((_re,AT)=>{"use strict";c();var UU=Ws().codes.ERR_INVALID_OPT_VALUE;function qU(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function VU(t,e,r,n){var i=qU(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new UU(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}AT.exports={getHighWaterMark:VU}});var ka=v((Ire,xw)=>{c();typeof Object.create=="function"?xw.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xw.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var bT=v((Cre,_T)=>{c();_T.exports=HU;function HU(t,e){if(Nw("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Nw("throwDeprecation"))throw new Error(e);Nw("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Nw(t){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var Pw=v((xre,NT)=>{"use strict";c();NT.exports=at;function ST(t){var e=this;this.next=null,this.entry=null,this.finish=function(){pq(e,t)}}var Ka;at.WritableState=Rc;var jU={deprecate:bT()},CT=_w(),Kh=Ma().Buffer,GU=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function QU(t){return Kh.from(t)}function kU(t){return Kh.isBuffer(t)||t instanceof GU}var Ow=Cw(),KU=Tw(),zU=KU.getHighWaterMark,Ci=Ws().codes,WU=Ci.ERR_INVALID_ARG_TYPE,$U=Ci.ERR_METHOD_NOT_IMPLEMENTED,YU=Ci.ERR_MULTIPLE_CALLBACK,JU=Ci.ERR_STREAM_CANNOT_PIPE,XU=Ci.ERR_STREAM_DESTROYED,ZU=Ci.ERR_STREAM_NULL_VALUES,eq=Ci.ERR_STREAM_WRITE_AFTER_END,tq=Ci.ERR_UNKNOWN_ENCODING,za=Ow.errorOrDestroy;ka()(at,CT);function rq(){}function Rc(t,e,r){Ka=Ka||$s(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ka),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=zU(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){cq(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ST(this)}Rc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Rc.prototype,"buffer",{get:jU.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var kh;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(kh=Function.prototype[Symbol.hasInstance],Object.defineProperty(at,Symbol.hasInstance,{value:function(e){return kh.call(this,e)?!0:this!==at?!1:e&&e._writableState instanceof Rc}})):kh=function(e){return e instanceof this};function at(t){Ka=Ka||$s();var e=this instanceof Ka;if(!e&&!kh.call(at,this))return new at(t);this._writableState=new Rc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),CT.call(this)}at.prototype.pipe=function(){za(this,new JU)};function nq(t,e){var r=new eq;za(t,r),p.default.nextTick(e,r)}function iq(t,e,r,n){var i;return r===null?i=new ZU:typeof r!="string"&&!e.objectMode&&(i=new WU("chunk",["string","Buffer"],r)),i?(za(t,i),p.default.nextTick(n,i),!1):!0}at.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&kU(t);return s&&!Kh.isBuffer(t)&&(t=QU(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=rq),n.ending?nq(this,r):(s||iq(this,n,t,r))&&(n.pendingcb++,i=oq(this,n,s,t,e,r)),i};at.prototype.cork=function(){this._writableState.corked++};at.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&TT(this,t))};at.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new tq(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(at.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function sq(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Kh.from(e,r)),e}Object.defineProperty(at.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function oq(t,e,r,n,i,s){if(!r){var o=sq(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Dw(t,e,!1,a,n,i,s);return u}function Dw(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new XU("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function aq(t,e,r,n,i){--e.pendingcb,r?(p.default.nextTick(i,n),p.default.nextTick(Bc,t,e),t._writableState.errorEmitted=!0,za(t,n)):(i(n),t._writableState.errorEmitted=!0,za(t,n),Bc(t,e))}function uq(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function cq(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new YU;if(uq(r),e)aq(t,r,n,e,i);else{var s=xT(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&TT(t,r),n?p.default.nextTick(IT,t,r,s,i):IT(t,r,s,i)}}function IT(t,e,r,n){r||lq(t,e),e.pendingcb--,n(),Bc(t,e)}function lq(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function TT(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Dw(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new ST(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,f=r.callback,d=e.objectMode?1:u.length;if(Dw(t,e,!1,d,u,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}at.prototype._write=function(t,e,r){r(new $U("_write()"))};at.prototype._writev=null;at.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||dq(this,n,r),this};Object.defineProperty(at.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function xT(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function fq(t,e){t._final(function(r){e.pendingcb--,r&&za(t,r),e.prefinished=!0,t.emit("prefinish"),Bc(t,e)})}function hq(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,p.default.nextTick(fq,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Bc(t,e){var r=xT(e);if(r&&(hq(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function dq(t,e,r){e.ending=!0,Bc(t,e),r&&(e.finished?p.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function pq(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(at.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});at.prototype.destroy=Ow.destroy;at.prototype._undestroy=Ow.undestroy;at.prototype._destroy=function(t,e){e(t)}});var $s=v((Dre,OT)=>{"use strict";c();var gq=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};OT.exports=dn;var DT=Lw(),Rw=Pw();ka()(dn,DT);for(Bw=gq(Rw.prototype),zh=0;zh<Bw.length;zh++)Wh=Bw[zh],dn.prototype[Wh]||(dn.prototype[Wh]=Rw.prototype[Wh]);var Bw,Wh,zh;function dn(t){if(!(this instanceof dn))return new dn(t);DT.call(this,t),Rw.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",yq)))}Object.defineProperty(dn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(dn.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(dn.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function yq(){this._writableState.ended||p.default.nextTick(mq,this)}function mq(t){t.end()}Object.defineProperty(dn.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var RT=v((Fw,BT)=>{c();var $h=Ma(),pn=$h.Buffer;function PT(t,e){for(var r in t)e[r]=t[r]}pn.from&&pn.alloc&&pn.allocUnsafe&&pn.allocUnsafeSlow?BT.exports=$h:(PT($h,Fw),Fw.Buffer=Ys);function Ys(t,e,r){return pn(t,e,r)}Ys.prototype=Object.create(pn.prototype);PT(pn,Ys);Ys.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return pn(t,e,r)};Ys.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=pn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Ys.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return pn(t)};Ys.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return $h.SlowBuffer(t)}});var qw=v(FT=>{"use strict";c();var Uw=RT().Buffer,LT=Uw.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function wq(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Eq(t){var e=wq(t);if(typeof e!="string"&&(Uw.isEncoding===LT||!LT(t)))throw new Error("Unknown encoding: "+t);return e||t}FT.StringDecoder=Lc;function Lc(t){this.encoding=Eq(t);var e;switch(this.encoding){case"utf16le":this.text=Sq,this.end=Cq,e=4;break;case"utf8":this.fillLast=_q,e=4;break;case"base64":this.text=Tq,this.end=xq,e=3;break;default:this.write=Nq,this.end=Dq;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Uw.allocUnsafe(e)}Lc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Lc.prototype.end=Iq;Lc.prototype.text=bq;Lc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Mw(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function vq(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Mw(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Mw(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Mw(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Aq(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function _q(t){var e=this.lastTotal-this.lastNeed,r=Aq(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function bq(t,e){var r=vq(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Iq(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Sq(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Cq(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Tq(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function xq(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Nq(t){return t.toString(this.encoding)}function Dq(t){return t&&t.length?this.write(t):""}});var Yh=v((Lre,qT)=>{"use strict";c();var MT=Ws().codes.ERR_STREAM_PREMATURE_CLOSE;function Oq(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Pq(){}function Bq(t){return t.setHeader&&typeof t.abort=="function"}function UT(t,e,r){if(typeof e=="function")return UT(t,null,e);e||(e={}),r=Oq(r||Pq);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},f=function(E){r.call(t,E)},d=function(){var E;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(E=new MT),r.call(t,E);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(E=new MT),r.call(t,E)},y=function(){t.req.on("finish",a)};return Bq(t)?(t.on("complete",a),t.on("abort",d),t.req?y():t.on("request",y)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",y),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}qT.exports=UT});var HT=v((Mre,VT)=>{"use strict";c();var Jh;function Ti(t,e,r){return e=Rq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rq(t){var e=Lq(t,"string");return typeof e=="symbol"?e:String(e)}function Lq(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fq=Yh(),xi=Symbol("lastResolve"),Js=Symbol("lastReject"),Fc=Symbol("error"),Xh=Symbol("ended"),Xs=Symbol("lastPromise"),Vw=Symbol("handlePromise"),Zs=Symbol("stream");function Ni(t,e){return{value:t,done:e}}function Mq(t){var e=t[xi];if(e!==null){var r=t[Zs].read();r!==null&&(t[Xs]=null,t[xi]=null,t[Js]=null,e(Ni(r,!1)))}}function Uq(t){p.default.nextTick(Mq,t)}function qq(t,e){return function(r,n){t.then(function(){if(e[Xh]){r(Ni(void 0,!0));return}e[Vw](r,n)},n)}}var Vq=Object.getPrototypeOf(function(){}),Hq=Object.setPrototypeOf((Jh={get stream(){return this[Zs]},next:function(){var e=this,r=this[Fc];if(r!==null)return Promise.reject(r);if(this[Xh])return Promise.resolve(Ni(void 0,!0));if(this[Zs].destroyed)return new Promise(function(o,a){p.default.nextTick(function(){e[Fc]?a(e[Fc]):o(Ni(void 0,!0))})});var n=this[Xs],i;if(n)i=new Promise(qq(n,this));else{var s=this[Zs].read();if(s!==null)return Promise.resolve(Ni(s,!1));i=new Promise(this[Vw])}return this[Xs]=i,i}},Ti(Jh,Symbol.asyncIterator,function(){return this}),Ti(Jh,"return",function(){var e=this;return new Promise(function(r,n){e[Zs].destroy(null,function(i){if(i){n(i);return}r(Ni(void 0,!0))})})}),Jh),Vq),jq=function(e){var r,n=Object.create(Hq,(r={},Ti(r,Zs,{value:e,writable:!0}),Ti(r,xi,{value:null,writable:!0}),Ti(r,Js,{value:null,writable:!0}),Ti(r,Fc,{value:null,writable:!0}),Ti(r,Xh,{value:e._readableState.endEmitted,writable:!0}),Ti(r,Vw,{value:function(s,o){var a=n[Zs].read();a?(n[Xs]=null,n[xi]=null,n[Js]=null,s(Ni(a,!1))):(n[xi]=s,n[Js]=o)},writable:!0}),r));return n[Xs]=null,Fq(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Js];s!==null&&(n[Xs]=null,n[xi]=null,n[Js]=null,s(i)),n[Fc]=i;return}var o=n[xi];o!==null&&(n[Xs]=null,n[xi]=null,n[Js]=null,o(Ni(void 0,!0))),n[Xh]=!0}),e.on("readable",Uq.bind(null,n)),n};VT.exports=jq});var GT=v((qre,jT)=>{c();jT.exports=function(){throw new Error("Readable.from is not available in the browser")}});var Lw=v((jre,ZT)=>{"use strict";c();ZT.exports=Fe;var Wa;Fe.ReadableState=zT;var Hre=jn().EventEmitter,KT=function(e,r){return e.listeners(r).length},Uc=_w(),Zh=Ma().Buffer,Gq=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Qq(t){return Zh.from(t)}function kq(t){return Zh.isBuffer(t)||t instanceof Gq}var Hw=bw(),xe;Hw&&Hw.debuglog?xe=Hw.debuglog("stream"):xe=function(){};var Kq=gT(),Ww=Cw(),zq=Tw(),Wq=zq.getHighWaterMark,ed=Ws().codes,$q=ed.ERR_INVALID_ARG_TYPE,Yq=ed.ERR_STREAM_PUSH_AFTER_EOF,Jq=ed.ERR_METHOD_NOT_IMPLEMENTED,Xq=ed.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,$a,jw,Gw;ka()(Fe,Uc);var Mc=Ww.errorOrDestroy,Qw=["error","close","destroy","pause","resume"];function Zq(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function zT(t,e,r){Wa=Wa||$s(),t=t||{},typeof r!="boolean"&&(r=e instanceof Wa),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Wq(this,t,"readableHighWaterMark",r),this.buffer=new Kq,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&($a||($a=qw().StringDecoder),this.decoder=new $a(t.encoding),this.encoding=t.encoding)}function Fe(t){if(Wa=Wa||$s(),!(this instanceof Fe))return new Fe(t);var e=this instanceof Wa;this._readableState=new zT(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Uc.call(this)}Object.defineProperty(Fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Fe.prototype.destroy=Ww.destroy;Fe.prototype._undestroy=Ww.undestroy;Fe.prototype._destroy=function(t,e){e(t)};Fe.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Zh.from(t,e),e=""),n=!0),WT(this,t,e,!1,n)};Fe.prototype.unshift=function(t){return WT(this,t,null,!0,!1)};function WT(t,e,r,n,i){xe("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,rV(t,s);else{var o;if(i||(o=eV(s,e)),o)Mc(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Zh.prototype&&(e=Qq(e)),n)s.endEmitted?Mc(t,new Xq):kw(t,s,e,!0);else if(s.ended)Mc(t,new Yq);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?kw(t,s,e,!1):zw(t,s)):kw(t,s,e,!1)}else n||(s.reading=!1,zw(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function kw(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&td(t)),zw(t,e)}function eV(t,e){var r;return!kq(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new $q("chunk",["string","Buffer","Uint8Array"],e)),r}Fe.prototype.isPaused=function(){return this._readableState.flowing===!1};Fe.prototype.setEncoding=function(t){$a||($a=qw().StringDecoder);var e=new $a(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var QT=1073741824;function tV(t){return t>=QT?t=QT:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function kT(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=tV(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Fe.prototype.read=function(t){xe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return xe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Kw(this):td(this),null;if(t=kT(t,e),t===0&&e.ended)return e.length===0&&Kw(this),null;var n=e.needReadable;xe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,xe("length less than watermark",n)),e.ended||e.reading?(n=!1,xe("reading or ended",n)):n&&(xe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=kT(r,e)));var i;return t>0?i=JT(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Kw(this)),i!==null&&this.emit("data",i),i};function rV(t,e){if(xe("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?td(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,$T(t)))}}function td(t){var e=t._readableState;xe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(xe("emitReadable",e.flowing),e.emittedReadable=!0,p.default.nextTick($T,t))}function $T(t){var e=t._readableState;xe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,$w(t)}function zw(t,e){e.readingMore||(e.readingMore=!0,p.default.nextTick(nV,t,e))}function nV(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(xe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Fe.prototype._read=function(t){Mc(this,new Jq("_read()"))};Fe.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,xe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==p.default.stdout&&t!==p.default.stderr,s=i?a:O;n.endEmitted?p.default.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(L,U){xe("onunpipe"),L===r&&U&&U.hasUnpiped===!1&&(U.hasUnpiped=!0,f())}function a(){xe("onend"),t.end()}var u=iV(r);t.on("drain",u);var l=!1;function f(){xe("cleanup"),t.removeListener("close",w),t.removeListener("finish",E),t.removeListener("drain",u),t.removeListener("error",y),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",O),r.removeListener("data",d),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(L){xe("ondata");var U=t.write(L);xe("dest.write",U),U===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&XT(n.pipes,t)!==-1)&&!l&&(xe("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(L){xe("onerror",L),O(),t.removeListener("error",y),KT(t,"error")===0&&Mc(t,L)}Zq(t,"error",y);function w(){t.removeListener("finish",E),O()}t.once("close",w);function E(){xe("onfinish"),t.removeListener("close",w),O()}t.once("finish",E);function O(){xe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(xe("pipe resume"),r.resume()),t};function iV(t){return function(){var r=t._readableState;xe("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&KT(t,"data")&&(r.flowing=!0,$w(t))}}Fe.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=XT(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Fe.prototype.on=function(t,e){var r=Uc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,xe("on readable",n.length,n.reading),n.length?td(this):n.reading||p.default.nextTick(sV,this)),r};Fe.prototype.addListener=Fe.prototype.on;Fe.prototype.removeListener=function(t,e){var r=Uc.prototype.removeListener.call(this,t,e);return t==="readable"&&p.default.nextTick(YT,this),r};Fe.prototype.removeAllListeners=function(t){var e=Uc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&p.default.nextTick(YT,this),e};function YT(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function sV(t){xe("readable nexttick read 0"),t.read(0)}Fe.prototype.resume=function(){var t=this._readableState;return t.flowing||(xe("resume"),t.flowing=!t.readableListening,oV(this,t)),t.paused=!1,this};function oV(t,e){e.resumeScheduled||(e.resumeScheduled=!0,p.default.nextTick(aV,t,e))}function aV(t,e){xe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),$w(t),e.flowing&&!e.reading&&t.read(0)}Fe.prototype.pause=function(){return xe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(xe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function $w(t){var e=t._readableState;for(xe("flow",e.flowing);e.flowing&&t.read()!==null;);}Fe.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(xe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(xe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<Qw.length;s++)t.on(Qw[s],this.emit.bind(this,Qw[s]));return this._read=function(o){xe("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Fe.prototype[Symbol.asyncIterator]=function(){return jw===void 0&&(jw=HT()),jw(this)});Object.defineProperty(Fe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Fe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Fe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Fe._fromList=JT;Object.defineProperty(Fe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function JT(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Kw(t){var e=t._readableState;xe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,p.default.nextTick(uV,e,t))}function uV(t,e){if(xe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Fe.from=function(t,e){return Gw===void 0&&(Gw=GT()),Gw(Fe,t,e)});function XT(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Yw=v((Qre,tx)=>{"use strict";c();tx.exports=Gn;var rd=Ws().codes,cV=rd.ERR_METHOD_NOT_IMPLEMENTED,lV=rd.ERR_MULTIPLE_CALLBACK,fV=rd.ERR_TRANSFORM_ALREADY_TRANSFORMING,hV=rd.ERR_TRANSFORM_WITH_LENGTH_0,nd=$s();ka()(Gn,nd);function dV(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new lV);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Gn(t){if(!(this instanceof Gn))return new Gn(t);nd.call(this,t),this._transformState={afterTransform:dV.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",pV)}function pV(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){ex(t,e,r)}):ex(this,null,null)}Gn.prototype.push=function(t,e){return this._transformState.needTransform=!1,nd.prototype.push.call(this,t,e)};Gn.prototype._transform=function(t,e,r){r(new cV("_transform()"))};Gn.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Gn.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Gn.prototype._destroy=function(t,e){nd.prototype._destroy.call(this,t,function(r){e(r)})};function ex(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new hV;if(t._transformState.transforming)throw new fV;return t.push(null)}});var ix=v((Kre,nx)=>{"use strict";c();nx.exports=qc;var rx=Yw();ka()(qc,rx);function qc(t){if(!(this instanceof qc))return new qc(t);rx.call(this,t)}qc.prototype._transform=function(t,e,r){r(null,t)}});var cx=v((Wre,ux)=>{"use strict";c();var Jw;function gV(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ax=Ws().codes,yV=ax.ERR_MISSING_ARGS,mV=ax.ERR_STREAM_DESTROYED;function sx(t){if(t)throw t}function wV(t){return t.setHeader&&typeof t.abort=="function"}function EV(t,e,r,n){n=gV(n);var i=!1;t.on("close",function(){i=!0}),Jw===void 0&&(Jw=Yh()),Jw(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,wV(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new mV("pipe"))}}}function ox(t){t()}function vV(t,e){return t.pipe(e)}function AV(t){return!t.length||typeof t[t.length-1]!="function"?sx:t.pop()}function _V(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=AV(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new yV("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,l=a>0;return EV(o,u,l,function(f){i||(i=f),f&&s.forEach(ox),!u&&(s.forEach(ox),n(i))})});return e.reduce(vV)}ux.exports=_V});var Xw=v((Sr,lx)=>{c();Sr=lx.exports=Lw();Sr.Stream=Sr;Sr.Readable=Sr;Sr.Writable=Pw();Sr.Duplex=$s();Sr.Transform=Yw();Sr.PassThrough=ix();Sr.finished=Yh();Sr.pipeline=cx()});var dx=v((Jre,hx)=>{c();var{Transform:bV}=Xw();hx.exports=t=>class fx extends bV{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!h.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return h.Buffer.isBuffer(r)||(r=h.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new fx(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var yx=v((Zre,gx)=>{c();var{Transform:IV}=Xw();gx.exports=t=>class px extends IV{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!h.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return h.Buffer.isBuffer(r)||(r=h.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new px(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var wx=v((tne,mx)=>{c();var SV=dx(),CV=yx();mx.exports=function(t){let e=SV(t),r=CV(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var Ax=v(vx=>{c();var Ex=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];vx.p1600=function(t){for(let e=0;e<24;++e){let r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],f=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],y=f^(i<<1|s>>>31),w=d^(s<<1|i>>>31),E=t[0]^y,O=t[1]^w,L=t[10]^y,U=t[11]^w,T=t[20]^y,b=t[21]^w,x=t[30]^y,P=t[31]^w,B=t[40]^y,_=t[41]^w;y=r^(o<<1|a>>>31),w=n^(a<<1|o>>>31);let S=t[2]^y,F=t[3]^w,Z=t[12]^y,K=t[13]^w,j=t[22]^y,G=t[23]^w,$=t[32]^y,pe=t[33]^w,ae=t[42]^y,re=t[43]^w;y=i^(u<<1|l>>>31),w=s^(l<<1|u>>>31);let Y=t[4]^y,ie=t[5]^w,ee=t[14]^y,ne=t[15]^w,q=t[24]^y,ce=t[25]^w,oe=t[34]^y,le=t[35]^w,se=t[44]^y,ue=t[45]^w;y=o^(f<<1|d>>>31),w=a^(d<<1|f>>>31);let g=t[6]^y,m=t[7]^w,A=t[16]^y,D=t[17]^w,I=t[26]^y,N=t[27]^w,R=t[36]^y,C=t[37]^w,M=t[46]^y,H=t[47]^w;y=u^(r<<1|n>>>31),w=l^(n<<1|r>>>31);let V=t[8]^y,X=t[9]^w,ye=t[18]^y,we=t[19]^w,Pe=t[28]^y,$e=t[29]^w,it=t[38]^y,De=t[39]^w,Me=t[48]^y,vt=t[49]^w,ni=E,ss=O,os=U<<4|L>>>28,Yt=L<<4|U>>>28,Dn=T<<3|b>>>29,qt=b<<3|T>>>29,At=P<<9|x>>>23,Qe=x<<9|P>>>23,Yg=B<<18|_>>>14,Jg=_<<18|B>>>14,Xg=S<<1|F>>>31,Zg=F<<1|S>>>31,e0=K<<12|Z>>>20,t0=Z<<12|K>>>20,r0=j<<10|G>>>22,n0=G<<10|j>>>22,i0=pe<<13|$>>>19,s0=$<<13|pe>>>19,o0=ae<<2|re>>>30,a0=re<<2|ae>>>30,u0=ie<<30|Y>>>2,c0=Y<<30|ie>>>2,l0=ee<<6|ne>>>26,f0=ne<<6|ee>>>26,h0=ce<<11|q>>>21,d0=q<<11|ce>>>21,p0=oe<<15|le>>>17,g0=le<<15|oe>>>17,y0=ue<<29|se>>>3,m0=se<<29|ue>>>3,w0=g<<28|m>>>4,E0=m<<28|g>>>4,v0=D<<23|A>>>9,A0=A<<23|D>>>9,_0=I<<25|N>>>7,b0=N<<25|I>>>7,I0=R<<21|C>>>11,S0=C<<21|R>>>11,C0=H<<24|M>>>8,T0=M<<24|H>>>8,x0=V<<27|X>>>5,N0=X<<27|V>>>5,D0=ye<<20|we>>>12,O0=we<<20|ye>>>12,P0=$e<<7|Pe>>>25,B0=Pe<<7|$e>>>25,R0=it<<8|De>>>24,L0=De<<8|it>>>24,F0=Me<<14|vt>>>18,M0=vt<<14|Me>>>18;t[0]=ni^~e0&h0,t[1]=ss^~t0&d0,t[10]=w0^~D0&Dn,t[11]=E0^~O0&qt,t[20]=Xg^~l0&_0,t[21]=Zg^~f0&b0,t[30]=x0^~os&r0,t[31]=N0^~Yt&n0,t[40]=u0^~v0&P0,t[41]=c0^~A0&B0,t[2]=e0^~h0&I0,t[3]=t0^~d0&S0,t[12]=D0^~Dn&i0,t[13]=O0^~qt&s0,t[22]=l0^~_0&R0,t[23]=f0^~b0&L0,t[32]=os^~r0&p0,t[33]=Yt^~n0&g0,t[42]=v0^~P0&At,t[43]=A0^~B0&Qe,t[4]=h0^~I0&F0,t[5]=d0^~S0&M0,t[14]=Dn^~i0&y0,t[15]=qt^~s0&m0,t[24]=_0^~R0&Yg,t[25]=b0^~L0&Jg,t[34]=r0^~p0&C0,t[35]=n0^~g0&T0,t[44]=P0^~At&o0,t[45]=B0^~Qe&a0,t[6]=I0^~F0&ni,t[7]=S0^~M0&ss,t[16]=i0^~y0&w0,t[17]=s0^~m0&E0,t[26]=R0^~Yg&Xg,t[27]=L0^~Jg&Zg,t[36]=p0^~C0&x0,t[37]=g0^~T0&N0,t[46]=At^~o0&u0,t[47]=Qe^~a0&c0,t[8]=F0^~ni&e0,t[9]=M0^~ss&t0,t[18]=y0^~w0&D0,t[19]=m0^~E0&O0,t[28]=Yg^~Xg&l0,t[29]=Jg^~Zg&f0,t[38]=C0^~x0&os,t[39]=T0^~N0&Yt,t[48]=o0^~u0&v0,t[49]=a0^~c0&A0,t[0]^=Ex[e*2],t[1]^=Ex[e*2+1]}}});var bx=v((sne,_x)=>{c();var id=Ax();function Ya(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Ya.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};Ya.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(id.p1600(this.state),this.count=0)};Ya.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&id.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),id.p1600(this.state),this.count=0,this.squeezing=!0};Ya.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);let e=h.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(id.p1600(this.state),this.count=0);return e};Ya.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};_x.exports=Ya});var Sx=v((ane,Ix)=>{c();Ix.exports=wx()(bx())});var Nx=v(Ja=>{"use strict";c();var TV=Ja&&Ja.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.SmartContract=void 0;var xV=TV(Wt()),Vc=Zt(),Zw=mh(),NV=He(),eE=Oc(),DV=fr(),OV=Kf(),Cx=kC(),Tx=Lh(),xx=WC(),PV=JC(),BV=Mh(),sd=XC(),RV=Sx(),tE=class{constructor(e={}){this.address=new Vc.Address,this.methodsExplicit={},this.methods={},this.address=e.address||new Vc.Address,this.abi=e.abi,this.abi&&this.setupMethods()}setupMethods(){let e=this,r=this.getAbi();for(let n of r.getEndpoints()){let i=n.name;this.methodsExplicit[i]=function(s){let o=new Tx.ContractFunction(i);return new xx.Interaction(e,o,s||[])},this.methods[i]=function(s){let o=new Tx.ContractFunction(i),a=PV.NativeSerializer.nativeToTypedValues(s||[],n);return new xx.Interaction(e,o,a||[])}}}setAddress(e){this.address=e}getAddress(){return this.address}getAbi(){return DV.guardValueIsSet("abi",this.abi),this.abi}getEndpoint(e){return this.getAbi().getEndpoint(e)}deploy({deployer:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:a,chainID:u}){Zw.Compatibility.guardAddressIsSetAndNonZero(e,"'deployer' of SmartContract.deploy()","pass the actual address to deploy()"),n=n||new Cx.CodeMetadata,i=i||[],s=s||0;let l=new sd.ContractDeployPayloadBuilder().setCode(r).setCodeMetadata(n).setInitArgs(i).build();return new eE.Transaction({receiver:Vc.Address.Zero(),sender:e,value:s,gasLimit:o,gasPrice:a,data:l,chainID:u})}upgrade({caller:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:a,chainID:u}){Zw.Compatibility.guardAddressIsSetAndNonZero(e,"'caller' of SmartContract.upgrade()","pass the actual address to upgrade()"),this.ensureHasAddress(),n=n||new Cx.CodeMetadata,i=i||[],s=s||0;let l=new sd.ContractUpgradePayloadBuilder().setCode(r).setCodeMetadata(n).setInitArgs(i).build();return new eE.Transaction({sender:e,receiver:this.getAddress(),value:s,gasLimit:o,gasPrice:a,data:l,chainID:u})}call({func:e,args:r,value:n,gasLimit:i,receiver:s,gasPrice:o,chainID:a,caller:u}){Zw.Compatibility.guardAddressIsSetAndNonZero(u,"'caller' of SmartContract.call()","pass the actual address to call()"),this.ensureHasAddress(),r=r||[],n=n||0;let l=new sd.ContractCallPayloadBuilder().setFunction(e).setArgs(r).build();return new eE.Transaction({sender:u,receiver:s||this.getAddress(),value:n,gasLimit:i,gasPrice:o,data:l,chainID:a})}createQuery({func:e,args:r,value:n,caller:i}){return this.ensureHasAddress(),new BV.Query({address:this.getAddress(),func:e,args:r,value:n,caller:i})}ensureHasAddress(){if(!this.getAddress().bech32())throw new NV.ErrContractHasNoAddress}static computeAddress(e,r){let n=h.Buffer.alloc(8,0),i=new Vc.Address(e.bech32()).pubkey(),s=i.slice(30),o=h.Buffer.alloc(8),a=new xV.default(r.valueOf().toString(10)),u=OV.bigIntToBuffer(a);o.write(u.reverse().toString("hex"),"hex");let l=h.Buffer.concat([i,o]),f=RV("keccak256").update(l).digest(),d=h.Buffer.from(sd.ArwenVirtualMachine,"hex"),y=h.Buffer.concat([n,d,f.slice(10,30),s]);return new Vc.Address(y)}};Ja.SmartContract=tE});var Dx=v(Xa=>{"use strict";c();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Signature=Xa.Address=void 0;var rE=class{constructor(e){this.value=e}bech32(){return this.value}};Xa.Address=rE;var nE=class{constructor(e){this.value=e}hex(){return this.value}};Xa.Signature=nE});var Ox=v(Hc=>{"use strict";c();Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Operation=void 0;var LV;(function(t){t.Connect="connect",t.Logout="logout",t.SignTransactions="signTransactions",t.SignMessage="signMessage",t.CancelAction="cancelAction"})(LV=Hc.Operation||(Hc.Operation={}))});var Px=v(Di=>{"use strict";c();Object.defineProperty(Di,"__esModule",{value:!0});Di.ErrAccountNotConnected=Di.ErrCannotSignSingleTransaction=Di.Err=void 0;var jc=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Di.Err=jc;var iE=class extends jc{constructor(){super("Cannot sign single transaction.")}};Di.ErrCannotSignSingleTransaction=iE;var sE=class extends jc{constructor(){super("Account is not connected.")}};Di.ErrAccountNotConnected=sE});var oE=v(Za=>{"use strict";c();var Oi=Za&&Za.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Za,"__esModule",{value:!0});Za.ExtensionProvider=void 0;var od=Dx(),Gc=Ox(),Bx=Px(),gn=class{constructor(){if(this.account={address:""},this.initialized=!1,gn._instance)throw new Error("Error: Instantiation failed: Use ExtensionProvider.getInstance() instead of new.");gn._instance=this}static getInstance(){return gn._instance}setAddress(e){return this.account.address=e,gn._instance}init(){return Oi(this,void 0,void 0,function*(){return window&&window.elrondWallet&&(this.initialized=!0),this.initialized})}login(e={}){return Oi(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");let{token:r}=e,n=r||"";return yield this.startBgrMsgChannel(Gc.Operation.Connect,n),this.account.address})}logout(){return Oi(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");try{yield this.startBgrMsgChannel(Gc.Operation.Logout,this.account.address),this.disconnect()}catch(e){console.warn("Extension origin url is already cleared!",e)}return!0})}disconnect(){this.account={address:""}}getAddress(){return Oi(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");return this.account?this.account.address:""})}isInitialized(){return this.initialized}isConnected(){return Oi(this,void 0,void 0,function*(){return!!this.account.address})}signTransaction(e){return Oi(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.signTransactions([e]);if(r.length!=1)throw new Bx.ErrCannotSignSingleTransaction;return r[0]})}ensureConnected(){if(!this.account.address)throw new Bx.ErrAccountNotConnected}signTransactions(e){return Oi(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.startBgrMsgChannel(Gc.Operation.SignTransactions,{from:this.account.address,transactions:e.map(n=>n.toPlainObject())});try{for(let n=0;n<e.length;n++){let i=e[n],s=r[n];i.applySignature(new od.Signature(s.signature),new od.Address(this.account.address))}return e}catch(n){throw new Error(`Transaction canceled: ${n.message}.`)}})}signMessage(e){return Oi(this,void 0,void 0,function*(){this.ensureConnected();let r={account:this.account.address,message:e.message.toString()},n=yield this.startBgrMsgChannel(Gc.Operation.SignMessage,r);return e.applySignature(new od.Signature(n.signature),new od.Address(this.account.address)),e})}cancelAction(){return this.startBgrMsgChannel(Gc.Operation.CancelAction,{})}startBgrMsgChannel(e,r){return new Promise(n=>{window.postMessage({target:"erdw-inpage",type:e,data:r},window.origin);let i=s=>{s.isTrusted&&s.data.target==="erdw-contentScript"&&(s.data.type==="connectResponse"?(s.data.data&&s.data.data.address&&(this.account=s.data.data),window.removeEventListener("message",i),n(s.data.data)):(window.removeEventListener("message",i),n(s.data.data)))};window.addEventListener("message",i,!1)})}};Za.ExtensionProvider=gn;gn._instance=new gn});var qx=v((xne,Ux)=>{"use strict";c();function FV(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Ux.exports=MV;function MV(t,e,r){var n=r&&r.stringify||FV,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var l="",f=1-i,d=-1,y=t&&t.length||0,w=0;w<y;){if(t.charCodeAt(w)===37&&w+1<y){switch(d=d>-1?d:0,t.charCodeAt(w+1)){case 100:case 102:if(f>=u||e[f]==null)break;d<w&&(l+=t.slice(d,w)),l+=Number(e[f]),d=w+2,w++;break;case 105:if(f>=u||e[f]==null)break;d<w&&(l+=t.slice(d,w)),l+=Math.floor(Number(e[f])),d=w+2,w++;break;case 79:case 111:case 106:if(f>=u||e[f]===void 0)break;d<w&&(l+=t.slice(d,w));var E=typeof e[f];if(E==="string"){l+="'"+e[f]+"'",d=w+2,w++;break}if(E==="function"){l+=e[f].name||"<anonymous>",d=w+2,w++;break}l+=n(e[f]),d=w+2,w++;break;case 115:if(f>=u)break;d<w&&(l+=t.slice(d,w)),l+=String(e[f]),d=w+2,w++;break;case 37:d<w&&(l+=t.slice(d,w)),l+="%",d=w+2,w++,f--;break}++f}++w}return d===-1?t:(d<y&&(l+=t.slice(d)),l)}});var dd=v((Dne,Gx)=>{"use strict";c();var Vx=qx();Gx.exports=mn;var Qc=zV().console||{},UV={mapHttpRequest:fd,mapHttpResponse:fd,wrapRequestSerializer:aE,wrapResponseSerializer:aE,wrapErrorSerializer:aE,req:fd,res:fd,err:GV};function qV(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function mn(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Qc;t.browser.write&&(t.browser.asObject=!0);let n=t.serializers||{},i=qV(t.browser.serialize,n),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let a=t.level||"info",u=Object.create(r);u.log||(u.log=kc),Object.defineProperty(u,"levelVal",{get:f}),Object.defineProperty(u,"level",{get:d,set:y});let l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:QV(t)};u.levels=mn.levels,u.level=a,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=kc,u.serializers=n,u._serialize=i,u._stdErrSerialize=s,u.child=w,e&&(u._logEvent=uE());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function y(E){if(E!=="silent"&&!this.levels.values[E])throw Error("unknown level "+E);this._level=E,eu(l,u,"error","log"),eu(l,u,"fatal","error"),eu(l,u,"warn","error"),eu(l,u,"info","log"),eu(l,u,"debug","log"),eu(l,u,"trace","log")}function w(E,O){if(!E)throw new Error("missing bindings for child Pino");O=O||{},i&&E.serializers&&(O.serializers=E.serializers);let L=O.serializers;if(i&&L){var U=Object.assign({},n,L),T=t.browser.serialize===!0?Object.keys(U):i;delete E.serializers,hd([E],T,U,this._stdErrSerialize)}function b(x){this._childLevel=(x._childLevel|0)+1,this.error=tu(x,E,"error"),this.fatal=tu(x,E,"fatal"),this.warn=tu(x,E,"warn"),this.info=tu(x,E,"info"),this.debug=tu(x,E,"debug"),this.trace=tu(x,E,"trace"),U&&(this.serializers=U,this._serialize=T),e&&(this._logEvent=uE([].concat(x._logEvent.bindings,E)))}return b.prototype=this,new b(this)}return u}mn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};mn.stdSerializers=UV;mn.stdTimeFunctions=Object.assign({},{nullTime:Hx,epochTime:jx,unixTime:kV,isoTime:KV});function eu(t,e,r,n){let i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?kc:i[r]?i[r]:Qc[r]||Qc[n]||kc,VV(t,e,r)}function VV(t,e,r){!t.transmit&&e[r]===kc||(e[r]=function(n){return function(){let s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Qc?Qc:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject&&hd(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,HV(this,r,o,s)):n.apply(a,o),t.transmit){let l=t.transmit.level||e.level,f=mn.levels.values[l],d=mn.levels.values[r];if(d<f)return;jV(this,{ts:s,methodLevel:r,methodValue:d,transmitLevel:l,transmitValue:mn.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function HV(t,e,r,n){t._serialize&&hd(r,t._serialize,t.serializers,t._stdErrSerialize);let i=r.slice(),s=i[0],o={};n&&(o.time=n),o.level=mn.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?Vx(i.shift(),i):void 0}else typeof s=="string"&&(s=Vx(i.shift(),i));return s!==void 0&&(o.msg=s),o}function hd(t,e,r,n){for(let i in t)if(n&&t[i]instanceof Error)t[i]=mn.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(let s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function tu(t,e,r){return function(){let n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function jV(t,e,r){let n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,u=t._logEvent.bindings;hd(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=uE(u)}function uE(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function GV(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function QV(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Hx:jx}function fd(){return{}}function aE(t){return t}function kc(){}function Hx(){return!1}function jx(){return Date.now()}function kV(){return Math.round(Date.now()/1e3)}function KV(){return new Date(Date.now()).toISOString()}function zV(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var or={};st(or,{__assign:()=>lE,__asyncDelegator:()=>oH,__asyncGenerator:()=>sH,__asyncValues:()=>aH,__await:()=>Kc,__awaiter:()=>ZV,__classPrivateFieldGet:()=>fH,__classPrivateFieldSet:()=>hH,__createBinding:()=>tH,__decorate:()=>YV,__exportStar:()=>rH,__extends:()=>WV,__generator:()=>eH,__importDefault:()=>lH,__importStar:()=>cH,__makeTemplateObject:()=>uH,__metadata:()=>XV,__param:()=>JV,__read:()=>Qx,__rest:()=>$V,__spread:()=>nH,__spreadArrays:()=>iH,__values:()=>fE});function WV(t,e){cE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function $V(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function YV(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function JV(t,e){return function(r,n){e(r,n,t)}}function XV(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ZV(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,u)}l((n=n.apply(t,e||[])).next())})}function eH(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function tH(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function rH(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function fE(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qx(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function nH(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qx(arguments[e]));return t}function iH(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Kc(t){return this instanceof Kc?(this.v=t,this):new Kc(t)}function sH(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){n[y]&&(i[y]=function(w){return new Promise(function(E,O){s.push([y,w,E,O])>1||a(y,w)})})}function a(y,w){try{u(n[y](w))}catch(E){d(s[0][3],E)}}function u(y){y.value instanceof Kc?Promise.resolve(y.value.v).then(l,f):d(s[0][2],y)}function l(y){a("next",y)}function f(y){a("throw",y)}function d(y,w){y(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}function oH(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Kc(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function aH(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof fE=="function"?fE(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function uH(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function cH(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function lH(t){return t&&t.__esModule?t:{default:t}}function fH(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function hH(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var cE,lE,ar=ge(()=>{c();cE=function(t,e){return cE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},cE(t,e)};lE=function(){return lE=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},lE.apply(this,arguments)}});var hE=v(pd=>{"use strict";c();Object.defineProperty(pd,"__esModule",{value:!0});function dH(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}pd.safeJsonParse=dH;function pH(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}pd.safeJsonStringify=pH});var kx=v((Lne,gd)=>{"use strict";c();(function(){"use strict";let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof global<"u"&&global.localStorage?gd.exports=global.localStorage:typeof window<"u"&&window.localStorage?gd.exports=window.localStorage:gd.exports=new e})()});var Kx=v(yd=>{"use strict";c();Object.defineProperty(yd,"__esModule",{value:!0});yd.IKeyValueStorage=void 0;var dE=class{};yd.IKeyValueStorage=dE});var zx=v(md=>{"use strict";c();Object.defineProperty(md,"__esModule",{value:!0});md.parseEntry=void 0;var gH=hE();function yH(t){var e;return[t[0],gH.safeJsonParse((e=t[1])!==null&&e!==void 0?e:"")]}md.parseEntry=yH});var $x=v(wd=>{"use strict";c();Object.defineProperty(wd,"__esModule",{value:!0});var Wx=(ar(),ot(or));Wx.__exportStar(Kx(),wd);Wx.__exportStar(zx(),wd)});var Jx=v(zc=>{"use strict";c();Object.defineProperty(zc,"__esModule",{value:!0});zc.KeyValueStorage=void 0;var ru=(ar(),ot(or)),Yx=hE(),mH=ru.__importDefault(kx()),wH=$x(),Ed=class{constructor(){this.localStorage=mH.default}getKeys(){return ru.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ru.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(wH.parseEntry)})}getItem(e){return ru.__awaiter(this,void 0,void 0,function*(){let r=this.localStorage.getItem(e);if(r!==null)return Yx.safeJsonParse(r)})}setItem(e,r){return ru.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Yx.safeJsonStringify(r))})}removeItem(e){return ru.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}};zc.KeyValueStorage=Ed;zc.default=Ed});var Xx=v(vd=>{"use strict";c();Object.defineProperty(vd,"__esModule",{value:!0});vd.delay=void 0;function EH(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}vd.delay=EH});var Zx=v(nu=>{"use strict";c();Object.defineProperty(nu,"__esModule",{value:!0});nu.ONE_THOUSAND=nu.ONE_HUNDRED=void 0;nu.ONE_HUNDRED=100;nu.ONE_THOUSAND=1e3});var e2=v(he=>{"use strict";c();Object.defineProperty(he,"__esModule",{value:!0});he.ONE_YEAR=he.FOUR_WEEKS=he.THREE_WEEKS=he.TWO_WEEKS=he.ONE_WEEK=he.THIRTY_DAYS=he.SEVEN_DAYS=he.FIVE_DAYS=he.THREE_DAYS=he.ONE_DAY=he.TWENTY_FOUR_HOURS=he.TWELVE_HOURS=he.SIX_HOURS=he.THREE_HOURS=he.ONE_HOUR=he.SIXTY_MINUTES=he.THIRTY_MINUTES=he.TEN_MINUTES=he.FIVE_MINUTES=he.ONE_MINUTE=he.SIXTY_SECONDS=he.THIRTY_SECONDS=he.TEN_SECONDS=he.FIVE_SECONDS=he.ONE_SECOND=void 0;he.ONE_SECOND=1;he.FIVE_SECONDS=5;he.TEN_SECONDS=10;he.THIRTY_SECONDS=30;he.SIXTY_SECONDS=60;he.ONE_MINUTE=he.SIXTY_SECONDS;he.FIVE_MINUTES=he.ONE_MINUTE*5;he.TEN_MINUTES=he.ONE_MINUTE*10;he.THIRTY_MINUTES=he.ONE_MINUTE*30;he.SIXTY_MINUTES=he.ONE_MINUTE*60;he.ONE_HOUR=he.SIXTY_MINUTES;he.THREE_HOURS=he.ONE_HOUR*3;he.SIX_HOURS=he.ONE_HOUR*6;he.TWELVE_HOURS=he.ONE_HOUR*12;he.TWENTY_FOUR_HOURS=he.ONE_HOUR*24;he.ONE_DAY=he.TWENTY_FOUR_HOURS;he.THREE_DAYS=he.ONE_DAY*3;he.FIVE_DAYS=he.ONE_DAY*5;he.SEVEN_DAYS=he.ONE_DAY*7;he.THIRTY_DAYS=he.ONE_DAY*30;he.ONE_WEEK=he.SEVEN_DAYS;he.TWO_WEEKS=he.ONE_WEEK*2;he.THREE_WEEKS=he.ONE_WEEK*3;he.FOUR_WEEKS=he.ONE_WEEK*4;he.ONE_YEAR=he.ONE_DAY*365});var pE=v(Ad=>{"use strict";c();Object.defineProperty(Ad,"__esModule",{value:!0});var t2=(ar(),ot(or));t2.__exportStar(Zx(),Ad);t2.__exportStar(e2(),Ad)});var n2=v(iu=>{"use strict";c();Object.defineProperty(iu,"__esModule",{value:!0});iu.fromMiliseconds=iu.toMiliseconds=void 0;var r2=pE();function vH(t){return t*r2.ONE_THOUSAND}iu.toMiliseconds=vH;function AH(t){return Math.floor(t/r2.ONE_THOUSAND)}iu.fromMiliseconds=AH});var s2=v(_d=>{"use strict";c();Object.defineProperty(_d,"__esModule",{value:!0});var i2=(ar(),ot(or));i2.__exportStar(Xx(),_d);i2.__exportStar(n2(),_d)});var o2=v(Wc=>{"use strict";c();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.Watch=void 0;var bd=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let n=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:n})}get(e){let r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){let r=this.get(e);return r.elapsed||Date.now()-r.started}};Wc.Watch=bd;Wc.default=bd});var a2=v(Id=>{"use strict";c();Object.defineProperty(Id,"__esModule",{value:!0});Id.IWatch=void 0;var gE=class{};Id.IWatch=gE});var u2=v(yE=>{"use strict";c();Object.defineProperty(yE,"__esModule",{value:!0});var _H=(ar(),ot(or));_H.__exportStar(a2(),yE)});var eo=v(su=>{"use strict";c();Object.defineProperty(su,"__esModule",{value:!0});var Sd=(ar(),ot(or));Sd.__exportStar(s2(),su);Sd.__exportStar(o2(),su);Sd.__exportStar(u2(),su);Sd.__exportStar(pE(),su)});var mE,c2=ge(()=>{c();mE=class{}});var wE={};st(wE,{IEvents:()=>mE});var EE=ge(()=>{c();c2()});var l2=v(Cd=>{"use strict";c();Object.defineProperty(Cd,"__esModule",{value:!0});Cd.IHeartBeat=void 0;var bH=(EE(),ot(wE)),vE=class extends bH.IEvents{constructor(e){super()}};Cd.IHeartBeat=vE});var _E=v(AE=>{"use strict";c();Object.defineProperty(AE,"__esModule",{value:!0});var IH=(ar(),ot(or));IH.__exportStar(l2(),AE)});var f2=v(ou=>{"use strict";c();Object.defineProperty(ou,"__esModule",{value:!0});ou.HEARTBEAT_EVENTS=ou.HEARTBEAT_INTERVAL=void 0;var SH=eo();ou.HEARTBEAT_INTERVAL=SH.FIVE_SECONDS;ou.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}});var IE=v(bE=>{"use strict";c();Object.defineProperty(bE,"__esModule",{value:!0});var CH=(ar(),ot(or));CH.__exportStar(f2(),bE)});var h2=v(Td=>{"use strict";c();Object.defineProperty(Td,"__esModule",{value:!0});Td.HeartBeat=void 0;var SE=(ar(),ot(or)),TH=jn(),xH=eo(),NH=_E(),CE=IE(),$c=class extends NH.IHeartBeat{constructor(e){super(e),this.events=new TH.EventEmitter,this.interval=CE.HEARTBEAT_INTERVAL,this.interval=e?.interval||CE.HEARTBEAT_INTERVAL}static init(e){return SE.__awaiter(this,void 0,void 0,function*(){let r=new $c(e);return yield r.init(),r})}init(){return SE.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return SE.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),xH.toMiliseconds(this.interval))})}pulse(){this.events.emit(CE.HEARTBEAT_EVENTS.pulse)}};Td.HeartBeat=$c});var d2=v(Yc=>{"use strict";c();Object.defineProperty(Yc,"__esModule",{value:!0});var TE=(ar(),ot(or));TE.__exportStar(h2(),Yc);TE.__exportStar(_E(),Yc);TE.__exportStar(IE(),Yc)});var xE=v(au=>{"use strict";c();Object.defineProperty(au,"__esModule",{value:!0});au.PINO_CUSTOM_CONTEXT_KEY=au.PINO_LOGGER_DEFAULTS=void 0;au.PINO_LOGGER_DEFAULTS={level:"info"};au.PINO_CUSTOM_CONTEXT_KEY="custom_context"});var w2=v(nr=>{"use strict";c();Object.defineProperty(nr,"__esModule",{value:!0});nr.generateChildLogger=nr.formatChildLoggerContext=nr.getLoggerContext=nr.setBrowserLoggerContext=nr.getBrowserLoggerContext=nr.getDefaultLoggerOptions=void 0;var uu=xE();function DH(t){return Object.assign(Object.assign({},t),{level:t?.level||uu.PINO_LOGGER_DEFAULTS.level})}nr.getDefaultLoggerOptions=DH;function p2(t,e=uu.PINO_CUSTOM_CONTEXT_KEY){return t[e]||""}nr.getBrowserLoggerContext=p2;function g2(t,e,r=uu.PINO_CUSTOM_CONTEXT_KEY){return t[r]=e,t}nr.setBrowserLoggerContext=g2;function y2(t,e=uu.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof t.bindings>"u"?r=p2(t,e):r=t.bindings().context||"",r}nr.getLoggerContext=y2;function m2(t,e,r=uu.PINO_CUSTOM_CONTEXT_KEY){let n=y2(t,r);return n.trim()?`${n}/${e}`:e}nr.formatChildLoggerContext=m2;function OH(t,e,r=uu.PINO_CUSTOM_CONTEXT_KEY){let n=m2(t,e,r),i=t.child({context:n});return g2(i,n,r)}nr.generateChildLogger=OH});var DE=v(cu=>{"use strict";c();Object.defineProperty(cu,"__esModule",{value:!0});cu.pino=void 0;var NE=(ar(),ot(or)),PH=NE.__importDefault(dd());Object.defineProperty(cu,"pino",{enumerable:!0,get:function(){return PH.default}});NE.__exportStar(xE(),cu);NE.__exportStar(w2(),cu)});var zE=v(Dt=>{"use strict";c();Object.defineProperty(Dt,"__esModule",{value:!0});var lu=(EE(),ot(wE)),E2=jn();function BH(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var RH=BH(E2),OE=class extends lu.IEvents{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},PE=class{constructor(e,r,n){this.core=e,this.logger=r}},BE=class extends lu.IEvents{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},RE=class{constructor(e,r){this.logger=e,this.core=r}},LE=class extends lu.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},FE=class extends lu.IEvents{constructor(e){super()}},ME=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},UE=class{constructor(){this.map=new Map}},qE=class extends lu.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},VE=class{constructor(e,r){this.core=e,this.logger=r}},HE=class extends lu.IEvents{constructor(e,r){super(),this.core=e,this.logger=r}},jE=class{constructor(e,r){this.logger=e,this.core=r}},GE=class extends RH.default{constructor(){super()}},QE=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},kE=class extends E2.EventEmitter{constructor(){super()}},KE=class{constructor(e){this.client=e}};Dt.ICore=OE,Dt.ICrypto=PE,Dt.IEngine=KE,Dt.IEngineEvents=kE,Dt.IExpirer=HE,Dt.IJsonRpcHistory=BE,Dt.IKeyChain=VE,Dt.IMessageTracker=RE,Dt.IPairing=jE,Dt.IPublisher=LE,Dt.IRelayer=FE,Dt.ISignClient=QE,Dt.ISignClientEvents=GE,Dt.IStore=ME,Dt.ISubscriber=qE,Dt.ISubscriberTopicMap=UE});var v2={};st(v2,{safeJsonParse:()=>Jc,safeJsonStringify:()=>Xc});function Jc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return FH(t)}catch{return t}}function Xc(t){return typeof t=="string"?t:LH(t)||""}var LH,FH,xd=ge(()=>{c();LH=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),FH=t=>{let e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)}});var _2=v(Nd=>{"use strict";c();Object.defineProperty(Nd,"__esModule",{value:!0});Nd.BrowserRandomSource=void 0;var A2=65536,WE=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=A2)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,A2)));return r}};Nd.BrowserRandomSource=WE});var Cr=v($E=>{"use strict";c();Object.defineProperty($E,"__esModule",{value:!0});function MH(t){for(var e=0;e<t.length;e++)t[e]=0;return t}$E.wipe=MH});var b2=v(()=>{c()});var I2=v(Dd=>{"use strict";c();Object.defineProperty(Dd,"__esModule",{value:!0});Dd.NodeRandomSource=void 0;var UH=Cr(),YE=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof P_<"u"){let e=b2();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,UH.wipe)(r),n}};Dd.NodeRandomSource=YE});var S2=v(Od=>{"use strict";c();Object.defineProperty(Od,"__esModule",{value:!0});Od.SystemRandomSource=void 0;var qH=_2(),VH=I2(),JE=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new qH.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new VH.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};Od.SystemRandomSource=JE});var C2=v(ur=>{"use strict";c();Object.defineProperty(ur,"__esModule",{value:!0});function HH(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}ur.mul=Math.imul||HH;function jH(t,e){return t+e|0}ur.add=jH;function GH(t,e){return t-e|0}ur.sub=GH;function QH(t,e){return t<<e|t>>>32-e}ur.rotl=QH;function kH(t,e){return t<<32-e|t>>>e}ur.rotr=kH;function KH(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}ur.isInteger=Number.isInteger||KH;ur.MAX_SAFE_INTEGER=9007199254740991;ur.isSafeInteger=function(t){return ur.isInteger(t)&&t>=-ur.MAX_SAFE_INTEGER&&t<=ur.MAX_SAFE_INTEGER}});var fu=v(Ne=>{"use strict";c();Object.defineProperty(Ne,"__esModule",{value:!0});var T2=C2();function zH(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ne.readInt16BE=zH;function WH(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ne.readUint16BE=WH;function $H(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ne.readInt16LE=$H;function YH(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ne.readUint16LE=YH;function x2(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ne.writeUint16BE=x2;Ne.writeInt16BE=x2;function N2(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ne.writeUint16LE=N2;Ne.writeInt16LE=N2;function XE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ne.readInt32BE=XE;function ZE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ne.readUint32BE=ZE;function e1(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ne.readInt32LE=e1;function t1(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ne.readUint32LE=t1;function Pd(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ne.writeUint32BE=Pd;Ne.writeInt32BE=Pd;function Bd(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ne.writeUint32LE=Bd;Ne.writeInt32LE=Bd;function JH(t,e){e===void 0&&(e=0);var r=XE(t,e),n=XE(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Ne.readInt64BE=JH;function XH(t,e){e===void 0&&(e=0);var r=ZE(t,e),n=ZE(t,e+4);return r*4294967296+n}Ne.readUint64BE=XH;function ZH(t,e){e===void 0&&(e=0);var r=e1(t,e),n=e1(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Ne.readInt64LE=ZH;function e7(t,e){e===void 0&&(e=0);var r=t1(t,e),n=t1(t,e+4);return n*4294967296+r}Ne.readUint64LE=e7;function D2(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Pd(t/4294967296>>>0,e,r),Pd(t>>>0,e,r+4),e}Ne.writeUint64BE=D2;Ne.writeInt64BE=D2;function O2(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Bd(t>>>0,e,r),Bd(t/4294967296>>>0,e,r+4),e}Ne.writeUint64LE=O2;Ne.writeInt64LE=O2;function t7(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Ne.readUintBE=t7;function r7(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Ne.readUintLE=r7;function n7(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!T2.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Ne.writeUintBE=n7;function i7(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!T2.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Ne.writeUintLE=i7;function s7(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ne.readFloat32BE=s7;function o7(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ne.readFloat32LE=o7;function a7(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ne.readFloat64BE=a7;function u7(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ne.readFloat64LE=u7;function c7(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Ne.writeFloat32BE=c7;function l7(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Ne.writeFloat32LE=l7;function f7(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Ne.writeFloat64BE=f7;function h7(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Ne.writeFloat64LE=h7});var Zc=v(Qt=>{"use strict";c();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.randomStringForEntropy=Qt.randomString=Qt.randomUint32=Qt.randomBytes=Qt.defaultRandomSource=void 0;var d7=S2(),p7=fu(),P2=Cr();Qt.defaultRandomSource=new d7.SystemRandomSource;function r1(t,e=Qt.defaultRandomSource){return e.randomBytes(t)}Qt.randomBytes=r1;function g7(t=Qt.defaultRandomSource){let e=r1(4,t),r=(0,p7.readUint32LE)(e);return(0,P2.wipe)(e),r}Qt.randomUint32=g7;var B2="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function R2(t,e=B2,r=Qt.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;t>0;){let o=r1(Math.ceil(t*256/s),r);for(let a=0;a<o.length&&t>0;a++){let u=o[a];u<s&&(n+=e.charAt(u%i),t--)}(0,P2.wipe)(o)}return n}Qt.randomString=R2;function y7(t,e=B2,r=Qt.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return R2(n,e,r)}Qt.randomStringForEntropy=y7});var M2=v(Qn=>{"use strict";c();Object.defineProperty(Qn,"__esModule",{value:!0});var du=fu(),hu=Cr();Qn.DIGEST_LENGTH=64;Qn.BLOCK_SIZE=128;var F2=function(){function t(){this.digestLength=Qn.DIGEST_LENGTH,this.blockSize=Qn.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){hu.wipe(this._buffer),hu.wipe(this._tempHi),hu.wipe(this._tempLo),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<Qn.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(n1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=n1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%128<112?128:256;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;du.writeUint32BE(i,this._buffer,o-8),du.writeUint32BE(s,this._buffer,o-4),n1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/8;a++)du.writeUint32BE(this._stateHi[a],e,a*8),du.writeUint32BE(this._stateLo[a],e,a*8+4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){hu.wipe(e.stateHi),hu.wipe(e.stateLo),e.buffer&&hu.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Qn.SHA512=F2;var L2=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function n1(t,e,r,n,i,s,o){for(var a=r[0],u=r[1],l=r[2],f=r[3],d=r[4],y=r[5],w=r[6],E=r[7],O=n[0],L=n[1],U=n[2],T=n[3],b=n[4],x=n[5],P=n[6],B=n[7],_,S,F,Z,K,j,G,$;o>=128;){for(var pe=0;pe<16;pe++){var ae=8*pe+s;t[pe]=du.readUint32BE(i,ae),e[pe]=du.readUint32BE(i,ae+4)}for(var pe=0;pe<80;pe++){var re=a,Y=u,ie=l,ee=f,ne=d,q=y,ce=w,oe=E,le=O,se=L,ue=U,g=T,m=b,A=x,D=P,I=B;if(_=E,S=B,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=(d>>>14|b<<32-14)^(d>>>18|b<<32-18)^(b>>>41-32|d<<32-(41-32)),S=(b>>>14|d<<32-14)^(b>>>18|d<<32-18)^(d>>>41-32|b<<32-(41-32)),K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,_=d&y^~d&w,S=b&x^~b&P,K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,_=L2[pe*2],S=L2[pe*2+1],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,_=t[pe%16],S=e[pe%16],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,F=G&65535|$<<16,Z=K&65535|j<<16,_=F,S=Z,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=(a>>>28|O<<32-28)^(O>>>34-32|a<<32-(34-32))^(O>>>39-32|a<<32-(39-32)),S=(O>>>28|a<<32-28)^(a>>>34-32|O<<32-(34-32))^(a>>>39-32|O<<32-(39-32)),K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,_=a&u^a&l^u&l,S=O&L^O&U^L&U,K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,oe=G&65535|$<<16,I=K&65535|j<<16,_=ee,S=g,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=F,S=Z,K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,ee=G&65535|$<<16,g=K&65535|j<<16,u=re,l=Y,f=ie,d=ee,y=ne,w=q,E=ce,a=oe,L=le,U=se,T=ue,b=g,x=m,P=A,B=D,O=I,pe%16===15)for(var ae=0;ae<16;ae++)_=t[ae],S=e[ae],K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=t[(ae+9)%16],S=e[(ae+9)%16],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,F=t[(ae+1)%16],Z=e[(ae+1)%16],_=(F>>>1|Z<<32-1)^(F>>>8|Z<<32-8)^F>>>7,S=(Z>>>1|F<<32-1)^(Z>>>8|F<<32-8)^(Z>>>7|F<<32-7),K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,F=t[(ae+14)%16],Z=e[(ae+14)%16],_=(F>>>19|Z<<32-19)^(Z>>>61-32|F<<32-(61-32))^F>>>6,S=(Z>>>19|F<<32-19)^(F>>>61-32|Z<<32-(61-32))^(Z>>>6|F<<32-6),K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,t[ae]=G&65535|$<<16,e[ae]=K&65535|j<<16}_=a,S=O,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[0],S=n[0],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[0]=a=G&65535|$<<16,n[0]=O=K&65535|j<<16,_=u,S=L,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[1],S=n[1],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[1]=u=G&65535|$<<16,n[1]=L=K&65535|j<<16,_=l,S=U,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[2],S=n[2],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[2]=l=G&65535|$<<16,n[2]=U=K&65535|j<<16,_=f,S=T,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[3],S=n[3],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[3]=f=G&65535|$<<16,n[3]=T=K&65535|j<<16,_=d,S=b,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[4],S=n[4],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[4]=d=G&65535|$<<16,n[4]=b=K&65535|j<<16,_=y,S=x,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[5],S=n[5],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[5]=y=G&65535|$<<16,n[5]=x=K&65535|j<<16,_=w,S=P,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[6],S=n[6],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[6]=w=G&65535|$<<16,n[6]=P=K&65535|j<<16,_=E,S=B,K=S&65535,j=S>>>16,G=_&65535,$=_>>>16,_=r[7],S=n[7],K+=S&65535,j+=S>>>16,G+=_&65535,$+=_>>>16,j+=K>>>16,G+=j>>>16,$+=G>>>16,r[7]=E=G&65535|$<<16,n[7]=B=K&65535|j<<16,s+=128,o-=128}return s}function m7(t){var e=new F2;e.update(t);var r=e.digest();return e.clean(),r}Qn.hash=m7});var J2=v(qe=>{"use strict";c();Object.defineProperty(qe,"__esModule",{value:!0});qe.convertSecretKeyToX25519=qe.convertPublicKeyToX25519=qe.verify=qe.sign=qe.extractPublicKeyFromSecretKey=qe.generateKeyPair=qe.generateKeyPairFromSeed=qe.SEED_LENGTH=qe.SECRET_KEY_LENGTH=qe.PUBLIC_KEY_LENGTH=qe.SIGNATURE_LENGTH=void 0;var w7=Zc(),el=M2(),j2=Cr();qe.SIGNATURE_LENGTH=64;qe.PUBLIC_KEY_LENGTH=32;qe.SECRET_KEY_LENGTH=64;qe.SEED_LENGTH=32;function Ee(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var E7=new Uint8Array(32);E7[0]=9;var o1=Ee(),pu=Ee([1]),v7=Ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A7=Ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),U2=Ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),q2=Ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_7=Ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Pi(t,e){for(let r=0;r<16;r++)t[r]=e[r]|0}function i1(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function G2(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function tl(t,e){let r=Ee(),n=Ee();for(let i=0;i<16;i++)n[i]=e[i];i1(n),i1(n),i1(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,G2(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function Q2(t,e){let r=0;for(let n=0;n<32;n++)r|=t[n]^e[n];return(1&r-1>>>8)-1}function V2(t,e){let r=new Uint8Array(32),n=new Uint8Array(32);return tl(r,t),tl(n,e),Q2(r,n)}function k2(t){let e=new Uint8Array(32);return tl(e,t),e[0]&1}function b7(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function to(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function no(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function Ge(t,e,r){let n,i,s=0,o=0,a=0,u=0,l=0,f=0,d=0,y=0,w=0,E=0,O=0,L=0,U=0,T=0,b=0,x=0,P=0,B=0,_=0,S=0,F=0,Z=0,K=0,j=0,G=0,$=0,pe=0,ae=0,re=0,Y=0,ie=0,ee=r[0],ne=r[1],q=r[2],ce=r[3],oe=r[4],le=r[5],se=r[6],ue=r[7],g=r[8],m=r[9],A=r[10],D=r[11],I=r[12],N=r[13],R=r[14],C=r[15];n=e[0],s+=n*ee,o+=n*ne,a+=n*q,u+=n*ce,l+=n*oe,f+=n*le,d+=n*se,y+=n*ue,w+=n*g,E+=n*m,O+=n*A,L+=n*D,U+=n*I,T+=n*N,b+=n*R,x+=n*C,n=e[1],o+=n*ee,a+=n*ne,u+=n*q,l+=n*ce,f+=n*oe,d+=n*le,y+=n*se,w+=n*ue,E+=n*g,O+=n*m,L+=n*A,U+=n*D,T+=n*I,b+=n*N,x+=n*R,P+=n*C,n=e[2],a+=n*ee,u+=n*ne,l+=n*q,f+=n*ce,d+=n*oe,y+=n*le,w+=n*se,E+=n*ue,O+=n*g,L+=n*m,U+=n*A,T+=n*D,b+=n*I,x+=n*N,P+=n*R,B+=n*C,n=e[3],u+=n*ee,l+=n*ne,f+=n*q,d+=n*ce,y+=n*oe,w+=n*le,E+=n*se,O+=n*ue,L+=n*g,U+=n*m,T+=n*A,b+=n*D,x+=n*I,P+=n*N,B+=n*R,_+=n*C,n=e[4],l+=n*ee,f+=n*ne,d+=n*q,y+=n*ce,w+=n*oe,E+=n*le,O+=n*se,L+=n*ue,U+=n*g,T+=n*m,b+=n*A,x+=n*D,P+=n*I,B+=n*N,_+=n*R,S+=n*C,n=e[5],f+=n*ee,d+=n*ne,y+=n*q,w+=n*ce,E+=n*oe,O+=n*le,L+=n*se,U+=n*ue,T+=n*g,b+=n*m,x+=n*A,P+=n*D,B+=n*I,_+=n*N,S+=n*R,F+=n*C,n=e[6],d+=n*ee,y+=n*ne,w+=n*q,E+=n*ce,O+=n*oe,L+=n*le,U+=n*se,T+=n*ue,b+=n*g,x+=n*m,P+=n*A,B+=n*D,_+=n*I,S+=n*N,F+=n*R,Z+=n*C,n=e[7],y+=n*ee,w+=n*ne,E+=n*q,O+=n*ce,L+=n*oe,U+=n*le,T+=n*se,b+=n*ue,x+=n*g,P+=n*m,B+=n*A,_+=n*D,S+=n*I,F+=n*N,Z+=n*R,K+=n*C,n=e[8],w+=n*ee,E+=n*ne,O+=n*q,L+=n*ce,U+=n*oe,T+=n*le,b+=n*se,x+=n*ue,P+=n*g,B+=n*m,_+=n*A,S+=n*D,F+=n*I,Z+=n*N,K+=n*R,j+=n*C,n=e[9],E+=n*ee,O+=n*ne,L+=n*q,U+=n*ce,T+=n*oe,b+=n*le,x+=n*se,P+=n*ue,B+=n*g,_+=n*m,S+=n*A,F+=n*D,Z+=n*I,K+=n*N,j+=n*R,G+=n*C,n=e[10],O+=n*ee,L+=n*ne,U+=n*q,T+=n*ce,b+=n*oe,x+=n*le,P+=n*se,B+=n*ue,_+=n*g,S+=n*m,F+=n*A,Z+=n*D,K+=n*I,j+=n*N,G+=n*R,$+=n*C,n=e[11],L+=n*ee,U+=n*ne,T+=n*q,b+=n*ce,x+=n*oe,P+=n*le,B+=n*se,_+=n*ue,S+=n*g,F+=n*m,Z+=n*A,K+=n*D,j+=n*I,G+=n*N,$+=n*R,pe+=n*C,n=e[12],U+=n*ee,T+=n*ne,b+=n*q,x+=n*ce,P+=n*oe,B+=n*le,_+=n*se,S+=n*ue,F+=n*g,Z+=n*m,K+=n*A,j+=n*D,G+=n*I,$+=n*N,pe+=n*R,ae+=n*C,n=e[13],T+=n*ee,b+=n*ne,x+=n*q,P+=n*ce,B+=n*oe,_+=n*le,S+=n*se,F+=n*ue,Z+=n*g,K+=n*m,j+=n*A,G+=n*D,$+=n*I,pe+=n*N,ae+=n*R,re+=n*C,n=e[14],b+=n*ee,x+=n*ne,P+=n*q,B+=n*ce,_+=n*oe,S+=n*le,F+=n*se,Z+=n*ue,K+=n*g,j+=n*m,G+=n*A,$+=n*D,pe+=n*I,ae+=n*N,re+=n*R,Y+=n*C,n=e[15],x+=n*ee,P+=n*ne,B+=n*q,_+=n*ce,S+=n*oe,F+=n*le,Z+=n*se,K+=n*ue,j+=n*g,G+=n*m,$+=n*A,pe+=n*D,ae+=n*I,re+=n*N,Y+=n*R,ie+=n*C,s+=38*P,o+=38*B,a+=38*_,u+=38*S,l+=38*F,f+=38*Z,d+=38*K,y+=38*j,w+=38*G,E+=38*$,O+=38*pe,L+=38*ae,U+=38*re,T+=38*Y,b+=38*ie,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=u,t[4]=l,t[5]=f,t[6]=d,t[7]=y,t[8]=w,t[9]=E,t[10]=O,t[11]=L,t[12]=U,t[13]=T,t[14]=b,t[15]=x}function ro(t,e){Ge(t,e,e)}function K2(t,e){let r=Ee(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)ro(r,r),n!==2&&n!==4&&Ge(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function I7(t,e){let r=Ee(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)ro(r,r),n!==1&&Ge(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function a1(t,e){let r=Ee(),n=Ee(),i=Ee(),s=Ee(),o=Ee(),a=Ee(),u=Ee(),l=Ee(),f=Ee();no(r,t[1],t[0]),no(f,e[1],e[0]),Ge(r,r,f),to(n,t[0],t[1]),to(f,e[0],e[1]),Ge(n,n,f),Ge(i,t[3],e[3]),Ge(i,i,A7),Ge(s,t[2],e[2]),to(s,s,s),no(o,n,r),no(a,s,i),to(u,s,i),to(l,n,r),Ge(t[0],o,a),Ge(t[1],l,u),Ge(t[2],u,a),Ge(t[3],o,l)}function H2(t,e,r){for(let n=0;n<4;n++)G2(t[n],e[n],r)}function c1(t,e){let r=Ee(),n=Ee(),i=Ee();K2(i,e[2]),Ge(r,e[0],i),Ge(n,e[1],i),tl(t,n),t[31]^=k2(r)<<7}function z2(t,e,r){Pi(t[0],o1),Pi(t[1],pu),Pi(t[2],pu),Pi(t[3],o1);for(let n=255;n>=0;--n){let i=r[n/8|0]>>(n&7)&1;H2(t,e,i),a1(e,t),a1(t,t),H2(t,e,i)}}function l1(t,e){let r=[Ee(),Ee(),Ee(),Ee()];Pi(r[0],U2),Pi(r[1],q2),Pi(r[2],pu),Ge(r[3],U2,q2),z2(t,r,e)}function W2(t){if(t.length!==qe.SEED_LENGTH)throw new Error(`ed25519: seed must be ${qe.SEED_LENGTH} bytes`);let e=(0,el.hash)(t);e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(32),n=[Ee(),Ee(),Ee(),Ee()];l1(n,e),c1(r,n);let i=new Uint8Array(64);return i.set(t),i.set(r,32),{publicKey:r,secretKey:i}}qe.generateKeyPairFromSeed=W2;function S7(t){let e=(0,w7.randomBytes)(32,t),r=W2(e);return(0,j2.wipe)(e),r}qe.generateKeyPair=S7;function C7(t){if(t.length!==qe.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${qe.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}qe.extractPublicKeyFromSecretKey=C7;var s1=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $2(t,e){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*s1[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*s1[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*s1[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function u1(t){let e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let r=0;r<64;r++)t[r]=0;$2(t,e)}function T7(t,e){let r=new Float64Array(64),n=[Ee(),Ee(),Ee(),Ee()],i=(0,el.hash)(t.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;let s=new Uint8Array(64);s.set(i.subarray(32),32);let o=new el.SHA512;o.update(s.subarray(32)),o.update(e);let a=o.digest();o.clean(),u1(a),l1(n,a),c1(s,n),o.reset(),o.update(s.subarray(0,32)),o.update(t.subarray(32)),o.update(e);let u=o.digest();u1(u);for(let l=0;l<32;l++)r[l]=a[l];for(let l=0;l<32;l++)for(let f=0;f<32;f++)r[l+f]+=u[l]*i[f];return $2(s.subarray(32),r),s}qe.sign=T7;function Y2(t,e){let r=Ee(),n=Ee(),i=Ee(),s=Ee(),o=Ee(),a=Ee(),u=Ee();return Pi(t[2],pu),b7(t[1],e),ro(i,t[1]),Ge(s,i,v7),no(i,i,t[2]),to(s,t[2],s),ro(o,s),ro(a,o),Ge(u,a,o),Ge(r,u,i),Ge(r,r,s),I7(r,r),Ge(r,r,i),Ge(r,r,s),Ge(r,r,s),Ge(t[0],r,s),ro(n,t[0]),Ge(n,n,s),V2(n,i)&&Ge(t[0],t[0],_7),ro(n,t[0]),Ge(n,n,s),V2(n,i)?-1:(k2(t[0])===e[31]>>7&&no(t[0],o1,t[0]),Ge(t[3],t[0],t[1]),0)}function x7(t,e,r){let n=new Uint8Array(32),i=[Ee(),Ee(),Ee(),Ee()],s=[Ee(),Ee(),Ee(),Ee()];if(r.length!==qe.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${qe.SIGNATURE_LENGTH} bytes`);if(Y2(s,t))return!1;let o=new el.SHA512;o.update(r.subarray(0,32)),o.update(t),o.update(e);let a=o.digest();return u1(a),z2(i,s,a),l1(s,r.subarray(32)),a1(i,s),c1(n,i),!Q2(r,n)}qe.verify=x7;function N7(t){let e=[Ee(),Ee(),Ee(),Ee()];if(Y2(e,t))throw new Error("Ed25519: invalid public key");let r=Ee(),n=Ee(),i=e[1];to(r,pu,i),no(n,pu,i),K2(n,n),Ge(r,r,n);let s=new Uint8Array(32);return tl(s,r),s}qe.convertPublicKeyToX25519=N7;function D7(t){let e=(0,el.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(e.subarray(0,32));return(0,j2.wipe)(e),r}qe.convertSecretKeyToX25519=D7});var Rd,Ld,io,gu,Fd,rl,Md,Ud,qd,yu,Vd,Hd,X2,Z2,jd=ge(()=>{c();Rd="EdDSA",Ld="JWT",io=".",gu="base64url",Fd="utf8",rl="utf8",Md=":",Ud="did",qd="key",yu="base58btc",Vd="z",Hd="K36",X2=32,Z2=32});function Bi(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var nl=ge(()=>{c()});function mu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Bi(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var Gd=ge(()=>{c();nl()});function Qd(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=mu(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Bi(r)}var f1=ge(()=>{c();Gd();nl()});function O7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function d(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var O=0,L=0,U=0,T=E.length;U!==T&&E[U]===0;)U++,O++;for(var b=(T-U)*f+1>>>0,x=new Uint8Array(b);U!==T;){for(var P=E[U],B=0,_=b-1;(P!==0||B<L)&&_!==-1;_--,B++)P+=256*x[_]>>>0,x[_]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");L=B,U++}for(var S=b-L;S!==b&&x[S]===0;)S++;for(var F=u.repeat(O);S<b;++S)F+=t.charAt(x[S]);return F}function y(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var O=0;if(E[O]!==" "){for(var L=0,U=0;E[O]===u;)L++,O++;for(var T=(E.length-O)*l+1>>>0,b=new Uint8Array(T);E[O];){var x=r[E.charCodeAt(O)];if(x===255)return;for(var P=0,B=T-1;(x!==0||P<U)&&B!==-1;B--,P++)x+=a*b[B]>>>0,b[B]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");U=P,O++}if(E[O]!==" "){for(var _=T-U;_!==T&&b[_]===0;)_++;for(var S=new Uint8Array(L+(T-_)),F=L;_!==T;)S[F++]=b[_++];return S}}}function w(E){var O=y(E);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:y,decode:w}}var P7,B7,eN,tN=ge(()=>{c();P7=O7,B7=P7,eN=B7});var mse,rN,kn,nN,iN,Ri=ge(()=>{c();mse=new Uint8Array(0),rN=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},kn=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nN=t=>new TextEncoder().encode(t),iN=t=>new TextDecoder().decode(t)});var h1,d1,p1,oN,g1,wu,Li,R7,L7,ut,Ur=ge(()=>{c();tN();Ri();h1=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},d1=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return oN(this,e)}},p1=class{constructor(e){this.decoders=e}or(e){return oN(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},oN=(t,e)=>new p1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),g1=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new h1(e,r,n),this.decoder=new d1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},wu=({name:t,prefix:e,encode:r,decode:n})=>new g1(t,e,r,n),Li=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=eN(r,e);return wu({prefix:t,name:e,encode:n,decode:s=>kn(i(s))})},R7=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,l=0;for(let f=0;f<s;++f){let d=i[t[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},L7=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ut=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>wu({prefix:e,name:t,encode(i){return L7(i,n,r)},decode(i){return R7(i,n,r,t)}})});var y1={};st(y1,{identity:()=>F7});var F7,aN=ge(()=>{c();Ur();Ri();F7=wu({prefix:"\0",name:"identity",encode:t=>iN(t),decode:t=>nN(t)})});var m1={};st(m1,{base2:()=>M7});var M7,uN=ge(()=>{c();Ur();M7=ut({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var w1={};st(w1,{base8:()=>U7});var U7,cN=ge(()=>{c();Ur();U7=ut({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var E1={};st(E1,{base10:()=>q7});var q7,lN=ge(()=>{c();Ur();q7=Li({prefix:"9",name:"base10",alphabet:"0123456789"})});var v1={};st(v1,{base16:()=>V7,base16upper:()=>H7});var V7,H7,fN=ge(()=>{c();Ur();V7=ut({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),H7=ut({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var A1={};st(A1,{base32:()=>Eu,base32hex:()=>k7,base32hexpad:()=>z7,base32hexpadupper:()=>W7,base32hexupper:()=>K7,base32pad:()=>G7,base32padupper:()=>Q7,base32upper:()=>j7,base32z:()=>$7});var Eu,j7,G7,Q7,k7,K7,z7,W7,$7,_1=ge(()=>{c();Ur();Eu=ut({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j7=ut({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),G7=ut({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Q7=ut({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),k7=ut({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K7=ut({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),z7=ut({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),W7=ut({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$7=ut({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var b1={};st(b1,{base36:()=>Y7,base36upper:()=>J7});var Y7,J7,hN=ge(()=>{c();Ur();Y7=Li({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),J7=Li({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var I1={};st(I1,{base58btc:()=>wn,base58flickr:()=>X7});var wn,X7,S1=ge(()=>{c();Ur();wn=Li({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X7=Li({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var C1={};st(C1,{base64:()=>Z7,base64pad:()=>ej,base64url:()=>tj,base64urlpad:()=>rj});var Z7,ej,tj,rj,dN=ge(()=>{c();Ur();Z7=ut({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ej=ut({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tj=ut({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rj=ut({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var T1={};st(T1,{base256emoji:()=>aj});function sj(t){return t.reduce((e,r)=>(e+=nj[r],e),"")}function oj(t){let e=[];for(let r of t){let n=ij[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var pN,nj,ij,aj,gN=ge(()=>{c();Ur();pN=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),nj=pN.reduce((t,e,r)=>(t[r]=e,t),[]),ij=pN.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);aj=wu({prefix:"\u{1F680}",name:"base256emoji",encode:sj,decode:oj})});function wN(t,e,r){e=e||[],r=r||0;for(var n=r;t>=fj;)e[r++]=t&255|yN,t/=128;for(;t&lj;)e[r++]=t&255|yN,t>>>=7;return e[r]=t|0,wN.bytes=r-n+1,e}function x1(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw x1.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&mN)<<i:(o&mN)*Math.pow(2,i),i+=7}while(o>=dj);return x1.bytes=s-n,r}var uj,yN,cj,lj,fj,hj,dj,mN,pj,gj,yj,mj,wj,Ej,vj,Aj,_j,bj,Ij,Sj,il,EN=ge(()=>{c();uj=wN,yN=128,cj=127,lj=~cj,fj=Math.pow(2,31);hj=x1,dj=128,mN=127;pj=Math.pow(2,7),gj=Math.pow(2,14),yj=Math.pow(2,21),mj=Math.pow(2,28),wj=Math.pow(2,35),Ej=Math.pow(2,42),vj=Math.pow(2,49),Aj=Math.pow(2,56),_j=Math.pow(2,63),bj=function(t){return t<pj?1:t<gj?2:t<yj?3:t<mj?4:t<wj?5:t<Ej?6:t<vj?7:t<Aj?8:t<_j?9:10},Ij={encode:uj,decode:hj,encodingLength:bj},Sj=Ij,il=Sj});var sl,vu,Au,Kd=ge(()=>{c();EN();sl=(t,e=0)=>[il.decode(t,e),il.decode.bytes],vu=(t,e,r=0)=>(il.encode(t,e,r),e),Au=t=>il.encodingLength(t)});var so,vN,AN,_u,al=ge(()=>{c();Ri();Kd();so=(t,e)=>{let r=e.byteLength,n=Au(t),i=n+Au(r),s=new Uint8Array(i+r);return vu(t,s,0),vu(r,s,n),s.set(e,i),new _u(t,r,e,s)},vN=t=>{let e=kn(t),[r,n]=sl(e),[i,s]=sl(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new _u(r,i,o,e)},AN=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&rN(t.bytes,e.bytes),_u=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var D1,N1,O1=ge(()=>{c();al();D1=({name:t,code:e,encode:r})=>new N1(t,e,r),N1=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?so(this.code,r):r.then(n=>so(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var P1={};st(P1,{sha256:()=>Cj,sha512:()=>Tj});var bN,Cj,Tj,IN=ge(()=>{c();O1();bN=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Cj=D1({name:"sha2-256",code:18,encode:bN("SHA-256")}),Tj=D1({name:"sha2-512",code:19,encode:bN("SHA-512")})});var B1={};st(B1,{identity:()=>Dj});var SN,xj,CN,Nj,Dj,TN=ge(()=>{c();Ri();al();SN=0,xj="identity",CN=kn,Nj=t=>so(SN,CN(t)),Dj={code:SN,name:xj,encode:CN,digest:Nj}});var xN=ge(()=>{c();Ri()});var noe,ioe,NN=ge(()=>{c();noe=new TextEncoder,ioe=new TextDecoder});var It,Bj,Rj,Lj,ul,Fj,DN,ON,zd,Wd,Mj,Uj,qj,PN=ge(()=>{c();Kd();al();S1();_1();Ri();It=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Wd,byteLength:Wd,code:zd,version:zd,multihash:zd,bytes:zd,_baseCache:Wd,asCID:Wd})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==ul)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Fj)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return It.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=so(e,r);return It.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&AN(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Rj(r,i,e||wn.encoder);default:return Lj(r,i,e||Eu.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Uj(/^0\.0/,qj),!!(e&&(e[ON]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof It)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new It(r,n,i,s||DN(r,n,i.bytes))}else if(e!=null&&e[ON]===!0){let{version:r,multihash:n,code:i}=e,s=vN(n);return It.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==ul)throw new Error(`Version 0 CID must use dag-pb (code: ${ul}) block encoding`);return new It(e,r,n,n.bytes)}case 1:{let i=DN(e,r,n.bytes);return new It(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return It.create(0,ul,e)}static createV1(e,r){return It.create(1,e,r)}static decode(e){let[r,n]=It.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=It.inspectBytes(e),n=r.size-r.multihashSize,i=kn(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new _u(r.multihashCode,r.digestSize,s,i);return[r.version===0?It.createV0(o):It.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,y]=sl(e.subarray(r));return r+=y,d},i=n(),s=ul;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),l=r+u,f=l-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:l}}static parse(e,r){let[n,i]=Bj(e,r),s=It.decode(i);return s._baseCache.set(n,e),s}},Bj=(t,e)=>{switch(t[0]){case"Q":{let r=e||wn;return[wn.prefix,r.decode(`${wn.prefix}${t}`)]}case wn.prefix:{let r=e||wn;return[wn.prefix,r.decode(t)]}case Eu.prefix:{let r=e||Eu;return[Eu.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Rj=(t,e,r)=>{let{prefix:n}=r;if(n!==wn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Lj=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},ul=112,Fj=18,DN=(t,e,r)=>{let n=Au(t),i=n+Au(e),s=new Uint8Array(i+r.byteLength);return vu(t,s,0),vu(e,s,n),s.set(r,i),s},ON=Symbol.for("@ipld/js-cid/CID"),zd={writable:!1,configurable:!1,enumerable:!0},Wd={writable:!1,enumerable:!1,configurable:!1},Mj="0.0.0-dev",Uj=(t,e)=>{if(t.test(Mj))console.warn(e);else throw new Error(e)},qj=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var BN=ge(()=>{c();PN();Kd();Ri();O1();al()});var R1,goe,RN=ge(()=>{c();aN();uN();cN();lN();fN();_1();hN();S1();dN();gN();IN();TN();xN();NN();BN();R1={...y1,...m1,...w1,...E1,...v1,...A1,...b1,...I1,...C1,...T1},goe={...P1,...B1}});function FN(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var LN,L1,Vj,$d,F1=ge(()=>{c();RN();Gd();LN=FN("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),L1=FN("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=mu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Vj={utf8:LN,"utf-8":LN,hex:R1.base16,latin1:L1,ascii:L1,binary:L1,...R1},$d=Vj});function Kn(t,e="utf8"){let r=$d[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var M1=ge(()=>{c();F1()});function En(t,e="utf8"){let r=$d[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Bi(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var U1=ge(()=>{c();F1();nl()});function cl(t){return Jc(Kn(En(t,gu),Fd))}function ll(t){return Kn(En(Xc(t),Fd),gu)}function q1(t){let e=En(Hd,yu),r=Vd+Kn(Qd([e,t]),yu);return[Ud,qd,r].join(Md)}function V1(t){let[e,r,n]=t.split(Md);if(e!==Ud||r!==qd)throw new Error('Issuer must be a DID with method "key"');if(n.slice(0,1)!==Vd)throw new Error("Issuer must be a key in mulicodec format");let s=En(n.slice(1),yu);if(Kn(s.slice(0,2),yu)!==Hd)throw new Error('Issuer must be a public key with type "Ed25519"');let a=s.slice(2);if(a.length!==32)throw new Error("Issuer must be a public key with length 32 bytes");return a}function MN(t){return Kn(t,gu)}function UN(t){return En(t,gu)}function H1(t){return En([ll(t.header),ll(t.payload)].join(io),rl)}function Hj(t){let e=Kn(t,rl).split(io),r=cl(e[0]),n=cl(e[1]);return{header:r,payload:n}}function j1(t){return[ll(t.header),ll(t.payload),MN(t.signature)].join(io)}function G1(t){let e=t.split(io),r=cl(e[0]),n=cl(e[1]),i=UN(e[2]),s=En(e.slice(0,2).join(io),rl);return{header:r,payload:n,signature:i,data:s}}var Q1=ge(()=>{c();f1();M1();U1();xd();jd()});function jj(t=(0,qN.randomBytes)(32)){return bu.generateKeyPairFromSeed(t)}async function Gj(t,e,r,n,i=(0,VN.fromMiliseconds)(Date.now())){let s={alg:Rd,typ:Ld},o=q1(n.publicKey),a=i+r,u={iss:o,sub:t,aud:e,iat:i,exp:a},l=H1({header:s,payload:u}),f=bu.sign(n.secretKey,l);return j1({header:s,payload:u,signature:f})}async function Qj(t){let{header:e,payload:r,data:n,signature:i}=G1(t);if(e.alg!==Rd||e.typ!==Ld)throw new Error("JWT must use EdDSA algorithm");let s=V1(r.iss);return bu.verify(s,n,i)}var bu,qN,VN,HN=ge(()=>{c();bu=_e(J2()),qN=_e(Zc()),VN=_e(eo());jd();Q1()});var jN=ge(()=>{c()});var GN={};st(GN,{DATA_ENCODING:()=>rl,DID_DELIMITER:()=>Md,DID_METHOD:()=>qd,DID_PREFIX:()=>Ud,JSON_ENCODING:()=>Fd,JWT_DELIMITER:()=>io,JWT_ENCODING:()=>gu,JWT_IRIDIUM_ALG:()=>Rd,JWT_IRIDIUM_TYP:()=>Ld,KEY_PAIR_SEED_LENGTH:()=>Z2,MULTICODEC_ED25519_BASE:()=>Vd,MULTICODEC_ED25519_ENCODING:()=>yu,MULTICODEC_ED25519_HEADER:()=>Hd,MULTICODEC_ED25519_LENGTH:()=>X2,decodeData:()=>Hj,decodeIss:()=>V1,decodeJSON:()=>cl,decodeJWT:()=>G1,decodeSig:()=>UN,encodeData:()=>H1,encodeIss:()=>q1,encodeJSON:()=>ll,encodeJWT:()=>j1,encodeSig:()=>MN,generateKeyPair:()=>jj,signJWT:()=>Gj,verifyJWT:()=>Qj});var QN=ge(()=>{c();HN();jd();jN();Q1()});var KN=v(Yd=>{"use strict";c();Object.defineProperty(Yd,"__esModule",{value:!0});var kt=fu(),k1=Cr(),kj=20;function Kj(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],w=r[27]<<24|r[26]<<16|r[25]<<8|r[24],E=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=e[3]<<24|e[2]<<16|e[1]<<8|e[0],L=e[7]<<24|e[6]<<16|e[5]<<8|e[4],U=e[11]<<24|e[10]<<16|e[9]<<8|e[8],T=e[15]<<24|e[14]<<16|e[13]<<8|e[12],b=n,x=i,P=s,B=o,_=a,S=u,F=l,Z=f,K=d,j=y,G=w,$=E,pe=O,ae=L,re=U,Y=T,ie=0;ie<kj;ie+=2)b=b+_|0,pe^=b,pe=pe>>>32-16|pe<<16,K=K+pe|0,_^=K,_=_>>>32-12|_<<12,x=x+S|0,ae^=x,ae=ae>>>32-16|ae<<16,j=j+ae|0,S^=j,S=S>>>32-12|S<<12,P=P+F|0,re^=P,re=re>>>32-16|re<<16,G=G+re|0,F^=G,F=F>>>32-12|F<<12,B=B+Z|0,Y^=B,Y=Y>>>32-16|Y<<16,$=$+Y|0,Z^=$,Z=Z>>>32-12|Z<<12,P=P+F|0,re^=P,re=re>>>32-8|re<<8,G=G+re|0,F^=G,F=F>>>32-7|F<<7,B=B+Z|0,Y^=B,Y=Y>>>32-8|Y<<8,$=$+Y|0,Z^=$,Z=Z>>>32-7|Z<<7,x=x+S|0,ae^=x,ae=ae>>>32-8|ae<<8,j=j+ae|0,S^=j,S=S>>>32-7|S<<7,b=b+_|0,pe^=b,pe=pe>>>32-8|pe<<8,K=K+pe|0,_^=K,_=_>>>32-7|_<<7,b=b+S|0,Y^=b,Y=Y>>>32-16|Y<<16,G=G+Y|0,S^=G,S=S>>>32-12|S<<12,x=x+F|0,pe^=x,pe=pe>>>32-16|pe<<16,$=$+pe|0,F^=$,F=F>>>32-12|F<<12,P=P+Z|0,ae^=P,ae=ae>>>32-16|ae<<16,K=K+ae|0,Z^=K,Z=Z>>>32-12|Z<<12,B=B+_|0,re^=B,re=re>>>32-16|re<<16,j=j+re|0,_^=j,_=_>>>32-12|_<<12,P=P+Z|0,ae^=P,ae=ae>>>32-8|ae<<8,K=K+ae|0,Z^=K,Z=Z>>>32-7|Z<<7,B=B+_|0,re^=B,re=re>>>32-8|re<<8,j=j+re|0,_^=j,_=_>>>32-7|_<<7,x=x+F|0,pe^=x,pe=pe>>>32-8|pe<<8,$=$+pe|0,F^=$,F=F>>>32-7|F<<7,b=b+S|0,Y^=b,Y=Y>>>32-8|Y<<8,G=G+Y|0,S^=G,S=S>>>32-7|S<<7;kt.writeUint32LE(b+n|0,t,0),kt.writeUint32LE(x+i|0,t,4),kt.writeUint32LE(P+s|0,t,8),kt.writeUint32LE(B+o|0,t,12),kt.writeUint32LE(_+a|0,t,16),kt.writeUint32LE(S+u|0,t,20),kt.writeUint32LE(F+l|0,t,24),kt.writeUint32LE(Z+f|0,t,28),kt.writeUint32LE(K+d|0,t,32),kt.writeUint32LE(j+y|0,t,36),kt.writeUint32LE(G+w|0,t,40),kt.writeUint32LE($+E|0,t,44),kt.writeUint32LE(pe+O|0,t,48),kt.writeUint32LE(ae+L|0,t,52),kt.writeUint32LE(re+U|0,t,56),kt.writeUint32LE(Y+T|0,t,60)}function kN(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),u=0;u<r.length;u+=64){Kj(a,s,t);for(var l=u;l<u+64&&l<r.length;l++)n[l]=r[l]^a[l-u];Wj(s,0,o)}return k1.wipe(a),i===0&&k1.wipe(s),n}Yd.streamXOR=kN;function zj(t,e,r,n){return n===void 0&&(n=0),k1.wipe(r),kN(t,e,r,r,n)}Yd.stream=zj;function Wj(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var Jd=v(Iu=>{"use strict";c();Object.defineProperty(Iu,"__esModule",{value:!0});function $j(t,e,r){return~(t-1)&e|t-1&r}Iu.select=$j;function Yj(t,e){return(t|0)-(e|0)-1>>>31&1}Iu.lessOrEqual=Yj;function zN(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Iu.compare=zN;function Jj(t,e){return t.length===0||e.length===0?!1:zN(t,e)!==0}Iu.equal=Jj});var $N=v(zn=>{"use strict";c();Object.defineProperty(zn,"__esModule",{value:!0});var Xj=Jd(),Xd=Cr();zn.DIGEST_LENGTH=16;var WN=function(){function t(e){this.digestLength=zn.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var u=e[12]|e[13]<<8;this._r[7]=(a>>>11|u<<5)&8065;var l=e[14]|e[15]<<8;this._r[8]=(u>>>8|l<<8)&8191,this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,s=this._h[0],o=this._h[1],a=this._h[2],u=this._h[3],l=this._h[4],f=this._h[5],d=this._h[6],y=this._h[7],w=this._h[8],E=this._h[9],O=this._r[0],L=this._r[1],U=this._r[2],T=this._r[3],b=this._r[4],x=this._r[5],P=this._r[6],B=this._r[7],_=this._r[8],S=this._r[9];n>=16;){var F=e[r+0]|e[r+1]<<8;s+=F&8191;var Z=e[r+2]|e[r+3]<<8;o+=(F>>>13|Z<<3)&8191;var K=e[r+4]|e[r+5]<<8;a+=(Z>>>10|K<<6)&8191;var j=e[r+6]|e[r+7]<<8;u+=(K>>>7|j<<9)&8191;var G=e[r+8]|e[r+9]<<8;l+=(j>>>4|G<<12)&8191,f+=G>>>1&8191;var $=e[r+10]|e[r+11]<<8;d+=(G>>>14|$<<2)&8191;var pe=e[r+12]|e[r+13]<<8;y+=($>>>11|pe<<5)&8191;var ae=e[r+14]|e[r+15]<<8;w+=(pe>>>8|ae<<8)&8191,E+=ae>>>5|i;var re=0,Y=re;Y+=s*O,Y+=o*(5*S),Y+=a*(5*_),Y+=u*(5*B),Y+=l*(5*P),re=Y>>>13,Y&=8191,Y+=f*(5*x),Y+=d*(5*b),Y+=y*(5*T),Y+=w*(5*U),Y+=E*(5*L),re+=Y>>>13,Y&=8191;var ie=re;ie+=s*L,ie+=o*O,ie+=a*(5*S),ie+=u*(5*_),ie+=l*(5*B),re=ie>>>13,ie&=8191,ie+=f*(5*P),ie+=d*(5*x),ie+=y*(5*b),ie+=w*(5*T),ie+=E*(5*U),re+=ie>>>13,ie&=8191;var ee=re;ee+=s*U,ee+=o*L,ee+=a*O,ee+=u*(5*S),ee+=l*(5*_),re=ee>>>13,ee&=8191,ee+=f*(5*B),ee+=d*(5*P),ee+=y*(5*x),ee+=w*(5*b),ee+=E*(5*T),re+=ee>>>13,ee&=8191;var ne=re;ne+=s*T,ne+=o*U,ne+=a*L,ne+=u*O,ne+=l*(5*S),re=ne>>>13,ne&=8191,ne+=f*(5*_),ne+=d*(5*B),ne+=y*(5*P),ne+=w*(5*x),ne+=E*(5*b),re+=ne>>>13,ne&=8191;var q=re;q+=s*b,q+=o*T,q+=a*U,q+=u*L,q+=l*O,re=q>>>13,q&=8191,q+=f*(5*S),q+=d*(5*_),q+=y*(5*B),q+=w*(5*P),q+=E*(5*x),re+=q>>>13,q&=8191;var ce=re;ce+=s*x,ce+=o*b,ce+=a*T,ce+=u*U,ce+=l*L,re=ce>>>13,ce&=8191,ce+=f*O,ce+=d*(5*S),ce+=y*(5*_),ce+=w*(5*B),ce+=E*(5*P),re+=ce>>>13,ce&=8191;var oe=re;oe+=s*P,oe+=o*x,oe+=a*b,oe+=u*T,oe+=l*U,re=oe>>>13,oe&=8191,oe+=f*L,oe+=d*O,oe+=y*(5*S),oe+=w*(5*_),oe+=E*(5*B),re+=oe>>>13,oe&=8191;var le=re;le+=s*B,le+=o*P,le+=a*x,le+=u*b,le+=l*T,re=le>>>13,le&=8191,le+=f*U,le+=d*L,le+=y*O,le+=w*(5*S),le+=E*(5*_),re+=le>>>13,le&=8191;var se=re;se+=s*_,se+=o*B,se+=a*P,se+=u*x,se+=l*b,re=se>>>13,se&=8191,se+=f*T,se+=d*U,se+=y*L,se+=w*O,se+=E*(5*S),re+=se>>>13,se&=8191;var ue=re;ue+=s*S,ue+=o*_,ue+=a*B,ue+=u*P,ue+=l*x,re=ue>>>13,ue&=8191,ue+=f*b,ue+=d*T,ue+=y*U,ue+=w*L,ue+=E*O,re+=ue>>>13,ue&=8191,re=(re<<2)+re|0,re=re+Y|0,Y=re&8191,re=re>>>13,ie+=re,s=Y,o=ie,a=ee,u=ne,l=q,f=ce,d=oe,y=le,w=se,E=ue,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=u,this._h[4]=l,this._h[5]=f,this._h[6]=d,this._h[7]=y,this._h[8]=w,this._h[9]=E},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=1<<13,s=(i^1)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Xd.wipe(this._buffer),Xd.wipe(this._r),Xd.wipe(this._h),Xd.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();zn.Poly1305=WN;function Zj(t,e){var r=new WN(t);r.update(e);var n=r.digest();return r.clean(),n}zn.oneTimeAuth=Zj;function eG(t,e){return t.length!==zn.DIGEST_LENGTH||e.length!==zn.DIGEST_LENGTH?!1:Xj.equal(t,e)}zn.equal=eG});var XN=v(Wn=>{"use strict";c();Object.defineProperty(Wn,"__esModule",{value:!0});var Zd=KN(),tG=$N(),fl=Cr(),YN=fu(),rG=Jd();Wn.KEY_LENGTH=32;Wn.NONCE_LENGTH=12;Wn.TAG_LENGTH=16;var JN=new Uint8Array(16),nG=function(){function t(e){if(this.nonceLength=Wn.NONCE_LENGTH,this.tagLength=Wn.TAG_LENGTH,e.length!==Wn.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Zd.stream(this._key,s,o,4);var a=r.length+this.tagLength,u;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(a);return Zd.streamXOR(this._key,s,r,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),o,u.subarray(0,u.length-this.tagLength),n),fl.wipe(s),u},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Zd.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),n),!rG.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var u=r.length-this.tagLength,l;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");l=i}else l=new Uint8Array(u);return Zd.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),l,4),fl.wipe(s),l},t.prototype.clean=function(){return fl.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new tG.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(JN.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(JN.subarray(n.length%16));var o=new Uint8Array(8);i&&YN.writeUint64LE(i.length,o),s.update(o),YN.writeUint64LE(n.length,o),s.update(o);for(var a=s.digest(),u=0;u<a.length;u++)e[u]=a[u];s.clean(),fl.wipe(a),fl.wipe(o)},t}();Wn.ChaCha20Poly1305=nG});var ZN=v(K1=>{"use strict";c();Object.defineProperty(K1,"__esModule",{value:!0});function iG(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}K1.isSerializableHash=iG});var tD=v(hl=>{"use strict";c();Object.defineProperty(hl,"__esModule",{value:!0});var vn=ZN(),sG=Jd(),oG=Cr(),eD=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),vn.isSerializableHash(this._inner)&&vn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),oG.wipe(n)}return t.prototype.reset=function(){if(!vn.isSerializableHash(this._inner)||!vn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){vn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),vn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!vn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!vn.isSerializableHash(this._inner)||!vn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!vn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();hl.HMAC=eD;function aG(t,e,r){var n=new eD(t,e);n.update(r);var i=n.digest();return n.clean(),i}hl.hmac=aG;hl.equal=sG.equal});var iD=v(z1=>{"use strict";c();Object.defineProperty(z1,"__esModule",{value:!0});var rD=tD(),nD=Cr(),uG=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=rD.hmac(this._hash,n,r);this._hmac=new rD.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),nD.wipe(this._buffer),nD.wipe(this._counter),this._bufpos=0},t}();z1.HKDF=uG});var oD=v(Fi=>{"use strict";c();Object.defineProperty(Fi,"__esModule",{value:!0});var tp=fu(),ep=Cr();Fi.DIGEST_LENGTH=32;Fi.BLOCK_SIZE=64;var sD=function(){function t(){this.digestLength=Fi.DIGEST_LENGTH,this.blockSize=Fi.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){ep.wipe(this._buffer),ep.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(W1(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=W1(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;tp.writeUint32BE(i,this._buffer,o-8),tp.writeUint32BE(s,this._buffer,o-4),W1(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)tp.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){ep.wipe(e.state),e.buffer&&ep.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Fi.SHA256=sD;var cG=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function W1(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],a=e[2],u=e[3],l=e[4],f=e[5],d=e[6],y=e[7],w=0;w<16;w++){var E=n+w*4;t[w]=tp.readUint32BE(r,E)}for(var w=16;w<64;w++){var O=t[w-2],L=(O>>>17|O<<32-17)^(O>>>19|O<<32-19)^O>>>10;O=t[w-15];var U=(O>>>7|O<<32-7)^(O>>>18|O<<32-18)^O>>>3;t[w]=(L+t[w-7]|0)+(U+t[w-16]|0)}for(var w=0;w<64;w++){var L=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&d)|0)+(y+(cG[w]+t[w]|0)|0)|0,U=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;y=d,d=f,f=l,l=u+L|0,u=a,a=o,o=s,s=L+U|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=u,e[4]+=l,e[5]+=f,e[6]+=d,e[7]+=y,n+=64,i-=64}return n}function lG(t){var e=new sD;e.update(t);var r=e.digest();return e.clean(),r}Fi.hash=lG});var lD=v(ct=>{"use strict";c();Object.defineProperty(ct,"__esModule",{value:!0});ct.sharedKey=ct.generateKeyPair=ct.generateKeyPairFromSeed=ct.scalarMultBase=ct.scalarMult=ct.SHARED_KEY_LENGTH=ct.SECRET_KEY_LENGTH=ct.PUBLIC_KEY_LENGTH=void 0;var fG=Zc(),hG=Cr();ct.PUBLIC_KEY_LENGTH=32;ct.SECRET_KEY_LENGTH=32;ct.SHARED_KEY_LENGTH=32;function An(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var aD=new Uint8Array(32);aD[0]=9;var dG=An([56129,1]);function $1(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function dl(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function pG(t,e){let r=An(),n=An();for(let i=0;i<16;i++)n[i]=e[i];$1(n),$1(n),$1(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,dl(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function gG(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function rp(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function np(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function $n(t,e,r){let n,i,s=0,o=0,a=0,u=0,l=0,f=0,d=0,y=0,w=0,E=0,O=0,L=0,U=0,T=0,b=0,x=0,P=0,B=0,_=0,S=0,F=0,Z=0,K=0,j=0,G=0,$=0,pe=0,ae=0,re=0,Y=0,ie=0,ee=r[0],ne=r[1],q=r[2],ce=r[3],oe=r[4],le=r[5],se=r[6],ue=r[7],g=r[8],m=r[9],A=r[10],D=r[11],I=r[12],N=r[13],R=r[14],C=r[15];n=e[0],s+=n*ee,o+=n*ne,a+=n*q,u+=n*ce,l+=n*oe,f+=n*le,d+=n*se,y+=n*ue,w+=n*g,E+=n*m,O+=n*A,L+=n*D,U+=n*I,T+=n*N,b+=n*R,x+=n*C,n=e[1],o+=n*ee,a+=n*ne,u+=n*q,l+=n*ce,f+=n*oe,d+=n*le,y+=n*se,w+=n*ue,E+=n*g,O+=n*m,L+=n*A,U+=n*D,T+=n*I,b+=n*N,x+=n*R,P+=n*C,n=e[2],a+=n*ee,u+=n*ne,l+=n*q,f+=n*ce,d+=n*oe,y+=n*le,w+=n*se,E+=n*ue,O+=n*g,L+=n*m,U+=n*A,T+=n*D,b+=n*I,x+=n*N,P+=n*R,B+=n*C,n=e[3],u+=n*ee,l+=n*ne,f+=n*q,d+=n*ce,y+=n*oe,w+=n*le,E+=n*se,O+=n*ue,L+=n*g,U+=n*m,T+=n*A,b+=n*D,x+=n*I,P+=n*N,B+=n*R,_+=n*C,n=e[4],l+=n*ee,f+=n*ne,d+=n*q,y+=n*ce,w+=n*oe,E+=n*le,O+=n*se,L+=n*ue,U+=n*g,T+=n*m,b+=n*A,x+=n*D,P+=n*I,B+=n*N,_+=n*R,S+=n*C,n=e[5],f+=n*ee,d+=n*ne,y+=n*q,w+=n*ce,E+=n*oe,O+=n*le,L+=n*se,U+=n*ue,T+=n*g,b+=n*m,x+=n*A,P+=n*D,B+=n*I,_+=n*N,S+=n*R,F+=n*C,n=e[6],d+=n*ee,y+=n*ne,w+=n*q,E+=n*ce,O+=n*oe,L+=n*le,U+=n*se,T+=n*ue,b+=n*g,x+=n*m,P+=n*A,B+=n*D,_+=n*I,S+=n*N,F+=n*R,Z+=n*C,n=e[7],y+=n*ee,w+=n*ne,E+=n*q,O+=n*ce,L+=n*oe,U+=n*le,T+=n*se,b+=n*ue,x+=n*g,P+=n*m,B+=n*A,_+=n*D,S+=n*I,F+=n*N,Z+=n*R,K+=n*C,n=e[8],w+=n*ee,E+=n*ne,O+=n*q,L+=n*ce,U+=n*oe,T+=n*le,b+=n*se,x+=n*ue,P+=n*g,B+=n*m,_+=n*A,S+=n*D,F+=n*I,Z+=n*N,K+=n*R,j+=n*C,n=e[9],E+=n*ee,O+=n*ne,L+=n*q,U+=n*ce,T+=n*oe,b+=n*le,x+=n*se,P+=n*ue,B+=n*g,_+=n*m,S+=n*A,F+=n*D,Z+=n*I,K+=n*N,j+=n*R,G+=n*C,n=e[10],O+=n*ee,L+=n*ne,U+=n*q,T+=n*ce,b+=n*oe,x+=n*le,P+=n*se,B+=n*ue,_+=n*g,S+=n*m,F+=n*A,Z+=n*D,K+=n*I,j+=n*N,G+=n*R,$+=n*C,n=e[11],L+=n*ee,U+=n*ne,T+=n*q,b+=n*ce,x+=n*oe,P+=n*le,B+=n*se,_+=n*ue,S+=n*g,F+=n*m,Z+=n*A,K+=n*D,j+=n*I,G+=n*N,$+=n*R,pe+=n*C,n=e[12],U+=n*ee,T+=n*ne,b+=n*q,x+=n*ce,P+=n*oe,B+=n*le,_+=n*se,S+=n*ue,F+=n*g,Z+=n*m,K+=n*A,j+=n*D,G+=n*I,$+=n*N,pe+=n*R,ae+=n*C,n=e[13],T+=n*ee,b+=n*ne,x+=n*q,P+=n*ce,B+=n*oe,_+=n*le,S+=n*se,F+=n*ue,Z+=n*g,K+=n*m,j+=n*A,G+=n*D,$+=n*I,pe+=n*N,ae+=n*R,re+=n*C,n=e[14],b+=n*ee,x+=n*ne,P+=n*q,B+=n*ce,_+=n*oe,S+=n*le,F+=n*se,Z+=n*ue,K+=n*g,j+=n*m,G+=n*A,$+=n*D,pe+=n*I,ae+=n*N,re+=n*R,Y+=n*C,n=e[15],x+=n*ee,P+=n*ne,B+=n*q,_+=n*ce,S+=n*oe,F+=n*le,Z+=n*se,K+=n*ue,j+=n*g,G+=n*m,$+=n*A,pe+=n*D,ae+=n*I,re+=n*N,Y+=n*R,ie+=n*C,s+=38*P,o+=38*B,a+=38*_,u+=38*S,l+=38*F,f+=38*Z,d+=38*K,y+=38*j,w+=38*G,E+=38*$,O+=38*pe,L+=38*ae,U+=38*re,T+=38*Y,b+=38*ie,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=u,t[4]=l,t[5]=f,t[6]=d,t[7]=y,t[8]=w,t[9]=E,t[10]=O,t[11]=L,t[12]=U,t[13]=T,t[14]=b,t[15]=x}function pl(t,e){$n(t,e,e)}function yG(t,e){let r=An();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)pl(r,r),n!==2&&n!==4&&$n(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function Y1(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=An(),s=An(),o=An(),a=An(),u=An(),l=An();for(let w=0;w<31;w++)r[w]=t[w];r[31]=t[31]&127|64,r[0]&=248,gG(n,e);for(let w=0;w<16;w++)s[w]=n[w];i[0]=a[0]=1;for(let w=254;w>=0;--w){let E=r[w>>>3]>>>(w&7)&1;dl(i,s,E),dl(o,a,E),rp(u,i,o),np(i,i,o),rp(o,s,a),np(s,s,a),pl(a,u),pl(l,i),$n(i,o,i),$n(o,s,u),rp(u,i,o),np(i,i,o),pl(s,i),np(o,a,l),$n(i,o,dG),rp(i,i,a),$n(o,o,i),$n(i,a,l),$n(a,s,n),pl(s,u),dl(i,s,E),dl(o,a,E)}for(let w=0;w<16;w++)n[w+16]=i[w],n[w+32]=o[w],n[w+48]=s[w],n[w+64]=a[w];let f=n.subarray(32),d=n.subarray(16);yG(f,f),$n(d,d,f);let y=new Uint8Array(32);return pG(y,d),y}ct.scalarMult=Y1;function uD(t){return Y1(t,aD)}ct.scalarMultBase=uD;function cD(t){if(t.length!==ct.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${ct.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:uD(e),secretKey:e}}ct.generateKeyPairFromSeed=cD;function mG(t){let e=(0,fG.randomBytes)(32,t),r=cD(e);return(0,hG.wipe)(e),r}ct.generateKeyPair=mG;function wG(t,e,r=!1){if(t.length!==ct.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==ct.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=Y1(t,e);if(r){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}ct.sharedKey=wG});function fD(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var hD=ge(()=>{c()});function dD(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var pD=ge(()=>{c()});function gD(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=mu(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return Bi(r)}var yD=ge(()=>{c();Gd();nl()});var mD={};st(mD,{compare:()=>fD,concat:()=>Qd,equals:()=>dD,fromString:()=>En,toString:()=>Kn,xor:()=>gD});var wD=ge(()=>{c();hD();f1();pD();U1();M1();yD()});var DD=v(Ze=>{"use strict";c();var ED=Ze&&Ze.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getNodeVersion=Ze.detectOS=Ze.parseUserAgent=Ze.browserName=Ze.detect=Ze.ReactNativeInfo=Ze.BotInfo=Ze.SearchBotDeviceInfo=Ze.NodeInfo=Ze.BrowserInfo=void 0;var _D=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();Ze.BrowserInfo=_D;var bD=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=p.default.platform}return t}();Ze.NodeInfo=bD;var ID=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();Ze.SearchBotDeviceInfo=ID;var SD=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();Ze.BotInfo=SD;var CD=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();Ze.ReactNativeInfo=CD;var EG=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vG=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vD=3,AG=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",EG]],AD=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _G(t){return t?J1(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new CD:typeof navigator<"u"?J1(navigator.userAgent):ND()}Ze.detect=_G;function TD(t){return t!==""&&AG.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function bG(t){var e=TD(t);return e?e[0]:null}Ze.browserName=bG;function J1(t){var e=TD(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new SD;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<vD&&(i=ED(ED([],i,!0),IG(vD-i.length),!0)):i=[];var s=i.join("."),o=xD(t),a=vG.exec(t);return a&&a[1]?new ID(r,s,o,a[1]):new _D(r,s,o)}Ze.parseUserAgent=J1;function xD(t){for(var e=0,r=AD.length;e<r;e++){var n=AD[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}Ze.detectOS=xD;function ND(){var t=typeof p.default<"u"&&p.default.version;return t?new bD(p.default.version.slice(1)):null}Ze.getNodeVersion=ND;function IG(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var X1=v(ze=>{"use strict";c();Object.defineProperty(ze,"__esModule",{value:!0});ze.getLocalStorage=ze.getLocalStorageOrThrow=ze.getCrypto=ze.getCryptoOrThrow=ze.getLocation=ze.getLocationOrThrow=ze.getNavigator=ze.getNavigatorOrThrow=ze.getDocument=ze.getDocumentOrThrow=ze.getFromWindowOrThrow=ze.getFromWindow=void 0;function oo(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}ze.getFromWindow=oo;function Su(t){let e=oo(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}ze.getFromWindowOrThrow=Su;function SG(){return Su("document")}ze.getDocumentOrThrow=SG;function CG(){return oo("document")}ze.getDocument=CG;function TG(){return Su("navigator")}ze.getNavigatorOrThrow=TG;function xG(){return oo("navigator")}ze.getNavigator=xG;function NG(){return Su("location")}ze.getLocationOrThrow=NG;function DG(){return oo("location")}ze.getLocation=DG;function OG(){return Su("crypto")}ze.getCryptoOrThrow=OG;function PG(){return oo("crypto")}ze.getCrypto=PG;function BG(){return Su("localStorage")}ze.getLocalStorageOrThrow=BG;function RG(){return oo("localStorage")}ze.getLocalStorage=RG});var PD=v(ip=>{"use strict";c();Object.defineProperty(ip,"__esModule",{value:!0});ip.getWindowMetadata=void 0;var OD=X1();function LG(){let t,e;try{t=OD.getDocumentOrThrow(),e=OD.getLocationOrThrow()}catch{return null}function r(){let d=t.getElementsByTagName("link"),y=[];for(let w=0;w<d.length;w++){let E=d[w],O=E.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){let L=E.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let U=e.protocol+"//"+e.host;if(L.indexOf("/")===0)U+=L;else{let T=e.pathname.split("/");T.pop();let b=T.join("/");U+=b+"/"+L}y.push(U)}else if(L.indexOf("//")===0){let U=e.protocol+L;y.push(U)}else y.push(L)}}return y}function n(...d){let y=t.getElementsByTagName("meta");for(let w=0;w<y.length;w++){let E=y[w],O=["itemprop","property","name"].map(L=>E.getAttribute(L)).filter(L=>L?d.includes(L):!1);if(O.length&&O){let L=E.getAttribute("content");if(L)return L}}return""}function i(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return n("description","og:description","twitter:description","keywords")}let o=i(),a=s(),u=e.origin,l=r();return{description:a,url:u,icons:l,name:o}}ip.getWindowMetadata=LG});var RD=v((Oae,BD)=>{"use strict";c();BD.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var qD=v((Bae,UD)=>{"use strict";c();var MD="%[a-f0-9]{2}",LD=new RegExp("("+MD+")|([^%]+?)","gi"),FD=new RegExp("("+MD+")+","gi");function Z1(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Z1(r),Z1(n))}function FG(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(LD)||[],r=1;r<e.length;r++)t=Z1(e,r).join(""),e=t.match(LD)||[];return t}}function MG(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=FD.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=FG(r[0]);n!==r[0]&&(e[r[0]]=n)}r=FD.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}UD.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return MG(t)}}});var HD=v((Lae,VD)=>{"use strict";c();VD.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var GD=v((Mae,jD)=>{"use strict";c();jD.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r}});var JD=v(ir=>{"use strict";c();var UG=RD(),qG=qD(),kD=HD(),VG=GD(),HG=t=>t==null,ev=Symbol("encodeFragmentIdentifier");function jG(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[pt(e,t),"[",i,"]"].join("")]:[...r,[pt(e,t),"[",pt(i,t),"]=",pt(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[pt(e,t),"[]"].join("")]:[...r,[pt(e,t),"[]=",pt(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[pt(e,t),":list="].join("")]:[...r,[pt(e,t),":list=",pt(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[pt(r,t),e,pt(i,t)].join("")]:[[n,pt(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,pt(e,t)]:[...r,[pt(e,t),"=",pt(n,t)].join("")]}}function GG(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"comma":case"separator":return(r,n,i)=>{let s=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!s&&Yn(n,t).includes(t.arrayFormatSeparator);n=o?Yn(n,t):n;let a=s||o?n.split(t.arrayFormatSeparator).map(u=>Yn(u,t)):n===null?n:Yn(n,t);i[r]=a};case"bracket-separator":return(r,n,i)=>{let s=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!s){i[r]=n&&Yn(n,t);return}let o=n===null?[]:n.split(t.arrayFormatSeparator).map(a=>Yn(a,t));if(i[r]===void 0){i[r]=o;return}i[r]=[].concat(i[r],o)};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[].concat(i[r],n)}}}function KD(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function pt(t,e){return e.encode?e.strict?UG(t):encodeURIComponent(t):t}function Yn(t,e){return e.decode?qG(t):t}function zD(t){return Array.isArray(t)?t.sort():typeof t=="object"?zD(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function WD(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function QG(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function $D(t){t=WD(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function QD(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function YD(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),KD(e.arrayFormatSeparator);let r=GG(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let[s,o]=kD(e.decode?i.replace(/\+/g," "):i,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:Yn(o,e),r(Yn(s,e),o,n)}for(let i of Object.keys(n)){let s=n[i];if(typeof s=="object"&&s!==null)for(let o of Object.keys(s))s[o]=QD(s[o],e);else n[i]=QD(s,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,s)=>{let o=n[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=zD(o):i[s]=o,i},Object.create(null))}ir.extract=$D;ir.parse=YD;ir.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),KD(e.arrayFormatSeparator);let r=o=>e.skipNull&&HG(t[o])||e.skipEmptyString&&t[o]==="",n=jG(e),i={};for(let o of Object.keys(t))r(o)||(i[o]=t[o]);let s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{let a=t[o];return a===void 0?"":a===null?pt(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?pt(o,e)+"[]":a.reduce(n(o),[]).join("&"):pt(o,e)+"="+pt(a,e)}).filter(o=>o.length>0).join("&")};ir.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=kD(t,"#");return Object.assign({url:r.split("?")[0]||"",query:YD($D(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Yn(n,e)}:{})};ir.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[ev]:!0},e);let r=WD(t.url).split("?")[0]||"",n=ir.extract(t.url),i=ir.parse(n,{sort:!1}),s=Object.assign(i,t.query),o=ir.stringify(s,e);o&&(o=`?${o}`);let a=QG(t.url);return t.fragmentIdentifier&&(a=`#${e[ev]?pt(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${o}${a}`};ir.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[ev]:!1},r);let{url:n,query:i,fragmentIdentifier:s}=ir.parseUrl(t,r);return ir.stringifyUrl({url:n,query:VG(i,e),fragmentIdentifier:s},r)};ir.exclude=(t,e,r)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return ir.pick(t,n,r)}});var XD=ge(()=>{c()});function Mi(t,e,r="string"){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function kG(t,e){let r=!0;return e.forEach(n=>{n in t||(r=!1)}),r}function KG(t,e){return Array.isArray(t)?t.length===e:Object.keys(t).length===e}function zG(t,e){return Array.isArray(t)?t.length>=e:Object.keys(t).length>=e}function gl(t,e,r){return(!r.length?KG(t,e.length):zG(t,e.length))?kG(t,e):!1}function yl(t,e,r="_"){let n=t.split(r);return n[n.length-1].trim().toLowerCase()===e.trim().toLowerCase()}var tv=ge(()=>{c()});function WG(t){return sp(t.method)&&op(t.params)}function sp(t){return yl(t,"subscribe")}function op(t){return gl(t,["topic"],[])}function $G(t){return ap(t.method)&&up(t.params)}function ap(t){return yl(t,"publish")}function up(t){return gl(t,["message","topic","ttl"],["prompt","tag"])}function YG(t){return cp(t.method)&&lp(t.params)}function cp(t){return yl(t,"unsubscribe")}function lp(t){return gl(t,["id","topic"],[])}function JG(t){return fp(t.method)&&hp(t.params)}function fp(t){return yl(t,"subscription")}function hp(t){return gl(t,["id","data"],[])}var rv=ge(()=>{c();tv()});function XG(t){if(!sp(t.method))throw new Error("JSON-RPC Request has invalid subscribe method");if(!op(t.params))throw new Error("JSON-RPC Request has invalid subscribe params");let e=t.params;return Mi(e,"topic"),e}function ZG(t){if(!ap(t.method))throw new Error("JSON-RPC Request has invalid publish method");if(!up(t.params))throw new Error("JSON-RPC Request has invalid publish params");let e=t.params;return Mi(e,"topic"),Mi(e,"message"),Mi(e,"ttl","number"),e}function e9(t){if(!cp(t.method))throw new Error("JSON-RPC Request has invalid unsubscribe method");if(!lp(t.params))throw new Error("JSON-RPC Request has invalid unsubscribe params");let e=t.params;return Mi(e,"id"),e}function t9(t){if(!fp(t.method))throw new Error("JSON-RPC Request has invalid subscription method");if(!hp(t.params))throw new Error("JSON-RPC Request has invalid subscription params");let e=t.params;return Mi(e,"id"),Mi(e,"data"),e}var ZD=ge(()=>{c();tv();rv()});var r9,eO=ge(()=>{c();r9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}}});var tO={};st(tO,{RELAY_JSONRPC:()=>r9,isPublishMethod:()=>ap,isPublishParams:()=>up,isPublishRequest:()=>$G,isSubscribeMethod:()=>sp,isSubscribeParams:()=>op,isSubscribeRequest:()=>WG,isSubscriptionMethod:()=>fp,isSubscriptionParams:()=>hp,isSubscriptionRequest:()=>JG,isUnsubscribeMethod:()=>cp,isUnsubscribeParams:()=>lp,isUnsubscribeRequest:()=>YG,parsePublishRequest:()=>ZG,parseSubscribeRequest:()=>XG,parseSubscriptionRequest:()=>t9,parseUnsubscribeRequest:()=>e9});var rO=ge(()=>{c();XD();ZD();eO();rv()});var _p=v(k=>{"use strict";c();Object.defineProperty(k,"__esModule",{value:!0});var lO=XN(),n9=iD(),fO=Zc(),sv=oD(),i9=lD(),et=(wD(),ot(mD)),s9=DD(),Tu=eo(),ml=X1(),o9=PD(),a9=JD(),u9=(rO(),ot(tO));function hO(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var dO=hO(i9),dp=hO(a9),yp=":";function pO(t){let[e,r]=t.split(yp);return{namespace:e,reference:r}}function gO(t){let{namespace:e,reference:r}=t;return[e,r].join(yp)}function ov(t){let[e,r,n]=t.split(yp);return{namespace:e,reference:r,address:n}}function yO(t){let{namespace:e,reference:r,address:n}=t;return[e,r,n].join(yp)}function av(t,e){let r=[];return t.forEach(n=>{let i=e(n);r.includes(i)||r.push(i)}),r}function mO(t){let{address:e}=ov(t);return e}function wO(t){let{namespace:e,reference:r}=ov(t);return gO({namespace:e,reference:r})}function c9(t,e){let{namespace:r,reference:n}=pO(e);return yO({namespace:r,reference:n,address:t})}function l9(t){return av(t,mO)}function EO(t){return av(t,wO)}function f9(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...i.accounts)}),r}function h9(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...EO(i.accounts))}),r}function d9(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...mp(n,i))}),r}function mp(t,e){return t.includes(":")?[t]:e.chains||[]}var wp=t=>t?.split(":"),vO=t=>{let e=t&&wp(t);if(e)return e[3]},p9=t=>{let e=t&&wp(t);if(e)return e[2]+":"+e[3]},AO=t=>{let e=t&&wp(t);if(e)return e.pop()},g9=(t,e)=>{let r=`${t.domain} wants you to sign in with your Ethereum account:`,n=AO(e),i=t.statement,s=`URI: ${t.aud}`,o=`Version: ${t.version}`,a=`Chain ID: ${vO(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,f=t.resources&&t.resources.length>0?`Resources:
${t.resources.map(d=>`- ${d}`).join(`
`)}`:void 0;return[r,n,"",i,"",s,o,a,u,l,f].filter(d=>d!=null).join(`
`)},uv="base10",$t="base16",pp="base64pad",Ep="utf8",cv=0,xu=1,y9=0,nO=1,nv=12,lv=32;function m9(){let t=dO.generateKeyPair();return{privateKey:et.toString(t.secretKey,$t),publicKey:et.toString(t.publicKey,$t)}}function w9(){let t=fO.randomBytes(lv);return et.toString(t,$t)}function E9(t,e){let r=dO.sharedKey(et.fromString(t,$t),et.fromString(e,$t)),n=new n9.HKDF(sv.SHA256,r).expand(lv);return et.toString(n,$t)}function v9(t){let e=sv.hash(et.fromString(t,$t));return et.toString(e,$t)}function A9(t){let e=sv.hash(et.fromString(t,Ep));return et.toString(e,$t)}function _O(t){return et.fromString(`${t}`,uv)}function wl(t){return Number(et.toString(t,uv))}function _9(t){let e=_O(typeof t.type<"u"?t.type:cv);if(wl(e)===xu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let r=typeof t.senderPublicKey<"u"?et.fromString(t.senderPublicKey,$t):void 0,n=typeof t.iv<"u"?et.fromString(t.iv,$t):fO.randomBytes(nv),i=new lO.ChaCha20Poly1305(et.fromString(t.symKey,$t)).seal(n,et.fromString(t.message,Ep));return bO({type:e,sealed:i,iv:n,senderPublicKey:r})}function b9(t){let e=new lO.ChaCha20Poly1305(et.fromString(t.symKey,$t)),{sealed:r,iv:n}=fv(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return et.toString(i,Ep)}function bO(t){if(wl(t.type)===xu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return et.toString(et.concat([t.type,t.senderPublicKey,t.iv,t.sealed]),pp)}return et.toString(et.concat([t.type,t.iv,t.sealed]),pp)}function fv(t){let e=et.fromString(t,pp),r=e.slice(y9,nO),n=nO;if(wl(r)===xu){let a=n+lv,u=a+nv,l=e.slice(n,a),f=e.slice(a,u),d=e.slice(u);return{type:r,sealed:d,iv:f,senderPublicKey:l}}let i=n+nv,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function I9(t,e){let r=fv(t);return IO({type:wl(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?et.toString(r.senderPublicKey,$t):void 0,receiverPublicKey:e?.receiverPublicKey})}function IO(t){let e=t?.type||cv;if(e===xu){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function S9(t){return t.type===xu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var C9=Object.defineProperty,iO=Object.getOwnPropertySymbols,T9=Object.prototype.hasOwnProperty,x9=Object.prototype.propertyIsEnumerable,sO=(t,e,r)=>e in t?C9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oO=(t,e)=>{for(var r in e||(e={}))T9.call(e,r)&&sO(t,r,e[r]);if(iO)for(var r of iO(e))x9.call(e,r)&&sO(t,r,e[r]);return t},SO="ReactNative",Cu={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},gp=" ",N9=":",CO="/",hv=2,D9=1e3,TO="js";function dv(){return typeof p.default<"u"&&typeof p.default.versions<"u"&&typeof p.default.versions.node<"u"}function xO(){return!ml.getDocument()&&!!ml.getNavigator()&&navigator.product===SO}function NO(){return!dv()&&!!ml.getNavigator()}function pv(){return xO()?Cu.reactNative:dv()?Cu.node:NO()?Cu.browser:Cu.unknown}function DO(t,e){let r=dp.parse(t);return r=oO(oO({},r),e),t=dp.stringify(r),t}function O9(){return o9.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function P9(t,e){var r;let n=pv(),i={protocol:t,version:e,env:n};return n==="browser"&&(i.host=((r=ml.getLocation())==null?void 0:r.host)||"unknown"),i}function OO(){let t=s9.detect();if(t===null)return"unknown";let e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function PO(){var t;let e=pv();return e===Cu.browser?[e,((t=ml.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function BO(t,e,r){let n=OO(),i=PO();return[[t,e].join("-"),[TO,r].join("-"),n,i].join("/")}function B9({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){let a=r.split("?"),u=BO(t,e,n),l={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0},f=DO(a[1]||"",l);return a[0]+"?"+f}function R9(t){let e=(t.match(/^[^:]+(?=:\/\/)/gi)||[])[0],r=typeof e<"u"?t.split("://")[1]:t;return e=e==="wss"?"https":"http",[e,r].join("://")}function L9(t,e,r){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function RO(t,e=hv){return LO(t.split(CO),e)}function F9(t){return RO(t).join(gp)}function Ui(t,e){return t.filter(r=>e.includes(r)).length===t.length}function LO(t,e=hv){return t.slice(Math.max(t.length-e,0))}function M9(t){return Object.fromEntries(t.entries())}function U9(t){return new Map(Object.entries(t))}function q9(t,e){let r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}var V9=t=>t;function FO(t){return t.trim().replace(/^\w/,e=>e.toUpperCase())}function H9(t){return t.split(gp).map(e=>FO(e)).join(gp)}function j9(t=Tu.FIVE_MINUTES,e){let r=Tu.toMiliseconds(t||Tu.FIVE_MINUTES),n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function G9(t,e,r){return new Promise(async(n,i)=>{let s=setTimeout(()=>i(new Error(r)),e);try{let o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function gv(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Q9(t){return gv("topic",t)}function k9(t){return gv("id",t)}function K9(t){let[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function z9(t,e){return Tu.fromMiliseconds((e||Date.now())+Tu.toMiliseconds(t))}function W9(t){return Date.now()>=Tu.toMiliseconds(t)}function $9(t,e){return`${t}${e?`:${e}`:""}`}var MO="irn";function Y9(t){return t?.relay||{protocol:MO}}function J9(t){let e=u9.RELAY_JSONRPC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var X9=Object.defineProperty,aO=Object.getOwnPropertySymbols,Z9=Object.prototype.hasOwnProperty,eQ=Object.prototype.propertyIsEnumerable,uO=(t,e,r)=>e in t?X9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tQ=(t,e)=>{for(var r in e||(e={}))Z9.call(e,r)&&uO(t,r,e[r]);if(aO)for(var r of aO(e))eQ.call(e,r)&&uO(t,r,e[r]);return t};function UO(t,e="-"){let r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){let s=i.replace(n,""),o=t[i];r[s]=o}}),r}function rQ(t){let e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=dp.parse(s);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:o.symKey,relay:UO(o)}}function qO(t,e="-"){let r="relay",n={};return Object.keys(t).forEach(i=>{let s=r+e+i;t[i]&&(n[s]=t[i])}),n}function nQ(t){return`${t.protocol}:${t.topic}@${t.version}?`+dp.stringify(tQ({symKey:t.symKey},qO(t.relay)))}function uo(t){let e=[];return t.forEach(r=>{let[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function VO(t){let e=[];return Object.values(t).forEach(r=>{e.push(...uo(r.accounts))}),e}function HO(t,e){let r=[];return Object.values(t).forEach(n=>{uo(n.accounts).includes(e)&&r.push(...n.methods)}),r}function jO(t,e){let r=[];return Object.values(t).forEach(n=>{uo(n.accounts).includes(e)&&r.push(...n.events)}),r}function iQ(t,e){let r=$O(t,e);if(r)throw new Error(r.message);let n={};for(let[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}var sQ={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},oQ={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Jn(t,e){let{message:r,code:n}=oQ[t];return{message:e?`${r} ${e}`:r,code:n}}function ao(t,e){let{message:r,code:n}=sQ[t];return{message:e?`${r} ${e}`:r,code:n}}function El(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function yv(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function qi(t){return typeof t>"u"}function cr(t,e){return e&&qi(t)?!0:typeof t=="string"&&!!t.trim().length}function vp(t,e){return e&&qi(t)?!0:typeof t=="number"&&!isNaN(t)}function aQ(t,e){let{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r),s=!0;return Ui(i,n)?(n.forEach(o=>{let{accounts:a,methods:u,events:l}=t.namespaces[o],f=uo(a),d=r[o];(!Ui(mp(o,d),f)||!Ui(d.methods,u)||!Ui(d.events,l))&&(s=!1)}),s):!1}function Ap(t){return cr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function GO(t){if(cr(t,!1)&&t.includes(":")){let e=t.split(":");if(e.length===3){let r=e[0]+":"+e[1];return!!e[2]&&Ap(r)}}return!1}function uQ(t){if(cr(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function cQ(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function lQ(t){return t?.topic}function fQ(t,e){let r=null;return cr(t?.publicKey,!1)||(r=Jn("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function iv(t){let e=!0;return El(t)?t.length&&(e=t.every(r=>cr(r,!1))):e=!1,e}function QO(t,e,r){let n=null;return El(e)?e.forEach(i=>{n||(!Ap(i)||!i.includes(t))&&(n=ao("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=ao("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function kO(t,e){let r=null;return Object.entries(t).forEach(([n,i])=>{if(r)return;let s=QO(n,mp(n,i),`${e} requiredNamespace`);s&&(r=s)}),r}function KO(t,e){let r=null;return El(t)?t.forEach(n=>{r||GO(n)||(r=ao("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ao("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function zO(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=KO(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function WO(t,e){let r=null;return iv(t?.methods)?iv(t?.events)||(r=ao("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ao("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function mv(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=WO(n,`${e}, namespace`);i&&(r=i)}),r}function hQ(t,e,r){let n=null;if(t&&yv(t)){let i=mv(t,e);i&&(n=i);let s=kO(t,e);s&&(n=s)}else n=Jn("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function $O(t,e){let r=null;if(t&&yv(t)){let n=mv(t,e);n&&(r=n);let i=zO(t,e);i&&(r=i)}else r=Jn("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function YO(t){return cr(t.protocol,!0)}function dQ(t,e){let r=!1;return e&&!t?r=!0:t&&El(t)&&t.length&&t.forEach(n=>{r=YO(n)}),r}function pQ(t){return typeof t=="number"}function gQ(t){return typeof t<"u"&&typeof t!==null}function yQ(t){return!(!t||typeof t!="object"||!t.code||!vp(t.code,!1)||!t.message||!cr(t.message,!1))}function mQ(t){return!(qi(t)||!cr(t.method,!1))}function wQ(t){return!(qi(t)||qi(t.result)&&qi(t.error)||!vp(t.id,!1)||!cr(t.jsonrpc,!1))}function EQ(t){return!(qi(t)||!cr(t.name,!1))}function vQ(t,e){return!(!Ap(e)||!VO(t).includes(e))}function AQ(t,e,r){return cr(r,!1)?HO(t,e).includes(r):!1}function _Q(t,e,r){return cr(r,!1)?jO(t,e).includes(r):!1}function bQ(t,e,r){let n=null,i=IQ(t),s=SQ(e),o=Object.keys(i),a=Object.keys(s),u=cO(Object.keys(t)),l=cO(Object.keys(e)),f=u.filter(d=>!l.includes(d));return f.length&&(n=Jn("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),Ui(o,a)||(n=Jn("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;let y=uo(e[d].accounts);y.includes(d)||(n=Jn("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${y.toString()}`))}),o.forEach(d=>{n||(Ui(i[d].methods,s[d].methods)?Ui(i[d].events,s[d].events)||(n=Jn("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=Jn("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function IQ(t){let e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function cO(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function SQ(t){let e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:uo(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function CQ(t,e){return vp(t,!1)&&t<=e.max&&t>=e.min}k.BASE10=uv,k.BASE16=$t,k.BASE64=pp,k.COLON=N9,k.DEFAULT_DEPTH=hv,k.EMPTY_SPACE=gp,k.ENV_MAP=Cu,k.ONE_THOUSAND=D9,k.REACT_NATIVE_PRODUCT=SO,k.RELAYER_DEFAULT_PROTOCOL=MO,k.SDK_TYPE=TO,k.SLASH=CO,k.TYPE_0=cv,k.TYPE_1=xu,k.UTF8=Ep,k.appendToQueryString=DO,k.assertType=L9,k.calcExpiry=z9,k.capitalize=H9,k.capitalizeWord=FO,k.createDelayedPromise=j9,k.createExpiringPromise=G9,k.decodeTypeByte=wl,k.decrypt=b9,k.deriveSymKey=E9,k.deserialize=fv,k.encodeTypeByte=_O,k.encrypt=_9,k.engineEvent=$9,k.enumify=V9,k.formatAccountId=yO,k.formatAccountWithChain=c9,k.formatChainId=gO,k.formatExpirerTarget=gv,k.formatIdTarget=k9,k.formatMessage=g9,k.formatMessageContext=F9,k.formatRelayParams=qO,k.formatRelayRpcUrl=B9,k.formatTopicTarget=Q9,k.formatUA=BO,k.formatUri=nQ,k.generateKeyPair=m9,k.generateRandomBytes32=w9,k.getAccountsChains=uo,k.getAccountsFromNamespaces=f9,k.getAddressFromAccount=mO,k.getAddressesFromAccounts=l9,k.getAppMetadata=O9,k.getChainFromAccount=wO,k.getChainsFromAccounts=EO,k.getChainsFromNamespace=mp,k.getChainsFromNamespaces=h9,k.getChainsFromRequiredNamespaces=d9,k.getDidAddress=AO,k.getDidAddressSegments=wp,k.getDidChainId=vO,k.getEnvironment=pv,k.getHttpUrl=R9,k.getInternalError=Jn,k.getJavascriptID=PO,k.getJavascriptOS=OO,k.getLastItems=LO,k.getNamespacedDidChainId=p9,k.getNamespacesChains=VO,k.getNamespacesEventsForChainId=jO,k.getNamespacesMethodsForChainId=HO,k.getRelayClientMetadata=P9,k.getRelayProtocolApi=J9,k.getRelayProtocolName=Y9,k.getRequiredNamespacesFromNamespaces=iQ,k.getSdkError=ao,k.getUniqueValues=av,k.hasOverlap=Ui,k.hashKey=v9,k.hashMessage=A9,k.isBrowser=NO,k.isConformingNamespaces=bQ,k.isExpired=W9,k.isNode=dv,k.isProposalStruct=cQ,k.isReactNative=xO,k.isSessionCompatible=aQ,k.isSessionStruct=lQ,k.isTypeOneEnvelope=S9,k.isUndefined=qi,k.isValidAccountId=GO,k.isValidAccounts=KO,k.isValidActions=WO,k.isValidArray=El,k.isValidChainId=Ap,k.isValidChains=QO,k.isValidController=fQ,k.isValidErrorReason=yQ,k.isValidEvent=EQ,k.isValidId=pQ,k.isValidNamespaceAccounts=zO,k.isValidNamespaceActions=mv,k.isValidNamespaceChains=kO,k.isValidNamespaceMethodsOrEvents=iv,k.isValidNamespaces=$O,k.isValidNamespacesChainId=vQ,k.isValidNamespacesEvent=_Q,k.isValidNamespacesRequest=AQ,k.isValidNumber=vp,k.isValidObject=yv,k.isValidParams=gQ,k.isValidRelay=YO,k.isValidRelays=dQ,k.isValidRequest=mQ,k.isValidRequestExpiry=CQ,k.isValidRequiredNamespaces=hQ,k.isValidResponse=wQ,k.isValidString=cr,k.isValidUrl=uQ,k.mapEntries=q9,k.mapToObj=M9,k.objToMap=U9,k.parseAccountId=ov,k.parseChainId=pO,k.parseContextNames=RO,k.parseExpirerTarget=K9,k.parseRelayParams=UO,k.parseUri=rQ,k.serialize=bO,k.validateDecoding=I9,k.validateEncoding=IO});var JO,XO,ZO,e3,bp,vl,wv,Ip,Vi,Al,Sp=ge(()=>{c();JO="PARSE_ERROR",XO="INVALID_REQUEST",ZO="METHOD_NOT_FOUND",e3="INVALID_PARAMS",bp="INTERNAL_ERROR",vl="SERVER_ERROR",wv=[-32700,-32600,-32601,-32602,-32603],Ip=[-32e3,-32099],Vi={[JO]:{code:-32700,message:"Parse error"},[XO]:{code:-32600,message:"Invalid Request"},[ZO]:{code:-32601,message:"Method not found"},[e3]:{code:-32602,message:"Invalid params"},[bp]:{code:-32603,message:"Internal error"},[vl]:{code:-32e3,message:"Server error"}},Al=vl});function TQ(t){return t<=Ip[0]&&t>=Ip[1]}function Cp(t){return wv.includes(t)}function t3(t){return typeof t=="number"}function Tp(t){return Object.keys(Vi).includes(t)?Vi[t]:Vi[Al]}function xp(t){let e=Object.values(Vi).find(r=>r.code===t);return e||Vi[Al]}function xQ(t){if(typeof t.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof t.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!t3(t.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${t.error.code}`};if(Cp(t.error.code)){let e=xp(t.error.code);if(e.message!==Vi[Al].message&&t.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${t.error.code}`}}return{valid:!0}}function Ev(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var vv=ge(()=>{c();Sp()});var n3=v(Hi=>{"use strict";c();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.isBrowserCryptoAvailable=Hi.getSubtleCrypto=Hi.getBrowerCrypto=void 0;function Av(){return(global===null||global===void 0?void 0:global.crypto)||(global===null||global===void 0?void 0:global.msCrypto)||{}}Hi.getBrowerCrypto=Av;function r3(){let t=Av();return t.subtle||t.webkitSubtle}Hi.getSubtleCrypto=r3;function NQ(){return!!Av()&&!!r3()}Hi.isBrowserCryptoAvailable=NQ});var o3=v(ji=>{"use strict";c();Object.defineProperty(ji,"__esModule",{value:!0});ji.isBrowser=ji.isNode=ji.isReactNative=void 0;function i3(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ji.isReactNative=i3;function s3(){return typeof p.default<"u"&&typeof p.default.versions<"u"&&typeof p.default.versions.node<"u"}ji.isNode=s3;function DQ(){return!i3()&&!s3()}ji.isBrowser=DQ});var _v=v(Np=>{"use strict";c();Object.defineProperty(Np,"__esModule",{value:!0});var a3=(ar(),ot(or));a3.__exportStar(n3(),Np);a3.__exportStar(o3(),Np)});var Ot={};st(Ot,{isNodeJs:()=>c3});var u3,c3,l3=ge(()=>{c();u3=_e(_v());Lt(Ot,_e(_v()));c3=u3.isNode});function bv(t=3){let e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function OQ(t=6){return BigInt(bv(t))}function Iv(t,e,r){return{id:r||bv(),jsonrpc:"2.0",method:t,params:e}}function PQ(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Sv(t,e,r){return{id:t,jsonrpc:"2.0",error:f3(e,r)}}function f3(t,e){return typeof t>"u"?Tp(bp):(typeof t=="string"&&(t=Object.assign(Object.assign({},Tp(vl)),{message:t})),typeof e<"u"&&(t.data=e),Cp(t.code)&&(t=xp(t.code)),t)}var h3=ge(()=>{c();vv();Sp()});function BQ(t){return t.includes("*")?Op(t):!/\W/g.test(t)}function Dp(t){return t==="*"}function Op(t){return Dp(t)?!0:!(!t.includes("*")||t.split("*").length!==2||t.split("*").filter(e=>e.trim()==="").length!==1)}function RQ(t){return!Dp(t)&&Op(t)&&!t.split("*")[0].trim()}function LQ(t){return!Dp(t)&&Op(t)&&!t.split("*")[1].trim()}var d3=ge(()=>{c()});var p3=ge(()=>{c()});var Nu,Cv=ge(()=>{c();Nu=class{}});var Tv,Pp,_l,g3=ge(()=>{c();Cv();Tv=class extends Nu{constructor(e){super()}},Pp=class extends Nu{constructor(){super()}},_l=class extends Pp{constructor(e){super()}}});var y3=ge(()=>{c()});var m3=ge(()=>{c();p3();Cv();g3();y3()});var w3=ge(()=>{c();m3()});function UQ(t){let e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function E3(t,e){let r=UQ(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function qQ(t){return E3(t,FQ)}function Bp(t){return E3(t,MQ)}function xv(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}var FQ,MQ,v3=ge(()=>{c();FQ="^https?:",MQ="^wss?:"});function Nv(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function VQ(t){return Nv(t)&&"method"in t}function Dv(t){return Nv(t)&&(A3(t)||Rp(t))}function A3(t){return"result"in t}function Rp(t){return"error"in t}function HQ(t){return"error"in t&&t.valid===!1}var _3=ge(()=>{c()});var Kt={};st(Kt,{DEFAULT_ERROR:()=>Al,IBaseJsonRpcProvider:()=>Pp,IEvents:()=>Nu,IJsonRpcConnection:()=>Tv,IJsonRpcProvider:()=>_l,INTERNAL_ERROR:()=>bp,INVALID_PARAMS:()=>e3,INVALID_REQUEST:()=>XO,METHOD_NOT_FOUND:()=>ZO,PARSE_ERROR:()=>JO,RESERVED_ERROR_CODES:()=>wv,SERVER_ERROR:()=>vl,SERVER_ERROR_CODE_RANGE:()=>Ip,STANDARD_ERROR_MAP:()=>Vi,formatErrorMessage:()=>f3,formatJsonRpcError:()=>Sv,formatJsonRpcRequest:()=>Iv,formatJsonRpcResult:()=>PQ,getBigIntRpcId:()=>OQ,getError:()=>Tp,getErrorByCode:()=>xp,isHttpUrl:()=>qQ,isJsonRpcError:()=>Rp,isJsonRpcPayload:()=>Nv,isJsonRpcRequest:()=>VQ,isJsonRpcResponse:()=>Dv,isJsonRpcResult:()=>A3,isJsonRpcValidationInvalid:()=>HQ,isLocalhostUrl:()=>xv,isNodeJs:()=>c3,isReservedErrorCode:()=>Cp,isServerErrorCode:()=>TQ,isValidDefaultRoute:()=>Dp,isValidErrorCode:()=>t3,isValidLeadingWildcardRoute:()=>RQ,isValidRoute:()=>BQ,isValidTrailingWildcardRoute:()=>LQ,isValidWildcardRoute:()=>Op,isWsUrl:()=>Bp,parseConnectionError:()=>Ev,payloadId:()=>bv,validateJsonRpcError:()=>xQ});var bl=ge(()=>{c();Sp();vv();l3();Lt(Kt,Ot);h3();d3();w3();v3();_3()});var b3,Lp,I3,Ov=ge(()=>{c();b3=_e(jn());bl();Lp=class extends _l{constructor(e){super(e),this.events=new b3.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Iv(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Rp(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Dv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}},I3=Lp});var S3={};st(S3,{JsonRpcProvider:()=>Lp,default:()=>jQ});var jQ,C3=ge(()=>{c();Ov();Ov();jQ=I3});var x3=v((oce,T3)=>{"use strict";c();T3.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var D3,N3,GQ,QQ,kQ,Fp,O3,Pv=ge(()=>{c();D3=_e(jn());xd();bl();N3=10,GQ=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:x3(),QQ=()=>typeof window<"u",kQ=GQ(),Fp=class{constructor(e){if(this.url=e,this.events=new D3.EventEmitter,this.registering=!1,!Bp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Bp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{let i=(0,Kt.isReactNative)()?void 0:{rejectUnauthorized:!xv(e)},s=new kQ(e,[],i);QQ()?s.onerror=o=>{let a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let r=typeof e.data=="string"?Jc(e.data):e.data;this.events.emit("payload",r)}onError(e,r){let n=this.parseError(r),i=n.message||n.toString(),s=Sv(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Ev(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>N3&&this.events.setMaxListeners(N3)}emitError(e){let r=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}},O3=Fp});var P3={};st(P3,{WsConnection:()=>Fp,default:()=>KQ});var KQ,B3=ge(()=>{c();Pv();Pv();KQ=O3});var p6=v((Il,Ou)=>{c();var zQ=200,Gv="__lodash_hash_undefined__",Qp=1,k3=2,K3=9007199254740991,Mp="[object Arguments]",Fv="[object Array]",WQ="[object AsyncFunction]",z3="[object Boolean]",W3="[object Date]",$3="[object Error]",Y3="[object Function]",$Q="[object GeneratorFunction]",Up="[object Map]",J3="[object Number]",YQ="[object Null]",Du="[object Object]",R3="[object Promise]",JQ="[object Proxy]",X3="[object RegExp]",qp="[object Set]",Z3="[object String]",XQ="[object Symbol]",ZQ="[object Undefined]",Mv="[object WeakMap]",e6="[object ArrayBuffer]",Vp="[object DataView]",ek="[object Float32Array]",tk="[object Float64Array]",rk="[object Int8Array]",nk="[object Int16Array]",ik="[object Int32Array]",sk="[object Uint8Array]",ok="[object Uint8ClampedArray]",ak="[object Uint16Array]",uk="[object Uint32Array]",ck=/[\\^$.*+?()[\]{}|]/g,lk=/^\[object .+?Constructor\]$/,fk=/^(?:0|[1-9]\d*)$/,Ye={};Ye[ek]=Ye[tk]=Ye[rk]=Ye[nk]=Ye[ik]=Ye[sk]=Ye[ok]=Ye[ak]=Ye[uk]=!0;Ye[Mp]=Ye[Fv]=Ye[e6]=Ye[z3]=Ye[Vp]=Ye[W3]=Ye[$3]=Ye[Y3]=Ye[Up]=Ye[J3]=Ye[Du]=Ye[X3]=Ye[qp]=Ye[Z3]=Ye[Mv]=!1;var t6=typeof global=="object"&&global&&global.Object===Object&&global,hk=typeof self=="object"&&self&&self.Object===Object&&self,Xn=t6||hk||Function("return this")(),r6=typeof Il=="object"&&Il&&!Il.nodeType&&Il,L3=r6&&typeof Ou=="object"&&Ou&&!Ou.nodeType&&Ou,n6=L3&&L3.exports===r6,Bv=n6&&t6.process,F3=function(){try{return Bv&&Bv.binding&&Bv.binding("util")}catch{}}(),M3=F3&&F3.isTypedArray;function dk(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function pk(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function gk(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function yk(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function mk(t){return function(e){return t(e)}}function wk(t,e){return t.has(e)}function Ek(t,e){return t?.[e]}function vk(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function Ak(t,e){return function(r){return t(e(r))}}function _k(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var bk=Array.prototype,Ik=Function.prototype,kp=Object.prototype,Rv=Xn["__core-js_shared__"],i6=Ik.toString,_n=kp.hasOwnProperty,U3=function(){var t=/[^.]+$/.exec(Rv&&Rv.keys&&Rv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),s6=kp.toString,Sk=RegExp("^"+i6.call(_n).replace(ck,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q3=n6?Xn.Buffer:void 0,Hp=Xn.Symbol,V3=Xn.Uint8Array,o6=kp.propertyIsEnumerable,Ck=bk.splice,co=Hp?Hp.toStringTag:void 0,H3=Object.getOwnPropertySymbols,Tk=q3?q3.isBuffer:void 0,xk=Ak(Object.keys,Object),Uv=Pu(Xn,"DataView"),Sl=Pu(Xn,"Map"),qv=Pu(Xn,"Promise"),Vv=Pu(Xn,"Set"),Hv=Pu(Xn,"WeakMap"),Cl=Pu(Object,"create"),Nk=ho(Uv),Dk=ho(Sl),Ok=ho(qv),Pk=ho(Vv),Bk=ho(Hv),j3=Hp?Hp.prototype:void 0,Lv=j3?j3.valueOf:void 0;function lo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Rk(){this.__data__=Cl?Cl(null):{},this.size=0}function Lk(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Fk(t){var e=this.__data__;if(Cl){var r=e[t];return r===Gv?void 0:r}return _n.call(e,t)?e[t]:void 0}function Mk(t){var e=this.__data__;return Cl?e[t]!==void 0:_n.call(e,t)}function Uk(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Cl&&e===void 0?Gv:e,this}lo.prototype.clear=Rk;lo.prototype.delete=Lk;lo.prototype.get=Fk;lo.prototype.has=Mk;lo.prototype.set=Uk;function Zn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qk(){this.__data__=[],this.size=0}function Vk(t){var e=this.__data__,r=Kp(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ck.call(e,r,1),--this.size,!0}function Hk(t){var e=this.__data__,r=Kp(e,t);return r<0?void 0:e[r][1]}function jk(t){return Kp(this.__data__,t)>-1}function Gk(t,e){var r=this.__data__,n=Kp(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}Zn.prototype.clear=qk;Zn.prototype.delete=Vk;Zn.prototype.get=Hk;Zn.prototype.has=jk;Zn.prototype.set=Gk;function fo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Qk(){this.size=0,this.__data__={hash:new lo,map:new(Sl||Zn),string:new lo}}function kk(t){var e=zp(this,t).delete(t);return this.size-=e?1:0,e}function Kk(t){return zp(this,t).get(t)}function zk(t){return zp(this,t).has(t)}function Wk(t,e){var r=zp(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}fo.prototype.clear=Qk;fo.prototype.delete=kk;fo.prototype.get=Kk;fo.prototype.has=zk;fo.prototype.set=Wk;function jp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new fo;++e<r;)this.add(t[e])}function $k(t){return this.__data__.set(t,Gv),this}function Yk(t){return this.__data__.has(t)}jp.prototype.add=jp.prototype.push=$k;jp.prototype.has=Yk;function Qi(t){var e=this.__data__=new Zn(t);this.size=e.size}function Jk(){this.__data__=new Zn,this.size=0}function Xk(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Zk(t){return this.__data__.get(t)}function eK(t){return this.__data__.has(t)}function tK(t,e){var r=this.__data__;if(r instanceof Zn){var n=r.__data__;if(!Sl||n.length<zQ-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new fo(n)}return r.set(t,e),this.size=r.size,this}Qi.prototype.clear=Jk;Qi.prototype.delete=Xk;Qi.prototype.get=Zk;Qi.prototype.has=eK;Qi.prototype.set=tK;function rK(t,e){var r=Gp(t),n=!r&&mK(t),i=!r&&!n&&jv(t),s=!r&&!n&&!i&&d6(t),o=r||n||i||s,a=o?yk(t.length,String):[],u=a.length;for(var l in t)(e||_n.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||hK(l,u)))&&a.push(l);return a}function Kp(t,e){for(var r=t.length;r--;)if(c6(t[r][0],e))return r;return-1}function nK(t,e,r){var n=e(t);return Gp(t)?n:pk(n,r(t))}function xl(t){return t==null?t===void 0?ZQ:YQ:co&&co in Object(t)?lK(t):yK(t)}function G3(t){return Tl(t)&&xl(t)==Mp}function a6(t,e,r,n,i){return t===e?!0:t==null||e==null||!Tl(t)&&!Tl(e)?t!==t&&e!==e:iK(t,e,r,n,a6,i)}function iK(t,e,r,n,i,s){var o=Gp(t),a=Gp(e),u=o?Fv:Gi(t),l=a?Fv:Gi(e);u=u==Mp?Du:u,l=l==Mp?Du:l;var f=u==Du,d=l==Du,y=u==l;if(y&&jv(t)){if(!jv(e))return!1;o=!0,f=!1}if(y&&!f)return s||(s=new Qi),o||d6(t)?u6(t,e,r,n,i,s):uK(t,e,u,r,n,i,s);if(!(r&Qp)){var w=f&&_n.call(t,"__wrapped__"),E=d&&_n.call(e,"__wrapped__");if(w||E){var O=w?t.value():t,L=E?e.value():e;return s||(s=new Qi),i(O,L,r,n,s)}}return y?(s||(s=new Qi),cK(t,e,r,n,i,s)):!1}function sK(t){if(!h6(t)||pK(t))return!1;var e=l6(t)?Sk:lk;return e.test(ho(t))}function oK(t){return Tl(t)&&f6(t.length)&&!!Ye[xl(t)]}function aK(t){if(!gK(t))return xk(t);var e=[];for(var r in Object(t))_n.call(t,r)&&r!="constructor"&&e.push(r);return e}function u6(t,e,r,n,i,s){var o=r&Qp,a=t.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var f=-1,d=!0,y=r&k3?new jp:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var w=t[f],E=e[f];if(n)var O=o?n(E,w,f,e,t,s):n(w,E,f,t,e,s);if(O!==void 0){if(O)continue;d=!1;break}if(y){if(!gk(e,function(L,U){if(!wk(y,U)&&(w===L||i(w,L,r,n,s)))return y.push(U)})){d=!1;break}}else if(!(w===E||i(w,E,r,n,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function uK(t,e,r,n,i,s,o){switch(r){case Vp:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case e6:return!(t.byteLength!=e.byteLength||!s(new V3(t),new V3(e)));case z3:case W3:case J3:return c6(+t,+e);case $3:return t.name==e.name&&t.message==e.message;case X3:case Z3:return t==e+"";case Up:var a=vk;case qp:var u=n&Qp;if(a||(a=_k),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=k3,o.set(t,e);var f=u6(a(t),a(e),n,i,s,o);return o.delete(t),f;case XQ:if(Lv)return Lv.call(t)==Lv.call(e)}return!1}function cK(t,e,r,n,i,s){var o=r&Qp,a=Q3(t),u=a.length,l=Q3(e),f=l.length;if(u!=f&&!o)return!1;for(var d=u;d--;){var y=a[d];if(!(o?y in e:_n.call(e,y)))return!1}var w=s.get(t);if(w&&s.get(e))return w==e;var E=!0;s.set(t,e),s.set(e,t);for(var O=o;++d<u;){y=a[d];var L=t[y],U=e[y];if(n)var T=o?n(U,L,y,e,t,s):n(L,U,y,t,e,s);if(!(T===void 0?L===U||i(L,U,r,n,s):T)){E=!1;break}O||(O=y=="constructor")}if(E&&!O){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(E=!1)}return s.delete(t),s.delete(e),E}function Q3(t){return nK(t,vK,fK)}function zp(t,e){var r=t.__data__;return dK(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Pu(t,e){var r=Ek(t,e);return sK(r)?r:void 0}function lK(t){var e=_n.call(t,co),r=t[co];try{t[co]=void 0;var n=!0}catch{}var i=s6.call(t);return n&&(e?t[co]=r:delete t[co]),i}var fK=H3?function(t){return t==null?[]:(t=Object(t),dk(H3(t),function(e){return o6.call(t,e)}))}:AK,Gi=xl;(Uv&&Gi(new Uv(new ArrayBuffer(1)))!=Vp||Sl&&Gi(new Sl)!=Up||qv&&Gi(qv.resolve())!=R3||Vv&&Gi(new Vv)!=qp||Hv&&Gi(new Hv)!=Mv)&&(Gi=function(t){var e=xl(t),r=e==Du?t.constructor:void 0,n=r?ho(r):"";if(n)switch(n){case Nk:return Vp;case Dk:return Up;case Ok:return R3;case Pk:return qp;case Bk:return Mv}return e});function hK(t,e){return e=e??K3,!!e&&(typeof t=="number"||fk.test(t))&&t>-1&&t%1==0&&t<e}function dK(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function pK(t){return!!U3&&U3 in t}function gK(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||kp;return t===r}function yK(t){return s6.call(t)}function ho(t){if(t!=null){try{return i6.call(t)}catch{}try{return t+""}catch{}}return""}function c6(t,e){return t===e||t!==t&&e!==e}var mK=G3(function(){return arguments}())?G3:function(t){return Tl(t)&&_n.call(t,"callee")&&!o6.call(t,"callee")},Gp=Array.isArray;function wK(t){return t!=null&&f6(t.length)&&!l6(t)}var jv=Tk||_K;function EK(t,e){return a6(t,e)}function l6(t){if(!h6(t))return!1;var e=xl(t);return e==Y3||e==$Q||e==WQ||e==JQ}function f6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=K3}function h6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Tl(t){return t!=null&&typeof t=="object"}var d6=M3?mk(M3):oK;function vK(t){return wK(t)?rK(t):aK(t)}function AK(){return[]}function _K(){return!1}Ou.exports=EK});var y8=v(ve=>{"use strict";c();Object.defineProperty(ve,"__esModule",{value:!0});var po=jn(),bK=dd(),IK=Jx(),ig=d2(),tt=DE(),ki=zE(),g6=(xd(),ot(v2)),SK=(QN(),ot(GN)),te=_p(),St=eo(),CK=(C3(),ot(S3)),Hr=(bl(),ot(Kt)),TK=(B3(),ot(P3)),xK=p6();function Ol(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function NK(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var DK=Ol(po),P6=Ol(bK),OK=Ol(IK),Wp=NK(SK),PK=Ol(TK),BK=Ol(xK);function RK(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function d(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var O=0,L=0,U=0,T=E.length;U!==T&&E[U]===0;)U++,O++;for(var b=(T-U)*f+1>>>0,x=new Uint8Array(b);U!==T;){for(var P=E[U],B=0,_=b-1;(P!==0||B<L)&&_!==-1;_--,B++)P+=256*x[_]>>>0,x[_]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");L=B,U++}for(var S=b-L;S!==b&&x[S]===0;)S++;for(var F=u.repeat(O);S<b;++S)F+=t.charAt(x[S]);return F}function y(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var O=0;if(E[O]!==" "){for(var L=0,U=0;E[O]===u;)L++,O++;for(var T=(E.length-O)*l+1>>>0,b=new Uint8Array(T);E[O];){var x=r[E.charCodeAt(O)];if(x===255)return;for(var P=0,B=T-1;(x!==0||P<U)&&B!==-1;B--,P++)x+=a*b[B]>>>0,b[B]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");U=P,O++}if(E[O]!==" "){for(var _=T-U;_!==T&&b[_]===0;)_++;for(var S=new Uint8Array(L+(T-_)),F=L;_!==T;)S[F++]=b[_++];return S}}}function w(E){var O=y(E);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:y,decode:w}}var LK=RK,FK=LK,B6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},MK=t=>new TextEncoder().encode(t),UK=t=>new TextDecoder().decode(t),Kv=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},zv=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return R6(this,e)}},Wv=class{constructor(e){this.decoders=e}or(e){return R6(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},R6=(t,e)=>new Wv({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),$v=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Kv(e,r,n),this.decoder=new zv(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},sg=({name:t,prefix:e,encode:r,decode:n})=>new $v(t,e,r,n),Pl=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=FK(r,e);return sg({prefix:t,name:e,encode:n,decode:s=>B6(i(s))})},qK=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,l=0;for(let f=0;f<s;++f){let d=i[t[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},VK=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Mt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>sg({prefix:e,name:t,encode(i){return VK(i,n,r)},decode(i){return qK(i,n,r,t)}}),HK=sg({prefix:"\0",name:"identity",encode:t=>UK(t),decode:t=>MK(t)}),jK=Object.freeze({__proto__:null,identity:HK}),GK=Mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QK=Object.freeze({__proto__:null,base2:GK}),kK=Mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),KK=Object.freeze({__proto__:null,base8:kK}),zK=Pl({prefix:"9",name:"base10",alphabet:"0123456789"}),WK=Object.freeze({__proto__:null,base10:zK}),$K=Mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),YK=Mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),JK=Object.freeze({__proto__:null,base16:$K,base16upper:YK}),XK=Mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZK=Mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ez=Mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tz=Mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rz=Mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nz=Mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iz=Mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sz=Mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),oz=Mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),az=Object.freeze({__proto__:null,base32:XK,base32upper:ZK,base32pad:ez,base32padupper:tz,base32hex:rz,base32hexupper:nz,base32hexpad:iz,base32hexpadupper:sz,base32z:oz}),uz=Pl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cz=Pl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lz=Object.freeze({__proto__:null,base36:uz,base36upper:cz}),fz=Pl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hz=Pl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),dz=Object.freeze({__proto__:null,base58btc:fz,base58flickr:hz}),pz=Mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gz=Mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yz=Mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mz=Mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),wz=Object.freeze({__proto__:null,base64:pz,base64pad:gz,base64url:yz,base64urlpad:mz}),L6=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ez=L6.reduce((t,e,r)=>(t[r]=e,t),[]),vz=L6.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Az(t){return t.reduce((e,r)=>(e+=Ez[r],e),"")}function _z(t){let e=[];for(let r of t){let n=vz[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var bz=sg({prefix:"\u{1F680}",name:"base256emoji",encode:Az,decode:_z}),Iz=Object.freeze({__proto__:null,base256emoji:bz}),Sz=F6,y6=128,Cz=127,Tz=~Cz,xz=Math.pow(2,31);function F6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=xz;)e[r++]=t&255|y6,t/=128;for(;t&Tz;)e[r++]=t&255|y6,t>>>=7;return e[r]=t|0,F6.bytes=r-n+1,e}var Nz=Yv,Dz=128,m6=127;function Yv(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Yv.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&m6)<<i:(o&m6)*Math.pow(2,i),i+=7}while(o>=Dz);return Yv.bytes=s-n,r}var Oz=Math.pow(2,7),Pz=Math.pow(2,14),Bz=Math.pow(2,21),Rz=Math.pow(2,28),Lz=Math.pow(2,35),Fz=Math.pow(2,42),Mz=Math.pow(2,49),Uz=Math.pow(2,56),qz=Math.pow(2,63),Vz=function(t){return t<Oz?1:t<Pz?2:t<Bz?3:t<Rz?4:t<Lz?5:t<Fz?6:t<Mz?7:t<Uz?8:t<qz?9:10},Hz={encode:Sz,decode:Nz,encodingLength:Vz},M6=Hz,w6=(t,e,r=0)=>(M6.encode(t,e,r),e),E6=t=>M6.encodingLength(t),Jv=(t,e)=>{let r=e.byteLength,n=E6(t),i=n+E6(r),s=new Uint8Array(i+r);return w6(t,s,0),w6(r,s,n),s.set(e,i),new Xv(t,r,e,s)},Xv=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}},U6=({name:t,code:e,encode:r})=>new Zv(t,e,r),Zv=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Jv(this.code,r):r.then(n=>Jv(this.code,n))}else throw Error("Unknown type, must be binary type")}},q6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),jz=U6({name:"sha2-256",code:18,encode:q6("SHA-256")}),Gz=U6({name:"sha2-512",code:19,encode:q6("SHA-512")}),Qz=Object.freeze({__proto__:null,sha256:jz,sha512:Gz}),V6=0,kz="identity",H6=B6,Kz=t=>Jv(V6,H6(t)),zz={code:V6,name:kz,encode:H6,digest:Kz},Wz=Object.freeze({__proto__:null,identity:zz});new TextEncoder,new TextDecoder;var v6={...jK,...QK,...KK,...WK,...JK,...az,...lz,...dz,...wz,...Iz};({...Qz,...Wz});function $z(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function j6(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var A6=j6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Qv=j6("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=$z(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Yz={utf8:A6,"utf-8":A6,hex:v6.base16,latin1:Qv,ascii:Qv,binary:Qv,...v6};function Jz(t,e="utf8"){let r=Yz[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var nA="wc",G6=2,og="core",ei=`${nA}@2:${og}:`,Q6={name:og,logger:"error"},k6={database:":memory:"},K6="crypto",eA="client_ed25519_seed",z6=St.ONE_DAY,W6="keychain",$6="0.3",Y6="messages",J6="0.3",X6=St.SIX_HOURS,Z6="publisher",e8="irn",t8="error",iA="wss://relay.walletconnect.com",r8="relayer",Ft={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},n8="_subscription",Dl={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},i8=St.ONE_SECOND,Xz={database:":memory:"},s8="2.5.2",o8="0.3",Vr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Zz=St.THIRTY_DAYS,a8="subscription",u8="0.3",c8=St.FIVE_SECONDS*1e3,l8="pairing",f8="0.3",eW=St.THIRTY_DAYS,Bu={wc_pairingDelete:{req:{ttl:St.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:St.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:St.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:St.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:St.ONE_DAY,prompt:!1,tag:0},res:{ttl:St.ONE_DAY,prompt:!1,tag:0}}},qr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},h8="history",d8="0.3",p8="expirer",Tr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},g8="0.3",tW=St.ONE_DAY,$p=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=W6,this.version=$6,this.initialized=!1,this.storagePrefix=ei,this.init=async()=>{if(!this.initialized){let n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();let i=this.keychain.get(n);if(typeof i>"u"){let{message:s}=te.getInternalError("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=tt.generateChildLogger(r,this.name)}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,te.mapToObj(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?te.objToMap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Yp=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=K6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();let i=await this.getClientSeed(),s=Wp.generateKeyPair(i);return Wp.encodeIss(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let i=te.generateKeyPair();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();let s=await this.getClientSeed(),o=Wp.generateKeyPair(s),a=te.generateRandomBytes32(),u=z6;return await Wp.signJWT(a,i,u,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();let a=this.getPrivateKey(i),u=te.deriveSymKey(a,s);return this.setSymKey(u,o)},this.setSymKey=async(i,s)=>{this.isInitialized();let o=s||te.hashKey(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();let a=te.validateEncoding(o),u=g6.safeJsonStringify(s);if(te.isTypeOneEnvelope(a)){let y=a.senderPublicKey,w=a.receiverPublicKey;i=await this.generateSharedKey(y,w)}let l=this.getSymKey(i),{type:f,senderPublicKey:d}=a;return te.encrypt({type:f,symKey:l,message:u,senderPublicKey:d})},this.decode=async(i,s,o)=>{this.isInitialized();let a=te.validateDecoding(s,o);if(te.isTypeOneEnvelope(a)){let f=a.receiverPublicKey,d=a.senderPublicKey;i=await this.generateSharedKey(f,d)}let u=this.getSymKey(i),l=te.decrypt({symKey:u,encoded:s});return g6.safeJsonParse(l)},this.core=e,this.logger=tt.generateChildLogger(r,this.name),this.keychain=n||new $p(this.core,this.logger)}get context(){return tt.getLoggerContext(this.logger)}getPayloadType(e){let r=te.deserialize(e);return te.decodeTypeByte(r.type)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(eA)}catch{e=te.generateRandomBytes32(),await this.keychain.set(eA,e)}return Jz(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Jp=class extends ki.IMessageTracker{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Y6,this.version=J6,this.initialized=!1,this.storagePrefix=ei,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();let s=te.hashMessage(i),o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();let s=this.get(n),o=te.hashMessage(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=tt.generateChildLogger(e,this.name),this.core=r}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,te.mapToObj(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?te.objToMap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},tA=class extends ki.IPublisher{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new po.EventEmitter,this.name=Z6,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{let o=s?.ttl||X6,a=te.getRelayProtocolName(s),u=s?.prompt||!1,l=s?.tag||0,f={topic:n,message:i,opts:{ttl:o,relay:a,prompt:u,tag:l}},d=te.hashMessage(i);this.queue.set(d,f);try{await await te.createExpiringPromise(this.rpcPublish(n,i,o,a,u,l),this.publishTimeout),this.relayer.events.emit(Ft.publish,f)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(Ft.connection_stalled);return}this.onPublish(d,f),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(o){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(o),o}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=tt.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return tt.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o){var a,u,l,f;let d={method:te.getRelayProtocolApi(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o}};return te.isUndefined((a=d.params)==null?void 0:a.prompt)&&((u=d.params)==null||delete u.prompt),te.isUndefined((l=d.params)==null?void 0:l.tag)&&((f=d.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:d}),this.relayer.request(d)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(ig.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}},rA=class{constructor(){this.map=new Map,this.set=(e,r)=>{let n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let n=this.get(e);if(!this.exists(e,r))return;let i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}},rW=Object.defineProperty,nW=Object.defineProperties,iW=Object.getOwnPropertyDescriptors,_6=Object.getOwnPropertySymbols,sW=Object.prototype.hasOwnProperty,oW=Object.prototype.propertyIsEnumerable,b6=(t,e,r)=>e in t?rW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nl=(t,e)=>{for(var r in e||(e={}))sW.call(e,r)&&b6(t,r,e[r]);if(_6)for(var r of _6(e))oW.call(e,r)&&b6(t,r,e[r]);return t},kv=(t,e)=>nW(t,iW(e)),Xp=class extends ki.ISubscriber{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new rA,this.events=new po.EventEmitter,this.name=a8,this.version=u8,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ei,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{let s=te.getRelayProtocolName(i),o={topic:n,relay:s};this.pending.set(n,o);let a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{let o=new St.Watch;o.start(this.pendingSubscriptionWatchLabel);let a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=c8&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pollingInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=tt.generateChildLogger(r,this.name),this.clientId=""}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){let n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{let i=te.getRelayProtocolName(n);await this.rpcUnsubscribe(e,r,i);let s=te.getSdkError("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){let n={method:te.getRelayProtocolApi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await te.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ft.connection_stalled)}return te.hashMessage(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;let r=e[0].relay,n={method:te.getRelayProtocolApi(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await te.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ft.connection_stalled)}}rpcUnsubscribe(e,r,n){let i={method:te.getRelayProtocolApi(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,kv(Nl({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Nl({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Nl({},r)),this.topicMap.set(r.topic,e),this.events.emit(Vr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let r=this.subscriptions.get(e);if(!r){let{message:n}=te.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});let n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Vr.deleted,kv(Nl({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Vr.sync)}async reset(){if(!this.cached.length)return;let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){let n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}this.events.emit(Vr.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:r}=te.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let r=await this.rpcBatchSubscribe(e);te.isValidArray(r)&&this.onBatchSubscribe(r.map((n,i)=>kv(Nl({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;let e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(ig.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ft.connect,async()=>{await this.onConnect()}),this.relayer.on(Ft.disconnect,()=>{this.onDisconnect()}),this.events.on(Vr.created,async e=>{let r=Vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Vr.deleted,async e=>{let r=Vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}},aW=Object.defineProperty,I6=Object.getOwnPropertySymbols,uW=Object.prototype.hasOwnProperty,cW=Object.prototype.propertyIsEnumerable,S6=(t,e,r)=>e in t?aW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lW=(t,e)=>{for(var r in e||(e={}))uW.call(e,r)&&S6(t,r,e[r]);if(I6)for(var r of I6(e))cW.call(e,r)&&S6(t,r,e[r]);return t},Zp=class extends ki.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new po.EventEmitter,this.name=r8,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?tt.generateChildLogger(e.logger,this.name):P6.default(tt.getDefaultLoggerOptions({level:e.logger||t8})),this.messages=new Jp(this.logger,e.core),this.subscriber=new Xp(this,this.logger),this.publisher=new tA(this,this.logger),this.relayUrl=e?.relayUrl||iA,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return tt.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(Vr.created,s=>{s.topic===e&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(e,r),i()})]),n}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ft.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Vr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await te.createExpiringPromise(this.provider.connect(),5e3,"socket stalled").catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(Ft.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Ft.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);let n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(Ft.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new CK.JsonRpcProvider(new PK.default(te.formatRelayRpcUrl({sdkVersion:s8,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){let{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Hr.isJsonRpcRequest(e)){if(!e.method.endsWith(n8))return;let r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(lW({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ft.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let r=Hr.formatJsonRpcResult(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Dl.payload,e=>this.onProviderPayload(e)),this.provider.on(Dl.connect,()=>{this.events.emit(Ft.connect)}),this.provider.on(Dl.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Dl.error,e=>{this.logger.error(e),this.events.emit(Ft.error,e)})}registerEventListeners(){this.events.on(Ft.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ft.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},St.toMiliseconds(i8))}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}},fW=Object.defineProperty,C6=Object.getOwnPropertySymbols,hW=Object.prototype.hasOwnProperty,dW=Object.prototype.propertyIsEnumerable,T6=(t,e,r)=>e in t?fW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x6=(t,e)=>{for(var r in e||(e={}))hW.call(e,r)&&T6(t,r,e[r]);if(C6)for(var r of C6(e))dW.call(e,r)&&T6(t,r,e[r]);return t},eg=class extends ki.IStore{constructor(e,r,n,i=ei,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=o8,this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!te.isUndefined(o)?this.map.set(this.getKey(o),o):te.isProposalStruct(o)?this.map.set(o.id,o):te.isSessionStruct(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>BK.default(a[u],o[u]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});let u=x6(x6({},this.getData(o)),a);this.map.set(o,u),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=tt.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let r=this.map.get(e);if(!r){let{message:n}=te.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:r}=te.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},tg=class{constructor(e,r){this.core=e,this.logger=r,this.name=l8,this.version=f8,this.events=new DK.default,this.initialized=!1,this.storagePrefix=ei,this.ignoredPayloadTypes=[te.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();let n=te.generateRandomBytes32(),i=await this.core.crypto.setSymKey(n),s=te.calcExpiry(St.FIVE_MINUTES),o={protocol:e8},a={topic:i,expiry:s,relay:o,active:!1},u=te.formatUri({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:u}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);let{topic:i,symKey:s,relay:o}=te.parseUri(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);let a=te.calcExpiry(St.FIVE_MINUTES),u={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,u),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),u},this.activate=async({topic:n})=>{this.isInitialized();let i=te.calcExpiry(St.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);let{topic:i}=n;if(this.pairings.keys.includes(i)){let s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=te.createDelayedPromise();this.events.once(te.engineEvent("pairing_ping",s),({error:l})=>{l?u(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);let{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",te.getSdkError("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{let o=Hr.formatJsonRpcRequest(i,s),a=await this.core.crypto.encode(n,o),u=Bu[i].req;return this.core.history.set(n,o),await this.core.relayer.publish(n,a,u),o.id},this.sendResult=async(n,i,s)=>{let o=Hr.formatJsonRpcResult(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Bu[u.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{let o=Hr.formatJsonRpcError(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Bu[u.request.method]?Bu[u.request.method].res:Bu.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,te.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{let n=this.pairings.getAll().filter(i=>te.isExpired(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{let{topic:i,payload:s}=n,o=s.method;if(this.pairings.keys.includes(i))switch(o){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{let{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{let{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{let{id:s}=i;setTimeout(()=>{Hr.isJsonRpcResult(i)?this.events.emit(te.engineEvent("pairing_ping",s),{}):Hr.isJsonRpcError(i)&&this.events.emit(te.engineEvent("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{let{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{let{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;let a=te.getSdkError("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(te.getSdkError("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!te.isValidParams(n)){let{message:i}=te.getInternalError("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!te.isValidUrl(n.uri)){let{message:i}=te.getInternalError("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!te.isValidParams(n)){let{message:s}=te.getInternalError("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!te.isValidParams(n)){let{message:s}=te.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!te.isValidString(n,!1)){let{message:i}=te.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){let{message:i}=te.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(te.isExpired(this.pairings.get(n).expiry)){await this.deletePairing(n);let{message:i}=te.getInternalError("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=tt.generateChildLogger(r,this.name),this.pairings=new eg(this.core,this.logger,this.name,this.storagePrefix)}get context(){return tt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ft.message,async e=>{let{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;let i=await this.core.crypto.decode(r,n);Hr.isJsonRpcRequest(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Hr.isJsonRpcResponse(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Tr.expired,async e=>{let{topic:r}=te.parseExpirerTarget(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},rg=class extends ki.IJsonRpcHistory{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new po.EventEmitter,this.name=h8,this.version=d8,this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;let o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s};this.records.set(o.id,o),this.events.emit(qr.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;let i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Hr.isJsonRpcError(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(qr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(qr.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=tt.generateChildLogger(r,this.name)}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;let n={topic:r.topic,request:Hr.formatJsonRpcRequest(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let r=this.records.get(e);if(!r){let{message:n}=te.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(qr.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:r}=te.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(qr.created,e=>{let r=qr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(qr.updated,e=>{let r=qr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(qr.deleted,e=>{let r=qr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},ng=class extends ki.IExpirer{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new po.EventEmitter,this.name=p8,this.version=g8,this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{let i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();let s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Tr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();let i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){let i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Tr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=tt.generateChildLogger(r,this.name)}get context(){return tt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return te.formatTopicTarget(e);if(typeof e=="number")return te.formatIdTarget(e);let{message:r}=te.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Tr.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:r}=te.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let r=this.expirations.get(e);if(!r){let{message:n}=te.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){let{expiry:n}=r;St.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Tr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ig.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Tr.created,e=>{let r=Tr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Tr.expired,e=>{let r=Tr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Tr.deleted,e=>{let r=Tr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=te.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},pW=Object.defineProperty,N6=Object.getOwnPropertySymbols,gW=Object.prototype.hasOwnProperty,yW=Object.prototype.propertyIsEnumerable,D6=(t,e,r)=>e in t?pW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O6=(t,e)=>{for(var r in e||(e={}))gW.call(e,r)&&D6(t,r,e[r]);if(N6)for(var r of N6(e))yW.call(e,r)&&D6(t,r,e[r]);return t},Ru=class extends ki.ICore{constructor(e){super(e),this.protocol=nA,this.version=G6,this.name=og,this.events=new po.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||iA;let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:P6.default(tt.getDefaultLoggerOptions({level:e?.logger||Q6.logger}));this.logger=tt.generateChildLogger(r,this.name),this.heartbeat=new ig.HeartBeat,this.crypto=new Yp(this,this.logger,e?.keychain),this.history=new rg(this,this.logger),this.expirer=new ng(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new OK.default(O6(O6({},k6),e?.storageOptions)),this.relayer=new Zp({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new tg(this,this.logger)}static async init(e){let r=new Ru(e);return await r.initialize(),r}get context(){return tt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},mW=Ru;ve.CORE_CONTEXT=og,ve.CORE_DEFAULT=Q6,ve.CORE_PROTOCOL=nA,ve.CORE_STORAGE_OPTIONS=k6,ve.CORE_STORAGE_PREFIX=ei,ve.CORE_VERSION=G6,ve.CRYPTO_CLIENT_SEED=eA,ve.CRYPTO_CONTEXT=K6,ve.CRYPTO_JWT_TTL=z6,ve.Core=mW,ve.Crypto=Yp,ve.EXPIRER_CONTEXT=p8,ve.EXPIRER_DEFAULT_TTL=tW,ve.EXPIRER_EVENTS=Tr,ve.EXPIRER_STORAGE_VERSION=g8,ve.Expirer=ng,ve.HISTORY_CONTEXT=h8,ve.HISTORY_EVENTS=qr,ve.HISTORY_STORAGE_VERSION=d8,ve.JsonRpcHistory=rg,ve.KEYCHAIN_CONTEXT=W6,ve.KEYCHAIN_STORAGE_VERSION=$6,ve.KeyChain=$p,ve.MESSAGES_CONTEXT=Y6,ve.MESSAGES_STORAGE_VERSION=J6,ve.MessageTracker=Jp,ve.PAIRING_CONTEXT=l8,ve.PAIRING_DEFAULT_TTL=eW,ve.PAIRING_RPC_OPTS=Bu,ve.PAIRING_STORAGE_VERSION=f8,ve.PENDING_SUB_RESOLUTION_TIMEOUT=c8,ve.PUBLISHER_CONTEXT=Z6,ve.PUBLISHER_DEFAULT_TTL=X6,ve.Pairing=tg,ve.RELAYER_CONTEXT=r8,ve.RELAYER_DEFAULT_LOGGER=t8,ve.RELAYER_DEFAULT_PROTOCOL=e8,ve.RELAYER_DEFAULT_RELAY_URL=iA,ve.RELAYER_EVENTS=Ft,ve.RELAYER_PROVIDER_EVENTS=Dl,ve.RELAYER_RECONNECT_TIMEOUT=i8,ve.RELAYER_SDK_VERSION=s8,ve.RELAYER_STORAGE_OPTIONS=Xz,ve.RELAYER_SUBSCRIBER_SUFFIX=n8,ve.Relayer=Zp,ve.STORE_STORAGE_VERSION=o8,ve.SUBSCRIBER_CONTEXT=a8,ve.SUBSCRIBER_DEFAULT_TTL=Zz,ve.SUBSCRIBER_EVENTS=Vr,ve.SUBSCRIBER_STORAGE_VERSION=u8,ve.Store=eg,ve.Subscriber=Xp,ve.default=Ru});var T8=v(rt=>{"use strict";c();Object.defineProperty(rt,"__esModule",{value:!0});var wW=dd(),Ki=y8(),sA=DE(),E8=zE(),Q=_p(),v8=jn(),nt=eo(),Ct=(bl(),ot(Kt));function A8(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var EW=A8(wW),vW=A8(v8),fA="wc",hA=2,dA="client",cg=`${fA}@${hA}:${dA}:`,ag={name:dA,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},AW={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},_W={database:":memory:"},bW={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},IW="history",SW="0.3",_8="proposal",CW=nt.THIRTY_DAYS,b8="Proposal expired",I8="session",Bl=nt.SEVEN_DAYS,S8="engine",Lu={wc_sessionPropose:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1115}}},ug={min:nt.FIVE_MINUTES,max:nt.SEVEN_DAYS},C8="request",TW=Object.defineProperty,xW=Object.defineProperties,NW=Object.getOwnPropertyDescriptors,m8=Object.getOwnPropertySymbols,DW=Object.prototype.hasOwnProperty,OW=Object.prototype.propertyIsEnumerable,w8=(t,e,r)=>e in t?TW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xr=(t,e)=>{for(var r in e||(e={}))DW.call(e,r)&&w8(t,r,e[r]);if(m8)for(var r of m8(e))OW.call(e,r)&&w8(t,r,e[r]);return t},oA=(t,e)=>xW(t,NW(e)),aA=class extends E8.IEngine{constructor(e){super(e),this.name=S8,this.events=new vW.default,this.initialized=!1,this.ignoredPayloadTypes=[Q.TYPE_1],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Lu)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();let n=oA(xr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);let{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:u}=n,l=i,f,d=!1;if(l&&(d=this.client.core.pairing.pairings.get(l).active),!l||!d){let{topic:b,uri:x}=await this.client.core.pairing.create();l=b,f=x}let y=await this.client.core.crypto.generateKeyPair(),w=xr({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:Ki.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:y,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:E,resolve:O,done:L}=Q.createDelayedPromise(nt.FIVE_MINUTES,b8);if(this.events.once(Q.engineEvent("session_connect"),async({error:b,session:x})=>{if(b)E(b);else if(x){x.self.publicKey=y;let P=oA(xr({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,P),await this.setExpiry(x.topic,x.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:x.peer.metadata}),O(P)}}),!l){let{message:b}=Q.getInternalError("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(b)}let U=await this.sendRequest(l,"wc_sessionPropose",w),T=Q.calcExpiry(nt.FIVE_MINUTES);return await this.setProposal(U,xr({id:U,expiry:T},w)),{uri:f,approval:L}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);let{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n),{pairingTopic:u,proposer:l,requiredNamespaces:f,optionalNamespaces:d}=a;Q.isValidObject(f)||(f=Q.getRequiredNamespacesFromNamespaces(s,"approve()"));let y=await this.client.core.crypto.generateKeyPair(),w=l.publicKey,E=await this.client.core.crypto.generateSharedKey(y,w);u&&n&&(await this.client.core.pairing.updateMetadata({topic:u,metadata:l.metadata}),await this.sendResult(n,u,{relay:{protocol:i??"irn"},responderPublicKey:y}),await this.client.proposal.delete(n,Q.getSdkError("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}));let O=xr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:d,controller:{publicKey:y,metadata:this.client.metadata},expiry:Q.calcExpiry(Bl)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(E);let L=await this.sendRequest(E,"wc_sessionSettle",O),{done:U,resolve:T,reject:b}=Q.createDelayedPromise();this.events.once(Q.engineEvent("session_approve",L),({error:P})=>{P?b(P):T(this.client.session.get(E))});let x=oA(xr({},O),{topic:E,acknowledged:!1,self:O.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:y});return await this.client.session.set(E,x),await this.setExpiry(E,Q.calcExpiry(Bl)),{topic:E,acknowledged:U}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);let{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Q.getSdkError("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);let{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:o,resolve:a,reject:u}=Q.createDelayedPromise();return this.events.once(Q.engineEvent("session_update",s),({error:l})=>{l?u(l):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);let{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:o,reject:a}=Q.createDelayedPromise();return this.events.once(Q.engineEvent("session_extend",i),({error:u})=>{u?a(u):o()}),await this.setExpiry(n,Q.calcExpiry(Bl)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);let{chainId:n,request:i,topic:s,expiry:o}=r,a=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},o),{done:u,resolve:l,reject:f}=Q.createDelayedPromise(o);return this.events.once(Q.engineEvent("session_request",a),({error:d,result:y})=>{d?f(d):l(y)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),await u()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);let{topic:n,response:i}=r,{id:s}=i;Ct.isJsonRpcResult(i)?await this.sendResult(s,n,i.result):Ct.isJsonRpcError(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);let{topic:n}=r;if(this.client.session.keys.includes(n)){let i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:o,reject:a}=Q.createDelayedPromise();this.events.once(Q.engineEvent("session_ping",i),({error:u})=>{u?a(u):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);let{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);let{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",Q.getSdkError("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Q.isSessionCompatible(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,n)=>{let{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Q.getSdkError("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Q.getSdkError("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{let n=Lu.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Q.calcExpiry(n))},this.sendRequest=async(r,n,i,s)=>{let o=Ct.formatJsonRpcRequest(n,i),a=await this.client.core.crypto.encode(r,o),u=Lu[n].req;return s&&(u.ttl=s),this.client.core.history.set(r,o),this.client.core.relayer.publish(r,a,u),o.id},this.sendResult=async(r,n,i)=>{let s=Ct.formatJsonRpcResult(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),u=Lu[a.request.method].res;this.client.core.relayer.publish(n,o,u),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{let s=Ct.formatJsonRpcError(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),u=Lu[a.request.method].res;this.client.core.relayer.publish(n,o,u),await this.client.core.history.resolve(s)},this.cleanup=async()=>{let r=[],n=[];this.client.session.getAll().forEach(i=>{Q.isExpired(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Q.isExpired(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{let{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{let{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(r,n)=>{let{params:i,id:s}=n;try{this.isValidConnect(xr({},n.params));let o=Q.calcExpiry(nt.FIVE_MINUTES),a=xr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a),this.client.events.emit("session_proposal",{id:s,params:a})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{let{id:i}=n;if(Ct.isJsonRpcResult(n)){let{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});let o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});let a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});let u=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});let l=await this.client.core.crypto.generateSharedKey(a,u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});let f=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else Ct.isJsonRpcError(n)&&(await this.client.proposal.delete(i,Q.getSdkError("USER_DISCONNECTED")),this.events.emit(Q.engineEvent("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);let{relay:o,controller:a,expiry:u,namespaces:l,requiredNamespaces:f,optionalNamespaces:d,sessionProperties:y}=n.params,w=xr({topic:r,relay:o,expiry:u,namespaces:l,acknowledged:!0,requiredNamespaces:f,optionalNamespaces:d,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},y&&{sessionProperties:y});await this.sendResult(n.id,r,!0),this.events.emit(Q.engineEvent("session_connect"),{session:w})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{let{id:i}=n;Ct.isJsonRpcResult(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Q.engineEvent("session_approve",i),{})):Ct.isJsonRpcError(n)&&(await this.client.session.delete(r,Q.getSdkError("USER_DISCONNECTED")),this.events.emit(Q.engineEvent("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{let{params:i,id:s}=n;try{this.isValidUpdate(xr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionUpdateResponse=(r,n)=>{let{id:i}=n;Ct.isJsonRpcResult(n)?this.events.emit(Q.engineEvent("session_update",i),{}):Ct.isJsonRpcError(n)&&this.events.emit(Q.engineEvent("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{let{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Q.calcExpiry(Bl)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{let{id:i}=n;Ct.isJsonRpcResult(n)?this.events.emit(Q.engineEvent("session_extend",i),{}):Ct.isJsonRpcError(n)&&this.events.emit(Q.engineEvent("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{let{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{let{id:i}=n;setTimeout(()=>{Ct.isJsonRpcResult(n)?this.events.emit(Q.engineEvent("session_ping",i),{}):Ct.isJsonRpcError(n)&&this.events.emit(Q.engineEvent("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{let{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),this.client.core.relayer.once(Ki.RELAYER_EVENTS.publish,async()=>{await this.deleteSession(r)}),await this.sendResult(i,r,!0),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidRequest(xr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.client.events.emit("session_request",{id:i,topic:r,params:s})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{let{id:i}=n;Ct.isJsonRpcResult(n)?this.events.emit(Q.engineEvent("session_request",i),{result:n.result}):Ct.isJsonRpcError(n)&&this.events.emit(Q.engineEvent("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidEmit(xr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.isValidConnect=async r=>{if(!Q.isValidParams(r)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}let{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Q.isUndefined(n)||await this.isValidPairingTopic(n),!Q.isValidRelays(a,!0)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(u)}!Q.isUndefined(i)&&Q.isValidObject(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Q.isUndefined(s)&&Q.isValidObject(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Q.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{let i=Q.isValidRequiredNamespaces(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Q.isValidParams(r))throw new Error(Q.getInternalError("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);let a=this.client.proposal.get(n),u=Q.isValidNamespaces(i,"approve()");if(u)throw new Error(u.message);let l=Q.isConformingNamespaces(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!Q.isValidString(s,!0)){let{message:f}=Q.getInternalError("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}Q.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Q.isValidParams(r)){let{message:s}=Q.getInternalError("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}let{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Q.isValidErrorReason(i)){let{message:s}=Q.getInternalError("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Q.isValidParams(r)){let{message:l}=Q.getInternalError("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}let{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Q.isValidRelay(n)){let{message:l}=Q.getInternalError("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}let a=Q.isValidController(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);let u=Q.isValidNamespaces(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Q.isExpired(o)){let{message:l}=Q.getInternalError("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!Q.isValidParams(r)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}let{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);let s=this.client.session.get(n),o=Q.isValidNamespaces(i,"update()");if(o)throw new Error(o.message);let a=Q.isConformingNamespaces(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Q.isValidParams(r)){let{message:i}=Q.getInternalError("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Q.isValidParams(r)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}let{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);let{namespaces:a}=this.client.session.get(n);if(!Q.isValidNamespacesChainId(a,s)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!Q.isValidRequest(i)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!Q.isValidNamespacesRequest(a,s,i.method)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!Q.isValidRequestExpiry(o,ug)){let{message:u}=Q.getInternalError("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ug.min} and ${ug.max}`);throw new Error(u)}},this.isValidRespond=async r=>{if(!Q.isValidParams(r)){let{message:s}=Q.getInternalError("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}let{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Q.isValidResponse(i)){let{message:s}=Q.getInternalError("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Q.isValidParams(r)){let{message:i}=Q.getInternalError("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Q.isValidParams(r)){let{message:a}=Q.getInternalError("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}let{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);let{namespaces:o}=this.client.session.get(n);if(!Q.isValidNamespacesChainId(o,s)){let{message:a}=Q.getInternalError("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Q.isValidEvent(i)){let{message:a}=Q.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Q.isValidNamespacesEvent(o,s,i.name)){let{message:a}=Q.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Q.isValidParams(r)){let{message:i}=Q.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Q.isValidString(i,!1)){let{message:s}=Q.getInternalError("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){let{message:e}=Q.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ki.RELAYER_EVENTS.message,async e=>{let{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;let i=await this.client.core.crypto.decode(r,n);Ct.isJsonRpcRequest(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ct.isJsonRpcResponse(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Ki.EXPIRER_EVENTS.expired,async e=>{let{topic:r,id:n}=Q.parseExpirerTarget(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Q.getInternalError("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Q.isValidString(e,!1)){let{message:r}=Q.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:r}=Q.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Q.isExpired(this.client.core.pairing.pairings.get(e).expiry)){let{message:r}=Q.getInternalError("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Q.isValidString(e,!1)){let{message:r}=Q.getInternalError("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){let{message:r}=Q.getInternalError("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Q.isExpired(this.client.session.get(e).expiry)){await this.deleteSession(e);let{message:r}=Q.getInternalError("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Q.isValidString(e,!1)){let{message:r}=Q.getInternalError("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{let{message:r}=Q.getInternalError("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Q.isValidId(e)){let{message:r}=Q.getInternalError("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){let{message:r}=Q.getInternalError("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Q.isExpired(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);let{message:r}=Q.getInternalError("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},uA=class extends Ki.Store{constructor(e,r){super(e,r,_8,cg),this.core=e,this.logger=r}},cA=class extends Ki.Store{constructor(e,r){super(e,r,I8,cg),this.core=e,this.logger=r}},lA=class extends Ki.Store{constructor(e,r){super(e,r,C8,cg,n=>n.id),this.core=e,this.logger=r}},Fu=class extends E8.ISignClient{constructor(e){super(e),this.protocol=fA,this.version=hA,this.name=ag.name,this.events=new v8.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||ag.name,this.metadata=e?.metadata||Q.getAppMetadata();let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:EW.default(sA.getDefaultLoggerOptions({level:e?.logger||ag.logger}));this.core=e?.core||new Ki.Core(e),this.logger=sA.generateChildLogger(r,this.name),this.session=new cA(this.core,this.logger),this.proposal=new uA(this.core,this.logger),this.pendingRequest=new lA(this.core,this.logger),this.engine=new aA(this)}static async init(e){let r=new Fu(e);return await r.initialize(),r}get context(){return sA.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}},PW=Fu;rt.ENGINE_CONTEXT=S8,rt.ENGINE_RPC_OPTS=Lu,rt.HISTORY_CONTEXT=IW,rt.HISTORY_EVENTS=bW,rt.HISTORY_STORAGE_VERSION=SW,rt.PROPOSAL_CONTEXT=_8,rt.PROPOSAL_EXPIRY=CW,rt.PROPOSAL_EXPIRY_MESSAGE=b8,rt.REQUEST_CONTEXT=C8,rt.SESSION_CONTEXT=I8,rt.SESSION_EXPIRY=Bl,rt.SESSION_REQUEST_EXPIRY_BOUNDARIES=ug,rt.SIGN_CLIENT_CONTEXT=dA,rt.SIGN_CLIENT_DEFAULT=ag,rt.SIGN_CLIENT_EVENTS=AW,rt.SIGN_CLIENT_PROTOCOL=fA,rt.SIGN_CLIENT_STORAGE_OPTIONS=_W,rt.SIGN_CLIENT_STORAGE_PREFIX=cg,rt.SIGN_CLIENT_VERSION=hA,rt.SignClient=PW,rt.default=Fu});var pA=v(Rl=>{"use strict";c();Object.defineProperty(Rl,"__esModule",{value:!0});Rl.Operation=void 0;var BW;(function(t){t.SIGN_TRANSACTION="mvx_signTransaction",t.SIGN_TRANSACTIONS="mvx_signTransactions",t.SIGN_MESSAGE="mvx_signMessage",t.SIGN_LOGIN_TOKEN="mvx_signLoginToken"})(BW=Rl.Operation||(Rl.Operation={}))});var x8=v(zi=>{"use strict";c();Object.defineProperty(zi,"__esModule",{value:!0});zi.WALLETCONNECT_MULTIVERSX_METHODS=zi.WALLETCONNECT_MULTIVERSX_NAMESPACE=zi.WALLETCONNECT_MULTIVERSX_CHAIN_ID=void 0;var RW=pA();zi.WALLETCONNECT_MULTIVERSX_CHAIN_ID=508;zi.WALLETCONNECT_MULTIVERSX_NAMESPACE="mvx";zi.WALLETCONNECT_MULTIVERSX_METHODS=Object.values(RW.Operation)});var N8=v(lg=>{"use strict";c();Object.defineProperty(lg,"__esModule",{value:!0});lg.Logger=void 0;var gA=class{static error(e){console.error(e)}static trace(e){console.trace(e)}};lg.Logger=gA});var D8=v(Mu=>{"use strict";c();Object.defineProperty(Mu,"__esModule",{value:!0});Mu.Signature=Mu.Address=void 0;var yA=class{constructor(e){this.value=e}bech32(){return this.value}};Mu.Address=yA;var Ll=class{constructor(e){this.buffer=e}static fromHex(e){return new Ll(h.Buffer.from(e,"hex"))}hex(){return this.buffer.toString("hex")}};Mu.Signature=Ll});var EA=v(jr=>{"use strict";c();Object.defineProperty(jr,"__esModule",{value:!0});jr.WalletConnectV2ProviderErrorMessagesEnum=jr.ErrBadAddress=jr.ErrNotImplemented=jr.Err=void 0;var Fl=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};jr.Err=Fl;var mA=class extends Fl{constructor(){super("Method not yet implemented")}};jr.ErrNotImplemented=mA;var wA=class extends Fl{constructor(e,r){super(`Bad address: ${e}`,r)}};jr.ErrBadAddress=wA;var LW;(function(t){t.unableToInit="WalletConnect is unable to init",t.notInitialized="WalletConnect is not initialized",t.unableToConnect="WalletConnect is unable to connect",t.unableToConnectExisting="WalletConnect is unable to connect to existing pairing",t.unableToSignLoginToken="WalletConnect could not sign login token",t.unableToLogin="WalletConnect is unable to login",t.unableToHandleTopic="WalletConnect: Unable to handle topic update",t.unableToHandleEvent="WalletConnect: Unable to handle events",t.unableToHandleCleanup="WalletConnect: Unable to handle cleanup",t.sessionNotConnected="WalletConnect Session is not connected",t.sessionDeleted="WalletConnect Session Deleted",t.sessionExpired="WalletConnect Session Expired",t.alreadyLoggedOut="WalletConnect: Already logged out",t.pingFailed="WalletConnect Ping Failed",t.invalidAddress="WalletConnect: Invalid address",t.requestDifferentChain="WalletConnect: Request Chain Id different than Connection Chain Id",t.invalidMessageResponse="WalletConnect could not sign the message",t.invalidMessageSignature="WalletConnect: Invalid message signature",t.invalidTransactionResponse="WalletConnect could not sign the transactions. Invalid signatures",t.invalidCustomRequestResponse="WalletConnect could not send the custom request",t.transactionError="Transaction canceled",t.connectionError="WalletConnect could not establish a connection"})(LW=jr.WalletConnectV2ProviderErrorMessagesEnum||(jr.WalletConnectV2ProviderErrorMessagesEnum={}))});var P8=v(bn=>{"use strict";c();var FW=bn&&bn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MW=bn&&bn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UW=bn&&bn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FW(e,t,r);return MW(e,t),e};Object.defineProperty(bn,"__esModule",{value:!0});bn.UserAddress=void 0;var qW=UW(Cf()),O8=EA(),VW="erd",Ml=class{constructor(e){this.value=e}static fromBech32(e){let r;try{r=qW.decode(e)}catch(n){throw new O8.ErrBadAddress(e,n)}if(r.prefix!=VW)throw new O8.ErrBadAddress(e);return new Ml(e)}bech32(){return this.value}};bn.UserAddress=Ml});var ql=v(In=>{"use strict";c();var gt=In&&In.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},HW=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(In,"__esModule",{value:!0});In.WalletConnectV2Provider=In.WalletConnectV2ProviderErrorMessagesEnum=void 0;var jW=HW(T8()),vA=_p(),go=x8(),fg=pA(),Re=N8(),Ul=D8(),de=EA();Object.defineProperty(In,"WalletConnectV2ProviderErrorMessagesEnum",{enumerable:!0,get:function(){return de.WalletConnectV2ProviderErrorMessagesEnum}});var hg=P8(),AA=class{constructor(e,r,n,i,s){this.chainId="",this.address="",this.signature="",this.namespace=go.WALLETCONNECT_MULTIVERSX_NAMESPACE,this.isInitializing=!1,this.events=[],this.methods=[],this.processingTopic="",this.options={},this.onClientConnect=e,this.chainId=r,this.walletConnectV2Relay=n,this.walletConnectV2ProjectId=i,this.options=s}reset(){this.address="",this.signature="",this.namespace=go.WALLETCONNECT_MULTIVERSX_NAMESPACE,this.session=void 0}init(){return gt(this,void 0,void 0,function*(){if(this.isInitialized())return this.isInitialized();try{if(!this.isInitializing){this.isInitializing=!0,this.reset();let e=yield jW.default.init(Object.assign({relayUrl:this.walletConnectV2Relay,projectId:this.walletConnectV2ProjectId},this.options));this.walletConnector=e,this.isInitializing=!1,yield this.subscribeToEvents(e),yield this.checkPersistedState(e)}}catch{throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToInit)}finally{return this.isInitializing=!1,this.isInitialized()}})}isInitialized(){return!!this.walletConnector&&!this.isInitializing}isConnected(){return new Promise((e,r)=>e(!!(this.isInitialized()&&typeof this.session<"u")))}connect(e){var r,n,i,s;return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let o=this.getConnectionParams(e);try{let a=yield this.walletConnector.connect(Object.assign({pairingTopic:e?.topic},o));return this.events=(n=(r=o?.requiredNamespaces)===null||r===void 0?void 0:r[go.WALLETCONNECT_MULTIVERSX_NAMESPACE])===null||n===void 0?void 0:n.events,this.methods=(s=(i=o?.requiredNamespaces)===null||i===void 0?void 0:i[go.WALLETCONNECT_MULTIVERSX_NAMESPACE])===null||s===void 0?void 0:s.methods,a}catch{throw this.reset(),Re.Logger.error(e?.topic?de.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:de.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect),new Error(e?.topic?de.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:de.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect)}})}login(e){var r;return gt(this,void 0,void 0,function*(){if(this.isInitializing=!0,typeof this.walletConnector>"u"&&(yield this.connect()),typeof this.walletConnector>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session<"u"&&(yield this.logout({topic:(r=this.session)===null||r===void 0?void 0:r.topic}));try{if(e&&e.approval){let n=yield e.approval();if(e.token){let i=this.getAddressFromSession(n),{signature:s}=yield this.walletConnector.request({chainId:`${this.namespace}:${this.chainId}`,topic:n.topic,request:{method:fg.Operation.SIGN_LOGIN_TOKEN,params:{token:e.token,address:i}}});if(!s)throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken);return yield this.onSessionConnected({session:n,signature:s})}return yield this.onSessionConnected({session:n,signature:""})}}catch{throw this.reset(),Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin)}finally{this.isInitializing=!1}return""})}logout(e){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{if(this.processingTopic===(e?.topic||this.getCurrentTopic(this.walletConnector)))return!0;if(e?.topic)this.processingTopic=e.topic,yield this.walletConnector.disconnect({topic:e.topic,reason:vA.getSdkError("USER_DISCONNECTED")});else{let r=this.getCurrentTopic(this.walletConnector);this.processingTopic=r,yield this.walletConnector.disconnect({topic:r,reason:vA.getSdkError("USER_DISCONNECTED")}),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0})}}catch{Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.alreadyLoggedOut)}finally{this.processingTopic=""}return!0})}getAddress(){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.address})}getSignature(){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.signature})}getPairings(){var e,r,n,i,s;return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return(s=(i=(n=(r=(e=this.walletConnector)===null||e===void 0?void 0:e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll({active:!0}))!==null&&s!==void 0?s:[]})}signMessage(e){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=yield this.getAddress(),{signature:n}=yield this.walletConnector.request({chainId:`${this.namespace}:${this.chainId}`,topic:this.getCurrentTopic(this.walletConnector),request:{method:fg.Operation.SIGN_MESSAGE,params:{address:r,message:e.message.toString()}}});if(!n)throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse);try{e.applySignature(new Ul.Signature(n),hg.UserAddress.fromBech32(r))}catch{throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature)}return e})}signTransaction(e){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=yield this.getAddress(),n=new Ul.Address(r),i=e.toPlainObject(n);if(this.chainId!==e.getChainID().valueOf())throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);try{let{signature:s}=yield this.walletConnector.request({chainId:`${this.namespace}:${this.chainId}`,topic:this.getCurrentTopic(this.walletConnector),request:{method:fg.Operation.SIGN_TRANSACTION,params:{transaction:i}}});if(!s)throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);return e.applySignature(Ul.Signature.fromHex(s),hg.UserAddress.fromBech32(r)),e}catch{throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}signTransactions(e){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=yield this.getAddress(),n=new Ul.Address(r),i=e.map(s=>{if(this.chainId!==s.getChainID().valueOf())throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);return s.toPlainObject(n)});try{let{signatures:s}=yield this.walletConnector.request({chainId:`${this.namespace}:${this.chainId}`,topic:this.getCurrentTopic(this.walletConnector),request:{method:fg.Operation.SIGN_TRANSACTIONS,params:{transactions:i}}});(!s||!Array.isArray(s))&&Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse),e.length!==s.length&&Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);for(let[o,a]of e.entries())a.applySignature(Ul.Signature.fromHex(s[o].signature),hg.UserAddress.fromBech32(r));return e}catch{throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}sendCustomRequest(e){var r;return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);if(!((r=e?.request)===null||r===void 0)&&r.method){let n=Object.assign({},e.request),{method:i}=n,{response:s}=yield this.walletConnector.request({chainId:`${this.namespace}:${this.chainId}`,topic:this.getCurrentTopic(this.walletConnector),request:Object.assign(Object.assign({},n),{method:i})});if(!s)throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse);return s}})}ping(){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session>"u"&&Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);try{let e=this.getCurrentTopic(this.walletConnector);return yield this.walletConnector.ping({topic:e}),!0}catch{return Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.pingFailed),!1}})}loginAccount(e){return gt(this,void 0,void 0,function*(){return e?this.addressIsValid(e.address)?(this.address=e.address,e.signature&&(this.signature=e.signature),this.onClientConnect.onClientLogin(),this.address):(Re.Logger.error(`${de.WalletConnectV2ProviderErrorMessagesEnum.invalidAddress} ${e.address}`),this.walletConnector&&(yield this.logout()),""):""})}onSessionConnected(e){return gt(this,void 0,void 0,function*(){if(!e)return"";this.session=e.session;let r=this.getAddressFromSession(e.session);return r?(yield this.loginAccount({address:r,signature:e.signature}),r):""})}handleTopicUpdateEvent({topic:e}){return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{let r=yield this.getPairings();if(this.address&&!this.isInitializing&&r)if(r?.length===0)this.onClientConnect.onClientLogout();else{let n=r[r.length-1];n?.topic===e&&this.onClientConnect.onClientLogout()}}catch{Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleTopic)}finally{this.pairings=yield this.getPairings()}})}handleSessionEvents({topic:e,params:r}){var n;return gt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.session&&((n=this.session)===null||n===void 0?void 0:n.topic)!==e)return;let{event:i}=r;if(i?.name&&this.getCurrentTopic(this.walletConnector)===e){let s=i.data;this.onClientConnect.onClientEvent(s)}})}subscribeToEvents(e){var r,n,i,s;return gt(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{e.on("session_update",({topic:o,params:a})=>{var u;if(!this.session||((u=this.session)===null||u===void 0?void 0:u.topic)!==o)return;let{namespaces:l}=a,f=e.session.get(o),d=Object.assign(Object.assign({},f),{namespaces:l});this.onSessionConnected({session:d})}),e.on("session_event",this.handleSessionEvents.bind(this)),e.on("session_delete",({topic:o})=>gt(this,void 0,void 0,function*(){var a;!this.session||((a=this.session)===null||a===void 0?void 0:a.topic)!==o||(Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionDeleted),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),e.on("session_expire",({topic:o})=>gt(this,void 0,void 0,function*(){var a;!this.session||((a=this.session)===null||a===void 0?void 0:a.topic)!==o||(Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionExpired),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),(n=(r=e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0||n.events.on("pairing_delete",this.handleTopicUpdateEvent.bind(this)),(s=(i=e.core)===null||i===void 0?void 0:i.pairing)===null||s===void 0||s.events.on("pairing_expire",this.handleTopicUpdateEvent.bind(this))}catch{Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleEvent)}})}checkPersistedState(e){return gt(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.pairings=yield this.getPairings(),!(typeof this.session<"u")&&e.session.length&&!this.address&&!this.isInitializing){let r=this.getCurrentSession(e);if(r)return yield this.onSessionConnected({session:r}),r}})}cleanupPendingPairings(e={}){var r,n,i,s,o,a,u,l;return gt(this,void 0,void 0,function*(){if(!(typeof this.walletConnector>"u"))try{let f=(i=(n=(r=this.walletConnector.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll();if(!vA.isValidArray(f))return;for(let d of f)e.deletePairings?(o=(s=this.walletConnector.core)===null||s===void 0?void 0:s.expirer)===null||o===void 0||o.set(d.topic,0):yield(l=(u=(a=this.walletConnector.core)===null||a===void 0?void 0:a.relayer)===null||u===void 0?void 0:u.subscriber)===null||l===void 0?void 0:l.unsubscribe(d.topic)}catch{Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleCleanup)}})}getCurrentSession(e){if(typeof e>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=e.find(this.getConnectionParams()).filter(n=>n.acknowledged);if(r.length>0){let n=r.length-1;return r[n]}else if(e.session.length>0){let n=e.session.keys.length-1;return e.session.get(e.session.keys[n])}else throw Re.Logger.error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected)}getCurrentTopic(e){if(typeof e>"u")throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=this.getCurrentSession(e);if(r?.topic)return r.topic;throw new Error(de.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected)}getConnectionParams(e){var r,n;let i=[...go.WALLETCONNECT_MULTIVERSX_METHODS,...(r=e?.methods)!==null&&r!==void 0?r:[]],s=[`${go.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`],o=(n=e?.events)!==null&&n!==void 0?n:[];return{requiredNamespaces:{[go.WALLETCONNECT_MULTIVERSX_NAMESPACE]:{methods:i,chains:s,events:o}}}}addressIsValid(e){try{return!!hg.UserAddress.fromBech32(e)}catch{return!1}}getAddressFromSession(e){let r=e.namespaces[this.namespace];if(r&&r.accounts){let n=r.accounts[0],[i,s,o]=n.split(":");return o}return""}};In.WalletConnectV2Provider=AA});var R8=v((Rce,B8)=>{"use strict";c();B8.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var M8=v((Fce,F8)=>{"use strict";c();var L8=typeof Symbol<"u"&&Symbol,GW=R8();F8.exports=function(){return typeof L8!="function"||typeof Symbol!="function"||typeof L8("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:GW()}});var q8=v((Uce,U8)=>{"use strict";c();var QW="Function.prototype.bind called on incompatible ",_A=Array.prototype.slice,kW=Object.prototype.toString,KW="[object Function]";U8.exports=function(e){var r=this;if(typeof r!="function"||kW.call(r)!==KW)throw new TypeError(QW+r);for(var n=_A.call(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,n.concat(_A.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,n.concat(_A.call(arguments)))},o=Math.max(0,r.length-n.length),a=[],u=0;u<o;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var dg=v((Vce,V8)=>{"use strict";c();var zW=q8();V8.exports=Function.prototype.bind||zW});var j8=v((jce,H8)=>{"use strict";c();var WW=dg();H8.exports=WW.call(Function.call,Object.prototype.hasOwnProperty)});var yg=v((Qce,z8)=>{"use strict";c();var Oe,Hu=SyntaxError,K8=Function,Vu=TypeError,bA=function(t){try{return K8('"use strict"; return ('+t+").constructor;")()}catch{}},yo=Object.getOwnPropertyDescriptor;if(yo)try{yo({},"")}catch{yo=null}var IA=function(){throw new Vu},$W=yo?function(){try{return arguments.callee,IA}catch{try{return yo(arguments,"callee").get}catch{return IA}}}():IA,Uu=M8()(),Sn=Object.getPrototypeOf||function(t){return t.__proto__},qu={},YW=typeof Uint8Array>"u"?Oe:Sn(Uint8Array),mo={"%AggregateError%":typeof AggregateError>"u"?Oe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Oe:ArrayBuffer,"%ArrayIteratorPrototype%":Uu?Sn([][Symbol.iterator]()):Oe,"%AsyncFromSyncIteratorPrototype%":Oe,"%AsyncFunction%":qu,"%AsyncGenerator%":qu,"%AsyncGeneratorFunction%":qu,"%AsyncIteratorPrototype%":qu,"%Atomics%":typeof Atomics>"u"?Oe:Atomics,"%BigInt%":typeof BigInt>"u"?Oe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Oe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Oe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Oe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Oe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Oe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Oe:FinalizationRegistry,"%Function%":K8,"%GeneratorFunction%":qu,"%Int8Array%":typeof Int8Array>"u"?Oe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Oe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Oe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uu?Sn(Sn([][Symbol.iterator]())):Oe,"%JSON%":typeof JSON=="object"?JSON:Oe,"%Map%":typeof Map>"u"?Oe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Uu?Oe:Sn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Oe:Promise,"%Proxy%":typeof Proxy>"u"?Oe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Oe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Oe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Uu?Oe:Sn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Oe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uu?Sn(""[Symbol.iterator]()):Oe,"%Symbol%":Uu?Symbol:Oe,"%SyntaxError%":Hu,"%ThrowTypeError%":$W,"%TypedArray%":YW,"%TypeError%":Vu,"%Uint8Array%":typeof Uint8Array>"u"?Oe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Oe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Oe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Oe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Oe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Oe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Oe:WeakSet};try{null.error}catch(t){G8=Sn(Sn(t)),mo["%Error.prototype%"]=G8}var G8,JW=function t(e){var r;if(e==="%AsyncFunction%")r=bA("async function () {}");else if(e==="%GeneratorFunction%")r=bA("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=bA("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Sn(i.prototype))}return mo[e]=r,r},Q8={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vl=dg(),pg=j8(),XW=Vl.call(Function.call,Array.prototype.concat),ZW=Vl.call(Function.apply,Array.prototype.splice),k8=Vl.call(Function.call,String.prototype.replace),gg=Vl.call(Function.call,String.prototype.slice),e$=Vl.call(Function.call,RegExp.prototype.exec),t$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,r$=/\\(\\)?/g,n$=function(e){var r=gg(e,0,1),n=gg(e,-1);if(r==="%"&&n!=="%")throw new Hu("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Hu("invalid intrinsic syntax, expected opening `%`");var i=[];return k8(e,t$,function(s,o,a,u){i[i.length]=a?k8(u,r$,"$1"):o||s}),i},i$=function(e,r){var n=e,i;if(pg(Q8,n)&&(i=Q8[n],n="%"+i[0]+"%"),pg(mo,n)){var s=mo[n];if(s===qu&&(s=JW(n)),typeof s>"u"&&!r)throw new Vu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Hu("intrinsic "+e+" does not exist!")};z8.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Vu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vu('"allowMissing" argument must be a boolean');if(e$(/^%?[^%]*%?$/,e)===null)throw new Hu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=n$(e),i=n.length>0?n[0]:"",s=i$("%"+i+"%",r),o=s.name,a=s.value,u=!1,l=s.alias;l&&(i=l[0],ZW(n,XW([0,1],l)));for(var f=1,d=!0;f<n.length;f+=1){var y=n[f],w=gg(y,0,1),E=gg(y,-1);if((w==='"'||w==="'"||w==="`"||E==='"'||E==="'"||E==="`")&&w!==E)throw new Hu("property names with quotes must have matching quotes");if((y==="constructor"||!d)&&(u=!0),i+="."+y,o="%"+i+"%",pg(mo,o))a=mo[o];else if(a!=null){if(!(y in a)){if(!r)throw new Vu("base intrinsic for "+e+" exists, but the property is not available.");return}if(yo&&f+1>=n.length){var O=yo(a,y);d=!!O,d&&"get"in O&&!("originalValue"in O.get)?a=O.get:a=a[y]}else d=pg(a,y),a=a[y];d&&!u&&(mo[o]=a)}}return a}});var Z8=v((Kce,mg)=>{"use strict";c();var SA=dg(),ju=yg(),Y8=ju("%Function.prototype.apply%"),J8=ju("%Function.prototype.call%"),X8=ju("%Reflect.apply%",!0)||SA.call(J8,Y8),W8=ju("%Object.getOwnPropertyDescriptor%",!0),wo=ju("%Object.defineProperty%",!0),s$=ju("%Math.max%");if(wo)try{wo({},"a",{value:1})}catch{wo=null}mg.exports=function(e){var r=X8(SA,J8,arguments);if(W8&&wo){var n=W8(r,"length");n.configurable&&wo(r,"length",{value:1+s$(0,e.length-(arguments.length-1))})}return r};var $8=function(){return X8(SA,Y8,arguments)};wo?wo(mg.exports,"apply",{value:$8}):mg.exports.apply=$8});var nP=v((Wce,rP)=>{"use strict";c();var eP=yg(),tP=Z8(),o$=tP(eP("String.prototype.indexOf"));rP.exports=function(e,r){var n=eP(e,!!r);return typeof n=="function"&&o$(e,".prototype.")>-1?tP(n):n}});var iP=v(()=>{c()});var IP=v((Zce,bP)=>{c();var LA=typeof Map=="function"&&Map.prototype,CA=Object.getOwnPropertyDescriptor&&LA?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Eg=LA&&CA&&typeof CA.get=="function"?CA.get:null,sP=LA&&Map.prototype.forEach,FA=typeof Set=="function"&&Set.prototype,TA=Object.getOwnPropertyDescriptor&&FA?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vg=FA&&TA&&typeof TA.get=="function"?TA.get:null,oP=FA&&Set.prototype.forEach,a$=typeof WeakMap=="function"&&WeakMap.prototype,jl=a$?WeakMap.prototype.has:null,u$=typeof WeakSet=="function"&&WeakSet.prototype,Gl=u$?WeakSet.prototype.has:null,c$=typeof WeakRef=="function"&&WeakRef.prototype,aP=c$?WeakRef.prototype.deref:null,l$=Boolean.prototype.valueOf,f$=Object.prototype.toString,h$=Function.prototype.toString,d$=String.prototype.match,MA=String.prototype.slice,$i=String.prototype.replace,p$=String.prototype.toUpperCase,uP=String.prototype.toLowerCase,mP=RegExp.prototype.test,cP=Array.prototype.concat,Cn=Array.prototype.join,g$=Array.prototype.slice,lP=Math.floor,DA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,xA=Object.getOwnPropertySymbols,OA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",zt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Gu||"symbol")?Symbol.toStringTag:null,wP=Object.prototype.propertyIsEnumerable,fP=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function hP(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||mP.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-lP(-t):lP(t);if(n!==t){var i=String(n),s=MA.call(e,i.length+1);return $i.call(i,r,"$&_")+"."+$i.call($i.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $i.call(e,r,"$&_")}var PA=iP(),dP=PA.custom,pP=vP(dP)?dP:null;bP.exports=function t(e,r,n,i){var s=r||{};if(Wi(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Wi(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Wi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return _P(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?hP(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return a?hP(e,l):l}var f=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return BA(e)?"[Array]":"[Object]";var d=B$(s,n);if(typeof i>"u")i=[];else if(AP(i,e)>=0)return"[Circular]";function y(G,$,pe){if($&&(i=g$.call(i),i.push($)),pe){var ae={depth:s.depth};return Wi(s,"quoteStyle")&&(ae.quoteStyle=s.quoteStyle),t(G,ae,n+1,i)}return t(G,s,n+1,i)}if(typeof e=="function"&&!gP(e)){var w=I$(e),E=wg(e,y);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(E.length>0?" { "+Cn.call(E,", ")+" }":"")}if(vP(e)){var O=Gu?$i.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):OA.call(e);return typeof e=="object"&&!Gu?Hl(O):O}if(D$(e)){for(var L="<"+uP.call(String(e.nodeName)),U=e.attributes||[],T=0;T<U.length;T++)L+=" "+U[T].name+"="+EP(y$(U[T].value),"double",s);return L+=">",e.childNodes&&e.childNodes.length&&(L+="..."),L+="</"+uP.call(String(e.nodeName))+">",L}if(BA(e)){if(e.length===0)return"[]";var b=wg(e,y);return d&&!P$(b)?"["+RA(b,d)+"]":"[ "+Cn.call(b,", ")+" ]"}if(w$(e)){var x=wg(e,y);return!("cause"in Error.prototype)&&"cause"in e&&!wP.call(e,"cause")?"{ ["+String(e)+"] "+Cn.call(cP.call("[cause]: "+y(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Cn.call(x,", ")+" }"}if(typeof e=="object"&&o){if(pP&&typeof e[pP]=="function"&&PA)return PA(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(S$(e)){var P=[];return sP&&sP.call(e,function(G,$){P.push(y($,e,!0)+" => "+y(G,e))}),yP("Map",Eg.call(e),P,d)}if(x$(e)){var B=[];return oP&&oP.call(e,function(G){B.push(y(G,e))}),yP("Set",vg.call(e),B,d)}if(C$(e))return NA("WeakMap");if(N$(e))return NA("WeakSet");if(T$(e))return NA("WeakRef");if(v$(e))return Hl(y(Number(e)));if(_$(e))return Hl(y(DA.call(e)));if(A$(e))return Hl(l$.call(e));if(E$(e))return Hl(y(String(e)));if(!m$(e)&&!gP(e)){var _=wg(e,y),S=fP?fP(e)===Object.prototype:e instanceof Object||e.constructor===Object,F=e instanceof Object?"":"null prototype",Z=!S&&zt&&Object(e)===e&&zt in e?MA.call(Yi(e),8,-1):F?"Object":"",K=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",j=K+(Z||F?"["+Cn.call(cP.call([],Z||[],F||[]),": ")+"] ":"");return _.length===0?j+"{}":d?j+"{"+RA(_,d)+"}":j+"{ "+Cn.call(_,", ")+" }"}return String(e)};function EP(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function y$(t){return $i.call(String(t),/"/g,"&quot;")}function BA(t){return Yi(t)==="[object Array]"&&(!zt||!(typeof t=="object"&&zt in t))}function m$(t){return Yi(t)==="[object Date]"&&(!zt||!(typeof t=="object"&&zt in t))}function gP(t){return Yi(t)==="[object RegExp]"&&(!zt||!(typeof t=="object"&&zt in t))}function w$(t){return Yi(t)==="[object Error]"&&(!zt||!(typeof t=="object"&&zt in t))}function E$(t){return Yi(t)==="[object String]"&&(!zt||!(typeof t=="object"&&zt in t))}function v$(t){return Yi(t)==="[object Number]"&&(!zt||!(typeof t=="object"&&zt in t))}function A$(t){return Yi(t)==="[object Boolean]"&&(!zt||!(typeof t=="object"&&zt in t))}function vP(t){if(Gu)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!OA)return!1;try{return OA.call(t),!0}catch{}return!1}function _$(t){if(!t||typeof t!="object"||!DA)return!1;try{return DA.call(t),!0}catch{}return!1}var b$=Object.prototype.hasOwnProperty||function(t){return t in this};function Wi(t,e){return b$.call(t,e)}function Yi(t){return f$.call(t)}function I$(t){if(t.name)return t.name;var e=d$.call(h$.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function AP(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function S$(t){if(!Eg||!t||typeof t!="object")return!1;try{Eg.call(t);try{vg.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function C$(t){if(!jl||!t||typeof t!="object")return!1;try{jl.call(t,jl);try{Gl.call(t,Gl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function T$(t){if(!aP||!t||typeof t!="object")return!1;try{return aP.call(t),!0}catch{}return!1}function x$(t){if(!vg||!t||typeof t!="object")return!1;try{vg.call(t);try{Eg.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function N$(t){if(!Gl||!t||typeof t!="object")return!1;try{Gl.call(t,Gl);try{jl.call(t,jl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function D$(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function _P(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return _P(MA.call(t,0,e.maxStringLength),e)+n}var i=$i.call($i.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,O$);return EP(i,"single",e)}function O$(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+p$.call(e.toString(16))}function Hl(t){return"Object("+t+")"}function NA(t){return t+" { ? }"}function yP(t,e,r,n){var i=n?RA(r,n):Cn.call(r,", ");return t+" ("+e+") {"+i+"}"}function P$(t){for(var e=0;e<t.length;e++)if(AP(t[e],`
`)>=0)return!1;return!0}function B$(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Cn.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Cn.call(Array(e+1),r)}}function RA(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Cn.call(t,","+r)+`
`+e.prev}function wg(t,e){var r=BA(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Wi(t,i)?e(t[i],t):""}var s=typeof xA=="function"?xA(t):[],o;if(Gu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)Wi(t,u)&&(r&&String(Number(u))===u&&u<t.length||Gu&&o["$"+u]instanceof Symbol||(mP.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof xA=="function")for(var l=0;l<s.length;l++)wP.call(t,s[l])&&n.push("["+e(s[l])+"]: "+e(t[s[l]],t));return n}});var CP=v((tle,SP)=>{"use strict";c();var UA=yg(),Qu=nP(),R$=IP(),L$=UA("%TypeError%"),Ag=UA("%WeakMap%",!0),_g=UA("%Map%",!0),F$=Qu("WeakMap.prototype.get",!0),M$=Qu("WeakMap.prototype.set",!0),U$=Qu("WeakMap.prototype.has",!0),q$=Qu("Map.prototype.get",!0),V$=Qu("Map.prototype.set",!0),H$=Qu("Map.prototype.has",!0),qA=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},j$=function(t,e){var r=qA(t,e);return r&&r.value},G$=function(t,e,r){var n=qA(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Q$=function(t,e){return!!qA(t,e)};SP.exports=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new L$("Side channel does not contain "+R$(s))},get:function(s){if(Ag&&s&&(typeof s=="object"||typeof s=="function")){if(e)return F$(e,s)}else if(_g){if(r)return q$(r,s)}else if(n)return j$(n,s)},has:function(s){if(Ag&&s&&(typeof s=="object"||typeof s=="function")){if(e)return U$(e,s)}else if(_g){if(r)return H$(r,s)}else if(n)return Q$(n,s);return!1},set:function(s,o){Ag&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Ag),M$(e,s,o)):_g?(r||(r=new _g),V$(r,s,o)):(n||(n={key:{},next:null}),G$(n,s,o))}};return i}});var bg=v((nle,TP)=>{"use strict";c();var k$=String.prototype.replace,K$=/%20/g,VA={RFC1738:"RFC1738",RFC3986:"RFC3986"};TP.exports={default:VA.RFC3986,formatters:{RFC1738:function(t){return k$.call(t,K$,"+")},RFC3986:function(t){return String(t)}},RFC1738:VA.RFC1738,RFC3986:VA.RFC3986}});var jA=v((sle,NP)=>{"use strict";c();var z$=bg(),HA=Object.prototype.hasOwnProperty,Eo=Array.isArray,Tn=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),W$=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Eo(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},xP=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},$$=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Eo(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!HA.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Eo(e)&&!Eo(r)&&(i=xP(e,n)),Eo(e)&&Eo(r)?(r.forEach(function(s,o){if(HA.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return HA.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},Y$=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},J$=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},X$=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var l=o.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===z$.RFC1738&&(l===40||l===41)){a+=o.charAt(u);continue}if(l<128){a=a+Tn[l];continue}if(l<2048){a=a+(Tn[192|l>>6]+Tn[128|l&63]);continue}if(l<55296||l>=57344){a=a+(Tn[224|l>>12]+Tn[128|l>>6&63]+Tn[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|o.charCodeAt(u)&1023),a+=Tn[240|l>>18]+Tn[128|l>>12&63]+Tn[128|l>>6&63]+Tn[128|l&63]}return a},Z$=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var l=a[u],f=o[l];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:l}),n.push(f))}return W$(r),e},eY=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},tY=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},rY=function(e,r){return[].concat(e,r)},nY=function(e,r){if(Eo(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)};NP.exports={arrayToObject:xP,assign:Y$,combine:rY,compact:Z$,decode:J$,encode:X$,isBuffer:tY,isRegExp:eY,maybeMap:nY,merge:$$}});var LP=v((ale,RP)=>{"use strict";c();var PP=CP(),QA=jA(),Ql=bg(),iY=Object.prototype.hasOwnProperty,DP={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},vo=Array.isArray,sY=String.prototype.split,oY=Array.prototype.push,BP=function(t,e){oY.apply(t,vo(e)?e:[e])},aY=Date.prototype.toISOString,OP=Ql.default,Ut={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:QA.encode,encodeValuesOnly:!1,format:OP,formatter:Ql.formatters[OP],indices:!1,serializeDate:function(e){return aY.call(e)},skipNulls:!1,strictNullHandling:!1},uY=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},GA={},cY=function t(e,r,n,i,s,o,a,u,l,f,d,y,w,E,O){for(var L=e,U=O,T=0,b=!1;(U=U.get(GA))!==void 0&&!b;){var x=U.get(e);if(T+=1,typeof x<"u"){if(x===T)throw new RangeError("Cyclic object value");b=!0}typeof U.get(GA)>"u"&&(T=0)}if(typeof a=="function"?L=a(r,L):L instanceof Date?L=f(L):n==="comma"&&vo(L)&&(L=QA.maybeMap(L,function(re){return re instanceof Date?f(re):re})),L===null){if(i)return o&&!w?o(r,Ut.encoder,E,"key",d):r;L=""}if(uY(L)||QA.isBuffer(L)){if(o){var P=w?r:o(r,Ut.encoder,E,"key",d);if(n==="comma"&&w){for(var B=sY.call(String(L),","),_="",S=0;S<B.length;++S)_+=(S===0?"":",")+y(o(B[S],Ut.encoder,E,"value",d));return[y(P)+"="+_]}return[y(P)+"="+y(o(L,Ut.encoder,E,"value",d))]}return[y(r)+"="+y(String(L))]}var F=[];if(typeof L>"u")return F;var Z;if(n==="comma"&&vo(L))Z=[{value:L.length>0?L.join(",")||null:void 0}];else if(vo(a))Z=a;else{var K=Object.keys(L);Z=u?K.sort(u):K}for(var j=0;j<Z.length;++j){var G=Z[j],$=typeof G=="object"&&typeof G.value<"u"?G.value:L[G];if(!(s&&$===null)){var pe=vo(L)?typeof n=="function"?n(r,G):r:r+(l?"."+G:"["+G+"]");O.set(e,T);var ae=PP();ae.set(GA,O),BP(F,t($,pe,n,i,s,o,a,u,l,f,d,y,w,E,ae))}}return F},lY=function(e){if(!e)return Ut;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Ut.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ql.default;if(typeof e.format<"u"){if(!iY.call(Ql.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ql.formatters[n],s=Ut.filter;return(typeof e.filter=="function"||vo(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ut.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Ut.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ut.charsetSentinel,delimiter:typeof e.delimiter>"u"?Ut.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ut.encode,encoder:typeof e.encoder=="function"?e.encoder:Ut.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ut.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ut.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ut.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ut.strictNullHandling}};RP.exports=function(t,e){var r=t,n=lY(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):vo(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in DP?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var u=DP[a];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=PP(),f=0;f<i.length;++f){var d=i[f];n.skipNulls&&r[d]===null||BP(o,cY(r[d],d,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var y=o.join(n.delimiter),w=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),y.length>0?w+y:""}});var UP=v((cle,MP)=>{"use strict";c();var ku=jA(),kA=Object.prototype.hasOwnProperty,fY=Array.isArray,Pt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ku.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hY=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},FP=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},dY="utf8=%26%2310003%3B",pY="utf8=%E2%9C%93",gY=function(e,r){var n={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===pY?l="utf-8":o[u]===dY&&(l="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var f=o[u],d=f.indexOf("]="),y=d===-1?f.indexOf("="):d+1,w,E;y===-1?(w=r.decoder(f,Pt.decoder,l,"key"),E=r.strictNullHandling?null:""):(w=r.decoder(f.slice(0,y),Pt.decoder,l,"key"),E=ku.maybeMap(FP(f.slice(y+1),r),function(O){return r.decoder(O,Pt.decoder,l,"value")})),E&&r.interpretNumericEntities&&l==="iso-8859-1"&&(E=hY(E)),f.indexOf("[]=")>-1&&(E=fY(E)?[E]:E),kA.call(n,w)?n[w]=ku.combine(n[w],E):n[w]=E}return n},yY=function(t,e,r,n){for(var i=n?e:FP(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(u,10);!r.parseArrays&&u===""?o={0:i}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},mY=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),l=u?s.slice(0,u.index):s,f=[];if(l){if(!n.plainObjects&&kA.call(Object.prototype,l)&&!n.allowPrototypes)return;f.push(l)}for(var d=0;n.depth>0&&(u=a.exec(s))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&kA.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+s.slice(u.index)+"]"),yY(f,r,n,i)}},wY=function(e){if(!e)return Pt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?Pt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Pt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Pt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Pt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Pt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Pt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Pt.comma,decoder:typeof e.decoder=="function"?e.decoder:Pt.decoder,delimiter:typeof e.delimiter=="string"||ku.isRegExp(e.delimiter)?e.delimiter:Pt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Pt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Pt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Pt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Pt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Pt.strictNullHandling}};MP.exports=function(t,e){var r=wY(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?gY(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=mY(a,n[a],r,typeof t=="string");i=ku.merge(i,u,r)}return r.allowSparse===!0?i:ku.compact(i)}});var VP=v((fle,qP)=>{"use strict";c();var EY=LP(),vY=UP(),AY=bg();qP.exports={formats:AY,parse:vY,stringify:EY}});var KA=v(lt=>{"use strict";c();Object.defineProperty(lt,"__esModule",{value:!0});lt.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED=lt.WALLET_PROVIDER_CALLBACK_PARAM=lt.WALLET_PROVIDER_SIGN_MESSAGE_URL=lt.WALLET_PROVIDER_SIGN_TRANSACTION_URL=lt.WALLET_PROVIDER_SEND_TRANSACTION_URL=lt.WALLET_PROVIDER_DISCONNECT_URL=lt.WALLET_PROVIDER_CONNECT_URL=lt.WALLET_PROVIDER_TESTNET=lt.WALLET_PROVIDER_DEVNET=lt.WALLET_PROVIDER_MAINNET=void 0;lt.WALLET_PROVIDER_MAINNET="https://wallet.multiversx.com/dapp/init";lt.WALLET_PROVIDER_DEVNET="https://devnet-wallet.multiversx.com/dapp/init";lt.WALLET_PROVIDER_TESTNET="https://testnet-wallet.multiversx.com/dapp/init";lt.WALLET_PROVIDER_CONNECT_URL="hook/login";lt.WALLET_PROVIDER_DISCONNECT_URL="hook/logout";lt.WALLET_PROVIDER_SEND_TRANSACTION_URL="hook/transaction";lt.WALLET_PROVIDER_SIGN_TRANSACTION_URL="hook/sign";lt.WALLET_PROVIDER_SIGN_MESSAGE_URL="hook/sign-message";lt.WALLET_PROVIDER_CALLBACK_PARAM="walletProviderStatus";lt.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED="transactionsSigned"});var HP=v(Ku=>{"use strict";c();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ErrCannotSignedMessage=Ku.ErrCannotGetSignedTransactions=void 0;var zA=class extends Error{constructor(){super("Cannot get signed transaction(s)")}};Ku.ErrCannotGetSignedTransactions=zA;var WA=class extends Error{constructor(){super("Cannot get signed message")}};Ku.ErrCannotSignedMessage=WA});var jP=v(Ig=>{"use strict";c();Object.defineProperty(Ig,"__esModule",{value:!0});Ig.PlainSignedTransaction=void 0;var $A=class{constructor(e){this.nonce=0,this.value="",this.receiver="",this.sender="",this.gasPrice=0,this.gasLimit=0,this.data="",this.chainID="",this.version=0,this.options=void 0,this.signature="",Object.assign(this,e)}};Ig.PlainSignedTransaction=$A});var kl=v(Ji=>{"use strict";c();var Ao=Ji&&Ji.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function u(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},_Y=Ji&&Ji.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.WalletProvider=void 0;var YA=_Y(VP()),_o=KA(),JA=HP(),bY=jP(),zu=class{constructor(e){this.walletUrl=e}login(e){return Ao(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:_o.WALLET_PROVIDER_CONNECT_URL,callbackUrl:e?.callbackUrl,params:{token:e?.token}});return yield this.redirect(r,e?.redirectDelayMilliseconds),r})}redirect(e,r){return Ao(this,void 0,void 0,function*(){r?yield this.redirectLater(e,r):this.redirectImmediately(e)})}redirectImmediately(e){window.location.href=e}redirectLater(e,r){return Ao(this,void 0,void 0,function*(){yield new Promise(n=>{setTimeout(()=>{window.location.href=e,n(!0)},r)})})}logout(e){return Ao(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:_o.WALLET_PROVIDER_DISCONNECT_URL,callbackUrl:e?.callbackUrl});return yield this.redirect(r,e?.redirectDelayMilliseconds),!0})}signMessage(e,r){return Ao(this,void 0,void 0,function*(){let n=this.buildWalletUrl({endpoint:_o.WALLET_PROVIDER_SIGN_MESSAGE_URL,callbackUrl:r?.callbackUrl,params:{message:e.message.toString()}});return yield this.redirect(n),n})}getMessageSignatureFromWalletUrl(){var e,r;let n=window.location.search.slice(1);console.info("getMessageSignatureFromWalletUrl(), url:",n);let i=YA.default.parse(n);if((((e=i.status)===null||e===void 0?void 0:e.toString())||"")!=="signed")throw new JA.ErrCannotSignedMessage;return((r=i.signature)===null||r===void 0?void 0:r.toString())||""}signTransactions(e,r){return Ao(this,void 0,void 0,function*(){let n={};e.map(s=>{let o=zu.prepareWalletTransaction(s);for(let a in o)o.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=[]),n[a].push(o[a])});let i=this.buildWalletUrl({endpoint:_o.WALLET_PROVIDER_SIGN_TRANSACTION_URL,callbackUrl:r?.callbackUrl,params:n});window.location.href=i})}signTransaction(e,r){return Ao(this,void 0,void 0,function*(){yield this.signTransactions([e],r)})}getTransactionsFromWalletUrl(){let e=YA.default.parse(window.location.search.slice(1));return zu.isTxSignReturnSuccess(e)?this.getTxSignReturnValue(e):[]}static isTxSignReturnSuccess(e){return e.hasOwnProperty(_o.WALLET_PROVIDER_CALLBACK_PARAM)&&e[_o.WALLET_PROVIDER_CALLBACK_PARAM]===_o.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED}getTxSignReturnValue(e){var r;console.info("getTxSignReturnValue(), urlParams:",e);let n=["nonce","value","receiver","sender","gasPrice","gasLimit","chainID","version","signature"];for(let o of n)if(!e[o]||!Array.isArray(e[o]))throw new JA.ErrCannotGetSignedTransactions;let i=e.nonce.length;for(let o of n)if(e[o].length!==i)throw new JA.ErrCannotGetSignedTransactions;let s=[];for(let o=0;o<i;o++){let a=new bY.PlainSignedTransaction(Object.assign(Object.assign({nonce:parseInt(e.nonce[o]),value:e.value[o],receiver:e.receiver[o],sender:e.sender[o],gasPrice:parseInt(e.gasPrice[o]),gasLimit:parseInt(e.gasLimit[o]),data:(r=e.data[o])!==null&&r!==void 0?r:"",chainID:e.chainID[o],version:parseInt(e.version[o])},e.options&&e.options[o]?{options:parseInt(e.options[o])}:{}),{signature:e.signature[o]}));s.push(a)}return s}static prepareWalletTransaction(e){let r=e.toPlainObject();return r.data?r.data=h.Buffer.from(r.data,"base64").toString():r.data="",r}buildWalletUrl(e){let r=e?.callbackUrl||window.location.href,n=YA.default.stringify(e.params||{}),i=n?`${n}&callbackUrl=${r}`:`callbackUrl=${r}`,s=`${this.baseWalletUrl()}/${e.endpoint}?${i}`;return console.info(`Redirecting to Wallet URL: ${decodeURI(s)}`),s}baseWalletUrl(){let e=this.walletUrl.split("/"),r=e[0],n=e[2];return r+"//"+n}};Ji.WalletProvider=zu});var zP=v(Tg=>{"use strict";c();Object.defineProperty(Tg,"__esModule",{value:!0});Tg.TransactionStatus=void 0;var Kl=class{constructor(e){this.status=(e||"").toLowerCase()}static createUnknown(){return new Kl("unknown")}isPending(){return this.status=="received"||this.status=="pending"}isExecuted(){return this.isSuccessful()||this.isFailed()||this.isInvalid()}isSuccessful(){return this.status=="executed"||this.status=="success"||this.status=="successful"}isFailed(){return this.status=="fail"||this.status=="failed"||this.status=="unsuccessful"||this.isInvalid()}isInvalid(){return this.status=="invalid"}toString(){return this.status}valueOf(){return this.status}equals(e){return e?this.status==e.status:!1}};Tg.TransactionStatus=Kl});var Yu=v(Rt=>{"use strict";c();var IY=Rt&&Rt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SY=Rt&&Rt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CY=Rt&&Rt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IY(e,t,r);return SY(e,t),e};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.zeroPadStringIfOddLength=Rt.isPaddedHex=Rt.numberToPaddedHex=Rt.Nonce=Rt.Address=void 0;var WP=CY(Cf()),TY="erd",zl=class{constructor(e){this.value=e}static fromPubkey(e){let r=WP.toWords(e),n=WP.encode(TY,r);return new zl(n)}bech32(){return this.value}toString(){return this.bech32()}};Rt.Address=zl;var XA=class{constructor(e){this.value=e}valueOf(){return this.value}hex(){return $P(this.value)}};Rt.Nonce=XA;function $P(t){let e=t.toString(16);return YP(e)}Rt.numberToPaddedHex=$P;function xY(t){t=t||"";let e=h.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}Rt.isPaddedHex=xY;function YP(t){return t=t||"",t.length%2==1?"0"+t:t}Rt.zeroPadStringIfOddLength=YP});var XP=v(xg=>{"use strict";c();Object.defineProperty(xg,"__esModule",{value:!0});xg.TransactionReceipt=void 0;var JP=Yu(),Wl=class{constructor(){this.value="",this.sender=new JP.Address(""),this.data="",this.hash=""}static fromHttpResponse(e){let r=new Wl;return r.value=(e.value||0).toString(),r.sender=new JP.Address(e.sender),r.data=e.data,r.hash=e.txHash,r}};xg.TransactionReceipt=Wl});var ZP=v(xn=>{"use strict";c();Object.defineProperty(xn,"__esModule",{value:!0});xn.ErrContractQuery=xn.ErrNetworkProvider=xn.ErrUnexpectedCondition=xn.Err=void 0;var Ju=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};xn.Err=Ju;var ZA=class extends Ju{constructor(e){super(`Unexpected condition: [${e}]`)}};xn.ErrUnexpectedCondition=ZA;var e_=class extends Ju{constructor(e,r,n){let i=`Request error on url [${e}]: [${r}]`;super(i,n)}};xn.ErrNetworkProvider=e_;var t_=class extends Ju{constructor(e){super(e.message.replace("executeQuery:",""))}};xn.ErrContractQuery=t_});var tB=v(Xu=>{"use strict";c();Object.defineProperty(Xu,"__esModule",{value:!0});Xu.TransactionEventTopic=Xu.TransactionEvent=void 0;var eB=Yu(),$l=class{constructor(e){this.address=new eB.Address(""),this.identifier="",this.topics=[],this.data="",Object.assign(this,e)}static fromHttpResponse(e){let r=new $l;return r.address=new eB.Address(e.address),r.identifier=e.identifier||"",r.topics=(e.topics||[]).map(n=>new Ng(n)),r.data=h.Buffer.from(e.data||"","base64").toString(),r}findFirstOrNoneTopic(e){return this.topics.filter(r=>e(r))[0]}getLastTopic(){return this.topics[this.topics.length-1]}};Xu.TransactionEvent=$l;var Ng=class{constructor(e){this.raw=h.Buffer.from(e||"","base64")}toString(){return this.raw.toString("utf8")}hex(){return this.raw.toString("hex")}valueOf(){return this.raw}};Xu.TransactionEventTopic=Ng});var r_=v(Dg=>{"use strict";c();Object.defineProperty(Dg,"__esModule",{value:!0});Dg.TransactionLogs=void 0;var NY=ZP(),rB=Yu(),DY=tB(),Yl=class{constructor(e){this.address=new rB.Address(""),this.events=[],Object.assign(this,e)}static fromHttpResponse(e){let r=new Yl;return r.address=new rB.Address(e.address),r.events=(e.events||[]).map(n=>DY.TransactionEvent.fromHttpResponse(n)),r}findSingleOrNoneEvent(e,r){let n=this.findEvents(e,r);if(n.length>1)throw new NY.ErrUnexpectedCondition(`more than one event of type ${e}`);return n[0]}findFirstOrNoneEvent(e,r){return this.findEvents(e,r)[0]}findEvents(e,r){let n=this.events.filter(i=>i.identifier==e);return r&&(n=n.filter(i=>r(i))),n}};Dg.TransactionLogs=Yl});var iB=v(ec=>{"use strict";c();Object.defineProperty(ec,"__esModule",{value:!0});ec.ContractResultItem=ec.ContractResults=void 0;var nB=r_(),Og=Yu(),Zu=class{constructor(e){this.items=e,this.items.sort(function(r,n){return r.nonce.valueOf()-n.nonce.valueOf()})}static fromProxyHttpResponse(e){let r=e.map(n=>ti.fromProxyHttpResponse(n));return new Zu(r)}static fromApiHttpResponse(e){let r=e.map(n=>ti.fromApiHttpResponse(n));return new Zu(r)}};ec.ContractResults=Zu;var ti=class{constructor(e){this.hash="",this.nonce=0,this.value="",this.receiver=new Og.Address(""),this.sender=new Og.Address(""),this.data="",this.previousHash="",this.originalHash="",this.gasLimit=0,this.gasPrice=0,this.callType=0,this.returnMessage="",this.logs=new nB.TransactionLogs,Object.assign(this,e)}static fromProxyHttpResponse(e){return ti.fromHttpResponse(e)}static fromApiHttpResponse(e){let r=ti.fromHttpResponse(e);return r.data=h.Buffer.from(r.data,"base64").toString(),r.callType=Number(r.callType),r}static fromHttpResponse(e){let r=new ti;return r.hash=e.hash,r.nonce=Number(e.nonce||0),r.value=(e.value||0).toString(),r.receiver=new Og.Address(e.receiver),r.sender=new Og.Address(e.sender),r.previousHash=e.prevTxHash,r.originalHash=e.originalTxHash,r.gasLimit=Number(e.gasLimit||0),r.gasPrice=Number(e.gasPrice||0),r.data=e.data||"",r.callType=e.callType,r.returnMessage=e.returnMessage,r.logs=nB.TransactionLogs.fromHttpResponse(e.logs||{}),r}};ec.ContractResultItem=ti});var sB=v(Zi=>{"use strict";c();var OY=Zi&&Zi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.EsdtContractAddress=Zi.MaxUint64AsBigNumber=void 0;var PY=OY(Wt()),BY=Yu();Zi.MaxUint64AsBigNumber=new PY.default("18446744073709551615");Zi.EsdtContractAddress=new BY.Address("erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u")});var oB=v(tc=>{"use strict";c();var RY=tc&&tc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tc,"__esModule",{value:!0});tc.ContractQueryResponse=void 0;var LY=RY(Wt()),FY=sB(),Jl=class{constructor(e){this.returnData=e?.returnData||[],this.returnCode=e?.returnCode||"",this.returnMessage=e?.returnMessage||"",this.gasUsed=e?.gasUsed||0}static fromHttpResponse(e){let r=e.returnData||e.ReturnData,n=e.returnCode||e.ReturnCode,i=e.returnMessage||e.ReturnMessage,s=new LY.default(e.gasRemaining||e.GasRemaining||0),o=FY.MaxUint64AsBigNumber.minus(s).toNumber();return new Jl({returnData:r,returnCode:n,returnMessage:i,gasUsed:o})}getReturnDataParts(){return this.returnData.map(e=>h.Buffer.from(e||"","base64"))}toJSON(){return{returnData:this.returnData,returnCode:this.returnCode,returnMessage:this.returnMessage,gasUsed:this.gasUsed.valueOf()}}};tc.ContractQueryResponse=Jl});var aB=v(Pg=>{"use strict";c();Object.defineProperty(Pg,"__esModule",{value:!0});Pg.ContractQueryRequest=void 0;var n_=class{constructor(e){this.query=e}toHttpRequest(){var e;let r={},n=this.query;return r.scAddress=n.address.bech32(),r.caller=!((e=n.caller)===null||e===void 0)&&e.bech32()?n.caller.bech32():void 0,r.funcName=n.func.toString(),r.value=n.value?n.value.toString():void 0,r.args=n.getEncodedArguments(),r}};Pg.ContractQueryRequest=n_});var wB=v((Rfe,mB)=>{c();mB.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var es=v(So=>{c();var i_,MY=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];So.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};So.getSymbolTotalCodewords=function(e){return MY[e]};So.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};So.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');i_=e};So.isKanjiModeEnabled=function(){return typeof i_<"u"};So.toSJIS=function(e){return i_(e)}});var Lg=v(Nr=>{c();Nr.L={bit:1};Nr.M={bit:0};Nr.Q={bit:3};Nr.H={bit:2};function UY(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return Nr.L;case"m":case"medium":return Nr.M;case"q":case"quartile":return Nr.Q;case"h":case"high":return Nr.H;default:throw new Error("Unknown EC Level: "+t)}}Nr.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Nr.from=function(e,r){if(Nr.isValid(e))return e;try{return UY(e)}catch{return r}}});var AB=v((Vfe,vB)=>{c();function EB(){this.buffer=[],this.length=0}EB.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};vB.exports=EB});var bB=v((jfe,_B)=>{c();function Xl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Xl.prototype.set=function(t,e,r,n){let i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};Xl.prototype.get=function(t,e){return this.data[t*this.size+e]};Xl.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Xl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};_B.exports=Xl});var IB=v(Fg=>{c();var qY=es().getSymbolSize;Fg.getRowColCoords=function(e){if(e===1)return[];let r=Math.floor(e/7)+2,n=qY(e),i=n===145?26:Math.ceil((n-13)/(2*r-2))*2,s=[n-7];for(let o=1;o<r-1;o++)s[o]=s[o-1]-i;return s.push(6),s.reverse()};Fg.getPositions=function(e){let r=[],n=Fg.getRowColCoords(e),i=n.length;for(let s=0;s<i;s++)for(let o=0;o<i;o++)s===0&&o===0||s===0&&o===i-1||s===i-1&&o===0||r.push([n[s],n[o]]);return r}});var TB=v(CB=>{c();var VY=es().getSymbolSize,SB=7;CB.getPositions=function(e){let r=VY(e);return[[0,0],[r-SB,0],[0,r-SB]]}});var xB=v(We=>{c();We.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Co={N1:3,N2:3,N3:40,N4:10};We.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};We.from=function(e){return We.isValid(e)?parseInt(e,10):void 0};We.getPenaltyN1=function(e){let r=e.size,n=0,i=0,s=0,o=null,a=null;for(let u=0;u<r;u++){i=s=0,o=a=null;for(let l=0;l<r;l++){let f=e.get(u,l);f===o?i++:(i>=5&&(n+=Co.N1+(i-5)),o=f,i=1),f=e.get(l,u),f===a?s++:(s>=5&&(n+=Co.N1+(s-5)),a=f,s=1)}i>=5&&(n+=Co.N1+(i-5)),s>=5&&(n+=Co.N1+(s-5))}return n};We.getPenaltyN2=function(e){let r=e.size,n=0;for(let i=0;i<r-1;i++)for(let s=0;s<r-1;s++){let o=e.get(i,s)+e.get(i,s+1)+e.get(i+1,s)+e.get(i+1,s+1);(o===4||o===0)&&n++}return n*Co.N2};We.getPenaltyN3=function(e){let r=e.size,n=0,i=0,s=0;for(let o=0;o<r;o++){i=s=0;for(let a=0;a<r;a++)i=i<<1&2047|e.get(o,a),a>=10&&(i===1488||i===93)&&n++,s=s<<1&2047|e.get(a,o),a>=10&&(s===1488||s===93)&&n++}return n*Co.N3};We.getPenaltyN4=function(e){let r=0,n=e.data.length;for(let s=0;s<n;s++)r+=e.data[s];return Math.abs(Math.ceil(r*100/n/5)-10)*Co.N4};function HY(t,e,r){switch(t){case We.Patterns.PATTERN000:return(e+r)%2===0;case We.Patterns.PATTERN001:return e%2===0;case We.Patterns.PATTERN010:return r%3===0;case We.Patterns.PATTERN011:return(e+r)%3===0;case We.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2===0;case We.Patterns.PATTERN101:return e*r%2+e*r%3===0;case We.Patterns.PATTERN110:return(e*r%2+e*r%3)%2===0;case We.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}We.applyMask=function(e,r){let n=r.size;for(let i=0;i<n;i++)for(let s=0;s<n;s++)r.isReserved(s,i)||r.xor(s,i,HY(e,s,i))};We.getBestMask=function(e,r){let n=Object.keys(We.Patterns).length,i=0,s=1/0;for(let o=0;o<n;o++){r(o),We.applyMask(o,e);let a=We.getPenaltyN1(e)+We.getPenaltyN2(e)+We.getPenaltyN3(e)+We.getPenaltyN4(e);We.applyMask(o,e),a<s&&(s=a,i=o)}return i}});var o_=v(s_=>{c();var ts=Lg(),Mg=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ug=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];s_.getBlocksCount=function(e,r){switch(r){case ts.L:return Mg[(e-1)*4+0];case ts.M:return Mg[(e-1)*4+1];case ts.Q:return Mg[(e-1)*4+2];case ts.H:return Mg[(e-1)*4+3];default:return}};s_.getTotalCodewordsCount=function(e,r){switch(r){case ts.L:return Ug[(e-1)*4+0];case ts.M:return Ug[(e-1)*4+1];case ts.Q:return Ug[(e-1)*4+2];case ts.H:return Ug[(e-1)*4+3];default:return}}});var NB=v(Vg=>{c();var Zl=new Uint8Array(512),qg=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Zl[r]=e,qg[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Zl[r]=Zl[r-255]})();Vg.log=function(e){if(e<1)throw new Error("log("+e+")");return qg[e]};Vg.exp=function(e){return Zl[e]};Vg.mul=function(e,r){return e===0||r===0?0:Zl[qg[e]+qg[r]]}});var DB=v(ef=>{c();var a_=NB();ef.mul=function(e,r){let n=new Uint8Array(e.length+r.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<r.length;s++)n[i+s]^=a_.mul(e[i],r[s]);return n};ef.mod=function(e,r){let n=new Uint8Array(e);for(;n.length-r.length>=0;){let i=n[0];for(let o=0;o<r.length;o++)n[o]^=a_.mul(r[o],i);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n};ef.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=ef.mul(r,new Uint8Array([1,a_.exp(n)]));return r}});var BB=v((rhe,PB)=>{c();var OB=DB();function u_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}u_.prototype.initialize=function(e){this.degree=e,this.genPoly=OB.generateECPolynomial(this.degree)};u_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let r=new Uint8Array(e.length+this.degree);r.set(e);let n=OB.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(n,i),s}return n};PB.exports=u_});var c_=v(RB=>{c();RB.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var l_=v(ri=>{c();var LB="[0-9]+",jY="[A-Z $%*+\\-./:]+",tf="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";tf=tf.replace(/u/g,"\\u");var GY="(?:(?![A-Z0-9 $%*+\\-./:]|"+tf+`)(?:.|[\r
]))+`;ri.KANJI=new RegExp(tf,"g");ri.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ri.BYTE=new RegExp(GY,"g");ri.NUMERIC=new RegExp(LB,"g");ri.ALPHANUMERIC=new RegExp(jY,"g");var QY=new RegExp("^"+tf+"$"),kY=new RegExp("^"+LB+"$"),KY=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ri.testKanji=function(e){return QY.test(e)};ri.testNumeric=function(e){return kY.test(e)};ri.testAlphanumeric=function(e){return KY.test(e)}});var rs=v(Et=>{c();var zY=c_(),f_=l_();Et.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]};Et.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]};Et.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]};Et.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]};Et.MIXED={bit:-1};Et.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!zY.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]};Et.getBestModeForData=function(e){return f_.testNumeric(e)?Et.NUMERIC:f_.testAlphanumeric(e)?Et.ALPHANUMERIC:f_.testKanji(e)?Et.KANJI:Et.BYTE};Et.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};Et.isValid=function(e){return e&&e.bit&&e.ccBits};function WY(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return Et.NUMERIC;case"alphanumeric":return Et.ALPHANUMERIC;case"kanji":return Et.KANJI;case"byte":return Et.BYTE;default:throw new Error("Unknown mode: "+t)}}Et.from=function(e,r){if(Et.isValid(e))return e;try{return WY(e)}catch{return r}}});var VB=v(To=>{c();var Hg=es(),$Y=o_(),FB=Lg(),ns=rs(),h_=c_(),UB=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,MB=Hg.getBCHDigit(UB);function YY(t,e,r){for(let n=1;n<=40;n++)if(e<=To.getCapacity(n,r,t))return n}function qB(t,e){return ns.getCharCountIndicator(t,e)+4}function JY(t,e){let r=0;return t.forEach(function(n){let i=qB(n.mode,e);r+=i+n.getBitsLength()}),r}function XY(t,e){for(let r=1;r<=40;r++)if(JY(t,r)<=To.getCapacity(r,e,ns.MIXED))return r}To.from=function(e,r){return h_.isValid(e)?parseInt(e,10):r};To.getCapacity=function(e,r,n){if(!h_.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=ns.BYTE);let i=Hg.getSymbolTotalCodewords(e),s=$Y.getTotalCodewordsCount(e,r),o=(i-s)*8;if(n===ns.MIXED)return o;let a=o-qB(n,e);switch(n){case ns.NUMERIC:return Math.floor(a/10*3);case ns.ALPHANUMERIC:return Math.floor(a/11*2);case ns.KANJI:return Math.floor(a/13);case ns.BYTE:default:return Math.floor(a/8)}};To.getBestVersionForData=function(e,r){let n,i=FB.from(r,FB.M);if(Array.isArray(e)){if(e.length>1)return XY(e,i);if(e.length===0)return 1;n=e[0]}else n=e;return YY(n.mode,n.getLength(),i)};To.getEncodedBits=function(e){if(!h_.isValid(e)||e<7)throw new Error("Invalid QR Code version");let r=e<<12;for(;Hg.getBCHDigit(r)-MB>=0;)r^=UB<<Hg.getBCHDigit(r)-MB;return e<<12|r}});var QB=v(GB=>{c();var d_=es(),jB=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,ZY=1<<14|1<<12|1<<10|1<<4|1<<1,HB=d_.getBCHDigit(jB);GB.getEncodedBits=function(e,r){let n=e.bit<<3|r,i=n<<10;for(;d_.getBCHDigit(i)-HB>=0;)i^=jB<<d_.getBCHDigit(i)-HB;return(n<<10|i)^ZY}});var KB=v((phe,kB)=>{c();var eJ=rs();function rc(t){this.mode=eJ.NUMERIC,this.data=t.toString()}rc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};rc.prototype.getLength=function(){return this.data.length};rc.prototype.getBitsLength=function(){return rc.getBitsLength(this.data.length)};rc.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);let s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};kB.exports=rc});var WB=v((yhe,zB)=>{c();var tJ=rs(),p_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function nc(t){this.mode=tJ.ALPHANUMERIC,this.data=t}nc.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};nc.prototype.getLength=function(){return this.data.length};nc.prototype.getBitsLength=function(){return nc.getBitsLength(this.data.length)};nc.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=p_.indexOf(this.data[r])*45;n+=p_.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(p_.indexOf(this.data[r]),6)};zB.exports=nc});var YB=v((whe,$B)=>{"use strict";c();$B.exports=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer}});var XB=v((vhe,JB)=>{c();var rJ=YB(),nJ=rs();function ic(t){this.mode=nJ.BYTE,typeof t=="string"&&(t=rJ(t)),this.data=new Uint8Array(t)}ic.getBitsLength=function(e){return e*8};ic.prototype.getLength=function(){return this.data.length};ic.prototype.getBitsLength=function(){return ic.getBitsLength(this.data.length)};ic.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};JB.exports=ic});var eR=v((_he,ZB)=>{c();var iJ=rs(),sJ=es();function sc(t){this.mode=iJ.KANJI,this.data=t}sc.getBitsLength=function(e){return e*13};sc.prototype.getLength=function(){return this.data.length};sc.prototype.getBitsLength=function(){return sc.getBitsLength(this.data.length)};sc.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=sJ.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};ZB.exports=sc});var tR=v((Ihe,g_)=>{"use strict";c();var rf={single_source_shortest_paths:function(t,e,r){var n={},i={};i[e]=0;var s=rf.PriorityQueue.make();s.push(e,0);for(var o,a,u,l,f,d,y,w,E;!s.empty();){o=s.pop(),a=o.value,l=o.cost,f=t[a]||{};for(u in f)f.hasOwnProperty(u)&&(d=f[u],y=l+d,w=i[u],E=typeof i[u]>"u",(E||w>y)&&(i[u]=y,s.push(u,y),n[u]=a))}if(typeof r<"u"&&typeof i[r]>"u"){var O=["Could not find a path from ",e," to ",r,"."].join("");throw new Error(O)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e,i;n;)r.push(n),i=t[n],n=t[n];return r.reverse(),r},find_path:function(t,e,r){var n=rf.single_source_shortest_paths(t,e,r);return rf.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(t){var e=rf.PriorityQueue,r={},n;t=t||{};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.queue=[],r.sorter=t.sorter||e.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var r={value:t,cost:e};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof g_<"u"&&(g_.exports=rf)});var cR=v(oc=>{c();var Ve=rs(),iR=KB(),sR=WB(),oR=XB(),aR=eR(),nf=l_(),jg=es(),oJ=tR();function rR(t){return unescape(encodeURIComponent(t)).length}function sf(t,e,r){let n=[],i;for(;(i=t.exec(r))!==null;)n.push({data:i[0],index:i.index,mode:e,length:i[0].length});return n}function uR(t){let e=sf(nf.NUMERIC,Ve.NUMERIC,t),r=sf(nf.ALPHANUMERIC,Ve.ALPHANUMERIC,t),n,i;return jg.isKanjiModeEnabled()?(n=sf(nf.BYTE,Ve.BYTE,t),i=sf(nf.KANJI,Ve.KANJI,t)):(n=sf(nf.BYTE_KANJI,Ve.BYTE,t),i=[]),e.concat(r,n,i).sort(function(o,a){return o.index-a.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function y_(t,e){switch(e){case Ve.NUMERIC:return iR.getBitsLength(t);case Ve.ALPHANUMERIC:return sR.getBitsLength(t);case Ve.KANJI:return aR.getBitsLength(t);case Ve.BYTE:return oR.getBitsLength(t)}}function aJ(t){return t.reduce(function(e,r){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===r.mode?(e[e.length-1].data+=r.data,e):(e.push(r),e)},[])}function uJ(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];switch(n.mode){case Ve.NUMERIC:e.push([n,{data:n.data,mode:Ve.ALPHANUMERIC,length:n.length},{data:n.data,mode:Ve.BYTE,length:n.length}]);break;case Ve.ALPHANUMERIC:e.push([n,{data:n.data,mode:Ve.BYTE,length:n.length}]);break;case Ve.KANJI:e.push([n,{data:n.data,mode:Ve.BYTE,length:rR(n.data)}]);break;case Ve.BYTE:e.push([{data:n.data,mode:Ve.BYTE,length:rR(n.data)}])}}return e}function cJ(t,e){let r={},n={start:{}},i=["start"];for(let s=0;s<t.length;s++){let o=t[s],a=[];for(let u=0;u<o.length;u++){let l=o[u],f=""+s+u;a.push(f),r[f]={node:l,lastCount:0},n[f]={};for(let d=0;d<i.length;d++){let y=i[d];r[y]&&r[y].node.mode===l.mode?(n[y][f]=y_(r[y].lastCount+l.length,l.mode)-y_(r[y].lastCount,l.mode),r[y].lastCount+=l.length):(r[y]&&(r[y].lastCount=l.length),n[y][f]=y_(l.length,l.mode)+4+Ve.getCharCountIndicator(l.mode,e))}}i=a}for(let s=0;s<i.length;s++)n[i[s]].end=0;return{map:n,table:r}}function nR(t,e){let r,n=Ve.getBestModeForData(t);if(r=Ve.from(e,n),r!==Ve.BYTE&&r.bit<n.bit)throw new Error('"'+t+'" cannot be encoded with mode '+Ve.toString(r)+`.
 Suggested mode is: `+Ve.toString(n));switch(r===Ve.KANJI&&!jg.isKanjiModeEnabled()&&(r=Ve.BYTE),r){case Ve.NUMERIC:return new iR(t);case Ve.ALPHANUMERIC:return new sR(t);case Ve.KANJI:return new aR(t);case Ve.BYTE:return new oR(t)}}oc.fromArray=function(e){return e.reduce(function(r,n){return typeof n=="string"?r.push(nR(n,null)):n.data&&r.push(nR(n.data,n.mode)),r},[])};oc.fromString=function(e,r){let n=uR(e,jg.isKanjiModeEnabled()),i=uJ(n),s=cJ(i,r),o=oJ.find_path(s.map,"start","end"),a=[];for(let u=1;u<o.length-1;u++)a.push(s.table[o[u]].node);return oc.fromArray(aJ(a))};oc.rawSplit=function(e){return oc.fromArray(uR(e,jg.isKanjiModeEnabled()))}});var fR=v(lR=>{c();var Qg=es(),m_=Lg(),lJ=AB(),fJ=bB(),hJ=IB(),dJ=TB(),v_=xB(),A_=o_(),pJ=BB(),Gg=VB(),gJ=QB(),yJ=rs(),w_=cR();function mJ(t,e){let r=t.size,n=dJ.getPositions(e);for(let i=0;i<n.length;i++){let s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let u=-1;u<=7;u++)o+u<=-1||r<=o+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?t.set(s+a,o+u,!0,!0):t.set(s+a,o+u,!1,!0))}}function wJ(t){let e=t.size;for(let r=8;r<e-8;r++){let n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function EJ(t,e){let r=hJ.getPositions(e);for(let n=0;n<r.length;n++){let i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function vJ(t,e){let r=t.size,n=Gg.getEncodedBits(e),i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function E_(t,e,r){let n=t.size,i=gJ.getEncodedBits(e,r),s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function AJ(t,e){let r=t.size,n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!t.isReserved(i,a-u)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-u,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function _J(t,e,r){let n=new lJ;r.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),yJ.getCharCountIndicator(u.mode,t)),u.write(n)});let i=Qg.getSymbolTotalCodewords(t),s=A_.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let u=0;u<a;u++)n.put(u%2?17:236,8);return bJ(n,t,e)}function bJ(t,e,r){let n=Qg.getSymbolTotalCodewords(e),i=A_.getTotalCodewordsCount(e,r),s=n-i,o=A_.getBlocksCount(e,r),a=n%o,u=o-a,l=Math.floor(n/o),f=Math.floor(s/o),d=f+1,y=l-f,w=new pJ(y),E=0,O=new Array(o),L=new Array(o),U=0,T=new Uint8Array(t.buffer);for(let _=0;_<o;_++){let S=_<u?f:d;O[_]=T.slice(E,E+S),L[_]=w.encode(O[_]),E+=S,U=Math.max(U,S)}let b=new Uint8Array(n),x=0,P,B;for(P=0;P<U;P++)for(B=0;B<o;B++)P<O[B].length&&(b[x++]=O[B][P]);for(P=0;P<y;P++)for(B=0;B<o;B++)b[x++]=L[B][P];return b}function IJ(t,e,r,n){let i;if(Array.isArray(t))i=w_.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){let f=w_.rawSplit(t);l=Gg.getBestVersionForData(f,r)}i=w_.fromString(t,l||40)}else throw new Error("Invalid data");let s=Gg.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let o=_J(e,r,i),a=Qg.getSymbolSize(e),u=new fJ(a);return mJ(u,e),wJ(u),EJ(u,e),E_(u,r,0),e>=7&&vJ(u,e),AJ(u,o),isNaN(n)&&(n=v_.getBestMask(u,E_.bind(null,u,r))),v_.applyMask(n,u),E_(u,r,n),{modules:u,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}lR.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=m_.M,i,s;return typeof r<"u"&&(n=m_.from(r.errorCorrectionLevel,m_.M),i=Gg.from(r.version),s=v_.from(r.maskPattern),r.toSJISFunc&&Qg.setToSJISFunction(r.toSJISFunc)),IJ(e,i,n,s)}});var __=v(xo=>{c();function hR(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+e.slice(0,6).join("")}}xo.getOptions=function(e){e||(e={}),e.color||(e.color={});let r=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:r,color:{dark:hR(e.color.dark||"#000000ff"),light:hR(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};xo.getScale=function(e,r){return r.width&&r.width>=e+r.margin*2?r.width/(e+r.margin*2):r.scale};xo.getImageWidth=function(e,r){let n=xo.getScale(e,r);return Math.floor((e+r.margin*2)*n)};xo.qrToImageData=function(e,r,n){let i=r.modules.size,s=r.modules.data,o=xo.getScale(i,n),a=Math.floor((i+n.margin*2)*o),u=n.margin*o,l=[n.color.light,n.color.dark];for(let f=0;f<a;f++)for(let d=0;d<a;d++){let y=(f*a+d)*4,w=n.color.light;if(f>=u&&d>=u&&f<a-u&&d<a-u){let E=Math.floor((f-u)/o),O=Math.floor((d-u)/o);w=l[s[E*i+O]?1:0]}e[y++]=w.r,e[y++]=w.g,e[y++]=w.b,e[y]=w.a}}});var dR=v(kg=>{c();var b_=__();function SJ(t,e,r){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}function CJ(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}kg.render=function(e,r,n){let i=n,s=r;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),r||(s=CJ()),i=b_.getOptions(i);let o=b_.getImageWidth(e.modules.size,i),a=s.getContext("2d"),u=a.createImageData(o,o);return b_.qrToImageData(u.data,e,i),SJ(a,s,o),a.putImageData(u,0,0),s};kg.renderToDataURL=function(e,r,n){let i=n;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),i||(i={});let s=kg.render(e,r,i),o=i.type||"image/png",a=i.rendererOpts||{};return s.toDataURL(o,a.quality)}});var yR=v(gR=>{c();var TJ=__();function pR(t,e){let r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function I_(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function xJ(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){let u=Math.floor(a%e),l=Math.floor(a/e);!u&&!s&&(s=!0),t[a]?(o++,a>0&&u>0&&t[a-1]||(n+=s?I_("M",u+r,.5+l+r):I_("m",i,0),i=0,s=!1),u+1<e&&t[a+1]||(n+=I_("h",o),o=0)):i++}return n}gR.render=function(e,r,n){let i=TJ.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,u=i.color.light.a?"<path "+pR(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+pR(i.color.dark,"stroke")+' d="'+xJ(o,s,i.margin)+'"/>',f='viewBox="0 0 '+a+" "+a+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+l+`</svg>
`;return typeof n=="function"&&n(null,y),y}});var wR=v(of=>{c();var NJ=wB(),S_=fR(),mR=dR(),DJ=yR();function C_(t,e,r,n,i){let s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!NJ())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(u,l){try{let f=S_.create(r,n);u(t(f,e,n))}catch(f){l(f)}})}try{let u=S_.create(r,n);i(null,t(u,e,n))}catch(u){i(u)}}of.create=S_.create;of.toCanvas=C_.bind(null,mR.render);of.toDataURL=C_.bind(null,mR.renderToDataURL);of.toString=C_.bind(null,function(t,e,r){return DJ.render(t,r)})});var DR=v(is=>{"use strict";c();var jJ=is&&is.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NR=is&&is.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jJ(e,t,r)};Object.defineProperty(is,"__esModule",{value:!0});NR(kl(),is);NR(KA(),is)});c();var GJ=_e(rb()),QJ=_e(VC()),kJ=_e(jC()),KJ=_e(Zt()),zJ=_e(Oh()),WJ=_e(Oc()),$J=_e(Sc()),YJ=_e(ow()),JJ=_e(Nx()),XJ=_e(Lh()),FR=_e(li()),Nn=_e(mc()),MR=_e(pc()),UR=_e(Jo());c();c();var Mx=_e(oE());c();c();var ad="elvenjs_state",Rx="https://devnet-api.multiversx.com";var ud="/dapp/init",cd="devnet",Lx="https://maiar.page.link/?apn=com.elrond.maiar.wallet&isi=1519405832&ibi=com.elrond.maiar.wallet&link=https://xportal.com/",Fx=["wss://relay.walletconnect.com"],yn={devnet:{id:"devnet",shortId:"D",name:"Devnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://devnet-wallet.multiversx.com",apiAddress:"https://devnet-api.multiversx.com",explorerAddress:"https://devnet-explorer.multiversx.com",apiTimeout:1e4},testnet:{id:"testnet",shortId:"T",name:"Testnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://testnet-wallet.multiversx.com",apiAddress:"https://testnet-api.multiversx.com",explorerAddress:"https://testnet-explorer.multiversx.com",apiTimeout:1e4},mainnet:{id:"mainnet",shortId:"1",name:"Mainnet",egldLabel:"EGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://wallet.multiversx.com",apiAddress:"https://api.multiversx.com",explorerAddress:"https://explorer.multiversx.com",apiTimeout:1e4}};var Te={get(t){let e=localStorage.getItem(ad);if(!e)return{};let r=JSON.parse(e);return t?r[t]:r},set(t,e){let r=this.get();r[t]=e,localStorage.setItem(ad,JSON.stringify(r))},clear(){localStorage.removeItem(ad)}};var ld=()=>Ce(void 0,null,function*(){let t=Mx.ExtensionProvider.getInstance();try{let e=yield t.init(),r=Te.get();if(r!=null&&r.address&&t.setAddress(r.address),!e){console.warn("Something went wrong when trying to initialize the ExtensionProvider..");return}return t}catch(e){console.warn("Can't initialize the Dapp Provider!")}});var BR=_e(oE()),RR=_e(ql()),LR=_e(kl());c();var kP=_e(ql());c();c();var Se=class{static set(e,r){if(!e)return;let n=O_(Do({},this.events),{[e]:r});this.events=n}static get(e){if(!(!e||!this.events))return this.events[e]}static run(e,...r){var n,i;!e||!this.events||(i=(n=this.events)[e])==null||i.call(n,...r)}static clear(){this.events=void 0}};c();var bo=(i=>(i.ledger="ledger",i.mobile="mobile",i.webWallet="web-wallet",i.browserExtension="browser-extension",i))(bo||{});var Wu=t=>Ce(void 0,null,function*(){if(!t.dappProvider)throw new Error("Error: Logout failed: There is no active session!");Se.run("onLoginPending");let e=yield t.dappProvider.logout();return e&&(Te.clear(),Se.run("onLogout")),e});c();var GP=_e(Zt()),QP=_e(Oh());c();var Bt=t=>typeof t=="string"?t.toUpperCase():t instanceof Error?t.message:`Error: ${JSON.stringify(t)}`;c();var $u=()=>new Date().setHours(new Date().getHours()+24),Sg=t=>Date.now()>t;var Xi=t=>Ce(void 0,null,function*(){let e=Te.get("address"),r=Te.get("expires");if(!(r&&Sg(r))&&e&&t.networkProvider){let i=new GP.Address(e),s=new QP.Account(i);try{let o=yield t.networkProvider.getAccount(i);Te.set("address",e),Te.set("nonce",o.nonce.valueOf()),Te.set("balance",o.balance.toString()),s.update(o)}catch(o){let a=Bt(o);console.warn(`Something went wrong trying to synchronize the user account: ${a}`)}}});c();function Cg(t){return t[Math.floor(Math.random()*t.length)]}var KP=t=>Ce(void 0,null,function*(){if(!t.initOptions.walletConnectV2ProjectId||!t.initOptions.chainType)return;let e={onClientLogin:()=>{Xi(t),Se.run("onLoggedIn")},onClientLogout:()=>Wu(t),onClientEvent:i=>{console.log("wc2 session event: ",i)}},r=Cg(t.initOptions.walletConnectV2RelayAddresses),n=new kP.WalletConnectV2Provider(e,yn[t.initOptions.chainType].shortId,r,t.initOptions.walletConnectV2ProjectId);try{return yield n.init(),n}catch(i){console.warn("Can't initialize the Dapp Provider!")}});c();var uB=_e(Wt()),Bg=_e(Zt()),cB=_e(zP()),lB=_e(XP()),fB=_e(r_()),hB=_e(iB()),dB=_e(oB()),pB=_e(aB()),gB=_e(Mh());var Rg=class{constructor({apiUrl:e,chainType:r,apiTimeout:n}){var i,s;this.chainType=r||cd,this.apiUrl=e||((i=yn[this.chainType])==null?void 0:i.apiAddress),this.apiTimeout=n||((s=yn[this.chainType])==null?void 0:s.apiTimeout)}apiGet(e,r){return Ce(this,null,function*(){if(typeof fetch!="undefined"){let n=new AbortController,i=setTimeout(()=>n.abort(),this.apiTimeout),s={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:n.signal};try{let o=yield fetch(this.apiUrl+"/"+e,Object.assign(s,r||{})),a=yield o.json();if(!o.ok){let u=(a==null?void 0:a.error)||o.status;return clearTimeout(i),Promise.reject(u)}return clearTimeout(i),a}catch(o){this.handleApiError(o,e)}}})}apiPost(e,r,n){return Ce(this,null,function*(){if(typeof fetch!="undefined"){let i=new AbortController,s=setTimeout(()=>i.abort(),this.apiTimeout),o={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r||{}),signal:i.signal};try{let a=yield fetch(this.apiUrl+"/"+e,Object.assign(o,n||{})),u=yield a.json();if(!a.ok){let l=(u==null?void 0:u.error)||a.status;return clearTimeout(s),Promise.reject(l)}return clearTimeout(s),u}catch(a){this.handleApiError(a,e)}}})}handleApiError(e,r){if(!e.response)throw new Error(`Request error on url [${r}]: [${e.toString()}]`);let n=e.response.data,i=n.error||n.message||JSON.stringify(n);throw new Error(i)}sendTransaction(e){return Ce(this,null,function*(){return(yield this.apiPost("transactions",e.toSendable())).txHash})}getAccount(e){return Ce(this,null,function*(){let r=yield this.apiGet(`accounts/${e.bech32()}`);return{address:new Bg.Address((r==null?void 0:r.address)||""),nonce:Number((r==null?void 0:r.nonce)||0),balance:new uB.default((r==null?void 0:r.balance)||0),code:(r==null?void 0:r.code)||"",userName:(r==null?void 0:r.username)||""}})}getTransaction(e){return Ce(this,null,function*(){let r=yield this.apiGet(`transactions/${e}`),n=new cB.TransactionStatus(r.status);return{hash:e,type:r.type||"",nonce:r.nonce||0,round:r.round,epoch:r.epoch||0,value:(r.value||0).toString(),sender:new Bg.Address(r.sender),receiver:new Bg.Address(r.receiver),gasPrice:r.gasPrice||0,gasLimit:r.gasLimit||0,data:h.Buffer.from(r.data||"","base64"),status:n,timestamp:r.timestamp||0,blockNonce:r.blockNonce||0,hyperblockNonce:r.hyperblockNonce||0,hyperblockHash:r.hyperblockHash||"",receipt:lB.TransactionReceipt.fromHttpResponse(r.receipt||{}),logs:fB.TransactionLogs.fromHttpResponse(r.logs||{}),contractResults:hB.ContractResults.fromApiHttpResponse(r.results||[]),isCompleted:!n.isPending()}})}queryContract(o){return Ce(this,arguments,function*({address:e,func:r,args:n,value:i,caller:s}){try{let a=new gB.Query({address:e,func:r,args:n,value:i,caller:s}),u=new pB.ContractQueryRequest(a).toHttpRequest(),l=yield this.apiPost("query",u);return dB.ContractQueryResponse.fromHttpResponse(l)}catch(a){this.handleApiError(a,"query")}})}};c();var yB=(t,e)=>Ce(void 0,null,function*(){let r=yield ld();try{r&&(yield r.login()),Se.run("onLoginPending")}catch(i){let s=Bt(i);console.warn(`Something went wrong trying to login the user: ${s}`)}if(!r)throw new Error("Error: There were problems with auth provider initialization!");let{signature:n}=r.account;if(e&&Te.set("loginToken",e),n&&Te.set("signature",n),t.networkProvider)try{let i=yield r.getAddress();if(!i)throw new Error("Canceled!");return Te.set("address",i),Te.set("loginMethod","browser-extension"),Te.set("expires",$u()),yield Xi(t),Se.run("onLoggedIn"),r}catch(i){console.warn(`Something went wrong trying to synchronize the user account: ${i==null?void 0:i.message}`),Se.run("onLogout")}});c();c();var ER=_e(wR()),vR=_e(ql());var PJ=t=>{var r;let e=document.createElement("template");return e.innerHTML=t.trim(),(r=e.content.firstChild)==null?void 0:r.cloneNode(!0)},BJ=t=>{let e=`${Lx}?wallet-connect=${encodeURIComponent(t)}`,r=document.createElement("a");return r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer nofollow"),r.setAttribute("target","_blank"),r.textContent="xPortal login",r.classList.add("elven-qr-code-deep-link"),r},RJ=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairings"),t},LJ=()=>{let t=document.createElement("div");return t.textContent="Existing WalletConnect pairings:",t.classList.add("elven-wc-pairings-header"),t},T_={},FJ=(t,e)=>{let r=document.createElement("button");return r.classList.add("elven-wc-pairings-remove-btn"),r.textContent="\u2716",T_[t.topic]=new AbortController,r.addEventListener("click",n=>{n.stopImmediatePropagation(),e(t.topic)},{signal:T_[t.topic].signal}),r},Kg={},MJ=(t,e,r)=>{var o,a;let n=document.createElement("div"),i=document.createElement("div");n.classList.add("elven-wc-pairing-item"),n.setAttribute("id",t.topic),i.classList.add("elven-wc-pairing-item-description"),i.textContent=`${(o=t.peerMetadata)==null?void 0:o.description} (${(a=t.peerMetadata)==null?void 0:a.url})`,n.appendChild(i);let s=FJ(t,e);return n.appendChild(s),Kg[t.topic]=new AbortController,n.addEventListener("click",()=>r(t.topic),{signal:Kg[t.topic].signal}),n},UJ=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairing-item-confirm-msessage"),t.setAttribute("id","elven-wc-pairing-item-confirm-msessage"),t.innerText="Confirm on xPortal app!",t},qJ=t=>{if(!t)return;let e=document.getElementById(t);e==null||e.remove()},VJ=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),HJ=t=>Ce(void 0,null,function*(){return t?yield ER.default.toString(t,{type:"svg"}):void 0}),AR=(t,e,r,n)=>Ce(void 0,null,function*(){if(!t)throw new Error("Please provide the QR Code and WalletConnect Pairings container id!");let i=null;typeof t=="string"?i=document.getElementById(t):t instanceof HTMLElement&&(i=t);let s=yield HJ(e),o;if(s&&(o=PJ(s)),i&&o&&(i.replaceChildren(),i.appendChild(o),VJ()&&i.appendChild(BJ(e))),i&&r instanceof vR.WalletConnectV2Provider){let a=r.pairings,u=f=>Ce(void 0,null,function*(){try{f&&(yield r.logout({topic:f}),qJ(f))}catch(d){let y=Bt(d);console.warn(`Something went wrong trying to remove the existing pairing: ${y}`)}finally{Kg[f].abort()}}),l=f=>Ce(void 0,null,function*(){try{let{approval:d}=yield r.connect({topic:f,methods:["mvx_cancelAction"]});if(!document.getElementById("elven-wc-pairing-item-confirm-msessage")){let w=document.getElementById(f);w==null||w.after(UJ())}yield r.login({approval:d,token:n})}catch(d){let y=Bt(d);console.warn(`Something went wrong trying to login the user: ${y}`)}finally{for(let d of Object.values(Kg))d==null||d.abort();for(let d of Object.values(T_))d==null||d.abort()}});if(a&&a.length>0){let f=RJ();i.appendChild(f);let d=LJ();f.appendChild(d);for(let y of a){let w=MJ(y,u,l);f.appendChild(w)}}}return i});var zg=_e(ql());var _R=(t,e,r)=>Ce(void 0,null,function*(){if(!e)throw new Error("You haven't provided the QR code container DOM element id");let n=Cg(t.initOptions.walletConnectV2RelayAddresses);if(!n||!t.networkProvider)throw new Error("Something wen't wrong with the initialization (ApiNetworkProvider or Wallet Connect Bridge address), plese try to refresh the page!");if(!t.initOptions.walletConnectV2ProjectId)throw new Error("Please provide your WalletConnect project id. You can get it here: https://cloud.walletconnect.com)");if(!t.initOptions.chainType)throw new Error("Please provide the chain type in ElvenJS.init function!");let i,s={onClientLogin:()=>Ce(void 0,null,function*(){if(t.dappProvider instanceof zg.WalletConnectV2Provider){Se.run("onLoginPending");let a=yield t.dappProvider.getAddress(),u=yield t.dappProvider.getSignature();Te.set("address",a),Te.set("loginMethod","mobile"),Te.set("expires",$u()),yield Xi(t),u&&Te.set("signature",u),r&&Te.set("loginToken",r),Se.run("onLoggedIn"),i==null||i.replaceChildren()}}),onClientLogout:()=>Ce(void 0,null,function*(){t.dappProvider instanceof zg.WalletConnectV2Provider&&(yield Wu(t),Se.run("onLogout"))}),onClientEvent:a=>{console.log("wc2 session event: ",a)}},o=new zg.WalletConnectV2Provider(s,yn[t.initOptions.chainType].shortId,n,t.initOptions.walletConnectV2ProjectId);try{if(o){t.dappProvider=o,Se.run("onQrPending"),yield o.init();let{uri:a,approval:u}=yield o.connect({methods:["mvx_cancelAction"]}),l=r?`${a}&token=${r}`:a;return e&&l&&(i=yield AR(e,l,o,r),Se.run("onQrLoaded")),yield o.login({approval:u,token:r}),o}}catch(a){let u=Bt(a);console.warn(`Something went wrong trying to login the user: ${u}`),Se.run("onLogout")}});c();var bR=_e(kl());var IR=(t,e,r)=>Ce(void 0,null,function*(){let n=new bR.WalletProvider(`${t}${ud}`),i=typeof window!="undefined"?encodeURIComponent(`${window.location.origin}${e||"/"}`):"/",s=Do({callbackUrl:i},r?{token:r}:{});try{return Se.run("onLoginPending"),Te.set("loginMethod","web-wallet"),yield n.login(s),Te.set("expires",$u()),r&&Te.set("loginToken",r),n}catch(o){let a=Bt(o);console.warn(`Something went wrong trying to login the user: ${a}`),Te.set("loginMethod",""),Se.run("onLogout")}});c();var No=t=>{if(typeof window!="undefined"){let e=new URL(window.location.href);return new URLSearchParams(e.search).get(t)}};c();var SR=_e(kl());var CR=t=>Ce(void 0,null,function*(){let e=No("signature"),r=No("address"),n=Te.get("address");if(e&&Te.set("signature",e),r||n)return r&&(Te.set("address",r),window.history.replaceState(null,"",window.location.pathname)),new SR.WalletProvider(`${t}${ud}`)});c();var TR=_e(Oh()),xR=_e(ow());var Wg=(t,e)=>Ce(void 0,null,function*(){Se.run("onTxSent",t),yield new xR.TransactionWatcher(e).awaitCompleted(t);let n=t.getSender(),i=new TR.Account(n),s=yield e.getAccount(n);i.update(s),Te.set("address",i.address.bech32()),Te.set("nonce",i.getNonceThenIncrement().valueOf()),Te.set("balance",i.balance.toString()),Se.run("onTxFinalized",t)});c();var $g=_e(DR()),OR=_e(Oc());var PR=(t,e,r)=>Ce(void 0,null,function*(){if(No($g.WALLET_PROVIDER_CALLBACK_PARAM)===$g.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED&&t&&e&&"getTransactionsFromWalletUrl"in t){let i=t.getTransactionsFromWalletUrl();window.history.replaceState(null,"",window.location.pathname);let s=i==null?void 0:i[0];if(s){s.data=h.Buffer.from(s.data).toString("base64");let o=OR.Transaction.fromPlainObject(s);o.setNonce(r);try{Se.run("onTxStarted",o),yield e.sendTransaction(o),yield Wg(o,e)}catch(a){let u=Bt(a);throw Se.run("onTxError",o,u),new Error(`Error: Transaction signing failed! ${u}`)}}}});var uf=class{static init(e){return Ce(this,null,function*(){let r=Te.get();if(r.expires&&Sg(r.expires)){Te.clear(),this.dappProvider=void 0;return}this.initOptions=Do({chainType:cd,apiUrl:Rx,apiTimeout:1e4,walletConnectV2ProjectId:"",walletConnectV2RelayAddresses:Fx},e),this.networkProvider=new Rg(this.initOptions),this.initOptions.onLoginPending&&Se.set("onLoginPending",this.initOptions.onLoginPending),this.initOptions.onLoggedIn&&Se.set("onLoggedIn",this.initOptions.onLoggedIn),this.initOptions.onQrPending&&Se.set("onQrPending",this.initOptions.onQrPending),this.initOptions.onQrLoaded&&Se.set("onQrLoaded",this.initOptions.onQrLoaded),this.initOptions.onLogout&&Se.set("onLogout",this.initOptions.onLogout),this.initOptions.onTxStarted&&Se.set("onTxStarted",this.initOptions.onTxStarted),this.initOptions.onTxSent&&Se.set("onTxSent",this.initOptions.onTxSent),this.initOptions.onTxFinalized&&Se.set("onTxFinalized",this.initOptions.onTxFinalized),this.initOptions.onTxError&&Se.set("onTxError",this.initOptions.onTxError),((r==null?void 0:r.address)||r.loginMethod==="web-wallet"&&No("address"))&&(r!=null&&r.loginMethod)&&(Se.run("onLoginPending"),r.loginMethod==="browser-extension"&&(this.dappProvider=yield ld()),r.loginMethod==="mobile"&&(this.dappProvider=yield KP(this)),r.loginMethod==="web-wallet"&&this.initOptions.chainType&&(this.dappProvider=yield CR(yn[this.initOptions.chainType].walletAddress)),yield Xi(this),Se.run("onLoggedIn"),r.loginMethod==="web-wallet"&&(yield PR(this.dappProvider,this.networkProvider,r.nonce)))})}static login(e,r){return Ce(this,null,function*(){var i;if(!Object.values(bo).includes(e))throw new Error("Error: Wrong login method!");if(!this.networkProvider)throw new Error("Error: Login failed: Use ElvenJs.init() first!");try{if(e==="browser-extension"){let s=yield yB(this,r==null?void 0:r.token);this.dappProvider=s}if(e==="mobile"){let s=yield _R(this,r==null?void 0:r.qrCodeContainer,r==null?void 0:r.token);this.dappProvider=s}if(e==="web-wallet"&&((i=this.initOptions)!=null&&i.chainType)){let s=yield IR(yn[this.initOptions.chainType].walletAddress,r==null?void 0:r.callbackRoute,r==null?void 0:r.token);this.dappProvider=s}}catch(s){let o=Bt(s);throw new Error(`Error: ${o}`)}})}static logout(){return Ce(this,null,function*(){try{let e=yield Wu(this);return this.dappProvider=void 0,e}catch(e){let r=Bt(e);console.warn("Something went wrong when logging out: ",r)}})}static signAndSendTransaction(e){return Ce(this,null,function*(){if(!this.dappProvider)throw new Error("Error: Transaction signing failed: There is no active session!");if(!this.networkProvider)throw new Error("Error: Transaction signing failed: There is no active network provider!");try{Se.run("onTxStarted",e);let r=Te.get();e.setNonce(r.nonce),this.dappProvider instanceof BR.ExtensionProvider&&(yield this.dappProvider.signTransaction(e)),this.dappProvider instanceof RR.WalletConnectV2Provider&&(yield this.dappProvider.signTransaction(e)),this.dappProvider instanceof LR.WalletProvider&&(yield this.dappProvider.signTransaction(e)),r.loginMethod!=="web-wallet"&&(yield this.networkProvider.sendTransaction(e),yield Wg(e,this.networkProvider))}catch(r){let n=Bt(r);throw Se.run("onTxError",e,n),new Error(`Error: Transaction signing failed! ${n}`)}return e})}static queryContract(o){return Ce(this,arguments,function*({address:e,func:r,args:n=[],value:i=0,caller:s}){if(!this.networkProvider)throw new Error("Error: Query failed: There is no active network provider!");if(!e||!r)throw new Error("Error: Query failed: The Query arguments are not valid! Address and func required");try{return yield this.networkProvider.queryContract({address:e,func:r,args:n,value:i,caller:s})}catch(a){let u=Bt(a);throw new Error(`Error: Smart contract query failed! ${u}`)}})}},af=uf;af.storage=Te,af.destroy=()=>{uf.networkProvider=void 0,uf.dappProvider=void 0,uf.initOptions=void 0,Se.clear()};var export_Account=zJ.Account;var export_Address=KJ.Address;var export_AddressType=UR.AddressType;var export_AddressValue=UR.AddressValue;var export_BigUIntType=Nn.BigUIntType;var export_BigUIntValue=Nn.BigUIntValue;var export_BooleanType=MR.BooleanType;var export_BooleanValue=MR.BooleanValue;var export_BytesType=FR.BytesType;var export_BytesValue=FR.BytesValue;var export_ContractFunction=XJ.ContractFunction;var export_GasEstimator=kJ.GasEstimator;var export_SmartContract=JJ.SmartContract;var export_TokenTransfer=GJ.TokenTransfer;var export_Transaction=WJ.Transaction;var export_TransactionPayload=$J.TransactionPayload;var export_TransactionWatcher=YJ.TransactionWatcher;var export_TransferTransactionsFactory=QJ.TransferTransactionsFactory;var export_U16Type=Nn.U16Type;var export_U16Value=Nn.U16Value;var export_U32Type=Nn.U32Type;var export_U32Value=Nn.U32Value;var export_U64Type=Nn.U64Type;var export_U64Value=Nn.U64Value;var export_U8Type=Nn.U8Type;var export_U8Value=Nn.U8Value;export{export_Account as Account,export_Address as Address,export_AddressType as AddressType,export_AddressValue as AddressValue,export_BigUIntType as BigUIntType,export_BigUIntValue as BigUIntValue,export_BooleanType as BooleanType,export_BooleanValue as BooleanValue,export_BytesType as BytesType,export_BytesValue as BytesValue,export_ContractFunction as ContractFunction,af as ElvenJS,export_GasEstimator as GasEstimator,bo as LoginMethodsEnum,export_SmartContract as SmartContract,export_TokenTransfer as TokenTransfer,export_Transaction as Transaction,export_TransactionPayload as TransactionPayload,export_TransactionWatcher as TransactionWatcher,export_TransferTransactionsFactory as TransferTransactionsFactory,export_U16Type as U16Type,export_U16Value as U16Value,export_U32Type as U32Type,export_U32Value as U32Value,export_U64Type as U64Type,export_U64Value as U64Value,export_U8Type as U8Type,export_U8Value as U8Value};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
