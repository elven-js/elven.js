var N5=Object.create;var sf=Object.defineProperty;var O5=Object.getOwnPropertyDescriptor;var D5=Object.getOwnPropertyNames;var P5=Object.getPrototypeOf,R5=Object.prototype.hasOwnProperty;var hS=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var fe=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ct=(t,e)=>{for(var r in e)sf(t,r,{get:e[r],enumerable:!0})},nf=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D5(e))!R5.call(t,i)&&i!==r&&sf(t,i,{get:()=>e[i],enumerable:!(n=O5(e,i))||n.enumerable});return t},Gt=(t,e,r)=>(nf(t,e,"default"),r&&nf(r,e,"default")),be=(t,e,r)=>(r=t!=null?N5(P5(t)):{},nf(e||!t||!t.__esModule?sf(r,"default",{value:t,enumerable:!0}):r,t)),ft=t=>nf(sf({},"__esModule",{value:!0}),t);var P0=E(of=>{"use strict";l();of.byteLength=L5;of.toByteArray=M5;of.fromByteArray=V5;var rn=[],Tr=[],B5=typeof Uint8Array<"u"?Uint8Array:Array,D0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(bs=0,dS=D0.length;bs<dS;++bs)rn[bs]=D0[bs],Tr[D0.charCodeAt(bs)]=bs;var bs,dS;Tr[45]=62;Tr[95]=63;function pS(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function L5(t){var e=pS(t),r=e[0],n=e[1];return(r+n)*3/4-n}function F5(t,e,r){return(e+r)*3/4-r}function M5(t){var e,r=pS(t),n=r[0],i=r[1],s=new B5(F5(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Tr[t.charCodeAt(u)]<<18|Tr[t.charCodeAt(u+1)]<<12|Tr[t.charCodeAt(u+2)]<<6|Tr[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Tr[t.charCodeAt(u)]<<2|Tr[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Tr[t.charCodeAt(u)]<<10|Tr[t.charCodeAt(u+1)]<<4|Tr[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function U5(t){return rn[t>>18&63]+rn[t>>12&63]+rn[t>>6&63]+rn[t&63]}function q5(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(U5(n));return i.join("")}function V5(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(q5(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(rn[e>>2]+rn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(rn[e>>10]+rn[e>>4&63]+rn[e<<2&63]+"=")),i.join("")}});var B0=E(R0=>{l();R0.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,g=r?-1:1,y=t[e+h];for(h+=g,s=y&(1<<-f)-1,y>>=-f,f+=a;f>0;s=s*256+t[e+h],h+=g,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+h],h+=g,f-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(y?-1:1)*o*Math.pow(2,s-n)};R0.write=function(t,e,r,n,i,s){var o,a,u,c=s*8-i-1,f=(1<<c)-1,h=f>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,m=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?e+=g/u:e+=g*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*u-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+y]=a&255,y+=m,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+y]=o&255,y+=m,o/=256,c-=8);t[r+y-m]|=T*128}});var CS=E(Io=>{"use strict";l();var L0=P0(),bo=B0(),gS=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Io.Buffer=$;Io.SlowBuffer=W5;Io.INSPECT_MAX_BYTES=50;var af=2147483647;Io.kMaxLength=af;$.TYPED_ARRAY_SUPPORT=H5();!$.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function H5(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty($.prototype,"parent",{enumerable:!0,get:function(){if($.isBuffer(this))return this.buffer}});Object.defineProperty($.prototype,"offset",{enumerable:!0,get:function(){if($.isBuffer(this))return this.byteOffset}});function kn(t){if(t>af)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,$.prototype),e}function $(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return q0(t)}return wS(t,e,r)}$.poolSize=8192;function wS(t,e,r){if(typeof t=="string")return k5(t,e);if(ArrayBuffer.isView(t))return j5(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(nn(t,ArrayBuffer)||t&&nn(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nn(t,SharedArrayBuffer)||t&&nn(t.buffer,SharedArrayBuffer)))return M0(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return $.from(n,e,r);var i=Q5(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return $.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}$.from=function(t,e,r){return wS(t,e,r)};Object.setPrototypeOf($.prototype,Uint8Array.prototype);Object.setPrototypeOf($,Uint8Array);function ES(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function G5(t,e,r){return ES(t),t<=0?kn(t):e!==void 0?typeof r=="string"?kn(t).fill(e,r):kn(t).fill(e):kn(t)}$.alloc=function(t,e,r){return G5(t,e,r)};function q0(t){return ES(t),kn(t<0?0:V0(t)|0)}$.allocUnsafe=function(t){return q0(t)};$.allocUnsafeSlow=function(t){return q0(t)};function k5(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!$.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=vS(t,e)|0,n=kn(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function F0(t){for(var e=t.length<0?0:V0(t.length)|0,r=kn(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function j5(t){if(nn(t,Uint8Array)){var e=new Uint8Array(t);return M0(e.buffer,e.byteOffset,e.byteLength)}return F0(t)}function M0(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,$.prototype),n}function Q5(t){if($.isBuffer(t)){var e=V0(t.length)|0,r=kn(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||H0(t.length)?kn(0):F0(t);if(t.type==="Buffer"&&Array.isArray(t.data))return F0(t.data)}function V0(t){if(t>=af)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+af.toString(16)+" bytes");return t|0}function W5(t){return+t!=t&&(t=0),$.alloc(+t)}$.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==$.prototype};$.compare=function(e,r){if(nn(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),nn(r,Uint8Array)&&(r=$.from(r,r.offset,r.byteLength)),!$.isBuffer(e)||!$.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};$.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};$.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return $.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=$.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var o=e[n];if(nn(o,Uint8Array))s+o.length>i.length?$.from(o).copy(i,s):Uint8Array.prototype.set.call(i,o,s);else if($.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function vS(t,e){if($.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||nn(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return TS(t).length;default:if(i)return n?-1:U0(t).length;e=(""+e).toLowerCase(),i=!0}}$.byteLength=vS;function z5(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return n4(this,e,r);case"utf8":case"utf-8":return bS(this,e,r);case"ascii":return t4(this,e,r);case"latin1":case"binary":return r4(this,e,r);case"base64":return Z5(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i4(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}$.prototype._isBuffer=!0;function Is(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}$.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Is(this,r,r+1);return this};$.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Is(this,r,r+3),Is(this,r+1,r+2);return this};$.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Is(this,r,r+7),Is(this,r+1,r+6),Is(this,r+2,r+5),Is(this,r+3,r+4);return this};$.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?bS(this,0,e):z5.apply(this,arguments)};$.prototype.toLocaleString=$.prototype.toString;$.prototype.equals=function(e){if(!$.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:$.compare(this,e)===0};$.prototype.inspect=function(){var e="",r=Io.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};gS&&($.prototype[gS]=$.prototype.inspect);$.prototype.compare=function(e,r,n,i,s){if(nn(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),!$.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=n-r,u=Math.min(o,a),c=this.slice(i,s),f=e.slice(r,n),h=0;h<u;++h)if(c[h]!==f[h]){o=c[h],a=f[h];break}return o<a?-1:a<o?1:0};function AS(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,H0(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=$.from(e,n)),$.isBuffer(e))return e.length===0?-1:yS(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):yS(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function yS(t,e,r,n,i){var s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(y,m){return s===1?y[m]:y.readUInt16BE(m*s)}var c;if(i){var f=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===a)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){for(var h=!0,g=0;g<a;g++)if(u(t,c+g)!==u(e,g)){h=!1;break}if(h)return c}return-1}$.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};$.prototype.indexOf=function(e,r,n){return AS(this,e,r,n,!0)};$.prototype.lastIndexOf=function(e,r,n){return AS(this,e,r,n,!1)};function $5(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(H0(a))return o;t[r+o]=a}return o}function K5(t,e,r,n){return uf(U0(e,t.length-r),t,r,n)}function Y5(t,e,r,n){return uf(a4(e),t,r,n)}function J5(t,e,r,n){return uf(TS(e),t,r,n)}function X5(t,e,r,n){return uf(u4(e,t.length-r),t,r,n)}$.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return $5(this,e,r,n);case"utf8":case"utf-8":return K5(this,e,r,n);case"ascii":case"latin1":case"binary":return Y5(this,e,r,n);case"base64":return J5(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X5(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};$.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z5(t,e,r){return e===0&&r===t.length?L0.fromByteArray(t):L0.fromByteArray(t.slice(e,r))}function bS(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){var u,c,f,h;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)===128&&(h=(s&31)<<6|u&63,h>127&&(o=h));break;case 3:u=t[i+1],c=t[i+2],(u&192)===128&&(c&192)===128&&(h=(s&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],(u&192)===128&&(c&192)===128&&(f&192)===128&&(h=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return e4(n)}var mS=4096;function e4(t){var e=t.length;if(e<=mS)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=mS));return r}function t4(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function r4(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function n4(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=c4[t[s]];return i}function i4(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}$.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,$.prototype),i};function Lt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}$.prototype.readUintLE=$.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lt(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return i};$.prototype.readUintBE=$.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lt(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};$.prototype.readUint8=$.prototype.readUInt8=function(e,r){return e=e>>>0,r||Lt(e,1,this.length),this[e]};$.prototype.readUint16LE=$.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Lt(e,2,this.length),this[e]|this[e+1]<<8};$.prototype.readUint16BE=$.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Lt(e,2,this.length),this[e]<<8|this[e+1]};$.prototype.readUint32LE=$.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};$.prototype.readUint32BE=$.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};$.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lt(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};$.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lt(e,r,this.length);for(var i=r,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};$.prototype.readInt8=function(e,r){return e=e>>>0,r||Lt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};$.prototype.readInt16LE=function(e,r){e=e>>>0,r||Lt(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};$.prototype.readInt16BE=function(e,r){e=e>>>0,r||Lt(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};$.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};$.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};$.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),bo.read(this,e,!0,23,4)};$.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Lt(e,4,this.length),bo.read(this,e,!1,23,4)};$.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Lt(e,8,this.length),bo.read(this,e,!0,52,8)};$.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Lt(e,8,this.length),bo.read(this,e,!1,52,8)};function ur(t,e,r,n,i,s){if(!$.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}$.prototype.writeUintLE=$.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;ur(this,e,r,n,s,0)}var o=1,a=0;for(this[r]=e&255;++a<n&&(o*=256);)this[r+a]=e/o&255;return r+n};$.prototype.writeUintBE=$.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;ur(this,e,r,n,s,0)}var o=n-1,a=1;for(this[r+o]=e&255;--o>=0&&(a*=256);)this[r+o]=e/a&255;return r+n};$.prototype.writeUint8=$.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,1,255,0),this[r]=e&255,r+1};$.prototype.writeUint16LE=$.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeUint16BE=$.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeUint32LE=$.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};$.prototype.writeUint32BE=$.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};$.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);ur(this,e,r,n,s-1,-s)}var o=0,a=1,u=0;for(this[r]=e&255;++o<n&&(a*=256);)e<0&&u===0&&this[r+o-1]!==0&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n};$.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);ur(this,e,r,n,s-1,-s)}var o=n-1,a=1,u=0;for(this[r+o]=e&255;--o>=0&&(a*=256);)e<0&&u===0&&this[r+o+1]!==0&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n};$.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};$.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};$.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function IS(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _S(t,e,r,n,i){return e=+e,r=r>>>0,i||IS(t,e,r,4,34028234663852886e22,-34028234663852886e22),bo.write(t,e,r,n,23,4),r+4}$.prototype.writeFloatLE=function(e,r,n){return _S(this,e,r,!0,n)};$.prototype.writeFloatBE=function(e,r,n){return _S(this,e,r,!1,n)};function SS(t,e,r,n,i){return e=+e,r=r>>>0,i||IS(t,e,r,8,17976931348623157e292,-17976931348623157e292),bo.write(t,e,r,n,52,8),r+8}$.prototype.writeDoubleLE=function(e,r,n){return SS(this,e,r,!0,n)};$.prototype.writeDoubleBE=function(e,r,n){return SS(this,e,r,!1,n)};$.prototype.copy=function(e,r,n,i){if(!$.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};$.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!$.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var a=$.isBuffer(e)?e:$.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=a[o%u]}return this};var s4=/[^+/0-9A-Za-z-_]/g;function o4(t){if(t=t.split("=")[0],t=t.trim().replace(s4,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function U0(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function a4(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function u4(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function TS(t){return L0.toByteArray(o4(t))}function uf(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function nn(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function H0(t){return t!==t}var c4=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()});var PS=E((fse,DS)=>{l();var mt=DS.exports={},sn,on;function G0(){throw new Error("setTimeout has not been defined")}function k0(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?sn=setTimeout:sn=G0}catch{sn=G0}try{typeof clearTimeout=="function"?on=clearTimeout:on=k0}catch{on=k0}})();function xS(t){if(sn===setTimeout)return setTimeout(t,0);if((sn===G0||!sn)&&setTimeout)return sn=setTimeout,setTimeout(t,0);try{return sn(t,0)}catch{try{return sn.call(null,t,0)}catch{return sn.call(this,t,0)}}}function l4(t){if(on===clearTimeout)return clearTimeout(t);if((on===k0||!on)&&clearTimeout)return on=clearTimeout,clearTimeout(t);try{return on(t)}catch{try{return on.call(null,t)}catch{return on.call(this,t)}}}var jn=[],_o=!1,_s,cf=-1;function f4(){!_o||!_s||(_o=!1,_s.length?jn=_s.concat(jn):cf=-1,jn.length&&NS())}function NS(){if(!_o){var t=xS(f4);_o=!0;for(var e=jn.length;e;){for(_s=jn,jn=[];++cf<e;)_s&&_s[cf].run();cf=-1,e=jn.length}_s=null,_o=!1,l4(t)}}mt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];jn.push(new OS(t,e)),jn.length===1&&!_o&&xS(NS)};function OS(t,e){this.fun=t,this.array=e}OS.prototype.run=function(){this.fun.apply(null,this.array)};mt.title="browser";mt.browser=!0;mt.env={};mt.argv=[];mt.version="";mt.versions={};function Qn(){}mt.on=Qn;mt.addListener=Qn;mt.once=Qn;mt.off=Qn;mt.removeListener=Qn;mt.removeAllListeners=Qn;mt.emit=Qn;mt.prependListener=Qn;mt.prependOnceListener=Qn;mt.listeners=function(t){return[]};mt.binding=function(t){throw new Error("process.binding is not supported")};mt.cwd=function(){return"/"};mt.chdir=function(t){throw new Error("process.chdir is not supported")};mt.umask=function(){return 0}});var d,p,h4,global,l=fe(()=>{d=be(CS()),p=be(PS()),h4=function(t){function e(){var n=this||self;return delete t.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object),global=h4});var kt=E((RS,lf)=>{l();(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,u=14,c=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function y(_){var N,I,S,R=M.prototype={constructor:M,toString:null,valueOf:null},J=new M(1),Q=20,V=4,k=-7,K=21,ge=-1e7,ue=1e7,re=!1,Y=1,se=0,te={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ie="0123456789abcdefghijklmnopqrstuvwxyz";function M(w,v){var b,P,C,D,L,x,F,H,q=this;if(!(q instanceof M))return new M(w,v);if(v==null){if(w&&w._isBigNumber===!0){q.s=w.s,!w.c||w.e>ue?q.c=q.e=null:w.e<ge?q.c=[q.e=0]:(q.e=w.e,q.c=w.c.slice());return}if((x=typeof w=="number")&&w*0==0){if(q.s=1/w<0?(w=-w,-1):1,w===~~w){for(D=0,L=w;L>=10;L/=10,D++);D>ue?q.c=q.e=null:(q.e=D,q.c=[w]);return}H=String(w)}else{if(!r.test(H=String(w)))return S(q,H,x);q.s=H.charCodeAt(0)==45?(H=H.slice(1),-1):1}(D=H.indexOf("."))>-1&&(H=H.replace(".","")),(L=H.search(/e/i))>0?(D<0&&(D=L),D+=+H.slice(L+1),H=H.substring(0,L)):D<0&&(D=H.length)}else{if(B(v,2,ie.length,"Base"),v==10)return q=new M(w),oe(q,Q+q.e+1,V);if(H=String(w),x=typeof w=="number"){if(w*0!=0)return S(q,H,x,v);if(q.s=1/w<0?(H=H.slice(1),-1):1,M.DEBUG&&H.replace(/^0\.0*|\./,"").length>15)throw Error(o+w)}else q.s=H.charCodeAt(0)===45?(H=H.slice(1),-1):1;for(b=ie.slice(0,v),D=L=0,F=H.length;L<F;L++)if(b.indexOf(P=H.charAt(L))<0){if(P=="."){if(L>D){D=F;continue}}else if(!C&&(H==H.toUpperCase()&&(H=H.toLowerCase())||H==H.toLowerCase()&&(H=H.toUpperCase()))){C=!0,L=-1,D=0;continue}return S(q,String(w),x,v)}x=!1,H=I(H,v,10,q.s),(D=H.indexOf("."))>-1?H=H.replace(".",""):D=H.length}for(L=0;H.charCodeAt(L)===48;L++);for(F=H.length;H.charCodeAt(--F)===48;);if(H=H.slice(L,++F)){if(F-=L,x&&M.DEBUG&&F>15&&(w>c||w!==i(w)))throw Error(o+q.s*w);if((D=D-L-1)>ue)q.c=q.e=null;else if(D<ge)q.c=[q.e=0];else{if(q.e=D,q.c=[],L=(D+1)%u,D<0&&(L+=u),L<F){for(L&&q.c.push(+H.slice(0,L)),F-=u;L<F;)q.c.push(+H.slice(L,L+=u));L=u-(H=H.slice(L)).length}else L-=F;for(;L--;H+="0");q.c.push(+H)}}else q.c=[q.e=0]}M.clone=y,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(w){var v,b;if(w!=null)if(typeof w=="object"){if(w.hasOwnProperty(v="DECIMAL_PLACES")&&(b=w[v],B(b,0,g,v),Q=b),w.hasOwnProperty(v="ROUNDING_MODE")&&(b=w[v],B(b,0,8,v),V=b),w.hasOwnProperty(v="EXPONENTIAL_AT")&&(b=w[v],b&&b.pop?(B(b[0],-g,0,v),B(b[1],0,g,v),k=b[0],K=b[1]):(B(b,-g,g,v),k=-(K=b<0?-b:b))),w.hasOwnProperty(v="RANGE"))if(b=w[v],b&&b.pop)B(b[0],-g,-1,v),B(b[1],1,g,v),ge=b[0],ue=b[1];else if(B(b,-g,g,v),b)ge=-(ue=b<0?-b:b);else throw Error(s+v+" cannot be zero: "+b);if(w.hasOwnProperty(v="CRYPTO"))if(b=w[v],b===!!b)if(b)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=b;else throw re=!b,Error(s+"crypto unavailable");else re=b;else throw Error(s+v+" not true or false: "+b);if(w.hasOwnProperty(v="MODULO_MODE")&&(b=w[v],B(b,0,9,v),Y=b),w.hasOwnProperty(v="POW_PRECISION")&&(b=w[v],B(b,0,g,v),se=b),w.hasOwnProperty(v="FORMAT"))if(b=w[v],typeof b=="object")te=b;else throw Error(s+v+" not an object: "+b);if(w.hasOwnProperty(v="ALPHABET"))if(b=w[v],typeof b=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(b))ie=b;else throw Error(s+v+" invalid: "+b)}else throw Error(s+"Object expected: "+w);return{DECIMAL_PLACES:Q,ROUNDING_MODE:V,EXPONENTIAL_AT:[k,K],RANGE:[ge,ue],CRYPTO:re,MODULO_MODE:Y,POW_PRECISION:se,FORMAT:te,ALPHABET:ie}},M.isBigNumber=function(w){if(!w||w._isBigNumber!==!0)return!1;if(!M.DEBUG)return!0;var v,b,P=w.c,C=w.e,D=w.s;e:if({}.toString.call(P)=="[object Array]"){if((D===1||D===-1)&&C>=-g&&C<=g&&C===i(C)){if(P[0]===0){if(C===0&&P.length===1)return!0;break e}if(v=(C+1)%u,v<1&&(v+=u),String(P[0]).length==v){for(v=0;v<P.length;v++)if(b=P[v],b<0||b>=a||b!==i(b))break e;if(b!==0)return!0}}}else if(P===null&&C===null&&(D===null||D===1||D===-1))return!0;throw Error(s+"Invalid BigNumber: "+w)},M.maximum=M.max=function(){return ae(arguments,R.lt)},M.minimum=M.min=function(){return ae(arguments,R.gt)},M.random=function(){var w=9007199254740992,v=Math.random()*w&2097151?function(){return i(Math.random()*w)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(b){var P,C,D,L,x,F=0,H=[],q=new M(J);if(b==null?b=Q:B(b,0,g),L=n(b/u),re)if(crypto.getRandomValues){for(P=crypto.getRandomValues(new Uint32Array(L*=2));F<L;)x=P[F]*131072+(P[F+1]>>>11),x>=9e15?(C=crypto.getRandomValues(new Uint32Array(2)),P[F]=C[0],P[F+1]=C[1]):(H.push(x%1e14),F+=2);F=L/2}else if(crypto.randomBytes){for(P=crypto.randomBytes(L*=7);F<L;)x=(P[F]&31)*281474976710656+P[F+1]*1099511627776+P[F+2]*4294967296+P[F+3]*16777216+(P[F+4]<<16)+(P[F+5]<<8)+P[F+6],x>=9e15?crypto.randomBytes(7).copy(P,F):(H.push(x%1e14),F+=7);F=L/7}else throw re=!1,Error(s+"crypto unavailable");if(!re)for(;F<L;)x=v(),x<9e15&&(H[F++]=x%1e14);for(L=H[--F],b%=u,L&&b&&(x=f[u-b],H[F]=i(L/x)*x);H[F]===0;H.pop(),F--);if(F<0)H=[D=0];else{for(D=-1;H[0]===0;H.splice(0,1),D-=u);for(F=1,x=H[0];x>=10;x/=10,F++);F<u&&(D-=u-F)}return q.e=D,q.c=H,q}}(),M.sum=function(){for(var w=1,v=arguments,b=new M(v[0]);w<v.length;)b=b.plus(v[w++]);return b},I=function(){var w="0123456789";function v(b,P,C,D){for(var L,x=[0],F,H=0,q=b.length;H<q;){for(F=x.length;F--;x[F]*=P);for(x[0]+=D.indexOf(b.charAt(H++)),L=0;L<x.length;L++)x[L]>C-1&&(x[L+1]==null&&(x[L+1]=0),x[L+1]+=x[L]/C|0,x[L]%=C)}return x.reverse()}return function(b,P,C,D,L){var x,F,H,q,Z,we,Ae,Re,tt=b.indexOf("."),lt=Q,Oe=V;for(tt>=0&&(q=se,se=0,b=b.replace(".",""),Re=new M(P),we=Re.pow(b.length-tt),se=q,Re.c=v(A(T(we.c),we.e,"0"),10,C,w),Re.e=Re.c.length),Ae=v(b,P,C,L?(x=ie,w):(x=w,ie)),H=q=Ae.length;Ae[--q]==0;Ae.pop());if(!Ae[0])return x.charAt(0);if(tt<0?--H:(we.c=Ae,we.e=H,we.s=D,we=N(we,Re,lt,Oe,C),Ae=we.c,Z=we.r,H=we.e),F=H+lt+1,tt=Ae[F],q=C/2,Z=Z||F<0||Ae[F+1]!=null,Z=Oe<4?(tt!=null||Z)&&(Oe==0||Oe==(we.s<0?3:2)):tt>q||tt==q&&(Oe==4||Z||Oe==6&&Ae[F-1]&1||Oe==(we.s<0?8:7)),F<1||!Ae[0])b=Z?A(x.charAt(1),-lt,x.charAt(0)):x.charAt(0);else{if(Ae.length=F,Z)for(--C;++Ae[--F]>C;)Ae[F]=0,F||(++H,Ae=[1].concat(Ae));for(q=Ae.length;!Ae[--q];);for(tt=0,b="";tt<=q;b+=x.charAt(Ae[tt++]));b=A(b,H,x.charAt(0))}return b}}(),N=function(){function w(P,C,D){var L,x,F,H,q=0,Z=P.length,we=C%h,Ae=C/h|0;for(P=P.slice();Z--;)F=P[Z]%h,H=P[Z]/h|0,L=Ae*F+H*we,x=we*F+L%h*h+q,q=(x/D|0)+(L/h|0)+Ae*H,P[Z]=x%D;return q&&(P=[q].concat(P)),P}function v(P,C,D,L){var x,F;if(D!=L)F=D>L?1:-1;else for(x=F=0;x<D;x++)if(P[x]!=C[x]){F=P[x]>C[x]?1:-1;break}return F}function b(P,C,D,L){for(var x=0;D--;)P[D]-=x,x=P[D]<C[D]?1:0,P[D]=x*L+P[D]-C[D];for(;!P[0]&&P.length>1;P.splice(0,1));}return function(P,C,D,L,x){var F,H,q,Z,we,Ae,Re,tt,lt,Oe,Ue,Ot,gi,vs,As,ar,Gn,$t=P.s==C.s?1:-1,Dt=P.c,ze=C.c;if(!Dt||!Dt[0]||!ze||!ze[0])return new M(!P.s||!C.s||(Dt?ze&&Dt[0]==ze[0]:!ze)?NaN:Dt&&Dt[0]==0||!ze?$t*0:$t/0);for(tt=new M($t),lt=tt.c=[],H=P.e-C.e,$t=D+H+1,x||(x=a,H=m(P.e/u)-m(C.e/u),$t=$t/u|0),q=0;ze[q]==(Dt[q]||0);q++);if(ze[q]>(Dt[q]||0)&&H--,$t<0)lt.push(1),Z=!0;else{for(vs=Dt.length,ar=ze.length,q=0,$t+=2,we=i(x/(ze[0]+1)),we>1&&(ze=w(ze,we,x),Dt=w(Dt,we,x),ar=ze.length,vs=Dt.length),gi=ar,Oe=Dt.slice(0,ar),Ue=Oe.length;Ue<ar;Oe[Ue++]=0);Gn=ze.slice(),Gn=[0].concat(Gn),As=ze[0],ze[1]>=x/2&&As++;do{if(we=0,F=v(ze,Oe,ar,Ue),F<0){if(Ot=Oe[0],ar!=Ue&&(Ot=Ot*x+(Oe[1]||0)),we=i(Ot/As),we>1)for(we>=x&&(we=x-1),Ae=w(ze,we,x),Re=Ae.length,Ue=Oe.length;v(Ae,Oe,Re,Ue)==1;)we--,b(Ae,ar<Re?Gn:ze,Re,x),Re=Ae.length,F=1;else we==0&&(F=we=1),Ae=ze.slice(),Re=Ae.length;if(Re<Ue&&(Ae=[0].concat(Ae)),b(Oe,Ae,Ue,x),Ue=Oe.length,F==-1)for(;v(ze,Oe,ar,Ue)<1;)we++,b(Oe,ar<Ue?Gn:ze,Ue,x),Ue=Oe.length}else F===0&&(we++,Oe=[0]);lt[q++]=we,Oe[0]?Oe[Ue++]=Dt[gi]||0:(Oe=[Dt[gi]],Ue=1)}while((gi++<vs||Oe[0]!=null)&&$t--);Z=Oe[0]!=null,lt[0]||lt.splice(0,1)}if(x==a){for(q=1,$t=lt[0];$t>=10;$t/=10,q++);oe(tt,D+(tt.e=q+H*u-1)+1,L,Z)}else tt.e=H,tt.r=+Z;return tt}}();function le(w,v,b,P){var C,D,L,x,F;if(b==null?b=V:B(b,0,8),!w.c)return w.toString();if(C=w.c[0],L=w.e,v==null)F=T(w.c),F=P==1||P==2&&(L<=k||L>=K)?U(F,L):A(F,L,"0");else if(w=oe(new M(w),v,b),D=w.e,F=T(w.c),x=F.length,P==1||P==2&&(v<=D||D<=k)){for(;x<v;F+="0",x++);F=U(F,D)}else if(v-=L,F=A(F,D,"0"),D+1>x){if(--v>0)for(F+=".";v--;F+="0");}else if(v+=D-x,v>0)for(D+1==x&&(F+=".");v--;F+="0");return w.s<0&&C?"-"+F:F}function ae(w,v){for(var b,P=1,C=new M(w[0]);P<w.length;P++)if(b=new M(w[P]),b.s)v.call(C,b)&&(C=b);else{C=b;break}return C}function he(w,v,b){for(var P=1,C=v.length;!v[--C];v.pop());for(C=v[0];C>=10;C/=10,P++);return(b=P+b*u-1)>ue?w.c=w.e=null:b<ge?w.c=[w.e=0]:(w.e=b,w.c=v),w}S=function(){var w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,v=/^([^.]+)\.$/,b=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(D,L,x,F){var H,q=x?L:L.replace(C,"");if(P.test(q))D.s=isNaN(q)?null:q<0?-1:1;else{if(!x&&(q=q.replace(w,function(Z,we,Ae){return H=(Ae=Ae.toLowerCase())=="x"?16:Ae=="b"?2:8,!F||F==H?we:Z}),F&&(H=F,q=q.replace(v,"$1").replace(b,"0.$1")),L!=q))return new M(q,H);if(M.DEBUG)throw Error(s+"Not a"+(F?" base "+F:"")+" number: "+L);D.s=null}D.c=D.e=null}}();function oe(w,v,b,P){var C,D,L,x,F,H,q,Z=w.c,we=f;if(Z){e:{for(C=1,x=Z[0];x>=10;x/=10,C++);if(D=v-C,D<0)D+=u,L=v,F=Z[H=0],q=F/we[C-L-1]%10|0;else if(H=n((D+1)/u),H>=Z.length)if(P){for(;Z.length<=H;Z.push(0));F=q=0,C=1,D%=u,L=D-u+1}else break e;else{for(F=x=Z[H],C=1;x>=10;x/=10,C++);D%=u,L=D-u+C,q=L<0?0:F/we[C-L-1]%10|0}if(P=P||v<0||Z[H+1]!=null||(L<0?F:F%we[C-L-1]),P=b<4?(q||P)&&(b==0||b==(w.s<0?3:2)):q>5||q==5&&(b==4||P||b==6&&(D>0?L>0?F/we[C-L]:0:Z[H-1])%10&1||b==(w.s<0?8:7)),v<1||!Z[0])return Z.length=0,P?(v-=w.e+1,Z[0]=we[(u-v%u)%u],w.e=-v||0):Z[0]=w.e=0,w;if(D==0?(Z.length=H,x=1,H--):(Z.length=H+1,x=we[u-D],Z[H]=L>0?i(F/we[C-L]%we[L])*x:0),P)for(;;)if(H==0){for(D=1,L=Z[0];L>=10;L/=10,D++);for(L=Z[0]+=x,x=1;L>=10;L/=10,x++);D!=x&&(w.e++,Z[0]==a&&(Z[0]=1));break}else{if(Z[H]+=x,Z[H]!=a)break;Z[H--]=0,x=1}for(D=Z.length;Z[--D]===0;Z.pop());}w.e>ue?w.c=w.e=null:w.e<ge&&(w.c=[w.e=0])}return w}function ce(w){var v,b=w.e;return b===null?w.toString():(v=T(w.c),v=b<=k||b>=K?U(v,b):A(v,b,"0"),w.s<0?"-"+v:v)}return R.absoluteValue=R.abs=function(){var w=new M(this);return w.s<0&&(w.s=1),w},R.comparedTo=function(w,v){return O(this,new M(w,v))},R.decimalPlaces=R.dp=function(w,v){var b,P,C,D=this;if(w!=null)return B(w,0,g),v==null?v=V:B(v,0,8),oe(new M(D),w+D.e+1,v);if(!(b=D.c))return null;if(P=((C=b.length-1)-m(this.e/u))*u,C=b[C])for(;C%10==0;C/=10,P--);return P<0&&(P=0),P},R.dividedBy=R.div=function(w,v){return N(this,new M(w,v),Q,V)},R.dividedToIntegerBy=R.idiv=function(w,v){return N(this,new M(w,v),0,1)},R.exponentiatedBy=R.pow=function(w,v){var b,P,C,D,L,x,F,H,q,Z=this;if(w=new M(w),w.c&&!w.isInteger())throw Error(s+"Exponent not an integer: "+ce(w));if(v!=null&&(v=new M(v)),x=w.e>14,!Z.c||!Z.c[0]||Z.c[0]==1&&!Z.e&&Z.c.length==1||!w.c||!w.c[0])return q=new M(Math.pow(+ce(Z),x?2-W(w):+ce(w))),v?q.mod(v):q;if(F=w.s<0,v){if(v.c?!v.c[0]:!v.s)return new M(NaN);P=!F&&Z.isInteger()&&v.isInteger(),P&&(Z=Z.mod(v))}else{if(w.e>9&&(Z.e>0||Z.e<-1||(Z.e==0?Z.c[0]>1||x&&Z.c[1]>=24e7:Z.c[0]<8e13||x&&Z.c[0]<=9999975e7)))return D=Z.s<0&&W(w)?-0:0,Z.e>-1&&(D=1/D),new M(F?1/D:D);se&&(D=n(se/u+2))}for(x?(b=new M(.5),F&&(w.s=1),H=W(w)):(C=Math.abs(+ce(w)),H=C%2),q=new M(J);;){if(H){if(q=q.times(Z),!q.c)break;D?q.c.length>D&&(q.c.length=D):P&&(q=q.mod(v))}if(C){if(C=i(C/2),C===0)break;H=C%2}else if(w=w.times(b),oe(w,w.e+1,1),w.e>14)H=W(w);else{if(C=+ce(w),C===0)break;H=C%2}Z=Z.times(Z),D?Z.c&&Z.c.length>D&&(Z.c.length=D):P&&(Z=Z.mod(v))}return P?q:(F&&(q=J.div(q)),v?q.mod(v):D?oe(q,se,V,L):q)},R.integerValue=function(w){var v=new M(this);return w==null?w=V:B(w,0,8),oe(v,v.e+1,w)},R.isEqualTo=R.eq=function(w,v){return O(this,new M(w,v))===0},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(w,v){return O(this,new M(w,v))>0},R.isGreaterThanOrEqualTo=R.gte=function(w,v){return(v=O(this,new M(w,v)))===1||v===0},R.isInteger=function(){return!!this.c&&m(this.e/u)>this.c.length-2},R.isLessThan=R.lt=function(w,v){return O(this,new M(w,v))<0},R.isLessThanOrEqualTo=R.lte=function(w,v){return(v=O(this,new M(w,v)))===-1||v===0},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&this.c[0]==0},R.minus=function(w,v){var b,P,C,D,L=this,x=L.s;if(w=new M(w,v),v=w.s,!x||!v)return new M(NaN);if(x!=v)return w.s=-v,L.plus(w);var F=L.e/u,H=w.e/u,q=L.c,Z=w.c;if(!F||!H){if(!q||!Z)return q?(w.s=-v,w):new M(Z?L:NaN);if(!q[0]||!Z[0])return Z[0]?(w.s=-v,w):new M(q[0]?L:V==3?-0:0)}if(F=m(F),H=m(H),q=q.slice(),x=F-H){for((D=x<0)?(x=-x,C=q):(H=F,C=Z),C.reverse(),v=x;v--;C.push(0));C.reverse()}else for(P=(D=(x=q.length)<(v=Z.length))?x:v,x=v=0;v<P;v++)if(q[v]!=Z[v]){D=q[v]<Z[v];break}if(D&&(C=q,q=Z,Z=C,w.s=-w.s),v=(P=Z.length)-(b=q.length),v>0)for(;v--;q[b++]=0);for(v=a-1;P>x;){if(q[--P]<Z[P]){for(b=P;b&&!q[--b];q[b]=v);--q[b],q[P]+=a}q[P]-=Z[P]}for(;q[0]==0;q.splice(0,1),--H);return q[0]?he(w,q,H):(w.s=V==3?-1:1,w.c=[w.e=0],w)},R.modulo=R.mod=function(w,v){var b,P,C=this;return w=new M(w,v),!C.c||!w.s||w.c&&!w.c[0]?new M(NaN):!w.c||C.c&&!C.c[0]?new M(C):(Y==9?(P=w.s,w.s=1,b=N(C,w,0,3),w.s=P,b.s*=P):b=N(C,w,0,Y),w=C.minus(b.times(w)),!w.c[0]&&Y==1&&(w.s=C.s),w)},R.multipliedBy=R.times=function(w,v){var b,P,C,D,L,x,F,H,q,Z,we,Ae,Re,tt,lt,Oe=this,Ue=Oe.c,Ot=(w=new M(w,v)).c;if(!Ue||!Ot||!Ue[0]||!Ot[0])return!Oe.s||!w.s||Ue&&!Ue[0]&&!Ot||Ot&&!Ot[0]&&!Ue?w.c=w.e=w.s=null:(w.s*=Oe.s,!Ue||!Ot?w.c=w.e=null:(w.c=[0],w.e=0)),w;for(P=m(Oe.e/u)+m(w.e/u),w.s*=Oe.s,F=Ue.length,Z=Ot.length,F<Z&&(Re=Ue,Ue=Ot,Ot=Re,C=F,F=Z,Z=C),C=F+Z,Re=[];C--;Re.push(0));for(tt=a,lt=h,C=Z;--C>=0;){for(b=0,we=Ot[C]%lt,Ae=Ot[C]/lt|0,L=F,D=C+L;D>C;)H=Ue[--L]%lt,q=Ue[L]/lt|0,x=Ae*H+q*we,H=we*H+x%lt*lt+Re[D]+b,b=(H/tt|0)+(x/lt|0)+Ae*q,Re[D--]=H%tt;Re[D]=b}return b?++P:Re.splice(0,1),he(w,Re,P)},R.negated=function(){var w=new M(this);return w.s=-w.s||null,w},R.plus=function(w,v){var b,P=this,C=P.s;if(w=new M(w,v),v=w.s,!C||!v)return new M(NaN);if(C!=v)return w.s=-v,P.minus(w);var D=P.e/u,L=w.e/u,x=P.c,F=w.c;if(!D||!L){if(!x||!F)return new M(C/0);if(!x[0]||!F[0])return F[0]?w:new M(x[0]?P:C*0)}if(D=m(D),L=m(L),x=x.slice(),C=D-L){for(C>0?(L=D,b=F):(C=-C,b=x),b.reverse();C--;b.push(0));b.reverse()}for(C=x.length,v=F.length,C-v<0&&(b=F,F=x,x=b,v=C),C=0;v;)C=(x[--v]=x[v]+F[v]+C)/a|0,x[v]=a===x[v]?0:x[v]%a;return C&&(x=[C].concat(x),++L),he(w,x,L)},R.precision=R.sd=function(w,v){var b,P,C,D=this;if(w!=null&&w!==!!w)return B(w,1,g),v==null?v=V:B(v,0,8),oe(new M(D),w,v);if(!(b=D.c))return null;if(C=b.length-1,P=C*u+1,C=b[C]){for(;C%10==0;C/=10,P--);for(C=b[0];C>=10;C/=10,P++);}return w&&D.e+1>P&&(P=D.e+1),P},R.shiftedBy=function(w){return B(w,-c,c),this.times("1e"+w)},R.squareRoot=R.sqrt=function(){var w,v,b,P,C,D=this,L=D.c,x=D.s,F=D.e,H=Q+4,q=new M("0.5");if(x!==1||!L||!L[0])return new M(!x||x<0&&(!L||L[0])?NaN:L?D:1/0);if(x=Math.sqrt(+ce(D)),x==0||x==1/0?(v=T(L),(v.length+F)%2==0&&(v+="0"),x=Math.sqrt(+v),F=m((F+1)/2)-(F<0||F%2),x==1/0?v="5e"+F:(v=x.toExponential(),v=v.slice(0,v.indexOf("e")+1)+F),b=new M(v)):b=new M(x+""),b.c[0]){for(F=b.e,x=F+H,x<3&&(x=0);;)if(C=b,b=q.times(C.plus(N(D,C,H,1))),T(C.c).slice(0,x)===(v=T(b.c)).slice(0,x))if(b.e<F&&--x,v=v.slice(x-3,x+1),v=="9999"||!P&&v=="4999"){if(!P&&(oe(C,C.e+Q+2,0),C.times(C).eq(D))){b=C;break}H+=4,x+=4,P=1}else{(!+v||!+v.slice(1)&&v.charAt(0)=="5")&&(oe(b,b.e+Q+2,1),w=!b.times(b).eq(D));break}}return oe(b,b.e+Q+1,V,w)},R.toExponential=function(w,v){return w!=null&&(B(w,0,g),w++),le(this,w,v,1)},R.toFixed=function(w,v){return w!=null&&(B(w,0,g),w=w+this.e+1),le(this,w,v)},R.toFormat=function(w,v,b){var P,C=this;if(b==null)w!=null&&v&&typeof v=="object"?(b=v,v=null):w&&typeof w=="object"?(b=w,w=v=null):b=te;else if(typeof b!="object")throw Error(s+"Argument not an object: "+b);if(P=C.toFixed(w,v),C.c){var D,L=P.split("."),x=+b.groupSize,F=+b.secondaryGroupSize,H=b.groupSeparator||"",q=L[0],Z=L[1],we=C.s<0,Ae=we?q.slice(1):q,Re=Ae.length;if(F&&(D=x,x=F,F=D,Re-=D),x>0&&Re>0){for(D=Re%x||x,q=Ae.substr(0,D);D<Re;D+=x)q+=H+Ae.substr(D,x);F>0&&(q+=H+Ae.slice(D)),we&&(q="-"+q)}P=Z?q+(b.decimalSeparator||"")+((F=+b.fractionGroupSize)?Z.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(b.fractionGroupSeparator||"")):Z):q}return(b.prefix||"")+P+(b.suffix||"")},R.toFraction=function(w){var v,b,P,C,D,L,x,F,H,q,Z,we,Ae=this,Re=Ae.c;if(w!=null&&(x=new M(w),!x.isInteger()&&(x.c||x.s!==1)||x.lt(J)))throw Error(s+"Argument "+(x.isInteger()?"out of range: ":"not an integer: ")+ce(x));if(!Re)return new M(Ae);for(v=new M(J),H=b=new M(J),P=F=new M(J),we=T(Re),D=v.e=we.length-Ae.e-1,v.c[0]=f[(L=D%u)<0?u+L:L],w=!w||x.comparedTo(v)>0?D>0?v:H:x,L=ue,ue=1/0,x=new M(we),F.c[0]=0;q=N(x,v,0,1),C=b.plus(q.times(P)),C.comparedTo(w)!=1;)b=P,P=C,H=F.plus(q.times(C=H)),F=C,v=x.minus(q.times(C=v)),x=C;return C=N(w.minus(b),P,0,1),F=F.plus(C.times(H)),b=b.plus(C.times(P)),F.s=H.s=Ae.s,D=D*2,Z=N(H,P,D,V).minus(Ae).abs().comparedTo(N(F,b,D,V).minus(Ae).abs())<1?[H,P]:[F,b],ue=L,Z},R.toNumber=function(){return+ce(this)},R.toPrecision=function(w,v){return w!=null&&B(w,1,g),le(this,w,v,2)},R.toString=function(w){var v,b=this,P=b.s,C=b.e;return C===null?P?(v="Infinity",P<0&&(v="-"+v)):v="NaN":(w==null?v=C<=k||C>=K?U(T(b.c),C):A(T(b.c),C,"0"):w===10?(b=oe(new M(b),Q+C+1,V),v=A(T(b.c),b.e,"0")):(B(w,2,ie.length,"Base"),v=I(A(T(b.c),C,"0"),10,w,P,!0)),P<0&&b.c[0]&&(v="-"+v)),v},R.valueOf=R.toJSON=function(){return ce(this)},R._isBigNumber=!0,_!=null&&M.set(_),M}function m(_){var N=_|0;return _>0||_===N?N:N-1}function T(_){for(var N,I,S=1,R=_.length,J=_[0]+"";S<R;){for(N=_[S++]+"",I=u-N.length;I--;N="0"+N);J+=N}for(R=J.length;J.charCodeAt(--R)===48;);return J.slice(0,R+1||1)}function O(_,N){var I,S,R=_.c,J=N.c,Q=_.s,V=N.s,k=_.e,K=N.e;if(!Q||!V)return null;if(I=R&&!R[0],S=J&&!J[0],I||S)return I?S?0:-V:Q;if(Q!=V)return Q;if(I=Q<0,S=k==K,!R||!J)return S?0:!R^I?1:-1;if(!S)return k>K^I?1:-1;for(V=(k=R.length)<(K=J.length)?k:K,Q=0;Q<V;Q++)if(R[Q]!=J[Q])return R[Q]>J[Q]^I?1:-1;return k==K?0:k>K^I?1:-1}function B(_,N,I,S){if(_<N||_>I||_!==i(_))throw Error(s+(S||"Argument")+(typeof _=="number"?_<N||_>I?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_))}function W(_){var N=_.c.length-1;return m(_.e/u)==N&&_.c[N]%2!=0}function U(_,N){return(_.length>1?_.charAt(0)+"."+_.slice(1):_)+(N<0?"e":"e+")+N}function A(_,N,I){var S,R;if(N<0){for(R=I+".";++N;R+=I);_=R+_}else if(S=_.length,++N>S){for(R=I,N-=S;--N;R+=I);_+=R}else N<S&&(_=_.slice(0,N)+"."+_.slice(N));return _}e=y(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof lf<"u"&&lf.exports?lf.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(RS)});var Be=E(de=>{"use strict";l();Object.defineProperty(de,"__esModule",{value:!0});de.ErrIsCompletedFieldIsMissingOnTransaction=de.ErrGasLimitShouldBe0ForInnerTransaction=de.ErrInvalidRelayedV2BuilderArguments=de.ErrInvalidRelayedV1BuilderArguments=de.ErrNotImplemented=de.ErrContractInteraction=de.ErrCodec=de.ErrCannotParseTransactionOutcome=de.ErrCannotParseContractResults=de.ErrMissingFieldOnEnum=de.ErrMissingFieldOnStruct=de.ErrTypingSystem=de.ErrMock=de.ErrContractHasNoAddress=de.ErrContract=de.ErrExpectedTransactionEventsNotFound=de.ErrExpectedTransactionStatusNotReached=de.ErrTransactionWatcherTimeout=de.ErrAsyncTimerAborted=de.ErrAsyncTimerAlreadyRunning=de.ErrInvalidFunctionName=de.ErrSignatureCannotCreate=de.ErrTransactionOptionsInvalid=de.ErrTransactionVersionInvalid=de.ErrNonceInvalid=de.ErrNotEnoughGas=de.ErrAddressEmpty=de.ErrAddressBadHrp=de.ErrAddressCannotCreate=de.ErrUnexpectedCondition=de.ErrInvariantFailed=de.ErrBadType=de.ErrUnsupportedOperation=de.ErrInvalidArgument=de.Err=void 0;var De=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}summary(){let e=[];e.push({name:this.name,message:this.message});let r=this.inner;for(;r;)e.push({name:r.name,message:r.message}),r=r.inner;return e}};de.Err=De;var j0=class extends De{constructor(e,r){super(`Invalid argument: ${e}`,r)}};de.ErrInvalidArgument=j0;var Q0=class extends De{constructor(e,r="not specified"){super(`Operation "${e}" not supported. Reason: ${r}`)}};de.ErrUnsupportedOperation=Q0;var W0=class extends De{constructor(e,r,n){super(`Bad type of "${e}": ${n}. Expected type: ${r}`)}};de.ErrBadType=W0;var z0=class extends De{constructor(e){super(`Invariant failed: [${e}]`)}};de.ErrInvariantFailed=z0;var $0=class extends De{constructor(e){super(`Unexpected condition: [${e}]`)}};de.ErrUnexpectedCondition=$0;var K0=class extends De{constructor(e,r){let n=`Cannot create address from: ${e}`;super(n,r)}};de.ErrAddressCannotCreate=K0;var Y0=class extends De{constructor(e,r){super(`Wrong address HRP. Expected: ${e}, got ${r}`)}};de.ErrAddressBadHrp=Y0;var J0=class extends De{constructor(){super("Address is empty")}};de.ErrAddressEmpty=J0;var X0=class extends De{constructor(e){super(`Not enough gas provided: ${e}`)}};de.ErrNotEnoughGas=X0;var Z0=class extends De{constructor(e){super(`Invalid nonce: ${e}`)}};de.ErrNonceInvalid=Z0;var em=class extends De{constructor(e){super(`Invalid transaction version: ${e}`)}};de.ErrTransactionVersionInvalid=em;var tm=class extends De{constructor(e){super(`Invalid transaction options: ${e}`)}};de.ErrTransactionOptionsInvalid=tm;var rm=class extends De{constructor(e,r){let n=`Cannot create signature from: ${e}`;super(n,r)}};de.ErrSignatureCannotCreate=rm;var nm=class extends De{constructor(){super("Invalid function name")}};de.ErrInvalidFunctionName=nm;var im=class extends De{constructor(){super("Async timer already running")}};de.ErrAsyncTimerAlreadyRunning=im;var sm=class extends De{constructor(){super("Async timer aborted")}};de.ErrAsyncTimerAborted=sm;var om=class extends De{constructor(){super("TransactionWatcher has timed out")}};de.ErrTransactionWatcherTimeout=om;var am=class extends De{constructor(){super("Expected transaction status not reached")}};de.ErrExpectedTransactionStatusNotReached=am;var um=class extends De{constructor(){super("Expected transaction events not found")}};de.ErrExpectedTransactionEventsNotFound=um;var ff=class extends De{constructor(e){super(e)}};de.ErrContract=ff;var cm=class extends ff{constructor(){super(`
The smart contract has no address set. Make sure you provide the address in the constructor, or call setAddress() appropriately.
If you need to recompute the address of the contract, make use of SmartContract.computeAddress() (static method). 
`)}};de.ErrContractHasNoAddress=cm;var lm=class extends De{constructor(e){super(e)}};de.ErrMock=lm;var fm=class extends De{constructor(e){super(e)}};de.ErrTypingSystem=fm;var hm=class extends De{constructor(e,r){super(`field ${e} does not exist on struct ${r}`)}};de.ErrMissingFieldOnStruct=hm;var dm=class extends De{constructor(e,r){super(`field ${e} does not exist on enum ${r}`)}};de.ErrMissingFieldOnEnum=dm;var pm=class extends De{constructor(e){super(`cannot parse contract results: ${e}`)}};de.ErrCannotParseContractResults=pm;var gm=class extends De{constructor(e,r){super(`cannot parse outcome of transaction ${e}: ${r}`)}};de.ErrCannotParseTransactionOutcome=gm;var ym=class extends De{constructor(e){super(e)}};de.ErrCodec=ym;var mm=class extends De{constructor(e){super(e)}};de.ErrContractInteraction=mm;var wm=class extends De{constructor(){super("Method not yet implemented")}};de.ErrNotImplemented=wm;var Em=class extends De{constructor(){super("invalid arguments for relayed v1 builder")}};de.ErrInvalidRelayedV1BuilderArguments=Em;var vm=class extends De{constructor(){super("invalid arguments for relayed v2 builder")}};de.ErrInvalidRelayedV2BuilderArguments=vm;var Am=class extends De{constructor(){super("gas limit must be 0 for the inner transaction for relayed v2")}};de.ErrGasLimitShouldBe0ForInnerTransaction=Am;var bm=class extends De{constructor(){super("The transaction watcher requires the `isCompleted` property to be defined on the transaction object. Perhaps you've used the sdk-network-provider's `ProxyNetworkProvider.getTransaction()` and in that case you should also pass `withProcessStatus=true`.")}};de.ErrIsCompletedFieldIsMissingOnTransaction=bm});var _m=E(yi=>{"use strict";l();var d4=yi&&yi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yi,"__esModule",{value:!0});yi.TokenPayment=yi.TokenTransfer=void 0;var Du=d4(kt()),p4=Be(),BS="EGLD",LS=18;Du.default.set({ROUNDING_MODE:1});var hf=class t{constructor(e){let r=new Du.default(e.amountAsBigInteger);if(!r.isInteger()||r.isNegative())throw new p4.ErrInvalidArgument(`bad amountAsBigInteger: ${e.amountAsBigInteger}`);this.tokenIdentifier=e.tokenIdentifier,this.nonce=e.nonce,this.amountAsBigInteger=r,this.numDecimals=e.numDecimals||0}static egldFromAmount(e){let r=new Du.default(e).shiftedBy(LS).decimalPlaces(0);return this.egldFromBigInteger(r)}static egldFromBigInteger(e){return new t({tokenIdentifier:BS,nonce:0,amountAsBigInteger:e,numDecimals:LS})}static fungibleFromAmount(e,r,n){let i=new Du.default(r).shiftedBy(n).decimalPlaces(0);return this.fungibleFromBigInteger(e,i,n)}static fungibleFromBigInteger(e,r,n=0){return new t({tokenIdentifier:e,nonce:0,amountAsBigInteger:r,numDecimals:n})}static nonFungible(e,r){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:1,numDecimals:0})}static semiFungible(e,r,n){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:0})}static metaEsdtFromAmount(e,r,n,i){let s=new Du.default(n).shiftedBy(i).decimalPlaces(0);return this.metaEsdtFromBigInteger(e,r,s,i)}static metaEsdtFromBigInteger(e,r,n,i=0){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}toString(){return this.amountAsBigInteger.toFixed(0)}valueOf(){return this.amountAsBigInteger}toPrettyString(){return`${this.toAmount()} ${this.tokenIdentifier}`}toAmount(){return this.amountAsBigInteger.shiftedBy(-this.numDecimals).toFixed(this.numDecimals)}isEgld(){return this.tokenIdentifier==BS}isFungible(){return this.nonce==0}};yi.TokenTransfer=hf;var Im=class extends hf{constructor(e,r,n,i){super({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}};yi.TokenPayment=Im});var Ss=E($e=>{"use strict";l();Object.defineProperty($e,"__esModule",{value:!0});$e.ARGUMENTS_SEPARATOR=$e.ESDT_TRANSFER_VALUE=$e.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME=$e.ESDTNFT_TRANSFER_FUNCTION_NAME=$e.ESDT_TRANSFER_FUNCTION_NAME=$e.ESDT_TRANSFER_GAS_LIMIT=$e.TRANSACTION_VERSION_WITH_OPTIONS=$e.TRANSACTION_VERSION_DEFAULT=$e.TRANSACTION_OPTIONS_TX_GUARDED=$e.TRANSACTION_OPTIONS_TX_HASH_SIGN=$e.TRANSACTION_OPTIONS_DEFAULT=$e.TRANSACTION_MIN_GAS_PRICE=void 0;$e.TRANSACTION_MIN_GAS_PRICE=1e9;$e.TRANSACTION_OPTIONS_DEFAULT=0;$e.TRANSACTION_OPTIONS_TX_HASH_SIGN=1;$e.TRANSACTION_OPTIONS_TX_GUARDED=2;$e.TRANSACTION_VERSION_DEFAULT=1;$e.TRANSACTION_VERSION_WITH_OPTIONS=2;$e.ESDT_TRANSFER_GAS_LIMIT=5e5;$e.ESDT_TRANSFER_FUNCTION_NAME="ESDTTransfer";$e.ESDTNFT_TRANSFER_FUNCTION_NAME="ESDTNFTTransfer";$e.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME="MultiESDTNFTTransfer";$e.ESDT_TRANSFER_VALUE="0";$e.ARGUMENTS_SEPARATOR="@"});var vr=E(nt=>{"use strict";l();var g4=nt&&nt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),y4=nt&&nt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),m4=nt&&nt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g4(e,t,r);return y4(e,t),e};Object.defineProperty(nt,"__esModule",{value:!0});nt.isEmpty=nt.guardEmpty=nt.guardNotEmpty=nt.guardLength=nt.guardSameLength=nt.guardValueIsSetWithMessage=nt.guardValueIsSet=nt.guardTrue=void 0;var So=m4(Be());function w4(t,e){if(!t)throw new So.ErrInvariantFailed(`[<${e}>] isn't true`)}nt.guardTrue=w4;function E4(t,e){FS(`${t} isn't set (null or undefined)`,e)}nt.guardValueIsSet=E4;function FS(t,e){if(e==null||e===void 0)throw new So.ErrInvariantFailed(t)}nt.guardValueIsSetWithMessage=FS;function v4(t,e){if(t=t||[],e=e||[],t.length!=e.length)throw new So.ErrInvariantFailed("arrays do not have the same length")}nt.guardSameLength=v4;function A4(t,e){let r=t.length||0;if(r!=e)throw new So.ErrInvariantFailed(`wrong length, expected: ${e}, actual: ${r}`)}nt.guardLength=A4;function b4(t,e){if(Sm(t))throw new So.ErrInvariantFailed(`${e} is empty`)}nt.guardNotEmpty=b4;function I4(t,e){if(!Sm(t))throw new So.ErrInvariantFailed(`${e} is not empty`)}nt.guardEmpty=I4;function Sm(t){return t.isEmpty?t.isEmpty():t.length===0}nt.isEmpty=Sm});var MS=E(df=>{"use strict";l();Object.defineProperty(df,"__esModule",{value:!0});df.getJavascriptPrototypesInHierarchy=void 0;function _4(t,e){let r=[],n=Object.getPrototypeOf(t);for(;n&&e(n);)r.push(n),n=Object.getPrototypeOf(n);return r}df.getJavascriptPrototypesInHierarchy=_4});var _t=E(It=>{"use strict";l();Object.defineProperty(It,"__esModule",{value:!0});It.NullType=It.TypePlaceholder=It.isTyped=It.PrimitiveValue=It.TypedValue=It.CustomType=It.PrimitiveType=It.TypeCardinality=It.Type=void 0;var Tm=MS(),US=vr(),mi=class t{constructor(e,r=[],n=Pu.fixed(1)){US.guardValueIsSet("name",e),this.name=e,this.typeParameters=r,this.cardinality=n}getName(){return this.name}getClassName(){return t.ClassName}getClassHierarchy(){return Tm.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getFullyQualifiedName(){let e=this.getTypeParameters().map(r=>r.getFullyQualifiedName()).join(", ");return this.isGenericType()?`multiversx:types:${this.getName()}<${e}>`:`multiversx:types:${this.getName()}`}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}getTypeParameters(){return this.typeParameters}isGenericType(){return this.typeParameters.length>0}getFirstTypeParameter(){return US.guardTrue(this.typeParameters.length>0,"type parameters length > 0"),this.typeParameters[0]}toString(){let e=this.getTypeParameters().map(n=>n.toString()).join(", "),r=e?`<${e}>`:"";return`${this.name}${r}`}equals(e){return t.equals(this,e)}static equals(e,r){return e.getFullyQualifiedName()==r.getFullyQualifiedName()}static equalsMany(e,r){return e.every((n,i)=>n.equals(r[i]))}static isAssignableFromMany(e,r){return e.every((n,i)=>n.isAssignableFrom(r[i]))}differs(e){return!this.equals(e)}valueOf(){return this.name}isAssignableFrom(e){if(!t.equalsMany(this.getTypeParameters(),e.getTypeParameters()))return!1;let n=this.getFullyQualifiedName();return t.getFullyQualifiedNamesInHierarchy(e).includes(n)?!0:e.hasClassOrSuperclass(this.getClassName())}static getFullyQualifiedNamesInHierarchy(e){return Tm.getJavascriptPrototypesInHierarchy(e,i=>i.belongsToTypesystem).map(i=>i.getFullyQualifiedName.call(e))}getNamesOfDependencies(){let e=[];for(let r of this.typeParameters)e.push(r.getName()),e.push(...r.getNamesOfDependencies());return[...new Set(e)]}toJSON(){return{name:this.name,typeParameters:this.typeParameters.map(e=>e.toJSON())}}getCardinality(){return this.cardinality}belongsToTypesystem(){}};It.Type=mi;mi.ClassName="Type";var Pu=class t{constructor(e,r){this.lowerBound=e,this.upperBound=r}static fixed(e){return new t(e,e)}static variable(e){return new t(0,e)}isSingular(){return this.lowerBound==1&&this.upperBound==1}isSingularOrNone(){return this.lowerBound==0&&this.upperBound==1}isComposite(){return this.upperBound!=1}isFixed(){return this.lowerBound==this.upperBound}getLowerBound(){return this.lowerBound}getUpperBound(){return this.upperBound||t.MaxCardinality}};It.TypeCardinality=Pu;Pu.MaxCardinality=4096;var pf=class t extends mi{constructor(e){super(e)}getClassName(){return t.ClassName}};It.PrimitiveType=pf;pf.ClassName="PrimitiveType";var gf=class t extends mi{getClassName(){return t.ClassName}};It.CustomType=gf;gf.ClassName="CustomType";var Ru=class t{constructor(e){this.type=e}getClassName(){return t.ClassName}getClassHierarchy(){return Tm.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getType(){return this.type}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}belongsToTypesystem(){}};It.TypedValue=Ru;Ru.ClassName="TypedValue";var yf=class t extends Ru{constructor(e){super(e)}getClassName(){return t.ClassName}};It.PrimitiveValue=yf;yf.ClassName="PrimitiveValue";function S4(t){return t.belongsToTypesystem!==void 0}It.isTyped=S4;var mf=class t extends mi{constructor(){super("...")}getClassName(){return t.ClassName}};It.TypePlaceholder=mf;mf.ClassName="TypePlaceholder";var wf=class t extends mi{constructor(){super("?")}getClassName(){return t.ClassName}};It.NullType=wf;wf.ClassName="NullType"});var qS=E((To,Co)=>{l();(function(t){var e=typeof To=="object"&&To&&!To.nodeType&&To,r=typeof Co=="object"&&Co&&!Co.nodeType&&Co,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(t=n);var i,s=2147483647,o=36,a=1,u=26,c=38,f=700,h=72,g=128,y="-",m=/^xn--/,T=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=o-a,U=Math.floor,A=String.fromCharCode,_;function N(Y){throw new RangeError(B[Y])}function I(Y,se){for(var te=Y.length,ie=[];te--;)ie[te]=se(Y[te]);return ie}function S(Y,se){var te=Y.split("@"),ie="";te.length>1&&(ie=te[0]+"@",Y=te[1]),Y=Y.replace(O,".");var M=Y.split("."),le=I(M,se).join(".");return ie+le}function R(Y){for(var se=[],te=0,ie=Y.length,M,le;te<ie;)M=Y.charCodeAt(te++),M>=55296&&M<=56319&&te<ie?(le=Y.charCodeAt(te++),(le&64512)==56320?se.push(((M&1023)<<10)+(le&1023)+65536):(se.push(M),te--)):se.push(M);return se}function J(Y){return I(Y,function(se){var te="";return se>65535&&(se-=65536,te+=A(se>>>10&1023|55296),se=56320|se&1023),te+=A(se),te}).join("")}function Q(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:o}function V(Y,se){return Y+22+75*(Y<26)-((se!=0)<<5)}function k(Y,se,te){var ie=0;for(Y=te?U(Y/f):Y>>1,Y+=U(Y/se);Y>W*u>>1;ie+=o)Y=U(Y/W);return U(ie+(W+1)*Y/(Y+c))}function K(Y){var se=[],te=Y.length,ie,M=0,le=g,ae=h,he,oe,ce,w,v,b,P,C,D;for(he=Y.lastIndexOf(y),he<0&&(he=0),oe=0;oe<he;++oe)Y.charCodeAt(oe)>=128&&N("not-basic"),se.push(Y.charCodeAt(oe));for(ce=he>0?he+1:0;ce<te;){for(w=M,v=1,b=o;ce>=te&&N("invalid-input"),P=Q(Y.charCodeAt(ce++)),(P>=o||P>U((s-M)/v))&&N("overflow"),M+=P*v,C=b<=ae?a:b>=ae+u?u:b-ae,!(P<C);b+=o)D=o-C,v>U(s/D)&&N("overflow"),v*=D;ie=se.length+1,ae=k(M-w,ie,w==0),U(M/ie)>s-le&&N("overflow"),le+=U(M/ie),M%=ie,se.splice(M++,0,le)}return J(se)}function ge(Y){var se,te,ie,M,le,ae,he,oe,ce,w,v,b=[],P,C,D,L;for(Y=R(Y),P=Y.length,se=g,te=0,le=h,ae=0;ae<P;++ae)v=Y[ae],v<128&&b.push(A(v));for(ie=M=b.length,M&&b.push(y);ie<P;){for(he=s,ae=0;ae<P;++ae)v=Y[ae],v>=se&&v<he&&(he=v);for(C=ie+1,he-se>U((s-te)/C)&&N("overflow"),te+=(he-se)*C,se=he,ae=0;ae<P;++ae)if(v=Y[ae],v<se&&++te>s&&N("overflow"),v==se){for(oe=te,ce=o;w=ce<=le?a:ce>=le+u?u:ce-le,!(oe<w);ce+=o)L=oe-w,D=o-w,b.push(A(V(w+L%D,0))),oe=U(L/D);b.push(A(V(oe,0))),le=k(te,C,ie==M),te=0,++ie}++te,++se}return b.join("")}function ue(Y){return S(Y,function(se){return m.test(se)?K(se.slice(4).toLowerCase()):se})}function re(Y){return S(Y,function(se){return T.test(se)?"xn--"+ge(se):se})}if(i={version:"1.4.1",ucs2:{decode:R,encode:J},decode:K,encode:ge,toASCII:re,toUnicode:ue},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&r)if(Co.exports==e)r.exports=i;else for(_ in i)i.hasOwnProperty(_)&&(e[_]=i[_]);else t.punycode=i})(To)});var kS=E((xse,xm)=>{"use strict";l();var HS=qS();function T4(t,e){this.__proto__=new Error(e),this.__proto__.name="BackslashError",this.offset=t}function Cm(t){return t>="0"&&t<="7"}function C4(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"}function VS(t){return t=parseInt(t,16),HS.ucs2.encode([t])}function GS(t,e,r){var n=!1,i=[];function s(u){var c=t[u];if(!C4(c))throw new T4(u,"Unexpected token ILLEGAL");return c}for(;e<t.length;){var o=t[e];if(e++,n){switch(n=!1,o){case"n":i.push(`
`);continue;case"r":i.push("\r");continue;case"f":i.push("\f");continue;case"b":i.push("\b");continue;case"t":i.push("	");continue;case"v":i.push("\v");continue;case"\\":i.push("\\");continue}if(o==="x"){i.push(VS(s(e)+s(e+1))),e+=2;continue}if(o==="u"){i.push(VS(s(e)+s(e+1)+s(e+2)+s(e+3))),e+=4;continue}if(Cm(o)){var a;Cm(a=t[e])&&(e++,o+=a,Cm(a=t[e])&&o[0]<="3"&&(e++,o+=a)),i.push(HS.ucs2.encode([parseInt(o,8)]));continue}i.push(o)}else if(o==="\\")n=!0;else if(o===r){e--;break}else i.push(o)}return arguments.length===3?{end:e,value:i.join("")}:i.join("")}xm.exports=function(e){return GS(e,0)};xm.exports.parseUntil=function(e,r,n){return GS(e,r,n)}});var YS=E((Ose,KS)=>{l();var WS=kS();KS.exports={validate:x4,parse:N4};function x4(t,e){var r;if(e=e||!1,typeof t!="string")r="Input must be a string";else try{Ef(t,0,e,!1)}catch(n){r=n.message}return r}function N4(t,e){if(typeof t!="string")throw new Error("Input must be a string");e=e||!1;var r=Ef(t,0,e,!0);return r.value}function zS(t,e){for(var r=t.length,n=e,i,s=e;s<r;s++){var o=t[s];if(o===","){i=s;break}else if(o==="]"||o==="}"){i=s-1;break}else if(!Ts(o))throw Wn(t,s,"expecting end of expression or separator")}var a;return i===void 0?(i=r,a=t[i]):(a=t[i],i++),{start:n,end:i,value:a}}function O4(t,e){for(var r=t.length,n=e,i,s=e;s<r;s++){var o=t[s];if(o===":"){i=s;break}else if(!Ts(o))throw Wn(t,s,"expecting ':'")}if(i===void 0)throw Wn(t,s,"expecting ':'");return i++,{start:n,end:i}}function Ef(t,e,r,n){for(var i=t.length,s,o,a=!1,u=!1,c=!1,f=!1,h=!1,g=!1,y,m=e;m<i;m++){var T=t[m];if(s===void 0){if(!Ts(T)){if(T==="[")a=!0;else if(T==="{")u=!0;else if(T==='"')c=!0;else if(B4(t,m)){s=m,m=m+3,o=m,y=!0;break}else if(L4(t,m)){s=m,m=m+4,o=m,y=!1;break}else if(F4(t,m)){s=m,m=m+3,o=m,y=null;break}else if(jS(T))f=!0;else if(T==="-")f=!0;else throw Wn(t,m,"");s=m}}else if(a){var O=R4(t,m,r,n);o=O.end,y=O.value;break}else if(u){var B=P4(t,m,r,n);o=B.end,y=B.value;break}else if(c&&T==='"'&&$S(t,m-1)){o=m,y=WS(t.substring(s+1,o));break}else if(f)if(Ts(T))g=!0;else if(T===","||T==="]"||T==="}"){y=parseFloat(t.substring(s,o),10),o=m-1;break}else{if(jS(T)&&!g)continue;if(T==="."&&!h&&!g)h=!0;else throw Wn(t,m,"expecting number")}}if(o===void 0)if(f)y=parseFloat(t.substring(s,m),10),o=m-1;else throw Wn(t,m,"unclosed statement");return o++,{value:y,start:s,end:o}}function D4(t,e){for(var r=t.length,n,i,s=e;s<r;s++){var o=t[s];if(n===void 0){if(!Ts(o)){if(o!=='"')throw Wn(t,s,"expecting String");n=s}}else if(o==='"'&&$S(t,s-1)){i=s;break}}if(i===void 0)throw Wn(t,r,"expecting String");var a=WS(t.substring(n+1,i));if(a==="")throw Wn(t,n,"empty string");return i++,{start:n,end:i,value:a}}function P4(t,e,r,n){for(var i=e,s=",",o={},a=[],u=[],c=e;Ts(t[c]);)c++;if(t[c]==="}")return{start:e,end:c,value:o};for(;s===",";){var f=D4(t,i),h=O4(t,f.end),g=Ef(t,h.end,r,n),y=zS(t,g.end);r||a.indexOf(f.value)!==-1&&(f.value=f.value+"1"),a.push(f.value),u.push(g.value),i=y.end,s=y.value}if(n){var m=0;for(m=0;m<a.length;m++)o[a[m]]=u[m]}return{start:e,end:i,value:o}}function $S(t,e){for(var r=e,n=0;r>-1&&t[r]==="\\";)n++,r--;return n%2===0}function R4(t,e,r,n){for(var i=e,s=",",o=[],a=e;Ts(t[a]);)a++;if(t[a]==="]")return{start:e,end:a,value:o};for(;s===",";){var u=Ef(t,i,r,n),c=zS(t,u.end);n&&o.push(u.value),i=c.end,s=c.value}return{start:e,end:i,value:o}}function B4(t,e){return t.substr(e,4)==="true"}function L4(t,e){return t.substr(e,5)==="false"}function F4(t,e){return t.substr(e,4)==="null"}var M4=new RegExp(/^\s$/);function Ts(t){return M4.test(t)}var U4=new RegExp(/^\d$/);function jS(t){return U4.test(t)}function Wn(t,e,r){var n=10,i;t.length<e+n?i=t.substr(QS(t.length-n),t.length):e-n/2<0?i=t.substr(0,n):i=t.substr(QS(e-n/2),n);var s;return r?s="Syntax error: "+r+" near "+i:s="Syntax error near "+i,new Error(s)}function QS(t){return t<0?0:t}});var Bu=E(an=>{"use strict";l();var q4=an&&an.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V4=an&&an.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),H4=an&&an.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&q4(e,t,r);return V4(e,t),e};Object.defineProperty(an,"__esModule",{value:!0});an.TypeExpressionParser=void 0;var JS=H4(Be()),G4=_t(),k4=YS(),Nm=class{parse(e){let r=this.doParse(e),n=Object.keys(r);if(n.length!=1)throw new JS.ErrTypingSystem(`bad type expression: ${e}`);let i=n[0];return this.nodeToType(i,r[i])}doParse(e){let r=this.getJsonedString(e);try{return k4.parse(r)}catch{throw new JS.ErrTypingSystem(`cannot parse type expression: ${e}. internal json: ${r}.`)}}getJsonedString(e){let r="";for(var n=0;n<e.length;n++){let o=e.charAt(n),a=e.charAt(n-1),u=e.charAt(n+1);o=="<"?r+=": {":o==">"?a!=">"?r+=": {} }":r+="}":o==","?u==">"||(a==">"?r+=",":r+=": {},"):r+=o}let i=/(:|\{|\}|,|\s)/,s=r.replace(/utf\-8\sstring/ig,"utf-8-string").split(i).filter(o=>o);return r=s.map(o=>i.test(o)?o:`"${o}"`).map(o=>o.replace(/utf\-8\-string/ig,"utf-8 string")).join(""),s.length==1?`{${r}: {}}`:`{${r}}`}nodeToType(e,r){e.charAt(e.length-1)==="1"&&(e=e.slice(0,-1));let n=Object.keys(r).map(i=>this.nodeToType(i,r[i]));return new G4.Type(e,n)}};an.TypeExpressionParser=Nm});var Dm=E(wi=>{"use strict";l();Object.defineProperty(wi,"__esModule",{value:!0});wi.EndpointParameterDefinition=wi.EndpointModifiers=wi.EndpointDefinition=void 0;var j4=Bu(),XS="?",Q4="N / A",Om=class t{constructor(e,r,n,i){this.input=[],this.output=[],this.name=e,this.input=r||[],this.output=n||[],this.modifiers=i}isConstructor(){return this.name=="constructor"}static fromJSON(e){e.name=e.name==null?XS:e.name,e.onlyOwner=e.onlyOwner||!1,e.payableInTokens=e.payableInTokens||[],e.inputs=e.inputs||[],e.outputs=e.outputs||[];let r=e.inputs.map(s=>Lu.fromJSON(s)),n=e.outputs.map(s=>Lu.fromJSON(s)),i=new vf(e.mutability,e.payableInTokens,e.onlyOwner);return new t(e.name,r,n,i)}};wi.EndpointDefinition=Om;var vf=class{constructor(e,r,n){this.mutability=e||"",this.payableInTokens=r||[],this.onlyOwner=n||!1}isPayableInEGLD(){return this.isPayableInToken("EGLD")}isPayableInToken(e){return this.payableInTokens.includes(e)?!0:this.payableInTokens.includes(`!${e}`)?!1:!!this.payableInTokens.includes("*")}isPayable(){return this.payableInTokens.length!=0}isReadonly(){return this.mutability=="readonly"}isOnlyOwner(){return this.onlyOwner}};wi.EndpointModifiers=vf;var Lu=class t{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new j4.TypeExpressionParser().parse(e.type);return new t(e.name||XS,e.description||Q4,r)}};wi.EndpointParameterDefinition=Lu});var xo=E(cr=>{"use strict";l();var W4=cr&&cr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),z4=cr&&cr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$4=cr&&cr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W4(e,t,r);return z4(e,t),e};Object.defineProperty(cr,"__esModule",{value:!0});cr.Fields=cr.Field=cr.FieldDefinition=void 0;var Pm=$4(Be()),K4=Bu(),Rm=class t{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new K4.TypeExpressionParser().parse(e.type);return new t(e.name,e.description,r)}};cr.FieldDefinition=Rm;var Bm=class{constructor(e,r=""){this.value=e,this.name=r}checkTyping(e){let r=this.value.getType();if(!r.equals(e.type))throw new Pm.ErrTypingSystem(`check type of field "${e.name}; expected: ${e.type}, actual: ${r}"`);if(this.name!=e.name)throw new Pm.ErrTypingSystem(`check name of field "${e.name}"`)}equals(e){return this.name==e.name&&this.value.equals(e.value)}};cr.Field=Bm;var Lm=class{static checkTyping(e,r){if(e.length!=r.length)throw new Pm.ErrTypingSystem("fields length vs. field definitions length");for(let n=0;n<e.length;n++){let i=e[n],s=r[n];i.checkTyping(s)}}static equals(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(!i.equals(s))return!1}return!0}static getNamesOfTypeDependencies(e){let r=[];for(let n of e)r.push(n.type.getName()),r.push(...n.type.getNamesOfDependencies());return[...new Set(r)]}};cr.Fields=Lm});var Fu=E(Ei=>{"use strict";l();Object.defineProperty(Ei,"__esModule",{value:!0});Ei.EnumValue=Ei.EnumVariantDefinition=Ei.EnumType=void 0;var Y4=Be(),Fm=vr(),Af=xo(),eT=_t(),ZS=256,bf=class t extends eT.CustomType{constructor(e,r){super(e),this.variants=[],this.variants=r}getClassName(){return t.ClassName}static fromJSON(e){let r=(e.variants||[]).map(n=>If.fromJSON(n));return new t(e.name,r)}getVariantByDiscriminant(e){let r=this.variants.find(n=>n.discriminant==e);return Fm.guardValueIsSet(`variant by discriminant (${e})`,r),r}getVariantByName(e){let r=this.variants.find(n=>n.name==e);return Fm.guardValueIsSet(`variant by name (${e})`,r),r}getNamesOfDependencies(){let e=[];for(let r of this.variants)e.push(...r.getNamesOfDependencies());return[...new Set(e)]}};Ei.EnumType=bf;bf.ClassName="EnumType";var If=class t{constructor(e,r,n=[]){this.fieldsDefinitions=[],Fm.guardTrue(r<ZS,`discriminant for simple enum should be less than ${ZS}`),this.name=e,this.discriminant=r,this.fieldsDefinitions=n}static fromJSON(e){let r=(e.fields||[]).map(n=>Af.FieldDefinition.fromJSON(n));return new t(e.name,e.discriminant,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return Af.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};Ei.EnumVariantDefinition=If;var _f=class t extends eT.TypedValue{constructor(e,r,n){super(e),this.fields=[],this.name=r.name,this.discriminant=r.discriminant,this.fields=n,this.fieldsByName=new Map(n.map(s=>[s.name,s]));let i=r.getFieldsDefinitions();Af.Fields.checkTyping(this.fields,i)}getClassName(){return t.ClassName}static fromName(e,r){let n=e.getVariantByName(r);return new t(e,n,[])}static fromDiscriminant(e,r){let n=e.getVariantByDiscriminant(r);return new t(e,n,[])}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields(),i=this.name==e.name,s=this.discriminant==e.discriminant,o=Af.Fields.equals(r,n);return i&&s&&o}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new Y4.ErrMissingFieldOnEnum(e,this.getType().getName())}valueOf(){let e={name:this.name,fields:[]};return this.fields.forEach((r,n)=>e.fields[n]=r.value.valueOf()),e}};Ei.EnumValue=_f;_f.ClassName="EnumValue"});var rT=E(No=>{"use strict";l();Object.defineProperty(No,"__esModule",{value:!0});No.EventTopicDefinition=No.EventDefinition=void 0;var J4=Bu(),tT="?",Mm=class t{constructor(e,r){this.inputs=[],this.identifier=e,this.inputs=r||[]}static fromJSON(e){e.identifier=e.identifier==null?tT:e.identifier,e.inputs=e.inputs||[];let r=e.inputs.map(n=>Sf.fromJSON(n));return new t(e.identifier,r)}};No.EventDefinition=Mm;var Sf=class t{constructor(e){this.name=e.name,this.type=e.type,this.indexed=e.indexed}static fromJSON(e){let r=new J4.TypeExpressionParser().parse(e.type);return new t({name:e.name||tT,type:r,indexed:e.indexed})}};No.EventTopicDefinition=Sf});var Do=E(Oo=>{"use strict";l();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Struct=Oo.StructType=void 0;var X4=Be(),Tf=xo(),nT=_t(),Cf=class t extends nT.CustomType{constructor(e,r){super(e),this.fieldsDefinitions=[],this.fieldsDefinitions=r}getClassName(){return t.ClassName}static fromJSON(e){let r=(e.fields||[]).map(n=>Tf.FieldDefinition.fromJSON(n));return new t(e.name,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return Tf.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};Oo.StructType=Cf;Cf.ClassName="StructType";var xf=class t extends nT.TypedValue{constructor(e,r){super(e),this.fields=r,this.fieldsByName=new Map(r.map(n=>[n.name,n])),this.checkTyping()}getClassName(){return t.ClassName}checkTyping(){let r=this.getType().getFieldsDefinitions();Tf.Fields.checkTyping(this.fields,r)}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new X4.ErrMissingFieldOnStruct(e,this.getType().getName())}valueOf(){let e={};for(let r of this.fields)e[r.name]=r.value.valueOf();return e}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields();return Tf.Fields.equals(r,n)}};Oo.Struct=xf;xf.ClassName="Struct"});var qm=E((jse,oT)=>{"use strict";l();var Of="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Um={};for(Mu=0;Mu<Of.length;Mu++){if(Nf=Of.charAt(Mu),Um[Nf]!==void 0)throw new TypeError(Nf+" is ambiguous");Um[Nf]=Mu}var Nf,Mu;function Po(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function iT(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Po(e)^n>>5}for(e=Po(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Po(e)^i&31}return e}function Z4(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=iT(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=Po(n)^o,i+=Of.charAt(o)}for(s=0;s<6;++s)n=Po(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=Of.charAt(a)}return i}function sT(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=iT(s);if(typeof a=="string")return a;for(var u=[],c=0;c<o.length;++c){var f=o.charAt(c),h=Um[f];if(h===void 0)return"Unknown character "+f;a=Po(a)^h,!(c+6>=o.length)&&u.push(h)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:u}}function eq(){var t=sT.apply(null,arguments);if(typeof t=="object")return t}function tq(t){var e=sT.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Df(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],u=0;u<t.length;++u)for(i=i<<e|t[u],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function rq(t){var e=Df(t,8,5,!0);if(Array.isArray(e))return e}function nq(t){var e=Df(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function iq(t){var e=Df(t,5,8,!1);if(Array.isArray(e))return e}function sq(t){var e=Df(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}oT.exports={decodeUnsafe:eq,decode:tq,encode:Z4,toWordsUnsafe:rq,toWords:nq,fromWordsUnsafe:iq,fromWords:sq}});var ht=E(un=>{"use strict";l();var oq=un&&un.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aq=un&&un.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aT=un&&un.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oq(e,t,r);return aq(e,t),e};Object.defineProperty(un,"__esModule",{value:!0});un.Address=void 0;var Pf=aT(qm()),Ro=aT(Be()),Vm="erd",Hm=32,uq="0".repeat(16),Gm=class t{constructor(e){if(this.valueHex="",!!e){if(e instanceof t)return t.fromAddress(e);if(e instanceof d.Buffer)return t.fromBuffer(e);if(typeof e=="string")return t.fromString(e);throw new Ro.ErrAddressCannotCreate(e)}}static fromAddress(e){return t.fromValidHex(e.valueHex)}static fromValidHex(e){let r=new t;return r.valueHex=e,r}static fromBuffer(e){if(e.length!=Hm)throw new Ro.ErrAddressCannotCreate(e);return t.fromValidHex(e.toString("hex"))}static fromString(e){return t.isValidHex(e)?t.fromValidHex(e):t.fromBech32(e)}static isValidHex(e){return d.Buffer.from(e,"hex").length==Hm}static fromHex(e){if(!t.isValidHex(e))throw new Ro.ErrAddressCannotCreate(e);return t.fromValidHex(e)}static empty(){return new t}static fromBech32(e){let r;try{r=Pf.decode(e)}catch(s){throw new Ro.ErrAddressCannotCreate(e,s)}let n=r.prefix;if(n!=Vm)throw new Ro.ErrAddressBadHrp(Vm,n);let i=d.Buffer.from(Pf.fromWords(r.words));if(i.length!=Hm)throw new Ro.ErrAddressCannotCreate(e);return t.fromValidHex(i.toString("hex"))}hex(){return this.isEmpty()?"":this.valueHex}bech32(){if(this.isEmpty())return"";let e=Pf.toWords(this.pubkey());return Pf.encode(Vm,e)}pubkey(){return this.isEmpty()?d.Buffer.from([]):d.Buffer.from(this.valueHex,"hex")}isEmpty(){return!this.valueHex}equals(e){return e?this.valueHex==e.valueHex:!1}toString(){return this.bech32()}toJSON(){return{bech32:this.bech32(),pubkey:this.hex()}}static Zero(){return new t("0".repeat(64))}isContractAddress(){return this.hex().startsWith(uq)}};un.Address=Gm});var Lo=E(Bo=>{"use strict";l();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.AddressValue=Bo.AddressType=void 0;var cq=ht(),uT=_t(),Uu=class t extends uT.PrimitiveType{constructor(){super("Address")}getClassName(){return t.ClassName}};Bo.AddressType=Uu;Uu.ClassName="AddressType";var Rf=class t extends uT.PrimitiveValue{constructor(e){super(new Uu),this.value=new cq.Address(e.bech32())}getClassName(){return t.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};Bo.AddressValue=Rf;Rf.ClassName="AddressValue"});var Lf=E(Fo=>{"use strict";l();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.OptionalValue=Fo.OptionalType=void 0;var lq=vr(),qu=_t(),Vu=class t extends qu.Type{constructor(e){super("Optional",[e],qu.TypeCardinality.variable(1))}getClassName(){return t.ClassName}isAssignableFrom(e){if(!e.hasExactClass(t.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(qu.NullType.ClassName);return r||n}};Fo.OptionalType=Vu;Vu.ClassName="OptionalType";var Bf=class t extends qu.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return t.ClassName}static newMissing(){let e=new Vu(new qu.NullType);return new t(e)}isSet(){return!!this.value}getTypedValue(){return lq.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){var r;return((r=this.value)===null||r===void 0?void 0:r.equals(e.value))||!1}};Fo.OptionalValue=Bf;Bf.ClassName="OptionalValue"});var Gu=E(Mo=>{"use strict";l();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.BooleanValue=Mo.BooleanType=void 0;var cT=_t(),Hu=class t extends cT.PrimitiveType{constructor(){super("bool")}getClassName(){return t.ClassName}};Mo.BooleanType=Hu;Hu.ClassName="BooleanType";var Ff=class t extends cT.PrimitiveValue{constructor(e){super(new Hu),this.value=e}getClassName(){return t.ClassName}equals(e){return this.value===e.value}isTrue(){return this.value===!0}isFalse(){return!this.isTrue()}valueOf(){return this.value}};Mo.BooleanValue=Ff;Ff.ClassName="BooleanValue"});var vi=E(Uo=>{"use strict";l();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.BytesValue=Uo.BytesType=void 0;var lT=_t(),ku=class t extends lT.PrimitiveType{constructor(){super("bytes")}getClassName(){return t.ClassName}};Uo.BytesType=ku;ku.ClassName="BytesType";var Mf=class t extends lT.PrimitiveValue{constructor(e){super(new ku),this.value=e}getClassName(){return t.ClassName}static fromUTF8(e){let r=d.Buffer.from(e,"utf-8");return new t(r)}static fromHex(e){let r=d.Buffer.from(e,"hex");return new t(r)}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value.equals(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};Uo.BytesValue=Mf;Mf.ClassName="BytesValue"});var hT=E(qo=>{"use strict";l();Object.defineProperty(qo,"__esModule",{value:!0});qo.CodeMetadataValue=qo.CodeMetadataType=void 0;var fT=_t(),Uf=class extends fT.PrimitiveType{constructor(){super("CodeMetadata")}};qo.CodeMetadataType=Uf;var km=class extends fT.PrimitiveValue{constructor(e){super(new Uf),this.value=e}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};qo.CodeMetadataValue=km});var Vf=E(Vo=>{"use strict";l();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.CompositeValue=Vo.CompositeType=void 0;var fq=vr(),jm=_t(),ju=class t extends jm.Type{constructor(...e){super("Composite",e,jm.TypeCardinality.variable(e.length))}getClassName(){return t.ClassName}};Vo.CompositeType=ju;ju.ClassName="CompositeType";var qf=class t extends jm.TypedValue{constructor(e,r){super(e),fq.guardLength(r,e.getTypeParameters().length),this.items=r}getClassName(){return t.ClassName}static fromItems(...e){let r=e.map(i=>i.getType()),n=new ju(...r);return new t(n,e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e?.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Vo.CompositeValue=qf;qf.ClassName="CompositeValue"});var Wm=E(Hf=>{"use strict";l();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.CollectionOfTypedValues=void 0;var Qm=class{constructor(e){this.items=e}getLength(){return this.items.length}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getLength()!=e.getLength())return!1;for(let r=0;r<this.getLength();r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Hf.CollectionOfTypedValues=Qm});var Wu=E(cn=>{"use strict";l();Object.defineProperty(cn,"__esModule",{value:!0});cn.List=cn.OptionValue=cn.ListType=cn.OptionType=void 0;var hq=vr(),dq=Wm(),xs=_t(),Cs=class t extends xs.Type{constructor(e){super("Option",[e])}getClassName(){return t.ClassName}isAssignableFrom(e){if(!e.hasExactClass(t.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(xs.NullType.ClassName);return r||n}};cn.OptionType=Cs;Cs.ClassName="OptionType";var Qu=class t extends xs.Type{constructor(e){super("List",[e])}getClassName(){return t.ClassName}};cn.ListType=Qu;Qu.ClassName="ListType";var Gf=class t extends xs.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return t.ClassName}static newMissing(){let e=new Cs(new xs.NullType);return new t(e)}static newMissingTyped(e){return new t(new Cs(e))}static newProvided(e){let r=new Cs(e.getType());return new t(r,e)}isSet(){return!!this.value}getTypedValue(){return hq.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){var r;return((r=this.value)===null||r===void 0?void 0:r.equals(e.value))||!1}};cn.OptionValue=Gf;Gf.ClassName="OptionValue";var kf=class t extends xs.TypedValue{constructor(e,r){super(e),this.backingCollection=new dq.CollectionOfTypedValues(r)}getClassName(){return t.ClassName}static fromItems(e){if(e.length==0)return new t(new xs.TypePlaceholder,[]);let r=e[0].getType(),n=new Qu(r);return new t(n,e)}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};cn.List=kf;kf.ClassName="List"});var Wf=E(Ho=>{"use strict";l();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ArrayVec=Ho.ArrayVecType=void 0;var dT=vr(),pq=Wm(),pT=_t(),jf=class t extends pT.Type{constructor(e,r){super("Array",[r]),dT.guardTrue(e>0,"array length > 0"),this.length=e}getClassName(){return t.ClassName}};Ho.ArrayVecType=jf;jf.ClassName="ArrayVecType";var Qf=class t extends pT.TypedValue{constructor(e,r){super(e),dT.guardLength(r,e.length),this.backingCollection=new pq.CollectionOfTypedValues(r)}getClassName(){return t.ClassName}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};Ho.ArrayVec=Qf;Qf.ClassName="ArrayVec"});var $u=E(Go=>{"use strict";l();Object.defineProperty(Go,"__esModule",{value:!0});Go.H256Value=Go.H256Type=void 0;var gT=_t(),zu=class t extends gT.PrimitiveType{constructor(){super("H256")}getClassName(){return t.ClassName}};Go.H256Type=zu;zu.ClassName="H256Type";var zf=class t extends gT.PrimitiveValue{constructor(e){super(new zu),this.value=e}getClassName(){return t.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};Go.H256Value=zf;zf.ClassName="H256Value"});var Kf=E(ko=>{"use strict";l();Object.defineProperty(ko,"__esModule",{value:!0});ko.NothingValue=ko.NothingType=void 0;var yT=_t(),Ku=class t extends yT.PrimitiveType{constructor(){super("nothing")}getClassName(){return t.ClassName}};ko.NothingType=Ku;Ku.ClassName="NothingType";var $f=class t extends yT.PrimitiveValue{constructor(){super(new Ku)}getClassName(){return t.ClassName}equals(e){return!1}valueOf(){return{}}};ko.NothingValue=$f;$f.ClassName="NothingValue"});var oc=E(_e=>{"use strict";l();var gq=_e&&_e.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yq=_e&&_e.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mq=_e&&_e.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gq(e,t,r);return yq(e,t),e},wq=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_e,"__esModule",{value:!0});_e.BigIntValue=_e.BigUIntValue=_e.I64Value=_e.U64Value=_e.I32Value=_e.U32Value=_e.I16Value=_e.U16Value=_e.I8Value=_e.U8Value=_e.NumericalValue=_e.BigIntType=_e.BigUIntType=_e.I64Type=_e.U64Type=_e.I32Type=_e.U32Type=_e.I16Type=_e.U16Type=_e.I8Type=_e.U8Type=_e.NumericalType=void 0;var mT=mq(Be()),wT=_t(),Ns=wq(kt()),lr=class t extends wT.PrimitiveType{constructor(e,r,n){super(e),this.sizeInBytes=r,this.withSign=n}getClassName(){return t.ClassName}hasFixedSize(){return!!this.sizeInBytes}hasArbitrarySize(){return!this.hasFixedSize()}};_e.NumericalType=lr;lr.ClassName="NumericalType";var Yu=class t extends lr{constructor(){super("u8",1,!1)}getClassName(){return t.ClassName}};_e.U8Type=Yu;Yu.ClassName="U8Type";var Ju=class t extends lr{constructor(){super("i8",1,!0)}getClassName(){return t.ClassName}};_e.I8Type=Ju;Ju.ClassName="I8Type";var Xu=class t extends lr{constructor(){super("u16",2,!1)}getClassName(){return t.ClassName}};_e.U16Type=Xu;Xu.ClassName="U16Type";var Zu=class t extends lr{constructor(){super("i16",2,!0)}getClassName(){return t.ClassName}};_e.I16Type=Zu;Zu.ClassName="I16Type";var ec=class t extends lr{constructor(){super("u32",4,!1)}getClassName(){return t.ClassName}};_e.U32Type=ec;ec.ClassName="U32Type";var tc=class t extends lr{constructor(){super("i32",4,!0)}getClassName(){return t.ClassName}};_e.I32Type=tc;tc.ClassName="I32Type";var rc=class t extends lr{constructor(){super("u64",8,!1)}getClassName(){return t.ClassName}};_e.U64Type=rc;rc.ClassName="U64Type";var nc=class t extends lr{constructor(){super("i64",8,!0)}getClassName(){return t.ClassName}};_e.I64Type=nc;nc.ClassName="I64Type";var ic=class t extends lr{constructor(){super("BigUint",0,!1)}getClassName(){return t.ClassName}};_e.BigUIntType=ic;ic.ClassName="BigUIntType";var sc=class t extends lr{constructor(){super("Bigint",0,!0)}getClassName(){return t.ClassName}};_e.BigIntType=sc;sc.ClassName="BigIntType";var fr=class t extends wT.PrimitiveValue{constructor(e,r){if(super(e),this.value=new Ns.default(r),this.sizeInBytes=e.sizeInBytes,this.withSign=e.withSign,this.value.isNaN())throw new mT.ErrInvalidArgument(`not a number: ${r}`);if(!this.withSign&&this.value.isNegative())throw new mT.ErrInvalidArgument(`negative, but type is unsigned: ${r}`)}getClassName(){return t.ClassName}equals(e){return this.value.isEqualTo(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};_e.NumericalValue=fr;fr.ClassName="NumericalValue";var Yf=class t extends fr{constructor(e){super(new Yu,new Ns.default(e))}getClassName(){return t.ClassName}};_e.U8Value=Yf;Yf.ClassName="U8Value";var Jf=class t extends fr{constructor(e){super(new Ju,new Ns.default(e))}getClassName(){return t.ClassName}};_e.I8Value=Jf;Jf.ClassName="I8Value";var Xf=class t extends fr{constructor(e){super(new Xu,new Ns.default(e))}getClassName(){return t.ClassName}};_e.U16Value=Xf;Xf.ClassName="U16Value";var Zf=class t extends fr{constructor(e){super(new Zu,new Ns.default(e))}getClassName(){return t.ClassName}};_e.I16Value=Zf;Zf.ClassName="I16Value";var eh=class t extends fr{constructor(e){super(new ec,new Ns.default(e))}getClassName(){return t.ClassName}};_e.U32Value=eh;eh.ClassName="U32Value";var th=class t extends fr{constructor(e){super(new tc,new Ns.default(e))}getClassName(){return t.ClassName}};_e.I32Value=th;th.ClassName="I32Value";var rh=class t extends fr{constructor(e){super(new rc,e)}getClassName(){return t.ClassName}};_e.U64Value=rh;rh.ClassName="U64Value";var nh=class t extends fr{constructor(e){super(new nc,e)}getClassName(){return t.ClassName}};_e.I64Value=nh;nh.ClassName="I64Value";var ih=class t extends fr{constructor(e){super(new ic,e)}getClassName(){return t.ClassName}};_e.BigUIntValue=ih;ih.ClassName="BigUIntValue";var sh=class t extends fr{constructor(e){super(new sc,e)}getClassName(){return t.ClassName}};_e.BigIntValue=sh;sh.ClassName="BigIntValue"});var ah=E(jo=>{"use strict";l();Object.defineProperty(jo,"__esModule",{value:!0});jo.StringValue=jo.StringType=void 0;var ET=_t(),ac=class t extends ET.PrimitiveType{constructor(){super("utf-8 string")}getClassName(){return t.ClassName}};jo.StringType=ac;ac.ClassName="StringType";var oh=class t extends ET.PrimitiveValue{constructor(e){super(new ac),this.value=e}getClassName(){return t.ClassName}static fromUTF8(e){return new t(e)}static fromHex(e){let r=d.Buffer.from(e,"hex").toString();return new t(r)}getLength(){return this.value.length}equals(e){return this.value===e.value}valueOf(){return this.value}};jo.StringValue=oh;oh.ClassName="StringValue"});var Wo=E(Qo=>{"use strict";l();Object.defineProperty(Qo,"__esModule",{value:!0});Qo.TokenIdentifierValue=Qo.TokenIdentifierType=void 0;var vT=_t(),Eq="EGLD",uc=class t extends vT.PrimitiveType{constructor(){super("TokenIdentifier")}getClassName(){return t.ClassName}};Qo.TokenIdentifierType=uc;uc.ClassName="TokenIdentifierType";var uh=class t extends vT.PrimitiveValue{constructor(e){super(new uc),this.value=e}static egld(){return new t(Eq)}static esdtTokenIdentifier(e){return new t(e)}getClassName(){return t.ClassName}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value==e.value}valueOf(){return this.value}toString(){return this.value.toString()}};Qo.TokenIdentifierValue=uh;uh.ClassName="TokenIdentifierValue"});var lh=E(Cr=>{"use strict";l();var vq=Cr&&Cr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Aq=Cr&&Cr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bq=Cr&&Cr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vq(e,t,r);return Aq(e,t),e};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Tuple=Cr.TupleType=void 0;var Iq=bq(Be()),AT=xo(),bT=Do(),cc=class t extends bT.StructType{constructor(...e){super(t.prepareName(e),t.prepareFieldDefinitions(e))}getClassName(){return t.ClassName}static prepareName(e){return`tuple<${e.map(i=>i.toString()).join(", ")}>`}static prepareFieldDefinitions(e){return e.map((n,i)=>new AT.FieldDefinition(IT(i),"anonymous tuple field",n))}};Cr.TupleType=cc;cc.ClassName="TupleType";function IT(t){return`field${t}`}var ch=class t extends bT.Struct{constructor(e,r){super(e,r)}getClassName(){return t.ClassName}static fromItems(e){if(e.length<1)throw new Iq.ErrTypingSystem("bad tuple items");let r=e.map(s=>s.getType()),n=new cc(...r),i=e.map((s,o)=>new AT.Field(s,IT(o)));return new t(n,i)}};Cr.Tuple=ch;ch.ClassName="Tuple"});var dh=E(Ai=>{"use strict";l();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.VariadicValue=Ai.CountedVariadicType=Ai.VariadicType=void 0;var zo=_t(),Os=class t extends zo.Type{constructor(e,r=!1){super("Variadic",[e],zo.TypeCardinality.variable()),this.isCounted=r}getClassName(){return t.ClassName}};Ai.VariadicType=Os;Os.ClassName="VariadicType";var fh=class extends zo.Type{constructor(e){super("Variadic",[e],zo.TypeCardinality.variable())}getClassName(){return Os.ClassName}};Ai.CountedVariadicType=fh;fh.ClassName="VariadicType";var hh=class t extends zo.TypedValue{constructor(e,r){super(e),this.items=r}getClassName(){return t.ClassName}static fromItems(...e){return this.createFromItems(e,!1)}static fromItemsCounted(...e){return this.createFromItems(e,!0)}static createFromItems(e,r){if(e.length==0)return new t(new Os(new zo.TypePlaceholder,r),[]);let n=e[0].getType();return new t(new Os(n,r),e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Ai.VariadicValue=hh;hh.ClassName="VariadicValue"});var Ym=E(fn=>{"use strict";l();var _q=fn&&fn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sq=fn&&fn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tq=fn&&fn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_q(e,t,r);return Sq(e,t),e};Object.defineProperty(fn,"__esModule",{value:!0});fn.TypeMapper=void 0;var _T=Tq(Be()),Cq=Lo(),zm=Lf(),xq=Gu(),Nq=vi(),Oq=hT(),ph=Vf(),$m=Fu(),Dq=xo(),ST=Wu(),ln=Wf(),Pq=$u(),TT=Kf(),xr=oc(),Rq=ah(),CT=Do(),xT=Wo(),bi=lh(),gh=dh(),Km=class{constructor(e=[]){this.openTypesFactories=new Map([["Option",(...r)=>new ST.OptionType(r[0])],["List",(...r)=>new ST.ListType(r[0])],["VarArgs",(...r)=>new gh.VariadicType(r[0])],["MultiResultVec",(...r)=>new gh.VariadicType(r[0])],["variadic",(...r)=>new gh.VariadicType(r[0])],["counted-variadic",(...r)=>new gh.VariadicType(r[0],!0)],["OptionalArg",(...r)=>new zm.OptionalType(r[0])],["optional",(...r)=>new zm.OptionalType(r[0])],["OptionalResult",(...r)=>new zm.OptionalType(r[0])],["multi",(...r)=>new ph.CompositeType(...r)],["MultiArg",(...r)=>new ph.CompositeType(...r)],["MultiResult",(...r)=>new ph.CompositeType(...r)],["multi",(...r)=>new ph.CompositeType(...r)],["tuple",(...r)=>new bi.TupleType(...r)],["tuple2",(...r)=>new bi.TupleType(...r)],["tuple3",(...r)=>new bi.TupleType(...r)],["tuple4",(...r)=>new bi.TupleType(...r)],["tuple5",(...r)=>new bi.TupleType(...r)],["tuple6",(...r)=>new bi.TupleType(...r)],["tuple7",(...r)=>new bi.TupleType(...r)],["tuple8",(...r)=>new bi.TupleType(...r)],["array2",(...r)=>new ln.ArrayVecType(2,r[0])],["array8",(...r)=>new ln.ArrayVecType(8,r[0])],["array16",(...r)=>new ln.ArrayVecType(16,r[0])],["array20",(...r)=>new ln.ArrayVecType(20,r[0])],["array32",(...r)=>new ln.ArrayVecType(32,r[0])],["array46",(...r)=>new ln.ArrayVecType(46,r[0])],["array48",(...r)=>new ln.ArrayVecType(48,r[0])],["array64",(...r)=>new ln.ArrayVecType(64,r[0])],["array128",(...r)=>new ln.ArrayVecType(128,r[0])],["array256",(...r)=>new ln.ArrayVecType(256,r[0])]]),this.closedTypesMap=new Map([["u8",new xr.U8Type],["u16",new xr.U16Type],["u32",new xr.U32Type],["u64",new xr.U64Type],["U64",new xr.U64Type],["BigUint",new xr.BigUIntType],["i8",new xr.I8Type],["i16",new xr.I16Type],["i32",new xr.I32Type],["i64",new xr.I64Type],["Bigint",new xr.BigIntType],["BigInt",new xr.BigIntType],["bool",new xq.BooleanType],["bytes",new Nq.BytesType],["Address",new Cq.AddressType],["H256",new Pq.H256Type],["utf-8 string",new Rq.StringType],["TokenIdentifier",new xT.TokenIdentifierType],["EgldOrEsdtTokenIdentifier",new xT.TokenIdentifierType],["CodeMetadata",new Oq.CodeMetadataType],["nothing",new TT.NothingType],["AsyncCall",new TT.NothingType]]),this.learnedTypesMap=new Map;for(let r of e)this.learnedTypesMap.set(r.getName(),r)}mapType(e){let r=this.mapTypeRecursively(e);if(r)return r.isGenericType()||this.learnType(r),r;throw new _T.ErrTypingSystem(`Cannot map the type "${e.getName()}" to a known type`)}mapTypeRecursively(e){let r=e.isGenericType(),n=this.learnedTypesMap.get(e.getName());if(n)return n;let i=this.closedTypesMap.get(e.getName());return i||(e.hasExactClass($m.EnumType.ClassName)?this.mapEnumType(e):e.hasExactClass(CT.StructType.ClassName)?this.mapStructType(e):r?this.mapGenericType(e):null)}learnType(e){this.learnedTypesMap.delete(e.getName()),this.learnedTypesMap.set(e.getName(),e)}mapStructType(e){let r=this.mappedFields(e.getFieldsDefinitions());return new CT.StructType(e.getName(),r)}mapEnumType(e){let r=e.variants.map(i=>new $m.EnumVariantDefinition(i.name,i.discriminant,this.mappedFields(i.getFieldsDefinitions())));return new $m.EnumType(e.getName(),r)}mappedFields(e){return e.map(r=>new Dq.FieldDefinition(r.name,r.description,this.mapType(r.type)))}mapGenericType(e){let n=e.getTypeParameters().map(s=>this.mapType(s)),i=this.openTypesFactories.get(e.getName());if(!i)throw new _T.ErrTypingSystem(`Cannot map the generic type "${e.getName()}" to a known type`);return i(...n)}};fn.TypeMapper=Km});var RT=E(hn=>{"use strict";l();var Bq=hn&&hn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lq=hn&&hn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fq=hn&&hn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bq(e,t,r);return Lq(e,t),e};Object.defineProperty(hn,"__esModule",{value:!0});hn.AbiRegistry=void 0;var NT=Fq(Be()),lc=vr(),fc=Dm(),OT=Fu(),Jm=rT(),DT=Do(),Mq=Ym(),Uq="?",Xm=class t{constructor(e){this.endpoints=[],this.customTypes=[],this.events=[],this.name=e.name,this.constructorDefinition=e.constructorDefinition,this.endpoints=e.endpoints,this.customTypes=e.customTypes,this.events=e.events||[]}static create(e){let r=e.name||Uq,n=e.constructor||{},i=e.endpoints||[],s=e.types||{},o=e.events||[],a=fc.EndpointDefinition.fromJSON(Object.assign({name:"constructor"},n)),u=i.map(y=>fc.EndpointDefinition.fromJSON(y)),c=[];for(let y in s){let m=s[y];if(m.type=="struct")c.push(DT.StructType.fromJSON({name:y,fields:m.fields}));else if(m.type=="enum")c.push(OT.EnumType.fromJSON({name:y,variants:m.variants}));else throw new NT.ErrTypingSystem(`Cannot handle custom type: ${y}`)}let f=o.map(y=>Jm.EventDefinition.fromJSON(y));return new t({name:r,constructorDefinition:a,endpoints:u,customTypes:c,events:f}).remapToKnownTypes()}getCustomType(e){let r=this.customTypes.find(n=>n.getName()==e);return lc.guardValueIsSetWithMessage(`custom type [${e}] not found`,r),r}getStruct(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass(DT.StructType.ClassName));return lc.guardValueIsSetWithMessage(`struct [${e}] not found`,r),r}getStructs(e){return e.map(r=>this.getStruct(r))}getEnum(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass(OT.EnumType.ClassName));return lc.guardValueIsSetWithMessage(`enum [${e}] not found`,r),r}getEnums(e){return e.map(r=>this.getEnum(r))}getEndpoints(){return this.endpoints}getEndpoint(e){let r=this.endpoints.find(n=>n.name==e);return lc.guardValueIsSetWithMessage(`endpoint [${e}] not found`,r),r}getEvent(e){let r=this.events.find(n=>n.identifier==e);return lc.guardValueIsSetWithMessage(`event [${e}] not found`,r),r}remapToKnownTypes(){let e=new Mq.TypeMapper([]),r=[];for(let a of this.customTypes)this.mapCustomTypeDepthFirst(a,this.customTypes,e,r);if(this.customTypes.length!=r.length)throw new NT.ErrTypingSystem("Did not re-map all custom types");let n=PT(this.constructorDefinition,e),i=[];for(let a of this.endpoints)i.push(PT(a,e));let s=this.events.map(a=>qq(a,e));return new t({name:this.name,constructorDefinition:n,endpoints:i,customTypes:r,events:s})}mapCustomTypeDepthFirst(e,r,n,i){if(i.findIndex(a=>a.getName()==e.getName())>=0)return;for(let a of e.getNamesOfDependencies()){let u=r.find(c=>c.getName()==a);u&&this.mapCustomTypeDepthFirst(u,r,n,i)}let o=n.mapType(e);i.push(o)}};hn.AbiRegistry=Xm;function PT(t,e){let r=t.input.map(i=>new fc.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type))),n=t.output.map(i=>new fc.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type)));return new fc.EndpointDefinition(t.name,r,n,t.modifiers)}function qq(t,e){let r=t.inputs.map(n=>new Jm.EventTopicDefinition({name:n.name,type:e.mapType(n.type),indexed:n.indexed}));return new Jm.EventDefinition(t.identifier,r)}});var LT=E($o=>{"use strict";l();Object.defineProperty($o,"__esModule",{value:!0});$o.createListOfTokenIdentifiers=$o.createListOfAddresses=void 0;var Vq=Lo(),BT=Wu(),Hq=Wo();function Gq(t){let e=t.map(n=>new Vq.AddressValue(n));return BT.List.fromItems(e)}$o.createListOfAddresses=Gq;function kq(t){let e=t.map(n=>new Hq.TokenIdentifierValue(n));return BT.List.fromItems(e)}$o.createListOfTokenIdentifiers=kq});var KT=E(Kt=>{"use strict";l();var jq=Kt&&Kt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qq=Kt&&Kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Wq=Kt&&Kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jq(e,t,r);return Qq(e,t),e};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.onPrimitiveTypeSelect=Kt.onPrimitiveValueSelect=Kt.onTypedValueSelect=Kt.onTypeSelect=void 0;var mh=Wq(Be()),FT=Lo(),MT=Gu(),UT=vi(),qT=Fu(),yh=Wu(),VT=$u(),HT=oc(),GT=Kf(),kT=Do(),jT=Wo(),QT=lh(),WT=_t(),zT=Wf(),$T=ah();function zq(t,e){if(t.hasExactClass(yh.OptionType.ClassName))return e.onOption();if(t.hasExactClass(yh.ListType.ClassName))return e.onList();if(t.hasExactClass(zT.ArrayVecType.ClassName))return e.onArray();if(t.hasClassOrSuperclass(WT.PrimitiveType.ClassName))return e.onPrimitive();if(t.hasExactClass(kT.StructType.ClassName))return e.onStruct();if(t.hasExactClass(QT.TupleType.ClassName))return e.onTuple();if(t.hasExactClass(qT.EnumType.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new mh.ErrTypingSystem(`type isn't known: ${t}`)}Kt.onTypeSelect=zq;function $q(t,e){if(t.hasClassOrSuperclass(WT.PrimitiveValue.ClassName))return e.onPrimitive();if(t.hasExactClass(yh.OptionValue.ClassName))return e.onOption();if(t.hasExactClass(yh.List.ClassName))return e.onList();if(t.hasExactClass(zT.ArrayVec.ClassName))return e.onArray();if(t.hasExactClass(kT.Struct.ClassName))return e.onStruct();if(t.hasExactClass(QT.Tuple.ClassName))return e.onTuple();if(t.hasExactClass(qT.EnumValue.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new mh.ErrTypingSystem(`value isn't typed: ${t}`)}Kt.onTypedValueSelect=$q;function Kq(t,e){if(t.hasExactClass(MT.BooleanValue.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(HT.NumericalValue.ClassName))return e.onNumerical();if(t.hasExactClass(FT.AddressValue.ClassName))return e.onAddress();if(t.hasExactClass(UT.BytesValue.ClassName))return e.onBytes();if(t.hasExactClass($T.StringValue.ClassName))return e.onString();if(t.hasExactClass(VT.H256Value.ClassName))return e.onH256();if(t.hasExactClass(jT.TokenIdentifierValue.ClassName))return e.onTypeIdentifier();if(t.hasExactClass(GT.NothingValue.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new mh.ErrTypingSystem(`value isn't a primitive: ${t.getType()}`)}Kt.onPrimitiveValueSelect=Kq;function Yq(t,e){if(t.hasExactClass(MT.BooleanType.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(HT.NumericalType.ClassName))return e.onNumerical();if(t.hasExactClass(FT.AddressType.ClassName))return e.onAddress();if(t.hasExactClass(UT.BytesType.ClassName))return e.onBytes();if(t.hasExactClass($T.StringType.ClassName))return e.onString();if(t.hasExactClass(VT.H256Type.ClassName))return e.onH256();if(t.hasExactClass(jT.TokenIdentifierType.ClassName))return e.onTokenIndetifier();if(t.hasExactClass(GT.NothingType.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new mh.ErrTypingSystem(`type isn't a known primitive: ${t}`)}Kt.onPrimitiveTypeSelect=Yq});var St=E(qe=>{"use strict";l();var Jq=qe&&qe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),it=qe&&qe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jq(e,t,r)};Object.defineProperty(qe,"__esModule",{value:!0});it(RT(),qe);it(Lo(),qe);it(Lf(),qe);it(Gu(),qe);it(vi(),qe);it(Vf(),qe);it(Dm(),qe);it(Fu(),qe);it(LT(),qe);it(xo(),qe);it(Wu(),qe);it(Wf(),qe);it($u(),qe);it(KT(),qe);it(Kf(),qe);it(oc(),qe);it(ah(),qe);it(Do(),qe);it(Wo(),qe);it(lh(),qe);it(Bu(),qe);it(Ym(),qe);it(_t(),qe);it(dh(),qe)});var JT=E(dn=>{"use strict";l();var Xq=dn&&dn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zq=dn&&dn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eV=dn&&dn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xq(e,t,r);return Zq(e,t),e};Object.defineProperty(dn,"__esModule",{value:!0});dn.OptionValueBinaryCodec=void 0;var YT=eV(Be()),wh=St(),Zm=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){if(e[0]==0)return[wh.OptionValue.newMissingTyped(r),1];if(e[0]!=1)throw new YT.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return[wh.OptionValue.newProvided(n),i+1]}decodeTopLevel(e,r){if(e.length==0)return new wh.OptionValue(r);if(e[0]!=1)throw new YT.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return new wh.OptionValue(r,n)}encodeNested(e){return e.isSet()?d.Buffer.concat([d.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):d.Buffer.from([0])}encodeTopLevel(e){return e.isSet()?d.Buffer.concat([d.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):d.Buffer.from([])}};dn.OptionValueBinaryCodec=Zm});var XT=E(Eh=>{"use strict";l();Object.defineProperty(Eh,"__esModule",{value:!0});Eh.AddressBinaryCodec=void 0;var tV=ht(),rV=St(),ew=class{decodeNested(e){let r=e.slice(0,32),n=new tV.Address(r);return[new rV.AddressValue(n),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf().pubkey()}encodeTopLevel(e){return e.valueOf().pubkey()}};Eh.AddressBinaryCodec=ew});var eC=E(pn=>{"use strict";l();var nV=pn&&pn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iV=pn&&pn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sV=pn&&pn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nV(e,t,r);return iV(e,t),e};Object.defineProperty(pn,"__esModule",{value:!0});pn.BooleanBinaryCodec=void 0;var oV=sV(Be()),ZT=St(),hc=class t{decodeNested(e){let r=e.readUInt8(0);return[new ZT.BooleanValue(r==t.TRUE),1]}decodeTopLevel(e){if(e.length>1)throw new oV.ErrInvalidArgument("buffer should be of size <= 1");let r=e[0];return new ZT.BooleanValue(r==t.TRUE)}encodeNested(e){return e.isTrue()?d.Buffer.from([t.TRUE]):d.Buffer.from([t.FALSE])}encodeTopLevel(e){return e.isTrue()?d.Buffer.from([t.TRUE]):d.Buffer.from([])}};pn.BooleanBinaryCodec=hc;hc.TRUE=1;hc.FALSE=0});var Ah=E(vh=>{"use strict";l();Object.defineProperty(vh,"__esModule",{value:!0});vh.SizeOfU32=void 0;vh.SizeOfU32=4});var bh=E(gn=>{"use strict";l();var aV=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gn,"__esModule",{value:!0});gn.zeroPadStringIfOddLength=gn.isPaddedHex=gn.numberToPaddedHex=void 0;var uV=aV(kt());function cV(t){let e=new uV.default(t).toString(16);return tC(e)}gn.numberToPaddedHex=cV;function lV(t){t=t||"";let e=d.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}gn.isPaddedHex=lV;function tC(t){return t=t||"",t.length%2==1?"0"+t:t}gn.zeroPadStringIfOddLength=tC});var dc=E(Tt=>{"use strict";l();var fV=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.prependByteToBuffer=Tt.flipBufferBitsInPlace=Tt.getHexMagnitudeOfBigInt=Tt.bigIntToBuffer=Tt.bufferToBigInt=Tt.cloneBuffer=Tt.isMsbZero=Tt.isMsbOne=void 0;var tw=fV(kt()),hV=bh();function rC(t,e=0){return t[e]>>7==1}Tt.isMsbOne=rC;function dV(t,e=0){return!rC(t,e)}Tt.isMsbZero=dV;function pV(t){let e=d.Buffer.alloc(t.length);return t.copy(e),e}Tt.cloneBuffer=pV;function gV(t){let e=t.toString("hex");return new tw.default(`0x${e}`,16)}Tt.bufferToBigInt=gV;function yV(t){let e=nC(t);return d.Buffer.from(e,"hex")}Tt.bigIntToBuffer=yV;function nC(t){return t=new tw.default(t),t?(t.isNegative()&&(t=t.multipliedBy(new tw.default(-1))),hV.numberToPaddedHex(t)):""}Tt.getHexMagnitudeOfBigInt=nC;function mV(t){for(let e=0;e<t.length;e++)t[e]=~t[e]}Tt.flipBufferBitsInPlace=mV;function wV(t,e){return d.Buffer.concat([d.Buffer.from([e]),t])}Tt.prependByteToBuffer=wV});var sC=E(Ko=>{"use strict";l();var EV=Ko&&Ko.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.NumericalBinaryCodec=void 0;var pc=EV(kt()),rw=St(),iC=Ah(),wt=dc(),nw=class{decodeNested(e,r){let n=0,i=r.sizeInBytes;i||(n=iC.SizeOfU32,i=e.readUInt32BE(0));let s=e.slice(n,n+i),o=this.decodeTopLevel(s,r),a=i+n;return[o,a]}decodeTopLevel(e,r){let n=wt.cloneBuffer(e);if(e.length==0)return new rw.NumericalValue(r,new pc.default(0));if(!r.withSign||wt.isMsbZero(n)){let c=wt.bufferToBigInt(n);return new rw.NumericalValue(r,c)}wt.flipBufferBitsInPlace(n);let u=wt.bufferToBigInt(n).multipliedBy(new pc.default(-1)).minus(new pc.default(1));return new rw.NumericalValue(r,u)}encodeNested(e){if(e.sizeInBytes)return this.encodeNestedFixedSize(e,e.sizeInBytes);let r=this.encodeTopLevel(e),n=d.Buffer.alloc(iC.SizeOfU32);return n.writeUInt32BE(r.length),d.Buffer.concat([n,r])}encodeNestedFixedSize(e,r){if(e.value.isZero())return d.Buffer.alloc(r,0);if(!e.withSign){let o=wt.bigIntToBuffer(e.value),a=d.Buffer.alloc(r-o.length,0);return d.Buffer.concat([a,o])}if(e.value.isPositive()){let o=wt.bigIntToBuffer(e.value);wt.isMsbOne(o)&&(o=wt.prependByteToBuffer(o,0));let a=d.Buffer.alloc(r-o.length,0);return d.Buffer.concat([a,o])}let n=e.value.plus(new pc.default(1)),i=wt.bigIntToBuffer(n);wt.flipBufferBitsInPlace(i),wt.isMsbZero(i)&&(i=wt.prependByteToBuffer(i,255));let s=d.Buffer.alloc(r-i.length,255);return d.Buffer.concat([s,i])}encodeTopLevel(e){let r=e.withSign;return e.value.isZero()?d.Buffer.alloc(0):r?this.encodePrimitive(e):wt.bigIntToBuffer(e.value)}encodePrimitive(e){if(e.value.isPositive()){let i=wt.bigIntToBuffer(e.value);return wt.isMsbOne(i)&&(i=wt.prependByteToBuffer(i,0)),i}let r=e.value.plus(new pc.default(1)),n=wt.bigIntToBuffer(r);return wt.flipBufferBitsInPlace(n),wt.isMsbZero(n)&&(n=wt.prependByteToBuffer(n,255)),n}};Ko.NumericalBinaryCodec=nw});var oC=E(Ih=>{"use strict";l();Object.defineProperty(Ih,"__esModule",{value:!0});Ih.H256BinaryCodec=void 0;var vV=$u(),iw=class{decodeNested(e){let r=e.slice(0,32);return[new vV.H256Value(r),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf()}encodeTopLevel(e){return e.valueOf()}};Ih.H256BinaryCodec=iw});var Th=E(Sh=>{"use strict";l();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.BytesBinaryCodec=void 0;var aC=vi(),_h=Ah(),sw=class{decodeNested(e){let r=e.readUInt32BE(0),n=e.slice(_h.SizeOfU32,_h.SizeOfU32+r);return[new aC.BytesValue(n),_h.SizeOfU32+r]}decodeTopLevel(e){return new aC.BytesValue(e)}encodeNested(e){let r=d.Buffer.alloc(_h.SizeOfU32);return r.writeUInt32BE(e.getLength()),d.Buffer.concat([r,e.valueOf()])}encodeTopLevel(e){return e.valueOf()}};Sh.BytesBinaryCodec=sw});var cC=E(Ch=>{"use strict";l();Object.defineProperty(Ch,"__esModule",{value:!0});Ch.TokenIdentifierCodec=void 0;var AV=vi(),uC=Wo(),bV=Th(),ow=class{constructor(){this.bytesCodec=new bV.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesCodec.decodeNested(e);return[new uC.TokenIdentifierValue(r.toString()),n]}decodeTopLevel(e){let r=this.bytesCodec.decodeTopLevel(e);return new uC.TokenIdentifierValue(r.toString())}encodeNested(e){let r=AV.BytesValue.fromUTF8(e.valueOf());return this.bytesCodec.encodeNested(r)}encodeTopLevel(e){return d.Buffer.from(e.valueOf())}};Ch.TokenIdentifierCodec=ow});var fC=E(xh=>{"use strict";l();Object.defineProperty(xh,"__esModule",{value:!0});xh.NothingCodec=void 0;var lC=St(),aw=class{decodeNested(){return[new lC.NothingValue,0]}decodeTopLevel(){return new lC.NothingValue}encodeNested(){return d.Buffer.from([])}encodeTopLevel(){return d.Buffer.from([])}};xh.NothingCodec=aw});var dC=E(Nh=>{"use strict";l();Object.defineProperty(Nh,"__esModule",{value:!0});Nh.StringBinaryCodec=void 0;var hC=St(),IV=vi(),_V=Th(),uw=class{constructor(){this.bytesBinaryCodec=new _V.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesBinaryCodec.decodeNested(e);return[new hC.StringValue(r.valueOf().toString()),n]}decodeTopLevel(e){return new hC.StringValue(e.toString())}encodeNested(e){let r=IV.BytesValue.fromUTF8(e.valueOf());return this.bytesBinaryCodec.encodeNested(r)}encodeTopLevel(e){return d.Buffer.from(e.valueOf())}};Nh.StringBinaryCodec=uw});var pC=E(Dh=>{"use strict";l();Object.defineProperty(Dh,"__esModule",{value:!0});Dh.PrimitiveBinaryCodec=void 0;var Oh=St(),SV=XT(),TV=eC(),CV=sC(),xV=oC(),NV=Th(),OV=cC(),DV=fC(),PV=dC(),cw=class{constructor(e){this.binaryCodec=e,this.booleanCodec=new TV.BooleanBinaryCodec,this.numericalCodec=new CV.NumericalBinaryCodec,this.addressCodec=new SV.AddressBinaryCodec,this.h256Codec=new xV.H256BinaryCodec,this.bytesCodec=new NV.BytesBinaryCodec,this.stringCodec=new PV.StringBinaryCodec,this.tokenIdentifierCodec=new OV.TokenIdentifierCodec,this.nothingCodec=new DV.NothingCodec}decodeNested(e,r){return Oh.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeNested(e),onNumerical:()=>this.numericalCodec.decodeNested(e,r),onAddress:()=>this.addressCodec.decodeNested(e),onBytes:()=>this.bytesCodec.decodeNested(e),onString:()=>this.stringCodec.decodeNested(e),onH256:()=>this.h256Codec.decodeNested(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeNested(e),onNothing:()=>this.nothingCodec.decodeNested()})}decodeTopLevel(e,r){return Oh.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeTopLevel(e),onNumerical:()=>this.numericalCodec.decodeTopLevel(e,r),onAddress:()=>this.addressCodec.decodeTopLevel(e),onBytes:()=>this.bytesCodec.decodeTopLevel(e),onString:()=>this.stringCodec.decodeTopLevel(e),onH256:()=>this.h256Codec.decodeTopLevel(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeTopLevel(e),onNothing:()=>this.nothingCodec.decodeTopLevel()})}encodeNested(e){return Oh.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeNested(e),onNumerical:()=>this.numericalCodec.encodeNested(e),onAddress:()=>this.addressCodec.encodeNested(e),onBytes:()=>this.bytesCodec.encodeNested(e),onString:()=>this.stringCodec.encodeNested(e),onH256:()=>this.h256Codec.encodeNested(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeNested(e),onNothing:()=>this.nothingCodec.encodeNested()})}encodeTopLevel(e){return Oh.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeTopLevel(e),onNumerical:()=>this.numericalCodec.encodeTopLevel(e),onAddress:()=>this.addressCodec.encodeTopLevel(e),onBytes:()=>this.bytesCodec.encodeTopLevel(e),onString:()=>this.stringCodec.encodeTopLevel(e),onH256:()=>this.h256Codec.encodeTopLevel(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeTopLevel(e),onNothing:()=>this.nothingCodec.encodeTopLevel()})}};Dh.PrimitiveBinaryCodec=cw});var mC=E(Ph=>{"use strict";l();Object.defineProperty(Ph,"__esModule",{value:!0});Ph.ListBinaryCodec=void 0;var gC=St(),yC=Ah(),lw=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.getFirstTypeParameter(),i=[],s=e.readUInt32BE(0);this.binaryCodec.constraints.checkListLength(s);let o=e,a=yC.SizeOfU32;e=o.slice(a);for(let u=0;u<s;u++){let[c,f]=this.binaryCodec.decodeNested(e,n);i.push(c),a+=f,e=o.slice(a)}return[new gC.List(r,i),a]}decodeTopLevel(e,r){let n=r.getFirstTypeParameter(),i=[],s=e,o=0;for(;e.length>0;){let[a,u]=this.binaryCodec.decodeNested(e,n);i.push(a),o+=u,e=s.slice(o),this.binaryCodec.constraints.checkListLength(i.length)}return new gC.List(r,i)}encodeNested(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=d.Buffer.alloc(yC.SizeOfU32);r.writeUInt32BE(e.getLength());let n=[];for(let s of e.getItems()){let o=this.binaryCodec.encodeNested(s);n.push(o)}return d.Buffer.concat([r,...n])}encodeTopLevel(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=[];for(let i of e.getItems()){let s=this.binaryCodec.encodeNested(i);r.push(s)}return d.Buffer.concat(r)}};Ph.ListBinaryCodec=lw});var hw=E(Rh=>{"use strict";l();Object.defineProperty(Rh,"__esModule",{value:!0});Rh.FieldsBinaryCodec=void 0;var RV=St(),fw=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=[],i=0;for(let s of r){let[o,a]=this.binaryCodec.decodeNested(e,s.type);e=e.slice(a),i+=a;let u=new RV.Field(o,s.name);n.push(u)}return[n,i]}encodeNested(e){let r=[];for(let n of e){let i=this.binaryCodec.encodeNested(n.value);r.push(i)}return d.Buffer.concat(r)}};Rh.FieldsBinaryCodec=fw});var pw=E(Bh=>{"use strict";l();Object.defineProperty(Bh,"__esModule",{value:!0});Bh.StructBinaryCodec=void 0;var BV=St(),LV=hw(),dw=class{constructor(e){this.fieldsCodec=new LV.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let n=r.getFieldsDefinitions(),[i,s]=this.fieldsCodec.decodeNested(e,n);return[new BV.Struct(r,i),s]}encodeNested(e){let r=e.getFields();return this.fieldsCodec.encodeNested(r)}encodeTopLevel(e){return this.encodeNested(e)}};Bh.StructBinaryCodec=dw});var wC=E(Fh=>{"use strict";l();Object.defineProperty(Fh,"__esModule",{value:!0});Fh.EnumBinaryCodec=void 0;var Lh=St(),FV=hw(),gw=class{constructor(e){this.binaryCodec=e,this.fieldsCodec=new FV.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let[n,i]=this.readDiscriminant(e);e=e.slice(i);let s=r.getVariantByDiscriminant(n),o=s.getFieldsDefinitions(),[a,u]=this.fieldsCodec.decodeNested(e,o);return[new Lh.EnumValue(r,s,a),i+u]}readDiscriminant(e){let[r,n]=this.binaryCodec.decodeNested(e,new Lh.U8Type);return[r.valueOf(),n]}encodeNested(e){let r=new Lh.U8Value(e.discriminant),n=this.binaryCodec.encodeNested(r),i=e.getFields(),s=this.fieldsCodec.encodeNested(i);return d.Buffer.concat([n,s])}encodeTopLevel(e){let r=e.getFields(),n=r.length>0,i=this.fieldsCodec.encodeNested(r),s=new Lh.U8Value(e.discriminant),o=n?this.binaryCodec.encodeNested(s):this.binaryCodec.encodeTopLevel(s);return d.Buffer.concat([o,i])}};Fh.EnumBinaryCodec=gw});var EC=E(Mh=>{"use strict";l();Object.defineProperty(Mh,"__esModule",{value:!0});Mh.TupleBinaryCodec=void 0;var MV=pw(),yw=class{constructor(e){this.structCodec=new MV.StructBinaryCodec(e)}decodeTopLevel(e,r){return this.structCodec.decodeTopLevel(e,r)}decodeNested(e,r){return this.structCodec.decodeNested(e,r)}encodeNested(e){return this.structCodec.encodeNested(e)}encodeTopLevel(e){return this.structCodec.encodeTopLevel(e)}};Mh.TupleBinaryCodec=yw});var vC=E(Uh=>{"use strict";l();Object.defineProperty(Uh,"__esModule",{value:!0});Uh.ArrayVecBinaryCodec=void 0;var UV=St(),mw=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.length,i=r.getFirstTypeParameter(),s=[],o=0;for(let a=0;a<n;a++){let[u,c]=this.binaryCodec.decodeNested(e,i);s.push(u),o+=c,e=e.slice(c)}return[new UV.ArrayVec(r,s),o]}decodeTopLevel(e,r){let[n,i]=this.decodeNested(e,r);return n}encodeNested(e){let r=[];for(let n of e.getItems()){let i=this.binaryCodec.encodeNested(n);r.push(i)}return d.Buffer.concat(r)}encodeTopLevel(e){return this.encodeNested(e)}};Uh.ArrayVecBinaryCodec=mw});var Ew=E(Nr=>{"use strict";l();var qV=Nr&&Nr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VV=Nr&&Nr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HV=Nr&&Nr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qV(e,t,r);return VV(e,t),e};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.BinaryCodecConstraints=Nr.BinaryCodec=void 0;var AC=HV(Be()),qh=St(),bC=vr(),GV=JT(),kV=pC(),jV=mC(),QV=pw(),WV=wC(),zV=EC(),$V=vC(),ww=class{constructor(e=null){this.constraints=e||new Vh,this.optionCodec=new GV.OptionValueBinaryCodec(this),this.listCodec=new jV.ListBinaryCodec(this),this.arrayCodec=new $V.ArrayVecBinaryCodec(this),this.primitiveCodec=new kV.PrimitiveBinaryCodec(this),this.structCodec=new QV.StructBinaryCodec(this),this.tupleCodec=new zV.TupleBinaryCodec(this),this.enumCodec=new WV.EnumBinaryCodec(this)}decodeTopLevel(e,r){return this.constraints.checkBufferLength(e),qh.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeTopLevel(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeTopLevel(e,r),onArray:()=>this.arrayCodec.decodeTopLevel(e,r),onPrimitive:()=>this.primitiveCodec.decodeTopLevel(e,r),onStruct:()=>this.structCodec.decodeTopLevel(e,r),onTuple:()=>this.tupleCodec.decodeTopLevel(e,r),onEnum:()=>this.enumCodec.decodeTopLevel(e,r)})}decodeNested(e,r){this.constraints.checkBufferLength(e);let[n,i]=qh.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeNested(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeNested(e,r),onArray:()=>this.arrayCodec.decodeNested(e,r),onPrimitive:()=>this.primitiveCodec.decodeNested(e,r),onStruct:()=>this.structCodec.decodeNested(e,r),onTuple:()=>this.tupleCodec.decodeNested(e,r),onEnum:()=>this.enumCodec.decodeNested(e,r)});return[n,i]}encodeNested(e){return bC.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),qh.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeNested(e),onOption:()=>this.optionCodec.encodeNested(e),onList:()=>this.listCodec.encodeNested(e),onArray:()=>this.arrayCodec.encodeNested(e),onStruct:()=>this.structCodec.encodeNested(e),onTuple:()=>this.tupleCodec.encodeNested(e),onEnum:()=>this.enumCodec.encodeNested(e)})}encodeTopLevel(e){return bC.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),qh.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeTopLevel(e),onOption:()=>this.optionCodec.encodeTopLevel(e),onList:()=>this.listCodec.encodeTopLevel(e),onArray:()=>this.arrayCodec.encodeTopLevel(e),onStruct:()=>this.structCodec.encodeTopLevel(e),onTuple:()=>this.tupleCodec.encodeTopLevel(e),onEnum:()=>this.enumCodec.encodeTopLevel(e)})}};Nr.BinaryCodec=ww;var Vh=class{constructor(e){this.maxBufferLength=e?.maxBufferLength||256e3,this.maxListLength=e?.maxListLength||128e3}checkBufferLength(e){if(e.length>this.maxBufferLength)throw new AC.ErrCodec(`Buffer too large: ${e.length} > ${this.maxBufferLength}`)}checkListLength(e){if(e>this.maxListLength)throw new AC.ErrCodec(`List too large: ${e} > ${this.maxListLength}`)}};Nr.BinaryCodecConstraints=Vh});var IC=E(Or=>{"use strict";l();var KV=Or&&Or.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Or,"__esModule",{value:!0});Or.decodeBigNumber=Or.decodeString=Or.decodeBool=Or.decodeUnsignedNumber=void 0;var YV=KV(kt()),Hh=St(),JV=Ew(),Gh=new JV.BinaryCodec;function XV(t){let e=Gh.decodeTopLevel(t,new Hh.BigUIntType);return Number(e.valueOf())}Or.decodeUnsignedNumber=XV;function ZV(t){return!!Gh.decodeTopLevel(t,new Hh.BooleanType).valueOf()}Or.decodeBool=ZV;function eH(t){let e=Gh.decodeTopLevel(t,new Hh.BytesType);return String(e.valueOf())}Or.decodeString=eH;function tH(t){let e=Gh.decodeTopLevel(t,new Hh.BigUIntType);return new YV.default(e.valueOf())}Or.decodeBigNumber=tH});var vw=E(Ii=>{"use strict";l();var rH=Ii&&Ii.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_C=Ii&&Ii.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rH(e,t,r)};Object.defineProperty(Ii,"__esModule",{value:!0});_C(Ew(),Ii);_C(IC(),Ii)});var Yo=E(kh=>{"use strict";l();Object.defineProperty(kh,"__esModule",{value:!0});kh.ArgSerializer=void 0;var SC=Ss(),nH=vw(),TC=St(),Aw=Lf(),bw=Vf(),Iw=dh(),iH={codec:new nH.BinaryCodec},_w=class{constructor(e){e=Object.assign(Object.assign({},iH),e),this.codec=e.codec}stringToValues(e,r){let n=this.stringToBuffers(e);return this.buffersToValues(n,r)}stringToBuffers(e){return e.split(SC.ARGUMENTS_SEPARATOR).map(r=>d.Buffer.from(r,"hex"))}buffersToValues(e,r){let n=this;e=e||[];let i=[],s=0,o=e.length;for(let h=0;h<r.length;h++){let y=r[h].type,m=a(y);i.push(m)}function a(h){if(h.hasExactClass(Aw.OptionalType.ClassName)){let y=a(h.getFirstTypeParameter());return new Aw.OptionalValue(h,y)}if(h.hasExactClass(Iw.VariadicType.ClassName))return u(h);if(h.hasExactClass(bw.CompositeType.ClassName)){let y=[];for(let m of h.getTypeParameters())y.push(a(m));return new bw.CompositeValue(h,y)}return c(h)}function u(h){let g=h,y=[];if(g.isCounted){let m=a(new TC.U32Type).valueOf().toNumber();for(let T=0;T<m;T++)y.push(a(h.getFirstTypeParameter()))}else for(;!f();)y.push(a(h.getFirstTypeParameter()));return new Iw.VariadicValue(g,y)}function c(h){if(f())return null;let g=e[s++];return n.codec.decodeTopLevel(g,h)}function f(){return s>=o}return i}valuesToString(e){let r=this.valuesToStrings(e),n=r.join(SC.ARGUMENTS_SEPARATOR),i=r.length;return{argumentsString:n,count:i}}valuesToStrings(e){return this.valuesToBuffers(e).map(i=>i.toString("hex"))}valuesToBuffers(e){let r=this,n=[];for(let o of e)i(o);function i(o){if(o.hasExactClass(Aw.OptionalValue.ClassName)){let u=o;u.isSet()&&i(u.getTypedValue());return}if(o.hasExactClass(Iw.VariadicValue.ClassName)){s(o);return}if(o.hasExactClass(bw.CompositeValue.ClassName)){let u=o;for(let c of u.getItems())i(c);return}let a=r.codec.encodeTopLevel(o);n.push(a)}function s(o){if(o.getType().isCounted){let u=new TC.U32Value(o.getItems().length);n.push(r.codec.encodeTopLevel(u))}for(let u of o.getItems())i(u)}return n}};kh.ArgSerializer=_w});var Wh=E(Qh=>{"use strict";l();Object.defineProperty(Qh,"__esModule",{value:!0});Qh.Compatibility=void 0;var sH=ht(),jh=class{static guardAddressIsSetAndNonZero(e,r,n){this.areWarningsEnabled&&(!e||e.bech32()==""?console.warn(`${r}: address should be set; ${n}. In the future, this will throw an exception instead of emitting a WARN.`):e.bech32()==sH.Address.Zero().bech32()&&console.warn(`${r}: address should not be the 'zero' address (also known as the 'contracts deployment address'); ${n}. In the future, this will throw an exception instead of emitting a WARN.`))}};Qh.Compatibility=jh;jh.areWarningsEnabled=!0});var CC=E(yn=>{"use strict";l();var oH=yn&&yn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aH=yn&&yn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uH=yn&&yn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oH(e,t,r);return aH(e,t),e};Object.defineProperty(yn,"__esModule",{value:!0});yn.Hash=void 0;var cH=uH(Be()),Sw=class t{constructor(e){if(!e)this.hash=d.Buffer.from([]);else if(e instanceof d.Buffer)this.hash=e;else if(typeof e=="string")this.hash=d.Buffer.from(e,"hex");else throw new cH.ErrBadType("hash","buffer | string",e)}static empty(){return new t(d.Buffer.from([]))}isEmpty(){return this.hash.length==0}toString(){return this.hex()}hex(){return this.hash.toString("hex")}valueOf(){return this.hash}};yn.Hash=Sw});var gc=E(Dr=>{"use strict";l();var lH=Dr&&Dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fH=Dr&&Dr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hH=Dr&&Dr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lH(e,t,r);return fH(e,t),e};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.TransactionOptions=Dr.TransactionVersion=void 0;var Wr=Ss(),xC=hH(Be()),Tw=class t{constructor(e){if(e=Number(e),e<1)throw new xC.ErrTransactionVersionInvalid(e);this.value=e}static withDefaultVersion(){return new t(Wr.TRANSACTION_VERSION_DEFAULT)}static withTxOptions(){return new t(Wr.TRANSACTION_VERSION_WITH_OPTIONS)}valueOf(){return this.value}};Dr.TransactionVersion=Tw;var Cw=class t{constructor(e){if(e=Number(e),e<0)throw new xC.ErrTransactionOptionsInvalid(e);this.value=e}static withDefaultOptions(){return new t(Wr.TRANSACTION_OPTIONS_DEFAULT)}static withOptions(e){let r=0;return e.hashSign&&(r|=Wr.TRANSACTION_OPTIONS_TX_HASH_SIGN),e.guarded&&(r|=Wr.TRANSACTION_OPTIONS_TX_GUARDED),new t(r)}isWithHashSign(){return(this.value&Wr.TRANSACTION_OPTIONS_TX_HASH_SIGN)==Wr.TRANSACTION_OPTIONS_TX_HASH_SIGN}isWithGuardian(){return(this.value&Wr.TRANSACTION_OPTIONS_TX_GUARDED)==Wr.TRANSACTION_OPTIONS_TX_GUARDED}setWithHashSign(){this.value|=Wr.TRANSACTION_OPTIONS_TX_HASH_SIGN}setWithGuardian(){this.value|=Wr.TRANSACTION_OPTIONS_TX_GUARDED}valueOf(){return this.value}};Dr.TransactionOptions=Cw});var OC=E((Bae,NC)=>{"use strict";l();NC.exports=dH;function dH(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var h=new Array(arguments.length-1),g=0;g<h.length;)h[g++]=arguments[g];a.apply(null,h)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,u(c))}})}});var BC=E(RC=>{"use strict";l();var zh=RC;zh.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Jo=new Array(64),PC=new Array(123);for(zr=0;zr<64;)PC[Jo[zr]=zr<26?zr+65:zr<52?zr+71:zr<62?zr-4:zr-59|43]=zr++;var zr;zh.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=e[r++];switch(a){case 0:s[o++]=Jo[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=Jo[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=Jo[u|c>>6],s[o++]=Jo[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Jo[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var DC="invalid encoding";zh.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&s>1)break;if((u=PC[u])===void 0)throw Error(DC);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(DC);return n-i};zh.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var FC=E((Uae,LC)=>{"use strict";l();LC.exports=$h;function $h(){this._listeners={}}$h.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};$h.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};$h.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var kC=E((Vae,GC)=>{"use strict";l();GC.exports=MC(MC);function MC(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){e[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,UC),t.writeFloatBE=e.bind(null,qC);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,VC),t.readFloatBE=r.bind(null,HC)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){e[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),f=o*Math.pow(2,-h),n(f*4503599627370496>>>0,a,u+i),n((c<<31|h+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}t.writeDoubleLE=e.bind(null,UC,0,4),t.writeDoubleBE=e.bind(null,qC,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,h=c>>>20&2047,g=4294967296*(c&1048575)+u;return h===2047?g?NaN:f*(1/0):h===0?f*5e-324*g:f*Math.pow(2,h-1075)*(g+4503599627370496)}t.readDoubleLE=r.bind(null,VC,0,4),t.readDoubleBE=r.bind(null,HC,4,0)}(),t}function UC(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function qC(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function VC(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function HC(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var jC=E((exports,module)=>{"use strict";l();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var WC=E(QC=>{"use strict";l();var xw=QC;xw.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};xw.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=e[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};xw.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var $C=E((Qae,zC)=>{"use strict";l();zC.exports=pH;function pH(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return t(u);o+u>n&&(s=t(n),o=0);var c=e.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var YC=E((zae,KC)=>{"use strict";l();KC.exports=Ft;var yc=Si();function Ft(t,e){this.lo=t>>>0,this.hi=e>>>0}var Ds=Ft.zero=new Ft(0,0);Ds.toNumber=function(){return 0};Ds.zzEncode=Ds.zzDecode=function(){return this};Ds.length=function(){return 1};var gH=Ft.zeroHash="\0\0\0\0\0\0\0\0";Ft.fromNumber=function(e){if(e===0)return Ds;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ft(n,i)};Ft.from=function(e){if(typeof e=="number")return Ft.fromNumber(e);if(yc.isString(e))if(yc.Long)e=yc.Long.fromString(e);else return Ft.fromNumber(parseInt(e,10));return e.low||e.high?new Ft(e.low>>>0,e.high>>>0):Ds};Ft.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Ft.prototype.toLong=function(e){return yc.Long?new yc.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var _i=String.prototype.charCodeAt;Ft.fromHash=function(e){return e===gH?Ds:new Ft((_i.call(e,0)|_i.call(e,1)<<8|_i.call(e,2)<<16|_i.call(e,3)<<24)>>>0,(_i.call(e,4)|_i.call(e,5)<<8|_i.call(e,6)<<16|_i.call(e,7)<<24)>>>0)};Ft.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ft.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ft.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ft.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Si=E(Nw=>{"use strict";l();var Ee=Nw;Ee.asPromise=OC();Ee.base64=BC();Ee.EventEmitter=FC();Ee.float=kC();Ee.inquire=jC();Ee.utf8=WC();Ee.pool=$C();Ee.LongBits=YC();Ee.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Ee.global=Ee.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Nw;Ee.emptyArray=Object.freeze?Object.freeze([]):[];Ee.emptyObject=Object.freeze?Object.freeze({}):{};Ee.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Ee.isString=function(e){return typeof e=="string"||e instanceof String};Ee.isObject=function(e){return e&&typeof e=="object"};Ee.isset=Ee.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Ee.Buffer=function(){try{var t=Ee.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();Ee._Buffer_from=null;Ee._Buffer_allocUnsafe=null;Ee.newBuffer=function(e){return typeof e=="number"?Ee.Buffer?Ee._Buffer_allocUnsafe(e):new Ee.Array(e):Ee.Buffer?Ee._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Ee.Array=typeof Uint8Array<"u"?Uint8Array:Array;Ee.Long=Ee.global.dcodeIO&&Ee.global.dcodeIO.Long||Ee.global.Long||Ee.inquire("long");Ee.key2Re=/^true|false|0|1$/;Ee.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Ee.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Ee.longToHash=function(e){return e?Ee.LongBits.from(e).toHash():Ee.LongBits.zeroHash};Ee.longFromHash=function(e,r){var n=Ee.LongBits.fromHash(e);return Ee.Long?Ee.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function JC(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}Ee.merge=JC;Ee.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function XC(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&JC(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Ee.newError=XC;Ee.ProtocolError=XC("ProtocolError");Ee.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};Ee.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};Ee.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Ee._configure=function(){var t=Ee.Buffer;if(!t){Ee._Buffer_from=Ee._Buffer_allocUnsafe=null;return}Ee._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},Ee._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Fw=E((Jae,rx)=>{"use strict";l();rx.exports=Fe;var Pr=Si(),Ow,Kh=Pr.LongBits,ZC=Pr.base64,ex=Pr.utf8;function mc(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Pw(){}function yH(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Fe(){this.len=0,this.head=new mc(Pw,0,0),this.tail=this.head,this.states=null}var tx=function(){return Pr.Buffer?function(){return(Fe.create=function(){return new Ow})()}:function(){return new Fe}};Fe.create=tx();Fe.alloc=function(e){return new Pr.Array(e)};Pr.Array!==Array&&(Fe.alloc=Pr.pool(Fe.alloc,Pr.Array.prototype.subarray));Fe.prototype._push=function(e,r,n){return this.tail=this.tail.next=new mc(e,r,n),this.len+=r,this};function Rw(t,e,r){e[r]=t&255}function mH(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Bw(t,e){this.len=t,this.next=void 0,this.val=e}Bw.prototype=Object.create(mc.prototype);Bw.prototype.fn=mH;Fe.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Bw((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Fe.prototype.int32=function(e){return e<0?this._push(Lw,10,Kh.fromNumber(e)):this.uint32(e)};Fe.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Lw(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Fe.prototype.uint64=function(e){var r=Kh.from(e);return this._push(Lw,r.length(),r)};Fe.prototype.int64=Fe.prototype.uint64;Fe.prototype.sint64=function(e){var r=Kh.from(e).zzEncode();return this._push(Lw,r.length(),r)};Fe.prototype.bool=function(e){return this._push(Rw,1,e?1:0)};function Dw(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Fe.prototype.fixed32=function(e){return this._push(Dw,4,e>>>0)};Fe.prototype.sfixed32=Fe.prototype.fixed32;Fe.prototype.fixed64=function(e){var r=Kh.from(e);return this._push(Dw,4,r.lo)._push(Dw,4,r.hi)};Fe.prototype.sfixed64=Fe.prototype.fixed64;Fe.prototype.float=function(e){return this._push(Pr.float.writeFloatLE,4,e)};Fe.prototype.double=function(e){return this._push(Pr.float.writeDoubleLE,8,e)};var wH=Pr.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};Fe.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Rw,1,0);if(Pr.isString(e)){var n=Fe.alloc(r=ZC.length(e));ZC.decode(e,n,0),e=n}return this.uint32(r)._push(wH,r,e)};Fe.prototype.string=function(e){var r=ex.length(e);return r?this.uint32(r)._push(ex.write,r,e):this._push(Rw,1,0)};Fe.prototype.fork=function(){return this.states=new yH(this),this.head=this.tail=new mc(Pw,0,0),this.len=0,this};Fe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new mc(Pw,0,0),this.len=0),this};Fe.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Fe.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Fe._configure=function(t){Ow=t,Fe.create=tx(),Ow._configure()}});var sx=E((Zae,ix)=>{"use strict";l();ix.exports=mn;var nx=Fw();(mn.prototype=Object.create(nx.prototype)).constructor=mn;var Ti=Si();function mn(){nx.call(this)}mn._configure=function(){mn.alloc=Ti._Buffer_allocUnsafe,mn.writeBytesBuffer=Ti.Buffer&&Ti.Buffer.prototype instanceof Uint8Array&&Ti.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};mn.prototype.bytes=function(e){Ti.isString(e)&&(e=Ti._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(mn.writeBytesBuffer,r,e),this};function EH(t,e,r){t.length<40?Ti.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}mn.prototype.string=function(e){var r=Ti.Buffer.byteLength(e);return this.uint32(r),r&&this._push(EH,r,e),this};mn._configure()});var qw=E((tue,lx)=>{"use strict";l();lx.exports=Et;var wn=Si(),Uw,ux=wn.LongBits,vH=wn.utf8;function $r(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Et(t){this.buf=t,this.pos=0,this.len=t.length}var ox=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Et(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Et(e);throw Error("illegal buffer")},cx=function(){return wn.Buffer?function(r){return(Et.create=function(i){return wn.Buffer.isBuffer(i)?new Uw(i):ox(i)})(r)}:ox};Et.create=cx();Et.prototype._slice=wn.Array.prototype.subarray||wn.Array.prototype.slice;Et.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,$r(this,10);return e}}();Et.prototype.int32=function(){return this.uint32()|0};Et.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Mw(){var t=new ux(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw $r(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw $r(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Et.prototype.bool=function(){return this.uint32()!==0};function Yh(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Et.prototype.fixed32=function(){if(this.pos+4>this.len)throw $r(this,4);return Yh(this.buf,this.pos+=4)};Et.prototype.sfixed32=function(){if(this.pos+4>this.len)throw $r(this,4);return Yh(this.buf,this.pos+=4)|0};function ax(){if(this.pos+8>this.len)throw $r(this,8);return new ux(Yh(this.buf,this.pos+=4),Yh(this.buf,this.pos+=4))}Et.prototype.float=function(){if(this.pos+4>this.len)throw $r(this,4);var e=wn.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Et.prototype.double=function(){if(this.pos+8>this.len)throw $r(this,4);var e=wn.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Et.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw $r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Et.prototype.string=function(){var e=this.bytes();return vH.read(e,0,e.length)};Et.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw $r(this,e);this.pos+=e}else do if(this.pos>=this.len)throw $r(this);while(this.buf[this.pos++]&128);return this};Et.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Et._configure=function(t){Uw=t,Et.create=cx(),Uw._configure();var e=wn.Long?"toLong":"toNumber";wn.merge(Et.prototype,{int64:function(){return Mw.call(this)[e](!1)},uint64:function(){return Mw.call(this)[e](!0)},sint64:function(){return Mw.call(this).zzDecode()[e](!1)},fixed64:function(){return ax.call(this)[e](!0)},sfixed64:function(){return ax.call(this)[e](!1)}})}});var px=E((nue,dx)=>{"use strict";l();dx.exports=Ps;var hx=qw();(Ps.prototype=Object.create(hx.prototype)).constructor=Ps;var fx=Si();function Ps(t){hx.call(this,t)}Ps._configure=function(){fx.Buffer&&(Ps.prototype._slice=fx.Buffer.prototype.slice)};Ps.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Ps._configure()});var yx=E((sue,gx)=>{"use strict";l();gx.exports=wc;var Vw=Si();(wc.prototype=Object.create(Vw.EventEmitter.prototype)).constructor=wc;function wc(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Vw.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r}wc.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Vw.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return o.emit("error",u,e),s(u);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};wc.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var wx=E(mx=>{"use strict";l();var AH=mx;AH.Service=yx()});var vx=E((cue,Ex)=>{"use strict";l();Ex.exports={}});var Ix=E(bx=>{"use strict";l();var hr=bx;hr.build="minimal";hr.Writer=Fw();hr.BufferWriter=sx();hr.Reader=qw();hr.BufferReader=px();hr.util=Si();hr.rpc=wx();hr.roots=vx();hr.configure=Ax;function Ax(){hr.util._configure(),hr.Writer._configure(hr.BufferWriter),hr.Reader._configure(hr.BufferReader)}Ax()});var Sx=E((due,_x)=>{"use strict";l();_x.exports=Ix()});var Cx=E((gue,Tx)=>{"use strict";l();var Xo=Sx(),Jh=Xo.Reader,bH=Xo.Writer,X=Xo.util,Ec=Xo.roots.default||(Xo.roots.default={});Ec.proto=function(){var t={};return t.Transaction=function(){function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.Nonce=X.Long?X.Long.fromBits(0,0,!0):0,e.prototype.Value=X.newBuffer([]),e.prototype.RcvAddr=X.newBuffer([]),e.prototype.RcvUserName=X.newBuffer([]),e.prototype.SndAddr=X.newBuffer([]),e.prototype.SndUserName=X.newBuffer([]),e.prototype.GasPrice=X.Long?X.Long.fromBits(0,0,!0):0,e.prototype.GasLimit=X.Long?X.Long.fromBits(0,0,!0):0,e.prototype.Data=X.newBuffer([]),e.prototype.ChainID=X.newBuffer([]),e.prototype.Version=0,e.prototype.Signature=X.newBuffer([]),e.prototype.Options=0,e.prototype.GuardAddr=X.newBuffer([]),e.prototype.GuardSignature=X.newBuffer([]),e.create=function(n){return new e(n)},e.encode=function(n,i){return i||(i=bH.create()),n.Nonce!=null&&Object.hasOwnProperty.call(n,"Nonce")&&i.uint32(8).uint64(n.Nonce),n.Value!=null&&Object.hasOwnProperty.call(n,"Value")&&i.uint32(18).bytes(n.Value),n.RcvAddr!=null&&Object.hasOwnProperty.call(n,"RcvAddr")&&i.uint32(26).bytes(n.RcvAddr),n.RcvUserName!=null&&Object.hasOwnProperty.call(n,"RcvUserName")&&i.uint32(34).bytes(n.RcvUserName),n.SndAddr!=null&&Object.hasOwnProperty.call(n,"SndAddr")&&i.uint32(42).bytes(n.SndAddr),n.SndUserName!=null&&Object.hasOwnProperty.call(n,"SndUserName")&&i.uint32(50).bytes(n.SndUserName),n.GasPrice!=null&&Object.hasOwnProperty.call(n,"GasPrice")&&i.uint32(56).uint64(n.GasPrice),n.GasLimit!=null&&Object.hasOwnProperty.call(n,"GasLimit")&&i.uint32(64).uint64(n.GasLimit),n.Data!=null&&Object.hasOwnProperty.call(n,"Data")&&i.uint32(74).bytes(n.Data),n.ChainID!=null&&Object.hasOwnProperty.call(n,"ChainID")&&i.uint32(82).bytes(n.ChainID),n.Version!=null&&Object.hasOwnProperty.call(n,"Version")&&i.uint32(88).uint32(n.Version),n.Signature!=null&&Object.hasOwnProperty.call(n,"Signature")&&i.uint32(98).bytes(n.Signature),n.Options!=null&&Object.hasOwnProperty.call(n,"Options")&&i.uint32(104).uint32(n.Options),n.GuardAddr!=null&&Object.hasOwnProperty.call(n,"GuardAddr")&&i.uint32(114).bytes(n.GuardAddr),n.GuardSignature!=null&&Object.hasOwnProperty.call(n,"GuardSignature")&&i.uint32(122).bytes(n.GuardSignature),i},e.encodeDelimited=function(n,i){return this.encode(n,i).ldelim()},e.decode=function(n,i){n instanceof Jh||(n=Jh.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new Ec.proto.Transaction;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.Nonce=n.uint64();break;case 2:o.Value=n.bytes();break;case 3:o.RcvAddr=n.bytes();break;case 4:o.RcvUserName=n.bytes();break;case 5:o.SndAddr=n.bytes();break;case 6:o.SndUserName=n.bytes();break;case 7:o.GasPrice=n.uint64();break;case 8:o.GasLimit=n.uint64();break;case 9:o.Data=n.bytes();break;case 10:o.ChainID=n.bytes();break;case 11:o.Version=n.uint32();break;case 12:o.Signature=n.bytes();break;case 13:o.Options=n.uint32();break;case 14:o.GuardAddr=n.bytes();break;case 15:o.GuardSignature=n.bytes();break;default:n.skipType(a&7);break}}return o},e.decodeDelimited=function(n){return n instanceof Jh||(n=new Jh(n)),this.decode(n,n.uint32())},e.verify=function(n){return typeof n!="object"||n===null?"object expected":n.Nonce!=null&&n.hasOwnProperty("Nonce")&&!X.isInteger(n.Nonce)&&!(n.Nonce&&X.isInteger(n.Nonce.low)&&X.isInteger(n.Nonce.high))?"Nonce: integer|Long expected":n.Value!=null&&n.hasOwnProperty("Value")&&!(n.Value&&typeof n.Value.length=="number"||X.isString(n.Value))?"Value: buffer expected":n.RcvAddr!=null&&n.hasOwnProperty("RcvAddr")&&!(n.RcvAddr&&typeof n.RcvAddr.length=="number"||X.isString(n.RcvAddr))?"RcvAddr: buffer expected":n.RcvUserName!=null&&n.hasOwnProperty("RcvUserName")&&!(n.RcvUserName&&typeof n.RcvUserName.length=="number"||X.isString(n.RcvUserName))?"RcvUserName: buffer expected":n.SndAddr!=null&&n.hasOwnProperty("SndAddr")&&!(n.SndAddr&&typeof n.SndAddr.length=="number"||X.isString(n.SndAddr))?"SndAddr: buffer expected":n.SndUserName!=null&&n.hasOwnProperty("SndUserName")&&!(n.SndUserName&&typeof n.SndUserName.length=="number"||X.isString(n.SndUserName))?"SndUserName: buffer expected":n.GasPrice!=null&&n.hasOwnProperty("GasPrice")&&!X.isInteger(n.GasPrice)&&!(n.GasPrice&&X.isInteger(n.GasPrice.low)&&X.isInteger(n.GasPrice.high))?"GasPrice: integer|Long expected":n.GasLimit!=null&&n.hasOwnProperty("GasLimit")&&!X.isInteger(n.GasLimit)&&!(n.GasLimit&&X.isInteger(n.GasLimit.low)&&X.isInteger(n.GasLimit.high))?"GasLimit: integer|Long expected":n.Data!=null&&n.hasOwnProperty("Data")&&!(n.Data&&typeof n.Data.length=="number"||X.isString(n.Data))?"Data: buffer expected":n.ChainID!=null&&n.hasOwnProperty("ChainID")&&!(n.ChainID&&typeof n.ChainID.length=="number"||X.isString(n.ChainID))?"ChainID: buffer expected":n.Version!=null&&n.hasOwnProperty("Version")&&!X.isInteger(n.Version)?"Version: integer expected":n.Signature!=null&&n.hasOwnProperty("Signature")&&!(n.Signature&&typeof n.Signature.length=="number"||X.isString(n.Signature))?"Signature: buffer expected":n.Options!=null&&n.hasOwnProperty("Options")&&!X.isInteger(n.Options)?"Options: integer expected":n.GuardAddr!=null&&n.hasOwnProperty("GuardAddr")&&!(n.GuardAddr&&typeof n.GuardAddr.length=="number"||X.isString(n.GuardAddr))?"GuardAddr: buffer expected":n.GuardSignature!=null&&n.hasOwnProperty("GuardSignature")&&!(n.GuardSignature&&typeof n.GuardSignature.length=="number"||X.isString(n.GuardSignature))?"GuardSignature: buffer expected":null},e.fromObject=function(n){if(n instanceof Ec.proto.Transaction)return n;var i=new Ec.proto.Transaction;return n.Nonce!=null&&(X.Long?(i.Nonce=X.Long.fromValue(n.Nonce)).unsigned=!0:typeof n.Nonce=="string"?i.Nonce=parseInt(n.Nonce,10):typeof n.Nonce=="number"?i.Nonce=n.Nonce:typeof n.Nonce=="object"&&(i.Nonce=new X.LongBits(n.Nonce.low>>>0,n.Nonce.high>>>0).toNumber(!0))),n.Value!=null&&(typeof n.Value=="string"?X.base64.decode(n.Value,i.Value=X.newBuffer(X.base64.length(n.Value)),0):n.Value.length&&(i.Value=n.Value)),n.RcvAddr!=null&&(typeof n.RcvAddr=="string"?X.base64.decode(n.RcvAddr,i.RcvAddr=X.newBuffer(X.base64.length(n.RcvAddr)),0):n.RcvAddr.length&&(i.RcvAddr=n.RcvAddr)),n.RcvUserName!=null&&(typeof n.RcvUserName=="string"?X.base64.decode(n.RcvUserName,i.RcvUserName=X.newBuffer(X.base64.length(n.RcvUserName)),0):n.RcvUserName.length&&(i.RcvUserName=n.RcvUserName)),n.SndAddr!=null&&(typeof n.SndAddr=="string"?X.base64.decode(n.SndAddr,i.SndAddr=X.newBuffer(X.base64.length(n.SndAddr)),0):n.SndAddr.length&&(i.SndAddr=n.SndAddr)),n.SndUserName!=null&&(typeof n.SndUserName=="string"?X.base64.decode(n.SndUserName,i.SndUserName=X.newBuffer(X.base64.length(n.SndUserName)),0):n.SndUserName.length&&(i.SndUserName=n.SndUserName)),n.GasPrice!=null&&(X.Long?(i.GasPrice=X.Long.fromValue(n.GasPrice)).unsigned=!0:typeof n.GasPrice=="string"?i.GasPrice=parseInt(n.GasPrice,10):typeof n.GasPrice=="number"?i.GasPrice=n.GasPrice:typeof n.GasPrice=="object"&&(i.GasPrice=new X.LongBits(n.GasPrice.low>>>0,n.GasPrice.high>>>0).toNumber(!0))),n.GasLimit!=null&&(X.Long?(i.GasLimit=X.Long.fromValue(n.GasLimit)).unsigned=!0:typeof n.GasLimit=="string"?i.GasLimit=parseInt(n.GasLimit,10):typeof n.GasLimit=="number"?i.GasLimit=n.GasLimit:typeof n.GasLimit=="object"&&(i.GasLimit=new X.LongBits(n.GasLimit.low>>>0,n.GasLimit.high>>>0).toNumber(!0))),n.Data!=null&&(typeof n.Data=="string"?X.base64.decode(n.Data,i.Data=X.newBuffer(X.base64.length(n.Data)),0):n.Data.length&&(i.Data=n.Data)),n.ChainID!=null&&(typeof n.ChainID=="string"?X.base64.decode(n.ChainID,i.ChainID=X.newBuffer(X.base64.length(n.ChainID)),0):n.ChainID.length&&(i.ChainID=n.ChainID)),n.Version!=null&&(i.Version=n.Version>>>0),n.Signature!=null&&(typeof n.Signature=="string"?X.base64.decode(n.Signature,i.Signature=X.newBuffer(X.base64.length(n.Signature)),0):n.Signature.length&&(i.Signature=n.Signature)),n.Options!=null&&(i.Options=n.Options>>>0),n.GuardAddr!=null&&(typeof n.GuardAddr=="string"?X.base64.decode(n.GuardAddr,i.GuardAddr=X.newBuffer(X.base64.length(n.GuardAddr)),0):n.GuardAddr.length&&(i.GuardAddr=n.GuardAddr)),n.GuardSignature!=null&&(typeof n.GuardSignature=="string"?X.base64.decode(n.GuardSignature,i.GuardSignature=X.newBuffer(X.base64.length(n.GuardSignature)),0):n.GuardSignature.length&&(i.GuardSignature=n.GuardSignature)),i},e.toObject=function(n,i){i||(i={});var s={};if(i.defaults){if(X.Long){var o=new X.Long(0,0,!0);s.Nonce=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.Nonce=i.longs===String?"0":0;if(i.bytes===String?s.Value="":(s.Value=[],i.bytes!==Array&&(s.Value=X.newBuffer(s.Value))),i.bytes===String?s.RcvAddr="":(s.RcvAddr=[],i.bytes!==Array&&(s.RcvAddr=X.newBuffer(s.RcvAddr))),i.bytes===String?s.RcvUserName="":(s.RcvUserName=[],i.bytes!==Array&&(s.RcvUserName=X.newBuffer(s.RcvUserName))),i.bytes===String?s.SndAddr="":(s.SndAddr=[],i.bytes!==Array&&(s.SndAddr=X.newBuffer(s.SndAddr))),i.bytes===String?s.SndUserName="":(s.SndUserName=[],i.bytes!==Array&&(s.SndUserName=X.newBuffer(s.SndUserName))),X.Long){var o=new X.Long(0,0,!0);s.GasPrice=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.GasPrice=i.longs===String?"0":0;if(X.Long){var o=new X.Long(0,0,!0);s.GasLimit=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.GasLimit=i.longs===String?"0":0;i.bytes===String?s.Data="":(s.Data=[],i.bytes!==Array&&(s.Data=X.newBuffer(s.Data))),i.bytes===String?s.ChainID="":(s.ChainID=[],i.bytes!==Array&&(s.ChainID=X.newBuffer(s.ChainID))),s.Version=0,i.bytes===String?s.Signature="":(s.Signature=[],i.bytes!==Array&&(s.Signature=X.newBuffer(s.Signature))),s.Options=0,i.bytes===String?s.GuardAddr="":(s.GuardAddr=[],i.bytes!==Array&&(s.GuardAddr=X.newBuffer(s.GuardAddr))),i.bytes===String?s.GuardSignature="":(s.GuardSignature=[],i.bytes!==Array&&(s.GuardSignature=X.newBuffer(s.GuardSignature)))}return n.Nonce!=null&&n.hasOwnProperty("Nonce")&&(typeof n.Nonce=="number"?s.Nonce=i.longs===String?String(n.Nonce):n.Nonce:s.Nonce=i.longs===String?X.Long.prototype.toString.call(n.Nonce):i.longs===Number?new X.LongBits(n.Nonce.low>>>0,n.Nonce.high>>>0).toNumber(!0):n.Nonce),n.Value!=null&&n.hasOwnProperty("Value")&&(s.Value=i.bytes===String?X.base64.encode(n.Value,0,n.Value.length):i.bytes===Array?Array.prototype.slice.call(n.Value):n.Value),n.RcvAddr!=null&&n.hasOwnProperty("RcvAddr")&&(s.RcvAddr=i.bytes===String?X.base64.encode(n.RcvAddr,0,n.RcvAddr.length):i.bytes===Array?Array.prototype.slice.call(n.RcvAddr):n.RcvAddr),n.RcvUserName!=null&&n.hasOwnProperty("RcvUserName")&&(s.RcvUserName=i.bytes===String?X.base64.encode(n.RcvUserName,0,n.RcvUserName.length):i.bytes===Array?Array.prototype.slice.call(n.RcvUserName):n.RcvUserName),n.SndAddr!=null&&n.hasOwnProperty("SndAddr")&&(s.SndAddr=i.bytes===String?X.base64.encode(n.SndAddr,0,n.SndAddr.length):i.bytes===Array?Array.prototype.slice.call(n.SndAddr):n.SndAddr),n.SndUserName!=null&&n.hasOwnProperty("SndUserName")&&(s.SndUserName=i.bytes===String?X.base64.encode(n.SndUserName,0,n.SndUserName.length):i.bytes===Array?Array.prototype.slice.call(n.SndUserName):n.SndUserName),n.GasPrice!=null&&n.hasOwnProperty("GasPrice")&&(typeof n.GasPrice=="number"?s.GasPrice=i.longs===String?String(n.GasPrice):n.GasPrice:s.GasPrice=i.longs===String?X.Long.prototype.toString.call(n.GasPrice):i.longs===Number?new X.LongBits(n.GasPrice.low>>>0,n.GasPrice.high>>>0).toNumber(!0):n.GasPrice),n.GasLimit!=null&&n.hasOwnProperty("GasLimit")&&(typeof n.GasLimit=="number"?s.GasLimit=i.longs===String?String(n.GasLimit):n.GasLimit:s.GasLimit=i.longs===String?X.Long.prototype.toString.call(n.GasLimit):i.longs===Number?new X.LongBits(n.GasLimit.low>>>0,n.GasLimit.high>>>0).toNumber(!0):n.GasLimit),n.Data!=null&&n.hasOwnProperty("Data")&&(s.Data=i.bytes===String?X.base64.encode(n.Data,0,n.Data.length):i.bytes===Array?Array.prototype.slice.call(n.Data):n.Data),n.ChainID!=null&&n.hasOwnProperty("ChainID")&&(s.ChainID=i.bytes===String?X.base64.encode(n.ChainID,0,n.ChainID.length):i.bytes===Array?Array.prototype.slice.call(n.ChainID):n.ChainID),n.Version!=null&&n.hasOwnProperty("Version")&&(s.Version=n.Version),n.Signature!=null&&n.hasOwnProperty("Signature")&&(s.Signature=i.bytes===String?X.base64.encode(n.Signature,0,n.Signature.length):i.bytes===Array?Array.prototype.slice.call(n.Signature):n.Signature),n.Options!=null&&n.hasOwnProperty("Options")&&(s.Options=n.Options),n.GuardAddr!=null&&n.hasOwnProperty("GuardAddr")&&(s.GuardAddr=i.bytes===String?X.base64.encode(n.GuardAddr,0,n.GuardAddr.length):i.bytes===Array?Array.prototype.slice.call(n.GuardAddr):n.GuardAddr),n.GuardSignature!=null&&n.hasOwnProperty("GuardSignature")&&(s.GuardSignature=i.bytes===String?X.base64.encode(n.GuardSignature,0,n.GuardSignature.length):i.bytes===Array?Array.prototype.slice.call(n.GuardSignature):n.GuardSignature),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Xo.util.toJSONOptions)},e}(),t}();Tx.exports=Ec});var xx=E(Rr=>{"use strict";l();var IH=Rr&&Rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_H=Rr&&Rr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SH=Rr&&Rr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IH(e,t,r);return _H(e,t),e},TH=Rr&&Rr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ProtoSerializer=void 0;var CH=TH(kt()),Hw=ht(),xH=Ss(),NH=SH(Be()),OH=dc(),Gw=class{serializeTransaction(e){let r=Cx().proto,n=new Hw.Address(e.getReceiver().bech32()).pubkey(),i=new Hw.Address(e.getSender().bech32()).pubkey(),s=new r.Transaction({Nonce:e.getNonce().valueOf()?e.getNonce().valueOf():void 0,Value:this.serializeTransactionValue(e.getValue()),RcvAddr:n,RcvUserName:e.getReceiverUsername()?d.Buffer.from(e.getReceiverUsername()).toString("base64"):void 0,SndAddr:i,SndUserName:e.getSenderUsername()?d.Buffer.from(e.getSenderUsername()).toString("base64"):void 0,GasPrice:e.getGasPrice().valueOf(),GasLimit:e.getGasLimit().valueOf(),Data:e.getData().length()==0?null:e.getData().valueOf(),ChainID:d.Buffer.from(e.getChainID().valueOf()),Version:e.getVersion().valueOf(),Signature:e.getSignature()});if(e.getOptions().valueOf()!==xH.TRANSACTION_OPTIONS_DEFAULT&&(s.Options=e.getOptions().valueOf()),e.isGuardedTransaction()){let u=e.getGuardian();s.GuardAddr=new Hw.Address(u.bech32()).pubkey(),s.GuardSignature=e.getGuardianSignature()}let o=r.Transaction.encode(s).finish();return d.Buffer.from(o)}serializeTransactionValue(e){let r=new CH.default(e.toString());if(r.isZero())return d.Buffer.from([0,0]);let n=OH.bigIntToBuffer(r);return n=d.Buffer.concat([d.Buffer.from([0]),n]),n}deserializeTransaction(e){throw new NH.ErrUnsupportedOperation("deserializeTransaction")}};Rr.ProtoSerializer=Gw});var Nx=E(Rs=>{"use strict";l();var DH=Rs&&Rs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PH=Rs&&Rs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&DH(e,t,r)};Object.defineProperty(Rs,"__esModule",{value:!0});PH(xx(),Rs)});var vc=E(Br=>{"use strict";l();var RH=Br&&Br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BH=Br&&Br.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LH=Br&&Br.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RH(e,t,r);return BH(e,t),e};Object.defineProperty(Br,"__esModule",{value:!0});Br.interpretSignatureAsBuffer=Br.Signature=void 0;var Ox=LH(Be()),Dx=64,kw=class t{constructor(e){if(this.valueHex="",!!e){if(typeof e=="string")return t.fromHex(e);if(e instanceof d.Buffer)return t.fromBuffer(e)}}static empty(){return new t}static fromHex(e){if(e.startsWith("0x")&&(e=e.slice(2)),!t.isValidHex(e))throw new Ox.ErrSignatureCannotCreate(e);return t.fromValidHex(e)}static isValidHex(e){return d.Buffer.from(e,"hex").length==Dx}static fromValidHex(e){let r=new t;return r.valueHex=e,r}static fromBuffer(e){if(e.length!=Dx)throw new Ox.ErrSignatureCannotCreate(e);return t.fromValidHex(e.toString("hex"))}hex(){return this.valueHex}};Br.Signature=kw;function FH(t){if(ArrayBuffer.isView(t))return d.Buffer.from(t);if(t.hex!=null)return d.Buffer.from(t.hex(),"hex");throw new Error(`Object cannot be interpreted as a signature: ${t}`)}Br.interpretSignatureAsBuffer=FH});var zn=E(Xh=>{"use strict";l();Object.defineProperty(Xh,"__esModule",{value:!0});Xh.TransactionPayload=void 0;var jw=class t{constructor(e){this.data=d.Buffer.from(e||[])}static fromEncoded(e){if(!e)return new t("");let r=d.Buffer.from(e,"base64").toString();return new t(r)}isEmpty(){return this.data.length==0}encoded(){return this.data.toString("base64")}valueOf(){return this.data}toString(){return this.data.toString()}getEncodedArguments(){return this.toString().split("@")}getRawArguments(){return this.getEncodedArguments().map(e=>d.Buffer.from(e,"hex"))}length(){return d.Buffer.from(this.data).length}};Xh.TransactionPayload=jw});var Qw=E((Sue,Px)=>{l();$n.notEqual=UH;$n.notOk=qH;$n.equal=MH;$n.ok=$n;Px.exports=$n;function MH(t,e,r){$n(t==e,r)}function UH(t,e,r){$n(t!=e,r)}function qH(t,e){$n(!t,e)}function $n(t,e){if(!t)throw new Error(e||"AssertionError")}});var Ls=E(ra=>{"use strict";l();var Ww=P0(),ea=B0(),Rx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ra.Buffer=z;ra.SlowBuffer=QH;ra.INSPECT_MAX_BYTES=50;var Zh=2147483647;ra.kMaxLength=Zh;z.TYPED_ARRAY_SUPPORT=VH();!z.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function VH(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(z.prototype,"parent",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.buffer}});Object.defineProperty(z.prototype,"offset",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.byteOffset}});function Kn(t){if(t>Zh)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,z.prototype),e}function z(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Yw(t)}return Mx(t,e,r)}z.poolSize=8192;function Mx(t,e,r){if(typeof t=="string")return GH(t,e);if(ArrayBuffer.isView(t))return kH(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(En(t,ArrayBuffer)||t&&En(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(En(t,SharedArrayBuffer)||t&&En(t.buffer,SharedArrayBuffer)))return $w(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return z.from(n,e,r);let i=jH(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return z.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}z.from=function(t,e,r){return Mx(t,e,r)};Object.setPrototypeOf(z.prototype,Uint8Array.prototype);Object.setPrototypeOf(z,Uint8Array);function Ux(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function HH(t,e,r){return Ux(t),t<=0?Kn(t):e!==void 0?typeof r=="string"?Kn(t).fill(e,r):Kn(t).fill(e):Kn(t)}z.alloc=function(t,e,r){return HH(t,e,r)};function Yw(t){return Ux(t),Kn(t<0?0:Jw(t)|0)}z.allocUnsafe=function(t){return Yw(t)};z.allocUnsafeSlow=function(t){return Yw(t)};function GH(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!z.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=qx(t,e)|0,n=Kn(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function zw(t){let e=t.length<0?0:Jw(t.length)|0,r=Kn(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function kH(t){if(En(t,Uint8Array)){let e=new Uint8Array(t);return $w(e.buffer,e.byteOffset,e.byteLength)}return zw(t)}function $w(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,z.prototype),n}function jH(t){if(z.isBuffer(t)){let e=Jw(t.length)|0,r=Kn(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Zw(t.length)?Kn(0):zw(t);if(t.type==="Buffer"&&Array.isArray(t.data))return zw(t.data)}function Jw(t){if(t>=Zh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zh.toString(16)+" bytes");return t|0}function QH(t){return+t!=t&&(t=0),z.alloc(+t)}z.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==z.prototype};z.compare=function(e,r){if(En(e,Uint8Array)&&(e=z.from(e,e.offset,e.byteLength)),En(r,Uint8Array)&&(r=z.from(r,r.offset,r.byteLength)),!z.isBuffer(e)||!z.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};z.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};z.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return z.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=z.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(En(o,Uint8Array))s+o.length>i.length?(z.isBuffer(o)||(o=z.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(z.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function qx(t,e){if(z.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||En(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Kw(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return $x(t).length;default:if(i)return n?-1:Kw(t).length;e=(""+e).toLowerCase(),i=!0}}z.byteLength=qx;function WH(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return rG(this,e,r);case"utf8":case"utf-8":return Hx(this,e,r);case"ascii":return eG(this,e,r);case"latin1":case"binary":return tG(this,e,r);case"base64":return XH(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nG(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}z.prototype._isBuffer=!0;function Bs(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}z.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Bs(this,r,r+1);return this};z.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Bs(this,r,r+3),Bs(this,r+1,r+2);return this};z.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Bs(this,r,r+7),Bs(this,r+1,r+6),Bs(this,r+2,r+5),Bs(this,r+3,r+4);return this};z.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Hx(this,0,e):WH.apply(this,arguments)};z.prototype.toLocaleString=z.prototype.toString;z.prototype.equals=function(e){if(!z.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:z.compare(this,e)===0};z.prototype.inspect=function(){let e="",r=ra.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Rx&&(z.prototype[Rx]=z.prototype.inspect);z.prototype.compare=function(e,r,n,i,s){if(En(e,Uint8Array)&&(e=z.from(e,e.offset,e.byteLength)),!z.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,u=Math.min(o,a),c=this.slice(i,s),f=e.slice(r,n);for(let h=0;h<u;++h)if(c[h]!==f[h]){o=c[h],a=f[h];break}return o<a?-1:a<o?1:0};function Vx(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Zw(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=z.from(e,n)),z.isBuffer(e))return e.length===0?-1:Bx(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Bx(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Bx(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(f,h){return s===1?f[h]:f.readUInt16BE(h*s)}let c;if(i){let f=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===a)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let f=!0;for(let h=0;h<a;h++)if(u(t,c+h)!==u(e,h)){f=!1;break}if(f)return c}return-1}z.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};z.prototype.indexOf=function(e,r,n){return Vx(this,e,r,n,!0)};z.prototype.lastIndexOf=function(e,r,n){return Vx(this,e,r,n,!1)};function zH(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Zw(a))return o;t[r+o]=a}return o}function $H(t,e,r,n){return ed(Kw(e,t.length-r),t,r,n)}function KH(t,e,r,n){return ed(aG(e),t,r,n)}function YH(t,e,r,n){return ed($x(e),t,r,n)}function JH(t,e,r,n){return ed(uG(e,t.length-r),t,r,n)}z.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return zH(this,e,r,n);case"utf8":case"utf-8":return $H(this,e,r,n);case"ascii":case"latin1":case"binary":return KH(this,e,r,n);case"base64":return YH(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return JH(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function XH(t,e,r){return e===0&&r===t.length?Ww.fromByteArray(t):Ww.fromByteArray(t.slice(e,r))}function Hx(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let u,c,f,h;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)===128&&(h=(s&31)<<6|u&63,h>127&&(o=h));break;case 3:u=t[i+1],c=t[i+2],(u&192)===128&&(c&192)===128&&(h=(s&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],(u&192)===128&&(c&192)===128&&(f&192)===128&&(h=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return ZH(n)}var Lx=4096;function ZH(t){let e=t.length;if(e<=Lx)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Lx));return r}function eG(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function tG(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function rG(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=cG[t[s]];return i}function nG(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}z.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,z.prototype),i};function Mt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}z.prototype.readUintLE=z.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Mt(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};z.prototype.readUintBE=z.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Mt(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};z.prototype.readUint8=z.prototype.readUInt8=function(e,r){return e=e>>>0,r||Mt(e,1,this.length),this[e]};z.prototype.readUint16LE=z.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Mt(e,2,this.length),this[e]|this[e+1]<<8};z.prototype.readUint16BE=z.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Mt(e,2,this.length),this[e]<<8|this[e+1]};z.prototype.readUint32LE=z.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};z.prototype.readUint32BE=z.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};z.prototype.readBigUInt64LE=Ci(function(e){e=e>>>0,ta(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ac(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});z.prototype.readBigUInt64BE=Ci(function(e){e=e>>>0,ta(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ac(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});z.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Mt(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};z.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Mt(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};z.prototype.readInt8=function(e,r){return e=e>>>0,r||Mt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};z.prototype.readInt16LE=function(e,r){e=e>>>0,r||Mt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};z.prototype.readInt16BE=function(e,r){e=e>>>0,r||Mt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};z.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};z.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};z.prototype.readBigInt64LE=Ci(function(e){e=e>>>0,ta(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ac(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});z.prototype.readBigInt64BE=Ci(function(e){e=e>>>0,ta(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ac(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});z.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),ea.read(this,e,!0,23,4)};z.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Mt(e,4,this.length),ea.read(this,e,!1,23,4)};z.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Mt(e,8,this.length),ea.read(this,e,!0,52,8)};z.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Mt(e,8,this.length),ea.read(this,e,!1,52,8)};function dr(t,e,r,n,i,s){if(!z.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}z.prototype.writeUintLE=z.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;dr(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};z.prototype.writeUintBE=z.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;dr(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};z.prototype.writeUint8=z.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,1,255,0),this[r]=e&255,r+1};z.prototype.writeUint16LE=z.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};z.prototype.writeUint16BE=z.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};z.prototype.writeUint32LE=z.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};z.prototype.writeUint32BE=z.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Gx(t,e,r,n,i){zx(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function kx(t,e,r,n,i){zx(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}z.prototype.writeBigUInt64LE=Ci(function(e,r=0){return Gx(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});z.prototype.writeBigUInt64BE=Ci(function(e,r=0){return kx(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});z.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);dr(this,e,r,n,u-1,-u)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};z.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);dr(this,e,r,n,u-1,-u)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};z.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};z.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};z.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};z.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};z.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||dr(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};z.prototype.writeBigInt64LE=Ci(function(e,r=0){return Gx(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});z.prototype.writeBigInt64BE=Ci(function(e,r=0){return kx(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function jx(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Qx(t,e,r,n,i){return e=+e,r=r>>>0,i||jx(t,e,r,4,34028234663852886e22,-34028234663852886e22),ea.write(t,e,r,n,23,4),r+4}z.prototype.writeFloatLE=function(e,r,n){return Qx(this,e,r,!0,n)};z.prototype.writeFloatBE=function(e,r,n){return Qx(this,e,r,!1,n)};function Wx(t,e,r,n,i){return e=+e,r=r>>>0,i||jx(t,e,r,8,17976931348623157e292,-17976931348623157e292),ea.write(t,e,r,n,52,8),r+8}z.prototype.writeDoubleLE=function(e,r,n){return Wx(this,e,r,!0,n)};z.prototype.writeDoubleBE=function(e,r,n){return Wx(this,e,r,!1,n)};z.prototype.copy=function(e,r,n,i){if(!z.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};z.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!z.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=z.isBuffer(e)?e:z.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Zo={};function Xw(t,e,r){Zo[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Xw("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Xw("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Xw("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Fx(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Fx(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Fx(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function iG(t,e,r){ta(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ac(e,t.length-(r+1))}function zx(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Zo.ERR_OUT_OF_RANGE("value",a,t)}iG(n,i,s)}function ta(t,e){if(typeof t!="number")throw new Zo.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ac(t,e,r){throw Math.floor(t)!==t?(ta(t,r),new Zo.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Zo.ERR_BUFFER_OUT_OF_BOUNDS:new Zo.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var sG=/[^+/0-9A-Za-z-_]/g;function oG(t){if(t=t.split("=")[0],t=t.trim().replace(sG,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Kw(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function aG(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function uG(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function $x(t){return Ww.toByteArray(oG(t))}function ed(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function En(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Zw(t){return t!==t}var cG=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Ci(t){return typeof BigInt>"u"?lG:t}function lG(){throw new Error("BigInt not supported")}});var Yx=E((Oue,Kx)=>{l();Kx.exports=eE;eE.supported=typeof WebAssembly<"u";function eE(t){if(!eE.supported)return null;var e=t&&t.imports,r=fG("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMK00AElgMAIABCADcDACAAQQhqQgA3AwAgAEEQakIANwMAIABBGGpCADcDACAAQSBqQgA3AwAgAEEoakIANwMAIABBMGpCADcDACAAQThqQgA3AwAgAEHAAGpCADcDACAAQcgAakIANwMAIABB0ABqQgA3AwAgAEHYAGpCADcDACAAQeAAakIANwMAIABB6ABqQgA3AwAgAEHwAGpCADcDACAAQfgAakIANwMAIABBgAFqQoiS853/zPmE6gBBACkDAIU3AwAgAEGIAWpCu86qptjQ67O7f0EIKQMAhTcDACAAQZABakKr8NP0r+68tzxBECkDAIU3AwAgAEGYAWpC8e30+KWn/aelf0EYKQMAhTcDACAAQaABakLRhZrv+s+Uh9EAQSApAwCFNwMAIABBqAFqQp/Y+dnCkdqCm39BKCkDAIU3AwAgAEGwAWpC6/qG2r+19sEfQTApAwCFNwMAIABBuAFqQvnC+JuRo7Pw2wBBOCkDAIU3AwAgAEHAAWpCADcDACAAQcgBakIANwMAIABB0AFqQgA3AwALbQEDfyAAQcABaiEDIABByAFqIQQgBCkDAKchBQJAA0AgASACRg0BIAVBgAFGBEAgAyADKQMAIAWtfDcDAEEAIQUgABADCyAAIAVqIAEtAAA6AAAgBUEBaiEFIAFBAWohAQwACwsgBCAFrTcDAAtkAQN/IABBwAFqIQEgAEHIAWohAiABIAEpAwAgAikDAHw3AwAgAEHQAWpCfzcDACACKQMApyEDAkADQCADQYABRg0BIAAgA2pBADoAACADQQFqIQMMAAsLIAIgA603AwAgABADC+U7AiB+CX8gAEGAAWohISAAQYgBaiEiIABBkAFqISMgAEGYAWohJCAAQaABaiElIABBqAFqISYgAEGwAWohJyAAQbgBaiEoICEpAwAhASAiKQMAIQIgIykDACEDICQpAwAhBCAlKQMAIQUgJikDACEGICcpAwAhByAoKQMAIQhCiJLznf/M+YTqACEJQrvOqqbY0Ouzu38hCkKr8NP0r+68tzwhC0Lx7fT4paf9p6V/IQxC0YWa7/rPlIfRACENQp/Y+dnCkdqCm38hDkLr+obav7X2wR8hD0L5wvibkaOz8NsAIRAgACkDACERIABBCGopAwAhEiAAQRBqKQMAIRMgAEEYaikDACEUIABBIGopAwAhFSAAQShqKQMAIRYgAEEwaikDACEXIABBOGopAwAhGCAAQcAAaikDACEZIABByABqKQMAIRogAEHQAGopAwAhGyAAQdgAaikDACEcIABB4ABqKQMAIR0gAEHoAGopAwAhHiAAQfAAaikDACEfIABB+ABqKQMAISAgDSAAQcABaikDAIUhDSAPIABB0AFqKQMAhSEPIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBx8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAZfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgHXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBF8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAWfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgE3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIICB8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAefHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgG3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB98fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAUfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgF3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBh8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCASfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBV8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAYfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgGnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBR8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiASfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB18fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAcfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggH3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBN8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAXfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgFnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBt8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAVfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggEXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFICB8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAZfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgGnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBF8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAWfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBN8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAVfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggG3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIICB8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAffHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBx8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAdfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggF3x8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBl8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAUfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgHnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBN8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAdfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgF3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBt8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByARfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBl8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAUfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgFXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB58fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAYfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFnx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIICB8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAffHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgEnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBp8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAdfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgFnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBJ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAgfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgH3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB58fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAVfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggG3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBF8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAYfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgF3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBR8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAafHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggE3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBl8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAcfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBx8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAYfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgH3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIB18fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByASfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggFHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBp8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAWfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHICB8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAVfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBd8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSATfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgG3x8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBd8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAgfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgH3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBp8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAcfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBF8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAZfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgHXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBN8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAefHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgGHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBJ8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAVfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgG3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBZ8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAbfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgE3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBl8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAVfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGHx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBd8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCASfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggFnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGICB8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAcfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgGnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB98fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAUfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB58fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSARfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgEXx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBJ8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiATfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgFHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBV8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAWfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggF3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBh8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAZfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgGnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBt8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAcfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB58fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAffHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgIHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB98fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAbfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBl8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAafHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgIHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIB58fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAXfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEnx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB18fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByARfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgE3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBx8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAYfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgFnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBR8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFICEgISkDACABIAmFhTcDACAiICIpAwAgAiAKhYU3AwAgIyAjKQMAIAMgC4WFNwMAICQgJCkDACAEIAyFhTcDACAlICUpAwAgBSANhYU3AwAgJiAmKQMAIAYgDoWFNwMAICcgJykDACAHIA+FhTcDACAoICgpAwAgCCAQhYU3AwAL"),n=null,i={buffer:r,memory:null,exports:null,realloc:s,onload:o};return o(function(){}),i;function s(u){i.exports.memory.grow(Math.ceil(Math.abs(u-i.memory.length)/65536)),i.memory=new Uint8Array(i.exports.memory.buffer)}function o(u){if(i.exports)return u();if(n){n.then(u.bind(null,null)).catch(u);return}try{if(t&&t.async)throw new Error("async");a({instance:new WebAssembly.Instance(new WebAssembly.Module(r),e)})}catch{n=WebAssembly.instantiate(r,e).then(a)}o(u)}function a(u){i.exports=u.instance.exports,i.memory=i.exports.memory&&i.exports.memory.buffer&&new Uint8Array(i.exports.memory.buffer)}}function fG(t){return typeof atob=="function"?new Uint8Array(atob(t).split("").map(hG)):new(Ls()).Buffer(t,"base64")}function hG(t){return t.charCodeAt(0)}});var nN=E((Bue,An)=>{l();var vn=Qw(),Ke=Yx()(),Yn=64,td=[];An.exports=Lr;var Jx=An.exports.BYTES_MIN=16,Xx=An.exports.BYTES_MAX=64,Pue=An.exports.BYTES=32,Zx=An.exports.KEYBYTES_MIN=16,eN=An.exports.KEYBYTES_MAX=64,Rue=An.exports.KEYBYTES=32,tN=An.exports.SALTBYTES=16,rN=An.exports.PERSONALBYTES=16;function Lr(t,e,r,n,i){if(!(this instanceof Lr))return new Lr(t,e,r,n,i);if(!(Ke&&Ke.exports))throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),i!==!0&&(vn(t>=Jx,"digestLength must be at least "+Jx+", was given "+t),vn(t<=Xx,"digestLength must be at most "+Xx+", was given "+t),e!=null&&vn(e.length>=Zx,"key must be at least "+Zx+", was given "+e.length),e!=null&&vn(e.length<=eN,"key must be at least "+eN+", was given "+e.length),r!=null&&vn(r.length===tN,"salt must be exactly "+tN+", was given "+r.length),n!=null&&vn(n.length===rN,"personal must be exactly "+rN+", was given "+n.length)),td.length||(td.push(Yn),Yn+=216),this.digestLength=t,this.finalized=!1,this.pointer=td.pop(),Ke.memory.fill(0,0,64),Ke.memory[0]=this.digestLength,Ke.memory[1]=e?e.length:0,Ke.memory[2]=1,Ke.memory[3]=1,r&&Ke.memory.set(r,32),n&&Ke.memory.set(n,48),this.pointer+216>Ke.memory.length&&Ke.realloc(this.pointer+216),Ke.exports.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),Ke.memory.fill(0,Yn,Yn+e.length),Ke.memory[this.pointer+200]=128)}Lr.prototype.update=function(t){return vn(this.finalized===!1,"Hash instance finalized"),vn(t,"input must be TypedArray or Buffer"),Yn+t.length>Ke.memory.length&&Ke.realloc(Yn+t.length),Ke.memory.set(t,Yn),Ke.exports.blake2b_update(this.pointer,Yn,Yn+t.length),this};Lr.prototype.digest=function(t){if(vn(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,td.push(this.pointer),Ke.exports.blake2b_final(this.pointer),!t||t==="binary")return Ke.memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(t==="hex")return pG(Ke.memory,this.pointer+128,this.digestLength);vn(t.length>=this.digestLength,"input must be TypedArray or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=Ke.memory[this.pointer+128+e];return t};Lr.prototype.final=Lr.prototype.digest;Lr.WASM=Ke&&Ke.buffer;Lr.SUPPORTED=typeof WebAssembly<"u";Lr.ready=function(t){if(t||(t=dG),!Ke)return t(new Error("WebAssembly not supported"));var e=new Promise(function(r,n){Ke.onload(function(i){i?n():r(),t(i)})});return e};Lr.prototype.ready=Lr.ready;function dG(){}function pG(t,e,r){for(var n="",i=0;i<r;i++)n+=gG(t[e+i]);return n}function gG(t){return t<16?"0"+t.toString(16):t.toString(16)}});var yN=E((Uue,pr)=>{l();var Oi=Qw(),Ic=nN();function rd(t,e,r){var n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function iN(t,e,r,n){var i=t[e]+r;r<0&&(i+=4294967296);var s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function fN(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function xi(t,e,r,n,i,s){var o=bc[i],a=bc[i+1],u=bc[s],c=bc[s+1];rd(Ce,t,e),iN(Ce,t,o,a);var f=Ce[n]^Ce[t],h=Ce[n+1]^Ce[t+1];Ce[n]=h,Ce[n+1]=f,rd(Ce,r,n),f=Ce[e]^Ce[r],h=Ce[e+1]^Ce[r+1],Ce[e]=f>>>24^h<<8,Ce[e+1]=h>>>24^f<<8,rd(Ce,t,e),iN(Ce,t,u,c),f=Ce[n]^Ce[t],h=Ce[n+1]^Ce[t+1],Ce[n]=f>>>16^h<<16,Ce[n+1]=h>>>16^f<<16,rd(Ce,r,n),f=Ce[e]^Ce[r],h=Ce[e+1]^Ce[r+1],Ce[e]=h>>>31^f<<1,Ce[e+1]=f>>>31^h<<1}var hN=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),yG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Yt=new Uint8Array(yG.map(function(t){return t*2})),Ce=new Uint32Array(32),bc=new Uint32Array(32);function dN(t,e){var r=0;for(r=0;r<16;r++)Ce[r]=t.h[r],Ce[r+16]=hN[r];for(Ce[24]=Ce[24]^t.t,Ce[25]=Ce[25]^t.t/4294967296,e&&(Ce[28]=~Ce[28],Ce[29]=~Ce[29]),r=0;r<32;r++)bc[r]=fN(t.b,4*r);for(r=0;r<12;r++)xi(0,8,16,24,Yt[r*16+0],Yt[r*16+1]),xi(2,10,18,26,Yt[r*16+2],Yt[r*16+3]),xi(4,12,20,28,Yt[r*16+4],Yt[r*16+5]),xi(6,14,22,30,Yt[r*16+6],Yt[r*16+7]),xi(0,10,20,30,Yt[r*16+8],Yt[r*16+9]),xi(2,12,22,24,Yt[r*16+10],Yt[r*16+11]),xi(4,14,16,26,Yt[r*16+12],Yt[r*16+13]),xi(6,8,18,28,Yt[r*16+14],Yt[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Ce[r]^Ce[r+16]}var Ni=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function na(t,e,r,n){Ni.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,Ni[0]=t,e&&(Ni[1]=e.length),Ni[2]=1,Ni[3]=1,r&&Ni.set(r,32),n&&Ni.set(n,48);for(var i=0;i<16;i++)this.h[i]=hN[i]^fN(Ni,i*4);e&&(pN(this,e),this.c=128)}na.prototype.update=function(t){return Oi(t!=null,"input must be Uint8Array or Buffer"),pN(this,t),this};na.prototype.digest=function(t){var e=!t||t==="binary"||t==="hex"?new Uint8Array(this.outlen):t;return Oi(e.length>=this.outlen,"out must have at least outlen bytes of space"),mG(this,e),t==="hex"?wG(e):e};na.prototype.final=na.prototype.digest;na.ready=function(t){Ic.ready(function(){t()})};function pN(t,e){for(var r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,dN(t,!1),t.c=0),t.b[t.c++]=e[r]}function mG(t,e){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;dN(t,!0);for(var r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function wG(t){for(var e="",r=0;r<t.length;r++)e+=EG(t[r]);return e}function EG(t){return t<16?"0"+t.toString(16):t.toString(16)}var gN=na;pr.exports=function(e,r,n,i,s){return s!==!0&&(Oi(e>=sN,"outlen must be at least "+sN+", was given "+e),Oi(e<=oN,"outlen must be at most "+oN+", was given "+e),r!=null&&Oi(r.length>=aN,"key must be at least "+aN+", was given "+r.length),r!=null&&Oi(r.length<=uN,"key must be at most "+uN+", was given "+r.length),n!=null&&Oi(n.length===cN,"salt must be exactly "+cN+", was given "+n.length),i!=null&&Oi(i.length===lN,"personal must be exactly "+lN+", was given "+i.length)),new gN(e,r,n,i)};pr.exports.ready=function(t){Ic.ready(function(){t()})};pr.exports.WASM_SUPPORTED=Ic.SUPPORTED;pr.exports.WASM_LOADED=!1;var sN=pr.exports.BYTES_MIN=16,oN=pr.exports.BYTES_MAX=64,Fue=pr.exports.BYTES=32,aN=pr.exports.KEYBYTES_MIN=16,uN=pr.exports.KEYBYTES_MAX=64,Mue=pr.exports.KEYBYTES=32,cN=pr.exports.SALTBYTES=16,lN=pr.exports.PERSONALBYTES=16;Ic.ready(function(t){t||(pr.exports.WASM_LOADED=!0,gN=Ic)})});var bn=E(Fr=>{"use strict";l();var vG=Fr&&Fr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AG=Fr&&Fr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bG=Fr&&Fr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vG(e,t,r);return AG(e,t),e};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.TransactionHash=Fr.Transaction=void 0;var ia=kt(),_c=ht(),IG=Wh(),_G=Ss(),SG=bG(Be()),TG=CC(),Jn=gc(),CG=Nx(),nd=vc(),mN=zn(),xG=vr(),NG=yN(),OG=32,tE=class t{constructor({nonce:e,value:r,sender:n,receiver:i,senderUsername:s,receiverUsername:o,gasPrice:a,gasLimit:u,data:c,chainID:f,version:h,options:g,guardian:y}){this.nonce=e||0,this.value=r?new ia.BigNumber(r.toString()).toFixed(0):0,this.sender=n,this.receiver=i,this.senderUsername=s||"",this.receiverUsername=o||"",this.gasPrice=a||_G.TRANSACTION_MIN_GAS_PRICE,this.gasLimit=u,this.data=c||new mN.TransactionPayload,this.chainID=f,this.version=h?new Jn.TransactionVersion(h.valueOf()):Jn.TransactionVersion.withDefaultVersion(),this.options=g?new Jn.TransactionOptions(g.valueOf()):Jn.TransactionOptions.withDefaultOptions(),this.guardian=y||_c.Address.empty(),this.signature=d.Buffer.from([]),this.guardianSignature=d.Buffer.from([]),this.hash=sa.empty()}getNonce(){return this.nonce}setNonce(e){this.nonce=e}getValue(){return this.value}setValue(e){this.value=e}getSender(){return this.sender}setSender(e){this.sender=e}getReceiver(){return this.receiver}getSenderUsername(){return this.senderUsername}setSenderUsername(e){this.senderUsername=e}getReceiverUsername(){return this.receiverUsername}setReceiverUsername(e){this.receiverUsername=e}getGuardian(){return this.guardian}getGasPrice(){return this.gasPrice}setGasPrice(e){this.gasPrice=e}getGasLimit(){return this.gasLimit}setGasLimit(e){this.gasLimit=e}getData(){return this.data}getChainID(){return this.chainID}setChainID(e){this.chainID=e}getVersion(){return this.version}setVersion(e){this.version=new Jn.TransactionVersion(e.valueOf())}getOptions(){return new Jn.TransactionOptions(this.options.valueOf())}setOptions(e){this.options=new Jn.TransactionOptions(e.valueOf())}getSignature(){return this.signature}getGuardianSignature(){return this.guardianSignature}setGuardian(e){this.guardian=e}getHash(){return xG.guardNotEmpty(this.hash,"hash"),this.hash}serializeForSigning(){let e=this.toPlainObject();e.signature&&delete e.signature,e.guardianSignature&&delete e.guardianSignature,e.guardian||delete e.guardian;let r=JSON.stringify(e);return d.Buffer.from(r)}isGuardedTransaction(){let e=this.guardian.bech32().length>0,r=this.guardianSignature.length>0;return this.getOptions().isWithGuardian()&&e&&r}toPlainObject(){var e;let r={nonce:this.nonce.valueOf(),value:this.value.toString(),receiver:this.receiver.bech32(),sender:this.sender.bech32(),senderUsername:this.senderUsername?d.Buffer.from(this.senderUsername).toString("base64"):void 0,receiverUsername:this.receiverUsername?d.Buffer.from(this.receiverUsername).toString("base64"):void 0,gasPrice:this.gasPrice.valueOf(),gasLimit:this.gasLimit.valueOf(),data:this.data.length()==0?void 0:this.data.encoded(),chainID:this.chainID.valueOf(),version:this.getVersion().valueOf(),options:this.getOptions().valueOf()==0?void 0:this.getOptions().valueOf(),guardian:!((e=this.guardian)===null||e===void 0)&&e.bech32()?this.guardian.bech32()==""?void 0:this.guardian.bech32():void 0,signature:this.signature.toString("hex")?this.signature.toString("hex"):void 0,guardianSignature:this.guardianSignature.toString("hex")?this.guardianSignature.toString("hex"):void 0};return IG.Compatibility.guardAddressIsSetAndNonZero(new _c.Address(r.sender),"'sender' of transaction","pass the actual sender to the Transaction constructor"),r}static fromPlainObject(e){let r=new t({nonce:Number(e.nonce),value:new ia.BigNumber(e.value).toFixed(0),receiver:_c.Address.fromString(e.receiver),receiverUsername:e.receiverUsername?d.Buffer.from(e.receiverUsername,"base64").toString():void 0,sender:_c.Address.fromString(e.sender),senderUsername:e.senderUsername?d.Buffer.from(e.senderUsername,"base64").toString():void 0,guardian:e.guardian?_c.Address.fromString(e.guardian):void 0,gasPrice:Number(e.gasPrice),gasLimit:Number(e.gasLimit),data:new mN.TransactionPayload(d.Buffer.from(e.data||"","base64")),chainID:String(e.chainID),version:new Jn.TransactionVersion(e.version),options:e.options!=null?new Jn.TransactionOptions(e.options):void 0});return e.signature&&r.applySignature(new nd.Signature(e.signature)),e.guardianSignature&&r.applyGuardianSignature(new nd.Signature(e.guardianSignature)),r}applySignature(e){this.signature=nd.interpretSignatureAsBuffer(e),this.hash=sa.compute(this)}applyGuardianSignature(e){this.guardianSignature=nd.interpretSignatureAsBuffer(e),this.hash=sa.compute(this)}toSendable(){return this.toPlainObject()}computeFee(e){let r=e.MinGasLimit.valueOf()+this.data.length()*e.GasPerDataByte.valueOf();if(r>this.gasLimit.valueOf())throw new SG.ErrNotEnoughGas(this.gasLimit.valueOf());let n=new ia.BigNumber(this.gasPrice.valueOf()),i=new ia.BigNumber(r).multipliedBy(n);if(r===this.gasLimit.valueOf())return i;let s=new ia.BigNumber(this.gasLimit.valueOf()-r),o=n.multipliedBy(new ia.BigNumber(e.GasPriceModifier.valueOf())),a=s.multipliedBy(o);return i.plus(a)}};Fr.Transaction=tE;var sa=class t extends TG.Hash{constructor(e){super(e)}static compute(e){let n=new CG.ProtoSerializer().serializeTransaction(e),i=NG(OG).update(n).digest("hex");return new t(i)}};Fr.TransactionHash=sa});var sE=E(sd=>{"use strict";l();Object.defineProperty(sd,"__esModule",{value:!0});sd.TransferTransactionsFactory=void 0;var rE=Yo(),Kr=St(),id=bn(),nE=zn(),iE=class{constructor(e){this.gasEstimator=e}createEGLDTransfer(e){var r;let n=((r=e.data)===null||r===void 0?void 0:r.length())||0,i=this.gasEstimator.forEGLDTransfer(n);return new id.Transaction({nonce:e.nonce,value:e.value,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||i,data:e.data,chainID:e.chainID})}createESDTTransfer(e){let{argumentsString:r}=new rE.ArgSerializer().valuesToString([Kr.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new Kr.BigUIntValue(e.tokenTransfer.valueOf())]),n=`ESDTTransfer@${r}`,i=new nE.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTTransfer(s);return new id.Transaction({nonce:e.nonce,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createESDTNFTTransfer(e){let{argumentsString:r}=new rE.ArgSerializer().valuesToString([Kr.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new Kr.U64Value(e.tokenTransfer.nonce),new Kr.BigUIntValue(e.tokenTransfer.valueOf()),new Kr.AddressValue(e.destination)]),n=`ESDTNFTTransfer@${r}`,i=new nE.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTNFTTransfer(s);return new id.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createMultiESDTNFTTransfer(e){let r=[new Kr.AddressValue(e.destination),new Kr.U16Value(e.tokenTransfers.length)];for(let u of e.tokenTransfers)r.push(Kr.BytesValue.fromUTF8(u.tokenIdentifier),new Kr.U64Value(u.nonce),new Kr.BigUIntValue(u.valueOf()));let{argumentsString:n}=new rE.ArgSerializer().valuesToString(r),i=`MultiESDTNFTTransfer@${n}`,s=new nE.TransactionPayload(i),o=s.length()||0,a=this.gasEstimator.forMultiESDTNFTTransfer(o,e.tokenTransfers.length);return new id.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||a,data:s,chainID:e.chainID})}};sd.TransferTransactionsFactory=iE});var aE=E(Fs=>{"use strict";l();Object.defineProperty(Fs,"__esModule",{value:!0});Fs.GasEstimator=Fs.DefaultGasConfiguration=void 0;Fs.DefaultGasConfiguration={minGasLimit:5e4,gasPerDataByte:1500,gasCostESDTTransfer:2e5,gasCostESDTNFTTransfer:2e5,gasCostESDTNFTMultiTransfer:2e5};var DG=1e5,wN=8e5,oE=class{constructor(e){this.gasConfiguration=e||Fs.DefaultGasConfiguration}forEGLDTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasPerDataByte*e}forESDTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTTransfer+this.gasConfiguration.gasPerDataByte*e+DG}forESDTNFTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTNFTTransfer+this.gasConfiguration.gasPerDataByte*e+wN}forMultiESDTNFTTransfer(e,r){return this.gasConfiguration.minGasLimit+(this.gasConfiguration.gasCostESDTNFTMultiTransfer+wN)*r+this.gasConfiguration.gasPerDataByte*e}};Fs.GasEstimator=oE});var oa=E(od=>{"use strict";l();Object.defineProperty(od,"__esModule",{value:!0});od.Account=void 0;var PG=ht(),uE=class{constructor(e){this.address=new PG.Address,this.nonce=0,this.balance="0",this.address=e}update(e){this.nonce=e.nonce,this.balance=e.balance}incrementNonce(){this.nonce=this.nonce.valueOf()+1}getNonceThenIncrement(){let e=this.nonce;return this.nonce=this.nonce.valueOf()+1,e}toJSON(){return{address:this.address.bech32(),nonce:this.nonce.valueOf(),balance:this.balance.toString()}}};od.Account=uE});var aa=E(Us=>{"use strict";l();Object.defineProperty(Us,"__esModule",{value:!0});Us.Logger=Us.LogLevel=void 0;var Ms;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.None=5]="None"})(Ms=Us.LogLevel||(Us.LogLevel={}));var ad=class t{static setLevel(e){t.logLevel=e}static trace(e,...r){t.logLevel>=Ms.Debug||console.debug(e,r)}static debug(e,...r){t.logLevel>=Ms.Debug||console.debug(e,r)}static info(e,...r){t.logLevel>=Ms.Info||console.log(e,r)}static warn(e,...r){t.logLevel>=Ms.Warn||console.warn(e,r)}static error(e,...r){t.logLevel>=Ms.Error||console.error(e,r)}};Us.Logger=ad;ad.logLevel=Ms.Debug});var fE=E(In=>{"use strict";l();var RG=In&&In.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BG=In&&In.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LG=In&&In.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RG(e,t,r);return BG(e,t),e};Object.defineProperty(In,"__esModule",{value:!0});In.AsyncTimer=void 0;var FG=LG(Be()),MG=Be(),cE=aa(),lE=class{constructor(e){this.timeoutHandle=null,this.rejectionFunc=null,this.name=e,this.correlationTag=0}start(e){if(this.timeoutHandle)throw new FG.ErrAsyncTimerAlreadyRunning;return this.correlationTag++,cE.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].start()`),new Promise((r,n)=>{this.rejectionFunc=n;let i=()=>{this.rejectionFunc=null,this.stop(),r()};this.timeoutHandle=setTimeout(i,e)})}abort(){cE.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].abort()`),this.rejectionFunc&&(this.rejectionFunc(new MG.ErrAsyncTimerAborted),this.rejectionFunc=null),this.stop()}stop(){this.isStopped()||(cE.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].stop()`),this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null))}isStopped(){return!this.timeoutHandle}};In.AsyncTimer=lE});var ud=E(ua=>{"use strict";l();var Mr=ua&&ua.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(ua,"__esModule",{value:!0});ua.TransactionWatcher=void 0;var hE=fE(),Di=Be(),EN=aa(),Pi=class t{constructor(e,r={}){this.fetcher=new dE(e),this.pollingIntervalMilliseconds=r.pollingIntervalMilliseconds||t.DefaultPollingInterval,this.timeoutMilliseconds=r.timeoutMilliseconds||t.DefaultTimeout,this.patienceMilliseconds=r.patienceMilliseconds||t.DefaultPatience}awaitPending(e){return Mr(this,void 0,void 0,function*(){let r=s=>s.status.isPending(),n=()=>Mr(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Di.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitCompleted(e){return Mr(this,void 0,void 0,function*(){let r=s=>{if(s.isCompleted===void 0)throw new Di.ErrIsCompletedFieldIsMissingOnTransaction;return s.isCompleted},n=()=>Mr(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Di.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitAllEvents(e,r){return Mr(this,void 0,void 0,function*(){let n=o=>{let a=this.getAllTransactionEvents(o).map(c=>c.identifier);return r.every(c=>a.includes(c))},i=()=>Mr(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),s=()=>new Di.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)})}awaitAnyEvent(e,r){return Mr(this,void 0,void 0,function*(){let n=o=>{let a=this.getAllTransactionEvents(o).map(c=>c.identifier);return r.find(c=>a.includes(c))!=null},i=()=>Mr(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),s=()=>new Di.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)})}awaitOnCondition(e,r){return Mr(this,void 0,void 0,function*(){let n=()=>Mr(this,void 0,void 0,function*(){return yield this.fetcher.getTransaction(e.getHash().hex())}),i=()=>new Di.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)})}awaitConditionally(e,r,n){return Mr(this,void 0,void 0,function*(){let i=new hE.AsyncTimer("watcher:periodic"),s=new hE.AsyncTimer("watcher:patience"),o=new hE.AsyncTimer("watcher:timeout"),a=!1,u,c=!1;for(o.start(this.timeoutMilliseconds).finally(()=>{o.stop(),a=!0});!a;){yield i.start(this.pollingIntervalMilliseconds);try{if(u=yield r(),c=e(u),c||a)break}catch(f){if(EN.Logger.debug("TransactionWatcher.awaitConditionally(): cannot (yet) fetch data."),f instanceof Di.ErrIsCompletedFieldIsMissingOnTransaction||!(f instanceof Di.Err))throw f}}if(c&&(yield s.start(this.patienceMilliseconds)),o.isStopped()||o.stop(),!u||!c)throw n();return u})}getAllTransactionEvents(e){let r=[...e.logs.events];for(let n of e.contractResults.items)r.push(...n.logs.events);return r}};ua.TransactionWatcher=Pi;Pi.DefaultPollingInterval=6e3;Pi.DefaultTimeout=Pi.DefaultPollingInterval*15;Pi.DefaultPatience=0;Pi.NoopOnStatusReceived=t=>{};var dE=class{constructor(e){this.fetcher=e}getTransaction(e){return Mr(this,void 0,void 0,function*(){return EN.Logger.debug(`transactionWatcher, getTransaction(${e})`),yield this.fetcher.getTransaction(e)})}}});var gE=E(fd=>{"use strict";l();Object.defineProperty(fd,"__esModule",{value:!0});fd.CodeMetadata=void 0;var pE=class{constructor(e=!0,r=!1,n=!1,i=!1){this.upgradeable=e,this.readable=r,this.payable=n,this.payableBySc=i}toggleUpgradeable(e){this.upgradeable=e}toggleReadable(e){this.readable=e}togglePayable(e){this.payable=e}togglePayableBySc(e){this.payableBySc=e}toBuffer(){let e=0,r=0;return this.upgradeable&&(e|=cd.Upgradeable),this.readable&&(e|=cd.Readable),this.payable&&(r|=ld.Payable),this.payableBySc&&(r|=ld.PayableBySc),d.Buffer.from([e,r])}toString(){return this.toBuffer().toString("hex")}toJSON(){return{upgradeable:this.upgradeable,readable:this.readable,payable:this.payable,payableBySc:this.payableBySc}}equals(e){return this.upgradeable==e.upgradeable&&this.readable==e.readable&&this.payable==e.payable&&this.payableBySc==e.payableBySc}};fd.CodeMetadata=pE;var cd;(function(t){t[t.Upgradeable=1]="Upgradeable",t[t.Reserved2=2]="Reserved2",t[t.Readable=4]="Readable"})(cd||(cd={}));var ld;(function(t){t[t.Reserved1=1]="Reserved1",t[t.Payable=2]="Payable",t[t.PayableBySc=4]="PayableBySc"})(ld||(ld={}))});var Sc=E(_n=>{"use strict";l();var UG=_n&&_n.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qG=_n&&_n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VG=_n&&_n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UG(e,t,r);return qG(e,t),e};Object.defineProperty(_n,"__esModule",{value:!0});_n.ContractFunction=void 0;var HG=VG(Be()),yE=class t{constructor(e){if(this.name=e,e==null)throw new HG.ErrInvalidFunctionName}static none(){return new t("untitled")}toString(){return this.name}valueOf(){return this.name}};_n.ContractFunction=yE});var EE=E(Ur=>{"use strict";l();var GG=Ur&&Ur.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kG=Ur&&Ur.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jG=Ur&&Ur.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GG(e,t,r);return kG(e,t),e},QG=Ur&&Ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.InteractionChecker=void 0;var mE=jG(Be()),WG=QG(kt()),wE=class{checkInteraction(e,r){this.checkPayable(e,r),this.checkArguments(e,r)}checkPayable(e,r){let n=!new WG.default(e.getValue().toString()).isZero(),i=r.modifiers.isPayableInEGLD();if(n&&!i)throw new mE.ErrContractInteraction("cannot send EGLD value to non-payable")}checkArguments(e,r){let n=r.input,i=e.getArguments(),s=n.length,o=i.length;if(s!=o)throw new mE.ErrContractInteraction(`bad arguments, expected: ${s}, got: ${o}`);for(let a=0;a<s;a++){let u=n[a].type,f=i[a].getType();if(!u.isAssignableFrom(f))throw new mE.ErrContractInteraction(`type mismatch at index ${a}, expected: ${u}, got: ${f}`)}}};Ur.InteractionChecker=wE});var Tc=E(hd=>{"use strict";l();Object.defineProperty(hd,"__esModule",{value:!0});hd.Query=void 0;var zG=ht(),$G=Yo(),vE=class{constructor(e){this.caller=e.caller||new zG.Address,this.address=e.address,this.func=e.func,this.args=e.args||[],this.value=e.value||0}getEncodedArguments(){return new $G.ArgSerializer().valuesToStrings(this.args)}};hd.Query=vE});var _E=E(dd=>{"use strict";l();Object.defineProperty(dd,"__esModule",{value:!0});dd.Interaction=void 0;var vN=ht(),KG=Wh(),AE=Ss(),bE=Sc(),YG=EE(),JG=Tc(),ca=St(),IE=class{constructor(e,r,n){this.nonce=0,this.value="0",this.gasLimit=0,this.gasPrice=void 0,this.chainID="",this.querent=new vN.Address,this.sender=new vN.Address,this.isWithSingleESDTTransfer=!1,this.isWithSingleESDTNFTTransfer=!1,this.isWithMultiESDTNFTTransfer=!1,this.contract=e,this.function=r,this.args=n,this.tokenTransfers=new la([],this)}getContractAddress(){return this.contract.getAddress()}getFunction(){return this.function}getEndpoint(){return this.contract.getEndpoint(this.function)}getArguments(){return this.args}getValue(){return this.value}getTokenTransfers(){return this.tokenTransfers.getTransfers()}getGasLimit(){return this.gasLimit}getExplicitReceiver(){return this.explicitReceiver}buildTransaction(){KG.Compatibility.guardAddressIsSetAndNonZero(this.sender,"'sender' of interaction","use interaction.withSender()");let e=this.explicitReceiver||this.contract.getAddress(),r=this.function,n=this.args;this.isWithSingleESDTTransfer?(r=new bE.ContractFunction(AE.ESDT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForSingleESDTTransfer()):this.isWithSingleESDTNFTTransfer?(e=this.sender,r=new bE.ContractFunction(AE.ESDTNFT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForSingleESDTNFTTransfer()):this.isWithMultiESDTNFTTransfer&&(e=this.sender,r=new bE.ContractFunction(AE.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME),n=this.tokenTransfers.buildArgsForMultiESDTNFTTransfer());let i=this.contract.call({func:r,gasLimit:this.gasLimit,gasPrice:this.gasPrice,args:n,value:this.value,receiver:e,chainID:this.chainID,caller:this.sender});return i.setNonce(this.nonce),i}buildQuery(){return new JG.Query({address:this.contract.getAddress(),func:this.function,args:this.args,value:this.value,caller:this.querent})}withValue(e){return this.value=e,this}withSingleESDTTransfer(e){return this.isWithSingleESDTTransfer=!0,this.tokenTransfers=new la([e],this),this}withSingleESDTNFTTransfer(e,r){return this.isWithSingleESDTNFTTransfer=!0,this.tokenTransfers=new la([e],this),r&&(this.sender=r),this}withMultiESDTNFTTransfer(e,r){return this.isWithMultiESDTNFTTransfer=!0,this.tokenTransfers=new la(e,this),r&&(this.sender=r),this}withGasLimit(e){return this.gasLimit=e,this}withGasPrice(e){return this.gasPrice=e,this}withNonce(e){return this.nonce=e,this}useThenIncrementNonceOf(e){return this.withNonce(e.getNonceThenIncrement())}withChainID(e){return this.chainID=e,this}withSender(e){return this.sender=e,this}withQuerent(e){return this.querent=e,this}withExplicitReceiver(e){return this.explicitReceiver=e,this}check(){return new YG.InteractionChecker().checkInteraction(this,this.getEndpoint()),this}};dd.Interaction=IE;var la=class{constructor(e,r){this.transfers=e,this.interaction=r}getTransfers(){return this.transfers}buildArgsForSingleESDTTransfer(){let e=this.transfers[0];return[this.getTypedTokenIdentifier(e),this.getTypedTokenQuantity(e),this.getTypedInteractionFunction(),...this.getInteractionArguments()]}buildArgsForSingleESDTNFTTransfer(){let e=this.transfers[0];return[this.getTypedTokenIdentifier(e),this.getTypedTokenNonce(e),this.getTypedTokenQuantity(e),this.getTypedTokensReceiver(),this.getTypedInteractionFunction(),...this.getInteractionArguments()]}buildArgsForMultiESDTNFTTransfer(){let e=[];e.push(this.getTypedTokensReceiver()),e.push(this.getTypedNumberOfTransfers());for(let r of this.transfers)e.push(this.getTypedTokenIdentifier(r)),e.push(this.getTypedTokenNonce(r)),e.push(this.getTypedTokenQuantity(r));return e.push(this.getTypedInteractionFunction()),e.push(...this.getInteractionArguments()),e}getTypedNumberOfTransfers(){return new ca.U8Value(this.transfers.length)}getTypedTokenIdentifier(e){return ca.BytesValue.fromUTF8(e.tokenIdentifier)}getTypedTokenNonce(e){return new ca.U64Value(e.nonce)}getTypedTokenQuantity(e){return new ca.BigUIntValue(e.amountAsBigInteger)}getTypedTokensReceiver(){return new ca.AddressValue(this.interaction.getContractAddress())}getTypedInteractionFunction(){return ca.BytesValue.fromUTF8(this.interaction.getFunction().valueOf())}getInteractionArguments(){return this.interaction.getArguments()}}});var AN=E(pd=>{"use strict";l();Object.defineProperty(pd,"__esModule",{value:!0});pd.ArgumentErrorContext=void 0;var XG=Be(),SE=class{constructor(e,r,n){this.endpointName=e,this.argumentIndex=r,this.parameterDefinition=n}throwError(e){throw new XG.ErrInvalidArgument(`Error when converting arguments for endpoint (endpoint name: ${this.endpointName}, argument index: ${this.argumentIndex}, name: ${this.parameterDefinition.name}, type: ${this.parameterDefinition.type})
Nested error: ${e}`)}convertError(e,r){this.throwError(`Can't convert argument (argument: ${e}, type ${typeof e}), wanted type: ${r})`)}unhandledType(e,r){this.throwError(`Unhandled type (function: ${e}, type: ${r})`)}guardSameLength(e,r){e=e||[],e.length!=r.length&&this.throwError(`Incorrect composite type length: have ${e.length}, expected ${r.length} (argument: ${e})`)}guardHasField(e,r){e=e||{},r in e||this.throwError(`Struct argument does not contain a field named "${r}" (argument: ${JSON.stringify(e)})`)}};pd.ArgumentErrorContext=SE});var CE=E(qs=>{"use strict";l();var ZG=qs&&qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});qs.NativeSerializer=void 0;var ek=ZG(kt()),tk=ht(),TE=Be(),rk=bh(),nk=AN(),ve=St(),ik;(function(t){function e(A,_){A=A||[],r(A,_),n(_)&&(A=i(A,_));let N=_.input,I=[];for(let S=0;S<N.length;S++){let R=N[S],J=new nk.ArgumentErrorContext(_.name,S,R),Q=o(A[S],R.type,J);I.push(Q)}return I}t.nativeToTypedValues=e;function r(A,_){let{min:N,max:I}=s(_.input);if(!(N<=A.length&&A.length<=I))throw new TE.ErrInvalidArgument(`Wrong number of arguments for endpoint ${_.name}: expected between ${N} and ${I} arguments, have ${A.length}`)}function n(A){let _=A.input[A.input.length-1];return _?.type instanceof ve.VariadicType&&!_.type.isCounted}function i(A,_){let N=_.input.length-1,I=A[N];if(I?.belongsToTypesystem){if(!I.hasClassOrSuperclass(ve.VariadicValue.ClassName))throw new TE.ErrInvalidArgument(`Wrong argument type for endpoint ${_.name}: typed value provided; expected variadic type, have ${I.getClassName()}`)}else A[N]=A.slice(N);return A}function s(A){let _=[...A].reverse(),N=A.length,I=A.length,S=!1;_.length>0&&_[0].type.getCardinality().isComposite()&&(I=1/0,S=!0);for(let R of _){if(R.type.getCardinality().isSingular())break;N-=1}return{min:N,max:I,variadic:S}}function o(A,_,N){if(A&&A.belongsToTypesystem)return A;if(_ instanceof ve.OptionType)return a(A,_,N);if(_ instanceof ve.OptionalType)return u(A,_,N);if(_ instanceof ve.VariadicType)return c(A,_,N);if(_ instanceof ve.CompositeType)return h(A,_,N);if(_ instanceof ve.TupleType)return g(A,_,N);if(_ instanceof ve.StructType)return y(A,_,N);if(_ instanceof ve.ListType)return f(A,_,N);if(_ instanceof ve.PrimitiveType)return m(A,_,N);if(_ instanceof ve.EnumType)return T(A,_,N);N.throwError(`convertToTypedValue: unhandled type ${_}`)}function a(A,_,N){if(A==null)return ve.OptionValue.newMissing();let I=o(A,_.getFirstTypeParameter(),N);return ve.OptionValue.newProvided(I)}function u(A,_,N){if(A==null)return new ve.OptionalValue(_);let I=o(A,_.getFirstTypeParameter(),N);return new ve.OptionalValue(_,I)}function c(A,_,N){if(_.isCounted)throw new TE.ErrInvalidArgument('Counted variadic arguments must be explicitly typed. E.g. use "VariadicValue.fromItemsCounted()" or "new VariadicValue()"');A==null&&(A=[]),A.map===void 0&&N.convertError(A,"Variadic");let I=A.map(function(S){return o(S,_.getFirstTypeParameter(),N)});return new ve.VariadicValue(_,I)}function f(A,_,N){A.map===void 0&&N.convertError(A,"List");let I=A.map(function(S){return o(S,_.getFirstTypeParameter(),N)});return new ve.List(_,I)}function h(A,_,N){let I=[],S=_.getTypeParameters();N.guardSameLength(A,S);for(let R=0;R<S.length;R++)I.push(o(A[R],S[R],N));return new ve.CompositeValue(_,I)}function g(A,_,N){let I=[],S=_.getFieldsDefinitions();N.guardSameLength(A,S);for(let R=0;R<S.length;R++)I.push(o(A[R],S[R].type,N));return ve.Tuple.fromItems(I)}function y(A,_,N){let I=[],S=_.getFieldsDefinitions();for(let R=0;R<S.length;R++){let J=S[R].name;N.guardHasField(A,J);let Q=A[J],V=o(Q,S[R].type,N);I.push(new ve.Field(V,J))}return new ve.Struct(_,I)}function m(A,_,N){if(_ instanceof ve.NumericalType){let I=new ek.default(A);return U(I,_,N)}if(_ instanceof ve.BytesType)return O(A,N);if(_ instanceof ve.AddressType)return new ve.AddressValue(W(A,N));if(_ instanceof ve.BooleanType)return new ve.BooleanValue(A);if(_ instanceof ve.TokenIdentifierType)return new ve.TokenIdentifierValue(B(A,N));N.throwError(`(function: toPrimitive) unsupported type ${_}`)}function T(A,_,N){if(typeof A=="number")return ve.EnumValue.fromDiscriminant(_,A);if(typeof A=="string")return ve.EnumValue.fromName(_,A);if(typeof A=="object"){N.guardHasField(A,"name");let I=_.getVariantByName(A.name);N.guardHasField(A,"fields");let S=A.fields,R=[],J=I.getFieldsDefinitions();for(let Q=0;Q<J.length;Q++){let V=J[Q].name;N.guardHasField(S,V);let k=S[V],K=o(k,J[Q].type,N);R.push(new ve.Field(K,V))}return new ve.EnumValue(_,I,R)}N.throwError(`(function: toEnumValue) unsupported native type ${typeof A}`)}function O(A,_){let N=A.valueOf();if(A===void 0&&_.convertError(A,"BytesValue"),A instanceof d.Buffer)return new ve.BytesValue(A);if(typeof A=="string")return ve.BytesValue.fromUTF8(A);if(N instanceof d.Buffer)return new ve.BytesValue(N);if(typeof N=="number")return ve.BytesValue.fromHex(rk.numberToPaddedHex(N));_.convertError(A,"BytesValue")}function B(A,_){if(A===void 0&&_.convertError(A,"Buffer"),A instanceof d.Buffer)return A.toString();if(typeof A=="string")return A;_.convertError(A,"Buffer")}function W(A,_){if(A.bech32)return A;if(A.getAddress)return A.getAddress();switch(A.constructor){case d.Buffer:case String:return new tk.Address(A);default:_.convertError(A,"Address")}}t.convertNativeToAddress=W;function U(A,_,N){switch(_.constructor){case ve.U8Type:return new ve.U8Value(A);case ve.I8Type:return new ve.I8Value(A);case ve.U16Type:return new ve.U16Value(A);case ve.I16Type:return new ve.I16Value(A);case ve.U32Type:return new ve.U32Value(A);case ve.I32Type:return new ve.I32Value(A);case ve.U64Type:return new ve.U64Value(A);case ve.I64Type:return new ve.I64Value(A);case ve.BigUIntType:return new ve.BigUIntValue(A);case ve.BigIntType:return new ve.BigIntValue(A);default:N.unhandledType("convertNumericalType",_)}}})(ik=qs.NativeSerializer||(qs.NativeSerializer={}))});var BE=E(Yr=>{"use strict";l();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ContractCallPayloadBuilder=Yr.ContractUpgradePayloadBuilder=Yr.ContractDeployPayloadBuilder=Yr.ArwenVirtualMachine=void 0;var DE=zn(),PE=vr(),sk=Yo();Yr.ArwenVirtualMachine="0500";var xE=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){PE.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`${e}@${Yr.ArwenVirtualMachine}@${r}`;return n=RE(n,this.arguments),new DE.TransactionPayload(n)}};Yr.ContractDeployPayloadBuilder=xE;var NE=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){PE.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`upgradeContract@${e}@${r}`;return n=RE(n,this.arguments),new DE.TransactionPayload(n)}};Yr.ContractUpgradePayloadBuilder=NE;var OE=class{constructor(){this.contractFunction=null,this.arguments=[]}setFunction(e){return this.contractFunction=e,this}addArg(e){return this.arguments.push(e),this}setArgs(e){return this.arguments=e,this}build(){PE.guardValueIsSet("calledFunction",this.contractFunction);let e=this.contractFunction.toString();return e=RE(e,this.arguments),new DE.TransactionPayload(e)}};Yr.ContractCallPayloadBuilder=OE;function RE(t,e){let{argumentsString:r,count:n}=new sk.ArgSerializer().valuesToString(e);return n==0?t:`${t}@${r}`}});var Xn=E((yce,LE)=>{"use strict";l();var fa=typeof Reflect=="object"?Reflect:null,bN=fa&&typeof fa.apply=="function"?fa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},gd;fa&&typeof fa.ownKeys=="function"?gd=fa.ownKeys:Object.getOwnPropertySymbols?gd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gd=function(e){return Object.getOwnPropertyNames(e)};function ok(t){console&&console.warn&&console.warn(t)}var _N=Number.isNaN||function(e){return e!==e};function ke(){ke.init.call(this)}LE.exports=ke;LE.exports.once=lk;ke.EventEmitter=ke;ke.prototype._events=void 0;ke.prototype._eventsCount=0;ke.prototype._maxListeners=void 0;var IN=10;function yd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ke,"defaultMaxListeners",{enumerable:!0,get:function(){return IN},set:function(t){if(typeof t!="number"||t<0||_N(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");IN=t}});ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_N(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function SN(t){return t._maxListeners===void 0?ke.defaultMaxListeners:t._maxListeners}ke.prototype.getMaxListeners=function(){return SN(this)};ke.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")bN(u,this,r);else for(var c=u.length,f=ON(u,c),n=0;n<c;++n)bN(f[n],this,r);return!0};function TN(t,e,r,n){var i,s,o;if(yd(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=SN(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ok(a)}return t}ke.prototype.addListener=function(e,r){return TN(this,e,r,!1)};ke.prototype.on=ke.prototype.addListener;ke.prototype.prependListener=function(e,r){return TN(this,e,r,!0)};function ak(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function CN(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=ak.bind(n);return i.listener=r,n.wrapFn=i,i}ke.prototype.once=function(e,r){return yd(r),this.on(e,CN(this,e,r)),this};ke.prototype.prependOnceListener=function(e,r){return yd(r),this.prependListener(e,CN(this,e,r)),this};ke.prototype.removeListener=function(e,r){var n,i,s,o,a;if(yd(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():uk(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ke.prototype.off=ke.prototype.removeListener;ke.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function xN(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?ck(i):ON(i,i.length)}ke.prototype.listeners=function(e){return xN(this,e,!0)};ke.prototype.rawListeners=function(e){return xN(this,e,!1)};ke.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):NN.call(t,e)};ke.prototype.listenerCount=NN;function NN(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ke.prototype.eventNames=function(){return this._eventsCount>0?gd(this._events):[]};function ON(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function uk(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ck(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function lk(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}DN(t,e,s,{once:!0}),e!=="error"&&fk(t,i,{once:!0})})}function fk(t,e,r){typeof t.on=="function"&&DN(t,"error",e,r)}function DN(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var FE=E((wce,PN)=>{l();PN.exports=Xn().EventEmitter});var ME=E(()=>{l()});var UN=E((Ice,MN)=>{"use strict";l();function RN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function BN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(r),!0).forEach(function(n){hk(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hk(t,e,r){return e=FN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FN(n.key),n)}}function pk(t,e,r){return e&&LN(t.prototype,e),r&&LN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function FN(t){var e=gk(t,"string");return typeof e=="symbol"?e:String(e)}function gk(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yk=Ls(),md=yk.Buffer,mk=ME(),UE=mk.inspect,wk=UE&&UE.custom||"inspect";function Ek(t,e,r){md.prototype.copy.call(t,e,r)}MN.exports=function(){function t(){dk(this,t),this.head=null,this.tail=null,this.length=0}return pk(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return md.alloc(0);for(var n=md.allocUnsafe(r>>>0),i=this.head,s=0;i;)Ek(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=md.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:wk,value:function(r,n){return UE(this,BN(BN({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var VE=E((Sce,VN)=>{"use strict";l();function vk(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.default.nextTick(qE,this,t)):p.default.nextTick(qE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?p.default.nextTick(wd,r):(r._writableState.errorEmitted=!0,p.default.nextTick(qN,r,s)):p.default.nextTick(qN,r,s):e?(p.default.nextTick(wd,r),e(s)):p.default.nextTick(wd,r)}),this)}function qN(t,e){qE(t,e),wd(t)}function wd(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Ak(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function qE(t,e){t.emit("error",e)}function bk(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}VN.exports={destroy:vk,undestroy:Ak,errorOrDestroy:bk}});var Vs=E((Cce,kN)=>{"use strict";l();function Ik(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var GN={};function qr(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){Ik(o,s);function o(a,u,c){return s.call(this,n(a,u,c))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,GN[t]=i}function HN(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function _k(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Sk(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Tk(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}qr("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);qr("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&_k(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Sk(t," argument"))i="The ".concat(t," ").concat(n," ").concat(HN(e,"type"));else{var s=Tk(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(HN(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);qr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");qr("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});qr("ERR_STREAM_PREMATURE_CLOSE","Premature close");qr("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});qr("ERR_MULTIPLE_CALLBACK","Callback called multiple times");qr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");qr("ERR_STREAM_WRITE_AFTER_END","write after end");qr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);qr("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);qr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");kN.exports.codes=GN});var HE=E((Nce,jN)=>{"use strict";l();var Ck=Vs().codes.ERR_INVALID_OPT_VALUE;function xk(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Nk(t,e,r,n){var i=xk(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new Ck(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}jN.exports={getHighWaterMark:Nk}});var ha=E((Dce,GE)=>{l();typeof Object.create=="function"?GE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:GE.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var WN=E((Rce,QN)=>{l();QN.exports=Ok;function Ok(t,e){if(kE("noDeprecation"))return t;var r=!1;function n(){if(!r){if(kE("throwDeprecation"))throw new Error(e);kE("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function kE(t){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var WE=E((Lce,XN)=>{"use strict";l();XN.exports=dt;function $N(t){var e=this;this.next=null,this.entry=null,this.finish=function(){nj(e,t)}}var da;dt.WritableState=xc;var Dk={deprecate:WN()},KN=FE(),vd=Ls().Buffer,Pk=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Rk(t){return vd.from(t)}function Bk(t){return vd.isBuffer(t)||t instanceof Pk}var QE=VE(),Lk=HE(),Fk=Lk.getHighWaterMark,Ri=Vs().codes,Mk=Ri.ERR_INVALID_ARG_TYPE,Uk=Ri.ERR_METHOD_NOT_IMPLEMENTED,qk=Ri.ERR_MULTIPLE_CALLBACK,Vk=Ri.ERR_STREAM_CANNOT_PIPE,Hk=Ri.ERR_STREAM_DESTROYED,Gk=Ri.ERR_STREAM_NULL_VALUES,kk=Ri.ERR_STREAM_WRITE_AFTER_END,jk=Ri.ERR_UNKNOWN_ENCODING,pa=QE.errorOrDestroy;ha()(dt,KN);function Qk(){}function xc(t,e,r){da=da||Hs(),t=t||{},typeof r!="boolean"&&(r=e instanceof da),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Fk(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Xk(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new $N(this)}xc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(xc.prototype,"buffer",{get:Dk.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Ed;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ed=Function.prototype[Symbol.hasInstance],Object.defineProperty(dt,Symbol.hasInstance,{value:function(e){return Ed.call(this,e)?!0:this!==dt?!1:e&&e._writableState instanceof xc}})):Ed=function(e){return e instanceof this};function dt(t){da=da||Hs();var e=this instanceof da;if(!e&&!Ed.call(dt,this))return new dt(t);this._writableState=new xc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),KN.call(this)}dt.prototype.pipe=function(){pa(this,new Vk)};function Wk(t,e){var r=new kk;pa(t,r),p.default.nextTick(e,r)}function zk(t,e,r,n){var i;return r===null?i=new Gk:typeof r!="string"&&!e.objectMode&&(i=new Mk("chunk",["string","Buffer"],r)),i?(pa(t,i),p.default.nextTick(n,i),!1):!0}dt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&Bk(t);return s&&!vd.isBuffer(t)&&(t=Rk(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Qk),n.ending?Wk(this,r):(s||zk(this,n,t,r))&&(n.pendingcb++,i=Kk(this,n,s,t,e,r)),i};dt.prototype.cork=function(){this._writableState.corked++};dt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&YN(this,t))};dt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new jk(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(dt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $k(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=vd.from(e,r)),e}Object.defineProperty(dt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Kk(t,e,r,n,i,s){if(!r){var o=$k(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else jE(t,e,!1,a,n,i,s);return u}function jE(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Hk("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Yk(t,e,r,n,i){--e.pendingcb,r?(p.default.nextTick(i,n),p.default.nextTick(Cc,t,e),t._writableState.errorEmitted=!0,pa(t,n)):(i(n),t._writableState.errorEmitted=!0,pa(t,n),Cc(t,e))}function Jk(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Xk(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new qk;if(Jk(r),e)Yk(t,r,n,e,i);else{var s=JN(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&YN(t,r),n?p.default.nextTick(zN,t,r,s,i):zN(t,r,s,i)}}function zN(t,e,r,n){r||Zk(t,e),e.pendingcb--,n(),Cc(t,e)}function Zk(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function YN(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,jE(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new $N(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback,h=e.objectMode?1:u.length;if(jE(t,e,!1,h,u,c,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}dt.prototype._write=function(t,e,r){r(new Uk("_write()"))};dt.prototype._writev=null;dt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||rj(this,n,r),this};Object.defineProperty(dt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function JN(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function ej(t,e){t._final(function(r){e.pendingcb--,r&&pa(t,r),e.prefinished=!0,t.emit("prefinish"),Cc(t,e)})}function tj(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,p.default.nextTick(ej,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Cc(t,e){var r=JN(e);if(r&&(tj(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function rj(t,e,r){e.ending=!0,Cc(t,e),r&&(e.finished?p.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function nj(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(dt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});dt.prototype.destroy=QE.destroy;dt.prototype._undestroy=QE.undestroy;dt.prototype._destroy=function(t,e){e(t)}});var Hs=E((Mce,eO)=>{"use strict";l();var ij=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};eO.exports=Sn;var ZN=KE(),$E=WE();ha()(Sn,ZN);for(zE=ij($E.prototype),Ad=0;Ad<zE.length;Ad++)bd=zE[Ad],Sn.prototype[bd]||(Sn.prototype[bd]=$E.prototype[bd]);var zE,bd,Ad;function Sn(t){if(!(this instanceof Sn))return new Sn(t);ZN.call(this,t),$E.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",sj)))}Object.defineProperty(Sn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Sn.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Sn.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function sj(){this._writableState.ended||p.default.nextTick(oj,this)}function oj(t){t.end()}Object.defineProperty(Sn.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var nO=E((YE,rO)=>{l();var Id=Ls(),Tn=Id.Buffer;function tO(t,e){for(var r in t)e[r]=t[r]}Tn.from&&Tn.alloc&&Tn.allocUnsafe&&Tn.allocUnsafeSlow?rO.exports=Id:(tO(Id,YE),YE.Buffer=Gs);function Gs(t,e,r){return Tn(t,e,r)}Gs.prototype=Object.create(Tn.prototype);tO(Tn,Gs);Gs.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Tn(t,e,r)};Gs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Tn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Gs.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Tn(t)};Gs.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Id.SlowBuffer(t)}});var ZE=E(sO=>{"use strict";l();var XE=nO().Buffer,iO=XE.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function aj(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function uj(t){var e=aj(t);if(typeof e!="string"&&(XE.isEncoding===iO||!iO(t)))throw new Error("Unknown encoding: "+t);return e||t}sO.StringDecoder=Nc;function Nc(t){this.encoding=uj(t);var e;switch(this.encoding){case"utf16le":this.text=pj,this.end=gj,e=4;break;case"utf8":this.fillLast=fj,e=4;break;case"base64":this.text=yj,this.end=mj,e=3;break;default:this.write=wj,this.end=Ej;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=XE.allocUnsafe(e)}Nc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Nc.prototype.end=dj;Nc.prototype.text=hj;Nc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function JE(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function cj(t,e,r){var n=e.length-1;if(n<r)return 0;var i=JE(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=JE(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=JE(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function lj(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function fj(t){var e=this.lastTotal-this.lastNeed,r=lj(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function hj(t,e){var r=cj(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function dj(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function pj(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function gj(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function yj(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function mj(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function wj(t){return t.toString(this.encoding)}function Ej(t){return t&&t.length?this.write(t):""}});var _d=E((Gce,uO)=>{"use strict";l();var oO=Vs().codes.ERR_STREAM_PREMATURE_CLOSE;function vj(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Aj(){}function bj(t){return t.setHeader&&typeof t.abort=="function"}function aO(t,e,r){if(typeof e=="function")return aO(t,null,e);e||(e={}),r=vj(r||Aj);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},f=function(m){r.call(t,m)},h=function(){var m;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(m=new oO),r.call(t,m);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(m=new oO),r.call(t,m)},g=function(){t.req.on("finish",a)};return bj(t)?(t.on("complete",a),t.on("abort",h),t.req?g():t.on("request",g)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",a),t.removeListener("abort",h),t.removeListener("request",g),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",f),t.removeListener("close",h)}}uO.exports=aO});var lO=E((jce,cO)=>{"use strict";l();var Sd;function Bi(t,e,r){return e=Ij(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ij(t){var e=_j(t,"string");return typeof e=="symbol"?e:String(e)}function _j(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sj=_d(),Li=Symbol("lastResolve"),ks=Symbol("lastReject"),Oc=Symbol("error"),Td=Symbol("ended"),js=Symbol("lastPromise"),ev=Symbol("handlePromise"),Qs=Symbol("stream");function Fi(t,e){return{value:t,done:e}}function Tj(t){var e=t[Li];if(e!==null){var r=t[Qs].read();r!==null&&(t[js]=null,t[Li]=null,t[ks]=null,e(Fi(r,!1)))}}function Cj(t){p.default.nextTick(Tj,t)}function xj(t,e){return function(r,n){t.then(function(){if(e[Td]){r(Fi(void 0,!0));return}e[ev](r,n)},n)}}var Nj=Object.getPrototypeOf(function(){}),Oj=Object.setPrototypeOf((Sd={get stream(){return this[Qs]},next:function(){var e=this,r=this[Oc];if(r!==null)return Promise.reject(r);if(this[Td])return Promise.resolve(Fi(void 0,!0));if(this[Qs].destroyed)return new Promise(function(o,a){p.default.nextTick(function(){e[Oc]?a(e[Oc]):o(Fi(void 0,!0))})});var n=this[js],i;if(n)i=new Promise(xj(n,this));else{var s=this[Qs].read();if(s!==null)return Promise.resolve(Fi(s,!1));i=new Promise(this[ev])}return this[js]=i,i}},Bi(Sd,Symbol.asyncIterator,function(){return this}),Bi(Sd,"return",function(){var e=this;return new Promise(function(r,n){e[Qs].destroy(null,function(i){if(i){n(i);return}r(Fi(void 0,!0))})})}),Sd),Nj),Dj=function(e){var r,n=Object.create(Oj,(r={},Bi(r,Qs,{value:e,writable:!0}),Bi(r,Li,{value:null,writable:!0}),Bi(r,ks,{value:null,writable:!0}),Bi(r,Oc,{value:null,writable:!0}),Bi(r,Td,{value:e._readableState.endEmitted,writable:!0}),Bi(r,ev,{value:function(s,o){var a=n[Qs].read();a?(n[js]=null,n[Li]=null,n[ks]=null,s(Fi(a,!1))):(n[Li]=s,n[ks]=o)},writable:!0}),r));return n[js]=null,Sj(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[ks];s!==null&&(n[js]=null,n[Li]=null,n[ks]=null,s(i)),n[Oc]=i;return}var o=n[Li];o!==null&&(n[js]=null,n[Li]=null,n[ks]=null,o(Fi(void 0,!0))),n[Td]=!0}),e.on("readable",Cj.bind(null,n)),n};cO.exports=Dj});var hO=E((Wce,fO)=>{l();fO.exports=function(){throw new Error("Readable.from is not available in the browser")}});var KE=E((Kce,bO)=>{"use strict";l();bO.exports=Me;var ga;Me.ReadableState=yO;var $ce=Xn().EventEmitter,gO=function(e,r){return e.listeners(r).length},Pc=FE(),Cd=Ls().Buffer,Pj=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Rj(t){return Cd.from(t)}function Bj(t){return Cd.isBuffer(t)||t instanceof Pj}var tv=ME(),xe;tv&&tv.debuglog?xe=tv.debuglog("stream"):xe=function(){};var Lj=UN(),uv=VE(),Fj=HE(),Mj=Fj.getHighWaterMark,xd=Vs().codes,Uj=xd.ERR_INVALID_ARG_TYPE,qj=xd.ERR_STREAM_PUSH_AFTER_EOF,Vj=xd.ERR_METHOD_NOT_IMPLEMENTED,Hj=xd.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ya,rv,nv;ha()(Me,Pc);var Dc=uv.errorOrDestroy,iv=["error","close","destroy","pause","resume"];function Gj(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function yO(t,e,r){ga=ga||Hs(),t=t||{},typeof r!="boolean"&&(r=e instanceof ga),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Mj(this,t,"readableHighWaterMark",r),this.buffer=new Lj,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ya||(ya=ZE().StringDecoder),this.decoder=new ya(t.encoding),this.encoding=t.encoding)}function Me(t){if(ga=ga||Hs(),!(this instanceof Me))return new Me(t);var e=this instanceof ga;this._readableState=new yO(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Pc.call(this)}Object.defineProperty(Me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Me.prototype.destroy=uv.destroy;Me.prototype._undestroy=uv.undestroy;Me.prototype._destroy=function(t,e){e(t)};Me.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Cd.from(t,e),e=""),n=!0),mO(this,t,e,!1,n)};Me.prototype.unshift=function(t){return mO(this,t,null,!0,!1)};function mO(t,e,r,n,i){xe("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,Qj(t,s);else{var o;if(i||(o=kj(s,e)),o)Dc(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Cd.prototype&&(e=Rj(e)),n)s.endEmitted?Dc(t,new Hj):sv(t,s,e,!0);else if(s.ended)Dc(t,new qj);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?sv(t,s,e,!1):av(t,s)):sv(t,s,e,!1)}else n||(s.reading=!1,av(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function sv(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Nd(t)),av(t,e)}function kj(t,e){var r;return!Bj(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Uj("chunk",["string","Buffer","Uint8Array"],e)),r}Me.prototype.isPaused=function(){return this._readableState.flowing===!1};Me.prototype.setEncoding=function(t){ya||(ya=ZE().StringDecoder);var e=new ya(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var dO=1073741824;function jj(t){return t>=dO?t=dO:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function pO(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=jj(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Me.prototype.read=function(t){xe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return xe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ov(this):Nd(this),null;if(t=pO(t,e),t===0&&e.ended)return e.length===0&&ov(this),null;var n=e.needReadable;xe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,xe("length less than watermark",n)),e.ended||e.reading?(n=!1,xe("reading or ended",n)):n&&(xe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=pO(r,e)));var i;return t>0?i=vO(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ov(this)),i!==null&&this.emit("data",i),i};function Qj(t,e){if(xe("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Nd(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,wO(t)))}}function Nd(t){var e=t._readableState;xe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(xe("emitReadable",e.flowing),e.emittedReadable=!0,p.default.nextTick(wO,t))}function wO(t){var e=t._readableState;xe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,cv(t)}function av(t,e){e.readingMore||(e.readingMore=!0,p.default.nextTick(Wj,t,e))}function Wj(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(xe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Me.prototype._read=function(t){Dc(this,new Vj("_read()"))};Me.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,xe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==p.default.stdout&&t!==p.default.stderr,s=i?a:T;n.endEmitted?p.default.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(O,B){xe("onunpipe"),O===r&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,f())}function a(){xe("onend"),t.end()}var u=zj(r);t.on("drain",u);var c=!1;function f(){xe("cleanup"),t.removeListener("close",y),t.removeListener("finish",m),t.removeListener("drain",u),t.removeListener("error",g),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",T),r.removeListener("data",h),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",h);function h(O){xe("ondata");var B=t.write(O);xe("dest.write",B),B===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&AO(n.pipes,t)!==-1)&&!c&&(xe("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function g(O){xe("onerror",O),T(),t.removeListener("error",g),gO(t,"error")===0&&Dc(t,O)}Gj(t,"error",g);function y(){t.removeListener("finish",m),T()}t.once("close",y);function m(){xe("onfinish"),t.removeListener("close",y),T()}t.once("finish",m);function T(){xe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(xe("pipe resume"),r.resume()),t};function zj(t){return function(){var r=t._readableState;xe("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&gO(t,"data")&&(r.flowing=!0,cv(t))}}Me.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=AO(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Me.prototype.on=function(t,e){var r=Pc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,xe("on readable",n.length,n.reading),n.length?Nd(this):n.reading||p.default.nextTick($j,this)),r};Me.prototype.addListener=Me.prototype.on;Me.prototype.removeListener=function(t,e){var r=Pc.prototype.removeListener.call(this,t,e);return t==="readable"&&p.default.nextTick(EO,this),r};Me.prototype.removeAllListeners=function(t){var e=Pc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&p.default.nextTick(EO,this),e};function EO(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function $j(t){xe("readable nexttick read 0"),t.read(0)}Me.prototype.resume=function(){var t=this._readableState;return t.flowing||(xe("resume"),t.flowing=!t.readableListening,Kj(this,t)),t.paused=!1,this};function Kj(t,e){e.resumeScheduled||(e.resumeScheduled=!0,p.default.nextTick(Yj,t,e))}function Yj(t,e){xe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),cv(t),e.flowing&&!e.reading&&t.read(0)}Me.prototype.pause=function(){return xe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(xe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function cv(t){var e=t._readableState;for(xe("flow",e.flowing);e.flowing&&t.read()!==null;);}Me.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(xe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(xe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<iv.length;s++)t.on(iv[s],this.emit.bind(this,iv[s]));return this._read=function(o){xe("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Me.prototype[Symbol.asyncIterator]=function(){return rv===void 0&&(rv=lO()),rv(this)});Object.defineProperty(Me.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Me.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Me.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Me._fromList=vO;Object.defineProperty(Me.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function vO(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function ov(t){var e=t._readableState;xe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,p.default.nextTick(Jj,e,t))}function Jj(t,e){if(xe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Me.from=function(t,e){return nv===void 0&&(nv=hO()),nv(Me,t,e)});function AO(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var lv=E((Jce,_O)=>{"use strict";l();_O.exports=Zn;var Od=Vs().codes,Xj=Od.ERR_METHOD_NOT_IMPLEMENTED,Zj=Od.ERR_MULTIPLE_CALLBACK,e7=Od.ERR_TRANSFORM_ALREADY_TRANSFORMING,t7=Od.ERR_TRANSFORM_WITH_LENGTH_0,Dd=Hs();ha()(Zn,Dd);function r7(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Zj);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Zn(t){if(!(this instanceof Zn))return new Zn(t);Dd.call(this,t),this._transformState={afterTransform:r7.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",n7)}function n7(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){IO(t,e,r)}):IO(this,null,null)}Zn.prototype.push=function(t,e){return this._transformState.needTransform=!1,Dd.prototype.push.call(this,t,e)};Zn.prototype._transform=function(t,e,r){r(new Xj("_transform()"))};Zn.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Zn.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Zn.prototype._destroy=function(t,e){Dd.prototype._destroy.call(this,t,function(r){e(r)})};function IO(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new t7;if(t._transformState.transforming)throw new e7;return t.push(null)}});var CO=E((Zce,TO)=>{"use strict";l();TO.exports=Rc;var SO=lv();ha()(Rc,SO);function Rc(t){if(!(this instanceof Rc))return new Rc(t);SO.call(this,t)}Rc.prototype._transform=function(t,e,r){r(null,t)}});var PO=E((tle,DO)=>{"use strict";l();var fv;function i7(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var OO=Vs().codes,s7=OO.ERR_MISSING_ARGS,o7=OO.ERR_STREAM_DESTROYED;function xO(t){if(t)throw t}function a7(t){return t.setHeader&&typeof t.abort=="function"}function u7(t,e,r,n){n=i7(n);var i=!1;t.on("close",function(){i=!0}),fv===void 0&&(fv=_d()),fv(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,a7(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new o7("pipe"))}}}function NO(t){t()}function c7(t,e){return t.pipe(e)}function l7(t){return!t.length||typeof t[t.length-1]!="function"?xO:t.pop()}function f7(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=l7(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s7("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return u7(o,u,c,function(f){i||(i=f),f&&s.forEach(NO),!u&&(s.forEach(NO),n(i))})});return e.reduce(c7)}DO.exports=f7});var hv=E((Vr,RO)=>{l();Vr=RO.exports=KE();Vr.Stream=Vr;Vr.Readable=Vr;Vr.Writable=WE();Vr.Duplex=Hs();Vr.Transform=lv();Vr.PassThrough=CO();Vr.finished=_d();Vr.pipeline=PO()});var FO=E((ile,LO)=>{l();var{Transform:h7}=hv();LO.exports=t=>class BO extends h7{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!d.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return d.Buffer.isBuffer(r)||(r=d.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new BO(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var qO=E((ole,UO)=>{l();var{Transform:d7}=hv();UO.exports=t=>class MO extends d7{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!d.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return d.Buffer.isBuffer(r)||(r=d.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new MO(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var HO=E((ule,VO)=>{l();var p7=FO(),g7=qO();VO.exports=function(t){let e=p7(t),r=g7(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var jO=E(kO=>{l();var GO=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];kO.p1600=function(t){for(let e=0;e<24;++e){let r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],c=t[7]^t[17]^t[27]^t[37]^t[47],f=t[8]^t[18]^t[28]^t[38]^t[48],h=t[9]^t[19]^t[29]^t[39]^t[49],g=f^(i<<1|s>>>31),y=h^(s<<1|i>>>31),m=t[0]^g,T=t[1]^y,O=t[10]^g,B=t[11]^y,W=t[20]^g,U=t[21]^y,A=t[30]^g,_=t[31]^y,N=t[40]^g,I=t[41]^y;g=r^(o<<1|a>>>31),y=n^(a<<1|o>>>31);let S=t[2]^g,R=t[3]^y,J=t[12]^g,Q=t[13]^y,V=t[22]^g,k=t[23]^y,K=t[32]^g,ge=t[33]^y,ue=t[42]^g,re=t[43]^y;g=i^(u<<1|c>>>31),y=s^(c<<1|u>>>31);let Y=t[4]^g,se=t[5]^y,te=t[14]^g,ie=t[15]^y,M=t[24]^g,le=t[25]^y,ae=t[34]^g,he=t[35]^y,oe=t[44]^g,ce=t[45]^y;g=o^(f<<1|h>>>31),y=a^(h<<1|f>>>31);let w=t[6]^g,v=t[7]^y,b=t[16]^g,P=t[17]^y,C=t[26]^g,D=t[27]^y,L=t[36]^g,x=t[37]^y,F=t[46]^g,H=t[47]^y;g=u^(r<<1|n>>>31),y=c^(n<<1|r>>>31);let q=t[8]^g,Z=t[9]^y,we=t[18]^g,Ae=t[19]^y,Re=t[28]^g,tt=t[29]^y,lt=t[38]^g,Oe=t[39]^y,Ue=t[48]^g,Ot=t[49]^y,gi=m,vs=T,As=B<<4|O>>>28,ar=O<<4|B>>>28,Gn=W<<3|U>>>29,$t=U<<3|W>>>29,Dt=_<<9|A>>>23,ze=A<<9|_>>>23,ky=N<<18|I>>>14,jy=I<<18|N>>>14,Qy=S<<1|R>>>31,Wy=R<<1|S>>>31,zy=Q<<12|J>>>20,$y=J<<12|Q>>>20,Ky=V<<10|k>>>22,Yy=k<<10|V>>>22,Jy=ge<<13|K>>>19,Xy=K<<13|ge>>>19,Zy=ue<<2|re>>>30,e0=re<<2|ue>>>30,t0=se<<30|Y>>>2,r0=Y<<30|se>>>2,n0=te<<6|ie>>>26,i0=ie<<6|te>>>26,s0=le<<11|M>>>21,o0=M<<11|le>>>21,a0=ae<<15|he>>>17,u0=he<<15|ae>>>17,c0=ce<<29|oe>>>3,l0=oe<<29|ce>>>3,f0=w<<28|v>>>4,h0=v<<28|w>>>4,d0=P<<23|b>>>9,p0=b<<23|P>>>9,g0=C<<25|D>>>7,y0=D<<25|C>>>7,m0=L<<21|x>>>11,w0=x<<21|L>>>11,E0=H<<24|F>>>8,v0=F<<24|H>>>8,A0=q<<27|Z>>>5,b0=Z<<27|q>>>5,I0=we<<20|Ae>>>12,_0=Ae<<20|we>>>12,S0=tt<<7|Re>>>25,T0=Re<<7|tt>>>25,C0=lt<<8|Oe>>>24,x0=Oe<<8|lt>>>24,N0=Ue<<14|Ot>>>18,O0=Ot<<14|Ue>>>18;t[0]=gi^~zy&s0,t[1]=vs^~$y&o0,t[10]=f0^~I0&Gn,t[11]=h0^~_0&$t,t[20]=Qy^~n0&g0,t[21]=Wy^~i0&y0,t[30]=A0^~As&Ky,t[31]=b0^~ar&Yy,t[40]=t0^~d0&S0,t[41]=r0^~p0&T0,t[2]=zy^~s0&m0,t[3]=$y^~o0&w0,t[12]=I0^~Gn&Jy,t[13]=_0^~$t&Xy,t[22]=n0^~g0&C0,t[23]=i0^~y0&x0,t[32]=As^~Ky&a0,t[33]=ar^~Yy&u0,t[42]=d0^~S0&Dt,t[43]=p0^~T0&ze,t[4]=s0^~m0&N0,t[5]=o0^~w0&O0,t[14]=Gn^~Jy&c0,t[15]=$t^~Xy&l0,t[24]=g0^~C0&ky,t[25]=y0^~x0&jy,t[34]=Ky^~a0&E0,t[35]=Yy^~u0&v0,t[44]=S0^~Dt&Zy,t[45]=T0^~ze&e0,t[6]=m0^~N0&gi,t[7]=w0^~O0&vs,t[16]=Jy^~c0&f0,t[17]=Xy^~l0&h0,t[26]=C0^~ky&Qy,t[27]=x0^~jy&Wy,t[36]=a0^~E0&A0,t[37]=u0^~v0&b0,t[46]=Dt^~Zy&t0,t[47]=ze^~e0&r0,t[8]=N0^~gi&zy,t[9]=O0^~vs&$y,t[18]=c0^~f0&I0,t[19]=l0^~h0&_0,t[28]=ky^~Qy&n0,t[29]=jy^~Wy&i0,t[38]=E0^~A0&As,t[39]=v0^~b0&ar,t[48]=Zy^~t0&d0,t[49]=e0^~r0&p0,t[0]^=GO[e*2],t[1]^=GO[e*2+1]}}});var WO=E((hle,QO)=>{l();var Pd=jO();function ma(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}ma.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};ma.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Pd.p1600(this.state),this.count=0)};ma.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&Pd.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Pd.p1600(this.state),this.count=0,this.squeezing=!0};ma.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);let e=d.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Pd.p1600(this.state),this.count=0);return e};ma.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};QO.exports=ma});var dv=E((ple,zO)=>{l();zO.exports=HO()(WO())});var mv=E(wa=>{"use strict";l();var y7=wa&&wa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wa,"__esModule",{value:!0});wa.SmartContract=void 0;var m7=y7(kt()),Bc=ht(),pv=Wh(),w7=Be(),gv=bn(),E7=vr(),v7=dc(),$O=gE(),KO=Sc(),YO=_E(),A7=CE(),b7=Tc(),Rd=BE(),I7=dv(),yv=class{constructor(e={}){this.address=new Bc.Address,this.methodsExplicit={},this.methods={},this.address=e.address||new Bc.Address,this.abi=e.abi,this.abi&&this.setupMethods()}setupMethods(){let e=this,r=this.getAbi();for(let n of r.getEndpoints()){let i=n.name;this.methodsExplicit[i]=function(s){let o=new KO.ContractFunction(i);return new YO.Interaction(e,o,s||[])},this.methods[i]=function(s){let o=new KO.ContractFunction(i),a=A7.NativeSerializer.nativeToTypedValues(s||[],n);return new YO.Interaction(e,o,a||[])}}}setAddress(e){this.address=e}getAddress(){return this.address}getAbi(){return E7.guardValueIsSet("abi",this.abi),this.abi}getEndpoint(e){return this.getAbi().getEndpoint(e)}deploy({deployer:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:a,chainID:u}){pv.Compatibility.guardAddressIsSetAndNonZero(e,"'deployer' of SmartContract.deploy()","pass the actual address to deploy()"),n=n||new $O.CodeMetadata,i=i||[],s=s||0;let c=new Rd.ContractDeployPayloadBuilder().setCode(r).setCodeMetadata(n).setInitArgs(i).build();return new gv.Transaction({receiver:Bc.Address.Zero(),sender:e,value:s,gasLimit:o,gasPrice:a,data:c,chainID:u})}upgrade({caller:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:a,chainID:u}){pv.Compatibility.guardAddressIsSetAndNonZero(e,"'caller' of SmartContract.upgrade()","pass the actual address to upgrade()"),this.ensureHasAddress(),n=n||new $O.CodeMetadata,i=i||[],s=s||0;let c=new Rd.ContractUpgradePayloadBuilder().setCode(r).setCodeMetadata(n).setInitArgs(i).build();return new gv.Transaction({sender:e,receiver:this.getAddress(),value:s,gasLimit:o,gasPrice:a,data:c,chainID:u})}call({func:e,args:r,value:n,gasLimit:i,receiver:s,gasPrice:o,chainID:a,caller:u}){pv.Compatibility.guardAddressIsSetAndNonZero(u,"'caller' of SmartContract.call()","pass the actual address to call()"),this.ensureHasAddress(),r=r||[],n=n||0;let c=new Rd.ContractCallPayloadBuilder().setFunction(e).setArgs(r).build();return new gv.Transaction({sender:u,receiver:s||this.getAddress(),value:n,gasLimit:i,gasPrice:o,data:c,chainID:a})}createQuery({func:e,args:r,value:n,caller:i}){return this.ensureHasAddress(),new b7.Query({address:this.getAddress(),func:e,args:r,value:n,caller:i})}ensureHasAddress(){if(!this.getAddress().bech32())throw new w7.ErrContractHasNoAddress}static computeAddress(e,r){let n=d.Buffer.alloc(8,0),i=new Bc.Address(e.bech32()).pubkey(),s=i.slice(30),o=d.Buffer.alloc(8),a=new m7.default(r.valueOf().toString(10)),u=v7.bigIntToBuffer(a);o.write(u.reverse().toString("hex"),"hex");let c=d.Buffer.concat([i,o]),f=I7("keccak256").update(c).digest(),h=d.Buffer.from(Rd.ArwenVirtualMachine,"hex"),g=d.Buffer.concat([n,h,f.slice(10,30),s]);return new Bc.Address(g)}};wa.SmartContract=yv});var Bd=E(Ws=>{"use strict";l();Object.defineProperty(Ws,"__esModule",{value:!0});Ws.SignableMessage=Ws.MESSAGE_PREFIX=void 0;var _7=ht(),S7=vc(),T7=dv();Ws.MESSAGE_PREFIX=`Elrond Signed Message:
`;var wv=class{constructor(e){this.message=d.Buffer.from([]),this.signature=d.Buffer.from([]),this.version=1,this.signer="ErdJS",this.address=new _7.Address,Object.assign(this,e)}serializeForSigning(){let e=d.Buffer.from(this.message.length.toString()),r=d.Buffer.concat([e,this.message]),n=d.Buffer.concat([d.Buffer.from(Ws.MESSAGE_PREFIX),r]);return T7("keccak256").update(n).digest()}serializeForSigningRaw(){return d.Buffer.concat([this.getMessageSize(),this.message])}getSignature(){return this.signature}applySignature(e){this.signature=S7.interpretSignatureAsBuffer(e)}getMessageSize(){let e=d.Buffer.alloc(4);return e.writeUInt32BE(this.message.length,0),e}toJSON(){return{address:this.address.bech32(),message:"0x"+this.message.toString("hex"),signature:"0x"+this.signature.toString("hex"),version:this.version,signer:this.signer}}};Ws.SignableMessage=wv});var JO=E(Mi=>{"use strict";l();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.ErrAccountNotConnected=Mi.ErrCannotSignSingleTransaction=Mi.Err=void 0;var Lc=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Mi.Err=Lc;var Ev=class extends Lc{constructor(){super("Cannot sign single transaction.")}};Mi.ErrCannotSignSingleTransaction=Ev;var vv=class extends Lc{constructor(){super("Account is not connected.")}};Mi.ErrAccountNotConnected=vv});var XO=E(Fc=>{"use strict";l();Object.defineProperty(Fc,"__esModule",{value:!0});Fc.Operation=void 0;var C7;(function(t){t.Connect="connect",t.Logout="logout",t.SignTransactions="signTransactions",t.SignMessage="signMessage",t.CancelAction="cancelAction"})(C7=Fc.Operation||(Fc.Operation={}))});var Av=E(Ea=>{"use strict";l();var Ui=Ea&&Ea.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.ExtensionProvider=void 0;var x7=bn(),ZO=JO(),Mc=XO(),Uc=class t{constructor(){if(this.account={address:""},this.initialized=!1,t._instance)throw new Error("Error: Instantiation failed: Use ExtensionProvider.getInstance() instead of new.");t._instance=this}static getInstance(){return t._instance}setAddress(e){return this.account.address=e,t._instance}init(){return Ui(this,void 0,void 0,function*(){return window&&window.elrondWallet&&(this.initialized=!0),this.initialized})}login(e={}){return Ui(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");let{token:r}=e,n=r||"";return yield this.startBgrMsgChannel(Mc.Operation.Connect,n),this.account.address})}logout(){return Ui(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");try{yield this.startBgrMsgChannel(Mc.Operation.Logout,this.account.address),this.disconnect()}catch(e){console.warn("Extension origin url is already cleared!",e)}return!0})}disconnect(){this.account={address:""}}getAddress(){return Ui(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");return this.account?this.account.address:""})}isInitialized(){return this.initialized}isConnected(){return Ui(this,void 0,void 0,function*(){return!!this.account.address})}signTransaction(e){return Ui(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.signTransactions([e]);if(r.length!=1)throw new ZO.ErrCannotSignSingleTransaction;return r[0]})}ensureConnected(){if(!this.account.address)throw new ZO.ErrAccountNotConnected}signTransactions(e){return Ui(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.startBgrMsgChannel(Mc.Operation.SignTransactions,{from:this.account.address,transactions:e.map(n=>n.toPlainObject())});try{return r.map(i=>x7.Transaction.fromPlainObject(i))}catch(n){throw new Error(`Transaction canceled: ${n.message}.`)}})}signMessage(e){return Ui(this,void 0,void 0,function*(){this.ensureConnected();let r={account:this.account.address,message:e.message.toString()},i=(yield this.startBgrMsgChannel(Mc.Operation.SignMessage,r)).signature,s=d.Buffer.from(i,"hex");return e.applySignature(s),e})}cancelAction(){return this.startBgrMsgChannel(Mc.Operation.CancelAction,{})}startBgrMsgChannel(e,r){return new Promise(n=>{window.postMessage({target:"erdw-inpage",type:e,data:r},window.origin);let i=s=>{s.isTrusted&&s.data.target==="erdw-contentScript"&&(s.data.type==="connectResponse"?(s.data.data&&s.data.data.address&&(this.account=s.data.data),window.removeEventListener("message",i),n(s.data.data)):(window.removeEventListener("message",i),n(s.data.data)))};window.addEventListener("message",i,!1)})}};Ea.ExtensionProvider=Uc;Uc._instance=new Uc});function P7(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){R7(t);return}return e}function R7(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function qc(t,e={}){if(typeof t!="string")return t;let r=t.trim();if(t[0]==='"'&&t.at(-1)==='"'&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){let n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!D7.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(N7.test(t)||O7.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,P7)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}var N7,O7,D7,i2=fe(()=>{l();N7=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,O7=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D7=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/});function B7(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Pt(t,...e){try{return B7(t(...e))}catch(r){return Promise.reject(r)}}function L7(t){let e=typeof t;return t===null||e!=="object"&&e!=="function"}function F7(t){let e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Vc(t){if(L7(t))return String(t);if(F7(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Vc(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function s2(){if(typeof d.Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}function o2(t){if(typeof t=="string")return t;s2();let e=d.Buffer.from(t).toString("base64");return bv+e}function a2(t){return typeof t!="string"||!t.startsWith(bv)?t:(s2(),d.Buffer.from(t.slice(bv.length),"base64"))}function rr(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function u2(...t){return rr(t.join(":"))}function Hc(t){return t=rr(t),t?t+":":""}var bv,c2=fe(()=>{l();bv="base64:"});function h2(t={}){let e={mounts:{"":t.driver||U7()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(let f of e.mountpoints)if(c.startsWith(f))return{base:f,relativeKey:c.slice(f.length),driver:e.mounts[f]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,f)=>e.mountpoints.filter(h=>h.startsWith(c)||f&&c.startsWith(h)).map(h=>({relativeBase:c.length>h.length?c.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(c,f)=>{if(e.watching){f=rr(f);for(let h of e.watchListeners)h(c,f)}},s=async()=>{if(!e.watching){e.watching=!0;for(let c in e.mounts)e.unwatch[c]=await l2(e.mounts[c],i,c)}},o=async()=>{if(e.watching){for(let c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},a=(c,f,h)=>{let g=new Map,y=m=>{let T=g.get(m.base);return T||(T={driver:m.driver,base:m.base,items:[]},g.set(m.base,T)),T};for(let m of c){let T=typeof m=="string",O=rr(T?m:m.key),B=T?void 0:m.value,W=T||!m.options?f:{...f,...m.options},U=r(O);y(U).items.push({key:O,value:B,relativeKey:U.relativeKey,options:W})}return Promise.all([...g.values()].map(m=>h(m))).then(m=>m.flat())},u={hasItem(c,f={}){c=rr(c);let{relativeKey:h,driver:g}=r(c);return Pt(g.hasItem,h,f)},getItem(c,f={}){c=rr(c);let{relativeKey:h,driver:g}=r(c);return Pt(g.getItem,h,f).then(y=>qc(y))},getItems(c,f){return a(c,f,h=>h.driver.getItems?Pt(h.driver.getItems,h.items.map(g=>({key:g.relativeKey,options:g.options})),f).then(g=>g.map(y=>({key:u2(h.base,y.key),value:qc(y.value)}))):Promise.all(h.items.map(g=>Pt(h.driver.getItem,g.relativeKey,g.options).then(y=>({key:g.key,value:qc(y)})))))},getItemRaw(c,f={}){c=rr(c);let{relativeKey:h,driver:g}=r(c);return g.getItemRaw?Pt(g.getItemRaw,h,f):Pt(g.getItem,h,f).then(y=>a2(y))},async setItem(c,f,h={}){if(f===void 0)return u.removeItem(c);c=rr(c);let{relativeKey:g,driver:y}=r(c);y.setItem&&(await Pt(y.setItem,g,Vc(f),h),y.watch||i("update",c))},async setItems(c,f){await a(c,f,async h=>{h.driver.setItems&&await Pt(h.driver.setItems,h.items.map(g=>({key:g.relativeKey,value:Vc(g.value),options:g.options})),f),h.driver.setItem&&await Promise.all(h.items.map(g=>Pt(h.driver.setItem,g.relativeKey,Vc(g.value),g.options)))})},async setItemRaw(c,f,h={}){if(f===void 0)return u.removeItem(c,h);c=rr(c);let{relativeKey:g,driver:y}=r(c);if(y.setItemRaw)await Pt(y.setItemRaw,g,f,h);else if(y.setItem)await Pt(y.setItem,g,o2(f),h);else return;y.watch||i("update",c)},async removeItem(c,f={}){typeof f=="boolean"&&(f={removeMeta:f}),c=rr(c);let{relativeKey:h,driver:g}=r(c);g.removeItem&&(await Pt(g.removeItem,h,f),(f.removeMeta||f.removeMata)&&await Pt(g.removeItem,h+"$",f),g.watch||i("remove",c))},async getMeta(c,f={}){typeof f=="boolean"&&(f={nativeOnly:f}),c=rr(c);let{relativeKey:h,driver:g}=r(c),y=Object.create(null);if(g.getMeta&&Object.assign(y,await Pt(g.getMeta,h,f)),!f.nativeOnly){let m=await Pt(g.getItem,h+"$",f).then(T=>qc(T));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(y,m))}return y},setMeta(c,f,h={}){return this.setItem(c+"$",f,h)},removeMeta(c,f={}){return this.removeItem(c+"$",f)},async getKeys(c,f={}){c=Hc(c);let h=n(c,!0),g=[],y=[];for(let m of h){let O=(await Pt(m.driver.getKeys,m.relativeBase,f)).map(B=>m.mountpoint+rr(B)).filter(B=>!g.some(W=>B.startsWith(W)));y.push(...O),g=[m.mountpoint,...g.filter(B=>!B.startsWith(m.mountpoint))]}return c?y.filter(m=>m.startsWith(c)&&!m.endsWith("$")):y.filter(m=>!m.endsWith("$"))},async clear(c,f={}){c=Hc(c),await Promise.all(n(c,!1).map(async h=>{if(h.driver.clear)return Pt(h.driver.clear,h.relativeBase,f);if(h.driver.removeItem){let g=await h.driver.getKeys(h.relativeBase||"",f);return Promise.all(g.map(y=>h.driver.removeItem(y,f)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>f2(c)))},async watch(c){return await s(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(f=>f!==c),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(c,f){if(c=Hc(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((h,g)=>g.length-h.length)),e.mounts[c]=f,e.watching&&Promise.resolve(l2(f,i,c)).then(h=>{e.unwatch[c]=h}).catch(console.error),u},async unmount(c,f=!0){c=Hc(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&(e.unwatch[c](),delete e.unwatch[c]),f&&await f2(e.mounts[c]),e.mountpoints=e.mountpoints.filter(h=>h!==c),delete e.mounts[c])},getMount(c=""){c=rr(c)+":";let f=r(c);return{driver:f.driver,base:f.base}},getMounts(c="",f={}){return c=rr(c),n(c,f.parents).map(g=>({driver:g.driver,base:g.mountpoint}))}};return u}function l2(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function f2(t){typeof t.dispose=="function"&&await Pt(t.dispose)}var M7,U7,d2=fe(()=>{l();i2();c2();M7="memory",U7=()=>{let t=new Map;return{name:M7,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}}});function zs(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function _v(t,e){let r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);let n=zs(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}function Gc(){return Iv||(Iv=_v("keyval-store","keyval")),Iv}function Sv(t,e=Gc()){return e("readonly",r=>zs(r.get(t)))}function p2(t,e,r=Gc()){return r("readwrite",n=>(n.put(e,t),zs(n.transaction)))}function g2(t,e=Gc()){return e("readwrite",r=>(r.delete(t),zs(r.transaction)))}function y2(t=Gc()){return t("readwrite",e=>(e.clear(),zs(e.transaction)))}function q7(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},zs(t.transaction)}function m2(t=Gc()){return t("readonly",e=>{if(e.getAllKeys)return zs(e.getAllKeys());let r=[];return q7(e,n=>r.push(n.key)).then(()=>r)})}var Iv,w2=fe(()=>{l()});var E2={};ct(E2,{safeJsonParse:()=>Vi,safeJsonStringify:()=>Hi});function Vi(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return H7(t)}catch{return t}}function Hi(t){return typeof t=="string"?t:V7(t)||""}var V7,H7,kc=fe(()=>{l();V7=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),H7=t=>{let e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)}});var A2={};ct(A2,{KeyValueStorage:()=>Nv,default:()=>Nv});function W7(t){var e;return[t[0],Vi((e=t[1])!=null?e:"")]}var G7,k7,j7,Q7,Cv,Tv,Ud,xv,z7,v2,$7,K7,Nv,b2=fe(()=>{l();d2();w2();kc();G7="idb-keyval",k7=(t={})=>{let e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i,n;return t.dbName&&t.storeName&&(n=_v(t.dbName,t.storeName)),{name:G7,options:t,async hasItem(i){return!(typeof await Sv(r(i),n)>"u")},async getItem(i){return await Sv(r(i),n)??null},setItem(i,s){return p2(r(i),s,n)},removeItem(i){return g2(r(i),n)},getKeys(){return m2(n)},clear(){return y2(n)}}},j7="WALLET_CONNECT_V2_INDEXED_DB",Q7="keyvaluestorage",Cv=class{constructor(){this.indexedDb=h2({driver:k7({dbName:j7,storeName:Q7})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Hi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}},Tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ud={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Tv<"u"&&Tv.localStorage?Ud.exports=Tv.localStorage:typeof window<"u"&&window.localStorage?Ud.exports=window.localStorage:Ud.exports=new e})();xv=class{constructor(){this.localStorage=Ud.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(W7)}async getItem(e){let r=this.localStorage.getItem(e);if(r!==null)return Vi(r)}async setItem(e,r){this.localStorage.setItem(e,Hi(r))}async removeItem(e){this.localStorage.removeItem(e)}},z7="wc_storage_version",v2=1,$7=async(t,e,r)=>{let n=z7,i=await e.getItem(n);if(i&&i>=v2){r(e);return}let s=await t.getKeys();if(!s.length){r(e);return}let o=[];for(;s.length;){let a=s.shift();if(!a)continue;let u=a.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){let c=await t.getItem(a);await e.setItem(a,c),o.push(a)}}await e.setItem(n,v2),r(e),K7(t,o)},K7=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})},Nv=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let e=new xv;this.storage=e;try{let r=new Cv;$7(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}});var Jr={};ct(Jr,{__assign:()=>Dv,__asyncDelegator:()=>uQ,__asyncGenerator:()=>aQ,__asyncValues:()=>cQ,__await:()=>jc,__awaiter:()=>tQ,__classPrivateFieldGet:()=>dQ,__classPrivateFieldSet:()=>pQ,__createBinding:()=>nQ,__decorate:()=>X7,__exportStar:()=>iQ,__extends:()=>Y7,__generator:()=>rQ,__importDefault:()=>hQ,__importStar:()=>fQ,__makeTemplateObject:()=>lQ,__metadata:()=>eQ,__param:()=>Z7,__read:()=>I2,__rest:()=>J7,__spread:()=>sQ,__spreadArrays:()=>oQ,__values:()=>Pv});function Y7(t,e){Ov(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function J7(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function X7(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Z7(t,e){return function(r,n){e(r,n,t)}}function eQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function tQ(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function rQ(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(f){return u([c,f])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function nQ(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function iQ(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Pv(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function I2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function sQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(I2(arguments[e]));return t}function oQ(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function jc(t){return this instanceof jc?(this.v=t,this):new jc(t)}function aQ(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){n[g]&&(i[g]=function(y){return new Promise(function(m,T){s.push([g,y,m,T])>1||a(g,y)})})}function a(g,y){try{u(n[g](y))}catch(m){h(s[0][3],m)}}function u(g){g.value instanceof jc?Promise.resolve(g.value.v).then(c,f):h(s[0][2],g)}function c(g){a("next",g)}function f(g){a("throw",g)}function h(g,y){g(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function uQ(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:jc(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function cQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Pv=="function"?Pv(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function lQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function fQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function hQ(t){return t&&t.__esModule?t:{default:t}}function dQ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function pQ(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Ov,Dv,Xr=fe(()=>{l();Ov=function(t,e){return Ov=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ov(t,e)};Dv=function(){return Dv=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dv.apply(this,arguments)}});var _2=E(qd=>{"use strict";l();Object.defineProperty(qd,"__esModule",{value:!0});qd.delay=void 0;function gQ(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}qd.delay=gQ});var S2=E(va=>{"use strict";l();Object.defineProperty(va,"__esModule",{value:!0});va.ONE_THOUSAND=va.ONE_HUNDRED=void 0;va.ONE_HUNDRED=100;va.ONE_THOUSAND=1e3});var T2=E(pe=>{"use strict";l();Object.defineProperty(pe,"__esModule",{value:!0});pe.ONE_YEAR=pe.FOUR_WEEKS=pe.THREE_WEEKS=pe.TWO_WEEKS=pe.ONE_WEEK=pe.THIRTY_DAYS=pe.SEVEN_DAYS=pe.FIVE_DAYS=pe.THREE_DAYS=pe.ONE_DAY=pe.TWENTY_FOUR_HOURS=pe.TWELVE_HOURS=pe.SIX_HOURS=pe.THREE_HOURS=pe.ONE_HOUR=pe.SIXTY_MINUTES=pe.THIRTY_MINUTES=pe.TEN_MINUTES=pe.FIVE_MINUTES=pe.ONE_MINUTE=pe.SIXTY_SECONDS=pe.THIRTY_SECONDS=pe.TEN_SECONDS=pe.FIVE_SECONDS=pe.ONE_SECOND=void 0;pe.ONE_SECOND=1;pe.FIVE_SECONDS=5;pe.TEN_SECONDS=10;pe.THIRTY_SECONDS=30;pe.SIXTY_SECONDS=60;pe.ONE_MINUTE=pe.SIXTY_SECONDS;pe.FIVE_MINUTES=pe.ONE_MINUTE*5;pe.TEN_MINUTES=pe.ONE_MINUTE*10;pe.THIRTY_MINUTES=pe.ONE_MINUTE*30;pe.SIXTY_MINUTES=pe.ONE_MINUTE*60;pe.ONE_HOUR=pe.SIXTY_MINUTES;pe.THREE_HOURS=pe.ONE_HOUR*3;pe.SIX_HOURS=pe.ONE_HOUR*6;pe.TWELVE_HOURS=pe.ONE_HOUR*12;pe.TWENTY_FOUR_HOURS=pe.ONE_HOUR*24;pe.ONE_DAY=pe.TWENTY_FOUR_HOURS;pe.THREE_DAYS=pe.ONE_DAY*3;pe.FIVE_DAYS=pe.ONE_DAY*5;pe.SEVEN_DAYS=pe.ONE_DAY*7;pe.THIRTY_DAYS=pe.ONE_DAY*30;pe.ONE_WEEK=pe.SEVEN_DAYS;pe.TWO_WEEKS=pe.ONE_WEEK*2;pe.THREE_WEEKS=pe.ONE_WEEK*3;pe.FOUR_WEEKS=pe.ONE_WEEK*4;pe.ONE_YEAR=pe.ONE_DAY*365});var Rv=E(Vd=>{"use strict";l();Object.defineProperty(Vd,"__esModule",{value:!0});var C2=(Xr(),ft(Jr));C2.__exportStar(S2(),Vd);C2.__exportStar(T2(),Vd)});var N2=E(Aa=>{"use strict";l();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.fromMiliseconds=Aa.toMiliseconds=void 0;var x2=Rv();function yQ(t){return t*x2.ONE_THOUSAND}Aa.toMiliseconds=yQ;function mQ(t){return Math.floor(t/x2.ONE_THOUSAND)}Aa.fromMiliseconds=mQ});var D2=E(Hd=>{"use strict";l();Object.defineProperty(Hd,"__esModule",{value:!0});var O2=(Xr(),ft(Jr));O2.__exportStar(_2(),Hd);O2.__exportStar(N2(),Hd)});var P2=E(Qc=>{"use strict";l();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.Watch=void 0;var Gd=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let n=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:n})}get(e){let r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){let r=this.get(e);return r.elapsed||Date.now()-r.started}};Qc.Watch=Gd;Qc.default=Gd});var R2=E(kd=>{"use strict";l();Object.defineProperty(kd,"__esModule",{value:!0});kd.IWatch=void 0;var Bv=class{};kd.IWatch=Bv});var B2=E(Lv=>{"use strict";l();Object.defineProperty(Lv,"__esModule",{value:!0});var wQ=(Xr(),ft(Jr));wQ.__exportStar(R2(),Lv)});var $s=E(ba=>{"use strict";l();Object.defineProperty(ba,"__esModule",{value:!0});var jd=(Xr(),ft(Jr));jd.__exportStar(D2(),ba);jd.__exportStar(P2(),ba);jd.__exportStar(B2(),ba);jd.__exportStar(Rv(),ba)});var Fv,L2=fe(()=>{l();Fv=class{}});var Mv={};ct(Mv,{IEvents:()=>Fv});var Uv=fe(()=>{l();L2()});var F2=E(Qd=>{"use strict";l();Object.defineProperty(Qd,"__esModule",{value:!0});Qd.IHeartBeat=void 0;var EQ=(Uv(),ft(Mv)),qv=class extends EQ.IEvents{constructor(e){super()}};Qd.IHeartBeat=qv});var Hv=E(Vv=>{"use strict";l();Object.defineProperty(Vv,"__esModule",{value:!0});var vQ=(Xr(),ft(Jr));vQ.__exportStar(F2(),Vv)});var M2=E(Ia=>{"use strict";l();Object.defineProperty(Ia,"__esModule",{value:!0});Ia.HEARTBEAT_EVENTS=Ia.HEARTBEAT_INTERVAL=void 0;var AQ=$s();Ia.HEARTBEAT_INTERVAL=AQ.FIVE_SECONDS;Ia.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}});var kv=E(Gv=>{"use strict";l();Object.defineProperty(Gv,"__esModule",{value:!0});var bQ=(Xr(),ft(Jr));bQ.__exportStar(M2(),Gv)});var U2=E(Wd=>{"use strict";l();Object.defineProperty(Wd,"__esModule",{value:!0});Wd.HeartBeat=void 0;var jv=(Xr(),ft(Jr)),IQ=Xn(),_Q=$s(),SQ=Hv(),Qv=kv(),Wv=class t extends SQ.IHeartBeat{constructor(e){super(e),this.events=new IQ.EventEmitter,this.interval=Qv.HEARTBEAT_INTERVAL,this.interval=e?.interval||Qv.HEARTBEAT_INTERVAL}static init(e){return jv.__awaiter(this,void 0,void 0,function*(){let r=new t(e);return yield r.init(),r})}init(){return jv.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return jv.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),_Q.toMiliseconds(this.interval))})}pulse(){this.events.emit(Qv.HEARTBEAT_EVENTS.pulse)}};Wd.HeartBeat=Wv});var q2=E(Wc=>{"use strict";l();Object.defineProperty(Wc,"__esModule",{value:!0});var zv=(Xr(),ft(Jr));zv.__exportStar(U2(),Wc);zv.__exportStar(Hv(),Wc);zv.__exportStar(kv(),Wc)});var H2=E((Pfe,V2)=>{"use strict";l();function TQ(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}V2.exports=CQ;function CQ(t,e,r){var n=r&&r.stringify||TQ,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",f=1-i,h=-1,g=t&&t.length||0,y=0;y<g;){if(t.charCodeAt(y)===37&&y+1<g){switch(h=h>-1?h:0,t.charCodeAt(y+1)){case 100:case 102:if(f>=u||e[f]==null)break;h<y&&(c+=t.slice(h,y)),c+=Number(e[f]),h=y+2,y++;break;case 105:if(f>=u||e[f]==null)break;h<y&&(c+=t.slice(h,y)),c+=Math.floor(Number(e[f])),h=y+2,y++;break;case 79:case 111:case 106:if(f>=u||e[f]===void 0)break;h<y&&(c+=t.slice(h,y));var m=typeof e[f];if(m==="string"){c+="'"+e[f]+"'",h=y+2,y++;break}if(m==="function"){c+=e[f].name||"<anonymous>",h=y+2,y++;break}c+=n(e[f]),h=y+2,y++;break;case 115:if(f>=u)break;h<y&&(c+=t.slice(h,y)),c+=String(e[f]),h=y+2,y++;break;case 37:h<y&&(c+=t.slice(h,y)),c+="%",h=y+2,y++,f--;break}++f}++y}return h===-1?t:(h<g&&(c+=t.slice(h)),c)}});var W2=E((Bfe,Q2)=>{"use strict";l();var G2=H2();Q2.exports=Cn;var zc=MQ().console||{},xQ={mapHttpRequest:zd,mapHttpResponse:zd,wrapRequestSerializer:$v,wrapResponseSerializer:$v,wrapErrorSerializer:$v,req:zd,res:zd,err:RQ};function NQ(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Cn(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||zc;t.browser.write&&(t.browser.asObject=!0);let n=t.serializers||{},i=NQ(t.browser.serialize,n),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let a=t.level||"info",u=Object.create(r);u.log||(u.log=$c),Object.defineProperty(u,"levelVal",{get:f}),Object.defineProperty(u,"level",{get:h,set:g});let c={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:BQ(t)};u.levels=Cn.levels,u.level=a,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=$c,u.serializers=n,u._serialize=i,u._stdErrSerialize=s,u.child=y,e&&(u._logEvent=Kv());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function g(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,_a(c,u,"error","log"),_a(c,u,"fatal","error"),_a(c,u,"warn","error"),_a(c,u,"info","log"),_a(c,u,"debug","log"),_a(c,u,"trace","log")}function y(m,T){if(!m)throw new Error("missing bindings for child Pino");T=T||{},i&&m.serializers&&(T.serializers=m.serializers);let O=T.serializers;if(i&&O){var B=Object.assign({},n,O),W=t.browser.serialize===!0?Object.keys(B):i;delete m.serializers,$d([m],W,B,this._stdErrSerialize)}function U(A){this._childLevel=(A._childLevel|0)+1,this.error=Sa(A,m,"error"),this.fatal=Sa(A,m,"fatal"),this.warn=Sa(A,m,"warn"),this.info=Sa(A,m,"info"),this.debug=Sa(A,m,"debug"),this.trace=Sa(A,m,"trace"),B&&(this.serializers=B,this._serialize=W),e&&(this._logEvent=Kv([].concat(A._logEvent.bindings,m)))}return U.prototype=this,new U(this)}return u}Cn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Cn.stdSerializers=xQ;Cn.stdTimeFunctions=Object.assign({},{nullTime:k2,epochTime:j2,unixTime:LQ,isoTime:FQ});function _a(t,e,r,n){let i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?$c:i[r]?i[r]:zc[r]||zc[n]||$c,OQ(t,e,r)}function OQ(t,e,r){!t.transmit&&e[r]===$c||(e[r]=function(n){return function(){let s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===zc?zc:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject&&$d(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,DQ(this,r,o,s)):n.apply(a,o),t.transmit){let c=t.transmit.level||e.level,f=Cn.levels.values[c],h=Cn.levels.values[r];if(h<f)return;PQ(this,{ts:s,methodLevel:r,methodValue:h,transmitLevel:c,transmitValue:Cn.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function DQ(t,e,r,n){t._serialize&&$d(r,t._serialize,t.serializers,t._stdErrSerialize);let i=r.slice(),s=i[0],o={};n&&(o.time=n),o.level=Cn.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?G2(i.shift(),i):void 0}else typeof s=="string"&&(s=G2(i.shift(),i));return s!==void 0&&(o.msg=s),o}function $d(t,e,r,n){for(let i in t)if(n&&t[i]instanceof Error)t[i]=Cn.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(let s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function Sa(t,e,r){return function(){let n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function PQ(t,e,r){let n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,u=t._logEvent.bindings;$d(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=Kv(u)}function Kv(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function RQ(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function BQ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?k2:j2}function zd(){return{}}function $v(t){return t}function $c(){}function k2(){return!1}function j2(){return Date.now()}function LQ(){return Math.round(Date.now()/1e3)}function FQ(){return new Date(Date.now()).toISOString()}function MQ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var Yv=E(Ta=>{"use strict";l();Object.defineProperty(Ta,"__esModule",{value:!0});Ta.PINO_CUSTOM_CONTEXT_KEY=Ta.PINO_LOGGER_DEFAULTS=void 0;Ta.PINO_LOGGER_DEFAULTS={level:"info"};Ta.PINO_CUSTOM_CONTEXT_KEY="custom_context"});var J2=E(gr=>{"use strict";l();Object.defineProperty(gr,"__esModule",{value:!0});gr.generateChildLogger=gr.formatChildLoggerContext=gr.getLoggerContext=gr.setBrowserLoggerContext=gr.getBrowserLoggerContext=gr.getDefaultLoggerOptions=void 0;var Ca=Yv();function UQ(t){return Object.assign(Object.assign({},t),{level:t?.level||Ca.PINO_LOGGER_DEFAULTS.level})}gr.getDefaultLoggerOptions=UQ;function z2(t,e=Ca.PINO_CUSTOM_CONTEXT_KEY){return t[e]||""}gr.getBrowserLoggerContext=z2;function $2(t,e,r=Ca.PINO_CUSTOM_CONTEXT_KEY){return t[r]=e,t}gr.setBrowserLoggerContext=$2;function K2(t,e=Ca.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof t.bindings>"u"?r=z2(t,e):r=t.bindings().context||"",r}gr.getLoggerContext=K2;function Y2(t,e,r=Ca.PINO_CUSTOM_CONTEXT_KEY){let n=K2(t,r);return n.trim()?`${n}/${e}`:e}gr.formatChildLoggerContext=Y2;function qQ(t,e,r=Ca.PINO_CUSTOM_CONTEXT_KEY){let n=Y2(t,e,r),i=t.child({context:n});return $2(i,n,r)}gr.generateChildLogger=qQ});var Xv=E(xa=>{"use strict";l();Object.defineProperty(xa,"__esModule",{value:!0});xa.pino=void 0;var Jv=(Xr(),ft(Jr)),VQ=Jv.__importDefault(W2());Object.defineProperty(xa,"pino",{enumerable:!0,get:function(){return VQ.default}});Jv.__exportStar(Yv(),xa);Jv.__exportStar(J2(),xa)});var y1=E(Rt=>{"use strict";l();Object.defineProperty(Rt,"__esModule",{value:!0});var Na=(Uv(),ft(Mv)),X2=Xn();function HQ(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var GQ=HQ(X2),Zv=class extends Na.IEvents{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},e1=class{constructor(e,r,n){this.core=e,this.logger=r}},t1=class extends Na.IEvents{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},r1=class{constructor(e,r){this.logger=e,this.core=r}},n1=class extends Na.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},i1=class extends Na.IEvents{constructor(e){super()}},s1=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},o1=class{constructor(){this.map=new Map}},a1=class extends Na.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},u1=class{constructor(e,r){this.core=e,this.logger=r}},c1=class extends Na.IEvents{constructor(e,r){super(),this.core=e,this.logger=r}},l1=class{constructor(e,r){this.logger=e,this.core=r}},f1=class{constructor(e,r){this.projectId=e,this.logger=r}},h1=class extends GQ.default{constructor(){super()}},d1=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},p1=class extends X2.EventEmitter{constructor(){super()}},g1=class{constructor(e){this.client=e}};Rt.ICore=Zv,Rt.ICrypto=e1,Rt.IEngine=g1,Rt.IEngineEvents=p1,Rt.IExpirer=c1,Rt.IJsonRpcHistory=t1,Rt.IKeyChain=u1,Rt.IMessageTracker=r1,Rt.IPairing=l1,Rt.IPublisher=n1,Rt.IRelayer=i1,Rt.ISignClient=d1,Rt.ISignClientEvents=h1,Rt.IStore=s1,Rt.ISubscriber=a1,Rt.ISubscriberTopicMap=o1,Rt.IVerify=f1});var eD=E(Kd=>{"use strict";l();Object.defineProperty(Kd,"__esModule",{value:!0});Kd.BrowserRandomSource=void 0;var Z2=65536,m1=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=Z2)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Z2)));return r}};Kd.BrowserRandomSource=m1});var Hr=E(w1=>{"use strict";l();Object.defineProperty(w1,"__esModule",{value:!0});function kQ(t){for(var e=0;e<t.length;e++)t[e]=0;return t}w1.wipe=kQ});var tD=E(()=>{l()});var rD=E(Yd=>{"use strict";l();Object.defineProperty(Yd,"__esModule",{value:!0});Yd.NodeRandomSource=void 0;var jQ=Hr(),E1=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof hS<"u"){let e=tD();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,jQ.wipe)(r),n}};Yd.NodeRandomSource=E1});var nD=E(Jd=>{"use strict";l();Object.defineProperty(Jd,"__esModule",{value:!0});Jd.SystemRandomSource=void 0;var QQ=eD(),WQ=rD(),v1=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new QQ.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new WQ.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};Jd.SystemRandomSource=v1});var iD=E(Ar=>{"use strict";l();Object.defineProperty(Ar,"__esModule",{value:!0});function zQ(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}Ar.mul=Math.imul||zQ;function $Q(t,e){return t+e|0}Ar.add=$Q;function KQ(t,e){return t-e|0}Ar.sub=KQ;function YQ(t,e){return t<<e|t>>>32-e}Ar.rotl=YQ;function JQ(t,e){return t<<32-e|t>>>e}Ar.rotr=JQ;function XQ(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}Ar.isInteger=Number.isInteger||XQ;Ar.MAX_SAFE_INTEGER=9007199254740991;Ar.isSafeInteger=function(t){return Ar.isInteger(t)&&t>=-Ar.MAX_SAFE_INTEGER&&t<=Ar.MAX_SAFE_INTEGER}});var Oa=E(Ne=>{"use strict";l();Object.defineProperty(Ne,"__esModule",{value:!0});var sD=iD();function ZQ(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ne.readInt16BE=ZQ;function e9(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ne.readUint16BE=e9;function t9(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ne.readInt16LE=t9;function r9(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ne.readUint16LE=r9;function oD(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ne.writeUint16BE=oD;Ne.writeInt16BE=oD;function aD(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ne.writeUint16LE=aD;Ne.writeInt16LE=aD;function A1(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ne.readInt32BE=A1;function b1(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ne.readUint32BE=b1;function I1(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ne.readInt32LE=I1;function _1(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ne.readUint32LE=_1;function Xd(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ne.writeUint32BE=Xd;Ne.writeInt32BE=Xd;function Zd(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ne.writeUint32LE=Zd;Ne.writeInt32LE=Zd;function n9(t,e){e===void 0&&(e=0);var r=A1(t,e),n=A1(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Ne.readInt64BE=n9;function i9(t,e){e===void 0&&(e=0);var r=b1(t,e),n=b1(t,e+4);return r*4294967296+n}Ne.readUint64BE=i9;function s9(t,e){e===void 0&&(e=0);var r=I1(t,e),n=I1(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Ne.readInt64LE=s9;function o9(t,e){e===void 0&&(e=0);var r=_1(t,e),n=_1(t,e+4);return n*4294967296+r}Ne.readUint64LE=o9;function uD(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Xd(t/4294967296>>>0,e,r),Xd(t>>>0,e,r+4),e}Ne.writeUint64BE=uD;Ne.writeInt64BE=uD;function cD(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Zd(t>>>0,e,r),Zd(t/4294967296>>>0,e,r+4),e}Ne.writeUint64LE=cD;Ne.writeInt64LE=cD;function a9(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Ne.readUintBE=a9;function u9(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Ne.readUintLE=u9;function c9(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!sD.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Ne.writeUintBE=c9;function l9(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!sD.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Ne.writeUintLE=l9;function f9(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ne.readFloat32BE=f9;function h9(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ne.readFloat32LE=h9;function d9(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ne.readFloat64BE=d9;function p9(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ne.readFloat64LE=p9;function g9(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Ne.writeFloat32BE=g9;function y9(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Ne.writeFloat32LE=y9;function m9(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Ne.writeFloat64BE=m9;function w9(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Ne.writeFloat64LE=w9});var Kc=E(Xt=>{"use strict";l();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.randomStringForEntropy=Xt.randomString=Xt.randomUint32=Xt.randomBytes=Xt.defaultRandomSource=void 0;var E9=nD(),v9=Oa(),lD=Hr();Xt.defaultRandomSource=new E9.SystemRandomSource;function S1(t,e=Xt.defaultRandomSource){return e.randomBytes(t)}Xt.randomBytes=S1;function A9(t=Xt.defaultRandomSource){let e=S1(4,t),r=(0,v9.readUint32LE)(e);return(0,lD.wipe)(e),r}Xt.randomUint32=A9;var fD="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function hD(t,e=fD,r=Xt.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;t>0;){let o=S1(Math.ceil(t*256/s),r);for(let a=0;a<o.length&&t>0;a++){let u=o[a];u<s&&(n+=e.charAt(u%i),t--)}(0,lD.wipe)(o)}return n}Xt.randomString=hD;function b9(t,e=fD,r=Xt.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return hD(n,e,r)}Xt.randomStringForEntropy=b9});var gD=E(ei=>{"use strict";l();Object.defineProperty(ei,"__esModule",{value:!0});var Pa=Oa(),Da=Hr();ei.DIGEST_LENGTH=64;ei.BLOCK_SIZE=128;var pD=function(){function t(){this.digestLength=ei.DIGEST_LENGTH,this.blockSize=ei.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){Da.wipe(this._buffer),Da.wipe(this._tempHi),Da.wipe(this._tempLo),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<ei.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(T1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=T1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%128<112?128:256;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;Pa.writeUint32BE(i,this._buffer,o-8),Pa.writeUint32BE(s,this._buffer,o-4),T1(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/8;a++)Pa.writeUint32BE(this._stateHi[a],e,a*8),Pa.writeUint32BE(this._stateLo[a],e,a*8+4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){Da.wipe(e.stateHi),Da.wipe(e.stateLo),e.buffer&&Da.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();ei.SHA512=pD;var dD=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function T1(t,e,r,n,i,s,o){for(var a=r[0],u=r[1],c=r[2],f=r[3],h=r[4],g=r[5],y=r[6],m=r[7],T=n[0],O=n[1],B=n[2],W=n[3],U=n[4],A=n[5],_=n[6],N=n[7],I,S,R,J,Q,V,k,K;o>=128;){for(var ge=0;ge<16;ge++){var ue=8*ge+s;t[ge]=Pa.readUint32BE(i,ue),e[ge]=Pa.readUint32BE(i,ue+4)}for(var ge=0;ge<80;ge++){var re=a,Y=u,se=c,te=f,ie=h,M=g,le=y,ae=m,he=T,oe=O,ce=B,w=W,v=U,b=A,P=_,C=N;if(I=m,S=N,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=(h>>>14|U<<18)^(h>>>18|U<<14)^(U>>>9|h<<23),S=(U>>>14|h<<18)^(U>>>18|h<<14)^(h>>>9|U<<23),Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,I=h&g^~h&y,S=U&A^~U&_,Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,I=dD[ge*2],S=dD[ge*2+1],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,I=t[ge%16],S=e[ge%16],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,R=k&65535|K<<16,J=Q&65535|V<<16,I=R,S=J,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=(a>>>28|T<<4)^(T>>>2|a<<30)^(T>>>7|a<<25),S=(T>>>28|a<<4)^(a>>>2|T<<30)^(a>>>7|T<<25),Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,I=a&u^a&c^u&c,S=T&O^T&B^O&B,Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,ae=k&65535|K<<16,C=Q&65535|V<<16,I=te,S=w,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=R,S=J,Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,te=k&65535|K<<16,w=Q&65535|V<<16,u=re,c=Y,f=se,h=te,g=ie,y=M,m=le,a=ae,O=he,B=oe,W=ce,U=w,A=v,_=b,N=P,T=C,ge%16===15)for(var ue=0;ue<16;ue++)I=t[ue],S=e[ue],Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=t[(ue+9)%16],S=e[(ue+9)%16],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,R=t[(ue+1)%16],J=e[(ue+1)%16],I=(R>>>1|J<<31)^(R>>>8|J<<24)^R>>>7,S=(J>>>1|R<<31)^(J>>>8|R<<24)^(J>>>7|R<<25),Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,R=t[(ue+14)%16],J=e[(ue+14)%16],I=(R>>>19|J<<13)^(J>>>29|R<<3)^R>>>6,S=(J>>>19|R<<13)^(R>>>29|J<<3)^(J>>>6|R<<26),Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,t[ue]=k&65535|K<<16,e[ue]=Q&65535|V<<16}I=a,S=T,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[0],S=n[0],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[0]=a=k&65535|K<<16,n[0]=T=Q&65535|V<<16,I=u,S=O,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[1],S=n[1],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[1]=u=k&65535|K<<16,n[1]=O=Q&65535|V<<16,I=c,S=B,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[2],S=n[2],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[2]=c=k&65535|K<<16,n[2]=B=Q&65535|V<<16,I=f,S=W,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[3],S=n[3],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[3]=f=k&65535|K<<16,n[3]=W=Q&65535|V<<16,I=h,S=U,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[4],S=n[4],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[4]=h=k&65535|K<<16,n[4]=U=Q&65535|V<<16,I=g,S=A,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[5],S=n[5],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[5]=g=k&65535|K<<16,n[5]=A=Q&65535|V<<16,I=y,S=_,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[6],S=n[6],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[6]=y=k&65535|K<<16,n[6]=_=Q&65535|V<<16,I=m,S=N,Q=S&65535,V=S>>>16,k=I&65535,K=I>>>16,I=r[7],S=n[7],Q+=S&65535,V+=S>>>16,k+=I&65535,K+=I>>>16,V+=Q>>>16,k+=V>>>16,K+=k>>>16,r[7]=m=k&65535|K<<16,n[7]=N=Q&65535|V<<16,s+=128,o-=128}return s}function I9(t){var e=new pD;e.update(t);var r=e.digest();return e.clean(),r}ei.hash=I9});var ND=E(Ve=>{"use strict";l();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.convertSecretKeyToX25519=Ve.convertPublicKeyToX25519=Ve.verify=Ve.sign=Ve.extractPublicKeyFromSecretKey=Ve.generateKeyPair=Ve.generateKeyPairFromSeed=Ve.SEED_LENGTH=Ve.SECRET_KEY_LENGTH=Ve.PUBLIC_KEY_LENGTH=Ve.SIGNATURE_LENGTH=void 0;var _9=Kc(),Yc=gD(),vD=Hr();Ve.SIGNATURE_LENGTH=64;Ve.PUBLIC_KEY_LENGTH=32;Ve.SECRET_KEY_LENGTH=64;Ve.SEED_LENGTH=32;function Ie(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var S9=new Uint8Array(32);S9[0]=9;var N1=Ie(),Ra=Ie([1]),T9=Ie([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),C9=Ie([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),yD=Ie([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),mD=Ie([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x9=Ie([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Gi(t,e){for(let r=0;r<16;r++)t[r]=e[r]|0}function C1(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function AD(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function Jc(t,e){let r=Ie(),n=Ie();for(let i=0;i<16;i++)n[i]=e[i];C1(n),C1(n),C1(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,AD(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function bD(t,e){let r=0;for(let n=0;n<32;n++)r|=t[n]^e[n];return(1&r-1>>>8)-1}function wD(t,e){let r=new Uint8Array(32),n=new Uint8Array(32);return Jc(r,t),Jc(n,e),bD(r,n)}function ID(t){let e=new Uint8Array(32);return Jc(e,t),e[0]&1}function N9(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Ks(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function Js(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function je(t,e,r){let n,i,s=0,o=0,a=0,u=0,c=0,f=0,h=0,g=0,y=0,m=0,T=0,O=0,B=0,W=0,U=0,A=0,_=0,N=0,I=0,S=0,R=0,J=0,Q=0,V=0,k=0,K=0,ge=0,ue=0,re=0,Y=0,se=0,te=r[0],ie=r[1],M=r[2],le=r[3],ae=r[4],he=r[5],oe=r[6],ce=r[7],w=r[8],v=r[9],b=r[10],P=r[11],C=r[12],D=r[13],L=r[14],x=r[15];n=e[0],s+=n*te,o+=n*ie,a+=n*M,u+=n*le,c+=n*ae,f+=n*he,h+=n*oe,g+=n*ce,y+=n*w,m+=n*v,T+=n*b,O+=n*P,B+=n*C,W+=n*D,U+=n*L,A+=n*x,n=e[1],o+=n*te,a+=n*ie,u+=n*M,c+=n*le,f+=n*ae,h+=n*he,g+=n*oe,y+=n*ce,m+=n*w,T+=n*v,O+=n*b,B+=n*P,W+=n*C,U+=n*D,A+=n*L,_+=n*x,n=e[2],a+=n*te,u+=n*ie,c+=n*M,f+=n*le,h+=n*ae,g+=n*he,y+=n*oe,m+=n*ce,T+=n*w,O+=n*v,B+=n*b,W+=n*P,U+=n*C,A+=n*D,_+=n*L,N+=n*x,n=e[3],u+=n*te,c+=n*ie,f+=n*M,h+=n*le,g+=n*ae,y+=n*he,m+=n*oe,T+=n*ce,O+=n*w,B+=n*v,W+=n*b,U+=n*P,A+=n*C,_+=n*D,N+=n*L,I+=n*x,n=e[4],c+=n*te,f+=n*ie,h+=n*M,g+=n*le,y+=n*ae,m+=n*he,T+=n*oe,O+=n*ce,B+=n*w,W+=n*v,U+=n*b,A+=n*P,_+=n*C,N+=n*D,I+=n*L,S+=n*x,n=e[5],f+=n*te,h+=n*ie,g+=n*M,y+=n*le,m+=n*ae,T+=n*he,O+=n*oe,B+=n*ce,W+=n*w,U+=n*v,A+=n*b,_+=n*P,N+=n*C,I+=n*D,S+=n*L,R+=n*x,n=e[6],h+=n*te,g+=n*ie,y+=n*M,m+=n*le,T+=n*ae,O+=n*he,B+=n*oe,W+=n*ce,U+=n*w,A+=n*v,_+=n*b,N+=n*P,I+=n*C,S+=n*D,R+=n*L,J+=n*x,n=e[7],g+=n*te,y+=n*ie,m+=n*M,T+=n*le,O+=n*ae,B+=n*he,W+=n*oe,U+=n*ce,A+=n*w,_+=n*v,N+=n*b,I+=n*P,S+=n*C,R+=n*D,J+=n*L,Q+=n*x,n=e[8],y+=n*te,m+=n*ie,T+=n*M,O+=n*le,B+=n*ae,W+=n*he,U+=n*oe,A+=n*ce,_+=n*w,N+=n*v,I+=n*b,S+=n*P,R+=n*C,J+=n*D,Q+=n*L,V+=n*x,n=e[9],m+=n*te,T+=n*ie,O+=n*M,B+=n*le,W+=n*ae,U+=n*he,A+=n*oe,_+=n*ce,N+=n*w,I+=n*v,S+=n*b,R+=n*P,J+=n*C,Q+=n*D,V+=n*L,k+=n*x,n=e[10],T+=n*te,O+=n*ie,B+=n*M,W+=n*le,U+=n*ae,A+=n*he,_+=n*oe,N+=n*ce,I+=n*w,S+=n*v,R+=n*b,J+=n*P,Q+=n*C,V+=n*D,k+=n*L,K+=n*x,n=e[11],O+=n*te,B+=n*ie,W+=n*M,U+=n*le,A+=n*ae,_+=n*he,N+=n*oe,I+=n*ce,S+=n*w,R+=n*v,J+=n*b,Q+=n*P,V+=n*C,k+=n*D,K+=n*L,ge+=n*x,n=e[12],B+=n*te,W+=n*ie,U+=n*M,A+=n*le,_+=n*ae,N+=n*he,I+=n*oe,S+=n*ce,R+=n*w,J+=n*v,Q+=n*b,V+=n*P,k+=n*C,K+=n*D,ge+=n*L,ue+=n*x,n=e[13],W+=n*te,U+=n*ie,A+=n*M,_+=n*le,N+=n*ae,I+=n*he,S+=n*oe,R+=n*ce,J+=n*w,Q+=n*v,V+=n*b,k+=n*P,K+=n*C,ge+=n*D,ue+=n*L,re+=n*x,n=e[14],U+=n*te,A+=n*ie,_+=n*M,N+=n*le,I+=n*ae,S+=n*he,R+=n*oe,J+=n*ce,Q+=n*w,V+=n*v,k+=n*b,K+=n*P,ge+=n*C,ue+=n*D,re+=n*L,Y+=n*x,n=e[15],A+=n*te,_+=n*ie,N+=n*M,I+=n*le,S+=n*ae,R+=n*he,J+=n*oe,Q+=n*ce,V+=n*w,k+=n*v,K+=n*b,ge+=n*P,ue+=n*C,re+=n*D,Y+=n*L,se+=n*x,s+=38*_,o+=38*N,a+=38*I,u+=38*S,c+=38*R,f+=38*J,h+=38*Q,g+=38*V,y+=38*k,m+=38*K,T+=38*ge,O+=38*ue,B+=38*re,W+=38*Y,U+=38*se,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=W+i+65535,i=Math.floor(n/65536),W=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=W+i+65535,i=Math.floor(n/65536),W=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=g,t[8]=y,t[9]=m,t[10]=T,t[11]=O,t[12]=B,t[13]=W,t[14]=U,t[15]=A}function Ys(t,e){je(t,e,e)}function _D(t,e){let r=Ie(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)Ys(r,r),n!==2&&n!==4&&je(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function O9(t,e){let r=Ie(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)Ys(r,r),n!==1&&je(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function O1(t,e){let r=Ie(),n=Ie(),i=Ie(),s=Ie(),o=Ie(),a=Ie(),u=Ie(),c=Ie(),f=Ie();Js(r,t[1],t[0]),Js(f,e[1],e[0]),je(r,r,f),Ks(n,t[0],t[1]),Ks(f,e[0],e[1]),je(n,n,f),je(i,t[3],e[3]),je(i,i,C9),je(s,t[2],e[2]),Ks(s,s,s),Js(o,n,r),Js(a,s,i),Ks(u,s,i),Ks(c,n,r),je(t[0],o,a),je(t[1],c,u),je(t[2],u,a),je(t[3],o,c)}function ED(t,e,r){for(let n=0;n<4;n++)AD(t[n],e[n],r)}function P1(t,e){let r=Ie(),n=Ie(),i=Ie();_D(i,e[2]),je(r,e[0],i),je(n,e[1],i),Jc(t,n),t[31]^=ID(r)<<7}function SD(t,e,r){Gi(t[0],N1),Gi(t[1],Ra),Gi(t[2],Ra),Gi(t[3],N1);for(let n=255;n>=0;--n){let i=r[n/8|0]>>(n&7)&1;ED(t,e,i),O1(e,t),O1(t,t),ED(t,e,i)}}function R1(t,e){let r=[Ie(),Ie(),Ie(),Ie()];Gi(r[0],yD),Gi(r[1],mD),Gi(r[2],Ra),je(r[3],yD,mD),SD(t,r,e)}function TD(t){if(t.length!==Ve.SEED_LENGTH)throw new Error(`ed25519: seed must be ${Ve.SEED_LENGTH} bytes`);let e=(0,Yc.hash)(t);e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(32),n=[Ie(),Ie(),Ie(),Ie()];R1(n,e),P1(r,n);let i=new Uint8Array(64);return i.set(t),i.set(r,32),{publicKey:r,secretKey:i}}Ve.generateKeyPairFromSeed=TD;function D9(t){let e=(0,_9.randomBytes)(32,t),r=TD(e);return(0,vD.wipe)(e),r}Ve.generateKeyPair=D9;function P9(t){if(t.length!==Ve.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${Ve.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}Ve.extractPublicKeyFromSecretKey=P9;var x1=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function CD(t,e){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*x1[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*x1[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*x1[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function D1(t){let e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let r=0;r<64;r++)t[r]=0;CD(t,e)}function R9(t,e){let r=new Float64Array(64),n=[Ie(),Ie(),Ie(),Ie()],i=(0,Yc.hash)(t.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;let s=new Uint8Array(64);s.set(i.subarray(32),32);let o=new Yc.SHA512;o.update(s.subarray(32)),o.update(e);let a=o.digest();o.clean(),D1(a),R1(n,a),P1(s,n),o.reset(),o.update(s.subarray(0,32)),o.update(t.subarray(32)),o.update(e);let u=o.digest();D1(u);for(let c=0;c<32;c++)r[c]=a[c];for(let c=0;c<32;c++)for(let f=0;f<32;f++)r[c+f]+=u[c]*i[f];return CD(s.subarray(32),r),s}Ve.sign=R9;function xD(t,e){let r=Ie(),n=Ie(),i=Ie(),s=Ie(),o=Ie(),a=Ie(),u=Ie();return Gi(t[2],Ra),N9(t[1],e),Ys(i,t[1]),je(s,i,T9),Js(i,i,t[2]),Ks(s,t[2],s),Ys(o,s),Ys(a,o),je(u,a,o),je(r,u,i),je(r,r,s),O9(r,r),je(r,r,i),je(r,r,s),je(r,r,s),je(t[0],r,s),Ys(n,t[0]),je(n,n,s),wD(n,i)&&je(t[0],t[0],x9),Ys(n,t[0]),je(n,n,s),wD(n,i)?-1:(ID(t[0])===e[31]>>7&&Js(t[0],N1,t[0]),je(t[3],t[0],t[1]),0)}function B9(t,e,r){let n=new Uint8Array(32),i=[Ie(),Ie(),Ie(),Ie()],s=[Ie(),Ie(),Ie(),Ie()];if(r.length!==Ve.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${Ve.SIGNATURE_LENGTH} bytes`);if(xD(s,t))return!1;let o=new Yc.SHA512;o.update(r.subarray(0,32)),o.update(t),o.update(e);let a=o.digest();return D1(a),SD(i,s,a),R1(s,r.subarray(32)),O1(i,s),P1(n,i),!bD(r,n)}Ve.verify=B9;function L9(t){let e=[Ie(),Ie(),Ie(),Ie()];if(xD(e,t))throw new Error("Ed25519: invalid public key");let r=Ie(),n=Ie(),i=e[1];Ks(r,Ra,i),Js(n,Ra,i),_D(n,n),je(r,r,n);let s=new Uint8Array(32);return Jc(s,r),s}Ve.convertPublicKeyToX25519=L9;function F9(t){let e=(0,Yc.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(e.subarray(0,32));return(0,vD.wipe)(e),r}Ve.convertSecretKeyToX25519=F9});var ep,tp,Xs,Ba,rp,Xc,np,ip,sp,La,op,ap,OD,DD,up=fe(()=>{l();ep="EdDSA",tp="JWT",Xs=".",Ba="base64url",rp="utf8",Xc="utf8",np=":",ip="did",sp="key",La="base58btc",op="z",ap="K36",OD=32,DD=32});function ki(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var Zc=fe(()=>{l()});function Fa(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ki(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var cp=fe(()=>{l();Zc()});function lp(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=Fa(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return ki(r)}var B1=fe(()=>{l();cp();Zc()});function M9(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var T=0,O=0,B=0,W=m.length;B!==W&&m[B]===0;)B++,T++;for(var U=(W-B)*f+1>>>0,A=new Uint8Array(U);B!==W;){for(var _=m[B],N=0,I=U-1;(_!==0||N<O)&&I!==-1;I--,N++)_+=256*A[I]>>>0,A[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");O=N,B++}for(var S=U-O;S!==U&&A[S]===0;)S++;for(var R=u.repeat(T);S<U;++S)R+=t.charAt(A[S]);return R}function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var T=0;if(m[T]!==" "){for(var O=0,B=0;m[T]===u;)O++,T++;for(var W=(m.length-T)*c+1>>>0,U=new Uint8Array(W);m[T];){var A=r[m.charCodeAt(T)];if(A===255)return;for(var _=0,N=W-1;(A!==0||_<B)&&N!==-1;N--,_++)A+=a*U[N]>>>0,U[N]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");B=_,T++}if(m[T]!==" "){for(var I=W-B;I!==W&&U[I]===0;)I++;for(var S=new Uint8Array(O+(W-I)),R=O;I!==W;)S[R++]=U[I++];return S}}}function y(m){var T=g(m);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:g,decode:y}}var U9,q9,PD,RD=fe(()=>{l();U9=M9,q9=U9,PD=q9});var She,BD,ti,LD,FD,ji=fe(()=>{l();She=new Uint8Array(0),BD=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ti=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},LD=t=>new TextEncoder().encode(t),FD=t=>new TextDecoder().decode(t)});var L1,F1,M1,UD,U1,Ma,Qi,V9,H9,pt,Zr=fe(()=>{l();RD();ji();L1=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},F1=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return UD(this,e)}},M1=class{constructor(e){this.decoders=e}or(e){return UD(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},UD=(t,e)=>new M1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),U1=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new L1(e,r,n),this.decoder=new F1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ma=({name:t,prefix:e,encode:r,decode:n})=>new U1(t,e,r,n),Qi=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=PD(r,e);return Ma({prefix:t,name:e,encode:n,decode:s=>ti(i(s))})},V9=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},H9=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},pt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ma({prefix:e,name:t,encode(i){return H9(i,n,r)},decode(i){return V9(i,n,r,t)}})});var q1={};ct(q1,{identity:()=>G9});var G9,qD=fe(()=>{l();Zr();ji();G9=Ma({prefix:"\0",name:"identity",encode:t=>FD(t),decode:t=>LD(t)})});var V1={};ct(V1,{base2:()=>k9});var k9,VD=fe(()=>{l();Zr();k9=pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var H1={};ct(H1,{base8:()=>j9});var j9,HD=fe(()=>{l();Zr();j9=pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var G1={};ct(G1,{base10:()=>Q9});var Q9,GD=fe(()=>{l();Zr();Q9=Qi({prefix:"9",name:"base10",alphabet:"0123456789"})});var k1={};ct(k1,{base16:()=>W9,base16upper:()=>z9});var W9,z9,kD=fe(()=>{l();Zr();W9=pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),z9=pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var j1={};ct(j1,{base32:()=>Ua,base32hex:()=>J9,base32hexpad:()=>Z9,base32hexpadupper:()=>eW,base32hexupper:()=>X9,base32pad:()=>K9,base32padupper:()=>Y9,base32upper:()=>$9,base32z:()=>tW});var Ua,$9,K9,Y9,J9,X9,Z9,eW,tW,Q1=fe(()=>{l();Zr();Ua=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$9=pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),K9=pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Y9=pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),J9=pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),X9=pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Z9=pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eW=pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tW=pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var W1={};ct(W1,{base36:()=>rW,base36upper:()=>nW});var rW,nW,jD=fe(()=>{l();Zr();rW=Qi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nW=Qi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var z1={};ct(z1,{base58btc:()=>xn,base58flickr:()=>iW});var xn,iW,$1=fe(()=>{l();Zr();xn=Qi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iW=Qi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var K1={};ct(K1,{base64:()=>sW,base64pad:()=>oW,base64url:()=>aW,base64urlpad:()=>uW});var sW,oW,aW,uW,QD=fe(()=>{l();Zr();sW=pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oW=pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aW=pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uW=pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var Y1={};ct(Y1,{base256emoji:()=>dW});function fW(t){return t.reduce((e,r)=>(e+=cW[r],e),"")}function hW(t){let e=[];for(let r of t){let n=lW[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var WD,cW,lW,dW,zD=fe(()=>{l();Zr();WD=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),cW=WD.reduce((t,e,r)=>(t[r]=e,t),[]),lW=WD.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);dW=Ma({prefix:"\u{1F680}",name:"base256emoji",encode:fW,decode:hW})});function YD(t,e,r){e=e||[],r=r||0;for(var n=r;t>=mW;)e[r++]=t&255|$D,t/=128;for(;t&yW;)e[r++]=t&255|$D,t>>>=7;return e[r]=t|0,YD.bytes=r-n+1,e}function J1(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw J1.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&KD)<<i:(o&KD)*Math.pow(2,i),i+=7}while(o>=EW);return J1.bytes=s-n,r}var pW,$D,gW,yW,mW,wW,EW,KD,vW,AW,bW,IW,_W,SW,TW,CW,xW,NW,OW,DW,el,JD=fe(()=>{l();pW=YD,$D=128,gW=127,yW=~gW,mW=Math.pow(2,31);wW=J1,EW=128,KD=127;vW=Math.pow(2,7),AW=Math.pow(2,14),bW=Math.pow(2,21),IW=Math.pow(2,28),_W=Math.pow(2,35),SW=Math.pow(2,42),TW=Math.pow(2,49),CW=Math.pow(2,56),xW=Math.pow(2,63),NW=function(t){return t<vW?1:t<AW?2:t<bW?3:t<IW?4:t<_W?5:t<SW?6:t<TW?7:t<CW?8:t<xW?9:10},OW={encode:pW,decode:wW,encodingLength:NW},DW=OW,el=DW});var tl,qa,Va,hp=fe(()=>{l();JD();tl=(t,e=0)=>[el.decode(t,e),el.decode.bytes],qa=(t,e,r=0)=>(el.encode(t,e,r),e),Va=t=>el.encodingLength(t)});var Zs,XD,ZD,Ha,nl=fe(()=>{l();ji();hp();Zs=(t,e)=>{let r=e.byteLength,n=Va(t),i=n+Va(r),s=new Uint8Array(i+r);return qa(t,s,0),qa(r,s,n),s.set(e,i),new Ha(t,r,e,s)},XD=t=>{let e=ti(t),[r,n]=tl(e),[i,s]=tl(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Ha(r,i,o,e)},ZD=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&BD(t.bytes,e.bytes),Ha=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var Z1,X1,eA=fe(()=>{l();nl();Z1=({name:t,code:e,encode:r})=>new X1(t,e,r),X1=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Zs(this.code,r):r.then(n=>Zs(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var tA={};ct(tA,{sha256:()=>PW,sha512:()=>RW});var tP,PW,RW,rP=fe(()=>{l();eA();tP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),PW=Z1({name:"sha2-256",code:18,encode:tP("SHA-256")}),RW=Z1({name:"sha2-512",code:19,encode:tP("SHA-512")})});var rA={};ct(rA,{identity:()=>FW});var nP,BW,iP,LW,FW,sP=fe(()=>{l();ji();nl();nP=0,BW="identity",iP=ti,LW=t=>Zs(nP,iP(t)),FW={code:nP,name:BW,encode:iP,digest:LW}});var oP=fe(()=>{l();ji()});var fde,hde,aP=fe(()=>{l();fde=new TextEncoder,hde=new TextDecoder});var gp,qW,VW,HW,il,GW,uP,cP,dp,pp,kW,jW,QW,lP=fe(()=>{l();hp();nl();$1();Q1();ji();gp=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:pp,byteLength:pp,code:dp,version:dp,multihash:dp,bytes:dp,_baseCache:pp,asCID:pp})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==il)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==GW)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Zs(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ZD(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return VW(r,i,e||xn.encoder);default:return HW(r,i,e||Ua.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return jW(/^0\.0/,QW),!!(e&&(e[cP]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new t(r,n,i,s||uP(r,n,i.bytes))}else if(e!=null&&e[cP]===!0){let{version:r,multihash:n,code:i}=e,s=XD(n);return t.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==il)throw new Error(`Version 0 CID must use dag-pb (code: ${il}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=uP(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,il,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=ti(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Ha(r.multihashCode,r.digestSize,s,i);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,g]=tl(e.subarray(r));return r+=g,h},i=n(),s=il;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(e,r){let[n,i]=qW(e,r),s=t.decode(i);return s._baseCache.set(n,e),s}},qW=(t,e)=>{switch(t[0]){case"Q":{let r=e||xn;return[xn.prefix,r.decode(`${xn.prefix}${t}`)]}case xn.prefix:{let r=e||xn;return[xn.prefix,r.decode(t)]}case Ua.prefix:{let r=e||Ua;return[Ua.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},VW=(t,e,r)=>{let{prefix:n}=r;if(n!==xn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},HW=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},il=112,GW=18,uP=(t,e,r)=>{let n=Va(t),i=n+Va(e),s=new Uint8Array(i+r.byteLength);return qa(t,s,0),qa(e,s,n),s.set(r,i),s},cP=Symbol.for("@ipld/js-cid/CID"),dp={writable:!1,configurable:!1,enumerable:!0},pp={writable:!1,enumerable:!1,configurable:!1},kW="0.0.0-dev",jW=(t,e)=>{if(t.test(kW))console.warn(e);else throw new Error(e)},QW=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var fP=fe(()=>{l();lP();hp();ji();eA();nl()});var nA,Ide,hP=fe(()=>{l();qD();VD();HD();GD();kD();Q1();jD();$1();QD();zD();rP();sP();oP();aP();fP();nA={...q1,...V1,...H1,...G1,...k1,...j1,...W1,...z1,...K1,...Y1},Ide={...tA,...rA}});function pP(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var dP,iA,WW,yp,sA=fe(()=>{l();hP();cp();dP=pP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),iA=pP("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Fa(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),WW={utf8:dP,"utf-8":dP,hex:nA.base16,latin1:iA,ascii:iA,binary:iA,...nA},yp=WW});function ri(t,e="utf8"){let r=yp[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var oA=fe(()=>{l();sA()});function Nn(t,e="utf8"){let r=yp[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ki(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var aA=fe(()=>{l();sA();Zc()});function sl(t){return Vi(ri(Nn(t,Ba),rp))}function ol(t){return ri(Nn(Hi(t),rp),Ba)}function uA(t){let e=Nn(ap,La),r=op+ri(lp([e,t]),La);return[ip,sp,r].join(np)}function cA(t){let[e,r,n]=t.split(np);if(e!==ip||r!==sp)throw new Error('Issuer must be a DID with method "key"');if(n.slice(0,1)!==op)throw new Error("Issuer must be a key in mulicodec format");let s=Nn(n.slice(1),La);if(ri(s.slice(0,2),La)!==ap)throw new Error('Issuer must be a public key with type "Ed25519"');let a=s.slice(2);if(a.length!==32)throw new Error("Issuer must be a public key with length 32 bytes");return a}function gP(t){return ri(t,Ba)}function yP(t){return Nn(t,Ba)}function lA(t){return Nn([ol(t.header),ol(t.payload)].join(Xs),Xc)}function zW(t){let e=ri(t,Xc).split(Xs),r=sl(e[0]),n=sl(e[1]);return{header:r,payload:n}}function fA(t){return[ol(t.header),ol(t.payload),gP(t.signature)].join(Xs)}function hA(t){let e=t.split(Xs),r=sl(e[0]),n=sl(e[1]),i=yP(e[2]),s=Nn(e.slice(0,2).join(Xs),Xc);return{header:r,payload:n,signature:i,data:s}}var dA=fe(()=>{l();B1();oA();aA();kc();up()});function $W(t=(0,mP.randomBytes)(32)){return Ga.generateKeyPairFromSeed(t)}async function KW(t,e,r,n,i=(0,wP.fromMiliseconds)(Date.now())){let s={alg:ep,typ:tp},o=uA(n.publicKey),a=i+r,u={iss:o,sub:t,aud:e,iat:i,exp:a},c=lA({header:s,payload:u}),f=Ga.sign(n.secretKey,c);return fA({header:s,payload:u,signature:f})}async function YW(t){let{header:e,payload:r,data:n,signature:i}=hA(t);if(e.alg!==ep||e.typ!==tp)throw new Error("JWT must use EdDSA algorithm");let s=cA(r.iss);return Ga.verify(s,n,i)}var Ga,mP,wP,EP=fe(()=>{l();Ga=be(ND()),mP=be(Kc()),wP=be($s());up();dA()});var vP=fe(()=>{l()});var AP={};ct(AP,{DATA_ENCODING:()=>Xc,DID_DELIMITER:()=>np,DID_METHOD:()=>sp,DID_PREFIX:()=>ip,JSON_ENCODING:()=>rp,JWT_DELIMITER:()=>Xs,JWT_ENCODING:()=>Ba,JWT_IRIDIUM_ALG:()=>ep,JWT_IRIDIUM_TYP:()=>tp,KEY_PAIR_SEED_LENGTH:()=>DD,MULTICODEC_ED25519_BASE:()=>op,MULTICODEC_ED25519_ENCODING:()=>La,MULTICODEC_ED25519_HEADER:()=>ap,MULTICODEC_ED25519_LENGTH:()=>OD,decodeData:()=>zW,decodeIss:()=>cA,decodeJSON:()=>sl,decodeJWT:()=>hA,decodeSig:()=>yP,encodeData:()=>lA,encodeIss:()=>uA,encodeJSON:()=>ol,encodeJWT:()=>fA,encodeSig:()=>gP,generateKeyPair:()=>$W,signJWT:()=>KW,verifyJWT:()=>YW});var bP=fe(()=>{l();EP();up();vP();dA()});var _P=E(mp=>{"use strict";l();Object.defineProperty(mp,"__esModule",{value:!0});var Zt=Oa(),pA=Hr(),JW=20;function XW(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],c=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],g=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],O=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],W=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=n,A=i,_=s,N=o,I=a,S=u,R=c,J=f,Q=h,V=g,k=y,K=m,ge=T,ue=O,re=B,Y=W,se=0;se<JW;se+=2)U=U+I|0,ge^=U,ge=ge>>>16|ge<<16,Q=Q+ge|0,I^=Q,I=I>>>20|I<<12,A=A+S|0,ue^=A,ue=ue>>>16|ue<<16,V=V+ue|0,S^=V,S=S>>>20|S<<12,_=_+R|0,re^=_,re=re>>>16|re<<16,k=k+re|0,R^=k,R=R>>>20|R<<12,N=N+J|0,Y^=N,Y=Y>>>16|Y<<16,K=K+Y|0,J^=K,J=J>>>20|J<<12,_=_+R|0,re^=_,re=re>>>24|re<<8,k=k+re|0,R^=k,R=R>>>25|R<<7,N=N+J|0,Y^=N,Y=Y>>>24|Y<<8,K=K+Y|0,J^=K,J=J>>>25|J<<7,A=A+S|0,ue^=A,ue=ue>>>24|ue<<8,V=V+ue|0,S^=V,S=S>>>25|S<<7,U=U+I|0,ge^=U,ge=ge>>>24|ge<<8,Q=Q+ge|0,I^=Q,I=I>>>25|I<<7,U=U+S|0,Y^=U,Y=Y>>>16|Y<<16,k=k+Y|0,S^=k,S=S>>>20|S<<12,A=A+R|0,ge^=A,ge=ge>>>16|ge<<16,K=K+ge|0,R^=K,R=R>>>20|R<<12,_=_+J|0,ue^=_,ue=ue>>>16|ue<<16,Q=Q+ue|0,J^=Q,J=J>>>20|J<<12,N=N+I|0,re^=N,re=re>>>16|re<<16,V=V+re|0,I^=V,I=I>>>20|I<<12,_=_+J|0,ue^=_,ue=ue>>>24|ue<<8,Q=Q+ue|0,J^=Q,J=J>>>25|J<<7,N=N+I|0,re^=N,re=re>>>24|re<<8,V=V+re|0,I^=V,I=I>>>25|I<<7,A=A+R|0,ge^=A,ge=ge>>>24|ge<<8,K=K+ge|0,R^=K,R=R>>>25|R<<7,U=U+S|0,Y^=U,Y=Y>>>24|Y<<8,k=k+Y|0,S^=k,S=S>>>25|S<<7;Zt.writeUint32LE(U+n|0,t,0),Zt.writeUint32LE(A+i|0,t,4),Zt.writeUint32LE(_+s|0,t,8),Zt.writeUint32LE(N+o|0,t,12),Zt.writeUint32LE(I+a|0,t,16),Zt.writeUint32LE(S+u|0,t,20),Zt.writeUint32LE(R+c|0,t,24),Zt.writeUint32LE(J+f|0,t,28),Zt.writeUint32LE(Q+h|0,t,32),Zt.writeUint32LE(V+g|0,t,36),Zt.writeUint32LE(k+y|0,t,40),Zt.writeUint32LE(K+m|0,t,44),Zt.writeUint32LE(ge+T|0,t,48),Zt.writeUint32LE(ue+O|0,t,52),Zt.writeUint32LE(re+B|0,t,56),Zt.writeUint32LE(Y+W|0,t,60)}function IP(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),u=0;u<r.length;u+=64){XW(a,s,t);for(var c=u;c<u+64&&c<r.length;c++)n[c]=r[c]^a[c-u];ez(s,0,o)}return pA.wipe(a),i===0&&pA.wipe(s),n}mp.streamXOR=IP;function ZW(t,e,r,n){return n===void 0&&(n=0),pA.wipe(r),IP(t,e,r,r,n)}mp.stream=ZW;function ez(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var wp=E(ka=>{"use strict";l();Object.defineProperty(ka,"__esModule",{value:!0});function tz(t,e,r){return~(t-1)&e|t-1&r}ka.select=tz;function rz(t,e){return(t|0)-(e|0)-1>>>31&1}ka.lessOrEqual=rz;function SP(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ka.compare=SP;function nz(t,e){return t.length===0||e.length===0?!1:SP(t,e)!==0}ka.equal=nz});var CP=E(ni=>{"use strict";l();Object.defineProperty(ni,"__esModule",{value:!0});var iz=wp(),Ep=Hr();ni.DIGEST_LENGTH=16;var TP=function(){function t(e){this.digestLength=ni.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var u=e[12]|e[13]<<8;this._r[7]=(a>>>11|u<<5)&8065;var c=e[14]|e[15]<<8;this._r[8]=(u>>>8|c<<8)&8191,this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,s=this._h[0],o=this._h[1],a=this._h[2],u=this._h[3],c=this._h[4],f=this._h[5],h=this._h[6],g=this._h[7],y=this._h[8],m=this._h[9],T=this._r[0],O=this._r[1],B=this._r[2],W=this._r[3],U=this._r[4],A=this._r[5],_=this._r[6],N=this._r[7],I=this._r[8],S=this._r[9];n>=16;){var R=e[r+0]|e[r+1]<<8;s+=R&8191;var J=e[r+2]|e[r+3]<<8;o+=(R>>>13|J<<3)&8191;var Q=e[r+4]|e[r+5]<<8;a+=(J>>>10|Q<<6)&8191;var V=e[r+6]|e[r+7]<<8;u+=(Q>>>7|V<<9)&8191;var k=e[r+8]|e[r+9]<<8;c+=(V>>>4|k<<12)&8191,f+=k>>>1&8191;var K=e[r+10]|e[r+11]<<8;h+=(k>>>14|K<<2)&8191;var ge=e[r+12]|e[r+13]<<8;g+=(K>>>11|ge<<5)&8191;var ue=e[r+14]|e[r+15]<<8;y+=(ge>>>8|ue<<8)&8191,m+=ue>>>5|i;var re=0,Y=re;Y+=s*T,Y+=o*(5*S),Y+=a*(5*I),Y+=u*(5*N),Y+=c*(5*_),re=Y>>>13,Y&=8191,Y+=f*(5*A),Y+=h*(5*U),Y+=g*(5*W),Y+=y*(5*B),Y+=m*(5*O),re+=Y>>>13,Y&=8191;var se=re;se+=s*O,se+=o*T,se+=a*(5*S),se+=u*(5*I),se+=c*(5*N),re=se>>>13,se&=8191,se+=f*(5*_),se+=h*(5*A),se+=g*(5*U),se+=y*(5*W),se+=m*(5*B),re+=se>>>13,se&=8191;var te=re;te+=s*B,te+=o*O,te+=a*T,te+=u*(5*S),te+=c*(5*I),re=te>>>13,te&=8191,te+=f*(5*N),te+=h*(5*_),te+=g*(5*A),te+=y*(5*U),te+=m*(5*W),re+=te>>>13,te&=8191;var ie=re;ie+=s*W,ie+=o*B,ie+=a*O,ie+=u*T,ie+=c*(5*S),re=ie>>>13,ie&=8191,ie+=f*(5*I),ie+=h*(5*N),ie+=g*(5*_),ie+=y*(5*A),ie+=m*(5*U),re+=ie>>>13,ie&=8191;var M=re;M+=s*U,M+=o*W,M+=a*B,M+=u*O,M+=c*T,re=M>>>13,M&=8191,M+=f*(5*S),M+=h*(5*I),M+=g*(5*N),M+=y*(5*_),M+=m*(5*A),re+=M>>>13,M&=8191;var le=re;le+=s*A,le+=o*U,le+=a*W,le+=u*B,le+=c*O,re=le>>>13,le&=8191,le+=f*T,le+=h*(5*S),le+=g*(5*I),le+=y*(5*N),le+=m*(5*_),re+=le>>>13,le&=8191;var ae=re;ae+=s*_,ae+=o*A,ae+=a*U,ae+=u*W,ae+=c*B,re=ae>>>13,ae&=8191,ae+=f*O,ae+=h*T,ae+=g*(5*S),ae+=y*(5*I),ae+=m*(5*N),re+=ae>>>13,ae&=8191;var he=re;he+=s*N,he+=o*_,he+=a*A,he+=u*U,he+=c*W,re=he>>>13,he&=8191,he+=f*B,he+=h*O,he+=g*T,he+=y*(5*S),he+=m*(5*I),re+=he>>>13,he&=8191;var oe=re;oe+=s*I,oe+=o*N,oe+=a*_,oe+=u*A,oe+=c*U,re=oe>>>13,oe&=8191,oe+=f*W,oe+=h*B,oe+=g*O,oe+=y*T,oe+=m*(5*S),re+=oe>>>13,oe&=8191;var ce=re;ce+=s*S,ce+=o*I,ce+=a*N,ce+=u*_,ce+=c*A,re=ce>>>13,ce&=8191,ce+=f*U,ce+=h*W,ce+=g*B,ce+=y*O,ce+=m*T,re+=ce>>>13,ce&=8191,re=(re<<2)+re|0,re=re+Y|0,Y=re&8191,re=re>>>13,se+=re,s=Y,o=se,a=te,u=ie,c=M,f=le,h=ae,g=he,y=oe,m=ce,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=u,this._h[4]=c,this._h[5]=f,this._h[6]=h,this._h[7]=g,this._h[8]=y,this._h[9]=m},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=8192,s=(i^1)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Ep.wipe(this._buffer),Ep.wipe(this._r),Ep.wipe(this._h),Ep.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();ni.Poly1305=TP;function sz(t,e){var r=new TP(t);r.update(e);var n=r.digest();return r.clean(),n}ni.oneTimeAuth=sz;function oz(t,e){return t.length!==ni.DIGEST_LENGTH||e.length!==ni.DIGEST_LENGTH?!1:iz.equal(t,e)}ni.equal=oz});var OP=E(ii=>{"use strict";l();Object.defineProperty(ii,"__esModule",{value:!0});var vp=_P(),az=CP(),al=Hr(),xP=Oa(),uz=wp();ii.KEY_LENGTH=32;ii.NONCE_LENGTH=12;ii.TAG_LENGTH=16;var NP=new Uint8Array(16),cz=function(){function t(e){if(this.nonceLength=ii.NONCE_LENGTH,this.tagLength=ii.TAG_LENGTH,e.length!==ii.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);vp.stream(this._key,s,o,4);var a=r.length+this.tagLength,u;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(a);return vp.streamXOR(this._key,s,r,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),o,u.subarray(0,u.length-this.tagLength),n),al.wipe(s),u},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);vp.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),n),!uz.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var u=r.length-this.tagLength,c;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return vp.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),c,4),al.wipe(s),c},t.prototype.clean=function(){return al.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new az.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(NP.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(NP.subarray(n.length%16));var o=new Uint8Array(8);i&&xP.writeUint64LE(i.length,o),s.update(o),xP.writeUint64LE(n.length,o),s.update(o);for(var a=s.digest(),u=0;u<a.length;u++)e[u]=a[u];s.clean(),al.wipe(a),al.wipe(o)},t}();ii.ChaCha20Poly1305=cz});var DP=E(gA=>{"use strict";l();Object.defineProperty(gA,"__esModule",{value:!0});function lz(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}gA.isSerializableHash=lz});var RP=E(ul=>{"use strict";l();Object.defineProperty(ul,"__esModule",{value:!0});var On=DP(),fz=wp(),hz=Hr(),PP=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),On.isSerializableHash(this._inner)&&On.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),hz.wipe(n)}return t.prototype.reset=function(){if(!On.isSerializableHash(this._inner)||!On.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){On.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),On.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!On.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!On.isSerializableHash(this._inner)||!On.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!On.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();ul.HMAC=PP;function dz(t,e,r){var n=new PP(t,e);n.update(r);var i=n.digest();return n.clean(),i}ul.hmac=dz;ul.equal=fz.equal});var FP=E(yA=>{"use strict";l();Object.defineProperty(yA,"__esModule",{value:!0});var BP=RP(),LP=Hr(),pz=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=BP.hmac(this._hash,n,r);this._hmac=new BP.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),LP.wipe(this._buffer),LP.wipe(this._counter),this._bufpos=0},t}();yA.HKDF=pz});var UP=E(Wi=>{"use strict";l();Object.defineProperty(Wi,"__esModule",{value:!0});var bp=Oa(),Ap=Hr();Wi.DIGEST_LENGTH=32;Wi.BLOCK_SIZE=64;var MP=function(){function t(){this.digestLength=Wi.DIGEST_LENGTH,this.blockSize=Wi.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){Ap.wipe(this._buffer),Ap.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(mA(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=mA(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;bp.writeUint32BE(i,this._buffer,o-8),bp.writeUint32BE(s,this._buffer,o-4),mA(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)bp.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){Ap.wipe(e.state),e.buffer&&Ap.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Wi.SHA256=MP;var gz=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function mA(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],a=e[2],u=e[3],c=e[4],f=e[5],h=e[6],g=e[7],y=0;y<16;y++){var m=n+y*4;t[y]=bp.readUint32BE(r,m)}for(var y=16;y<64;y++){var T=t[y-2],O=(T>>>17|T<<15)^(T>>>19|T<<13)^T>>>10;T=t[y-15];var B=(T>>>7|T<<25)^(T>>>18|T<<14)^T>>>3;t[y]=(O+t[y-7]|0)+(B+t[y-16]|0)}for(var y=0;y<64;y++){var O=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&f^~c&h)|0)+(g+(gz[y]+t[y]|0)|0)|0,B=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0;g=h,h=f,f=c,c=u+O|0,u=a,a=o,o=s,s=O+B|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=u,e[4]+=c,e[5]+=f,e[6]+=h,e[7]+=g,n+=64,i-=64}return n}function yz(t){var e=new MP;e.update(t);var r=e.digest();return e.clean(),r}Wi.hash=yz});var GP=E(gt=>{"use strict";l();Object.defineProperty(gt,"__esModule",{value:!0});gt.sharedKey=gt.generateKeyPair=gt.generateKeyPairFromSeed=gt.scalarMultBase=gt.scalarMult=gt.SHARED_KEY_LENGTH=gt.SECRET_KEY_LENGTH=gt.PUBLIC_KEY_LENGTH=void 0;var mz=Kc(),wz=Hr();gt.PUBLIC_KEY_LENGTH=32;gt.SECRET_KEY_LENGTH=32;gt.SHARED_KEY_LENGTH=32;function Dn(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var qP=new Uint8Array(32);qP[0]=9;var Ez=Dn([56129,1]);function wA(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function cl(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function vz(t,e){let r=Dn(),n=Dn();for(let i=0;i<16;i++)n[i]=e[i];wA(n),wA(n),wA(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,cl(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function Az(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Ip(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function _p(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function si(t,e,r){let n,i,s=0,o=0,a=0,u=0,c=0,f=0,h=0,g=0,y=0,m=0,T=0,O=0,B=0,W=0,U=0,A=0,_=0,N=0,I=0,S=0,R=0,J=0,Q=0,V=0,k=0,K=0,ge=0,ue=0,re=0,Y=0,se=0,te=r[0],ie=r[1],M=r[2],le=r[3],ae=r[4],he=r[5],oe=r[6],ce=r[7],w=r[8],v=r[9],b=r[10],P=r[11],C=r[12],D=r[13],L=r[14],x=r[15];n=e[0],s+=n*te,o+=n*ie,a+=n*M,u+=n*le,c+=n*ae,f+=n*he,h+=n*oe,g+=n*ce,y+=n*w,m+=n*v,T+=n*b,O+=n*P,B+=n*C,W+=n*D,U+=n*L,A+=n*x,n=e[1],o+=n*te,a+=n*ie,u+=n*M,c+=n*le,f+=n*ae,h+=n*he,g+=n*oe,y+=n*ce,m+=n*w,T+=n*v,O+=n*b,B+=n*P,W+=n*C,U+=n*D,A+=n*L,_+=n*x,n=e[2],a+=n*te,u+=n*ie,c+=n*M,f+=n*le,h+=n*ae,g+=n*he,y+=n*oe,m+=n*ce,T+=n*w,O+=n*v,B+=n*b,W+=n*P,U+=n*C,A+=n*D,_+=n*L,N+=n*x,n=e[3],u+=n*te,c+=n*ie,f+=n*M,h+=n*le,g+=n*ae,y+=n*he,m+=n*oe,T+=n*ce,O+=n*w,B+=n*v,W+=n*b,U+=n*P,A+=n*C,_+=n*D,N+=n*L,I+=n*x,n=e[4],c+=n*te,f+=n*ie,h+=n*M,g+=n*le,y+=n*ae,m+=n*he,T+=n*oe,O+=n*ce,B+=n*w,W+=n*v,U+=n*b,A+=n*P,_+=n*C,N+=n*D,I+=n*L,S+=n*x,n=e[5],f+=n*te,h+=n*ie,g+=n*M,y+=n*le,m+=n*ae,T+=n*he,O+=n*oe,B+=n*ce,W+=n*w,U+=n*v,A+=n*b,_+=n*P,N+=n*C,I+=n*D,S+=n*L,R+=n*x,n=e[6],h+=n*te,g+=n*ie,y+=n*M,m+=n*le,T+=n*ae,O+=n*he,B+=n*oe,W+=n*ce,U+=n*w,A+=n*v,_+=n*b,N+=n*P,I+=n*C,S+=n*D,R+=n*L,J+=n*x,n=e[7],g+=n*te,y+=n*ie,m+=n*M,T+=n*le,O+=n*ae,B+=n*he,W+=n*oe,U+=n*ce,A+=n*w,_+=n*v,N+=n*b,I+=n*P,S+=n*C,R+=n*D,J+=n*L,Q+=n*x,n=e[8],y+=n*te,m+=n*ie,T+=n*M,O+=n*le,B+=n*ae,W+=n*he,U+=n*oe,A+=n*ce,_+=n*w,N+=n*v,I+=n*b,S+=n*P,R+=n*C,J+=n*D,Q+=n*L,V+=n*x,n=e[9],m+=n*te,T+=n*ie,O+=n*M,B+=n*le,W+=n*ae,U+=n*he,A+=n*oe,_+=n*ce,N+=n*w,I+=n*v,S+=n*b,R+=n*P,J+=n*C,Q+=n*D,V+=n*L,k+=n*x,n=e[10],T+=n*te,O+=n*ie,B+=n*M,W+=n*le,U+=n*ae,A+=n*he,_+=n*oe,N+=n*ce,I+=n*w,S+=n*v,R+=n*b,J+=n*P,Q+=n*C,V+=n*D,k+=n*L,K+=n*x,n=e[11],O+=n*te,B+=n*ie,W+=n*M,U+=n*le,A+=n*ae,_+=n*he,N+=n*oe,I+=n*ce,S+=n*w,R+=n*v,J+=n*b,Q+=n*P,V+=n*C,k+=n*D,K+=n*L,ge+=n*x,n=e[12],B+=n*te,W+=n*ie,U+=n*M,A+=n*le,_+=n*ae,N+=n*he,I+=n*oe,S+=n*ce,R+=n*w,J+=n*v,Q+=n*b,V+=n*P,k+=n*C,K+=n*D,ge+=n*L,ue+=n*x,n=e[13],W+=n*te,U+=n*ie,A+=n*M,_+=n*le,N+=n*ae,I+=n*he,S+=n*oe,R+=n*ce,J+=n*w,Q+=n*v,V+=n*b,k+=n*P,K+=n*C,ge+=n*D,ue+=n*L,re+=n*x,n=e[14],U+=n*te,A+=n*ie,_+=n*M,N+=n*le,I+=n*ae,S+=n*he,R+=n*oe,J+=n*ce,Q+=n*w,V+=n*v,k+=n*b,K+=n*P,ge+=n*C,ue+=n*D,re+=n*L,Y+=n*x,n=e[15],A+=n*te,_+=n*ie,N+=n*M,I+=n*le,S+=n*ae,R+=n*he,J+=n*oe,Q+=n*ce,V+=n*w,k+=n*v,K+=n*b,ge+=n*P,ue+=n*C,re+=n*D,Y+=n*L,se+=n*x,s+=38*_,o+=38*N,a+=38*I,u+=38*S,c+=38*R,f+=38*J,h+=38*Q,g+=38*V,y+=38*k,m+=38*K,T+=38*ge,O+=38*ue,B+=38*re,W+=38*Y,U+=38*se,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=W+i+65535,i=Math.floor(n/65536),W=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=W+i+65535,i=Math.floor(n/65536),W=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=g,t[8]=y,t[9]=m,t[10]=T,t[11]=O,t[12]=B,t[13]=W,t[14]=U,t[15]=A}function ll(t,e){si(t,e,e)}function bz(t,e){let r=Dn();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)ll(r,r),n!==2&&n!==4&&si(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function EA(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=Dn(),s=Dn(),o=Dn(),a=Dn(),u=Dn(),c=Dn();for(let y=0;y<31;y++)r[y]=t[y];r[31]=t[31]&127|64,r[0]&=248,Az(n,e);for(let y=0;y<16;y++)s[y]=n[y];i[0]=a[0]=1;for(let y=254;y>=0;--y){let m=r[y>>>3]>>>(y&7)&1;cl(i,s,m),cl(o,a,m),Ip(u,i,o),_p(i,i,o),Ip(o,s,a),_p(s,s,a),ll(a,u),ll(c,i),si(i,o,i),si(o,s,u),Ip(u,i,o),_p(i,i,o),ll(s,i),_p(o,a,c),si(i,o,Ez),Ip(i,i,a),si(o,o,i),si(i,a,c),si(a,s,n),ll(s,u),cl(i,s,m),cl(o,a,m)}for(let y=0;y<16;y++)n[y+16]=i[y],n[y+32]=o[y],n[y+48]=s[y],n[y+64]=a[y];let f=n.subarray(32),h=n.subarray(16);bz(f,f),si(h,h,f);let g=new Uint8Array(32);return vz(g,h),g}gt.scalarMult=EA;function VP(t){return EA(t,qP)}gt.scalarMultBase=VP;function HP(t){if(t.length!==gt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${gt.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:VP(e),secretKey:e}}gt.generateKeyPairFromSeed=HP;function Iz(t){let e=(0,mz.randomBytes)(32,t),r=HP(e);return(0,wz.wipe)(e),r}gt.generateKeyPair=Iz;function _z(t,e,r=!1){if(t.length!==gt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==gt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=EA(t,e);if(r){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}gt.sharedKey=_z});function kP(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var jP=fe(()=>{l()});function QP(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var WP=fe(()=>{l()});function zP(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=Fa(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return ki(r)}var $P=fe(()=>{l();cp();Zc()});var vA={};ct(vA,{compare:()=>kP,concat:()=>lp,equals:()=>QP,fromString:()=>Nn,toString:()=>ri,xor:()=>zP});var AA=fe(()=>{l();jP();B1();WP();aA();oA();$P()});var o3=E(st=>{"use strict";l();var KP=st&&st.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(st,"__esModule",{value:!0});st.getNodeVersion=st.detectOS=st.parseUserAgent=st.browserName=st.detect=st.ReactNativeInfo=st.BotInfo=st.SearchBotDeviceInfo=st.NodeInfo=st.BrowserInfo=void 0;var XP=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();st.BrowserInfo=XP;var ZP=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=p.default.platform}return t}();st.NodeInfo=ZP;var e3=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();st.SearchBotDeviceInfo=e3;var t3=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();st.BotInfo=t3;var r3=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();st.ReactNativeInfo=r3;var Sz=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Tz=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,YP=3,Cz=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Sz]],JP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function xz(t){return t?bA(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new r3:typeof navigator<"u"?bA(navigator.userAgent):s3()}st.detect=xz;function n3(t){return t!==""&&Cz.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Nz(t){var e=n3(t);return e?e[0]:null}st.browserName=Nz;function bA(t){var e=n3(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new t3;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<YP&&(i=KP(KP([],i,!0),Oz(YP-i.length),!0)):i=[];var s=i.join("."),o=i3(t),a=Tz.exec(t);return a&&a[1]?new e3(r,s,o,a[1]):new XP(r,s,o)}st.parseUserAgent=bA;function i3(t){for(var e=0,r=JP.length;e<r;e++){var n=JP[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}st.detectOS=i3;function s3(){var t=typeof p.default<"u"&&p.default.version;return t?new ZP(p.default.version.slice(1)):null}st.getNodeVersion=s3;function Oz(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var IA=E(Ye=>{"use strict";l();Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getLocalStorage=Ye.getLocalStorageOrThrow=Ye.getCrypto=Ye.getCryptoOrThrow=Ye.getLocation=Ye.getLocationOrThrow=Ye.getNavigator=Ye.getNavigatorOrThrow=Ye.getDocument=Ye.getDocumentOrThrow=Ye.getFromWindowOrThrow=Ye.getFromWindow=void 0;function eo(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ye.getFromWindow=eo;function ja(t){let e=eo(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ye.getFromWindowOrThrow=ja;function Dz(){return ja("document")}Ye.getDocumentOrThrow=Dz;function Pz(){return eo("document")}Ye.getDocument=Pz;function Rz(){return ja("navigator")}Ye.getNavigatorOrThrow=Rz;function Bz(){return eo("navigator")}Ye.getNavigator=Bz;function Lz(){return ja("location")}Ye.getLocationOrThrow=Lz;function Fz(){return eo("location")}Ye.getLocation=Fz;function Mz(){return ja("crypto")}Ye.getCryptoOrThrow=Mz;function Uz(){return eo("crypto")}Ye.getCrypto=Uz;function qz(){return ja("localStorage")}Ye.getLocalStorageOrThrow=qz;function Vz(){return eo("localStorage")}Ye.getLocalStorage=Vz});var u3=E(Sp=>{"use strict";l();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.getWindowMetadata=void 0;var a3=IA();function Hz(){let t,e;try{t=a3.getDocumentOrThrow(),e=a3.getLocationOrThrow()}catch{return null}function r(){let h=t.getElementsByTagName("link"),g=[];for(let y=0;y<h.length;y++){let m=h[y],T=m.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){let O=m.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let B=e.protocol+"//"+e.host;if(O.indexOf("/")===0)B+=O;else{let W=e.pathname.split("/");W.pop();let U=W.join("/");B+=U+"/"+O}g.push(B)}else if(O.indexOf("//")===0){let B=e.protocol+O;g.push(B)}else g.push(O)}}return g}function n(...h){let g=t.getElementsByTagName("meta");for(let y=0;y<g.length;y++){let m=g[y],T=["itemprop","property","name"].map(O=>m.getAttribute(O)).filter(O=>O?h.includes(O):!1);if(T.length&&T){let O=m.getAttribute("content");if(O)return O}}return""}function i(){let h=n("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function s(){return n("description","og:description","twitter:description","keywords")}let o=i(),a=s(),u=e.origin,c=r();return{description:a,url:u,icons:c,name:o}}Sp.getWindowMetadata=Hz});var l3=E((qpe,c3)=>{"use strict";l();c3.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var g3=E((Hpe,p3)=>{"use strict";l();var d3="%[a-f0-9]{2}",f3=new RegExp("("+d3+")|([^%]+?)","gi"),h3=new RegExp("("+d3+")+","gi");function _A(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],_A(r),_A(n))}function Gz(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(f3)||[],r=1;r<e.length;r++)t=_A(e,r).join(""),e=t.match(f3)||[];return t}}function kz(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=h3.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Gz(r[0]);n!==r[0]&&(e[r[0]]=n)}r=h3.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}p3.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return kz(t)}}});var m3=E((kpe,y3)=>{"use strict";l();y3.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var E3=E((Qpe,w3)=>{"use strict";l();w3.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r}});var C3=E(yr=>{"use strict";l();var jz=l3(),Qz=g3(),A3=m3(),Wz=E3(),zz=t=>t==null,SA=Symbol("encodeFragmentIdentifier");function $z(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[vt(e,t),"[",i,"]"].join("")]:[...r,[vt(e,t),"[",vt(i,t),"]=",vt(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[vt(e,t),"[]"].join("")]:[...r,[vt(e,t),"[]=",vt(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[vt(e,t),":list="].join("")]:[...r,[vt(e,t),":list=",vt(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[vt(r,t),e,vt(i,t)].join("")]:[[n,vt(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,vt(e,t)]:[...r,[vt(e,t),"=",vt(n,t)].join("")]}}function Kz(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"comma":case"separator":return(r,n,i)=>{let s=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!s&&oi(n,t).includes(t.arrayFormatSeparator);n=o?oi(n,t):n;let a=s||o?n.split(t.arrayFormatSeparator).map(u=>oi(u,t)):n===null?n:oi(n,t);i[r]=a};case"bracket-separator":return(r,n,i)=>{let s=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!s){i[r]=n&&oi(n,t);return}let o=n===null?[]:n.split(t.arrayFormatSeparator).map(a=>oi(a,t));if(i[r]===void 0){i[r]=o;return}i[r]=[].concat(i[r],o)};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[].concat(i[r],n)}}}function b3(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function vt(t,e){return e.encode?e.strict?jz(t):encodeURIComponent(t):t}function oi(t,e){return e.decode?Qz(t):t}function I3(t){return Array.isArray(t)?t.sort():typeof t=="object"?I3(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function _3(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function Yz(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function S3(t){t=_3(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function v3(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function T3(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),b3(e.arrayFormatSeparator);let r=Kz(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let[s,o]=A3(e.decode?i.replace(/\+/g," "):i,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:oi(o,e),r(oi(s,e),o,n)}for(let i of Object.keys(n)){let s=n[i];if(typeof s=="object"&&s!==null)for(let o of Object.keys(s))s[o]=v3(s[o],e);else n[i]=v3(s,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,s)=>{let o=n[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=I3(o):i[s]=o,i},Object.create(null))}yr.extract=S3;yr.parse=T3;yr.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),b3(e.arrayFormatSeparator);let r=o=>e.skipNull&&zz(t[o])||e.skipEmptyString&&t[o]==="",n=$z(e),i={};for(let o of Object.keys(t))r(o)||(i[o]=t[o]);let s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{let a=t[o];return a===void 0?"":a===null?vt(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?vt(o,e)+"[]":a.reduce(n(o),[]).join("&"):vt(o,e)+"="+vt(a,e)}).filter(o=>o.length>0).join("&")};yr.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=A3(t,"#");return Object.assign({url:r.split("?")[0]||"",query:T3(S3(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:oi(n,e)}:{})};yr.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[SA]:!0},e);let r=_3(t.url).split("?")[0]||"",n=yr.extract(t.url),i=yr.parse(n,{sort:!1}),s=Object.assign(i,t.query),o=yr.stringify(s,e);o&&(o=`?${o}`);let a=Yz(t.url);return t.fragmentIdentifier&&(a=`#${e[SA]?vt(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${o}${a}`};yr.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[SA]:!1},r);let{url:n,query:i,fragmentIdentifier:s}=yr.parseUrl(t,r);return yr.stringifyUrl({url:n,query:Wz(i,e),fragmentIdentifier:s},r)};yr.exclude=(t,e,r)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return yr.pick(t,n,r)}});var x3=fe(()=>{l()});function zi(t,e,r="string"){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function Jz(t,e){let r=!0;return e.forEach(n=>{n in t||(r=!1)}),r}function Xz(t,e){return Array.isArray(t)?t.length===e:Object.keys(t).length===e}function Zz(t,e){return Array.isArray(t)?t.length>=e:Object.keys(t).length>=e}function fl(t,e,r){return(!r.length?Xz(t,e.length):Zz(t,e.length))?Jz(t,e):!1}function hl(t,e,r="_"){let n=t.split(r);return n[n.length-1].trim().toLowerCase()===e.trim().toLowerCase()}var TA=fe(()=>{l()});function e$(t){return Tp(t.method)&&Cp(t.params)}function Tp(t){return hl(t,"subscribe")}function Cp(t){return fl(t,["topic"],[])}function t$(t){return xp(t.method)&&Np(t.params)}function xp(t){return hl(t,"publish")}function Np(t){return fl(t,["message","topic","ttl"],["prompt","tag"])}function r$(t){return Op(t.method)&&Dp(t.params)}function Op(t){return hl(t,"unsubscribe")}function Dp(t){return fl(t,["id","topic"],[])}function n$(t){return Pp(t.method)&&Rp(t.params)}function Pp(t){return hl(t,"subscription")}function Rp(t){return fl(t,["id","data"],[])}var CA=fe(()=>{l();TA()});function i$(t){if(!Tp(t.method))throw new Error("JSON-RPC Request has invalid subscribe method");if(!Cp(t.params))throw new Error("JSON-RPC Request has invalid subscribe params");let e=t.params;return zi(e,"topic"),e}function s$(t){if(!xp(t.method))throw new Error("JSON-RPC Request has invalid publish method");if(!Np(t.params))throw new Error("JSON-RPC Request has invalid publish params");let e=t.params;return zi(e,"topic"),zi(e,"message"),zi(e,"ttl","number"),e}function o$(t){if(!Op(t.method))throw new Error("JSON-RPC Request has invalid unsubscribe method");if(!Dp(t.params))throw new Error("JSON-RPC Request has invalid unsubscribe params");let e=t.params;return zi(e,"id"),e}function a$(t){if(!Pp(t.method))throw new Error("JSON-RPC Request has invalid subscription method");if(!Rp(t.params))throw new Error("JSON-RPC Request has invalid subscription params");let e=t.params;return zi(e,"id"),zi(e,"data"),e}var N3=fe(()=>{l();TA();CA()});var u$,O3=fe(()=>{l();u$={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}}});var D3={};ct(D3,{RELAY_JSONRPC:()=>u$,isPublishMethod:()=>xp,isPublishParams:()=>Np,isPublishRequest:()=>t$,isSubscribeMethod:()=>Tp,isSubscribeParams:()=>Cp,isSubscribeRequest:()=>e$,isSubscriptionMethod:()=>Pp,isSubscriptionParams:()=>Rp,isSubscriptionRequest:()=>n$,isUnsubscribeMethod:()=>Op,isUnsubscribeParams:()=>Dp,isUnsubscribeRequest:()=>r$,parsePublishRequest:()=>s$,parseSubscribeRequest:()=>i$,parseSubscriptionRequest:()=>a$,parseUnsubscribeRequest:()=>o$});var P3=fe(()=>{l();x3();N3();O3();CA()});var wl=E(G=>{"use strict";l();Object.defineProperty(G,"__esModule",{value:!0});var G3=OP(),c$=FP(),k3=Kc(),RA=UP(),l$=GP(),ot=(AA(),ft(vA)),f$=o3(),Qa=$s(),dl=IA(),h$=u3(),d$=C3(),p$=(P3(),ft(D3));function j3(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var Q3=j3(l$),Bp=j3(d$),Mp=":";function W3(t){let[e,r]=t.split(Mp);return{namespace:e,reference:r}}function z3(t){let{namespace:e,reference:r}=t;return[e,r].join(Mp)}function BA(t){let[e,r,n]=t.split(Mp);return{namespace:e,reference:r,address:n}}function $3(t){let{namespace:e,reference:r,address:n}=t;return[e,r,n].join(Mp)}function LA(t,e){let r=[];return t.forEach(n=>{let i=e(n);r.includes(i)||r.push(i)}),r}function K3(t){let{address:e}=BA(t);return e}function Y3(t){let{namespace:e,reference:r}=BA(t);return z3({namespace:e,reference:r})}function g$(t,e){let{namespace:r,reference:n}=W3(e);return $3({namespace:r,reference:n,address:t})}function y$(t){return LA(t,K3)}function J3(t){return LA(t,Y3)}function m$(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...i.accounts)}),r}function w$(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...J3(i.accounts))}),r}function E$(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...Up(n,i))}),r}function Up(t,e){return t.includes(":")?[t]:e.chains||[]}var qp=t=>t?.split(":"),X3=t=>{let e=t&&qp(t);if(e)return e[3]},v$=t=>{let e=t&&qp(t);if(e)return e[2]+":"+e[3]},Z3=t=>{let e=t&&qp(t);if(e)return e.pop()},A$=(t,e)=>{let r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Z3(e),i=t.statement,s=`URI: ${t.aud}`,o=`Version: ${t.version}`,a=`Chain ID: ${X3(e)}`,u=`Nonce: ${t.nonce}`,c=`Issued At: ${t.iat}`,f=t.resources&&t.resources.length>0?`Resources:
${t.resources.map(h=>`- ${h}`).join(`
`)}`:void 0;return[r,n,"",i,"",s,o,a,u,c,f].filter(h=>h!=null).join(`
`)},FA="base10",ir="base16",Lp="base64pad",Vp="utf8",MA=0,Wa=1,b$=0,R3=1,NA=12,UA=32;function I$(){let t=Q3.generateKeyPair();return{privateKey:ot.toString(t.secretKey,ir),publicKey:ot.toString(t.publicKey,ir)}}function _$(){let t=k3.randomBytes(UA);return ot.toString(t,ir)}function S$(t,e){let r=Q3.sharedKey(ot.fromString(t,ir),ot.fromString(e,ir),!0),n=new c$.HKDF(RA.SHA256,r).expand(UA);return ot.toString(n,ir)}function T$(t){let e=RA.hash(ot.fromString(t,ir));return ot.toString(e,ir)}function C$(t){let e=RA.hash(ot.fromString(t,Vp));return ot.toString(e,ir)}function eR(t){return ot.fromString(`${t}`,FA)}function gl(t){return Number(ot.toString(t,FA))}function x$(t){let e=eR(typeof t.type<"u"?t.type:MA);if(gl(e)===Wa&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let r=typeof t.senderPublicKey<"u"?ot.fromString(t.senderPublicKey,ir):void 0,n=typeof t.iv<"u"?ot.fromString(t.iv,ir):k3.randomBytes(NA),i=new G3.ChaCha20Poly1305(ot.fromString(t.symKey,ir)).seal(n,ot.fromString(t.message,Vp));return tR({type:e,sealed:i,iv:n,senderPublicKey:r})}function N$(t){let e=new G3.ChaCha20Poly1305(ot.fromString(t.symKey,ir)),{sealed:r,iv:n}=qA(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return ot.toString(i,Vp)}function tR(t){if(gl(t.type)===Wa){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ot.toString(ot.concat([t.type,t.senderPublicKey,t.iv,t.sealed]),Lp)}return ot.toString(ot.concat([t.type,t.iv,t.sealed]),Lp)}function qA(t){let e=ot.fromString(t,Lp),r=e.slice(b$,R3),n=R3;if(gl(r)===Wa){let a=n+UA,u=a+NA,c=e.slice(n,a),f=e.slice(a,u),h=e.slice(u);return{type:r,sealed:h,iv:f,senderPublicKey:c}}let i=n+NA,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function O$(t,e){let r=qA(t);return rR({type:gl(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ot.toString(r.senderPublicKey,ir):void 0,receiverPublicKey:e?.receiverPublicKey})}function rR(t){let e=t?.type||MA;if(e===Wa){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function D$(t){return t.type===Wa&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var P$=Object.defineProperty,B3=Object.getOwnPropertySymbols,R$=Object.prototype.hasOwnProperty,B$=Object.prototype.propertyIsEnumerable,L3=(t,e,r)=>e in t?P$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F3=(t,e)=>{for(var r in e||(e={}))R$.call(e,r)&&L3(t,r,e[r]);if(B3)for(var r of B3(e))B$.call(e,r)&&L3(t,r,e[r]);return t},nR="ReactNative",nr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Fp=" ",L$=":",iR="/",VA=2,F$=1e3,sR="js";function HA(){return typeof p.default<"u"&&typeof p.default.versions<"u"&&typeof p.default.versions.node<"u"}function yl(){return!dl.getDocument()&&!!dl.getNavigator()&&navigator.product===nR}function Hp(){return!HA()&&!!dl.getNavigator()}function ro(){return yl()?nr.reactNative:HA()?nr.node:Hp()?nr.browser:nr.unknown}function oR(t,e){let r=Bp.parse(t);return r=F3(F3({},r),e),t=Bp.stringify(r),t}function M$(){return h$.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function U$(t,e){var r;let n=ro(),i={protocol:t,version:e,env:n};return n==="browser"&&(i.host=((r=dl.getLocation())==null?void 0:r.host)||"unknown"),i}function aR(){if(ro()===nr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){let{OS:r,Version:n}=global.Platform;return[r,n].join("-")}let t=f$.detect();if(t===null)return"unknown";let e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function uR(){var t;let e=ro();return e===nr.browser?[e,((t=dl.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function cR(t,e,r){let n=aR(),i=uR();return[[t,e].join("-"),[sR,r].join("-"),n,i].join("/")}function q$({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){let a=r.split("?"),u=cR(t,e,n),c={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0},f=oR(a[1]||"",c);return a[0]+"?"+f}function V$(t){let e=(t.match(/^[^:]+(?=:\/\/)/gi)||[])[0],r=typeof e<"u"?t.split("://")[1]:t;return e=e==="wss"?"https":"http",[e,r].join("://")}function H$(t,e,r){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function lR(t,e=VA){return fR(t.split(iR),e)}function G$(t){return lR(t).join(Fp)}function $i(t,e){return t.filter(r=>e.includes(r)).length===t.length}function fR(t,e=VA){return t.slice(Math.max(t.length-e,0))}function k$(t){return Object.fromEntries(t.entries())}function j$(t){return new Map(Object.entries(t))}function Q$(t,e){let r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}var W$=t=>t;function hR(t){return t.trim().replace(/^\w/,e=>e.toUpperCase())}function z$(t){return t.split(Fp).map(e=>hR(e)).join(Fp)}function $$(t=Qa.FIVE_MINUTES,e){let r=Qa.toMiliseconds(t||Qa.FIVE_MINUTES),n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function K$(t,e,r){return new Promise(async(n,i)=>{let s=setTimeout(()=>i(new Error(r)),e);try{let o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function GA(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Y$(t){return GA("topic",t)}function J$(t){return GA("id",t)}function X$(t){let[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Z$(t,e){return Qa.fromMiliseconds((e||Date.now())+Qa.toMiliseconds(t))}function eK(t){return Date.now()>=Qa.toMiliseconds(t)}function tK(t,e){return`${t}${e?`:${e}`:""}`}function Ki(t=[],e=[]){return[...new Set([...t,...e])]}async function rK({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;let i=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));let s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ro();o===nr.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===nr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}var dR="irn";function nK(t){return t?.relay||{protocol:dR}}function iK(t){let e=p$.RELAY_JSONRPC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var sK=Object.defineProperty,M3=Object.getOwnPropertySymbols,oK=Object.prototype.hasOwnProperty,aK=Object.prototype.propertyIsEnumerable,U3=(t,e,r)=>e in t?sK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uK=(t,e)=>{for(var r in e||(e={}))oK.call(e,r)&&U3(t,r,e[r]);if(M3)for(var r of M3(e))aK.call(e,r)&&U3(t,r,e[r]);return t};function pR(t,e="-"){let r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){let s=i.replace(n,""),o=t[i];r[s]=o}}),r}function cK(t){let e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Bp.parse(s);return{protocol:n,topic:gR(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:pR(o)}}function gR(t){return t.startsWith("//")?t.substring(2):t}function yR(t,e="-"){let r="relay",n={};return Object.keys(t).forEach(i=>{let s=r+e+i;t[i]&&(n[s]=t[i])}),n}function lK(t){return`${t.protocol}:${t.topic}@${t.version}?`+Bp.stringify(uK({symKey:t.symKey},yR(t.relay)))}var fK=Object.defineProperty,hK=Object.defineProperties,dK=Object.getOwnPropertyDescriptors,q3=Object.getOwnPropertySymbols,pK=Object.prototype.hasOwnProperty,gK=Object.prototype.propertyIsEnumerable,V3=(t,e,r)=>e in t?fK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yK=(t,e)=>{for(var r in e||(e={}))pK.call(e,r)&&V3(t,r,e[r]);if(q3)for(var r of q3(e))gK.call(e,r)&&V3(t,r,e[r]);return t},mK=(t,e)=>hK(t,dK(e));function no(t){let e=[];return t.forEach(r=>{let[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function mR(t){let e=[];return Object.values(t).forEach(r=>{e.push(...no(r.accounts))}),e}function wR(t,e){let r=[];return Object.values(t).forEach(n=>{no(n.accounts).includes(e)&&r.push(...n.methods)}),r}function ER(t,e){let r=[];return Object.values(t).forEach(n=>{no(n.accounts).includes(e)&&r.push(...n.events)}),r}function wK(t,e){let r=CR(t,e);if(r)throw new Error(r.message);let n={};for(let[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}function EK(t){let{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:n}=t,i=OA(e),s=OA(r),o={};Object.keys(n).forEach(c=>{let f=n[c].chains,h=n[c].methods,g=n[c].events,y=n[c].accounts;f.forEach(m=>{if(!y.some(T=>T.includes(m)))throw new Error(`No accounts provided for chain ${m} in namespace ${c}`)}),o[c]={chains:f,methods:h,events:g,accounts:y}});let a=NR(e,o,"approve()");if(a)throw new Error(a.message);let u={};return!Object.keys(e).length&&!Object.keys(r).length?o:(Object.keys(i).forEach(c=>{let f=n[c].chains.filter(m=>{var T,O;return(O=(T=i[c])==null?void 0:T.chains)==null?void 0:O.includes(m)}),h=n[c].methods.filter(m=>{var T,O;return(O=(T=i[c])==null?void 0:T.methods)==null?void 0:O.includes(m)}),g=n[c].events.filter(m=>{var T,O;return(O=(T=i[c])==null?void 0:T.events)==null?void 0:O.includes(m)}),y=f.map(m=>n[c].accounts.filter(T=>T.includes(`${m}:`))).flat();u[c]={chains:f,methods:h,events:g,accounts:y}}),Object.keys(s).forEach(c=>{var f,h,g,y,m,T;if(!n[c])return;let O=(h=(f=s[c])==null?void 0:f.chains)==null?void 0:h.filter(A=>n[c].chains.includes(A)),B=n[c].methods.filter(A=>{var _,N;return(N=(_=s[c])==null?void 0:_.methods)==null?void 0:N.includes(A)}),W=n[c].events.filter(A=>{var _,N;return(N=(_=s[c])==null?void 0:_.events)==null?void 0:N.includes(A)}),U=O?.map(A=>n[c].accounts.filter(_=>_.includes(`${A}:`))).flat();u[c]={chains:Ki((g=u[c])==null?void 0:g.chains,O),methods:Ki((y=u[c])==null?void 0:y.methods,B),events:Ki((m=u[c])==null?void 0:m.events,W),accounts:Ki((T=u[c])==null?void 0:T.accounts,U)}}),u)}function kA(t){return t.includes(":")}function vR(t){return kA(t)?t.split(":")[0]:t}function OA(t){var e,r,n;let i={};if(!Gp(t))return i;for(let[s,o]of Object.entries(t)){let a=kA(s)?[s]:o.chains,u=o.methods||[],c=o.events||[],f=vR(s);i[f]=mK(yK({},i[f]),{chains:Ki(a,(e=i[f])==null?void 0:e.chains),methods:Ki(u,(r=i[f])==null?void 0:r.methods),events:Ki(c,(n=i[f])==null?void 0:n.events)})}return i}var vK={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},AK={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ai(t,e){let{message:r,code:n}=AK[t];return{message:e?`${r} ${e}`:r,code:n}}function to(t,e){let{message:r,code:n}=vK[t];return{message:e?`${r} ${e}`:r,code:n}}function ml(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Gp(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Yi(t){return typeof t>"u"}function br(t,e){return e&&Yi(t)?!0:typeof t=="string"&&!!t.trim().length}function kp(t,e){return e&&Yi(t)?!0:typeof t=="number"&&!isNaN(t)}function bK(t,e){let{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r),s=!0;return $i(i,n)?(n.forEach(o=>{let{accounts:a,methods:u,events:c}=t.namespaces[o],f=no(a),h=r[o];(!$i(Up(o,h),f)||!$i(h.methods,u)||!$i(h.events,c))&&(s=!1)}),s):!1}function pl(t){return br(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function AR(t){if(br(t,!1)&&t.includes(":")){let e=t.split(":");if(e.length===3){let r=e[0]+":"+e[1];return!!e[2]&&pl(r)}}return!1}function IK(t){if(br(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function _K(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function SK(t){return t?.topic}function TK(t,e){let r=null;return br(t?.publicKey,!1)||(r=ai("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function DA(t){let e=!0;return ml(t)?t.length&&(e=t.every(r=>br(r,!1))):e=!1,e}function bR(t,e,r){let n=null;return ml(e)&&e.length?e.forEach(i=>{n||pl(i)||(n=to("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):pl(t)||(n=to("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function IR(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;let o=bR(i,Up(i,s),`${e} ${r}`);o&&(n=o)}),n}function _R(t,e){let r=null;return ml(t)?t.forEach(n=>{r||AR(n)||(r=to("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=to("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function SR(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=_R(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function TR(t,e){let r=null;return DA(t?.methods)?DA(t?.events)||(r=to("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=to("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function jA(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=TR(n,`${e}, namespace`);i&&(r=i)}),r}function CK(t,e,r){let n=null;if(t&&Gp(t)){let i=jA(t,e);i&&(n=i);let s=IR(t,e,r);s&&(n=s)}else n=ai("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function CR(t,e){let r=null;if(t&&Gp(t)){let n=jA(t,e);n&&(r=n);let i=SR(t,e);i&&(r=i)}else r=ai("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function xR(t){return br(t.protocol,!0)}function xK(t,e){let r=!1;return e&&!t?r=!0:t&&ml(t)&&t.length&&t.forEach(n=>{r=xR(n)}),r}function NK(t){return typeof t=="number"}function OK(t){return typeof t<"u"&&typeof t!==null}function DK(t){return!(!t||typeof t!="object"||!t.code||!kp(t.code,!1)||!t.message||!br(t.message,!1))}function PK(t){return!(Yi(t)||!br(t.method,!1))}function RK(t){return!(Yi(t)||Yi(t.result)&&Yi(t.error)||!kp(t.id,!1)||!br(t.jsonrpc,!1))}function BK(t){return!(Yi(t)||!br(t.name,!1))}function LK(t,e){return!(!pl(e)||!mR(t).includes(e))}function FK(t,e,r){return br(r,!1)?wR(t,e).includes(r):!1}function MK(t,e,r){return br(r,!1)?ER(t,e).includes(r):!1}function NR(t,e,r){let n=null,i=UK(t),s=qK(e),o=Object.keys(i),a=Object.keys(s),u=H3(Object.keys(t)),c=H3(Object.keys(e)),f=u.filter(h=>!c.includes(h));return f.length&&(n=ai("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),$i(o,a)||(n=ai("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;let g=no(e[h].accounts);g.includes(h)||(n=ai("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${g.toString()}`))}),o.forEach(h=>{n||($i(i[h].methods,s[h].methods)?$i(i[h].events,s[h].events)||(n=ai("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ai("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function UK(t){let e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function H3(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function qK(t){let e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:no(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function VK(t,e){return kp(t,!1)&&t<=e.max&&t>=e.min}function HK(){let t=ro();return new Promise(e=>{switch(t){case nr.browser:e(OR());break;case nr.reactNative:e(DR());break;case nr.node:e(PR());break;default:e(!0)}})}function OR(){return Hp()&&navigator?.onLine}async function DR(){return yl()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function PR(){return!0}function GK(t){switch(ro()){case nr.browser:RR(t);break;case nr.reactNative:BR(t);break;case nr.node:break}}function RR(t){!yl()&&Hp()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function BR(t){yl()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}var xA={},PA=class{static get(e){return xA[e]}static set(e,r){xA[e]=r}static delete(e){delete xA[e]}};G.BASE10=FA,G.BASE16=ir,G.BASE64=Lp,G.COLON=L$,G.DEFAULT_DEPTH=VA,G.EMPTY_SPACE=Fp,G.ENV_MAP=nr,G.MemoryStore=PA,G.ONE_THOUSAND=F$,G.REACT_NATIVE_PRODUCT=nR,G.RELAYER_DEFAULT_PROTOCOL=dR,G.SDK_TYPE=sR,G.SLASH=iR,G.TYPE_0=MA,G.TYPE_1=Wa,G.UTF8=Vp,G.appendToQueryString=oR,G.assertType=H$,G.buildApprovedNamespaces=EK,G.calcExpiry=Z$,G.capitalize=z$,G.capitalizeWord=hR,G.createDelayedPromise=$$,G.createExpiringPromise=K$,G.decodeTypeByte=gl,G.decrypt=N$,G.deriveSymKey=S$,G.deserialize=qA,G.encodeTypeByte=eR,G.encrypt=x$,G.engineEvent=tK,G.enumify=W$,G.formatAccountId=$3,G.formatAccountWithChain=g$,G.formatChainId=z3,G.formatExpirerTarget=GA,G.formatIdTarget=J$,G.formatMessage=A$,G.formatMessageContext=G$,G.formatRelayParams=yR,G.formatRelayRpcUrl=q$,G.formatTopicTarget=Y$,G.formatUA=cR,G.formatUri=lK,G.generateKeyPair=I$,G.generateRandomBytes32=_$,G.getAccountsChains=no,G.getAccountsFromNamespaces=m$,G.getAddressFromAccount=K3,G.getAddressesFromAccounts=y$,G.getAppMetadata=M$,G.getBrowserOnlineStatus=OR,G.getChainFromAccount=Y3,G.getChainsFromAccounts=J3,G.getChainsFromNamespace=Up,G.getChainsFromNamespaces=w$,G.getChainsFromRequiredNamespaces=E$,G.getDidAddress=Z3,G.getDidAddressSegments=qp,G.getDidChainId=X3,G.getEnvironment=ro,G.getHttpUrl=V$,G.getInternalError=ai,G.getJavascriptID=uR,G.getJavascriptOS=aR,G.getLastItems=fR,G.getNamespacedDidChainId=v$,G.getNamespacesChains=mR,G.getNamespacesEventsForChainId=ER,G.getNamespacesMethodsForChainId=wR,G.getNodeOnlineStatus=PR,G.getReactNativeOnlineStatus=DR,G.getRelayClientMetadata=U$,G.getRelayProtocolApi=iK,G.getRelayProtocolName=nK,G.getRequiredNamespacesFromNamespaces=wK,G.getSdkError=to,G.getUniqueValues=LA,G.handleDeeplinkRedirect=rK,G.hasOverlap=$i,G.hashKey=T$,G.hashMessage=C$,G.isBrowser=Hp,G.isCaipNamespace=kA,G.isConformingNamespaces=NR,G.isExpired=eK,G.isNode=HA,G.isOnline=HK,G.isProposalStruct=_K,G.isReactNative=yl,G.isSessionCompatible=bK,G.isSessionStruct=SK,G.isTypeOneEnvelope=D$,G.isUndefined=Yi,G.isValidAccountId=AR,G.isValidAccounts=_R,G.isValidActions=TR,G.isValidArray=ml,G.isValidChainId=pl,G.isValidChains=bR,G.isValidController=TK,G.isValidErrorReason=DK,G.isValidEvent=BK,G.isValidId=NK,G.isValidNamespaceAccounts=SR,G.isValidNamespaceActions=jA,G.isValidNamespaceChains=IR,G.isValidNamespaceMethodsOrEvents=DA,G.isValidNamespaces=CR,G.isValidNamespacesChainId=LK,G.isValidNamespacesEvent=MK,G.isValidNamespacesRequest=FK,G.isValidNumber=kp,G.isValidObject=Gp,G.isValidParams=OK,G.isValidRelay=xR,G.isValidRelays=xK,G.isValidRequest=PK,G.isValidRequestExpiry=VK,G.isValidRequiredNamespaces=CK,G.isValidResponse=RK,G.isValidString=br,G.isValidUrl=IK,G.mapEntries=Q$,G.mapToObj=k$,G.mergeArrays=Ki,G.normalizeNamespaces=OA,G.objToMap=j$,G.parseAccountId=BA,G.parseChainId=W3,G.parseContextNames=lR,G.parseExpirerTarget=X$,G.parseNamespaceKey=vR,G.parseRelayParams=pR,G.parseTopic=gR,G.parseUri=cK,G.serialize=tR,G.subscribeToBrowserNetworkChange=RR,G.subscribeToNetworkChange=GK,G.subscribeToReactNativeNetworkChange=BR,G.validateDecoding=O$,G.validateEncoding=rR});var LR,FR,MR,UR,jp,El,QA,Qp,Ji,vl,Wp=fe(()=>{l();LR="PARSE_ERROR",FR="INVALID_REQUEST",MR="METHOD_NOT_FOUND",UR="INVALID_PARAMS",jp="INTERNAL_ERROR",El="SERVER_ERROR",QA=[-32700,-32600,-32601,-32602,-32603],Qp=[-32e3,-32099],Ji={[LR]:{code:-32700,message:"Parse error"},[FR]:{code:-32600,message:"Invalid Request"},[MR]:{code:-32601,message:"Method not found"},[UR]:{code:-32602,message:"Invalid params"},[jp]:{code:-32603,message:"Internal error"},[El]:{code:-32e3,message:"Server error"}},vl=El});function kK(t){return t<=Qp[0]&&t>=Qp[1]}function zp(t){return QA.includes(t)}function qR(t){return typeof t=="number"}function $p(t){return Object.keys(Ji).includes(t)?Ji[t]:Ji[vl]}function Kp(t){let e=Object.values(Ji).find(r=>r.code===t);return e||Ji[vl]}function jK(t){if(typeof t.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof t.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!qR(t.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${t.error.code}`};if(zp(t.error.code)){let e=Kp(t.error.code);if(e.message!==Ji[vl].message&&t.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${t.error.code}`}}return{valid:!0}}function WA(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var zA=fe(()=>{l();Wp()});var HR=E(Xi=>{"use strict";l();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.isBrowserCryptoAvailable=Xi.getSubtleCrypto=Xi.getBrowerCrypto=void 0;function $A(){return(global===null||global===void 0?void 0:global.crypto)||(global===null||global===void 0?void 0:global.msCrypto)||{}}Xi.getBrowerCrypto=$A;function VR(){let t=$A();return t.subtle||t.webkitSubtle}Xi.getSubtleCrypto=VR;function QK(){return!!$A()&&!!VR()}Xi.isBrowserCryptoAvailable=QK});var jR=E(Zi=>{"use strict";l();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.isBrowser=Zi.isNode=Zi.isReactNative=void 0;function GR(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Zi.isReactNative=GR;function kR(){return typeof p.default<"u"&&typeof p.default.versions<"u"&&typeof p.default.versions.node<"u"}Zi.isNode=kR;function WK(){return!GR()&&!kR()}Zi.isBrowser=WK});var KA=E(Yp=>{"use strict";l();Object.defineProperty(Yp,"__esModule",{value:!0});var QR=(Xr(),ft(Jr));QR.__exportStar(HR(),Yp);QR.__exportStar(jR(),Yp)});var Ut={};ct(Ut,{isNodeJs:()=>zR});var WR,zR,$R=fe(()=>{l();WR=be(KA());Gt(Ut,be(KA()));zR=WR.isNode});function YA(t=3){let e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function JA(t=6){return BigInt(YA(t))}function XA(t,e,r){return{id:r||YA(),jsonrpc:"2.0",method:t,params:e}}function zK(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ZA(t,e,r){return{id:t,jsonrpc:"2.0",error:KR(e,r)}}function KR(t,e){return typeof t>"u"?$p(jp):(typeof t=="string"&&(t=Object.assign(Object.assign({},$p(El)),{message:t})),typeof e<"u"&&(t.data=e),zp(t.code)&&(t=Kp(t.code)),t)}var YR=fe(()=>{l();zA();Wp()});function $K(t){return t.includes("*")?Xp(t):!/\W/g.test(t)}function Jp(t){return t==="*"}function Xp(t){return Jp(t)?!0:!(!t.includes("*")||t.split("*").length!==2||t.split("*").filter(e=>e.trim()==="").length!==1)}function KK(t){return!Jp(t)&&Xp(t)&&!t.split("*")[0].trim()}function YK(t){return!Jp(t)&&Xp(t)&&!t.split("*")[1].trim()}var JR=fe(()=>{l()});var XR=fe(()=>{l()});var za,eb=fe(()=>{l();za=class{}});var tb,Zp,Al,ZR=fe(()=>{l();eb();tb=class extends za{constructor(e){super()}},Zp=class extends za{constructor(){super()}},Al=class extends Zp{constructor(e){super()}}});var e6=fe(()=>{l()});var t6=fe(()=>{l();XR();eb();ZR();e6()});var r6=fe(()=>{l();t6()});function ZK(t){let e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function n6(t,e){let r=ZK(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function eY(t){return n6(t,JK)}function eg(t){return n6(t,XK)}function rb(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}var JK,XK,i6=fe(()=>{l();JK="^https?:",XK="^wss?:"});function nb(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function tY(t){return nb(t)&&"method"in t}function ib(t){return nb(t)&&(s6(t)||tg(t))}function s6(t){return"result"in t}function tg(t){return"error"in t}function rY(t){return"error"in t&&t.valid===!1}var o6=fe(()=>{l()});var er={};ct(er,{DEFAULT_ERROR:()=>vl,IBaseJsonRpcProvider:()=>Zp,IEvents:()=>za,IJsonRpcConnection:()=>tb,IJsonRpcProvider:()=>Al,INTERNAL_ERROR:()=>jp,INVALID_PARAMS:()=>UR,INVALID_REQUEST:()=>FR,METHOD_NOT_FOUND:()=>MR,PARSE_ERROR:()=>LR,RESERVED_ERROR_CODES:()=>QA,SERVER_ERROR:()=>El,SERVER_ERROR_CODE_RANGE:()=>Qp,STANDARD_ERROR_MAP:()=>Ji,formatErrorMessage:()=>KR,formatJsonRpcError:()=>ZA,formatJsonRpcRequest:()=>XA,formatJsonRpcResult:()=>zK,getBigIntRpcId:()=>JA,getError:()=>$p,getErrorByCode:()=>Kp,isHttpUrl:()=>eY,isJsonRpcError:()=>tg,isJsonRpcPayload:()=>nb,isJsonRpcRequest:()=>tY,isJsonRpcResponse:()=>ib,isJsonRpcResult:()=>s6,isJsonRpcValidationInvalid:()=>rY,isLocalhostUrl:()=>rb,isNodeJs:()=>zR,isReservedErrorCode:()=>zp,isServerErrorCode:()=>kK,isValidDefaultRoute:()=>Jp,isValidErrorCode:()=>qR,isValidLeadingWildcardRoute:()=>KK,isValidRoute:()=>$K,isValidTrailingWildcardRoute:()=>YK,isValidWildcardRoute:()=>Xp,isWsUrl:()=>eg,parseConnectionError:()=>WA,payloadId:()=>YA,validateJsonRpcError:()=>jK});var bl=fe(()=>{l();Wp();zA();$R();Gt(er,Ut);YR();JR();r6();i6();o6()});var a6,rg,u6,sb=fe(()=>{l();a6=be(Xn());bl();rg=class extends Al{constructor(e){super(e),this.events=new a6.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(XA(e.method,e.params||[],e.id||JA().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{tg(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ib(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}},u6=rg});var c6={};ct(c6,{JsonRpcProvider:()=>rg,default:()=>nY});var nY,l6=fe(()=>{l();sb();sb();nY=u6});var h6=E((pye,f6)=>{"use strict";l();f6.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var d6,p6,ob,g6=fe(()=>{l();d6=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:h6(),p6=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ob=t=>t.split("?")[0]});var m6,y6,iY,ng,w6,ab=fe(()=>{l();m6=be(Xn());kc();bl();g6();y6=10,iY=d6(),ng=class{constructor(e){if(this.url=e,this.events=new m6.EventEmitter,this.registering=!1,!eg(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Hi(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!eg(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{let i=(0,er.isReactNative)()?void 0:{rejectUnauthorized:!rb(e)},s=new iY(e,[],i);p6()?s.onerror=o=>{let a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let r=typeof e.data=="string"?Vi(e.data):e.data;this.events.emit("payload",r)}onError(e,r){let n=this.parseError(r),i=n.message||n.toString(),s=ZA(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return WA(e,ob(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>y6&&this.events.setMaxListeners(y6)}emitError(e){let r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${ob(this.url)}`));return this.events.emit("register_error",r),r}},w6=ng});var E6={};ct(E6,{WsConnection:()=>ng,default:()=>sY});var sY,v6=fe(()=>{l();ab();ab();sY=w6});var tB=E((Il,Ka)=>{l();var oY=200,wb="__lodash_hash_undefined__",fg=1,P6=2,R6=9007199254740991,ig="[object Arguments]",fb="[object Array]",aY="[object AsyncFunction]",B6="[object Boolean]",L6="[object Date]",F6="[object Error]",M6="[object Function]",uY="[object GeneratorFunction]",sg="[object Map]",U6="[object Number]",cY="[object Null]",$a="[object Object]",A6="[object Promise]",lY="[object Proxy]",q6="[object RegExp]",og="[object Set]",V6="[object String]",fY="[object Symbol]",hY="[object Undefined]",hb="[object WeakMap]",H6="[object ArrayBuffer]",ag="[object DataView]",dY="[object Float32Array]",pY="[object Float64Array]",gY="[object Int8Array]",yY="[object Int16Array]",mY="[object Int32Array]",wY="[object Uint8Array]",EY="[object Uint8ClampedArray]",vY="[object Uint16Array]",AY="[object Uint32Array]",bY=/[\\^$.*+?()[\]{}|]/g,IY=/^\[object .+?Constructor\]$/,_Y=/^(?:0|[1-9]\d*)$/,rt={};rt[dY]=rt[pY]=rt[gY]=rt[yY]=rt[mY]=rt[wY]=rt[EY]=rt[vY]=rt[AY]=!0;rt[ig]=rt[fb]=rt[H6]=rt[B6]=rt[ag]=rt[L6]=rt[F6]=rt[M6]=rt[sg]=rt[U6]=rt[$a]=rt[q6]=rt[og]=rt[V6]=rt[hb]=!1;var G6=typeof global=="object"&&global&&global.Object===Object&&global,SY=typeof self=="object"&&self&&self.Object===Object&&self,ui=G6||SY||Function("return this")(),k6=typeof Il=="object"&&Il&&!Il.nodeType&&Il,b6=k6&&typeof Ka=="object"&&Ka&&!Ka.nodeType&&Ka,j6=b6&&b6.exports===k6,ub=j6&&G6.process,I6=function(){try{return ub&&ub.binding&&ub.binding("util")}catch{}}(),_6=I6&&I6.isTypedArray;function TY(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function CY(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function xY(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function NY(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function OY(t){return function(e){return t(e)}}function DY(t,e){return t.has(e)}function PY(t,e){return t?.[e]}function RY(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function BY(t,e){return function(r){return t(e(r))}}function LY(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var FY=Array.prototype,MY=Function.prototype,hg=Object.prototype,cb=ui["__core-js_shared__"],Q6=MY.toString,Pn=hg.hasOwnProperty,S6=function(){var t=/[^.]+$/.exec(cb&&cb.keys&&cb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),W6=hg.toString,UY=RegExp("^"+Q6.call(Pn).replace(bY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T6=j6?ui.Buffer:void 0,ug=ui.Symbol,C6=ui.Uint8Array,z6=hg.propertyIsEnumerable,qY=FY.splice,io=ug?ug.toStringTag:void 0,x6=Object.getOwnPropertySymbols,VY=T6?T6.isBuffer:void 0,HY=BY(Object.keys,Object),db=Ya(ui,"DataView"),_l=Ya(ui,"Map"),pb=Ya(ui,"Promise"),gb=Ya(ui,"Set"),yb=Ya(ui,"WeakMap"),Sl=Ya(Object,"create"),GY=ao(db),kY=ao(_l),jY=ao(pb),QY=ao(gb),WY=ao(yb),N6=ug?ug.prototype:void 0,lb=N6?N6.valueOf:void 0;function so(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function zY(){this.__data__=Sl?Sl(null):{},this.size=0}function $Y(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function KY(t){var e=this.__data__;if(Sl){var r=e[t];return r===wb?void 0:r}return Pn.call(e,t)?e[t]:void 0}function YY(t){var e=this.__data__;return Sl?e[t]!==void 0:Pn.call(e,t)}function JY(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Sl&&e===void 0?wb:e,this}so.prototype.clear=zY;so.prototype.delete=$Y;so.prototype.get=KY;so.prototype.has=YY;so.prototype.set=JY;function ci(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function XY(){this.__data__=[],this.size=0}function ZY(t){var e=this.__data__,r=dg(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():qY.call(e,r,1),--this.size,!0}function eJ(t){var e=this.__data__,r=dg(e,t);return r<0?void 0:e[r][1]}function tJ(t){return dg(this.__data__,t)>-1}function rJ(t,e){var r=this.__data__,n=dg(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}ci.prototype.clear=XY;ci.prototype.delete=ZY;ci.prototype.get=eJ;ci.prototype.has=tJ;ci.prototype.set=rJ;function oo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function nJ(){this.size=0,this.__data__={hash:new so,map:new(_l||ci),string:new so}}function iJ(t){var e=pg(this,t).delete(t);return this.size-=e?1:0,e}function sJ(t){return pg(this,t).get(t)}function oJ(t){return pg(this,t).has(t)}function aJ(t,e){var r=pg(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}oo.prototype.clear=nJ;oo.prototype.delete=iJ;oo.prototype.get=sJ;oo.prototype.has=oJ;oo.prototype.set=aJ;function cg(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new oo;++e<r;)this.add(t[e])}function uJ(t){return this.__data__.set(t,wb),this}function cJ(t){return this.__data__.has(t)}cg.prototype.add=cg.prototype.push=uJ;cg.prototype.has=cJ;function ts(t){var e=this.__data__=new ci(t);this.size=e.size}function lJ(){this.__data__=new ci,this.size=0}function fJ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function hJ(t){return this.__data__.get(t)}function dJ(t){return this.__data__.has(t)}function pJ(t,e){var r=this.__data__;if(r instanceof ci){var n=r.__data__;if(!_l||n.length<oY-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new oo(n)}return r.set(t,e),this.size=r.size,this}ts.prototype.clear=lJ;ts.prototype.delete=fJ;ts.prototype.get=hJ;ts.prototype.has=dJ;ts.prototype.set=pJ;function gJ(t,e){var r=lg(t),n=!r&&OJ(t),i=!r&&!n&&mb(t),s=!r&&!n&&!i&&eB(t),o=r||n||i||s,a=o?NY(t.length,String):[],u=a.length;for(var c in t)(e||Pn.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||SJ(c,u)))&&a.push(c);return a}function dg(t,e){for(var r=t.length;r--;)if(Y6(t[r][0],e))return r;return-1}function yJ(t,e,r){var n=e(t);return lg(t)?n:CY(n,r(t))}function Cl(t){return t==null?t===void 0?hY:cY:io&&io in Object(t)?IJ(t):NJ(t)}function O6(t){return Tl(t)&&Cl(t)==ig}function $6(t,e,r,n,i){return t===e?!0:t==null||e==null||!Tl(t)&&!Tl(e)?t!==t&&e!==e:mJ(t,e,r,n,$6,i)}function mJ(t,e,r,n,i,s){var o=lg(t),a=lg(e),u=o?fb:es(t),c=a?fb:es(e);u=u==ig?$a:u,c=c==ig?$a:c;var f=u==$a,h=c==$a,g=u==c;if(g&&mb(t)){if(!mb(e))return!1;o=!0,f=!1}if(g&&!f)return s||(s=new ts),o||eB(t)?K6(t,e,r,n,i,s):AJ(t,e,u,r,n,i,s);if(!(r&fg)){var y=f&&Pn.call(t,"__wrapped__"),m=h&&Pn.call(e,"__wrapped__");if(y||m){var T=y?t.value():t,O=m?e.value():e;return s||(s=new ts),i(T,O,r,n,s)}}return g?(s||(s=new ts),bJ(t,e,r,n,i,s)):!1}function wJ(t){if(!Z6(t)||CJ(t))return!1;var e=J6(t)?UY:IY;return e.test(ao(t))}function EJ(t){return Tl(t)&&X6(t.length)&&!!rt[Cl(t)]}function vJ(t){if(!xJ(t))return HY(t);var e=[];for(var r in Object(t))Pn.call(t,r)&&r!="constructor"&&e.push(r);return e}function K6(t,e,r,n,i,s){var o=r&fg,a=t.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var f=-1,h=!0,g=r&P6?new cg:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var y=t[f],m=e[f];if(n)var T=o?n(m,y,f,e,t,s):n(y,m,f,t,e,s);if(T!==void 0){if(T)continue;h=!1;break}if(g){if(!xY(e,function(O,B){if(!DY(g,B)&&(y===O||i(y,O,r,n,s)))return g.push(B)})){h=!1;break}}else if(!(y===m||i(y,m,r,n,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function AJ(t,e,r,n,i,s,o){switch(r){case ag:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case H6:return!(t.byteLength!=e.byteLength||!s(new C6(t),new C6(e)));case B6:case L6:case U6:return Y6(+t,+e);case F6:return t.name==e.name&&t.message==e.message;case q6:case V6:return t==e+"";case sg:var a=RY;case og:var u=n&fg;if(a||(a=LY),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;n|=P6,o.set(t,e);var f=K6(a(t),a(e),n,i,s,o);return o.delete(t),f;case fY:if(lb)return lb.call(t)==lb.call(e)}return!1}function bJ(t,e,r,n,i,s){var o=r&fg,a=D6(t),u=a.length,c=D6(e),f=c.length;if(u!=f&&!o)return!1;for(var h=u;h--;){var g=a[h];if(!(o?g in e:Pn.call(e,g)))return!1}var y=s.get(t);if(y&&s.get(e))return y==e;var m=!0;s.set(t,e),s.set(e,t);for(var T=o;++h<u;){g=a[h];var O=t[g],B=e[g];if(n)var W=o?n(B,O,g,e,t,s):n(O,B,g,t,e,s);if(!(W===void 0?O===B||i(O,B,r,n,s):W)){m=!1;break}T||(T=g=="constructor")}if(m&&!T){var U=t.constructor,A=e.constructor;U!=A&&"constructor"in t&&"constructor"in e&&!(typeof U=="function"&&U instanceof U&&typeof A=="function"&&A instanceof A)&&(m=!1)}return s.delete(t),s.delete(e),m}function D6(t){return yJ(t,RJ,_J)}function pg(t,e){var r=t.__data__;return TJ(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ya(t,e){var r=PY(t,e);return wJ(r)?r:void 0}function IJ(t){var e=Pn.call(t,io),r=t[io];try{t[io]=void 0;var n=!0}catch{}var i=W6.call(t);return n&&(e?t[io]=r:delete t[io]),i}var _J=x6?function(t){return t==null?[]:(t=Object(t),TY(x6(t),function(e){return z6.call(t,e)}))}:BJ,es=Cl;(db&&es(new db(new ArrayBuffer(1)))!=ag||_l&&es(new _l)!=sg||pb&&es(pb.resolve())!=A6||gb&&es(new gb)!=og||yb&&es(new yb)!=hb)&&(es=function(t){var e=Cl(t),r=e==$a?t.constructor:void 0,n=r?ao(r):"";if(n)switch(n){case GY:return ag;case kY:return sg;case jY:return A6;case QY:return og;case WY:return hb}return e});function SJ(t,e){return e=e??R6,!!e&&(typeof t=="number"||_Y.test(t))&&t>-1&&t%1==0&&t<e}function TJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function CJ(t){return!!S6&&S6 in t}function xJ(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||hg;return t===r}function NJ(t){return W6.call(t)}function ao(t){if(t!=null){try{return Q6.call(t)}catch{}try{return t+""}catch{}}return""}function Y6(t,e){return t===e||t!==t&&e!==e}var OJ=O6(function(){return arguments}())?O6:function(t){return Tl(t)&&Pn.call(t,"callee")&&!z6.call(t,"callee")},lg=Array.isArray;function DJ(t){return t!=null&&X6(t.length)&&!J6(t)}var mb=VY||LJ;function PJ(t,e){return $6(t,e)}function J6(t){if(!Z6(t))return!1;var e=Cl(t);return e==M6||e==uY||e==aY||e==lY}function X6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R6}function Z6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Tl(t){return t!=null&&typeof t=="object"}var eB=_6?OY(_6):EJ;function RJ(t){return DJ(t)?gJ(t):vJ(t)}function BJ(){return[]}function LJ(){return!1}Ka.exports=PJ});var s8=E(me=>{"use strict";l();Object.defineProperty(me,"__esModule",{value:!0});var uo=Xn(),FJ=(b2(),ft(A2)),Ol=q2(),Qe=Xv(),fi=y1(),rB=(kc(),ft(E2)),MJ=(bP(),ft(AP)),ee=wl(),UJ=(AA(),ft(vA)),We=$s(),qJ=(l6(),ft(c6)),Ir=(bl(),ft(er)),VJ=(v6(),ft(E6)),HJ=tB();function Ng(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function GJ(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var kJ=Ng(uo),jJ=Ng(FJ),gg=GJ(MJ),QJ=Ng(VJ),WJ=Ng(HJ);function zJ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var T=0,O=0,B=0,W=m.length;B!==W&&m[B]===0;)B++,T++;for(var U=(W-B)*f+1>>>0,A=new Uint8Array(U);B!==W;){for(var _=m[B],N=0,I=U-1;(_!==0||N<O)&&I!==-1;I--,N++)_+=256*A[I]>>>0,A[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");O=N,B++}for(var S=U-O;S!==U&&A[S]===0;)S++;for(var R=u.repeat(T);S<U;++S)R+=t.charAt(A[S]);return R}function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var T=0;if(m[T]!==" "){for(var O=0,B=0;m[T]===u;)O++,T++;for(var W=(m.length-T)*c+1>>>0,U=new Uint8Array(W);m[T];){var A=r[m.charCodeAt(T)];if(A===255)return;for(var _=0,N=W-1;(A!==0||_<B)&&N!==-1;N--,_++)A+=a*U[N]>>>0,U[N]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");B=_,T++}if(m[T]!==" "){for(var I=W-B;I!==W&&U[I]===0;)I++;for(var S=new Uint8Array(O+(W-I)),R=O;I!==W;)S[R++]=U[I++];return S}}}function y(m){var T=g(m);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:g,decode:y}}var $J=zJ,KJ=$J,EB=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},YJ=t=>new TextEncoder().encode(t),JJ=t=>new TextDecoder().decode(t),Ab=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},bb=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vB(this,e)}},Ib=class{constructor(e){this.decoders=e}or(e){return vB(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},vB=(t,e)=>new Ib({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),_b=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ab(e,r,n),this.decoder=new bb(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Og=({name:t,prefix:e,encode:r,decode:n})=>new _b(t,e,r,n),Dl=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=KJ(r,e);return Og({prefix:t,name:e,encode:n,decode:s=>EB(i(s))})},XJ=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},ZJ=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},jt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Og({prefix:e,name:t,encode(i){return ZJ(i,n,r)},decode(i){return XJ(i,n,r,t)}}),eX=Og({prefix:"\0",name:"identity",encode:t=>JJ(t),decode:t=>YJ(t)}),tX=Object.freeze({__proto__:null,identity:eX}),rX=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),nX=Object.freeze({__proto__:null,base2:rX}),iX=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sX=Object.freeze({__proto__:null,base8:iX}),oX=Dl({prefix:"9",name:"base10",alphabet:"0123456789"}),aX=Object.freeze({__proto__:null,base10:oX}),uX=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cX=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),lX=Object.freeze({__proto__:null,base16:uX,base16upper:cX}),fX=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hX=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dX=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pX=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gX=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yX=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mX=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wX=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),EX=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),vX=Object.freeze({__proto__:null,base32:fX,base32upper:hX,base32pad:dX,base32padupper:pX,base32hex:gX,base32hexupper:yX,base32hexpad:mX,base32hexpadupper:wX,base32z:EX}),AX=Dl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),bX=Dl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),IX=Object.freeze({__proto__:null,base36:AX,base36upper:bX}),_X=Dl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),SX=Dl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),TX=Object.freeze({__proto__:null,base58btc:_X,base58flickr:SX}),CX=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xX=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),NX=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),OX=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),DX=Object.freeze({__proto__:null,base64:CX,base64pad:xX,base64url:NX,base64urlpad:OX}),AB=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),PX=AB.reduce((t,e,r)=>(t[r]=e,t),[]),RX=AB.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function BX(t){return t.reduce((e,r)=>(e+=PX[r],e),"")}function LX(t){let e=[];for(let r of t){let n=RX[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var FX=Og({prefix:"\u{1F680}",name:"base256emoji",encode:BX,decode:LX}),MX=Object.freeze({__proto__:null,base256emoji:FX}),UX=bB,nB=128,qX=127,VX=~qX,HX=Math.pow(2,31);function bB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=HX;)e[r++]=t&255|nB,t/=128;for(;t&VX;)e[r++]=t&255|nB,t>>>=7;return e[r]=t|0,bB.bytes=r-n+1,e}var GX=Sb,kX=128,iB=127;function Sb(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Sb.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&iB)<<i:(o&iB)*Math.pow(2,i),i+=7}while(o>=kX);return Sb.bytes=s-n,r}var jX=Math.pow(2,7),QX=Math.pow(2,14),WX=Math.pow(2,21),zX=Math.pow(2,28),$X=Math.pow(2,35),KX=Math.pow(2,42),YX=Math.pow(2,49),JX=Math.pow(2,56),XX=Math.pow(2,63),ZX=function(t){return t<jX?1:t<QX?2:t<WX?3:t<zX?4:t<$X?5:t<KX?6:t<YX?7:t<JX?8:t<XX?9:10},eZ={encode:UX,decode:GX,encodingLength:ZX},IB=eZ,sB=(t,e,r=0)=>(IB.encode(t,e,r),e),oB=t=>IB.encodingLength(t),Tb=(t,e)=>{let r=e.byteLength,n=oB(t),i=n+oB(r),s=new Uint8Array(i+r);return sB(t,s,0),sB(r,s,n),s.set(e,i),new Cb(t,r,e,s)},Cb=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}},_B=({name:t,code:e,encode:r})=>new xb(t,e,r),xb=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Tb(this.code,r):r.then(n=>Tb(this.code,n))}else throw Error("Unknown type, must be binary type")}},SB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),tZ=_B({name:"sha2-256",code:18,encode:SB("SHA-256")}),rZ=_B({name:"sha2-512",code:19,encode:SB("SHA-512")}),nZ=Object.freeze({__proto__:null,sha256:tZ,sha512:rZ}),TB=0,iZ="identity",CB=EB,sZ=t=>Tb(TB,CB(t)),oZ={code:TB,name:iZ,encode:CB,digest:sZ},aZ=Object.freeze({__proto__:null,identity:oZ});new TextEncoder,new TextDecoder;var aB={...tX,...nX,...sX,...aX,...lX,...vX,...IX,...TX,...DX,...MX};({...nZ,...aZ});function xB(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function uZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xB(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function NB(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var uB=NB("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Eb=NB("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=uZ(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),cZ={utf8:uB,"utf-8":uB,hex:aB.base16,latin1:Eb,ascii:Eb,binary:Eb,...aB};function lZ(t,e="utf8"){let r=cZ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xB(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var Bb="wc",OB=2,Dg="core",li=`${Bb}@2:${Dg}:`,DB={name:Dg,logger:"error"},PB={database:":memory:"},RB="crypto",Nb="client_ed25519_seed",BB=We.ONE_DAY,LB="keychain",FB="0.3",MB="messages",UB="0.3",qB=We.SIX_HOURS,VB="publisher",HB="irn",GB="error",Lb="wss://relay.walletconnect.com",Ob="wss://relay.walletconnect.org",kB="relayer",sr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},jB="_subscription",Rn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},QB=We.ONE_SECOND,fZ={database:":memory:"},WB="2.10.2",zB=1e4,$B="0.3",KB="WALLETCONNECT_CLIENT_ID",kr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},hZ=We.THIRTY_DAYS,YB="subscription",JB="0.3",XB=We.FIVE_SECONDS*1e3,ZB="pairing",e8="0.3",dZ=We.THIRTY_DAYS,Ja={wc_pairingDelete:{req:{ttl:We.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:We.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:We.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:We.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:We.ONE_DAY,prompt:!1,tag:0},res:{ttl:We.ONE_DAY,prompt:!1,tag:0}}},Nl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},t8="history",r8="0.3",n8="expirer",Gr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},i8="0.3",pZ=We.ONE_DAY,yg="verify-api",mg="https://verify.walletconnect.com",Db="https://verify.walletconnect.org",wg=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=LB,this.version=FB,this.initialized=!1,this.storagePrefix=li,this.init=async()=>{if(!this.initialized){let n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();let i=this.keychain.get(n);if(typeof i>"u"){let{message:s}=ee.getInternalError("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ee.mapToObj(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ee.objToMap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Eg=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=RB,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();let i=await this.getClientSeed(),s=gg.generateKeyPair(i);return gg.encodeIss(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let i=ee.generateKeyPair();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();let s=await this.getClientSeed(),o=gg.generateKeyPair(s),a=ee.generateRandomBytes32(),u=BB;return await gg.signJWT(a,i,u,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();let a=this.getPrivateKey(i),u=ee.deriveSymKey(a,s);return this.setSymKey(u,o)},this.setSymKey=async(i,s)=>{this.isInitialized();let o=s||ee.hashKey(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();let a=ee.validateEncoding(o),u=rB.safeJsonStringify(s);if(ee.isTypeOneEnvelope(a)){let g=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(g,y)}let c=this.getSymKey(i),{type:f,senderPublicKey:h}=a;return ee.encrypt({type:f,symKey:c,message:u,senderPublicKey:h})},this.decode=async(i,s,o)=>{this.isInitialized();let a=ee.validateDecoding(s,o);if(ee.isTypeOneEnvelope(a)){let u=a.receiverPublicKey,c=a.senderPublicKey;i=await this.generateSharedKey(u,c)}try{let u=this.getSymKey(i),c=ee.decrypt({symKey:u,encoded:s});return rB.safeJsonParse(c)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}},this.getPayloadType=i=>{let s=ee.deserialize(i);return ee.decodeTypeByte(s.type)},this.getPayloadSenderPublicKey=i=>{let s=ee.deserialize(i);return s.senderPublicKey?UJ.toString(s.senderPublicKey,ee.BASE16):void 0},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=n||new wg(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Nb)}catch{e=ee.generateRandomBytes32(),await this.keychain.set(Nb,e)}return lZ(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},vg=class extends fi.IMessageTracker{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=MB,this.version=UB,this.initialized=!1,this.storagePrefix=li,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();let s=ee.hashMessage(i),o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();let s=this.get(n),o=ee.hashMessage(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ee.mapToObj(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ee.objToMap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Pb=class extends fi.IPublisher{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new uo.EventEmitter,this.name=VB,this.queue=new Map,this.publishTimeout=We.toMiliseconds(We.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{let a=s?.ttl||qB,u=ee.getRelayProtocolName(s),c=s?.prompt||!1,f=s?.tag||0,h=s?.id||Ir.getBigIntRpcId().toString(),g={topic:n,message:i,opts:{ttl:a,relay:u,prompt:c,tag:f,id:h}},y=setTimeout(()=>this.queue.set(h,g),this.publishTimeout);try{await await ee.createExpiringPromise(this.rpcPublish(n,i,a,u,c,f,h),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(h),this.relayer.events.emit(sr.publish,g)}catch(m){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s?.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(h),m;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var u,c,f,h;let g={method:ee.getRelayProtocolApi(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return ee.isUndefined((u=g.params)==null?void 0:u.prompt)&&((c=g.params)==null||delete c.prompt),ee.isUndefined((f=g.params)==null?void 0:f.tag)&&((h=g.params)==null||delete h.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g}),this.relayer.request(g)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ol.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(sr.connection_stalled);return}this.checkQueue()}),this.relayer.on(sr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}},Rb=class{constructor(){this.map=new Map,this.set=(e,r)=>{let n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let n=this.get(e);if(!this.exists(e,r))return;let i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}},gZ=Object.defineProperty,yZ=Object.defineProperties,mZ=Object.getOwnPropertyDescriptors,cB=Object.getOwnPropertySymbols,wZ=Object.prototype.hasOwnProperty,EZ=Object.prototype.propertyIsEnumerable,lB=(t,e,r)=>e in t?gZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xl=(t,e)=>{for(var r in e||(e={}))wZ.call(e,r)&&lB(t,r,e[r]);if(cB)for(var r of cB(e))EZ.call(e,r)&&lB(t,r,e[r]);return t},vb=(t,e)=>yZ(t,mZ(e)),Ag=class extends fi.ISubscriber{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Rb,this.events=new uo.EventEmitter,this.name=YB,this.version=JB,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=li,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{let s=ee.getRelayProtocolName(i),o={topic:n,relay:s};this.pending.set(n,o);let a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{let o=new We.Watch;o.start(this.pendingSubscriptionWatchLabel);let a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=XB&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){let n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{let i=ee.getRelayProtocolName(n);await this.rpcUnsubscribe(e,r,i);let s=ee.getSdkError("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){let n={method:ee.getRelayProtocolApi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ee.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(sr.connection_stalled)}return ee.hashMessage(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;let r=e[0].relay,n={method:ee.getRelayProtocolApi(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ee.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(sr.connection_stalled)}}rpcUnsubscribe(e,r,n){let i={method:ee.getRelayProtocolApi(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,vb(xl({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,xl({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,xl({},r)),this.topicMap.set(r.topic,e),this.events.emit(kr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let r=this.subscriptions.get(e);if(!r){let{message:n}=ee.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});let n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(kr.deleted,vb(xl({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(kr.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){let n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(kr.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:r}=ee.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let r=await this.rpcBatchSubscribe(e);ee.isValidArray(r)&&this.onBatchSubscribe(r.map((n,i)=>vb(xl({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ol.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(sr.connect,async()=>{await this.onConnect()}),this.relayer.on(sr.disconnect,()=>{this.onDisconnect()}),this.events.on(kr.created,async e=>{let r=kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(kr.deleted,async e=>{let r=kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}},vZ=Object.defineProperty,fB=Object.getOwnPropertySymbols,AZ=Object.prototype.hasOwnProperty,bZ=Object.prototype.propertyIsEnumerable,hB=(t,e,r)=>e in t?vZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,IZ=(t,e)=>{for(var r in e||(e={}))AZ.call(e,r)&&hB(t,r,e[r]);if(fB)for(var r of fB(e))bZ.call(e,r)&&hB(t,r,e[r]);return t},bg=class extends fi.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new uo.EventEmitter,this.name=kB,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(sr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(sr.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Rn.payload,this.onPayloadHandler),this.provider.on(Rn.connect,this.onConnectHandler),this.provider.on(Rn.disconnect,this.onDisconnectHandler),this.provider.on(Rn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||GB})),this.messages=new vg(this.logger,e.core),this.subscriber=new Ag(this,this.logger),this.publisher=new Pb(this,this.logger),this.relayUrl=e?.relayUrl||Lb,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Ob}...`),await this.restartTransport(Ob)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},zB)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s,o=a=>{a.topic===e&&(this.subscriber.off(kr.created,o),s())};return await Promise.all([new Promise(a=>{s=a,this.subscriber.on(kr.created,o)}),new Promise(async a=>{i=await this.subscriber.subscribe(e,r),a()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ee.createExpiringPromise(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(kr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await ee.createExpiringPromise(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);let n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(Rn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ee.isOnline())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qJ.JsonRpcProvider(new QJ.default(ee.formatRelayRpcUrl({sdkVersion:WB,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){let{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ir.isJsonRpcRequest(e)){if(!e.method.endsWith(jB))return;let r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(IZ({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Ir.isJsonRpcResponse(e)&&this.events.emit(sr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(sr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let r=Ir.formatJsonRpcResult(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Rn.payload,this.onPayloadHandler),this.provider.off(Rn.connect,this.onConnectHandler),this.provider.off(Rn.disconnect,this.onDisconnectHandler),this.provider.off(Rn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(sr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await ee.isOnline();ee.subscribeToNetworkChange(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(sr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},We.toMiliseconds(QB)))}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}},_Z=Object.defineProperty,dB=Object.getOwnPropertySymbols,SZ=Object.prototype.hasOwnProperty,TZ=Object.prototype.propertyIsEnumerable,pB=(t,e,r)=>e in t?_Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gB=(t,e)=>{for(var r in e||(e={}))SZ.call(e,r)&&pB(t,r,e[r]);if(dB)for(var r of dB(e))TZ.call(e,r)&&pB(t,r,e[r]);return t},Ig=class extends fi.IStore{constructor(e,r,n,i=li,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=$B,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ee.isUndefined(o)?this.map.set(this.getKey(o),o):ee.isProposalStruct(o)?this.map.set(o.id,o):ee.isSessionStruct(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>WJ.default(a[u],o[u]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});let u=gB(gB({},this.getData(o)),a);this.map.set(o,u),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let r=this.map.get(e);if(!r){let{message:n}=ee.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:r}=ee.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},_g=class{constructor(e,r){this.core=e,this.logger=r,this.name=ZB,this.version=e8,this.events=new kJ.default,this.initialized=!1,this.storagePrefix=li,this.ignoredPayloadTypes=[ee.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();let n=ee.generateRandomBytes32(),i=await this.core.crypto.setSymKey(n),s=ee.calcExpiry(We.FIVE_MINUTES),o={protocol:HB},a={topic:i,expiry:s,relay:o,active:!1},u=ee.formatUri({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:u}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);let{topic:i,symKey:s,relay:o}=ee.parseUri(n.uri),a;if(this.pairings.keys.includes(i)&&(a=this.pairings.get(i),a.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}));let u=ee.calcExpiry(We.FIVE_MINUTES),c={topic:i,relay:o,expiry:u,active:!1};return await this.pairings.set(i,c),this.core.expirer.set(i,u),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Nl.create,c),c},this.activate=async({topic:n})=>{this.isInitialized();let i=ee.calcExpiry(We.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);let{topic:i}=n;if(this.pairings.keys.includes(i)){let s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=ee.createDelayedPromise();this.events.once(ee.engineEvent("pairing_ping",s),({error:c})=>{c?u(c):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);let{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ee.getSdkError("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{let o=Ir.formatJsonRpcRequest(i,s),a=await this.core.crypto.encode(n,o),u=Ja[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,u),o.id},this.sendResult=async(n,i,s)=>{let o=Ir.formatJsonRpcResult(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),c=Ja[u.request.method].res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{let o=Ir.formatJsonRpcError(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),c=Ja[u.request.method]?Ja[u.request.method].res:Ja.unregistered_method.res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ee.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{let n=this.pairings.getAll().filter(i=>ee.isExpired(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{let{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{let{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{let{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Nl.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{let{id:s}=i;setTimeout(()=>{Ir.isJsonRpcResult(i)?this.events.emit(ee.engineEvent("pairing_ping",s),{}):Ir.isJsonRpcError(i)&&this.events.emit(ee.engineEvent("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{let{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Nl.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{let{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;let a=ee.getSdkError("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(ee.getSdkError("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!ee.isValidParams(n)){let{message:i}=ee.getInternalError("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!ee.isValidUrl(n.uri)){let{message:i}=ee.getInternalError("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!ee.isValidParams(n)){let{message:s}=ee.getInternalError("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!ee.isValidParams(n)){let{message:s}=ee.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!ee.isValidString(n,!1)){let{message:i}=ee.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){let{message:i}=ee.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(ee.isExpired(this.pairings.get(n).expiry)){await this.deletePairing(n);let{message:i}=ee.getInternalError("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new Ig(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(sr.message,async e=>{let{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;let i=await this.core.crypto.decode(r,n);try{Ir.isJsonRpcRequest(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ir.isJsonRpcResponse(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Gr.expired,async e=>{let{topic:r}=ee.parseExpirerTarget(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Nl.expire,{topic:r}))})}},Sg=class extends fi.IJsonRpcHistory{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new uo.EventEmitter,this.name=t8,this.version=r8,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;let o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:ee.calcExpiry(We.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(en.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;let i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Ir.isJsonRpcError(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(en.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(en.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;let n={topic:r.topic,request:Ir.formatJsonRpcRequest(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let r=this.records.get(e);if(!r){let{message:n}=ee.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:r}=ee.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(en.created,e=>{let r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.updated,e=>{let r=en.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.deleted,e=>{let r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Ol.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{We.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Tg=class extends fi.IExpirer{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new uo.EventEmitter,this.name=n8,this.version=i8,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{let i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();let s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Gr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();let i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){let i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Gr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ee.formatTopicTarget(e);if(typeof e=="number")return ee.formatIdTarget(e);let{message:r}=ee.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Gr.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:r}=ee.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let r=this.expirations.get(e);if(!r){let{message:n}=ee.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){let{expiry:n}=r;We.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Gr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Ol.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Gr.created,e=>{let r=Gr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Gr.expired,e=>{let r=Gr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Gr.deleted,e=>{let r=Gr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=ee.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Cg=class extends fi.IVerify{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=yg,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||ee.isReactNative()||!ee.isBrowser())return;let n=mg;this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Db;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";let i=n?.verifyUrl||mg,s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(o),s=await this.fetchAttestation(n.attestationId,Db)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);let s=this.startAbortTimer(We.ONE_SECOND*2),o=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n,i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(yg))return s();window.addEventListener("message",i);let o=document.createElement("iframe");o.id=yg,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},We.toMiliseconds(We.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=mg,this.abortController=new AbortController,this.isDevEnv=ee.isNode()&&p.default.env.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),We.toMiliseconds(e))}},CZ=Object.defineProperty,yB=Object.getOwnPropertySymbols,xZ=Object.prototype.hasOwnProperty,NZ=Object.prototype.propertyIsEnumerable,mB=(t,e,r)=>e in t?CZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wB=(t,e)=>{for(var r in e||(e={}))xZ.call(e,r)&&mB(t,r,e[r]);if(yB)for(var r of yB(e))NZ.call(e,r)&&mB(t,r,e[r]);return t},xg=class t extends fi.ICore{constructor(e){super(e),this.protocol=Bb,this.version=OB,this.name=Dg,this.events=new uo.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Lb,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:e?.logger||DB.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new Ol.HeartBeat,this.crypto=new Eg(this,this.logger,e?.keychain),this.history=new Sg(this,this.logger),this.expirer=new Tg(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new jJ.default(wB(wB({},PB),e?.storageOptions)),this.relayer=new bg({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new _g(this,this.logger),this.verify=new Cg(this.projectId||"",this.logger)}static async init(e){let r=new t(e);await r.initialize();let n=await r.crypto.getClientId();return await r.storage.setItem(KB,n),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},OZ=xg;me.CORE_CONTEXT=Dg,me.CORE_DEFAULT=DB,me.CORE_PROTOCOL=Bb,me.CORE_STORAGE_OPTIONS=PB,me.CORE_STORAGE_PREFIX=li,me.CORE_VERSION=OB,me.CRYPTO_CLIENT_SEED=Nb,me.CRYPTO_CONTEXT=RB,me.CRYPTO_JWT_TTL=BB,me.Core=OZ,me.Crypto=Eg,me.EXPIRER_CONTEXT=n8,me.EXPIRER_DEFAULT_TTL=pZ,me.EXPIRER_EVENTS=Gr,me.EXPIRER_STORAGE_VERSION=i8,me.Expirer=Tg,me.HISTORY_CONTEXT=t8,me.HISTORY_EVENTS=en,me.HISTORY_STORAGE_VERSION=r8,me.JsonRpcHistory=Sg,me.KEYCHAIN_CONTEXT=LB,me.KEYCHAIN_STORAGE_VERSION=FB,me.KeyChain=wg,me.MESSAGES_CONTEXT=MB,me.MESSAGES_STORAGE_VERSION=UB,me.MessageTracker=vg,me.PAIRING_CONTEXT=ZB,me.PAIRING_DEFAULT_TTL=dZ,me.PAIRING_EVENTS=Nl,me.PAIRING_RPC_OPTS=Ja,me.PAIRING_STORAGE_VERSION=e8,me.PENDING_SUB_RESOLUTION_TIMEOUT=XB,me.PUBLISHER_CONTEXT=VB,me.PUBLISHER_DEFAULT_TTL=qB,me.Pairing=_g,me.RELAYER_CONTEXT=kB,me.RELAYER_DEFAULT_LOGGER=GB,me.RELAYER_DEFAULT_PROTOCOL=HB,me.RELAYER_DEFAULT_RELAY_URL=Lb,me.RELAYER_EVENTS=sr,me.RELAYER_FAILOVER_RELAY_URL=Ob,me.RELAYER_PROVIDER_EVENTS=Rn,me.RELAYER_RECONNECT_TIMEOUT=QB,me.RELAYER_SDK_VERSION=WB,me.RELAYER_STORAGE_OPTIONS=fZ,me.RELAYER_SUBSCRIBER_SUFFIX=jB,me.RELAYER_TRANSPORT_CUTOFF=zB,me.Relayer=bg,me.STORE_STORAGE_VERSION=$B,me.SUBSCRIBER_CONTEXT=YB,me.SUBSCRIBER_DEFAULT_TTL=hZ,me.SUBSCRIBER_EVENTS=kr,me.SUBSCRIBER_STORAGE_VERSION=JB,me.Store=Ig,me.Subscriber=Ag,me.VERIFY_CONTEXT=yg,me.VERIFY_FALLBACK_SERVER=Db,me.VERIFY_SERVER=mg,me.Verify=Cg,me.WALLETCONNECT_CLIENT_ID=KB,me.default=xg});var y8=E(Je=>{"use strict";l();Object.defineProperty(Je,"__esModule",{value:!0});var Ln=s8(),Pg=Xv(),u8=y1(),j=wl(),c8=Xn(),Xe=$s(),yt=(bl(),ft(er));function DZ(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var PZ=DZ(c8),Hb="wc",Gb=2,kb="client",Fg=`${Hb}@${Gb}:${kb}:`,Rg={name:kb,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},RZ={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},BZ={database:":memory:"},Fb="WALLETCONNECT_DEEPLINK_CHOICE",LZ={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},FZ="history",MZ="0.3",l8="proposal",UZ=Xe.THIRTY_DAYS,f8="Proposal expired",h8="session",Rl=Xe.SEVEN_DAYS,d8="engine",Xa={wc_sessionPropose:{req:{ttl:Xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Xe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Xe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Xe.THIRTY_SECONDS,prompt:!1,tag:1115}}},Bg={min:Xe.FIVE_MINUTES,max:Xe.SEVEN_DAYS},Bn={idle:"IDLE",active:"ACTIVE"},p8="request",g8=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],qZ=Object.defineProperty,VZ=Object.defineProperties,HZ=Object.getOwnPropertyDescriptors,o8=Object.getOwnPropertySymbols,GZ=Object.prototype.hasOwnProperty,kZ=Object.prototype.propertyIsEnumerable,a8=(t,e,r)=>e in t?qZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mr=(t,e)=>{for(var r in e||(e={}))GZ.call(e,r)&&a8(t,r,e[r]);if(o8)for(var r of o8(e))kZ.call(e,r)&&a8(t,r,e[r]);return t},Pl=(t,e)=>VZ(t,HZ(e)),Mb=class extends u8.IEngine{constructor(e){super(e),this.name=d8,this.events=new PZ.default,this.initialized=!1,this.ignoredPayloadTypes=[j.TYPE_1],this.requestQueue={state:Bn.idle,queue:[]},this.sessionRequestQueue={state:Bn.idle,queue:[]},this.requestQueueDelay=Xe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Xa)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Xe.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();let n=Pl(mr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);let{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:u}=n,c=i,f,h=!1;if(c&&(h=this.client.core.pairing.pairings.get(c).active),!c||!h){let{topic:U,uri:A}=await this.client.core.pairing.create();c=U,f=A}let g=await this.client.core.crypto.generateKeyPair(),y=mr({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:Ln.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:g,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:m,resolve:T,done:O}=j.createDelayedPromise(Xe.FIVE_MINUTES,f8);if(this.events.once(j.engineEvent("session_connect"),async({error:U,session:A})=>{if(U)m(U);else if(A){A.self.publicKey=g;let _=Pl(mr({},A),{requiredNamespaces:A.requiredNamespaces,optionalNamespaces:A.optionalNamespaces});await this.client.session.set(A.topic,_),await this.setExpiry(A.topic,A.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:A.peer.metadata}),T(_)}}),!c){let{message:U}=j.getInternalError("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(U)}let B=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:y}),W=j.calcExpiry(Xe.FIVE_MINUTES);return await this.setProposal(B,mr({id:B,expiry:W},y)),{uri:f,approval:O}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);let{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n),{pairingTopic:u,proposer:c,requiredNamespaces:f,optionalNamespaces:h}=a;u=u||"",j.isValidObject(f)||(f=j.getRequiredNamespacesFromNamespaces(s,"approve()"));let g=await this.client.core.crypto.generateKeyPair(),y=c.publicKey,m=await this.client.core.crypto.generateSharedKey(g,y);u&&n&&(await this.client.core.pairing.updateMetadata({topic:u,metadata:c.metadata}),await this.sendResult({id:n,topic:u,result:{relay:{protocol:i??"irn"},responderPublicKey:g}}),await this.client.proposal.delete(n,j.getSdkError("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}));let T=mr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:h,pairingTopic:u,controller:{publicKey:g,metadata:this.client.metadata},expiry:j.calcExpiry(Rl)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(m),await this.sendRequest({topic:m,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0});let O=Pl(mr({},T),{topic:m,pairingTopic:u,acknowledged:!1,self:T.controller,peer:{publicKey:c.publicKey,metadata:c.metadata},controller:g});return await this.client.session.set(m,O),await this.setExpiry(m,j.calcExpiry(Rl)),{topic:m,acknowledged:()=>new Promise(B=>setTimeout(()=>B(this.client.session.get(m)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);let{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,j.getSdkError("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);let{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:u}=j.createDelayedPromise();return this.events.once(j.engineEvent("session_update",s),({error:c})=>{c?u(c):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);let{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=j.createDelayedPromise();return this.events.once(j.engineEvent("session_extend",i),({error:u})=>{u?a(u):o()}),await this.setExpiry(n,j.calcExpiry(Rl)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);let{chainId:n,request:i,topic:s,expiry:o}=r,a=yt.payloadId(),{done:u,resolve:c,reject:f}=j.createDelayedPromise(o,"Request expired. Please try again.");return this.events.once(j.engineEvent("session_request",a),({error:h,result:g})=>{h?f(h):c(g)}),await Promise.all([new Promise(async h=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(g=>f(g)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),h()}),new Promise(async h=>{let g=await this.client.core.storage.getItem(Fb);j.handleDeeplinkRedirect({id:a,topic:s,wcDeepLink:g}),h()}),u()]).then(h=>h[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);let{topic:n,response:i}=r,{id:s}=i;yt.isJsonRpcResult(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):yt.isJsonRpcError(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);let{topic:n}=r;if(this.client.session.keys.includes(n)){let i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=j.createDelayedPromise();this.events.once(j.engineEvent("session_ping",i),({error:u})=>{u?a(u):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);let{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);let{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:j.getSdkError("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>j.isSessionCompatible(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{let n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{let{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,j.getSdkError("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Fb).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,j.getSdkError("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Bn.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{let n=Xa.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o,verifyContext:a}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o,verifyContext:a}),n&&this.client.core.expirer.set(i,j.calcExpiry(n))},this.sendRequest=async r=>{let{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:u,throwOnFailedPublish:c}=r,f=yt.formatJsonRpcRequest(i,s,u);if(j.isBrowser()&&g8.includes(i)){let y=j.hashMessage(JSON.stringify(f));this.client.core.verify.register({attestationId:y})}let h=await this.client.core.crypto.encode(n,f),g=Xa[i].req;return o&&(g.ttl=o),a&&(g.id=a),this.client.core.history.set(n,f),c?(g.internal=Pl(mr({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,h,g)):this.client.core.relayer.publish(n,h,g).catch(y=>this.client.logger.error(y)),f.id},this.sendResult=async r=>{let{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=yt.formatJsonRpcResult(n,s),u=await this.client.core.crypto.encode(i,a),c=await this.client.core.history.get(i,n),f=Xa[c.request.method].res;o?(f.internal=Pl(mr({},f.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,f)):this.client.core.relayer.publish(i,u,f).catch(h=>this.client.logger.error(h)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{let s=yt.formatJsonRpcError(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),u=Xa[a.request.method].res;this.client.core.relayer.publish(n,o,u),await this.client.core.history.resolve(s)},this.cleanup=async()=>{let r=[],n=[];this.client.session.getAll().forEach(i=>{j.isExpired(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{j.isExpired(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Bn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Bn.active;let r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Bn.idle},this.processRequest=r=>{let{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{let{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{let{topic:n}=r,{message:i}=j.getInternalError("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{let{params:i,id:s}=n;try{this.isValidConnect(mr({},n.params));let o=j.calcExpiry(Xe.FIVE_MINUTES),a=mr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);let u=j.hashMessage(JSON.stringify(n)),c=await this.getVerifyContext(u,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:c})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{let{id:i}=n;if(yt.isJsonRpcResult(n)){let{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});let o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});let a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});let u=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});let c=await this.client.core.crypto.generateSharedKey(a,u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});let f=await this.client.core.relayer.subscribe(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else yt.isJsonRpcError(n)&&(await this.client.proposal.delete(i,j.getSdkError("USER_DISCONNECTED")),this.events.emit(j.engineEvent("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);let{relay:o,controller:a,expiry:u,namespaces:c,requiredNamespaces:f,optionalNamespaces:h,sessionProperties:g,pairingTopic:y}=n.params,m=mr({topic:r,relay:o,expiry:u,namespaces:c,acknowledged:!0,pairingTopic:y,requiredNamespaces:f,optionalNamespaces:h,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},g&&{sessionProperties:g});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(j.engineEvent("session_connect"),{session:m}),this.cleanupDuplicatePairings(m)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{let{id:i}=n;yt.isJsonRpcResult(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(j.engineEvent("session_approve",i),{})):yt.isJsonRpcError(n)&&(await this.client.session.delete(r,j.getSdkError("USER_DISCONNECTED")),this.events.emit(j.engineEvent("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{let{params:i,id:s}=n;try{let o=`${r}_session_update`,a=j.MemoryStore.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(mr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),j.MemoryStore.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{let{id:i}=n;yt.isJsonRpcResult(n)?this.events.emit(j.engineEvent("session_update",i),{}):yt.isJsonRpcError(n)&&this.events.emit(j.engineEvent("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{let{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,j.calcExpiry(Rl)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{let{id:i}=n;yt.isJsonRpcResult(n)?this.events.emit(j.engineEvent("session_extend",i),{}):yt.isJsonRpcError(n)&&this.events.emit(j.engineEvent("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{let{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{let{id:i}=n;setTimeout(()=>{yt.isJsonRpcResult(n)?this.events.emit(j.engineEvent("session_ping",i),{}):yt.isJsonRpcError(n)&&this.events.emit(j.engineEvent("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{let{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Ln.RELAYER_EVENTS.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidRequest(mr({topic:r},s));let o=j.hashMessage(JSON.stringify(yt.formatJsonRpcRequest("wc_sessionRequest",s,i))),a=this.client.session.get(r),u=await this.getVerifyContext(o,a.peer.metadata),c={id:i,topic:r,params:s,verifyContext:u};await this.setPendingSessionRequest(c),this.addSessionRequestToSessionRequestQueue(c),this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{let{id:i}=n;yt.isJsonRpcResult(n)?this.events.emit(j.engineEvent("session_request",i),{result:n.result}):yt.isJsonRpcError(n)&&this.events.emit(j.engineEvent("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{let{id:i,params:s}=n;try{let o=`${r}_session_event_${s.event.name}`,a=j.MemoryStore.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(mr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),j.MemoryStore.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Bn.idle,this.processSessionRequestQueue()},Xe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Bn.active){this.client.logger.info("session request queue is already active.");return}let r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Bn.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.active)return;let n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,yt.formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer},n.id))},this.isValidConnect=async r=>{if(!j.isValidParams(r)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}let{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(j.isUndefined(n)||await this.isValidPairingTopic(n),!j.isValidRelays(a,!0)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(u)}!j.isUndefined(i)&&j.isValidObject(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!j.isUndefined(s)&&j.isValidObject(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),j.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{let i=j.isValidRequiredNamespaces(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!j.isValidParams(r))throw new Error(j.getInternalError("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);let a=this.client.proposal.get(n),u=j.isValidNamespaces(i,"approve()");if(u)throw new Error(u.message);let c=j.isConformingNamespaces(a.requiredNamespaces,i,"approve()");if(c)throw new Error(c.message);if(!j.isValidString(s,!0)){let{message:f}=j.getInternalError("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}j.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!j.isValidParams(r)){let{message:s}=j.getInternalError("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}let{id:n,reason:i}=r;if(await this.isValidProposalId(n),!j.isValidErrorReason(i)){let{message:s}=j.getInternalError("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!j.isValidParams(r)){let{message:c}=j.getInternalError("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}let{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!j.isValidRelay(n)){let{message:c}=j.getInternalError("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}let a=j.isValidController(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);let u=j.isValidNamespaces(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(j.isExpired(o)){let{message:c}=j.getInternalError("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async r=>{if(!j.isValidParams(r)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}let{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);let s=this.client.session.get(n),o=j.isValidNamespaces(i,"update()");if(o)throw new Error(o.message);let a=j.isConformingNamespaces(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!j.isValidParams(r)){let{message:i}=j.getInternalError("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!j.isValidParams(r)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}let{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);let{namespaces:a}=this.client.session.get(n);if(!j.isValidNamespacesChainId(a,s)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!j.isValidRequest(i)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!j.isValidNamespacesRequest(a,s,i.method)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!j.isValidRequestExpiry(o,Bg)){let{message:u}=j.getInternalError("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Bg.min} and ${Bg.max}`);throw new Error(u)}},this.isValidRespond=async r=>{if(!j.isValidParams(r)){let{message:s}=j.getInternalError("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}let{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!j.isValidResponse(i)){let{message:s}=j.getInternalError("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!j.isValidParams(r)){let{message:i}=j.getInternalError("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!j.isValidParams(r)){let{message:a}=j.getInternalError("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}let{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);let{namespaces:o}=this.client.session.get(n);if(!j.isValidNamespacesChainId(o,s)){let{message:a}=j.getInternalError("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!j.isValidEvent(i)){let{message:a}=j.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!j.isValidNamespacesEvent(o,s,i.name)){let{message:a}=j.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!j.isValidParams(r)){let{message:i}=j.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{let i={verified:{verifyUrl:n.verifyUrl||Ln.VERIFY_SERVER,validation:"UNKNOWN",origin:n.url||""}};try{let s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!j.isValidString(i,!1)){let{message:s}=j.getInternalError("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){let{message:e}=j.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ln.RELAYER_EVENTS.message,async e=>{let{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;let i=await this.client.core.crypto.decode(r,n);try{yt.isJsonRpcRequest(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):yt.isJsonRpcResponse(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Ln.EXPIRER_EVENTS.expired,async e=>{let{topic:r,id:n}=j.parseExpirerTarget(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,j.getInternalError("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Ln.PAIRING_EVENTS.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!j.isValidString(e,!1)){let{message:r}=j.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:r}=j.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(j.isExpired(this.client.core.pairing.pairings.get(e).expiry)){let{message:r}=j.getInternalError("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!j.isValidString(e,!1)){let{message:r}=j.getInternalError("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){let{message:r}=j.getInternalError("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(j.isExpired(this.client.session.get(e).expiry)){await this.deleteSession(e);let{message:r}=j.getInternalError("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(j.isValidString(e,!1)){let{message:r}=j.getInternalError("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{let{message:r}=j.getInternalError("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!j.isValidId(e)){let{message:r}=j.getInternalError("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){let{message:r}=j.getInternalError("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(j.isExpired(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);let{message:r}=j.getInternalError("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},Ub=class extends Ln.Store{constructor(e,r){super(e,r,l8,Fg),this.core=e,this.logger=r}},qb=class extends Ln.Store{constructor(e,r){super(e,r,h8,Fg),this.core=e,this.logger=r}},Vb=class extends Ln.Store{constructor(e,r){super(e,r,p8,Fg,n=>n.id),this.core=e,this.logger=r}},Lg=class t extends u8.ISignClient{constructor(e){super(e),this.protocol=Hb,this.version=Gb,this.name=Rg.name,this.events=new c8.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||Rg.name,this.metadata=e?.metadata||j.getAppMetadata();let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Pg.pino(Pg.getDefaultLoggerOptions({level:e?.logger||Rg.logger}));this.core=e?.core||new Ln.Core(e),this.logger=Pg.generateChildLogger(r,this.name),this.session=new qb(this.core,this.logger),this.proposal=new Ub(this.core,this.logger),this.pendingRequest=new Vb(this.core,this.logger),this.engine=new Mb(this)}static async init(e){let r=new t(e);return await r.initialize(),r}get context(){return Pg.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}},jZ=Lg;Je.ENGINE_CONTEXT=d8,Je.ENGINE_QUEUE_STATES=Bn,Je.ENGINE_RPC_OPTS=Xa,Je.HISTORY_CONTEXT=FZ,Je.HISTORY_EVENTS=LZ,Je.HISTORY_STORAGE_VERSION=MZ,Je.METHODS_TO_VERIFY=g8,Je.PROPOSAL_CONTEXT=l8,Je.PROPOSAL_EXPIRY=UZ,Je.PROPOSAL_EXPIRY_MESSAGE=f8,Je.REQUEST_CONTEXT=p8,Je.SESSION_CONTEXT=h8,Je.SESSION_EXPIRY=Rl,Je.SESSION_REQUEST_EXPIRY_BOUNDARIES=Bg,Je.SIGN_CLIENT_CONTEXT=kb,Je.SIGN_CLIENT_DEFAULT=Rg,Je.SIGN_CLIENT_EVENTS=RZ,Je.SIGN_CLIENT_PROTOCOL=Hb,Je.SIGN_CLIENT_STORAGE_OPTIONS=BZ,Je.SIGN_CLIENT_STORAGE_PREFIX=Fg,Je.SIGN_CLIENT_VERSION=Gb,Je.SignClient=jZ,Je.WALLETCONNECT_DEEPLINK_CHOICE=Fb,Je.default=Lg});var Mg=E(rs=>{"use strict";l();Object.defineProperty(rs,"__esModule",{value:!0});rs.OptionalOperation=rs.Operation=void 0;var QZ;(function(t){t.SIGN_TRANSACTION="mvx_signTransaction",t.SIGN_TRANSACTIONS="mvx_signTransactions",t.SIGN_MESSAGE="mvx_signMessage"})(QZ=rs.Operation||(rs.Operation={}));var WZ;(function(t){t.SIGN_LOGIN_TOKEN="mvx_signLoginToken",t.SIGN_NATIVE_AUTH_TOKEN="mvx_signNativeAuthToken",t.CANCEL_ACTION="mvx_cancelAction"})(WZ=rs.OptionalOperation||(rs.OptionalOperation={}))});var jb=E(Fn=>{"use strict";l();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.WALLETCONNECT_SIGN_LOGIN_DELAY=Fn.WALLETCONNECT_MULTIVERSX_OPTIONAL_METHODS=Fn.WALLETCONNECT_MULTIVERSX_METHODS=Fn.WALLETCONNECT_MULTIVERSX_NAMESPACE=void 0;var m8=Mg();Fn.WALLETCONNECT_MULTIVERSX_NAMESPACE="mvx";Fn.WALLETCONNECT_MULTIVERSX_METHODS=Object.values(m8.Operation);Fn.WALLETCONNECT_MULTIVERSX_OPTIONAL_METHODS=Object.values(m8.OptionalOperation);Fn.WALLETCONNECT_SIGN_LOGIN_DELAY=200});var zb=E(tn=>{"use strict";l();Object.defineProperty(tn,"__esModule",{value:!0});tn.WalletConnectV2ProviderErrorMessagesEnum=tn.ErrBadAddress=tn.ErrNotImplemented=tn.Err=void 0;var Bl=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};tn.Err=Bl;var Qb=class extends Bl{constructor(){super("Method not yet implemented")}};tn.ErrNotImplemented=Qb;var Wb=class extends Bl{constructor(e,r){super(`Bad address: ${e}`,r)}};tn.ErrBadAddress=Wb;var zZ;(function(t){t.unableToInit="WalletConnect is unable to init",t.notInitialized="WalletConnect is not initialized",t.unableToConnect="WalletConnect is unable to connect",t.unableToConnectExisting="WalletConnect is unable to connect to existing pairing",t.unableToSignLoginToken="WalletConnect could not sign login token",t.unableToSign="WalletConnect could not sign the message",t.unableToLogin="WalletConnect is unable to login",t.unableToHandleTopic="WalletConnect: Unable to handle topic update",t.unableToHandleEvent="WalletConnect: Unable to handle events",t.unableToHandleCleanup="WalletConnect: Unable to handle cleanup",t.sessionNotConnected="WalletConnect Session is not connected",t.sessionDeleted="WalletConnect Session Deleted",t.sessionExpired="WalletConnect Session Expired",t.alreadyLoggedOut="WalletConnect: Already logged out",t.pingFailed="WalletConnect Ping Failed",t.invalidAddress="WalletConnect: Invalid address",t.requestDifferentChain="WalletConnect: Request Chain Id different than Connection Chain Id",t.invalidMessageResponse="WalletConnect could not sign the message",t.invalidMessageSignature="WalletConnect: Invalid message signature",t.invalidTransactionResponse="WalletConnect could not sign the transactions. Invalid signatures",t.invalidCustomRequestResponse="WalletConnect could not send the custom request",t.transactionError="Transaction canceled",t.connectionError="WalletConnect could not establish a connection",t.invalidGuardian="WalletConnect: Invalid Guardian"})(zZ=tn.WalletConnectV2ProviderErrorMessagesEnum||(tn.WalletConnectV2ProviderErrorMessagesEnum={}))});var Kb=E(Ug=>{"use strict";l();Object.defineProperty(Ug,"__esModule",{value:!0});Ug.Logger=void 0;var $b=class{static error(e){console.error(e)}static trace(e){console.trace(e)}};Ug.Logger=$b});var w8=E(()=>{"use strict";l();global.Buffer||(global.Buffer=Ls().Buffer)});var v8=E(E8=>{"use strict";l();Object.defineProperty(E8,"__esModule",{value:!0})});var b8=E(A8=>{"use strict";l();Object.defineProperty(A8,"__esModule",{value:!0})});var I8=E(Za=>{"use strict";l();var $Z=Za&&Za.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});Za.RelayedTransactionV1Builder=void 0;var KZ=$Z(kt()),Yb=ht(),YZ=Be(),JZ=bn(),XZ=zn(),Jb=class{setInnerTransaction(e){return this.innerTransaction=e,this}setNetworkConfig(e){return this.netConfig=e,this}setRelayerAddress(e){return this.relayerAddress=e,this}setRelayerNonce(e){return this.relayerNonce=e,this}setRelayedTransactionVersion(e){return this.relayedTransactionVersion=e,this}setRelayedTransactionOptions(e){return this.relayedTransactionOptions=e,this}setRelayedTransactionGuardian(e){return this.relayedTransactionGuardian=e,this}build(){if(!this.innerTransaction||!this.netConfig||!this.relayerAddress||!this.innerTransaction.getSignature())throw new YZ.ErrInvalidRelayedV1BuilderArguments;let e=this.prepareInnerTransaction(),r=`relayedTx@${d.Buffer.from(e).toString("hex")}`,n=new XZ.TransactionPayload(r),i=this.netConfig.MinGasLimit+this.netConfig.GasPerDataByte*n.length()+this.innerTransaction.getGasLimit().valueOf(),s=new JZ.Transaction({nonce:this.relayerNonce,sender:this.relayerAddress,receiver:this.innerTransaction.getSender(),value:0,gasLimit:i,data:n,chainID:this.netConfig.ChainID,version:this.relayedTransactionVersion,options:this.relayedTransactionOptions,guardian:this.relayedTransactionGuardian});return this.relayerNonce&&s.setNonce(this.relayerNonce),s}prepareInnerTransaction(){if(!this.innerTransaction)return"";let e={nonce:this.innerTransaction.getNonce().valueOf(),sender:new Yb.Address(this.innerTransaction.getSender().bech32()).pubkey().toString("base64"),receiver:new Yb.Address(this.innerTransaction.getReceiver().bech32()).pubkey().toString("base64"),value:new KZ.default(this.innerTransaction.getValue().toString(),10).toNumber(),gasPrice:this.innerTransaction.getGasPrice().valueOf(),gasLimit:this.innerTransaction.getGasLimit().valueOf(),data:this.innerTransaction.getData().valueOf().toString("base64"),signature:this.innerTransaction.getSignature().toString("base64"),chainID:d.Buffer.from(this.innerTransaction.getChainID().valueOf()).toString("base64"),version:this.innerTransaction.getVersion().valueOf(),options:this.innerTransaction.getOptions().valueOf()==0?void 0:this.innerTransaction.getOptions().valueOf(),guardian:this.innerTransaction.getGuardian().bech32()?new Yb.Address(this.innerTransaction.getGuardian().bech32()).pubkey().toString("base64"):void 0,guardianSignature:this.innerTransaction.getGuardianSignature().toString("hex")?this.innerTransaction.getGuardianSignature().toString("base64"):void 0,sndUserName:this.innerTransaction.getSenderUsername()?d.Buffer.from(this.innerTransaction.getSenderUsername()).toString("base64"):void 0,rcvUserName:this.innerTransaction.getReceiverUsername()?d.Buffer.from(this.innerTransaction.getReceiverUsername()).toString("base64"):void 0};return JSON.stringify(e)}};Za.RelayedTransactionV1Builder=Jb});var _8=E(qg=>{"use strict";l();Object.defineProperty(qg,"__esModule",{value:!0});qg.Code=void 0;var Xb=class t{constructor(e){this.hex=e}static fromBuffer(e){return new t(e.toString("hex"))}toString(){return this.hex}valueOf(){return d.Buffer.from(this.hex,"hex")}};qg.Code=Xb});var T8=E(S8=>{"use strict";l();Object.defineProperty(S8,"__esModule",{value:!0})});var O8=E(tu=>{"use strict";l();Object.defineProperty(tu,"__esModule",{value:!0});tu.bech32m=tu.bech32=void 0;var Vg="qpzry9x8gf2tvdw0s3jn54khce6mua7l",x8={};for(let t=0;t<Vg.length;t++){let e=Vg.charAt(t);x8[e]=t}function eu(t){let e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function C8(t){let e=1;for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=eu(e)^n>>5}e=eu(e);for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);e=eu(e)^n&31}return e}function Zb(t,e,r,n){let i=0,s=0,o=(1<<r)-1,a=[];for(let u=0;u<t.length;++u)for(i=i<<e|t[u],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function ZZ(t){return Zb(t,8,5,!0)}function eee(t){let e=Zb(t,5,8,!1);if(Array.isArray(e))return e}function tee(t){let e=Zb(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function N8(t){let e;t==="bech32"?e=1:e=734539939;function r(o,a,u){if(u=u||90,o.length+7+a.length>u)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let c=C8(o);if(typeof c=="string")throw new Error(c);let f=o+"1";for(let h=0;h<a.length;++h){let g=a[h];if(g>>5)throw new Error("Non 5-bit word");c=eu(c)^g,f+=Vg.charAt(g)}for(let h=0;h<6;++h)c=eu(c);c^=e;for(let h=0;h<6;++h){let g=c>>(5-h)*5&31;f+=Vg.charAt(g)}return f}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";let u=o.toLowerCase(),c=o.toUpperCase();if(o!==u&&o!==c)return"Mixed-case string "+o;o=u;let f=o.lastIndexOf("1");if(f===-1)return"No separator character for "+o;if(f===0)return"Missing prefix for "+o;let h=o.slice(0,f),g=o.slice(f+1);if(g.length<6)return"Data too short";let y=C8(h);if(typeof y=="string")return y;let m=[];for(let T=0;T<g.length;++T){let O=g.charAt(T),B=x8[O];if(B===void 0)return"Unknown character "+O;y=eu(y)^B,!(T+6>=g.length)&&m.push(B)}return y!==e?"Invalid checksum for "+o:{prefix:h,words:m}}function i(o,a){let u=n(o,a);if(typeof u=="object")return u}function s(o,a){let u=n(o,a);if(typeof u=="object")return u;throw new Error(u)}return{decodeUnsafe:i,decode:s,encode:r,toWords:ZZ,fromWordsUnsafe:eee,fromWords:tee}}tu.bech32=N8("bech32");tu.bech32m=N8("bech32m")});var P8=E(jr=>{"use strict";l();Object.defineProperty(jr,"__esModule",{value:!0});jr.TokenTransferProperties=jr.TransactionMetadataTransfer=jr.TransactionMetadata=jr.TransactionToDecode=jr.TransactionDecoder=void 0;var D8=O8(),eI=class{getTransactionMetadata(e){let r=this.getNormalTransactionMetadata(e),n=this.getEsdtTransactionMetadata(r);if(n)return n;let i=this.getNftTransferMetadata(r);if(i)return i;let s=this.getMultiTransferMetadata(r);return s||r}getNormalTransactionMetadata(e){let r=new co;if(r.sender=e.sender,r.receiver=e.receiver,r.value=BigInt(e.value),e.data){let i=this.base64Decode(e.data).split("@"),s=i.slice(1);if(s.every(o=>this.isSmartContractArgument(o))&&(r.functionName=i[0],r.functionArgs=s),r.functionName==="relayedTx"&&r.functionArgs&&r.functionArgs.length===1)try{let o=JSON.parse(this.hexToString(r.functionArgs[0]));return o.value=o.value.toString(),o.sender=this.bech32Encode(this.base64ToHex(o.sender)),o.receiver=this.bech32Encode(this.base64ToHex(o.receiver)),this.getNormalTransactionMetadata(o)}catch{}if(r.functionName==="relayedTxV2"&&r.functionArgs&&r.functionArgs.length===4)try{let o=new Hg;return o.sender=e.receiver,o.receiver=this.bech32Encode(r.functionArgs[0]),o.data=this.base64Encode(this.hexToString(r.functionArgs[2])),o.value="0",this.getNormalTransactionMetadata(o)}catch{}}return r}getMultiTransferMetadata(e){if(e.sender!==e.receiver||e.functionName!=="MultiESDTNFTTransfer")return;let r=e.functionArgs;if(!r||r.length<3||!this.isAddressValid(r[0]))return;let n=this.bech32Encode(r[0]),i=this.hexToNumber(r[1]),s=new co;s.transfers||(s.transfers=[]);let o=2;for(let a=0;a<i;a++){let u=this.hexToString(r[o++]),c=r[o++],f=this.hexToBigInt(r[o++]);c?s.transfers.push({value:f,properties:{collection:u,identifier:`${u}-${c}`}}):s.transfers.push({value:f,properties:{token:u}})}return s.sender=e.sender,s.receiver=n,r.length>o&&(s.functionName=this.hexToString(r[o++]),s.functionArgs=r.slice(o++)),s}getNftTransferMetadata(e){if(e.sender!==e.receiver||e.functionName!=="ESDTNFTTransfer")return;let r=e.functionArgs;if(!r||r.length<4||!this.isAddressValid(r[3]))return;let n=this.hexToString(r[0]),i=r[1],s=this.hexToBigInt(r[2]),o=this.bech32Encode(r[3]),a=new co;return a.sender=e.sender,a.receiver=o,a.value=s,r.length>4&&(a.functionName=this.hexToString(r[4]),a.functionArgs=r.slice(5)),a.transfers=[{value:s,properties:{collection:n,identifier:`${n}-${i}`}}],a}base64Encode(e){return d.Buffer.from(e).toString("base64")}base64Decode(e){return d.Buffer.from(e,"base64").toString("binary")}hexToNumber(e){return parseInt(e,16)}getEsdtTransactionMetadata(e){if(e.functionName!=="ESDTTransfer")return;let r=e.functionArgs;if(!r||r.length<2)return;let n=this.hexToString(r[0]),i=this.hexToBigInt(r[1]),s=new co;return s.sender=e.sender,s.receiver=e.receiver,r.length>2&&(s.functionName=this.hexToString(r[2]),s.functionArgs=r.slice(3)),s.transfers=[{value:i,properties:{identifier:n}}],s.value=i,s}bech32Encode(e){let r=d.Buffer.from(e,"hex"),n=D8.bech32.toWords(r);return D8.bech32.encode("erd",n)}isAddressValid(e){return d.Buffer.from(e,"hex").length==32}isSmartContractArgument(e){return!(!this.isHex(e)||e.length%2!==0)}isHex(e){return new RegExp(/[^a-f0-9]/gi).test(e)===!1}base64ToHex(e){return d.Buffer.from(e,"base64").toString("hex")}hexToString(e){return d.Buffer.from(e,"hex").toString("ascii")}hexToBigInt(e){return BigInt(e?"0x"+e:0)}};jr.TransactionDecoder=eI;var Hg=class{constructor(){this.sender="",this.receiver="",this.data="",this.value="0"}};jr.TransactionToDecode=Hg;var co=class{constructor(){this.sender="",this.receiver="",this.value=BigInt(0)}};jr.TransactionMetadata=co;var tI=class{constructor(){this.value=BigInt(0)}};jr.TransactionMetadataTransfer=tI;var rI=class{};jr.TokenTransferProperties=rI});var nI=E(Gg=>{"use strict";l();Object.defineProperty(Gg,"__esModule",{value:!0});Gg.ReturnCode=void 0;var Ge=class t{constructor(e){this.text=e}static fromBuffer(e){let r=e.toString();return new t(r)}toString(){return this.text}valueOf(){return this.text}equals(e){return e?this.text==e.text:!1}isSuccess(){return this.equals(t.Ok)||this.equals(t.None)}};Gg.ReturnCode=Ge;Ge.None=new Ge("");Ge.Ok=new Ge("ok");Ge.FunctionNotFound=new Ge("function not found");Ge.FunctionWrongSignature=new Ge("wrong signature for function");Ge.ContractNotFound=new Ge("contract not found");Ge.UserError=new Ge("user error");Ge.OutOfGas=new Ge("out of gas");Ge.AccountCollision=new Ge("account collision");Ge.OutOfFunds=new Ge("out of funds");Ge.CallStackOverFlow=new Ge("call stack overflow");Ge.ContractInvalid=new Ge("contract invalid");Ge.ExecutionFailed=new Ge("execution failed");Ge.Unknown=new Ge("unknown")});var L8=E(kg=>{"use strict";l();Object.defineProperty(kg,"__esModule",{value:!0});kg.ResultsParser=void 0;var ree=P8(),R8=ht(),B8=Be(),ns=aa(),nee=Yo(),ru=nI(),nu;(function(t){t.OnTransactionCompleted="completedTxEvent",t.OnSignalError="signalError",t.OnWriteLog="writeLog"})(nu||(nu={}));var iI;(function(t){t.TooMuchGas="@too much gas provided for processing"})(iI||(iI={}));var iee={argsSerializer:new nee.ArgSerializer},sI=class{constructor(e){e=Object.assign(Object.assign({},iee),e),this.argsSerializer=e.argsSerializer}parseQueryResponse(e,r){let n=e.getReturnDataParts(),i=this.argsSerializer.buffersToValues(n,r.output);return{returnCode:new ru.ReturnCode(e.returnCode.toString()),returnMessage:e.returnMessage,values:i,firstValue:i[0],secondValue:i[1],thirdValue:i[2],lastValue:i[i.length-1]}}parseUntypedQueryResponse(e){return{returnCode:new ru.ReturnCode(e.returnCode.toString()),returnMessage:e.returnMessage,values:e.getReturnDataParts()}}parseOutcome(e,r){let n=this.parseUntypedOutcome(e),i=this.argsSerializer.buffersToValues(n.values,r.output);return{returnCode:n.returnCode,returnMessage:n.returnMessage,values:i,firstValue:i[0],secondValue:i[1],thirdValue:i[2],lastValue:i[i.length-1]}}parseUntypedOutcome(e){let r,n=this.parseTransactionMetadata(e);if(r=this.createBundleOnSimpleMoveBalance(e),r)return ns.Logger.trace("parseUntypedOutcome(): on simple move balance"),r;if(r=this.createBundleOnInvalidTransaction(e),r)return ns.Logger.trace("parseUntypedOutcome(): on invalid transaction"),r;if(r=this.createBundleOnEasilyFoundResultWithReturnData(e.contractResults),r)return ns.Logger.trace("parseUntypedOutcome(): on easily found result with return data"),r;if(r=this.createBundleOnSignalError(e.logs),r)return ns.Logger.trace("parseUntypedOutcome(): on signal error"),r;if(r=this.createBundleOnTooMuchGasWarning(e.logs),r)return ns.Logger.trace("parseUntypedOutcome(): on 'too much gas' warning"),r;if(r=this.createBundleOnWriteLogWhereFirstTopicEqualsAddress(e.logs,e.sender),r)return ns.Logger.trace("parseUntypedOutcome(): on writelog with topics[0] == tx.sender"),r;if(r=this.createBundleWithCustomHeuristics(e,n),r)return ns.Logger.trace("parseUntypedOutcome(): with custom heuristics"),r;if(r=this.createBundleWithFallbackHeuristics(e,n),r)return ns.Logger.trace("parseUntypedOutcome(): with fallback heuristics"),r;throw new B8.ErrCannotParseContractResults(`transaction ${e.hash.toString()}`)}parseTransactionMetadata(e){return new ree.TransactionDecoder().getTransactionMetadata({sender:e.sender.bech32(),receiver:e.receiver.bech32(),data:e.data.toString("base64"),value:e.value.toString()})}createBundleOnSimpleMoveBalance(e){let r=e.contractResults.items.length==0,n=e.logs.events.length==0;return r&&n?{returnCode:ru.ReturnCode.None,returnMessage:ru.ReturnCode.None.toString(),values:[]}:null}createBundleOnInvalidTransaction(e){return e.status.isInvalid()&&e.receipt.data?{returnCode:ru.ReturnCode.OutOfFunds,returnMessage:e.receipt.data,values:[]}:null}createBundleOnEasilyFoundResultWithReturnData(e){let r=e.items.find(o=>o.nonce.valueOf()!=0&&o.data.startsWith("@"));if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),s=r.returnMessage||n.toString();return{returnCode:n,returnMessage:s,values:i}}createBundleOnSignalError(e){let r=e.findSingleOrNoneEvent(nu.OnSignalError);if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),s=r.getLastTopic(),o=s?.toString()||n.toString();return{returnCode:n,returnMessage:o,values:i}}createBundleOnTooMuchGasWarning(e){let r=e.findSingleOrNoneEvent(nu.OnWriteLog,a=>a.findFirstOrNoneTopic(u=>u.toString().startsWith(iI.TooMuchGas))!=null);if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),s=r.getLastTopic(),o=s?.toString()||n.toString();return{returnCode:n,returnMessage:o,values:i}}createBundleOnWriteLogWhereFirstTopicEqualsAddress(e,r){let n=new R8.Address(r.bech32()).hex(),i=e.findSingleOrNoneEvent(nu.OnWriteLog,u=>u.findFirstOrNoneTopic(c=>c.hex()==n)!=null);if(!i)return null;let{returnCode:s,returnDataParts:o}=this.sliceDataFieldInParts(i.data),a=s.toString();return{returnCode:s,returnMessage:a,values:o}}createBundleWithCustomHeuristics(e,r){return null}createBundleWithFallbackHeuristics(e,r){let n=new R8.Address(r.receiver);for(let i of e.contractResults.items){let s=i.logs.findSingleOrNoneEvent(nu.OnWriteLog,o=>{var a;let u=o.address.bech32()==e.sender.bech32(),c=((a=o.topics[0])===null||a===void 0?void 0:a.hex())==n.hex();return u&&c});if(s){let{returnCode:o,returnDataParts:a}=this.sliceDataFieldInParts(s.data),u=o.toString();return{returnCode:o,returnMessage:u,values:a}}}return null}sliceDataFieldInParts(e){let r=1;e.startsWith("ESDTTransfer")&&(r=3);let n=this.argsSerializer.stringToBuffers(e),i=n[r]||d.Buffer.from([]),s=n.slice(r+1);if(i.length==0)throw new B8.ErrCannotParseContractResults("no return code");return{returnCode:ru.ReturnCode.fromBuffer(i),returnDataParts:s}}parseEvent(e,r){var n,i;let s={},o=e.topics.map(y=>d.Buffer.from(y.valueOf())).slice(1),a=((n=e.dataPayload)===null||n===void 0?void 0:n.valueOf())||d.Buffer.from([]),u=((i=e.additionalData)===null||i===void 0?void 0:i.map(y=>d.Buffer.from(y.valueOf())))||[];u.length==0&&a.length>0&&u.push(d.Buffer.from(a));let c=r.inputs.filter(y=>y.indexed),f=this.argsSerializer.buffersToValues(o,c);for(let y=0;y<c.length;y++)s[c[y].name]=f[y].valueOf();let h=r.inputs.filter(y=>!y.indexed),g=this.argsSerializer.buffersToValues(u,h);for(let y=0;y<h.length;y++)s[h[y].name]=g[y].valueOf();return s}};kg.ResultsParser=sI});var oI=E(At=>{"use strict";l();var see=At&&At.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),or=At&&At.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&see(e,t,r)};Object.defineProperty(At,"__esModule",{value:!0});or(Yo(),At);or(_8(),At);or(vw(),At);or(gE(),At);or(Sc(),At);or(_E(),At);or(EE(),At);or(T8(),At);or(CE(),At);or(Tc(),At);or(L8(),At);or(nI(),At);or(mv(),At);or(BE(),At);or(St(),At)});var M8=E(jg=>{"use strict";l();Object.defineProperty(jg,"__esModule",{value:!0});jg.RelayedTransactionV2Builder=void 0;var F8=Be(),Ll=oI(),oee=bn(),aee=zn(),aI=class{setInnerTransaction(e){return this.innerTransaction=e,this}setInnerTransactionGasLimit(e){return this.innerTransactionGasLimit=e,this}setNetworkConfig(e){return this.netConfig=e,this}setRelayerAddress(e){return this.relayerAddress=e,this}setRelayerNonce(e){return this.relayerNonce=e,this}build(){if(!this.innerTransaction||!this.innerTransactionGasLimit||!this.relayerAddress||!this.netConfig||!this.innerTransaction.getSignature())throw new F8.ErrInvalidRelayedV2BuilderArguments;if(this.innerTransaction.getGasLimit()!=0)throw new F8.ErrGasLimitShouldBe0ForInnerTransaction;let{argumentsString:e}=new Ll.ArgSerializer().valuesToString([new Ll.AddressValue(this.innerTransaction.getReceiver()),new Ll.U64Value(this.innerTransaction.getNonce().valueOf()),new Ll.BytesValue(this.innerTransaction.getData().valueOf()),new Ll.BytesValue(this.innerTransaction.getSignature())]),r=`relayedTxV2@${e}`,n=new aee.TransactionPayload(r),i=new oee.Transaction({sender:this.relayerAddress,receiver:this.innerTransaction.getSender(),value:0,gasLimit:this.innerTransactionGasLimit.valueOf()+this.netConfig.MinGasLimit+this.netConfig.GasPerDataByte*n.length(),data:n,chainID:this.netConfig.ChainID});return this.relayerNonce&&i.setNonce(this.relayerNonce),i}};jg.RelayedTransactionV2Builder=aI});var cI=E(at=>{"use strict";l();var uee=at&&at.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cee=at&&at.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),U8=at&&at.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uee(e,t,r);return cee(e,t),e},lee=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(at,"__esModule",{value:!0});at.addressToHex=at.bufferToHex=at.utf8ToHex=at.bigIntToHex=at.bigIntToBuffer=at.bufferToBigInt=at.stringToBuffer=void 0;var fee=lee(kt()),hee=ht(),uI=U8(dc()),q8=U8(bh());function dee(t){return d.Buffer.from(t)}at.stringToBuffer=dee;function pee(t){return t.length==0?new fee.default(0):uI.bufferToBigInt(t)}at.bufferToBigInt=pee;function gee(t){return t==0?d.Buffer.from([]):uI.bigIntToBuffer(t)}at.bigIntToBuffer=gee;function yee(t){return t==0?"":uI.getHexMagnitudeOfBigInt(t)}at.bigIntToHex=yee;function mee(t){let e=d.Buffer.from(t).toString("hex");return q8.zeroPadStringIfOddLength(e)}at.utf8ToHex=mee;function wee(t){let e=t.toString("hex");return q8.zeroPadStringIfOddLength(e)}at.bufferToHex=wee;function Eee(t){return hee.Address.fromBech32(t.toString()).pubkey().toString("hex")}at.addressToHex=Eee});var H8=E(Qg=>{"use strict";l();Object.defineProperty(Qg,"__esModule",{value:!0});Qg.TokenOperationsFactory=void 0;var lI=Ss(),vee=aa(),V8=gc(),Aee=bn(),bee=zn(),ne=cI(),fI=class{constructor(e){this.config=e,this.trueAsHex=ne.utf8ToHex("true")}issueFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issue",ne.utf8ToHex(e.tokenName),ne.utf8ToHex(e.tokenTicker),ne.bigIntToHex(e.initialSupply),ne.bigIntToHex(e.numDecimals),...e.canFreeze?[ne.utf8ToHex("canFreeze"),this.trueAsHex]:[],...e.canWipe?[ne.utf8ToHex("canWipe"),this.trueAsHex]:[],...e.canPause?[ne.utf8ToHex("canPause"),this.trueAsHex]:[],...e.canChangeOwner?[ne.utf8ToHex("canChangeOwner"),this.trueAsHex]:[],...e.canUpgrade?[ne.utf8ToHex("canUpgrade"),this.trueAsHex]:[],...e.canAddSpecialRoles?[ne.utf8ToHex("canAddSpecialRoles"),this.trueAsHex]:[]];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}notifyAboutUnsettingBurnRoleGlobally(){vee.Logger.info(`
==========
IMPORTANT!
==========
You are about to issue (register) a new token. This will set the role "ESDTRoleBurnForAll" (globally).
Once the token is registered, you can unset this role by calling "unsetBurnRoleGlobally" (in a separate transaction).`)}issueSemiFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issueSemiFungible",ne.utf8ToHex(e.tokenName),ne.utf8ToHex(e.tokenTicker),...e.canFreeze?[ne.utf8ToHex("canFreeze"),this.trueAsHex]:[],...e.canWipe?[ne.utf8ToHex("canWipe"),this.trueAsHex]:[],...e.canPause?[ne.utf8ToHex("canPause"),this.trueAsHex]:[],...e.canTransferNFTCreateRole?[ne.utf8ToHex("canTransferNFTCreateRole"),this.trueAsHex]:[],...e.canChangeOwner?[ne.utf8ToHex("canChangeOwner"),this.trueAsHex]:[],...e.canUpgrade?[ne.utf8ToHex("canUpgrade"),this.trueAsHex]:[],...e.canAddSpecialRoles?[ne.utf8ToHex("canAddSpecialRoles"),this.trueAsHex]:[]];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}issueNonFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issueNonFungible",ne.utf8ToHex(e.tokenName),ne.utf8ToHex(e.tokenTicker),...e.canFreeze?[ne.utf8ToHex("canFreeze"),this.trueAsHex]:[],...e.canWipe?[ne.utf8ToHex("canWipe"),this.trueAsHex]:[],...e.canPause?[ne.utf8ToHex("canPause"),this.trueAsHex]:[],...e.canTransferNFTCreateRole?[ne.utf8ToHex("canTransferNFTCreateRole"),this.trueAsHex]:[],...e.canChangeOwner?[ne.utf8ToHex("canChangeOwner"),this.trueAsHex]:[],...e.canUpgrade?[ne.utf8ToHex("canUpgrade"),this.trueAsHex]:[],...e.canAddSpecialRoles?[ne.utf8ToHex("canAddSpecialRoles"),this.trueAsHex]:[]];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}registerMetaESDT(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["registerMetaESDT",ne.utf8ToHex(e.tokenName),ne.utf8ToHex(e.tokenTicker),ne.bigIntToHex(e.numDecimals),...e.canFreeze?[ne.utf8ToHex("canFreeze"),this.trueAsHex]:[],...e.canWipe?[ne.utf8ToHex("canWipe"),this.trueAsHex]:[],...e.canPause?[ne.utf8ToHex("canPause"),this.trueAsHex]:[],...e.canTransferNFTCreateRole?[ne.utf8ToHex("canTransferNFTCreateRole"),this.trueAsHex]:[],...e.canChangeOwner?[ne.utf8ToHex("canChangeOwner"),this.trueAsHex]:[],...e.canUpgrade?[ne.utf8ToHex("canUpgrade"),this.trueAsHex]:[],...e.canAddSpecialRoles?[ne.utf8ToHex("canAddSpecialRoles"),this.trueAsHex]:[]];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}registerAndSetAllRoles(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["registerAndSetAllRoles",ne.utf8ToHex(e.tokenName),ne.utf8ToHex(e.tokenTicker),ne.utf8ToHex(e.tokenType),ne.bigIntToHex(e.numDecimals)];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}setBurnRoleGlobally(e){let r=["setBurnRoleGlobally",ne.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitToggleBurnRoleGlobally,dataParts:r})}unsetBurnRoleGlobally(e){let r=["unsetBurnRoleGlobally",ne.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitToggleBurnRoleGlobally,dataParts:r})}setSpecialRoleOnFungible(e){let r=["setSpecialRole",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user),...e.addRoleLocalMint?[ne.utf8ToHex("ESDTRoleLocalMint")]:[],...e.addRoleLocalBurn?[ne.utf8ToHex("ESDTRoleLocalBurn")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}setSpecialRoleOnSemiFungible(e){let r=["setSpecialRole",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user),...e.addRoleNFTCreate?[ne.utf8ToHex("ESDTRoleNFTCreate")]:[],...e.addRoleNFTBurn?[ne.utf8ToHex("ESDTRoleNFTBurn")]:[],...e.addRoleNFTAddQuantity?[ne.utf8ToHex("ESDTRoleNFTAddQuantity")]:[],...e.addRoleESDTTransferRole?[ne.utf8ToHex("ESDTTransferRole")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}setSpecialRoleOnMetaESDT(e){return this.setSpecialRoleOnSemiFungible(e)}setSpecialRoleOnNonFungible(e){let r=["setSpecialRole",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user),...e.addRoleNFTCreate?[ne.utf8ToHex("ESDTRoleNFTCreate")]:[],...e.addRoleNFTBurn?[ne.utf8ToHex("ESDTRoleNFTBurn")]:[],...e.addRoleNFTUpdateAttributes?[ne.utf8ToHex("ESDTRoleNFTUpdateAttributes")]:[],...e.addRoleNFTAddURI?[ne.utf8ToHex("ESDTRoleNFTAddURI")]:[],...e.addRoleESDTTransferRole?[ne.utf8ToHex("ESDTTransferRole")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}nftCreate(e){let r=["ESDTNFTCreate",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.initialQuantity),ne.utf8ToHex(e.name),ne.bigIntToHex(e.royalties),ne.utf8ToHex(e.hash),ne.bufferToHex(e.attributes),...e.uris.map(ne.utf8ToHex)],i=(e.name+e.hash+e.attributes+e.uris.join("")).length*this.config.gasLimitStorePerByte.valueOf();return this.createTransaction({sender:e.creator,receiver:e.creator,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTCreate.valueOf()+i.valueOf(),dataParts:r})}pause(e){let r=["pause",ne.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitPausing,dataParts:r})}unpause(e){let r=["unPause",ne.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitPausing,dataParts:r})}freeze(e){let r=["freeze",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitFreezing,dataParts:r})}unfreeze(e){let r=["unFreeze",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitFreezing,dataParts:r})}wipe(e){let r=["wipe",ne.utf8ToHex(e.tokenIdentifier),ne.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitWiping,dataParts:r})}localMint(e){let r=["ESDTLocalMint",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.supplyToMint)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTLocalMint,dataParts:r})}localBurn(e){let r=["ESDTLocalBurn",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.supplyToBurn)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTLocalBurn,dataParts:r})}updateAttributes(e){let r=["ESDTNFTUpdateAttributes",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.tokenNonce),ne.bufferToHex(e.attributes)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTUpdateAttributes,dataParts:r})}addQuantity(e){let r=["ESDTNFTAddQuantity",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.tokenNonce),ne.bigIntToHex(e.quantityToAdd)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTAddQuantity,dataParts:r})}burnQuantity(e){let r=["ESDTNFTBurn",ne.utf8ToHex(e.tokenIdentifier),ne.bigIntToHex(e.tokenNonce),ne.bigIntToHex(e.quantityToBurn)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTBurn,dataParts:r})}createTransaction({sender:e,receiver:r,nonce:n,value:i,gasPrice:s,gasLimitHint:o,executionGasLimit:a,dataParts:u}){let c=this.buildTransactionPayload(u),f=o||this.computeGasLimit(c,a),h=new V8.TransactionVersion(lI.TRANSACTION_VERSION_DEFAULT),g=new V8.TransactionOptions(lI.TRANSACTION_OPTIONS_DEFAULT);return new Aee.Transaction({chainID:this.config.chainID,sender:e,receiver:r,gasLimit:f,gasPrice:s,nonce:n||0,value:i||0,data:c,version:h,options:g})}buildTransactionPayload(e){let r=e.join(lI.ARGUMENTS_SEPARATOR);return new bee.TransactionPayload(r)}computeGasLimit(e,r){return this.config.minGasLimit.valueOf()+this.config.gasLimitPerByte.valueOf()*e.length()+r.valueOf()}};Qg.TokenOperationsFactory=fI});var G8=E(Wg=>{"use strict";l();Object.defineProperty(Wg,"__esModule",{value:!0});Wg.TokenOperationsFactoryConfig=void 0;var Iee=ht(),hI=class{constructor(e){this.minGasPrice=1e9,this.minGasLimit=5e4,this.gasLimitPerByte=1500,this.gasLimitIssue=6e7,this.gasLimitToggleBurnRoleGlobally=6e7,this.gasLimitESDTLocalMint=3e5,this.gasLimitESDTLocalBurn=3e5,this.gasLimitSetSpecialRole=6e7,this.gasLimitPausing=6e7,this.gasLimitFreezing=6e7,this.gasLimitWiping=6e7,this.gasLimitESDTNFTCreate=3e6,this.gasLimitESDTNFTUpdateAttributes=1e6,this.gasLimitESDTNFTAddQuantity=1e6,this.gasLimitESDTNFTBurn=1e6,this.gasLimitStorePerByte=5e4,this.issueCost="50000000000000000",this.esdtContractAddress=Iee.Address.fromBech32("erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u"),this.chainID=e}};Wg.TokenOperationsFactoryConfig=hI});var j8=E(zg=>{"use strict";l();Object.defineProperty(zg,"__esModule",{value:!0});zg.TokenOperationsOutcomeParser=void 0;var _ee=ht(),dI=Be(),k8=cI(),pI=class{parseIssueFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issue");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseIssueNonFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issueNonFungible");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseIssueSemiFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issueSemiFungible");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseRegisterMetaESDT(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"registerMetaESDT");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseRegisterAndSetAllRoles(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"registerAndSetAllRoles"),n=this.extractTokenIdentifier(r),s=this.findSingleEventByIdentifier(e,"ESDTSetRole").topics.slice(3).map(o=>o.valueOf().toString());return{tokenIdentifier:n,roles:s}}parseSetBurnRoleGlobally(e){return this.ensureNoError(e),{}}parseUnsetBurnRoleGlobally(e){return this.ensureNoError(e),{}}parseSetSpecialRole(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTSetRole"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=r.topics.slice(3).map(o=>o.valueOf().toString());return{userAddress:n,tokenIdentifier:i,roles:s}}parseNFTCreate(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTCreate"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,initialQuantity:s}}parseLocalMint(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTLocalMint"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=this.extractNonce(r),o=this.extractAmount(r);return{userAddress:n,tokenIdentifier:i,nonce:s,mintedSupply:o}}parseLocalBurn(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTLocalBurn"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=this.extractNonce(r),o=this.extractAmount(r);return{userAddress:n,tokenIdentifier:i,nonce:s,burntSupply:o}}parsePause(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTPause");return{}}parseUnpause(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTUnPause");return{}}parseFreeze(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTFreeze"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseUnfreeze(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTUnFreeze"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseWipe(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTWipe"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseUpdateAttributes(e){var r;this.ensureNoError(e);let n=this.findSingleEventByIdentifier(e,"ESDTNFTUpdateAttributes"),i=this.extractTokenIdentifier(n),s=this.extractNonce(n),o=(r=n.topics[3])===null||r===void 0?void 0:r.valueOf();return{tokenIdentifier:i,nonce:s,attributes:o}}parseAddQuantity(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTAddQuantity"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,addedQuantity:s}}parseBurnQuantity(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTBurn"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,burntQuantity:s}}ensureNoError(e){var r;for(let n of e.logs.events)if(n.identifier=="signalError"){let i=d.Buffer.from(n.data.substring(1),"hex").toString(),s=(r=n.topics[1])===null||r===void 0?void 0:r.valueOf().toString();throw new dI.ErrCannotParseTransactionOutcome(e.hash,`encountered signalError: ${s} (${i})`)}}findSingleEventByIdentifier(e,r){let n=this.gatherAllEvents(e).filter(i=>i.identifier==r);if(n.length==0)throw new dI.ErrCannotParseTransactionOutcome(e.hash,`cannot find event of type ${r}`);if(n.length>1)throw new dI.ErrCannotParseTransactionOutcome(e.hash,`more than one event of type ${r}`);return n[0]}gatherAllEvents(e){let r=[];r.push(...e.logs.events);for(let n of e.contractResults.items)r.push(...n.logs.events);return r}extractTokenIdentifier(e){var r;return(r=e.topics[0])===null||r===void 0?void 0:r.valueOf().toString()}extractNonce(e){var r;return k8.bufferToBigInt((r=e.topics[1])===null||r===void 0?void 0:r.valueOf()).toFixed(0)}extractAmount(e){var r;return k8.bufferToBigInt((r=e.topics[2])===null||r===void 0?void 0:r.valueOf()).toFixed(0)}extractAddress(e){var r;return _ee.Address.fromBuffer((r=e.topics[3])===null||r===void 0?void 0:r.valueOf()).toString()}};zg.TokenOperationsOutcomeParser=pI});var Q8=E(hi=>{"use strict";l();var See=hi&&hi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gI=hi&&hi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&See(e,t,r)};Object.defineProperty(hi,"__esModule",{value:!0});gI(H8(),hi);gI(G8(),hi);gI(j8(),hi)});var W8=E(Ze=>{"use strict";l();var Tee=Ze&&Ze.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ct=Ze&&Ze.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tee(e,t,r)};Object.defineProperty(Ze,"__esModule",{value:!0});w8();Ct(oa(),Ze);Ct(ht(),Ze);Ct(fE(),Ze);Ct(Be(),Ze);Ct(aE(),Ze);Ct(v8(),Ze);Ct(b8(),Ze);Ct(aa(),Ze);Ct(gc(),Ze);Ct(I8(),Ze);Ct(M8(),Ze);Ct(Bd(),Ze);Ct(oI(),Ze);Ct(Q8(),Ze);Ct(_m(),Ze);Ct(bn(),Ze);Ct(zn(),Ze);Ct(ud(),Ze);Ct(sE(),Ze);Ct(vr(),Ze)});var X8=E(xt=>{"use strict";l();var Cee=xt&&xt.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(xt,"__esModule",{value:!0});xt.sleep=xt.getMetadata=xt.applyTransactionSignature=xt.getAddressFromSession=xt.addressIsValid=xt.getConnectionParams=xt.getCurrentTopic=xt.getCurrentSession=void 0;var K8=W8(),z8=vc(),xee=wl(),$g=jb(),di=zb(),yI=Kb(),$8=Mg();function Y8(t,e){if(!e)throw new Error(di.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=e.find(J8(t)).filter(n=>n.acknowledged);if(r.length>0){let n=r.length-1;return r[n]}if(e.session.length>0){let n=e.session.keys.length-1;return e.session.get(e.session.keys[n])}throw yI.Logger.error(di.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),new Error(di.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected)}xt.getCurrentSession=Y8;function Nee(t,e){if(!e)throw new Error(di.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=Y8(t,e);if(!r?.topic)throw new Error(di.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);return r.topic}xt.getCurrentTopic=Nee;function J8(t,e){var r,n,i;let s=[...$g.WALLETCONNECT_MULTIVERSX_METHODS,...(r=e?.methods)!==null&&r!==void 0?r:[]];!((n=e?.methods)===null||n===void 0)&&n.includes($8.OptionalOperation.SIGN_LOGIN_TOKEN)||s.push($8.OptionalOperation.SIGN_LOGIN_TOKEN);let o=[`${$g.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${t}`],a=(i=e?.events)!==null&&i!==void 0?i:[];return{requiredNamespaces:{[$g.WALLETCONNECT_MULTIVERSX_NAMESPACE]:{methods:s,chains:o,events:a}}}}xt.getConnectionParams=J8;function Oee(t){try{return!K8.Address.fromBech32(t).isEmpty()}catch{return!1}}xt.addressIsValid=Oee;function Dee(t){let e=t.namespaces[$g.WALLETCONNECT_MULTIVERSX_NAMESPACE];if(e&&e.accounts){let r=e.accounts[0],[n,i,s]=r.split(":");return s}return""}xt.getAddressFromSession=Dee;function Pee({transaction:t,response:e}){if(!e)throw yI.Logger.error(di.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse),new Error(di.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);let{signature:r,guardianSignature:n,version:i,options:s,guardian:o}=e,a=t.getGuardian().bech32();if(a&&a!==o)throw yI.Logger.error(di.WalletConnectV2ProviderErrorMessagesEnum.invalidGuardian),new Error(di.WalletConnectV2ProviderErrorMessagesEnum.invalidGuardian);return o&&t.setGuardian(K8.Address.fromBech32(o)),i&&t.setVersion(i),s!=null&&t.setOptions(s),t.applySignature(new z8.Signature(r)),n&&t.applyGuardianSignature(new z8.Signature(n)),t}xt.applyTransactionSignature=Pee;function Ree(t){if(t)return Object.assign(Object.assign({},t),{url:xee.getAppMetadata().url})}xt.getMetadata=Ree;function Bee(t){return Cee(this,void 0,void 0,function*(){return yield new Promise(e=>setTimeout(()=>{e()},t))})}xt.sleep=Bee});var Fl=E(wr=>{"use strict";l();var bt=wr&&wr.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Lee=wr&&wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});wr.WalletConnectV2Provider=wr.OptionalOperation=wr.Operation=wr.WalletConnectV2ProviderErrorMessagesEnum=void 0;var Fee=vc(),Mee=Lee(y8()),mI=wl(),lo=jb(),ye=zb();Object.defineProperty(wr,"WalletConnectV2ProviderErrorMessagesEnum",{enumerable:!0,get:function(){return ye.WalletConnectV2ProviderErrorMessagesEnum}});var Le=Kb(),is=Mg();Object.defineProperty(wr,"Operation",{enumerable:!0,get:function(){return is.Operation}});Object.defineProperty(wr,"OptionalOperation",{enumerable:!0,get:function(){return is.OptionalOperation}});var Qt=X8(),wI=class{constructor(e,r,n,i,s){this.chainId="",this.address="",this.signature="",this.isInitializing=!1,this.processingTopic="",this.options={},this.onClientConnect=e,this.chainId=r,this.walletConnectV2Relay=n,this.walletConnectV2ProjectId=i,this.options=s}reset(){this.address="",this.signature="",this.walletConnector=void 0,this.session=void 0,this.pairings=void 0}init(){var e,r;return bt(this,void 0,void 0,function*(){if(this.isInitialized())return this.isInitialized();try{if(!this.isInitializing){this.isInitializing=!0,this.reset();let n=!((e=this.options)===null||e===void 0)&&e.metadata?{metadata:Qt.getMetadata((r=this.options)===null||r===void 0?void 0:r.metadata)}:{},i=yield Mee.default.init(Object.assign(Object.assign(Object.assign({},this.options),{relayUrl:this.walletConnectV2Relay,projectId:this.walletConnectV2ProjectId}),n));this.walletConnector=i,this.isInitializing=!1,yield this.subscribeToEvents(i),yield this.checkPersistedState(i)}}catch{throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToInit)}finally{return this.isInitializing=!1,this.isInitialized()}})}isInitialized(){return!!this.walletConnector&&!this.isInitializing}isConnected(){return new Promise((e,r)=>e(!!(this.isInitialized()&&typeof this.session<"u")))}connect(e){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=Qt.getConnectionParams(this.chainId,e);try{return yield this.walletConnector.connect(Object.assign({pairingTopic:e?.topic},r))}catch{throw this.reset(),Le.Logger.error(e?.topic?ye.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:ye.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect),new Error(e?.topic?ye.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:ye.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect)}})}login(e){var r;return bt(this,void 0,void 0,function*(){if(this.isInitializing=!0,typeof this.walletConnector>"u"&&(yield this.connect()),typeof this.walletConnector>"u")throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session<"u"&&(yield this.logout({topic:(r=this.session)===null||r===void 0?void 0:r.topic}));try{if(e&&e.approval){let n=yield e.approval();if(e.token){yield Qt.sleep(lo.WALLETCONNECT_SIGN_LOGIN_DELAY);let i=Qt.getAddressFromSession(n),o=n.namespaces[lo.WALLETCONNECT_MULTIVERSX_NAMESPACE].methods.includes(is.OptionalOperation.SIGN_NATIVE_AUTH_TOKEN)?is.OptionalOperation.SIGN_NATIVE_AUTH_TOKEN:is.OptionalOperation.SIGN_LOGIN_TOKEN,{signature:a}=yield this.walletConnector.request({chainId:`${lo.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:n.topic,request:{method:o,params:{token:e.token,address:i}}});if(!a)throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken);return yield this.onSessionConnected({session:n,signature:a})}return yield this.onSessionConnected({session:n,signature:""})}}catch{throw this.reset(),Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin)}finally{this.isInitializing=!1}return""})}logout(e){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{if(this.processingTopic===(e?.topic||Qt.getCurrentTopic(this.chainId,this.walletConnector)))return!0;if(e?.topic)this.processingTopic=e.topic,yield this.walletConnector.disconnect({topic:e.topic,reason:mI.getSdkError("USER_DISCONNECTED")});else{let r=Qt.getCurrentTopic(this.chainId,this.walletConnector);this.processingTopic=r,yield this.walletConnector.disconnect({topic:r,reason:mI.getSdkError("USER_DISCONNECTED")}),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0})}}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.alreadyLoggedOut)}finally{this.processingTopic=""}return!0})}getAddress(){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.address})}getSignature(){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.signature})}getPairings(){var e,r,n,i,s;return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return(s=(i=(n=(r=(e=this.walletConnector)===null||e===void 0?void 0:e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll({active:!0}))!==null&&s!==void 0?s:[]})}signMessage(e){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);try{let r=yield this.getAddress(),{signature:n}=yield this.walletConnector.request({chainId:`${lo.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:Qt.getCurrentTopic(this.chainId,this.walletConnector),request:{method:is.Operation.SIGN_MESSAGE,params:{address:r,message:e.message.toString()}}});if(!n)throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse);try{e.applySignature(new Fee.Signature(n))}catch{throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature)}}catch{throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToSign)}return e})}signTransaction(e){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=e.toPlainObject();if(this.chainId!==e.getChainID().valueOf())throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);try{let n=yield this.walletConnector.request({chainId:`${lo.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:Qt.getCurrentTopic(this.chainId,this.walletConnector),request:{method:is.Operation.SIGN_TRANSACTION,params:{transaction:r}}});return Qt.applyTransactionSignature({transaction:e,response:n})}catch{throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}signTransactions(e){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=e.map(n=>{if(this.chainId!==n.getChainID().valueOf())throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);return n.toPlainObject()});try{let{signatures:n}=yield this.walletConnector.request({chainId:`${lo.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:Qt.getCurrentTopic(this.chainId,this.walletConnector),request:{method:is.Operation.SIGN_TRANSACTIONS,params:{transactions:r}}});if(!n)throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);if(!Array.isArray(n)||e.length!==n.length)throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);for(let[i,s]of e.entries()){let o=n[i];Qt.applyTransactionSignature({transaction:s,response:o})}return e}catch{throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}sendCustomRequest(e){var r;return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);if(!((r=e?.request)===null||r===void 0)&&r.method){try{let n=Object.assign({},e.request),{method:i}=n,{response:s}=yield this.walletConnector.request({chainId:`${lo.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:Qt.getCurrentTopic(this.chainId,this.walletConnector),request:Object.assign(Object.assign({},n),{method:i})});s||Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse)}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse)}return}})}ping(){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session>"u"&&Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);try{let e=Qt.getCurrentTopic(this.chainId,this.walletConnector);return yield this.walletConnector.ping({topic:e}),!0}catch{return Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.pingFailed),!1}})}loginAccount(e){return bt(this,void 0,void 0,function*(){return e?Qt.addressIsValid(e.address)?(this.address=e.address,e.signature&&(this.signature=e.signature),this.onClientConnect.onClientLogin(),this.address):(Le.Logger.error(`${ye.WalletConnectV2ProviderErrorMessagesEnum.invalidAddress} ${e.address}`),this.walletConnector&&(yield this.logout()),""):""})}onSessionConnected(e){return bt(this,void 0,void 0,function*(){if(!e)return"";this.session=e.session;let r=Qt.getAddressFromSession(e.session);return r?(yield this.loginAccount({address:r,signature:e.signature}),r):""})}handleTopicUpdateEvent({topic:e}){return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u"){Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return}try{let r=yield this.getPairings();if(this.address&&!this.isInitializing&&r)if(r?.length===0)this.onClientConnect.onClientLogout();else{let n=r[r.length-1];n?.topic===e&&this.onClientConnect.onClientLogout()}}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleTopic)}finally{this.pairings=yield this.getPairings()}})}handleSessionEvents({topic:e,params:r}){var n;return bt(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.session&&((n=this.session)===null||n===void 0?void 0:n.topic)!==e)return;let{event:i}=r;if(i?.name&&Qt.getCurrentTopic(this.chainId,this.walletConnector)===e){let s=i.data;this.onClientConnect.onClientEvent(s)}})}subscribeToEvents(e){var r,n,i,s;return bt(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{e.on("session_update",({topic:o,params:a})=>{var u;if(!this.session||((u=this.session)===null||u===void 0?void 0:u.topic)!==o)return;let{namespaces:c}=a,f=e.session.get(o),h=Object.assign(Object.assign({},f),{namespaces:c});this.onSessionConnected({session:h})}),e.on("session_event",this.handleSessionEvents.bind(this)),e.on("session_delete",({topic:o})=>bt(this,void 0,void 0,function*(){var a;this.isInitializing&&(this.onClientConnect.onClientLogout(),this.reset()),!(!this.session||((a=this.session)===null||a===void 0?void 0:a.topic)!==o)&&(Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionDeleted),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),e.on("session_expire",({topic:o})=>bt(this,void 0,void 0,function*(){var a;!this.session||((a=this.session)===null||a===void 0?void 0:a.topic)!==o||(Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.sessionExpired),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),(n=(r=e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0||n.events.on("pairing_delete",this.handleTopicUpdateEvent.bind(this)),(s=(i=e.core)===null||i===void 0?void 0:i.pairing)===null||s===void 0||s.events.on("pairing_expire",this.handleTopicUpdateEvent.bind(this))}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleEvent)}})}checkPersistedState(e){return bt(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(ye.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.pairings=yield this.getPairings(),!(typeof this.session<"u")&&e.session.length&&!this.address&&!this.isInitializing){let r=Qt.getCurrentSession(this.chainId,e);if(r)return yield this.onSessionConnected({session:r}),r}})}cleanupPendingPairings(e={}){var r,n,i,s,o,a,u,c;return bt(this,void 0,void 0,function*(){if(!(typeof this.walletConnector>"u"))try{let f=(i=(n=(r=this.walletConnector.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll({active:!1});if(!mI.isValidArray(f))return;for(let h of f)if(e.deletePairings)(o=(s=this.walletConnector.core)===null||s===void 0?void 0:s.expirer)===null||o===void 0||o.set(h.topic,0);else try{yield(c=(u=(a=this.walletConnector.core)===null||a===void 0?void 0:a.relayer)===null||u===void 0?void 0:u.subscriber)===null||c===void 0?void 0:c.unsubscribe(h.topic)}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleCleanup)}}catch{Le.Logger.error(ye.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleCleanup)}})}};wr.WalletConnectV2Provider=wI});var eL=E((T0e,Z8)=>{"use strict";l();Z8.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var nL=E((x0e,rL)=>{"use strict";l();var tL=typeof Symbol<"u"&&Symbol,Uee=eL();rL.exports=function(){return typeof tL!="function"||typeof Symbol!="function"||typeof tL("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Uee()}});var oL=E((O0e,sL)=>{"use strict";l();var iL={foo:{}},qee=Object;sL.exports=function(){return{__proto__:iL}.foo===iL.foo&&!({__proto__:null}instanceof qee)}});var cL=E((P0e,uL)=>{"use strict";l();var Vee="Function.prototype.bind called on incompatible ",Hee=Object.prototype.toString,Gee=Math.max,kee="[object Function]",aL=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},jee=function(e,r){for(var n=[],i=r||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},Qee=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};uL.exports=function(e){var r=this;if(typeof r!="function"||Hee.apply(r)!==kee)throw new TypeError(Vee+r);for(var n=jee(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,aL(n,arguments));return Object(f)===f?f:this}return r.apply(e,aL(n,arguments))},o=Gee(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(i=Function("binder","return function ("+Qee(a,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var Kg=E((B0e,lL)=>{"use strict";l();var Wee=cL();lL.exports=Function.prototype.bind||Wee});var hL=E((F0e,fL)=>{"use strict";l();var zee=Function.prototype.call,$ee=Object.prototype.hasOwnProperty,Kee=Kg();fL.exports=Kee.call(zee,$ee)});var ss=E((U0e,mL)=>{"use strict";l();var Pe,au=SyntaxError,yL=Function,ou=TypeError,EI=function(t){try{return yL('"use strict"; return ('+t+").constructor;")()}catch{}},fo=Object.getOwnPropertyDescriptor;if(fo)try{fo({},"")}catch{fo=null}var vI=function(){throw new ou},Yee=fo?function(){try{return arguments.callee,vI}catch{try{return fo(arguments,"callee").get}catch{return vI}}}():vI,iu=nL()(),Jee=oL()(),qt=Object.getPrototypeOf||(Jee?function(t){return t.__proto__}:null),su={},Xee=typeof Uint8Array>"u"||!qt?Pe:qt(Uint8Array),ho={"%AggregateError%":typeof AggregateError>"u"?Pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Pe:ArrayBuffer,"%ArrayIteratorPrototype%":iu&&qt?qt([][Symbol.iterator]()):Pe,"%AsyncFromSyncIteratorPrototype%":Pe,"%AsyncFunction%":su,"%AsyncGenerator%":su,"%AsyncGeneratorFunction%":su,"%AsyncIteratorPrototype%":su,"%Atomics%":typeof Atomics>"u"?Pe:Atomics,"%BigInt%":typeof BigInt>"u"?Pe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Pe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Pe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Pe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Pe:FinalizationRegistry,"%Function%":yL,"%GeneratorFunction%":su,"%Int8Array%":typeof Int8Array>"u"?Pe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Pe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":iu&&qt?qt(qt([][Symbol.iterator]())):Pe,"%JSON%":typeof JSON=="object"?JSON:Pe,"%Map%":typeof Map>"u"?Pe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!iu||!qt?Pe:qt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Pe:Promise,"%Proxy%":typeof Proxy>"u"?Pe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Pe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Pe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!iu||!qt?Pe:qt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":iu&&qt?qt(""[Symbol.iterator]()):Pe,"%Symbol%":iu?Symbol:Pe,"%SyntaxError%":au,"%ThrowTypeError%":Yee,"%TypedArray%":Xee,"%TypeError%":ou,"%Uint8Array%":typeof Uint8Array>"u"?Pe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Pe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Pe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Pe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Pe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Pe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Pe:WeakSet};if(qt)try{null.error}catch(t){dL=qt(qt(t)),ho["%Error.prototype%"]=dL}var dL,Zee=function t(e){var r;if(e==="%AsyncFunction%")r=EI("async function () {}");else if(e==="%GeneratorFunction%")r=EI("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=EI("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&qt&&(r=qt(i.prototype))}return ho[e]=r,r},pL={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ml=Kg(),Yg=hL(),ete=Ml.call(Function.call,Array.prototype.concat),tte=Ml.call(Function.apply,Array.prototype.splice),gL=Ml.call(Function.call,String.prototype.replace),Jg=Ml.call(Function.call,String.prototype.slice),rte=Ml.call(Function.call,RegExp.prototype.exec),nte=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ite=/\\(\\)?/g,ste=function(e){var r=Jg(e,0,1),n=Jg(e,-1);if(r==="%"&&n!=="%")throw new au("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new au("invalid intrinsic syntax, expected opening `%`");var i=[];return gL(e,nte,function(s,o,a,u){i[i.length]=a?gL(u,ite,"$1"):o||s}),i},ote=function(e,r){var n=e,i;if(Yg(pL,n)&&(i=pL[n],n="%"+i[0]+"%"),Yg(ho,n)){var s=ho[n];if(s===su&&(s=Zee(n)),typeof s>"u"&&!r)throw new ou("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new au("intrinsic "+e+" does not exist!")};mL.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ou("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ou('"allowMissing" argument must be a boolean');if(rte(/^%?[^%]*%?$/,e)===null)throw new au("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ste(e),i=n.length>0?n[0]:"",s=ote("%"+i+"%",r),o=s.name,a=s.value,u=!1,c=s.alias;c&&(i=c[0],tte(n,ete([0,1],c)));for(var f=1,h=!0;f<n.length;f+=1){var g=n[f],y=Jg(g,0,1),m=Jg(g,-1);if((y==='"'||y==="'"||y==="`"||m==='"'||m==="'"||m==="`")&&y!==m)throw new au("property names with quotes must have matching quotes");if((g==="constructor"||!h)&&(u=!0),i+="."+g,o="%"+i+"%",Yg(ho,o))a=ho[o];else if(a!=null){if(!(g in a)){if(!r)throw new ou("base intrinsic for "+e+" exists, but the property is not available.");return}if(fo&&f+1>=n.length){var T=fo(a,g);h=!!T,h&&"get"in T&&!("originalValue"in T.get)?a=T.get:a=a[g]}else h=Yg(a,g),a=a[g];h&&!u&&(ho[o]=a)}}return a}});var II=E((V0e,wL)=>{"use strict";l();var ate=ss(),AI=ate("%Object.defineProperty%",!0),bI=function(){if(AI)try{return AI({},"a",{value:1}),!0}catch{return!1}return!1};bI.hasArrayLengthDefineBug=function(){if(!bI())return null;try{return AI([],"length",{value:1}).length!==1}catch{return!0}};wL.exports=bI});var _I=E((G0e,EL)=>{"use strict";l();var ute=ss(),Xg=ute("%Object.getOwnPropertyDescriptor%",!0);if(Xg)try{Xg([],"length")}catch{Xg=null}EL.exports=Xg});var bL=E((j0e,AL)=>{"use strict";l();var cte=II()(),SI=ss(),Ul=cte&&SI("%Object.defineProperty%",!0);if(Ul)try{Ul({},"a",{value:1})}catch{Ul=!1}var lte=SI("%SyntaxError%"),uu=SI("%TypeError%"),vL=_I();AL.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new uu("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new uu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new uu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new uu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new uu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new uu("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!vL&&vL(e,r);if(Ul)Ul(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:s===null&&u?u.writable:!s});else if(a||!i&&!s&&!o)e[r]=n;else throw new lte("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var xL=E((W0e,CL)=>{"use strict";l();var TL=ss(),IL=bL(),fte=II()(),_L=_I(),SL=TL("%TypeError%"),hte=TL("%Math.floor%");CL.exports=function(e,r){if(typeof e!="function")throw new SL("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||hte(r)!==r)throw new SL("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&_L){var o=_L(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(fte?IL(e,"length",r,!0,!0):IL(e,"length",r)),e}});var RL=E(($0e,Zg)=>{"use strict";l();var TI=Kg(),cu=ss(),dte=xL(),pte=cu("%TypeError%"),OL=cu("%Function.prototype.apply%"),DL=cu("%Function.prototype.call%"),PL=cu("%Reflect.apply%",!0)||TI.call(DL,OL),ql=cu("%Object.defineProperty%",!0),gte=cu("%Math.max%");if(ql)try{ql({},"a",{value:1})}catch{ql=null}Zg.exports=function(e){if(typeof e!="function")throw new pte("a function is required");var r=PL(TI,DL,arguments);return dte(r,1+gte(0,e.length-(arguments.length-1)),!0)};var NL=function(){return PL(TI,OL,arguments)};ql?ql(Zg.exports,"apply",{value:NL}):Zg.exports.apply=NL});var ML=E((Y0e,FL)=>{"use strict";l();var BL=ss(),LL=RL(),yte=LL(BL("String.prototype.indexOf"));FL.exports=function(e,r){var n=BL(e,!!r);return typeof n=="function"&&yte(e,".prototype.")>-1?LL(n):n}});var UL=E(()=>{l()});var iF=E((tme,nF)=>{l();var FI=typeof Map=="function"&&Map.prototype,CI=Object.getOwnPropertyDescriptor&&FI?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ty=FI&&CI&&typeof CI.get=="function"?CI.get:null,qL=FI&&Map.prototype.forEach,MI=typeof Set=="function"&&Set.prototype,xI=Object.getOwnPropertyDescriptor&&MI?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ry=MI&&xI&&typeof xI.get=="function"?xI.get:null,VL=MI&&Set.prototype.forEach,mte=typeof WeakMap=="function"&&WeakMap.prototype,Hl=mte?WeakMap.prototype.has:null,wte=typeof WeakSet=="function"&&WeakSet.prototype,Gl=wte?WeakSet.prototype.has:null,Ete=typeof WeakRef=="function"&&WeakRef.prototype,HL=Ete?WeakRef.prototype.deref:null,vte=Boolean.prototype.valueOf,Ate=Object.prototype.toString,bte=Function.prototype.toString,Ite=String.prototype.match,UI=String.prototype.slice,as=String.prototype.replace,_te=String.prototype.toUpperCase,GL=String.prototype.toLowerCase,JL=RegExp.prototype.test,kL=Array.prototype.concat,Mn=Array.prototype.join,Ste=Array.prototype.slice,jL=Math.floor,DI=typeof BigInt=="function"?BigInt.prototype.valueOf:null,NI=Object.getOwnPropertySymbols,PI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,lu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",tr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===lu||!0)?Symbol.toStringTag:null,XL=Object.prototype.propertyIsEnumerable,QL=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function WL(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||JL.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-jL(-t):jL(t);if(n!==t){var i=String(n),s=UI.call(e,i.length+1);return as.call(i,r,"$&_")+"."+as.call(as.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return as.call(e,r,"$&_")}var RI=UL(),zL=RI.custom,$L=eF(zL)?zL:null;nF.exports=function t(e,r,n,i){var s=r||{};if(os(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(os(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=os(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(os(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(os(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return rF(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?WL(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?WL(e,c):c}var f=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return BI(e)?"[Array]":"[Object]";var h=kte(s,n);if(typeof i>"u")i=[];else if(tF(i,e)>=0)return"[Circular]";function g(k,K,ge){if(K&&(i=Ste.call(i),i.push(K)),ge){var ue={depth:s.depth};return os(s,"quoteStyle")&&(ue.quoteStyle=s.quoteStyle),t(k,ue,n+1,i)}return t(k,s,n+1,i)}if(typeof e=="function"&&!KL(e)){var y=Bte(e),m=ey(e,g);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(m.length>0?" { "+Mn.call(m,", ")+" }":"")}if(eF(e)){var T=lu?as.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):PI.call(e);return typeof e=="object"&&!lu?Vl(T):T}if(Vte(e)){for(var O="<"+GL.call(String(e.nodeName)),B=e.attributes||[],W=0;W<B.length;W++)O+=" "+B[W].name+"="+ZL(Tte(B[W].value),"double",s);return O+=">",e.childNodes&&e.childNodes.length&&(O+="..."),O+="</"+GL.call(String(e.nodeName))+">",O}if(BI(e)){if(e.length===0)return"[]";var U=ey(e,g);return h&&!Gte(U)?"["+LI(U,h)+"]":"[ "+Mn.call(U,", ")+" ]"}if(xte(e)){var A=ey(e,g);return!("cause"in Error.prototype)&&"cause"in e&&!XL.call(e,"cause")?"{ ["+String(e)+"] "+Mn.call(kL.call("[cause]: "+g(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Mn.call(A,", ")+" }"}if(typeof e=="object"&&o){if($L&&typeof e[$L]=="function"&&RI)return RI(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Lte(e)){var _=[];return qL&&qL.call(e,function(k,K){_.push(g(K,e,!0)+" => "+g(k,e))}),YL("Map",ty.call(e),_,h)}if(Ute(e)){var N=[];return VL&&VL.call(e,function(k){N.push(g(k,e))}),YL("Set",ry.call(e),N,h)}if(Fte(e))return OI("WeakMap");if(qte(e))return OI("WeakSet");if(Mte(e))return OI("WeakRef");if(Ote(e))return Vl(g(Number(e)));if(Pte(e))return Vl(g(DI.call(e)));if(Dte(e))return Vl(vte.call(e));if(Nte(e))return Vl(g(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===global)return"{ [object globalThis] }";if(!Cte(e)&&!KL(e)){var I=ey(e,g),S=QL?QL(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",J=!S&&tr&&Object(e)===e&&tr in e?UI.call(us(e),8,-1):R?"Object":"",Q=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",V=Q+(J||R?"["+Mn.call(kL.call([],J||[],R||[]),": ")+"] ":"");return I.length===0?V+"{}":h?V+"{"+LI(I,h)+"}":V+"{ "+Mn.call(I,", ")+" }"}return String(e)};function ZL(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Tte(t){return as.call(String(t),/"/g,"&quot;")}function BI(t){return us(t)==="[object Array]"&&(!tr||!(typeof t=="object"&&tr in t))}function Cte(t){return us(t)==="[object Date]"&&(!tr||!(typeof t=="object"&&tr in t))}function KL(t){return us(t)==="[object RegExp]"&&(!tr||!(typeof t=="object"&&tr in t))}function xte(t){return us(t)==="[object Error]"&&(!tr||!(typeof t=="object"&&tr in t))}function Nte(t){return us(t)==="[object String]"&&(!tr||!(typeof t=="object"&&tr in t))}function Ote(t){return us(t)==="[object Number]"&&(!tr||!(typeof t=="object"&&tr in t))}function Dte(t){return us(t)==="[object Boolean]"&&(!tr||!(typeof t=="object"&&tr in t))}function eF(t){if(lu)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!PI)return!1;try{return PI.call(t),!0}catch{}return!1}function Pte(t){if(!t||typeof t!="object"||!DI)return!1;try{return DI.call(t),!0}catch{}return!1}var Rte=Object.prototype.hasOwnProperty||function(t){return t in this};function os(t,e){return Rte.call(t,e)}function us(t){return Ate.call(t)}function Bte(t){if(t.name)return t.name;var e=Ite.call(bte.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function tF(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Lte(t){if(!ty||!t||typeof t!="object")return!1;try{ty.call(t);try{ry.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Fte(t){if(!Hl||!t||typeof t!="object")return!1;try{Hl.call(t,Hl);try{Gl.call(t,Gl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Mte(t){if(!HL||!t||typeof t!="object")return!1;try{return HL.call(t),!0}catch{}return!1}function Ute(t){if(!ry||!t||typeof t!="object")return!1;try{ry.call(t);try{ty.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function qte(t){if(!Gl||!t||typeof t!="object")return!1;try{Gl.call(t,Gl);try{Hl.call(t,Hl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Vte(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function rF(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return rF(UI.call(t,0,e.maxStringLength),e)+n}var i=as.call(as.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Hte);return ZL(i,"single",e)}function Hte(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+_te.call(e.toString(16))}function Vl(t){return"Object("+t+")"}function OI(t){return t+" { ? }"}function YL(t,e,r,n){var i=n?LI(r,n):Mn.call(r,", ");return t+" ("+e+") {"+i+"}"}function Gte(t){for(var e=0;e<t.length;e++)if(tF(t[e],`
`)>=0)return!1;return!0}function kte(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Mn.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Mn.call(Array(e+1),r)}}function LI(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Mn.call(t,","+r)+`
`+e.prev}function ey(t,e){var r=BI(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=os(t,i)?e(t[i],t):""}var s=typeof NI=="function"?NI(t):[],o;if(lu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)os(t,u)&&(r&&String(Number(u))===u&&u<t.length||lu&&o["$"+u]instanceof Symbol||(JL.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof NI=="function")for(var c=0;c<s.length;c++)XL.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}});var oF=E((nme,sF)=>{"use strict";l();var qI=ss(),fu=ML(),jte=iF(),Qte=qI("%TypeError%"),ny=qI("%WeakMap%",!0),iy=qI("%Map%",!0),Wte=fu("WeakMap.prototype.get",!0),zte=fu("WeakMap.prototype.set",!0),$te=fu("WeakMap.prototype.has",!0),Kte=fu("Map.prototype.get",!0),Yte=fu("Map.prototype.set",!0),Jte=fu("Map.prototype.has",!0),VI=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Xte=function(t,e){var r=VI(t,e);return r&&r.value},Zte=function(t,e,r){var n=VI(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},ere=function(t,e){return!!VI(t,e)};sF.exports=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new Qte("Side channel does not contain "+jte(s))},get:function(s){if(ny&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Wte(e,s)}else if(iy){if(r)return Kte(r,s)}else if(n)return Xte(n,s)},has:function(s){if(ny&&s&&(typeof s=="object"||typeof s=="function")){if(e)return $te(e,s)}else if(iy){if(r)return Jte(r,s)}else if(n)return ere(n,s);return!1},set:function(s,o){ny&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new ny),zte(e,s,o)):iy?(r||(r=new iy),Yte(r,s,o)):(n||(n={key:{},next:null}),Zte(n,s,o))}};return i}});var sy=E((sme,aF)=>{"use strict";l();var tre=String.prototype.replace,rre=/%20/g,HI={RFC1738:"RFC1738",RFC3986:"RFC3986"};aF.exports={default:HI.RFC3986,formatters:{RFC1738:function(t){return tre.call(t,rre,"+")},RFC3986:function(t){return String(t)}},RFC1738:HI.RFC1738,RFC3986:HI.RFC3986}});var kI=E((ame,cF)=>{"use strict";l();var nre=sy(),GI=Object.prototype.hasOwnProperty,po=Array.isArray,Un=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),ire=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(po(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},uF=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},sre=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(po(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!GI.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return po(e)&&!po(r)&&(i=uF(e,n)),po(e)&&po(r)?(r.forEach(function(s,o){if(GI.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return GI.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},ore=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},are=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},ure=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var c=o.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===nre.RFC1738&&(c===40||c===41)){a+=o.charAt(u);continue}if(c<128){a=a+Un[c];continue}if(c<2048){a=a+(Un[192|c>>6]+Un[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Un[224|c>>12]+Un[128|c>>6&63]+Un[128|c&63]);continue}u+=1,c=65536+((c&1023)<<10|o.charCodeAt(u)&1023),a+=Un[240|c>>18]+Un[128|c>>12&63]+Un[128|c>>6&63]+Un[128|c&63]}return a},cre=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],f=o[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:c}),n.push(f))}return ire(r),e},lre=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},fre=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},hre=function(e,r){return[].concat(e,r)},dre=function(e,r){if(po(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)};cF.exports={arrayToObject:uF,assign:ore,combine:hre,compact:cre,decode:are,encode:ure,isBuffer:fre,isRegExp:lre,maybeMap:dre,merge:sre}});var gF=E((cme,pF)=>{"use strict";l();var hF=oF(),QI=kI(),kl=sy(),pre=Object.prototype.hasOwnProperty,lF={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},go=Array.isArray,gre=String.prototype.split,yre=Array.prototype.push,dF=function(t,e){yre.apply(t,go(e)?e:[e])},mre=Date.prototype.toISOString,fF=kl.default,Wt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:QI.encode,encodeValuesOnly:!1,format:fF,formatter:kl.formatters[fF],indices:!1,serializeDate:function(e){return mre.call(e)},skipNulls:!1,strictNullHandling:!1},wre=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},jI={},Ere=function t(e,r,n,i,s,o,a,u,c,f,h,g,y,m,T){for(var O=e,B=T,W=0,U=!1;(B=B.get(jI))!==void 0&&!U;){var A=B.get(e);if(W+=1,typeof A<"u"){if(A===W)throw new RangeError("Cyclic object value");U=!0}typeof B.get(jI)>"u"&&(W=0)}if(typeof a=="function"?O=a(r,O):O instanceof Date?O=f(O):n==="comma"&&go(O)&&(O=QI.maybeMap(O,function(re){return re instanceof Date?f(re):re})),O===null){if(i)return o&&!y?o(r,Wt.encoder,m,"key",h):r;O=""}if(wre(O)||QI.isBuffer(O)){if(o){var _=y?r:o(r,Wt.encoder,m,"key",h);if(n==="comma"&&y){for(var N=gre.call(String(O),","),I="",S=0;S<N.length;++S)I+=(S===0?"":",")+g(o(N[S],Wt.encoder,m,"value",h));return[g(_)+"="+I]}return[g(_)+"="+g(o(O,Wt.encoder,m,"value",h))]}return[g(r)+"="+g(String(O))]}var R=[];if(typeof O>"u")return R;var J;if(n==="comma"&&go(O))J=[{value:O.length>0?O.join(",")||null:void 0}];else if(go(a))J=a;else{var Q=Object.keys(O);J=u?Q.sort(u):Q}for(var V=0;V<J.length;++V){var k=J[V],K=typeof k=="object"&&typeof k.value<"u"?k.value:O[k];if(!(s&&K===null)){var ge=go(O)?typeof n=="function"?n(r,k):r:r+(c?"."+k:"["+k+"]");T.set(e,W);var ue=hF();ue.set(jI,T),dF(R,t(K,ge,n,i,s,o,a,u,c,f,h,g,y,m,ue))}}return R},vre=function(e){if(!e)return Wt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Wt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=kl.default;if(typeof e.format<"u"){if(!pre.call(kl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=kl.formatters[n],s=Wt.filter;return(typeof e.filter=="function"||go(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Wt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Wt.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Wt.charsetSentinel,delimiter:typeof e.delimiter>"u"?Wt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Wt.encode,encoder:typeof e.encoder=="function"?e.encoder:Wt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Wt.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Wt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Wt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Wt.strictNullHandling}};pF.exports=function(t,e){var r=t,n=vre(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):go(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in lF?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var u=lF[a];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=hF(),f=0;f<i.length;++f){var h=i[f];n.skipNulls&&r[h]===null||dF(o,Ere(r[h],h,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var g=o.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""}});var wF=E((fme,mF)=>{"use strict";l();var hu=kI(),WI=Object.prototype.hasOwnProperty,Are=Array.isArray,Vt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:hu.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},bre=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},yF=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ire="utf8=%26%2310003%3B",_re="utf8=%E2%9C%93",Sre=function(e,r){var n={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,u,c=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===_re?c="utf-8":o[u]===Ire&&(c="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var f=o[u],h=f.indexOf("]="),g=h===-1?f.indexOf("="):h+1,y,m;g===-1?(y=r.decoder(f,Vt.decoder,c,"key"),m=r.strictNullHandling?null:""):(y=r.decoder(f.slice(0,g),Vt.decoder,c,"key"),m=hu.maybeMap(yF(f.slice(g+1),r),function(T){return r.decoder(T,Vt.decoder,c,"value")})),m&&r.interpretNumericEntities&&c==="iso-8859-1"&&(m=bre(m)),f.indexOf("[]=")>-1&&(m=Are(m)?[m]:m),WI.call(n,y)?n[y]=hu.combine(n[y],m):n[y]=m}return n},Tre=function(t,e,r,n){for(var i=n?e:yF(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(u,10);!r.parseArrays&&u===""?o={0:i}:!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},Cre=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),c=u?s.slice(0,u.index):s,f=[];if(c){if(!n.plainObjects&&WI.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var h=0;n.depth>0&&(u=a.exec(s))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&WI.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+s.slice(u.index)+"]"),Tre(f,r,n,i)}},xre=function(e){if(!e)return Vt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?Vt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Vt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Vt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Vt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Vt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Vt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Vt.comma,decoder:typeof e.decoder=="function"?e.decoder:Vt.decoder,delimiter:typeof e.delimiter=="string"||hu.isRegExp(e.delimiter)?e.delimiter:Vt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Vt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Vt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Vt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Vt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Vt.strictNullHandling}};mF.exports=function(t,e){var r=xre(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Sre(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=Cre(a,n[a],r,typeof t=="string");i=hu.merge(i,u,r)}return r.allowSparse===!0?i:hu.compact(i)}});var vF=E((dme,EF)=>{"use strict";l();var Nre=gF(),Ore=wF(),Dre=sy();EF.exports={formats:Dre,parse:Ore,stringify:Nre}});var zI=E(ut=>{"use strict";l();Object.defineProperty(ut,"__esModule",{value:!0});ut.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED=ut.WALLET_PROVIDER_CALLBACK_PARAM=ut.WALLET_PROVIDER_SIGN_MESSAGE_URL=ut.WALLET_PROVIDER_GUARD_TRANSACTION_URL=ut.WALLET_PROVIDER_SIGN_TRANSACTION_URL=ut.WALLET_PROVIDER_SEND_TRANSACTION_URL=ut.WALLET_PROVIDER_DISCONNECT_URL=ut.WALLET_PROVIDER_CONNECT_URL=ut.WALLET_PROVIDER_TESTNET=ut.WALLET_PROVIDER_DEVNET=ut.WALLET_PROVIDER_MAINNET=void 0;ut.WALLET_PROVIDER_MAINNET="https://wallet.multiversx.com/dapp/init";ut.WALLET_PROVIDER_DEVNET="https://devnet-wallet.multiversx.com/dapp/init";ut.WALLET_PROVIDER_TESTNET="https://testnet-wallet.multiversx.com/dapp/init";ut.WALLET_PROVIDER_CONNECT_URL="hook/login";ut.WALLET_PROVIDER_DISCONNECT_URL="hook/logout";ut.WALLET_PROVIDER_SEND_TRANSACTION_URL="hook/transaction";ut.WALLET_PROVIDER_SIGN_TRANSACTION_URL="hook/sign";ut.WALLET_PROVIDER_GUARD_TRANSACTION_URL="hook/2fa";ut.WALLET_PROVIDER_SIGN_MESSAGE_URL="hook/sign-message";ut.WALLET_PROVIDER_CALLBACK_PARAM="walletProviderStatus";ut.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED="transactionsSigned"});var AF=E(du=>{"use strict";l();Object.defineProperty(du,"__esModule",{value:!0});du.ErrCannotSignedMessage=du.ErrCannotGetSignedTransactions=void 0;var $I=class extends Error{constructor(){super("Cannot get signed transaction(s)")}};du.ErrCannotGetSignedTransactions=$I;var KI=class extends Error{constructor(){super("Cannot get signed message")}};du.ErrCannotSignedMessage=KI});var bF=E(oy=>{"use strict";l();Object.defineProperty(oy,"__esModule",{value:!0});oy.PlainSignedTransaction=void 0;var YI=class{constructor(e){this.nonce=0,this.value="",this.receiver="",this.sender="",this.gasPrice=0,this.gasLimit=0,this.data="",this.chainID="",this.version=0,this.signature="",Object.assign(this,e)}};oy.PlainSignedTransaction=YI});var jl=E(fs=>{"use strict";l();var cs=fs&&fs.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Pre=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});fs.WalletProvider=void 0;var JI=Pre(vF()),ls=zI(),XI=AF(),Rre=bF(),ZI=class t{constructor(e){this.walletUrl=e}login(e){return cs(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:ls.WALLET_PROVIDER_CONNECT_URL,callbackUrl:e?.callbackUrl,params:{token:e?.token}});return yield this.redirect(r,e?.redirectDelayMilliseconds),r})}redirect(e,r){return cs(this,void 0,void 0,function*(){r?yield this.redirectLater(e,r):this.redirectImmediately(e)})}redirectImmediately(e){window.location.href=e}redirectLater(e,r){return cs(this,void 0,void 0,function*(){yield new Promise(n=>{setTimeout(()=>{window.location.href=e,n(!0)},r)})})}logout(e){return cs(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:ls.WALLET_PROVIDER_DISCONNECT_URL,callbackUrl:e?.callbackUrl});return yield this.redirect(r,e?.redirectDelayMilliseconds),!0})}signMessage(e,r){return cs(this,void 0,void 0,function*(){let n=this.buildWalletUrl({endpoint:ls.WALLET_PROVIDER_SIGN_MESSAGE_URL,callbackUrl:r?.callbackUrl,params:{message:e.message.toString()}});return yield this.redirect(n),n})}getMessageSignatureFromWalletUrl(){var e,r;let n=window.location.search.slice(1);console.info("getMessageSignatureFromWalletUrl(), url:",n);let i=JI.default.parse(n);if((((e=i.status)===null||e===void 0?void 0:e.toString())||"")!=="signed")throw new XI.ErrCannotSignedMessage;return((r=i.signature)===null||r===void 0?void 0:r.toString())||""}guardTransactions(e,r){return cs(this,void 0,void 0,function*(){this.redirectTransactionsToEndpoint(ls.WALLET_PROVIDER_GUARD_TRANSACTION_URL,e,r)})}signTransactions(e,r){return cs(this,void 0,void 0,function*(){this.redirectTransactionsToEndpoint(ls.WALLET_PROVIDER_SIGN_TRANSACTION_URL,e,r)})}signTransaction(e,r){return cs(this,void 0,void 0,function*(){yield this.signTransactions([e],r)})}getTransactionsFromWalletUrl(){let e=JI.default.parse(window.location.search.slice(1));return t.isTxSignReturnSuccess(e)?this.getTxSignReturnValue(e):[]}static isTxSignReturnSuccess(e){return e.hasOwnProperty(ls.WALLET_PROVIDER_CALLBACK_PARAM)&&e[ls.WALLET_PROVIDER_CALLBACK_PARAM]===ls.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED}getTxSignReturnValue(e){var r;console.info("getTxSignReturnValue(), urlParams:",e);let n=["nonce","value","receiver","sender","gasPrice","gasLimit","chainID","version","signature"];for(let o of n)if(!e[o]||!Array.isArray(e[o]))throw new XI.ErrCannotGetSignedTransactions;let i=e.nonce.length;for(let o of n)if(e[o].length!==i)throw new XI.ErrCannotGetSignedTransactions;let s=[];for(let o=0;o<i;o++){let a=new Rre.PlainSignedTransaction(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({nonce:parseInt(e.nonce[o]),value:e.value[o],receiver:e.receiver[o],sender:e.sender[o],gasPrice:parseInt(e.gasPrice[o]),gasLimit:parseInt(e.gasLimit[o]),data:(r=e.data[o])!==null&&r!==void 0?r:"",chainID:e.chainID[o],version:parseInt(e.version[o])},e.guardian&&e.guardian[o]?{guardian:e.guardian[o]}:{}),e.guardianSignature&&e.guardianSignature[o]?{guardianSignature:e.guardianSignature[o]}:{}),e.options&&e.options[o]?{options:parseInt(e.options[o])}:{}),e.senderUsername&&e.senderUsername[o]?{senderUsername:e.senderUsername[o]}:{}),e.receiverUsername&&e.receiverUsername[o]?{receiverUsername:e.receiverUsername[o]}:{}),{signature:e.signature[o]}));s.push(a)}return s}static prepareWalletTransaction(e){let r=e.toPlainObject();return r.data?r.data=d.Buffer.from(r.data,"base64").toString():r.data="",r}buildWalletUrl(e){let r=e?.callbackUrl||window.location.href,n=JI.default.stringify(e.params||{}),i=n?`${n}&callbackUrl=${r}`:`callbackUrl=${r}`,s=`${this.baseWalletUrl()}/${e.endpoint}?${i}`;return console.info(`Redirecting to Wallet URL: ${decodeURI(s)}`),s}baseWalletUrl(){let e=this.walletUrl.split("/"),r=e[0],n=e[2];return r+"//"+n}redirectTransactionsToEndpoint(e,r,n){let i={};r.map(o=>{let a=t.prepareWalletTransaction(o);for(let u in a)a.hasOwnProperty(u)&&!i.hasOwnProperty(u)&&(i[u]=[]),i[u].push(a[u])});let s=this.buildWalletUrl({endpoint:e,callbackUrl:n?.callbackUrl,params:i});window.location.href=s}};fs.WalletProvider=ZI});var e_=E((Ime,IF)=>{"use strict";l();IF.exports=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}}});var Er=E((Sme,TF)=>{"use strict";l();var Bre=e_(),yo=Object.prototype.toString;function n_(t){return yo.call(t)==="[object Array]"}function t_(t){return typeof t>"u"}function Lre(t){return t!==null&&!t_(t)&&t.constructor!==null&&!t_(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Fre(t){return yo.call(t)==="[object ArrayBuffer]"}function Mre(t){return typeof FormData<"u"&&t instanceof FormData}function Ure(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function qre(t){return typeof t=="string"}function Vre(t){return typeof t=="number"}function _F(t){return t!==null&&typeof t=="object"}function ay(t){if(yo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Hre(t){return yo.call(t)==="[object Date]"}function Gre(t){return yo.call(t)==="[object File]"}function kre(t){return yo.call(t)==="[object Blob]"}function SF(t){return yo.call(t)==="[object Function]"}function jre(t){return _F(t)&&SF(t.pipe)}function Qre(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Wre(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function zre(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function i_(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),n_(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function r_(){var t={};function e(i,s){ay(t[s])&&ay(i)?t[s]=r_(t[s],i):ay(i)?t[s]=r_({},i):n_(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)i_(arguments[r],e);return t}function $re(t,e,r){return i_(e,function(i,s){r&&typeof i=="function"?t[s]=Bre(i,r):t[s]=i}),t}function Kre(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}TF.exports={isArray:n_,isArrayBuffer:Fre,isBuffer:Lre,isFormData:Mre,isArrayBufferView:Ure,isString:qre,isNumber:Vre,isObject:_F,isPlainObject:ay,isUndefined:t_,isDate:Hre,isFile:Gre,isBlob:kre,isFunction:SF,isStream:jre,isURLSearchParams:Qre,isStandardBrowserEnv:zre,forEach:i_,merge:r_,extend:$re,trim:Wre,stripBOM:Kre}});var s_=E((Cme,xF)=>{"use strict";l();var pu=Er();function CF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}xF.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(pu.isURLSearchParams(r))i=r.toString();else{var s=[];pu.forEach(r,function(u,c){u===null||typeof u>"u"||(pu.isArray(u)?c=c+"[]":u=[u],pu.forEach(u,function(h){pu.isDate(h)?h=h.toISOString():pu.isObject(h)&&(h=JSON.stringify(h)),s.push(CF(c)+"="+CF(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var OF=E((Nme,NF)=>{"use strict";l();var Yre=Er();function uy(){this.handlers=[]}uy.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};uy.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};uy.prototype.forEach=function(e){Yre.forEach(this.handlers,function(n){n!==null&&e(n)})};NF.exports=uy});var PF=E((Dme,DF)=>{"use strict";l();var Jre=Er();DF.exports=function(e,r){Jre.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})}});var o_=E((Rme,RF)=>{"use strict";l();RF.exports=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var a_=E((Lme,BF)=>{"use strict";l();var Xre=o_();BF.exports=function(e,r,n,i,s){var o=new Error(e);return Xre(o,r,n,i,s)}});var FF=E((Mme,LF)=>{"use strict";l();var Zre=a_();LF.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Zre("Request failed with status code "+n.status,n.config,null,n.request,n))}});var UF=E((qme,MF)=>{"use strict";l();var cy=Er();MF.exports=cy.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,a){var u=[];u.push(r+"="+encodeURIComponent(n)),cy.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),cy.isString(s)&&u.push("path="+s),cy.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var VF=E((Hme,qF)=>{"use strict";l();qF.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var GF=E((kme,HF)=>{"use strict";l();HF.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var jF=E((Qme,kF)=>{"use strict";l();var ene=VF(),tne=GF();kF.exports=function(e,r){return e&&!ene(r)?tne(e,r):r}});var WF=E((zme,QF)=>{"use strict";l();var u_=Er(),rne=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];QF.exports=function(e){var r={},n,i,s;return e&&u_.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=u_.trim(a.substr(0,s)).toLowerCase(),i=u_.trim(a.substr(s+1)),n){if(r[n]&&rne.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var KF=E((Kme,$F)=>{"use strict";l();var zF=Er();$F.exports=zF.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var a=zF.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Ql=E((Jme,YF)=>{"use strict";l();function c_(t){this.message=t}c_.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};c_.prototype.__CANCEL__=!0;YF.exports=c_});var f_=E((Zme,JF)=>{"use strict";l();var ly=Er(),nne=FF(),ine=UF(),sne=s_(),one=jF(),ane=WF(),une=KF(),l_=a_(),cne=Wl(),lne=Ql();JF.exports=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}ly.isFormData(s)&&delete o["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+g)}var y=one(e.baseURL,e.url);f.open(e.method.toUpperCase(),sne(y,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function m(){if(f){var O="getAllResponseHeaders"in f?ane(f.getAllResponseHeaders()):null,B=!a||a==="text"||a==="json"?f.responseText:f.response,W={data:B,status:f.status,statusText:f.statusText,headers:O,config:e,request:f};nne(function(A){n(A),c()},function(A){i(A),c()},W),f=null}}if("onloadend"in f?f.onloadend=m:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(m)},f.onabort=function(){f&&(i(l_("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){i(l_("Network Error",e,null,f)),f=null},f.ontimeout=function(){var B=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",W=e.transitional||cne.transitional;e.timeoutErrorMessage&&(B=e.timeoutErrorMessage),i(l_(B,e,W.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},ly.isStandardBrowserEnv()){var T=(e.withCredentials||une(y))&&e.xsrfCookieName?ine.read(e.xsrfCookieName):void 0;T&&(o[e.xsrfHeaderName]=T)}"setRequestHeader"in f&&ly.forEach(o,function(B,W){typeof s>"u"&&W.toLowerCase()==="content-type"?delete o[W]:f.setRequestHeader(W,B)}),ly.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),a&&a!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(O){f&&(i(!O||O&&O.type?new lne("canceled"):O),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),s||(s=null),f.send(s)})}});var Wl=E((twe,eM)=>{"use strict";l();var zt=Er(),XF=PF(),fne=o_(),hne={"Content-Type":"application/x-www-form-urlencoded"};function ZF(t,e){!zt.isUndefined(t)&&zt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function dne(){var t;return typeof XMLHttpRequest<"u"?t=f_():typeof p.default<"u"&&Object.prototype.toString.call(p.default)==="[object process]"&&(t=f_()),t}function pne(t,e,r){if(zt.isString(t))try{return(e||JSON.parse)(t),zt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var fy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:dne(),transformRequest:[function(e,r){return XF(r,"Accept"),XF(r,"Content-Type"),zt.isFormData(e)||zt.isArrayBuffer(e)||zt.isBuffer(e)||zt.isStream(e)||zt.isFile(e)||zt.isBlob(e)?e:zt.isArrayBufferView(e)?e.buffer:zt.isURLSearchParams(e)?(ZF(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):zt.isObject(e)||r&&r["Content-Type"]==="application/json"?(ZF(r,"application/json"),pne(e)):e}],transformResponse:[function(e){var r=this.transitional||fy.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&zt.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?fne(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};zt.forEach(["delete","get","head"],function(e){fy.headers[e]={}});zt.forEach(["post","put","patch"],function(e){fy.headers[e]=zt.merge(hne)});eM.exports=fy});var rM=E((nwe,tM)=>{"use strict";l();var gne=Er(),yne=Wl();tM.exports=function(e,r,n){var i=this||yne;return gne.forEach(n,function(o){e=o.call(i,e,r)}),e}});var h_=E((swe,nM)=>{"use strict";l();nM.exports=function(e){return!!(e&&e.__CANCEL__)}});var oM=E((awe,sM)=>{"use strict";l();var iM=Er(),d_=rM(),mne=h_(),wne=Wl(),Ene=Ql();function p_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ene("canceled")}sM.exports=function(e){p_(e),e.headers=e.headers||{},e.data=d_.call(e,e.data,e.headers,e.transformRequest),e.headers=iM.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),iM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||wne.adapter;return r(e).then(function(i){return p_(e),i.data=d_.call(e,i.data,i.headers,e.transformResponse),i},function(i){return mne(i)||(p_(e),i&&i.response&&(i.response.data=d_.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var g_=E((cwe,aM)=>{"use strict";l();var _r=Er();aM.exports=function(e,r){r=r||{};var n={};function i(f,h){return _r.isPlainObject(f)&&_r.isPlainObject(h)?_r.merge(f,h):_r.isPlainObject(h)?_r.merge({},h):_r.isArray(h)?h.slice():h}function s(f){if(_r.isUndefined(r[f])){if(!_r.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!_r.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(_r.isUndefined(r[f])){if(!_r.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function u(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return _r.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var g=c[h]||s,y=g(h);_r.isUndefined(y)&&g!==u||(n[h]=y)}),n}});var y_=E((fwe,uM)=>{l();uM.exports={version:"0.24.0"}});var fM=E((dwe,lM)=>{"use strict";l();var vne=y_().version,m_={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){m_[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var cM={};m_.transitional=function(e,r,n){function i(s,o){return"[Axios v"+vne+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!cM[o]&&(cM[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Ane(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}lM.exports={assertOptions:Ane,validators:m_}});var mM=E((gwe,yM)=>{"use strict";l();var pM=Er(),bne=s_(),hM=OF(),dM=oM(),hy=g_(),gM=fM(),gu=gM.validators;function zl(t){this.defaults=t,this.interceptors={request:new hM,response:new hM}}zl.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=hy(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&gM.assertOptions(r,{silentJSONParsing:gu.transitional(gu.boolean),forcedJSONParsing:gu.transitional(gu.boolean),clarifyTimeoutError:gu.transitional(gu.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(i=i&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var o;if(!i){var a=[dM,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var u=e;n.length;){var c=n.shift(),f=n.shift();try{u=c(u)}catch(h){f(h);break}}try{o=dM(u)}catch(h){return Promise.reject(h)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};zl.prototype.getUri=function(e){return e=hy(this.defaults,e),bne(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};pM.forEach(["delete","get","head","options"],function(e){zl.prototype[e]=function(r,n){return this.request(hy(n||{},{method:e,url:r,data:(n||{}).data}))}});pM.forEach(["post","put","patch"],function(e){zl.prototype[e]=function(r,n,i){return this.request(hy(i||{},{method:e,url:r,data:n}))}});yM.exports=zl});var EM=E((mwe,wM)=>{"use strict";l();var Ine=Ql();function yu(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new Ine(i),e(r.reason))})}yu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};yu.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};yu.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};yu.source=function(){var e,r=new yu(function(i){e=i});return{token:r,cancel:e}};wM.exports=yu});var AM=E((Ewe,vM)=>{"use strict";l();vM.exports=function(e){return function(n){return e.apply(null,n)}}});var IM=E((Awe,bM)=>{"use strict";l();bM.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var TM=E((Iwe,w_)=>{"use strict";l();var _M=Er(),_ne=e_(),dy=mM(),Sne=g_(),Tne=Wl();function SM(t){var e=new dy(t),r=_ne(dy.prototype.request,e);return _M.extend(r,dy.prototype,e),_M.extend(r,e),r.create=function(i){return SM(Sne(t,i))},r}var qn=SM(Tne);qn.Axios=dy;qn.Cancel=Ql();qn.CancelToken=EM();qn.isCancel=h_();qn.VERSION=y_().version;qn.all=function(e){return Promise.all(e)};qn.spread=AM();qn.isAxiosError=IM();w_.exports=qn;w_.exports.default=qn});var xM=E((Swe,CM)=>{l();CM.exports=TM()});var NM=E(py=>{"use strict";l();Object.defineProperty(py,"__esModule",{value:!0});py.NativeAuthClientConfig=void 0;var E_=class{constructor(){this.origin=typeof window<"u"&&typeof window.location<"u"?window.location.hostname:"",this.apiUrl="https://api.multiversx.com",this.expirySeconds=60*60*24}};py.NativeAuthClientConfig=E_});var A_=E(mu=>{"use strict";l();var mo=mu&&mu.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(mu,"__esModule",{value:!0});mu.NativeAuthClient=void 0;var Cne=xM(),xne=NM(),v_=class{constructor(e){this.config=Object.assign(new xne.NativeAuthClientConfig,e)}getToken(e,r,n){let i=this.encodeValue(e),s=this.encodeValue(r);return`${i}.${s}.${n}`}initialize(e={}){return mo(this,void 0,void 0,function*(){let r=yield this.getCurrentBlockHash(),n=this.encodeValue(JSON.stringify(e));return`${this.encodeValue(this.config.origin)}.${r}.${this.config.expirySeconds}.${n}`})}getCurrentBlockHash(){return mo(this,void 0,void 0,function*(){return this.config.gatewayUrl?yield this.getCurrentBlockHashWithGateway():yield this.getCurrentBlockHashWithApi()})}getCurrentBlockHashWithGateway(){return mo(this,void 0,void 0,function*(){let e=yield this.getCurrentRound(),r=`${this.config.gatewayUrl}/blocks/by-round/${e}`;return(yield this.get(r)).data.data.blocks.filter(o=>o.shard===this.config.blockHashShard)[0].hash})}getCurrentRound(){return mo(this,void 0,void 0,function*(){if(!this.config.gatewayUrl)throw new Error("Gateway URL not set");if(!this.config.blockHashShard)throw new Error("Blockhash shard not set");let e=`${this.config.gatewayUrl}/network/status/${this.config.blockHashShard}`;return(yield this.get(e)).data.data.status.erd_current_round})}getCurrentBlockHashWithApi(){return mo(this,void 0,void 0,function*(){try{let e=`${this.config.apiUrl}/blocks/latest?ttl=${this.config.expirySeconds}&fields=hash`,r=yield this.get(e);if(r.data[0].hash!==void 0)return r.data[0].hash}catch{}return this.getCurrentBlockHashWithApiFallback()})}getCurrentBlockHashWithApiFallback(){return mo(this,void 0,void 0,function*(){let e=`${this.config.apiUrl}/blocks?size=1&fields=hash`;return this.config.blockHashShard!==void 0&&(e+=`&shard=${this.config.blockHashShard}`),(yield this.get(e)).data[0].hash})}encodeValue(e){return this.escape(d.Buffer.from(e,"utf8").toString("base64"))}escape(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}get(e){return mo(this,void 0,void 0,function*(){return yield Cne.default.get(e,{headers:this.config.extraRequestHeaders})})}};mu.NativeAuthClient=v_});var BM=E(wy=>{"use strict";l();Object.defineProperty(wy,"__esModule",{value:!0});wy.TransactionStatus=void 0;var b_=class t{constructor(e){this.status=(e||"").toLowerCase()}static createUnknown(){return new t("unknown")}isPending(){return this.status=="received"||this.status=="pending"}isExecuted(){return this.isSuccessful()||this.isFailed()||this.isInvalid()}isSuccessful(){return this.status=="executed"||this.status=="success"||this.status=="successful"}isFailed(){return this.status=="fail"||this.status=="failed"||this.status=="unsuccessful"||this.isInvalid()}isInvalid(){return this.status=="invalid"}toString(){return this.status}valueOf(){return this.status}equals(e){return e?this.status==e.status:!1}};wy.TransactionStatus=b_});var vu=E(Ht=>{"use strict";l();var Nne=Ht&&Ht.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),One=Ht&&Ht.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Dne=Ht&&Ht.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nne(e,t,r);return One(e,t),e};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.zeroPadStringIfOddLength=Ht.isPaddedHex=Ht.numberToPaddedHex=Ht.Nonce=Ht.Address=void 0;var LM=Dne(qm()),Pne="erd",I_=class t{constructor(e){this.value=e}static fromPubkey(e){let r=LM.toWords(e),n=LM.encode(Pne,r);return new t(n)}bech32(){return this.value}toString(){return this.bech32()}};Ht.Address=I_;var __=class{constructor(e){this.value=e}valueOf(){return this.value}hex(){return FM(this.value)}};Ht.Nonce=__;function FM(t){let e=t.toString(16);return MM(e)}Ht.numberToPaddedHex=FM;function Rne(t){t=t||"";let e=d.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}Ht.isPaddedHex=Rne;function MM(t){return t=t||"",t.length%2==1?"0"+t:t}Ht.zeroPadStringIfOddLength=MM});var qM=E(Ey=>{"use strict";l();Object.defineProperty(Ey,"__esModule",{value:!0});Ey.TransactionReceipt=void 0;var UM=vu(),S_=class t{constructor(){this.value="",this.sender=new UM.Address(""),this.data="",this.hash=""}static fromHttpResponse(e){let r=new t;return r.value=(e.value||0).toString(),r.sender=new UM.Address(e.sender),r.data=e.data,r.hash=e.txHash,r}};Ey.TransactionReceipt=S_});var VM=E(Vn=>{"use strict";l();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ErrContractQuery=Vn.ErrNetworkProvider=Vn.ErrUnexpectedCondition=Vn.Err=void 0;var Au=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Vn.Err=Au;var T_=class extends Au{constructor(e){super(`Unexpected condition: [${e}]`)}};Vn.ErrUnexpectedCondition=T_;var C_=class extends Au{constructor(e,r,n){let i=`Request error on url [${e}]: [${r}]`;super(i,n)}};Vn.ErrNetworkProvider=C_;var x_=class extends Au{constructor(e){super(e.message.replace("executeQuery:",""))}};Vn.ErrContractQuery=x_});var GM=E(ds=>{"use strict";l();Object.defineProperty(ds,"__esModule",{value:!0});ds.TransactionEventTopic=ds.TransactionEventData=ds.TransactionEvent=void 0;var HM=vu(),N_=class t{constructor(e){this.address=new HM.Address(""),this.identifier="",this.topics=[],this.data="",this.dataPayload=new bu(d.Buffer.from("","utf8")),this.additionalData=[],Object.assign(this,e)}static fromHttpResponse(e){let r=new t;return r.address=new HM.Address(e.address),r.identifier=e.identifier||"",r.topics=(e.topics||[]).map(n=>new vy(n)),r.dataPayload=bu.fromBase64(e.data),r.additionalData=(e.additionalData||[]).map(bu.fromBase64),r.data=r.dataPayload.toString(),r}findFirstOrNoneTopic(e){return this.topics.filter(r=>e(r))[0]}getLastTopic(){return this.topics[this.topics.length-1]}};ds.TransactionEvent=N_;var bu=class t{constructor(e){this.raw=e}static fromBase64(e){return new t(d.Buffer.from(e||"","base64"))}toString(){return this.raw.toString("utf8")}hex(){return this.raw.toString("hex")}valueOf(){return this.raw}};ds.TransactionEventData=bu;var vy=class{constructor(e){this.raw=d.Buffer.from(e||"","base64")}toString(){return this.raw.toString("utf8")}hex(){return this.raw.toString("hex")}valueOf(){return this.raw}};ds.TransactionEventTopic=vy});var D_=E(Ay=>{"use strict";l();Object.defineProperty(Ay,"__esModule",{value:!0});Ay.TransactionLogs=void 0;var Bne=VM(),kM=vu(),Lne=GM(),O_=class t{constructor(e){this.address=new kM.Address(""),this.events=[],Object.assign(this,e)}static fromHttpResponse(e){let r=new t;return r.address=new kM.Address(e.address),r.events=(e.events||[]).map(n=>Lne.TransactionEvent.fromHttpResponse(n)),r}findSingleOrNoneEvent(e,r){let n=this.findEvents(e,r);if(n.length>1)throw new Bne.ErrUnexpectedCondition(`more than one event of type ${e}`);return n[0]}findFirstOrNoneEvent(e,r){return this.findEvents(e,r)[0]}findEvents(e,r){let n=this.events.filter(i=>i.identifier==e);return r&&(n=n.filter(i=>r(i))),n}};Ay.TransactionLogs=O_});var QM=E(Iu=>{"use strict";l();Object.defineProperty(Iu,"__esModule",{value:!0});Iu.ContractResultItem=Iu.ContractResults=void 0;var jM=D_(),by=vu(),P_=class t{constructor(e){this.items=e,this.items.sort(function(r,n){return r.nonce.valueOf()-n.nonce.valueOf()})}static fromProxyHttpResponse(e){let r=e.map(n=>$l.fromProxyHttpResponse(n));return new t(r)}static fromApiHttpResponse(e){let r=e.map(n=>$l.fromApiHttpResponse(n));return new t(r)}};Iu.ContractResults=P_;var $l=class t{constructor(e){this.hash="",this.nonce=0,this.value="",this.receiver=new by.Address(""),this.sender=new by.Address(""),this.data="",this.previousHash="",this.originalHash="",this.gasLimit=0,this.gasPrice=0,this.callType=0,this.returnMessage="",this.logs=new jM.TransactionLogs,Object.assign(this,e)}static fromProxyHttpResponse(e){return t.fromHttpResponse(e)}static fromApiHttpResponse(e){let r=t.fromHttpResponse(e);return r.data=d.Buffer.from(r.data,"base64").toString(),r.callType=Number(r.callType),r}static fromHttpResponse(e){let r=new t;return r.hash=e.hash,r.nonce=Number(e.nonce||0),r.value=(e.value||0).toString(),r.receiver=new by.Address(e.receiver),r.sender=new by.Address(e.sender),r.previousHash=e.prevTxHash,r.originalHash=e.originalTxHash,r.gasLimit=Number(e.gasLimit||0),r.gasPrice=Number(e.gasPrice||0),r.data=e.data||"",r.callType=e.callType,r.returnMessage=e.returnMessage,r.logs=jM.TransactionLogs.fromHttpResponse(e.logs||{}),r}};Iu.ContractResultItem=$l});var WM=E(ps=>{"use strict";l();var Fne=ps&&ps.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ps,"__esModule",{value:!0});ps.EsdtContractAddress=ps.MaxUint64AsBigNumber=void 0;var Mne=Fne(kt()),Une=vu();ps.MaxUint64AsBigNumber=new Mne.default("18446744073709551615");ps.EsdtContractAddress=new Une.Address("erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u")});var zM=E(_u=>{"use strict";l();var qne=_u&&_u.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_u,"__esModule",{value:!0});_u.ContractQueryResponse=void 0;var Vne=qne(kt()),Hne=WM(),R_=class t{constructor(e){this.returnData=e?.returnData||[],this.returnCode=e?.returnCode||"",this.returnMessage=e?.returnMessage||"",this.gasUsed=e?.gasUsed||0}static fromHttpResponse(e){let r=e.returnData||e.ReturnData,n=e.returnCode||e.ReturnCode,i=e.returnMessage||e.ReturnMessage,s=new Vne.default(e.gasRemaining||e.GasRemaining||0),o=Hne.MaxUint64AsBigNumber.minus(s).toNumber();return new t({returnData:r,returnCode:n,returnMessage:i,gasUsed:o})}getReturnDataParts(){return this.returnData.map(e=>d.Buffer.from(e||"","base64"))}toJSON(){return{returnData:this.returnData,returnCode:this.returnCode,returnMessage:this.returnMessage,gasUsed:this.gasUsed.valueOf()}}};_u.ContractQueryResponse=R_});var $M=E(Iy=>{"use strict";l();Object.defineProperty(Iy,"__esModule",{value:!0});Iy.ContractQueryRequest=void 0;var B_=class{constructor(e){this.query=e}toHttpRequest(){var e;let r={},n=this.query;return r.scAddress=n.address.bech32(),r.caller=!((e=n.caller)===null||e===void 0)&&e.bech32()?n.caller.bech32():void 0,r.funcName=n.func.toString(),r.value=n.value?n.value.toString():void 0,r.args=n.getEncodedArguments(),r}};Iy.ContractQueryRequest=B_});var sU=E((LEe,iU)=>{l();iU.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var gs=E(wo=>{l();var L_,Gne=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];wo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};wo.getSymbolTotalCodewords=function(e){return Gne[e]};wo.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};wo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');L_=e};wo.isKanjiModeEnabled=function(){return typeof L_<"u"};wo.toSJIS=function(e){return L_(e)}});var Ty=E(Qr=>{l();Qr.L={bit:1};Qr.M={bit:0};Qr.Q={bit:3};Qr.H={bit:2};function kne(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return Qr.L;case"m":case"medium":return Qr.M;case"q":case"quartile":return Qr.Q;case"h":case"high":return Qr.H;default:throw new Error("Unknown EC Level: "+t)}}Qr.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Qr.from=function(e,r){if(Qr.isValid(e))return e;try{return kne(e)}catch{return r}}});var uU=E((HEe,aU)=>{l();function oU(){this.buffer=[],this.length=0}oU.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};aU.exports=oU});var lU=E((kEe,cU)=>{l();function Kl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Kl.prototype.set=function(t,e,r,n){let i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};Kl.prototype.get=function(t,e){return this.data[t*this.size+e]};Kl.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Kl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};cU.exports=Kl});var fU=E(Cy=>{l();var jne=gs().getSymbolSize;Cy.getRowColCoords=function(e){if(e===1)return[];let r=Math.floor(e/7)+2,n=jne(e),i=n===145?26:Math.ceil((n-13)/(2*r-2))*2,s=[n-7];for(let o=1;o<r-1;o++)s[o]=s[o-1]-i;return s.push(6),s.reverse()};Cy.getPositions=function(e){let r=[],n=Cy.getRowColCoords(e),i=n.length;for(let s=0;s<i;s++)for(let o=0;o<i;o++)s===0&&o===0||s===0&&o===i-1||s===i-1&&o===0||r.push([n[s],n[o]]);return r}});var pU=E(dU=>{l();var Qne=gs().getSymbolSize,hU=7;dU.getPositions=function(e){let r=Qne(e);return[[0,0],[r-hU,0],[0,r-hU]]}});var gU=E(et=>{l();et.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Eo={N1:3,N2:3,N3:40,N4:10};et.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};et.from=function(e){return et.isValid(e)?parseInt(e,10):void 0};et.getPenaltyN1=function(e){let r=e.size,n=0,i=0,s=0,o=null,a=null;for(let u=0;u<r;u++){i=s=0,o=a=null;for(let c=0;c<r;c++){let f=e.get(u,c);f===o?i++:(i>=5&&(n+=Eo.N1+(i-5)),o=f,i=1),f=e.get(c,u),f===a?s++:(s>=5&&(n+=Eo.N1+(s-5)),a=f,s=1)}i>=5&&(n+=Eo.N1+(i-5)),s>=5&&(n+=Eo.N1+(s-5))}return n};et.getPenaltyN2=function(e){let r=e.size,n=0;for(let i=0;i<r-1;i++)for(let s=0;s<r-1;s++){let o=e.get(i,s)+e.get(i,s+1)+e.get(i+1,s)+e.get(i+1,s+1);(o===4||o===0)&&n++}return n*Eo.N2};et.getPenaltyN3=function(e){let r=e.size,n=0,i=0,s=0;for(let o=0;o<r;o++){i=s=0;for(let a=0;a<r;a++)i=i<<1&2047|e.get(o,a),a>=10&&(i===1488||i===93)&&n++,s=s<<1&2047|e.get(a,o),a>=10&&(s===1488||s===93)&&n++}return n*Eo.N3};et.getPenaltyN4=function(e){let r=0,n=e.data.length;for(let s=0;s<n;s++)r+=e.data[s];return Math.abs(Math.ceil(r*100/n/5)-10)*Eo.N4};function Wne(t,e,r){switch(t){case et.Patterns.PATTERN000:return(e+r)%2===0;case et.Patterns.PATTERN001:return e%2===0;case et.Patterns.PATTERN010:return r%3===0;case et.Patterns.PATTERN011:return(e+r)%3===0;case et.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2===0;case et.Patterns.PATTERN101:return e*r%2+e*r%3===0;case et.Patterns.PATTERN110:return(e*r%2+e*r%3)%2===0;case et.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}et.applyMask=function(e,r){let n=r.size;for(let i=0;i<n;i++)for(let s=0;s<n;s++)r.isReserved(s,i)||r.xor(s,i,Wne(e,s,i))};et.getBestMask=function(e,r){let n=Object.keys(et.Patterns).length,i=0,s=1/0;for(let o=0;o<n;o++){r(o),et.applyMask(o,e);let a=et.getPenaltyN1(e)+et.getPenaltyN2(e)+et.getPenaltyN3(e)+et.getPenaltyN4(e);et.applyMask(o,e),a<s&&(s=a,i=o)}return i}});var M_=E(F_=>{l();var ys=Ty(),xy=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ny=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];F_.getBlocksCount=function(e,r){switch(r){case ys.L:return xy[(e-1)*4+0];case ys.M:return xy[(e-1)*4+1];case ys.Q:return xy[(e-1)*4+2];case ys.H:return xy[(e-1)*4+3];default:return}};F_.getTotalCodewordsCount=function(e,r){switch(r){case ys.L:return Ny[(e-1)*4+0];case ys.M:return Ny[(e-1)*4+1];case ys.Q:return Ny[(e-1)*4+2];case ys.H:return Ny[(e-1)*4+3];default:return}}});var yU=E(Dy=>{l();var Yl=new Uint8Array(512),Oy=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Yl[r]=e,Oy[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Yl[r]=Yl[r-255]})();Dy.log=function(e){if(e<1)throw new Error("log("+e+")");return Oy[e]};Dy.exp=function(e){return Yl[e]};Dy.mul=function(e,r){return e===0||r===0?0:Yl[Oy[e]+Oy[r]]}});var mU=E(Jl=>{l();var U_=yU();Jl.mul=function(e,r){let n=new Uint8Array(e.length+r.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<r.length;s++)n[i+s]^=U_.mul(e[i],r[s]);return n};Jl.mod=function(e,r){let n=new Uint8Array(e);for(;n.length-r.length>=0;){let i=n[0];for(let o=0;o<r.length;o++)n[o]^=U_.mul(r[o],i);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n};Jl.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=Jl.mul(r,new Uint8Array([1,U_.exp(n)]));return r}});var vU=E((nve,EU)=>{l();var wU=mU();function q_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}q_.prototype.initialize=function(e){this.degree=e,this.genPoly=wU.generateECPolynomial(this.degree)};q_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let r=new Uint8Array(e.length+this.degree);r.set(e);let n=wU.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(n,i),s}return n};EU.exports=q_});var V_=E(AU=>{l();AU.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var H_=E(pi=>{l();var bU="[0-9]+",zne="[A-Z $%*+\\-./:]+",Xl="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xl=Xl.replace(/u/g,"\\u");var $ne="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xl+`)(?:.|[\r
]))+`;pi.KANJI=new RegExp(Xl,"g");pi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");pi.BYTE=new RegExp($ne,"g");pi.NUMERIC=new RegExp(bU,"g");pi.ALPHANUMERIC=new RegExp(zne,"g");var Kne=new RegExp("^"+Xl+"$"),Yne=new RegExp("^"+bU+"$"),Jne=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");pi.testKanji=function(e){return Kne.test(e)};pi.testNumeric=function(e){return Yne.test(e)};pi.testAlphanumeric=function(e){return Jne.test(e)}});var ms=E(Nt=>{l();var Xne=V_(),G_=H_();Nt.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Nt.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Nt.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Nt.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Nt.MIXED={bit:-1};Nt.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!Xne.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]};Nt.getBestModeForData=function(e){return G_.testNumeric(e)?Nt.NUMERIC:G_.testAlphanumeric(e)?Nt.ALPHANUMERIC:G_.testKanji(e)?Nt.KANJI:Nt.BYTE};Nt.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};Nt.isValid=function(e){return e&&e.bit&&e.ccBits};function Zne(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return Nt.NUMERIC;case"alphanumeric":return Nt.ALPHANUMERIC;case"kanji":return Nt.KANJI;case"byte":return Nt.BYTE;default:throw new Error("Unknown mode: "+t)}}Nt.from=function(e,r){if(Nt.isValid(e))return e;try{return Zne(e)}catch{return r}}});var CU=E(vo=>{l();var Py=gs(),eie=M_(),IU=Ty(),ws=ms(),k_=V_(),SU=7973,_U=Py.getBCHDigit(SU);function tie(t,e,r){for(let n=1;n<=40;n++)if(e<=vo.getCapacity(n,r,t))return n}function TU(t,e){return ws.getCharCountIndicator(t,e)+4}function rie(t,e){let r=0;return t.forEach(function(n){let i=TU(n.mode,e);r+=i+n.getBitsLength()}),r}function nie(t,e){for(let r=1;r<=40;r++)if(rie(t,r)<=vo.getCapacity(r,e,ws.MIXED))return r}vo.from=function(e,r){return k_.isValid(e)?parseInt(e,10):r};vo.getCapacity=function(e,r,n){if(!k_.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=ws.BYTE);let i=Py.getSymbolTotalCodewords(e),s=eie.getTotalCodewordsCount(e,r),o=(i-s)*8;if(n===ws.MIXED)return o;let a=o-TU(n,e);switch(n){case ws.NUMERIC:return Math.floor(a/10*3);case ws.ALPHANUMERIC:return Math.floor(a/11*2);case ws.KANJI:return Math.floor(a/13);case ws.BYTE:default:return Math.floor(a/8)}};vo.getBestVersionForData=function(e,r){let n,i=IU.from(r,IU.M);if(Array.isArray(e)){if(e.length>1)return nie(e,i);if(e.length===0)return 1;n=e[0]}else n=e;return tie(n.mode,n.getLength(),i)};vo.getEncodedBits=function(e){if(!k_.isValid(e)||e<7)throw new Error("Invalid QR Code version");let r=e<<12;for(;Py.getBCHDigit(r)-_U>=0;)r^=SU<<Py.getBCHDigit(r)-_U;return e<<12|r}});var DU=E(OU=>{l();var j_=gs(),NU=1335,iie=21522,xU=j_.getBCHDigit(NU);OU.getEncodedBits=function(e,r){let n=e.bit<<3|r,i=n<<10;for(;j_.getBCHDigit(i)-xU>=0;)i^=NU<<j_.getBCHDigit(i)-xU;return(n<<10|i)^iie}});var RU=E((gve,PU)=>{l();var sie=ms();function Su(t){this.mode=sie.NUMERIC,this.data=t.toString()}Su.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Su.prototype.getLength=function(){return this.data.length};Su.prototype.getBitsLength=function(){return Su.getBitsLength(this.data.length)};Su.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);let s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};PU.exports=Su});var LU=E((mve,BU)=>{l();var oie=ms(),Q_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Tu(t){this.mode=oie.ALPHANUMERIC,this.data=t}Tu.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Tu.prototype.getLength=function(){return this.data.length};Tu.prototype.getBitsLength=function(){return Tu.getBitsLength(this.data.length)};Tu.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Q_.indexOf(this.data[r])*45;n+=Q_.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Q_.indexOf(this.data[r]),6)};BU.exports=Tu});var MU=E((Eve,FU)=>{"use strict";l();FU.exports=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer}});var qU=E((Ave,UU)=>{l();var aie=MU(),uie=ms();function Cu(t){this.mode=uie.BYTE,typeof t=="string"&&(t=aie(t)),this.data=new Uint8Array(t)}Cu.getBitsLength=function(e){return e*8};Cu.prototype.getLength=function(){return this.data.length};Cu.prototype.getBitsLength=function(){return Cu.getBitsLength(this.data.length)};Cu.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};UU.exports=Cu});var HU=E((Ive,VU)=>{l();var cie=ms(),lie=gs();function xu(t){this.mode=cie.KANJI,this.data=t}xu.getBitsLength=function(e){return e*13};xu.prototype.getLength=function(){return this.data.length};xu.prototype.getBitsLength=function(){return xu.getBitsLength(this.data.length)};xu.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=lie.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};VU.exports=xu});var GU=E((Sve,W_)=>{"use strict";l();var Zl={single_source_shortest_paths:function(t,e,r){var n={},i={};i[e]=0;var s=Zl.PriorityQueue.make();s.push(e,0);for(var o,a,u,c,f,h,g,y,m;!s.empty();){o=s.pop(),a=o.value,c=o.cost,f=t[a]||{};for(u in f)f.hasOwnProperty(u)&&(h=f[u],g=c+h,y=i[u],m=typeof i[u]>"u",(m||y>g)&&(i[u]=g,s.push(u,g),n[u]=a))}if(typeof r<"u"&&typeof i[r]>"u"){var T=["Could not find a path from ",e," to ",r,"."].join("");throw new Error(T)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e,i;n;)r.push(n),i=t[n],n=t[n];return r.reverse(),r},find_path:function(t,e,r){var n=Zl.single_source_shortest_paths(t,e,r);return Zl.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(t){var e=Zl.PriorityQueue,r={},n;t=t||{};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.queue=[],r.sorter=t.sorter||e.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var r={value:t,cost:e};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof W_<"u"&&(W_.exports=Zl)});var YU=E(Nu=>{l();var He=ms(),QU=RU(),WU=LU(),zU=qU(),$U=HU(),ef=H_(),Ry=gs(),fie=GU();function kU(t){return unescape(encodeURIComponent(t)).length}function tf(t,e,r){let n=[],i;for(;(i=t.exec(r))!==null;)n.push({data:i[0],index:i.index,mode:e,length:i[0].length});return n}function KU(t){let e=tf(ef.NUMERIC,He.NUMERIC,t),r=tf(ef.ALPHANUMERIC,He.ALPHANUMERIC,t),n,i;return Ry.isKanjiModeEnabled()?(n=tf(ef.BYTE,He.BYTE,t),i=tf(ef.KANJI,He.KANJI,t)):(n=tf(ef.BYTE_KANJI,He.BYTE,t),i=[]),e.concat(r,n,i).sort(function(o,a){return o.index-a.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function z_(t,e){switch(e){case He.NUMERIC:return QU.getBitsLength(t);case He.ALPHANUMERIC:return WU.getBitsLength(t);case He.KANJI:return $U.getBitsLength(t);case He.BYTE:return zU.getBitsLength(t)}}function hie(t){return t.reduce(function(e,r){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===r.mode?(e[e.length-1].data+=r.data,e):(e.push(r),e)},[])}function die(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];switch(n.mode){case He.NUMERIC:e.push([n,{data:n.data,mode:He.ALPHANUMERIC,length:n.length},{data:n.data,mode:He.BYTE,length:n.length}]);break;case He.ALPHANUMERIC:e.push([n,{data:n.data,mode:He.BYTE,length:n.length}]);break;case He.KANJI:e.push([n,{data:n.data,mode:He.BYTE,length:kU(n.data)}]);break;case He.BYTE:e.push([{data:n.data,mode:He.BYTE,length:kU(n.data)}])}}return e}function pie(t,e){let r={},n={start:{}},i=["start"];for(let s=0;s<t.length;s++){let o=t[s],a=[];for(let u=0;u<o.length;u++){let c=o[u],f=""+s+u;a.push(f),r[f]={node:c,lastCount:0},n[f]={};for(let h=0;h<i.length;h++){let g=i[h];r[g]&&r[g].node.mode===c.mode?(n[g][f]=z_(r[g].lastCount+c.length,c.mode)-z_(r[g].lastCount,c.mode),r[g].lastCount+=c.length):(r[g]&&(r[g].lastCount=c.length),n[g][f]=z_(c.length,c.mode)+4+He.getCharCountIndicator(c.mode,e))}}i=a}for(let s=0;s<i.length;s++)n[i[s]].end=0;return{map:n,table:r}}function jU(t,e){let r,n=He.getBestModeForData(t);if(r=He.from(e,n),r!==He.BYTE&&r.bit<n.bit)throw new Error('"'+t+'" cannot be encoded with mode '+He.toString(r)+`.
 Suggested mode is: `+He.toString(n));switch(r===He.KANJI&&!Ry.isKanjiModeEnabled()&&(r=He.BYTE),r){case He.NUMERIC:return new QU(t);case He.ALPHANUMERIC:return new WU(t);case He.KANJI:return new $U(t);case He.BYTE:return new zU(t)}}Nu.fromArray=function(e){return e.reduce(function(r,n){return typeof n=="string"?r.push(jU(n,null)):n.data&&r.push(jU(n.data,n.mode)),r},[])};Nu.fromString=function(e,r){let n=KU(e,Ry.isKanjiModeEnabled()),i=die(n),s=pie(i,r),o=fie.find_path(s.map,"start","end"),a=[];for(let u=1;u<o.length-1;u++)a.push(s.table[o[u]].node);return Nu.fromArray(hie(a))};Nu.rawSplit=function(e){return Nu.fromArray(KU(e,Ry.isKanjiModeEnabled()))}});var XU=E(JU=>{l();var Ly=gs(),$_=Ty(),gie=uU(),yie=lU(),mie=fU(),wie=pU(),J_=gU(),X_=M_(),Eie=vU(),By=CU(),vie=DU(),Aie=ms(),K_=YU();function bie(t,e){let r=t.size,n=wie.getPositions(e);for(let i=0;i<n.length;i++){let s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let u=-1;u<=7;u++)o+u<=-1||r<=o+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?t.set(s+a,o+u,!0,!0):t.set(s+a,o+u,!1,!0))}}function Iie(t){let e=t.size;for(let r=8;r<e-8;r++){let n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function _ie(t,e){let r=mie.getPositions(e);for(let n=0;n<r.length;n++){let i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function Sie(t,e){let r=t.size,n=By.getEncodedBits(e),i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Y_(t,e,r){let n=t.size,i=vie.getEncodedBits(e,r),s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function Tie(t,e){let r=t.size,n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!t.isReserved(i,a-u)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(i,a-u,c),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function Cie(t,e,r){let n=new gie;r.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),Aie.getCharCountIndicator(u.mode,t)),u.write(n)});let i=Ly.getSymbolTotalCodewords(t),s=X_.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let u=0;u<a;u++)n.put(u%2?17:236,8);return xie(n,t,e)}function xie(t,e,r){let n=Ly.getSymbolTotalCodewords(e),i=X_.getTotalCodewordsCount(e,r),s=n-i,o=X_.getBlocksCount(e,r),a=n%o,u=o-a,c=Math.floor(n/o),f=Math.floor(s/o),h=f+1,g=c-f,y=new Eie(g),m=0,T=new Array(o),O=new Array(o),B=0,W=new Uint8Array(t.buffer);for(let I=0;I<o;I++){let S=I<u?f:h;T[I]=W.slice(m,m+S),O[I]=y.encode(T[I]),m+=S,B=Math.max(B,S)}let U=new Uint8Array(n),A=0,_,N;for(_=0;_<B;_++)for(N=0;N<o;N++)_<T[N].length&&(U[A++]=T[N][_]);for(_=0;_<g;_++)for(N=0;N<o;N++)U[A++]=O[N][_];return U}function Nie(t,e,r,n){let i;if(Array.isArray(t))i=K_.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){let f=K_.rawSplit(t);c=By.getBestVersionForData(f,r)}i=K_.fromString(t,c||40)}else throw new Error("Invalid data");let s=By.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let o=Cie(e,r,i),a=Ly.getSymbolSize(e),u=new yie(a);return bie(u,e),Iie(u),_ie(u,e),Y_(u,r,0),e>=7&&Sie(u,e),Tie(u,o),isNaN(n)&&(n=J_.getBestMask(u,Y_.bind(null,u,r))),J_.applyMask(n,u),Y_(u,r,n),{modules:u,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}JU.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=$_.M,i,s;return typeof r<"u"&&(n=$_.from(r.errorCorrectionLevel,$_.M),i=By.from(r.version),s=J_.from(r.maskPattern),r.toSJISFunc&&Ly.setToSJISFunction(r.toSJISFunc)),Nie(e,i,n,s)}});var Z_=E(Ao=>{l();function ZU(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+e.slice(0,6).join("")}}Ao.getOptions=function(e){e||(e={}),e.color||(e.color={});let r=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:r,color:{dark:ZU(e.color.dark||"#000000ff"),light:ZU(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Ao.getScale=function(e,r){return r.width&&r.width>=e+r.margin*2?r.width/(e+r.margin*2):r.scale};Ao.getImageWidth=function(e,r){let n=Ao.getScale(e,r);return Math.floor((e+r.margin*2)*n)};Ao.qrToImageData=function(e,r,n){let i=r.modules.size,s=r.modules.data,o=Ao.getScale(i,n),a=Math.floor((i+n.margin*2)*o),u=n.margin*o,c=[n.color.light,n.color.dark];for(let f=0;f<a;f++)for(let h=0;h<a;h++){let g=(f*a+h)*4,y=n.color.light;if(f>=u&&h>=u&&f<a-u&&h<a-u){let m=Math.floor((f-u)/o),T=Math.floor((h-u)/o);y=c[s[m*i+T]?1:0]}e[g++]=y.r,e[g++]=y.g,e[g++]=y.b,e[g]=y.a}}});var e5=E(Fy=>{l();var eS=Z_();function Oie(t,e,r){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}function Die(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Fy.render=function(e,r,n){let i=n,s=r;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),r||(s=Die()),i=eS.getOptions(i);let o=eS.getImageWidth(e.modules.size,i),a=s.getContext("2d"),u=a.createImageData(o,o);return eS.qrToImageData(u.data,e,i),Oie(a,s,o),a.putImageData(u,0,0),s};Fy.renderToDataURL=function(e,r,n){let i=n;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),i||(i={});let s=Fy.render(e,r,i),o=i.type||"image/png",a=i.rendererOpts||{};return s.toDataURL(o,a.quality)}});var n5=E(r5=>{l();var Pie=Z_();function t5(t,e){let r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function tS(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Rie(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){let u=Math.floor(a%e),c=Math.floor(a/e);!u&&!s&&(s=!0),t[a]?(o++,a>0&&u>0&&t[a-1]||(n+=s?tS("M",u+r,.5+c+r):tS("m",i,0),i=0,s=!1),u+1<e&&t[a+1]||(n+=tS("h",o),o=0)):i++}return n}r5.render=function(e,r,n){let i=Pie.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,u=i.color.light.a?"<path "+t5(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+t5(i.color.dark,"stroke")+' d="'+Rie(o,s,i.margin)+'"/>',f='viewBox="0 0 '+a+" "+a+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+c+`</svg>
`;return typeof n=="function"&&n(null,g),g}});var s5=E(rf=>{l();var Bie=sU(),rS=XU(),i5=e5(),Lie=n5();function nS(t,e,r,n,i){let s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!Bie())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(u,c){try{let f=rS.create(r,n);u(t(f,e,n))}catch(f){c(f)}})}try{let u=rS.create(r,n);i(null,t(u,e,n))}catch(u){i(u)}}rf.create=rS.create;rf.toCanvas=nS.bind(null,i5.render);rf.toDataURL=nS.bind(null,i5.renderToDataURL);rf.toString=nS.bind(null,function(t,e,r){return Lie.render(t,r)})});var aS=E(Es=>{"use strict";l();var Wie=Es&&Es.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),g5=Es&&Es.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Wie(e,t,r)};Object.defineProperty(Es,"__esModule",{value:!0});g5(jl(),Es);g5(zI(),Es)});l();var zie=be(_m(),1),$ie=be(sE(),1),Kie=be(aE(),1),Yie=be(ht(),1),Jie=be(oa(),1),Xie=be(bn(),1),Zie=be(zn(),1),ese=be(ud(),1),tse=be(mv(),1),rse=be(Sc(),1),nse=be(Bd(),1),T5=be(vi(),1),Hn=be(oc(),1),C5=be(Gu(),1),x5=be(Lo(),1);l();l();var n2=be(Av(),1);l();l();var Ld="elvenjs_state",e2="https://devnet-api.multiversx.com";var qi="/dapp/init",Fd="devnet",t2="https://maiar.page.link/?apn=com.elrond.maiar.wallet&isi=1519405832&ibi=com.elrond.maiar.wallet&link=https://xportal.com/",r2=["wss://relay.walletconnect.com"],Jt={devnet:{id:"devnet",shortId:"D",name:"Devnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://devnet-wallet.multiversx.com",xAliasAddress:"https://devnet.xalias.com",apiAddress:"https://devnet-api.multiversx.com",explorerAddress:"https://devnet-explorer.multiversx.com",apiTimeout:1e4},testnet:{id:"testnet",shortId:"T",name:"Testnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://testnet-wallet.multiversx.com",xAliasAddress:"https://testnet.xalias.com",apiAddress:"https://testnet-api.multiversx.com",explorerAddress:"https://testnet-explorer.multiversx.com",apiTimeout:1e4},mainnet:{id:"mainnet",shortId:"1",name:"Mainnet",egldLabel:"EGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://wallet.multiversx.com",xAliasAddress:"https://xalias.com",apiAddress:"https://api.multiversx.com",explorerAddress:"https://explorer.multiversx.com",apiTimeout:1e4}};var Se={get(t){let e=localStorage.getItem(Ld);if(!e)return{};let r=JSON.parse(e);return t?r[t]:r},set(t,e){let r=this.get();r[t]=e,localStorage.setItem(Ld,JSON.stringify(r))},clear(){localStorage.removeItem(Ld)}};var Md=async()=>{let t=n2.ExtensionProvider.getInstance();try{let e=await t.init(),r=Se.get();if(r?.address&&t.setAddress(r.address),!e){console.warn("Something went wrong when trying to initialize the ExtensionProvider..");return}return t}catch{console.warn("Can't initialize the Dapp Provider!")}};var uS=be(Av(),1),cS=be(Fl(),1),lS=be(jl(),1),S5=be(A_(),1),Gy=be(Bd(),1);l();var PM=be(Fl(),1);l();l();var Te=class{static set(e,r){if(!e)return;let n={...this.events,[e]:r};this.events=n}static get(e){if(!(!e||!this.events))return this.events[e]}static run(e,...r){!e||!this.events||this.events[e]?.(...r)}static clear(){this.events=void 0}};l();var gy=(s=>(s.ledger="ledger",s.mobile="mobile",s.webWallet="web-wallet",s.browserExtension="browser-extension",s.xAlias="x-alias",s))(gy||{});var wu=async t=>{if(!t.dappProvider)throw new Error("Error: Logout failed: There is no active session!");Te.run("onLoginPending");let e=await t.dappProvider.logout();return e&&(Se.clear(),Te.run("onLogout")),e};l();var OM=be(ht(),1),DM=be(oa(),1);l();var Bt=t=>typeof t=="string"?t.toUpperCase():t instanceof Error?t.message:`Error: ${JSON.stringify(t)}`;l();var Eu=()=>new Date().setHours(new Date().getHours()+24),yy=t=>Date.now()>t;var hs=async t=>{let e=Se.get("address"),r=Se.get("expires");if(!(r&&yy(r))&&e&&t.networkProvider){let i=new OM.Address(e),s=new DM.Account(i);try{let o=await t.networkProvider.getAccount(i),a=await t.networkProvider.getGuardianData(i);Se.set("address",e),Se.set("activeGuardian",a.guarded&&a.activeGuardian?.address?a.activeGuardian.address:""),Se.set("nonce",o.nonce.valueOf()),Se.set("balance",o.balance.toString()),s.update(o)}catch(o){let a=Bt(o);console.warn(`Something went wrong trying to synchronize the user account: ${a}`)}}};l();function my(t){return t[Math.floor(Math.random()*t.length)]}var RM=async t=>{if(!t.initOptions.walletConnectV2ProjectId||!t.initOptions.chainType)return;let e={onClientLogin:()=>{hs(t),Te.run("onLoggedIn")},onClientLogout:()=>wu(t),onClientEvent:i=>{console.log("wc2 session event: ",i)}},r=my(t.initOptions.walletConnectV2RelayAddresses),n=new PM.WalletConnectV2Provider(e,Jt[t.initOptions.chainType].shortId,r,t.initOptions.walletConnectV2ProjectId);try{return await n.init(),n}catch{console.warn("Can't initialize the Dapp Provider!")}};l();var KM=be(kt(),1),_y=be(ht(),1),YM=be(BM(),1),JM=be(qM(),1),XM=be(D_(),1),ZM=be(QM(),1),eU=be(zM(),1),tU=be($M(),1),rU=be(Tc(),1);var Sy=class{constructor({apiUrl:e,chainType:r,apiTimeout:n}){this.chainType=r||Fd,this.apiUrl=e||Jt[this.chainType]?.apiAddress,this.apiTimeout=n||Jt[this.chainType]?.apiTimeout}async apiGet(e,r){if(typeof fetch<"u"){let n=new AbortController,i=setTimeout(()=>n.abort(),this.apiTimeout),s={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:n.signal};try{let o=await fetch(this.apiUrl+"/"+e,Object.assign(s,r||{})),a=await o.json();if(!o.ok){let u=a?.error||o.status;return clearTimeout(i),Promise.reject(u)}return clearTimeout(i),a}catch(o){this.handleApiError(o,e)}}}async apiPost(e,r,n){if(typeof fetch<"u"){let i=new AbortController,s=setTimeout(()=>i.abort(),this.apiTimeout),o={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r||{}),signal:i.signal};try{let a=await fetch(this.apiUrl+"/"+e,Object.assign(o,n||{})),u=await a.json();if(!a.ok){let c=u?.error||a.status;return clearTimeout(s),Promise.reject(c)}return clearTimeout(s),u}catch(a){this.handleApiError(a,e)}}}handleApiError(e,r){if(!e.response)throw new Error(`Request error on url [${r}]: [${e.toString()}]`);let n=e.response.data,i=n.error||n.message||JSON.stringify(n);throw new Error(i)}async sendTransaction(e){return(await this.apiPost("transactions",e.toSendable())).txHash}async getAccount(e){let r=await this.apiGet(`accounts/${e.bech32()}`);return{address:new _y.Address(r?.address||""),nonce:Number(r?.nonce||0),balance:new KM.default(r?.balance||0),code:r?.code||"",userName:r?.username||""}}async getGuardianData(e){let r=await this.apiGet(`address/${e.bech32()}/guardian-data`);return{guarded:r?.data?.guardianData?.guarded||!1,activeGuardian:r?.data?.guardianData?.activeGuardian,pendingGuardian:r?.data?.guardianData?.pendingGuardian}}async getTransaction(e){let r=await this.apiGet(`transactions/${e}`),n=new YM.TransactionStatus(r.status);return{hash:e,type:r.type||"",nonce:r.nonce||0,round:r.round,epoch:r.epoch||0,value:(r.value||0).toString(),sender:new _y.Address(r.sender),receiver:new _y.Address(r.receiver),gasPrice:r.gasPrice||0,gasLimit:r.gasLimit||0,data:d.Buffer.from(r.data||"","base64"),status:n,timestamp:r.timestamp||0,blockNonce:r.blockNonce||0,hyperblockNonce:r.hyperblockNonce||0,hyperblockHash:r.hyperblockHash||"",receipt:JM.TransactionReceipt.fromHttpResponse(r.receipt||{}),logs:XM.TransactionLogs.fromHttpResponse(r.logs||{}),contractResults:ZM.ContractResults.fromApiHttpResponse(r.results||[]),isCompleted:!n.isPending()}}async queryContract({address:e,func:r,args:n,value:i,caller:s}){try{let o=new rU.Query({address:e,func:r,args:n,value:i,caller:s}),a=new tU.ContractQueryRequest(o).toHttpRequest(),u=await this.apiPost("query",a);return eU.ContractQueryResponse.fromHttpResponse(u)}catch(o){this.handleApiError(o,"query")}}};l();var nU=async(t,e,r,n="/")=>{let i=await Md(),o={callbackUrl:encodeURIComponent(`${window.location.origin}${n}`),token:e};try{i&&(await i.login(o)?Te.run("onLoginPending"):Te.run("onLogout"))}catch(u){let c=Bt(u);console.warn(`Something went wrong trying to login the user: ${c}`)}if(!i)throw new Error("Error: There were problems with auth provider initialization!");let{signature:a}=i.account;if(Se.set("loginToken",e),a&&Se.set("signature",a),t.networkProvider&&a)try{let u=await i.getAddress();if(!u)throw new Error("Canceled!");Se.set("address",u),Se.set("loginMethod","browser-extension"),Se.set("expires",Eu()),await hs(t),Te.run("onLoggedIn");let c=r.getToken(u,e,a);return Se.set("accessToken",c),i}catch(u){console.warn(`Something went wrong trying to synchronize the user account: ${u?.message}`),Te.run("onLogout")}};l();l();var o5=be(s5(),1),a5=be(Fl(),1);var Fie=t=>{let e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild?.cloneNode(!0)},Mie=t=>{let e=`${t2}?wallet-connect=${encodeURIComponent(t)}`,r=document.createElement("a");return r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer nofollow"),r.setAttribute("target","_blank"),r.textContent="xPortal login",r.classList.add("elven-qr-code-deep-link"),r},Uie=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairings"),t},qie=()=>{let t=document.createElement("div");return t.textContent="Existing WalletConnect pairings:",t.classList.add("elven-wc-pairings-header"),t},iS={},Vie=(t,e)=>{let r=document.createElement("button");return r.classList.add("elven-wc-pairings-remove-btn"),r.textContent="\u2716",iS[t.topic]=new AbortController,r.addEventListener("click",n=>{n.stopImmediatePropagation(),e(t.topic)},{signal:iS[t.topic].signal}),r},My={},Hie=(t,e,r)=>{let n=document.createElement("div"),i=document.createElement("div");n.classList.add("elven-wc-pairing-item"),n.setAttribute("id",t.topic),i.classList.add("elven-wc-pairing-item-description"),i.textContent=`${t.peerMetadata?.description} (${t.peerMetadata?.url})`,n.appendChild(i);let s=Vie(t,e);return n.appendChild(s),My[t.topic]=new AbortController,n.addEventListener("click",()=>r(t.topic),{signal:My[t.topic].signal}),n},Gie=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairing-item-confirm-msessage"),t.setAttribute("id","elven-wc-pairing-item-confirm-msessage"),t.innerText="Confirm on xPortal app!",t},kie=t=>{if(!t)return;document.getElementById(t)?.remove()},jie=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Qie=async t=>t?await o5.default.toString(t,{type:"svg"}):void 0,u5=async(t,e,r,n)=>{if(!t)throw new Error("Please provide the QR Code and WalletConnect Pairings container id!");let i=null;typeof t=="string"?i=document.getElementById(t):t instanceof HTMLElement&&(i=t);let s=await Qie(e),o;if(s&&(o=Fie(s)),i&&o&&(i.replaceChildren(),i.appendChild(o),jie()&&i.appendChild(Mie(e))),i&&r instanceof a5.WalletConnectV2Provider){let a=r.pairings,u=async f=>{try{f&&(await r.logout({topic:f}),kie(f))}catch(h){let g=Bt(h);console.warn(`Something went wrong trying to remove the existing pairing: ${g}`)}finally{My[f].abort()}},c=async f=>{try{let{approval:h}=await r.connect({topic:f,methods:["mvx_cancelAction","mvx_signNativeAuthToken"]});document.getElementById("elven-wc-pairing-item-confirm-msessage")||document.getElementById(f)?.after(Gie()),await r.login({approval:h,token:n})}catch(h){let g=Bt(h);console.warn(`Something went wrong trying to login the user: ${g}`)}finally{for(let h of Object.values(My))h?.abort();for(let h of Object.values(iS))h?.abort()}};if(a&&a.length>0){let f=Uie();i.appendChild(f);let h=qie();f.appendChild(h);for(let g of a){let y=Hie(g,u,c);f.appendChild(y)}}}return i};var Uy=be(Fl(),1);var c5=async(t,e,r,n)=>{if(!n)throw new Error("You haven't provided the QR code container DOM element id");let i=my(t.initOptions.walletConnectV2RelayAddresses);if(!i||!t.networkProvider)throw new Error("Something wen't wrong with the initialization (ApiNetworkProvider or Wallet Connect Bridge address), plese try to refresh the page!");if(!t.initOptions.walletConnectV2ProjectId)throw new Error("Please provide your WalletConnect project id. You can get it here: https://cloud.walletconnect.com)");if(!t.initOptions.chainType)throw new Error("Please provide the chain type in ElvenJS.init function!");let s,o={onClientLogin:async()=>{if(t.dappProvider instanceof Uy.WalletConnectV2Provider){Te.run("onLoginPending");let u=await t.dappProvider.getAddress(),c=await t.dappProvider.getSignature();Se.set("address",u),Se.set("loginMethod","mobile"),Se.set("expires",Eu()),await hs(t),c&&Se.set("signature",c),Se.set("loginToken",e);let f=r.getToken(u,e,c);Se.set("accessToken",f),Te.run("onLoggedIn"),s?.replaceChildren()}},onClientLogout:async()=>{t.dappProvider instanceof Uy.WalletConnectV2Provider&&(await wu(t),Te.run("onLogout"))},onClientEvent:u=>{console.log("wc2 session event: ",u)}},a=new Uy.WalletConnectV2Provider(o,Jt[t.initOptions.chainType].shortId,i,t.initOptions.walletConnectV2ProjectId);try{if(a){t.dappProvider=a,Te.run("onQrPending"),await a.init();let{uri:u,approval:c}=await a.connect({methods:["mvx_cancelAction","mvx_signNativeAuthToken"]}),f=e?`${u}&token=${e}`:u;return n&&f&&(s=await u5(n,f,a,e),Te.run("onQrLoaded")),await a.login({approval:c,token:e}),a}}catch(u){let c=Bt(u);console.warn(`Something went wrong trying to login the user: ${c}`),Te.run("onLogout")}};l();var l5=be(jl(),1);var sS=async(t,e,r,n)=>{let i=new l5.WalletProvider(`${t}${qi}`),o={callbackUrl:typeof window<"u"?encodeURIComponent(`${window.location.origin}${n||"/"}`):"/",token:e};try{return Te.run("onLoginPending"),Se.set("loginMethod",Jt[r].xAliasAddress===t?"x-alias":"web-wallet"),await i.login(o),Se.set("expires",Eu()),Se.set("loginToken",e),i}catch(a){let u=Bt(a);console.warn(`Something went wrong trying to login the user: ${u}`),Se.set("loginMethod",""),Te.run("onLogout")}};l();var Sr=t=>{if(typeof window<"u"){let e=new URL(window.location.href);return new URLSearchParams(e.search).get(t)}};l();var f5=be(jl(),1);var h5=be(A_(),1),oS=async(t,e)=>{let r=Sr("signature"),n=Sr("address"),i=Se.get("address"),s=Se.get("loginToken");if(r&&Se.set("signature",r),n||i){n&&(Se.set("address",n),window.history.replaceState(null,"",window.location.pathname));let o=new f5.WalletProvider(`${t}${qi}`);if(r&&e&&n){let u=new h5.NativeAuthClient({apiUrl:e,origin:window.location.origin}).getToken(n,s,r);Se.set("accessToken",u)}return o}};l();var d5=be(oa(),1),p5=be(ud(),1);var qy=async(t,e)=>{Te.run("onTxSent",t),await new p5.TransactionWatcher(e).awaitCompleted(t);let n=t.getSender(),i=new d5.Account(n),s=await e.getAccount(n);i.update(s),Se.set("address",i.address.bech32()),Se.set("balance",i.balance.toString()),Te.run("onTxFinalized",t)};l();var Ou=be(aS(),1),m5=be(bn(),1);l();var y5=be(oa(),1);var Vy=t=>{let e=t.getSender(),r=new y5.Account(e),n=t.getNonce().valueOf();r.incrementNonce(),Se.set("nonce",n+1)};var w5=async(t,e,r,n)=>{if(Sr(Ou.WALLET_PROVIDER_CALLBACK_PARAM)===Ou.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED&&t&&e){let s=Se.get("activeGuardian"),o=Se.get("loginMethod"),a=Sr("hasWebWalletGuardianSign"),u;if("getTransactionsFromWalletUrl"in t){if(u=t.getTransactionsFromWalletUrl()?.[0],!u)return;o==="web-wallet"&&(u.data=d.Buffer.from(u.data).toString("base64"))}else s&&o!=="web-wallet"&&o!=="x-alias"&&a&&(u=new Ou.WalletProvider(`${r}${qi}`).getTransactionsFromWalletUrl()?.[0]);if(u){let c=m5.Transaction.fromPlainObject(u);c.setNonce(n),Vy(c);try{Te.run("onTxStarted",c),await e.sendTransaction(c),await qy(c,e)}catch(f){let h=Bt(f);throw Te.run("onTxError",c,h),new Error(`Error: Transaction signing failed! ${h}`)}finally{window.history.replaceState(null,"",window.location.pathname)}}window.history.replaceState(null,"",window.location.pathname)}};l();var Hy=be(gc(),1),E5=be(ht(),1),v5=be(aS(),1);var A5=t=>{let e=Se.get("activeGuardian");if(e){let r={guarded:!0};t.setVersion(Hy.TransactionVersion.withTxOptions()),t.setOptions(Hy.TransactionOptions.withOptions(r)),t.setGuardian(E5.Address.fromBech32(e))}return t},b5=async(t,e)=>{let r=new v5.WalletProvider(`${e}${qi}`),n=window?.location.href,i=new URL(n);i.searchParams.set("hasWebWalletGuardianSign","true"),await r.guardTransactions([t],{callbackUrl:encodeURIComponent(i.toString())})},I5=t=>{let e=Se.get("activeGuardian");return!(!Se.get("address")||!e||t.isGuardedTransaction())};l();var _5=()=>{let t=!Sr("walletProviderStatus"),e=Sr("status")==="signed",r=Sr("message"),n=Sr("signature");t&&e&&r&&n&&(Te.run("onSignMsgFinalized",r,n),window.history.replaceState(null,"",window.location.pathname))};var fS=class{static async init(e){let r=Se.get();if(r.expires&&yy(r.expires)){Se.clear(),this.dappProvider=void 0;return}this.initOptions={chainType:Fd,apiUrl:e2,apiTimeout:1e4,walletConnectV2ProjectId:"",walletConnectV2RelayAddresses:r2,...e},this.networkProvider=new Sy(this.initOptions),this.initOptions.onLoginPending&&Te.set("onLoginPending",this.initOptions.onLoginPending),this.initOptions.onLoggedIn&&Te.set("onLoggedIn",this.initOptions.onLoggedIn),this.initOptions.onQrPending&&Te.set("onQrPending",this.initOptions.onQrPending),this.initOptions.onQrLoaded&&Te.set("onQrLoaded",this.initOptions.onQrLoaded),this.initOptions.onLogout&&Te.set("onLogout",this.initOptions.onLogout),this.initOptions.onTxStarted&&Te.set("onTxStarted",this.initOptions.onTxStarted),this.initOptions.onTxSent&&Te.set("onTxSent",this.initOptions.onTxSent),this.initOptions.onTxFinalized&&Te.set("onTxFinalized",this.initOptions.onTxFinalized),this.initOptions.onTxError&&Te.set("onTxError",this.initOptions.onTxError),this.initOptions.onSignMsgStarted&&Te.set("onSignMsgStarted",this.initOptions.onSignMsgStarted),this.initOptions.onSignMsgFinalized&&Te.set("onSignMsgFinalized",this.initOptions.onSignMsgFinalized),this.initOptions.onSignMsgError&&Te.set("onSignMsgError",this.initOptions.onSignMsgError),(r?.address||(r.loginMethod==="web-wallet"||r.loginMethod==="x-alias")&&Sr("address"))&&r?.loginMethod&&(Te.run("onLoginPending"),r.loginMethod==="browser-extension"&&(this.dappProvider=await Md()),r.loginMethod==="mobile"&&(this.dappProvider=await RM(this)),r.loginMethod==="web-wallet"&&this.initOptions.chainType&&(this.dappProvider=await oS(Jt[this.initOptions.chainType].walletAddress,this.initOptions.apiUrl)),r.loginMethod==="x-alias"&&this.initOptions.chainType&&(this.dappProvider=await oS(Jt[this.initOptions.chainType].xAliasAddress,this.initOptions.apiUrl)),await hs(this),Te.run("onLoggedIn"),this.initOptions?.chainType&&(await w5(this.dappProvider,this.networkProvider,Jt[this.initOptions.chainType][r.loginMethod==="x-alias"?"xAliasAddress":"walletAddress"],r.nonce),_5()))}static async login(e,r){if(!Object.values(gy).includes(e))throw new Error("Error: Wrong login method!");if(!this.networkProvider)throw new Error("Error: Login failed: Use ElvenJs.init() first!");try{Te.run("onLoginPending");let i=new S5.NativeAuthClient({apiUrl:this.initOptions?.apiUrl,origin:window.location.origin}),s=await i.initialize();if(e==="browser-extension"){let o=await nU(this,s,i,r?.callbackRoute);this.dappProvider=o}if(e==="mobile"){let o=await c5(this,s,i,r?.qrCodeContainer);this.dappProvider=o}if(e==="web-wallet"&&this.initOptions?.chainType){let o=await sS(Jt[this.initOptions.chainType].walletAddress,s,this.initOptions?.chainType,r?.callbackRoute);this.dappProvider=o}if(e==="x-alias"&&this.initOptions?.chainType){let o=await sS(Jt[this.initOptions.chainType].xAliasAddress,s,this.initOptions?.chainType,r?.callbackRoute);this.dappProvider=o}}catch(i){let s=Bt(i);throw new Error(`Error: ${s}`)}}static async logout(){try{let e=await wu(this);return this.dappProvider=void 0,e}catch(e){let r=Bt(e);console.warn("Something went wrong when logging out: ",r)}}static async signAndSendTransaction(e){if(!this.dappProvider)throw new Error("Error: Transaction signing failed: There is no active session!");if(!this.networkProvider)throw new Error("Error: Transaction signing failed: There is no active network provider!");let r=A5(e);try{Te.run("onTxStarted",e);let n=Se.get();if(e.setNonce(n.nonce),this.dappProvider instanceof uS.ExtensionProvider&&(r=await this.dappProvider.signTransaction(e)),this.dappProvider instanceof cS.WalletConnectV2Provider&&(r=await this.dappProvider.signTransaction(e)),this.dappProvider instanceof lS.WalletProvider&&await this.dappProvider.signTransaction(e),n.loginMethod!=="web-wallet"&&n.loginMethod!=="x-alias"){let i=I5(r);if(i||Vy(r),i&&this.initOptions?.chainType){await b5(r,Jt[this.initOptions.chainType].walletAddress);return}await this.networkProvider.sendTransaction(r),await qy(r,this.networkProvider)}}catch(n){let i=Bt(n);throw Te.run("onTxError",r,i),new Error(`Error: Transaction signing failed! ${i}`)}return r}static async signMessage(e,r){if(!this.dappProvider)throw new Error("Error: Message signing failed: There is no active session!");if(!this.networkProvider)throw new Error("Error: Message signing failed: There is no active network provider!");let n="";try{if(Te.run("onSignMsgStarted",e),this.dappProvider instanceof uS.ExtensionProvider&&(n=(await this.dappProvider.signMessage(new Gy.SignableMessage({message:d.Buffer.from(e)}))).getSignature().toString("hex")),this.dappProvider instanceof cS.WalletConnectV2Provider&&(n=(await this.dappProvider.signMessage(new Gy.SignableMessage({message:d.Buffer.from(e)}))).getSignature().toString("hex")),this.dappProvider instanceof lS.WalletProvider){let i=o=>encodeURIComponent(o).replace(/[!'()*]/g,a=>`%${a.charCodeAt(0).toString(16).toUpperCase()}`),s=r?.callbackUrl||window.location.origin;await this.dappProvider.signMessage(new Gy.SignableMessage({message:d.Buffer.from(e)}),{callbackUrl:encodeURIComponent(`${s}${s.includes("?")?"&":"?"}message=${i(e)}`)})}return Te.run("onSignMsgFinalized",e,n),{message:e,messageSignature:n}}catch(i){let s=Bt(i);throw Te.run("onSignMsgError",e,s),new Error(`Error: Message signing failed! ${s}`)}}static async queryContract({address:e,func:r,args:n=[],value:i=0,caller:s}){if(!this.networkProvider)throw new Error("Error: Query failed: There is no active network provider!");if(!e||!r)throw new Error("Error: Query failed: The Query arguments are not valid! Address and func required");try{return await this.networkProvider.queryContract({address:e,func:r,args:n,value:i,caller:s})}catch(o){let a=Bt(o);throw new Error(`Error: Smart contract query failed! ${a}`)}}static{this.storage=Se}static{this.destroy=()=>{this.networkProvider=void 0,this.dappProvider=void 0,this.initOptions=void 0,Te.clear()}}};var export_Account=Jie.Account;var export_Address=Yie.Address;var export_AddressType=x5.AddressType;var export_AddressValue=x5.AddressValue;var export_BigUIntType=Hn.BigUIntType;var export_BigUIntValue=Hn.BigUIntValue;var export_BooleanType=C5.BooleanType;var export_BooleanValue=C5.BooleanValue;var export_BytesType=T5.BytesType;var export_BytesValue=T5.BytesValue;var export_ContractFunction=rse.ContractFunction;var export_GasEstimator=Kie.GasEstimator;var export_SignableMessage=nse.SignableMessage;var export_SmartContract=tse.SmartContract;var export_TokenTransfer=zie.TokenTransfer;var export_Transaction=Xie.Transaction;var export_TransactionPayload=Zie.TransactionPayload;var export_TransactionWatcher=ese.TransactionWatcher;var export_TransferTransactionsFactory=$ie.TransferTransactionsFactory;var export_U16Type=Hn.U16Type;var export_U16Value=Hn.U16Value;var export_U32Type=Hn.U32Type;var export_U32Value=Hn.U32Value;var export_U64Type=Hn.U64Type;var export_U64Value=Hn.U64Value;var export_U8Type=Hn.U8Type;var export_U8Value=Hn.U8Value;export{export_Account as Account,export_Address as Address,export_AddressType as AddressType,export_AddressValue as AddressValue,export_BigUIntType as BigUIntType,export_BigUIntValue as BigUIntValue,export_BooleanType as BooleanType,export_BooleanValue as BooleanValue,export_BytesType as BytesType,export_BytesValue as BytesValue,export_ContractFunction as ContractFunction,fS as ElvenJS,export_GasEstimator as GasEstimator,gy as LoginMethodsEnum,export_SignableMessage as SignableMessage,export_SmartContract as SmartContract,export_TokenTransfer as TokenTransfer,export_Transaction as Transaction,export_TransactionPayload as TransactionPayload,export_TransactionWatcher as TransactionWatcher,export_TransferTransactionsFactory as TransferTransactionsFactory,export_U16Type as U16Type,export_U16Value as U16Value,export_U32Type as U32Type,export_U32Value as U32Value,export_U64Type as U64Type,export_U64Value as U64Value,export_U8Type as U8Type,export_U8Value as U8Value};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
