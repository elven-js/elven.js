var Ik=Object.create;var Dd=Object.defineProperty;var Tk=Object.getOwnPropertyDescriptor;var _k=Object.getOwnPropertyNames;var Ck=Object.getPrototypeOf,Nk=Object.prototype.hasOwnProperty;var Pd=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var fe=(t,e)=>()=>(t&&(e=t(t=0)),e);var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bt=(t,e)=>{for(var r in e)Dd(t,r,{get:e[r],enumerable:!0})},Od=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _k(e))!Nk.call(t,i)&&i!==r&&Dd(t,i,{get:()=>e[i],enumerable:!(n=Tk(e,i))||n.enumerable});return t},Tr=(t,e,r)=>(Od(t,e,"default"),r&&Od(r,e,"default")),pe=(t,e,r)=>(r=t!=null?Ik(Ck(t)):{},Od(e||!t||!t.__esModule?Dd(r,"default",{value:t,enumerable:!0}):r,t)),_e=t=>Od(Dd({},"__esModule",{value:!0}),t);var y3=D(Rd=>{"use strict";h();Rd.byteLength=Ok;Rd.toByteArray=Pk;Rd.fromByteArray=Mk;var Pi=[],Tn=[],xk=typeof Uint8Array<"u"?Uint8Array:Array,yw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ea=0,p3=yw.length;Ea<p3;++Ea)Pi[Ea]=yw[Ea],Tn[yw.charCodeAt(Ea)]=Ea;var Ea,p3;Tn[45]=62;Tn[95]=63;function m3(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Ok(t){var e=m3(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Dk(t,e,r){return(e+r)*3/4-r}function Pk(t){var e,r=m3(t),n=r[0],i=r[1],s=new xk(Dk(t,n,i)),o=0,u=i>0?n-4:n,a;for(a=0;a<u;a+=4)e=Tn[t.charCodeAt(a)]<<18|Tn[t.charCodeAt(a+1)]<<12|Tn[t.charCodeAt(a+2)]<<6|Tn[t.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Tn[t.charCodeAt(a)]<<2|Tn[t.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=Tn[t.charCodeAt(a)]<<10|Tn[t.charCodeAt(a+1)]<<4|Tn[t.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Rk(t){return Pi[t>>18&63]+Pi[t>>12&63]+Pi[t>>6&63]+Pi[t&63]}function Bk(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Rk(n));return i.join("")}function Mk(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,u=r-n;o<u;o+=s)i.push(Bk(t,o,o+s>u?u:o+s));return n===1?(e=t[r-1],i.push(Pi[e>>2]+Pi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Pi[e>>10]+Pi[e>>4&63]+Pi[e<<2&63]+"=")),i.join("")}});var w3=D(ww=>{h();ww.read=function(t,e,r,n,i){var s,o,u=i*8-n-1,a=(1<<u)-1,c=a>>1,f=-7,d=r?i-1:0,w=r?-1:1,A=t[e+d];for(d+=w,s=A&(1<<-f)-1,A>>=-f,f+=u;f>0;s=s*256+t[e+d],d+=w,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=w,f-=8);if(s===0)s=1-c;else{if(s===a)return o?NaN:(A?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(A?-1:1)*o*Math.pow(2,s-n)};ww.write=function(t,e,r,n,i,s){var o,u,a,c=s*8-i-1,f=(1<<c)-1,d=f>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:s-1,T=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?e+=w/a:e+=w*Math.pow(2,1-d),e*a>=2&&(o++,a/=2),o+d>=f?(u=0,o=f):o+d>=1?(u=(e*a-1)*Math.pow(2,i),o=o+d):(u=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+A]=u&255,A+=T,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;t[r+A]=o&255,A+=T,o/=256,c-=8);t[r+A-T]|=x*128}});var io=D(Nu=>{"use strict";h();var vw=y3(),Cu=w3(),v3=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nu.Buffer=X;Nu.SlowBuffer=kk;Nu.INSPECT_MAX_BYTES=50;var Bd=2147483647;Nu.kMaxLength=Bd;X.TYPED_ARRAY_SUPPORT=Lk();!X.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Lk(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(X.prototype,"parent",{enumerable:!0,get:function(){if(X.isBuffer(this))return this.buffer}});Object.defineProperty(X.prototype,"offset",{enumerable:!0,get:function(){if(X.isBuffer(this))return this.byteOffset}});function Cs(t){if(t>Bd)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,X.prototype),e}function X(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Sw(t)}return b3(t,e,r)}X.poolSize=8192;function b3(t,e,r){if(typeof t=="string")return Uk(t,e);if(ArrayBuffer.isView(t))return qk(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ri(t,ArrayBuffer)||t&&Ri(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ri(t,SharedArrayBuffer)||t&&Ri(t.buffer,SharedArrayBuffer)))return Ew(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return X.from(n,e,r);var i=Vk(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return X.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}X.from=function(t,e,r){return b3(t,e,r)};Object.setPrototypeOf(X.prototype,Uint8Array.prototype);Object.setPrototypeOf(X,Uint8Array);function S3(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Fk(t,e,r){return S3(t),t<=0?Cs(t):e!==void 0?typeof r=="string"?Cs(t).fill(e,r):Cs(t).fill(e):Cs(t)}X.alloc=function(t,e,r){return Fk(t,e,r)};function Sw(t){return S3(t),Cs(t<0?0:Iw(t)|0)}X.allocUnsafe=function(t){return Sw(t)};X.allocUnsafeSlow=function(t){return Sw(t)};function Uk(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!X.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=I3(t,e)|0,n=Cs(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Aw(t){for(var e=t.length<0?0:Iw(t.length)|0,r=Cs(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function qk(t){if(Ri(t,Uint8Array)){var e=new Uint8Array(t);return Ew(e.buffer,e.byteOffset,e.byteLength)}return Aw(t)}function Ew(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,X.prototype),n}function Vk(t){if(X.isBuffer(t)){var e=Iw(t.length)|0,r=Cs(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Tw(t.length)?Cs(0):Aw(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Aw(t.data)}function Iw(t){if(t>=Bd)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Bd.toString(16)+" bytes");return t|0}function kk(t){return+t!=t&&(t=0),X.alloc(+t)}X.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==X.prototype};X.compare=function(e,r){if(Ri(e,Uint8Array)&&(e=X.from(e,e.offset,e.byteLength)),Ri(r,Uint8Array)&&(r=X.from(r,r.offset,r.byteLength)),!X.isBuffer(e)||!X.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};X.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};X.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return X.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=X.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var o=e[n];if(Ri(o,Uint8Array))s+o.length>i.length?X.from(o).copy(i,s):Uint8Array.prototype.set.call(i,o,s);else if(X.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function I3(t,e){if(X.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ri(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return bw(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return O3(t).length;default:if(i)return n?-1:bw(t).length;e=(""+e).toLowerCase(),i=!0}}X.byteLength=I3;function Hk(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Xk(this,e,r);case"utf8":case"utf-8":return _3(this,e,r);case"ascii":return Yk(this,e,r);case"latin1":case"binary":return Jk(this,e,r);case"base64":return Wk(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zk(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}X.prototype._isBuffer=!0;function ba(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}X.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)ba(this,r,r+1);return this};X.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)ba(this,r,r+3),ba(this,r+1,r+2);return this};X.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)ba(this,r,r+7),ba(this,r+1,r+6),ba(this,r+2,r+5),ba(this,r+3,r+4);return this};X.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?_3(this,0,e):Hk.apply(this,arguments)};X.prototype.toLocaleString=X.prototype.toString;X.prototype.equals=function(e){if(!X.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:X.compare(this,e)===0};X.prototype.inspect=function(){var e="",r=Nu.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};v3&&(X.prototype[v3]=X.prototype.inspect);X.prototype.compare=function(e,r,n,i,s){if(Ri(e,Uint8Array)&&(e=X.from(e,e.offset,e.byteLength)),!X.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,u=n-r,a=Math.min(o,u),c=this.slice(i,s),f=e.slice(r,n),d=0;d<a;++d)if(c[d]!==f[d]){o=c[d],u=f[d];break}return o<u?-1:u<o?1:0};function T3(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Tw(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=X.from(e,n)),X.isBuffer(e))return e.length===0?-1:A3(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):A3(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function A3(t,e,r,n,i){var s=1,o=t.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,r/=2}function a(A,T){return s===1?A[T]:A.readUInt16BE(T*s)}var c;if(i){var f=-1;for(c=r;c<o;c++)if(a(t,c)===a(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===u)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+u>o&&(r=o-u),c=r;c>=0;c--){for(var d=!0,w=0;w<u;w++)if(a(t,c+w)!==a(e,w)){d=!1;break}if(d)return c}return-1}X.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};X.prototype.indexOf=function(e,r,n){return T3(this,e,r,n,!0)};X.prototype.lastIndexOf=function(e,r,n){return T3(this,e,r,n,!1)};function Gk(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(o*2,2),16);if(Tw(u))return o;t[r+o]=u}return o}function jk(t,e,r,n){return Md(bw(e,t.length-r),t,r,n)}function zk(t,e,r,n){return Md(rH(e),t,r,n)}function Qk(t,e,r,n){return Md(O3(e),t,r,n)}function Kk(t,e,r,n){return Md(nH(e,t.length-r),t,r,n)}X.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return Gk(this,e,r,n);case"utf8":case"utf-8":return jk(this,e,r,n);case"ascii":case"latin1":case"binary":return zk(this,e,r,n);case"base64":return Qk(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kk(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Wk(t,e,r){return e===0&&r===t.length?vw.fromByteArray(t):vw.fromByteArray(t.slice(e,r))}function _3(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=r){var a,c,f,d;switch(u){case 1:s<128&&(o=s);break;case 2:a=t[i+1],(a&192)===128&&(d=(s&31)<<6|a&63,d>127&&(o=d));break;case 3:a=t[i+1],c=t[i+2],(a&192)===128&&(c&192)===128&&(d=(s&15)<<12|(a&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:a=t[i+1],c=t[i+2],f=t[i+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(d=(s&15)<<18|(a&63)<<12|(c&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=u}return $k(n)}var E3=4096;function $k(t){var e=t.length;if(e<=E3)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E3));return r}function Yk(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Jk(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Xk(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=iH[t[s]];return i}function Zk(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}X.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,X.prototype),i};function pr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}X.prototype.readUintLE=X.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||pr(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return i};X.prototype.readUintBE=X.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||pr(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};X.prototype.readUint8=X.prototype.readUInt8=function(e,r){return e=e>>>0,r||pr(e,1,this.length),this[e]};X.prototype.readUint16LE=X.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||pr(e,2,this.length),this[e]|this[e+1]<<8};X.prototype.readUint16BE=X.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||pr(e,2,this.length),this[e]<<8|this[e+1]};X.prototype.readUint32LE=X.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};X.prototype.readUint32BE=X.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};X.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||pr(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};X.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||pr(e,r,this.length);for(var i=r,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};X.prototype.readInt8=function(e,r){return e=e>>>0,r||pr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};X.prototype.readInt16LE=function(e,r){e=e>>>0,r||pr(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};X.prototype.readInt16BE=function(e,r){e=e>>>0,r||pr(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};X.prototype.readInt32LE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};X.prototype.readInt32BE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};X.prototype.readFloatLE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),Cu.read(this,e,!0,23,4)};X.prototype.readFloatBE=function(e,r){return e=e>>>0,r||pr(e,4,this.length),Cu.read(this,e,!1,23,4)};X.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||pr(e,8,this.length),Cu.read(this,e,!0,52,8)};X.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||pr(e,8,this.length),Cu.read(this,e,!1,52,8)};function zr(t,e,r,n,i,s){if(!X.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}X.prototype.writeUintLE=X.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;zr(this,e,r,n,s,0)}var o=1,u=0;for(this[r]=e&255;++u<n&&(o*=256);)this[r+u]=e/o&255;return r+n};X.prototype.writeUintBE=X.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;zr(this,e,r,n,s,0)}var o=n-1,u=1;for(this[r+o]=e&255;--o>=0&&(u*=256);)this[r+o]=e/u&255;return r+n};X.prototype.writeUint8=X.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,1,255,0),this[r]=e&255,r+1};X.prototype.writeUint16LE=X.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};X.prototype.writeUint16BE=X.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};X.prototype.writeUint32LE=X.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};X.prototype.writeUint32BE=X.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};X.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);zr(this,e,r,n,s-1,-s)}var o=0,u=1,a=0;for(this[r]=e&255;++o<n&&(u*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/u>>0)-a&255;return r+n};X.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*n-1);zr(this,e,r,n,s-1,-s)}var o=n-1,u=1,a=0;for(this[r+o]=e&255;--o>=0&&(u*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/u>>0)-a&255;return r+n};X.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};X.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};X.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};X.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};X.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||zr(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function C3(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N3(t,e,r,n,i){return e=+e,r=r>>>0,i||C3(t,e,r,4,34028234663852886e22,-34028234663852886e22),Cu.write(t,e,r,n,23,4),r+4}X.prototype.writeFloatLE=function(e,r,n){return N3(this,e,r,!0,n)};X.prototype.writeFloatBE=function(e,r,n){return N3(this,e,r,!1,n)};function x3(t,e,r,n,i){return e=+e,r=r>>>0,i||C3(t,e,r,8,17976931348623157e292,-17976931348623157e292),Cu.write(t,e,r,n,52,8),r+8}X.prototype.writeDoubleLE=function(e,r,n){return x3(this,e,r,!0,n)};X.prototype.writeDoubleBE=function(e,r,n){return x3(this,e,r,!1,n)};X.prototype.copy=function(e,r,n,i){if(!X.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};X.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!X.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var u=X.isBuffer(e)?e:X.from(e,i),a=u.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=u[o%a]}return this};var eH=/[^+/0-9A-Za-z-_]/g;function tH(t){if(t=t.split("=")[0],t=t.trim().replace(eH,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function bw(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function rH(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function nH(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function O3(t){return vw.toByteArray(tH(t))}function Md(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Ri(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Tw(t){return t!==t}var iH=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()});var M3=D((ape,B3)=>{h();var Wt=B3.exports={},Bi,Mi;function _w(){throw new Error("setTimeout has not been defined")}function Cw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Bi=setTimeout:Bi=_w}catch{Bi=_w}try{typeof clearTimeout=="function"?Mi=clearTimeout:Mi=Cw}catch{Mi=Cw}})();function D3(t){if(Bi===setTimeout)return setTimeout(t,0);if((Bi===_w||!Bi)&&setTimeout)return Bi=setTimeout,setTimeout(t,0);try{return Bi(t,0)}catch{try{return Bi.call(null,t,0)}catch{return Bi.call(this,t,0)}}}function sH(t){if(Mi===clearTimeout)return clearTimeout(t);if((Mi===Cw||!Mi)&&clearTimeout)return Mi=clearTimeout,clearTimeout(t);try{return Mi(t)}catch{try{return Mi.call(null,t)}catch{return Mi.call(this,t)}}}var Ns=[],xu=!1,Sa,Ld=-1;function oH(){!xu||!Sa||(xu=!1,Sa.length?Ns=Sa.concat(Ns):Ld=-1,Ns.length&&P3())}function P3(){if(!xu){var t=D3(oH);xu=!0;for(var e=Ns.length;e;){for(Sa=Ns,Ns=[];++Ld<e;)Sa&&Sa[Ld].run();Ld=-1,e=Ns.length}Sa=null,xu=!1,sH(t)}}Wt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ns.push(new R3(t,e)),Ns.length===1&&!xu&&D3(P3)};function R3(t,e){this.fun=t,this.array=e}R3.prototype.run=function(){this.fun.apply(null,this.array)};Wt.title="browser";Wt.browser=!0;Wt.env={};Wt.argv=[];Wt.version="";Wt.versions={};function xs(){}Wt.on=xs;Wt.addListener=xs;Wt.once=xs;Wt.off=xs;Wt.removeListener=xs;Wt.removeAllListeners=xs;Wt.emit=xs;Wt.prependListener=xs;Wt.prependOnceListener=xs;Wt.listeners=function(t){return[]};Wt.binding=function(t){throw new Error("process.binding is not supported")};Wt.cwd=function(){return"/"};Wt.chdir=function(t){throw new Error("process.chdir is not supported")};Wt.umask=function(){return 0}});var p,S,aH,global,h=fe(()=>{p=pe(io()),S=pe(M3()),aH=function(t){function e(){var n=this||self;return delete t.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object),global=aH});var fr={};Bt(fr,{BigNumber:()=>U3,default:()=>Ou});function F3(t){var e,r,n,i=U.prototype={constructor:U,toString:null,valueOf:null},s=new U(1),o=20,u=4,a=-7,c=21,f=-1e7,d=1e7,w=!1,A=1,T=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function U(v,C){var P,F,R,l,g,y,E,I,_=this;if(!(_ instanceof U))return new U(v,C);if(C==null){if(v&&v._isBigNumber===!0){_.s=v.s,!v.c||v.e>d?_.c=_.e=null:v.e<f?_.c=[_.e=0]:(_.e=v.e,_.c=v.c.slice());return}if((y=typeof v=="number")&&v*0==0){if(_.s=1/v<0?(v=-v,-1):1,v===~~v){for(l=0,g=v;g>=10;g/=10,l++);l>d?_.c=_.e=null:(_.e=l,_.c=[v]);return}I=String(v)}else{if(!uH.test(I=String(v)))return n(_,I,y);_.s=I.charCodeAt(0)==45?(I=I.slice(1),-1):1}(l=I.indexOf("."))>-1&&(I=I.replace(".","")),(g=I.search(/e/i))>0?(l<0&&(l=g),l+=+I.slice(g+1),I=I.substring(0,g)):l<0&&(l=I.length)}else{if(Ht(C,2,B.length,"Base"),C==10&&V)return _=new U(v),H(_,o+_.e+1,u);if(I=String(v),y=typeof v=="number"){if(v*0!=0)return n(_,I,y,C);if(_.s=1/v<0?(I=I.slice(1),-1):1,U.DEBUG&&I.replace(/^0\.0*|\./,"").length>15)throw Error(L3+v)}else _.s=I.charCodeAt(0)===45?(I=I.slice(1),-1):1;for(P=B.slice(0,C),l=g=0,E=I.length;g<E;g++)if(P.indexOf(F=I.charAt(g))<0){if(F=="."){if(g>l){l=E;continue}}else if(!R&&(I==I.toUpperCase()&&(I=I.toLowerCase())||I==I.toLowerCase()&&(I=I.toUpperCase()))){R=!0,g=-1,l=0;continue}return n(_,String(v),y,C)}y=!1,I=r(I,C,10,_.s),(l=I.indexOf("."))>-1?I=I.replace(".",""):l=I.length}for(g=0;I.charCodeAt(g)===48;g++);for(E=I.length;I.charCodeAt(--E)===48;);if(I=I.slice(g,++E)){if(E-=g,y&&U.DEBUG&&E>15&&(v>xw||v!==Cn(v)))throw Error(L3+_.s*v);if((l=l-g-1)>d)_.c=_.e=null;else if(l<f)_.c=[_.e=0];else{if(_.e=l,_.c=[],g=(l+1)%be,l<0&&(g+=be),g<E){for(g&&_.c.push(+I.slice(0,g)),E-=be;g<E;)_.c.push(+I.slice(g,g+=be));g=be-(I=I.slice(g)).length}else g-=E;for(;g--;I+="0");_.c.push(+I)}}else _.c=[_.e=0]}U.clone=F3,U.ROUND_UP=0,U.ROUND_DOWN=1,U.ROUND_CEIL=2,U.ROUND_FLOOR=3,U.ROUND_HALF_UP=4,U.ROUND_HALF_DOWN=5,U.ROUND_HALF_EVEN=6,U.ROUND_HALF_CEIL=7,U.ROUND_HALF_FLOOR=8,U.EUCLID=9,U.config=U.set=function(v){var C,P;if(v!=null)if(typeof v=="object"){if(v.hasOwnProperty(C="DECIMAL_PLACES")&&(P=v[C],Ht(P,0,mr,C),o=P),v.hasOwnProperty(C="ROUNDING_MODE")&&(P=v[C],Ht(P,0,8,C),u=P),v.hasOwnProperty(C="EXPONENTIAL_AT")&&(P=v[C],P&&P.pop?(Ht(P[0],-mr,0,C),Ht(P[1],0,mr,C),a=P[0],c=P[1]):(Ht(P,-mr,mr,C),a=-(c=P<0?-P:P))),v.hasOwnProperty(C="RANGE"))if(P=v[C],P&&P.pop)Ht(P[0],-mr,-1,C),Ht(P[1],1,mr,C),f=P[0],d=P[1];else if(Ht(P,-mr,mr,C),P)f=-(d=P<0?-P:P);else throw Error(Qr+C+" cannot be zero: "+P);if(v.hasOwnProperty(C="CRYPTO"))if(P=v[C],P===!!P)if(P)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=P;else throw w=!P,Error(Qr+"crypto unavailable");else w=P;else throw Error(Qr+C+" not true or false: "+P);if(v.hasOwnProperty(C="MODULO_MODE")&&(P=v[C],Ht(P,0,9,C),A=P),v.hasOwnProperty(C="POW_PRECISION")&&(P=v[C],Ht(P,0,mr,C),T=P),v.hasOwnProperty(C="FORMAT"))if(P=v[C],typeof P=="object")x=P;else throw Error(Qr+C+" not an object: "+P);if(v.hasOwnProperty(C="ALPHABET"))if(P=v[C],typeof P=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(P))V=P.slice(0,10)=="0123456789",B=P;else throw Error(Qr+C+" invalid: "+P)}else throw Error(Qr+"Object expected: "+v);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[a,c],RANGE:[f,d],CRYPTO:w,MODULO_MODE:A,POW_PRECISION:T,FORMAT:x,ALPHABET:B}},U.isBigNumber=function(v){if(!v||v._isBigNumber!==!0)return!1;if(!U.DEBUG)return!0;var C,P,F=v.c,R=v.e,l=v.s;e:if({}.toString.call(F)=="[object Array]"){if((l===1||l===-1)&&R>=-mr&&R<=mr&&R===Cn(R)){if(F[0]===0){if(R===0&&F.length===1)return!0;break e}if(C=(R+1)%be,C<1&&(C+=be),String(F[0]).length==C){for(C=0;C<F.length;C++)if(P=F[C],P<0||P>=di||P!==Cn(P))break e;if(P!==0)return!0}}}else if(F===null&&R===null&&(l===null||l===1||l===-1))return!0;throw Error(Qr+"Invalid BigNumber: "+v)},U.maximum=U.max=function(){return L(arguments,-1)},U.minimum=U.min=function(){return L(arguments,1)},U.random=function(){var v=9007199254740992,C=Math.random()*v&2097151?function(){return Cn(Math.random()*v)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(P){var F,R,l,g,y,E=0,I=[],_=new U(s);if(P==null?P=o:Ht(P,0,mr),g=Nw(P/be),w)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(g*=2));E<g;)y=F[E]*131072+(F[E+1]>>>11),y>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),F[E]=R[0],F[E+1]=R[1]):(I.push(y%1e14),E+=2);E=g/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(g*=7);E<g;)y=(F[E]&31)*281474976710656+F[E+1]*1099511627776+F[E+2]*4294967296+F[E+3]*16777216+(F[E+4]<<16)+(F[E+5]<<8)+F[E+6],y>=9e15?crypto.randomBytes(7).copy(F,E):(I.push(y%1e14),E+=7);E=g/7}else throw w=!1,Error(Qr+"crypto unavailable");if(!w)for(;E<g;)y=C(),y<9e15&&(I[E++]=y%1e14);for(g=I[--E],P%=be,g&&P&&(y=Ow[be-P],I[E]=Cn(g/y)*y);I[E]===0;I.pop(),E--);if(E<0)I=[l=0];else{for(l=-1;I[0]===0;I.splice(0,1),l-=be);for(E=1,y=I[0];y>=10;y/=10,E++);E<be&&(l-=be-E)}return _.e=l,_.c=I,_}}(),U.sum=function(){for(var v=1,C=arguments,P=new U(C[0]);v<C.length;)P=P.plus(C[v++]);return P},r=function(){var v="0123456789";function C(P,F,R,l){for(var g,y=[0],E,I=0,_=P.length;I<_;){for(E=y.length;E--;y[E]*=F);for(y[0]+=l.indexOf(P.charAt(I++)),g=0;g<y.length;g++)y[g]>R-1&&(y[g+1]==null&&(y[g+1]=0),y[g+1]+=y[g]/R|0,y[g]%=R)}return y.reverse()}return function(P,F,R,l,g){var y,E,I,_,M,N,m,O,Y=P.indexOf("."),$=o,b=u;for(Y>=0&&(_=T,T=0,P=P.replace(".",""),O=new U(F),N=O.pow(P.length-Y),T=_,O.c=C(Os(_n(N.c),N.e,"0"),10,R,v),O.e=O.c.length),m=C(P,F,R,g?(y=B,v):(y=v,B)),I=_=m.length;m[--_]==0;m.pop());if(!m[0])return y.charAt(0);if(Y<0?--I:(N.c=m,N.e=I,N.s=l,N=e(N,O,$,b,R),m=N.c,M=N.r,I=N.e),E=I+$+1,Y=m[E],_=R/2,M=M||E<0||m[E+1]!=null,M=b<4?(Y!=null||M)&&(b==0||b==(N.s<0?3:2)):Y>_||Y==_&&(b==4||M||b==6&&m[E-1]&1||b==(N.s<0?8:7)),E<1||!m[0])P=M?Os(y.charAt(1),-$,y.charAt(0)):y.charAt(0);else{if(m.length=E,M)for(--R;++m[--E]>R;)m[E]=0,E||(++I,m=[1].concat(m));for(_=m.length;!m[--_];);for(Y=0,P="";Y<=_;P+=y.charAt(m[Y++]));P=Os(P,I,y.charAt(0))}return P}}(),e=function(){function v(F,R,l){var g,y,E,I,_=0,M=F.length,N=R%so,m=R/so|0;for(F=F.slice();M--;)E=F[M]%so,I=F[M]/so|0,g=m*E+I*N,y=N*E+g%so*so+_,_=(y/l|0)+(g/so|0)+m*I,F[M]=y%l;return _&&(F=[_].concat(F)),F}function C(F,R,l,g){var y,E;if(l!=g)E=l>g?1:-1;else for(y=E=0;y<l;y++)if(F[y]!=R[y]){E=F[y]>R[y]?1:-1;break}return E}function P(F,R,l,g){for(var y=0;l--;)F[l]-=y,y=F[l]<R[l]?1:0,F[l]=y*g+F[l]-R[l];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,R,l,g,y){var E,I,_,M,N,m,O,Y,$,b,j,z,W,ie,te,ee,se,oe=F.s==R.s?1:-1,J=F.c,ue=R.c;if(!J||!J[0]||!ue||!ue[0])return new U(!F.s||!R.s||(J?ue&&J[0]==ue[0]:!ue)?NaN:J&&J[0]==0||!ue?oe*0:oe/0);for(Y=new U(oe),$=Y.c=[],I=F.e-R.e,oe=l+I+1,y||(y=di,I=Nn(F.e/be)-Nn(R.e/be),oe=oe/be|0),_=0;ue[_]==(J[_]||0);_++);if(ue[_]>(J[_]||0)&&I--,oe<0)$.push(1),M=!0;else{for(ie=J.length,ee=ue.length,_=0,oe+=2,N=Cn(y/(ue[0]+1)),N>1&&(ue=v(ue,N,y),J=v(J,N,y),ee=ue.length,ie=J.length),W=ee,b=J.slice(0,ee),j=b.length;j<ee;b[j++]=0);se=ue.slice(),se=[0].concat(se),te=ue[0],ue[1]>=y/2&&te++;do{if(N=0,E=C(ue,b,ee,j),E<0){if(z=b[0],ee!=j&&(z=z*y+(b[1]||0)),N=Cn(z/te),N>1)for(N>=y&&(N=y-1),m=v(ue,N,y),O=m.length,j=b.length;C(m,b,O,j)==1;)N--,P(m,ee<O?se:ue,O,y),O=m.length,E=1;else N==0&&(E=N=1),m=ue.slice(),O=m.length;if(O<j&&(m=[0].concat(m)),P(b,m,j,y),j=b.length,E==-1)for(;C(ue,b,ee,j)<1;)N++,P(b,ee<j?se:ue,j,y),j=b.length}else E===0&&(N++,b=[0]);$[_++]=N,b[0]?b[j++]=J[W]||0:(b=[J[W]],j=1)}while((W++<ie||b[0]!=null)&&oe--);M=b[0]!=null,$[0]||$.splice(0,1)}if(y==di){for(_=1,oe=$[0];oe>=10;oe/=10,_++);H(Y,l+(Y.e=_+I*be-1)+1,g,M)}else Y.e=I,Y.r=+M;return Y}}();function Q(v,C,P,F){var R,l,g,y,E;if(P==null?P=u:Ht(P,0,8),!v.c)return v.toString();if(R=v.c[0],g=v.e,C==null)E=_n(v.c),E=F==1||F==2&&(g<=a||g>=c)?Ud(E,g):Os(E,g,"0");else if(v=H(new U(v),C,P),l=v.e,E=_n(v.c),y=E.length,F==1||F==2&&(C<=l||l<=a)){for(;y<C;E+="0",y++);E=Ud(E,l)}else if(C-=g,E=Os(E,l,"0"),l+1>y){if(--C>0)for(E+=".";C--;E+="0");}else if(C+=l-y,C>0)for(l+1==y&&(E+=".");C--;E+="0");return v.s<0&&R?"-"+E:E}function L(v,C){for(var P,F,R=1,l=new U(v[0]);R<v.length;R++)F=new U(v[R]),(!F.s||(P=Ia(l,F))===C||P===0&&l.s===C)&&(l=F);return l}function k(v,C,P){for(var F=1,R=C.length;!C[--R];C.pop());for(R=C[0];R>=10;R/=10,F++);return(P=F+P*be-1)>d?v.c=v.e=null:P<f?v.c=[v.e=0]:(v.e=P,v.c=C),v}n=function(){var v=/^(-?)0([xbo])(?=\w[\w.]*$)/i,C=/^([^.]+)\.$/,P=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,g,y,E){var I,_=y?g:g.replace(R,"");if(F.test(_))l.s=isNaN(_)?null:_<0?-1:1;else{if(!y&&(_=_.replace(v,function(M,N,m){return I=(m=m.toLowerCase())=="x"?16:m=="b"?2:8,!E||E==I?N:M}),E&&(I=E,_=_.replace(C,"$1").replace(P,"0.$1")),g!=_))return new U(_,I);if(U.DEBUG)throw Error(Qr+"Not a"+(E?" base "+E:"")+" number: "+g);l.s=null}l.c=l.e=null}}();function H(v,C,P,F){var R,l,g,y,E,I,_,M=v.c,N=Ow;if(M){e:{for(R=1,y=M[0];y>=10;y/=10,R++);if(l=C-R,l<0)l+=be,g=C,E=M[I=0],_=Cn(E/N[R-g-1]%10);else if(I=Nw((l+1)/be),I>=M.length)if(F){for(;M.length<=I;M.push(0));E=_=0,R=1,l%=be,g=l-be+1}else break e;else{for(E=y=M[I],R=1;y>=10;y/=10,R++);l%=be,g=l-be+R,_=g<0?0:Cn(E/N[R-g-1]%10)}if(F=F||C<0||M[I+1]!=null||(g<0?E:E%N[R-g-1]),F=P<4?(_||F)&&(P==0||P==(v.s<0?3:2)):_>5||_==5&&(P==4||F||P==6&&(l>0?g>0?E/N[R-g]:0:M[I-1])%10&1||P==(v.s<0?8:7)),C<1||!M[0])return M.length=0,F?(C-=v.e+1,M[0]=N[(be-C%be)%be],v.e=-C||0):M[0]=v.e=0,v;if(l==0?(M.length=I,y=1,I--):(M.length=I+1,y=N[be-l],M[I]=g>0?Cn(E/N[R-g]%N[g])*y:0),F)for(;;)if(I==0){for(l=1,g=M[0];g>=10;g/=10,l++);for(g=M[0]+=y,y=1;g>=10;g/=10,y++);l!=y&&(v.e++,M[0]==di&&(M[0]=1));break}else{if(M[I]+=y,M[I]!=di)break;M[I--]=0,y=1}for(l=M.length;M[--l]===0;M.pop());}v.e>d?v.c=v.e=null:v.e<f&&(v.c=[v.e=0])}return v}function q(v){var C,P=v.e;return P===null?v.toString():(C=_n(v.c),C=P<=a||P>=c?Ud(C,P):Os(C,P,"0"),v.s<0?"-"+C:C)}return i.absoluteValue=i.abs=function(){var v=new U(this);return v.s<0&&(v.s=1),v},i.comparedTo=function(v,C){return Ia(this,new U(v,C))},i.decimalPlaces=i.dp=function(v,C){var P,F,R,l=this;if(v!=null)return Ht(v,0,mr),C==null?C=u:Ht(C,0,8),H(new U(l),v+l.e+1,C);if(!(P=l.c))return null;if(F=((R=P.length-1)-Nn(this.e/be))*be,R=P[R])for(;R%10==0;R/=10,F--);return F<0&&(F=0),F},i.dividedBy=i.div=function(v,C){return e(this,new U(v,C),o,u)},i.dividedToIntegerBy=i.idiv=function(v,C){return e(this,new U(v,C),0,1)},i.exponentiatedBy=i.pow=function(v,C){var P,F,R,l,g,y,E,I,_,M=this;if(v=new U(v),v.c&&!v.isInteger())throw Error(Qr+"Exponent not an integer: "+q(v));if(C!=null&&(C=new U(C)),y=v.e>14,!M.c||!M.c[0]||M.c[0]==1&&!M.e&&M.c.length==1||!v.c||!v.c[0])return _=new U(Math.pow(+q(M),y?v.s*(2-Fd(v)):+q(v))),C?_.mod(C):_;if(E=v.s<0,C){if(C.c?!C.c[0]:!C.s)return new U(NaN);F=!E&&M.isInteger()&&C.isInteger(),F&&(M=M.mod(C))}else{if(v.e>9&&(M.e>0||M.e<-1||(M.e==0?M.c[0]>1||y&&M.c[1]>=24e7:M.c[0]<8e13||y&&M.c[0]<=9999975e7)))return l=M.s<0&&Fd(v)?-0:0,M.e>-1&&(l=1/l),new U(E?1/l:l);T&&(l=Nw(T/be+2))}for(y?(P=new U(.5),E&&(v.s=1),I=Fd(v)):(R=Math.abs(+q(v)),I=R%2),_=new U(s);;){if(I){if(_=_.times(M),!_.c)break;l?_.c.length>l&&(_.c.length=l):F&&(_=_.mod(C))}if(R){if(R=Cn(R/2),R===0)break;I=R%2}else if(v=v.times(P),H(v,v.e+1,1),v.e>14)I=Fd(v);else{if(R=+q(v),R===0)break;I=R%2}M=M.times(M),l?M.c&&M.c.length>l&&(M.c.length=l):F&&(M=M.mod(C))}return F?_:(E&&(_=s.div(_)),C?_.mod(C):l?H(_,T,u,g):_)},i.integerValue=function(v){var C=new U(this);return v==null?v=u:Ht(v,0,8),H(C,C.e+1,v)},i.isEqualTo=i.eq=function(v,C){return Ia(this,new U(v,C))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(v,C){return Ia(this,new U(v,C))>0},i.isGreaterThanOrEqualTo=i.gte=function(v,C){return(C=Ia(this,new U(v,C)))===1||C===0},i.isInteger=function(){return!!this.c&&Nn(this.e/be)>this.c.length-2},i.isLessThan=i.lt=function(v,C){return Ia(this,new U(v,C))<0},i.isLessThanOrEqualTo=i.lte=function(v,C){return(C=Ia(this,new U(v,C)))===-1||C===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(v,C){var P,F,R,l,g=this,y=g.s;if(v=new U(v,C),C=v.s,!y||!C)return new U(NaN);if(y!=C)return v.s=-C,g.plus(v);var E=g.e/be,I=v.e/be,_=g.c,M=v.c;if(!E||!I){if(!_||!M)return _?(v.s=-C,v):new U(M?g:NaN);if(!_[0]||!M[0])return M[0]?(v.s=-C,v):new U(_[0]?g:u==3?-0:0)}if(E=Nn(E),I=Nn(I),_=_.slice(),y=E-I){for((l=y<0)?(y=-y,R=_):(I=E,R=M),R.reverse(),C=y;C--;R.push(0));R.reverse()}else for(F=(l=(y=_.length)<(C=M.length))?y:C,y=C=0;C<F;C++)if(_[C]!=M[C]){l=_[C]<M[C];break}if(l&&(R=_,_=M,M=R,v.s=-v.s),C=(F=M.length)-(P=_.length),C>0)for(;C--;_[P++]=0);for(C=di-1;F>y;){if(_[--F]<M[F]){for(P=F;P&&!_[--P];_[P]=C);--_[P],_[F]+=di}_[F]-=M[F]}for(;_[0]==0;_.splice(0,1),--I);return _[0]?k(v,_,I):(v.s=u==3?-1:1,v.c=[v.e=0],v)},i.modulo=i.mod=function(v,C){var P,F,R=this;return v=new U(v,C),!R.c||!v.s||v.c&&!v.c[0]?new U(NaN):!v.c||R.c&&!R.c[0]?new U(R):(A==9?(F=v.s,v.s=1,P=e(R,v,0,3),v.s=F,P.s*=F):P=e(R,v,0,A),v=R.minus(P.times(v)),!v.c[0]&&A==1&&(v.s=R.s),v)},i.multipliedBy=i.times=function(v,C){var P,F,R,l,g,y,E,I,_,M,N,m,O,Y,$,b=this,j=b.c,z=(v=new U(v,C)).c;if(!j||!z||!j[0]||!z[0])return!b.s||!v.s||j&&!j[0]&&!z||z&&!z[0]&&!j?v.c=v.e=v.s=null:(v.s*=b.s,!j||!z?v.c=v.e=null:(v.c=[0],v.e=0)),v;for(F=Nn(b.e/be)+Nn(v.e/be),v.s*=b.s,E=j.length,M=z.length,E<M&&(O=j,j=z,z=O,R=E,E=M,M=R),R=E+M,O=[];R--;O.push(0));for(Y=di,$=so,R=M;--R>=0;){for(P=0,N=z[R]%$,m=z[R]/$|0,g=E,l=R+g;l>R;)I=j[--g]%$,_=j[g]/$|0,y=m*I+_*N,I=N*I+y%$*$+O[l]+P,P=(I/Y|0)+(y/$|0)+m*_,O[l--]=I%Y;O[l]=P}return P?++F:O.splice(0,1),k(v,O,F)},i.negated=function(){var v=new U(this);return v.s=-v.s||null,v},i.plus=function(v,C){var P,F=this,R=F.s;if(v=new U(v,C),C=v.s,!R||!C)return new U(NaN);if(R!=C)return v.s=-C,F.minus(v);var l=F.e/be,g=v.e/be,y=F.c,E=v.c;if(!l||!g){if(!y||!E)return new U(R/0);if(!y[0]||!E[0])return E[0]?v:new U(y[0]?F:R*0)}if(l=Nn(l),g=Nn(g),y=y.slice(),R=l-g){for(R>0?(g=l,P=E):(R=-R,P=y),P.reverse();R--;P.push(0));P.reverse()}for(R=y.length,C=E.length,R-C<0&&(P=E,E=y,y=P,C=R),R=0;C;)R=(y[--C]=y[C]+E[C]+R)/di|0,y[C]=di===y[C]?0:y[C]%di;return R&&(y=[R].concat(y),++g),k(v,y,g)},i.precision=i.sd=function(v,C){var P,F,R,l=this;if(v!=null&&v!==!!v)return Ht(v,1,mr),C==null?C=u:Ht(C,0,8),H(new U(l),v,C);if(!(P=l.c))return null;if(R=P.length-1,F=R*be+1,R=P[R]){for(;R%10==0;R/=10,F--);for(R=P[0];R>=10;R/=10,F++);}return v&&l.e+1>F&&(F=l.e+1),F},i.shiftedBy=function(v){return Ht(v,-xw,xw),this.times("1e"+v)},i.squareRoot=i.sqrt=function(){var v,C,P,F,R,l=this,g=l.c,y=l.s,E=l.e,I=o+4,_=new U("0.5");if(y!==1||!g||!g[0])return new U(!y||y<0&&(!g||g[0])?NaN:g?l:1/0);if(y=Math.sqrt(+q(l)),y==0||y==1/0?(C=_n(g),(C.length+E)%2==0&&(C+="0"),y=Math.sqrt(+C),E=Nn((E+1)/2)-(E<0||E%2),y==1/0?C="5e"+E:(C=y.toExponential(),C=C.slice(0,C.indexOf("e")+1)+E),P=new U(C)):P=new U(y+""),P.c[0]){for(E=P.e,y=E+I,y<3&&(y=0);;)if(R=P,P=_.times(R.plus(e(l,R,I,1))),_n(R.c).slice(0,y)===(C=_n(P.c)).slice(0,y))if(P.e<E&&--y,C=C.slice(y-3,y+1),C=="9999"||!F&&C=="4999"){if(!F&&(H(R,R.e+o+2,0),R.times(R).eq(l))){P=R;break}I+=4,y+=4,F=1}else{(!+C||!+C.slice(1)&&C.charAt(0)=="5")&&(H(P,P.e+o+2,1),v=!P.times(P).eq(l));break}}return H(P,P.e+o+1,u,v)},i.toExponential=function(v,C){return v!=null&&(Ht(v,0,mr),v++),Q(this,v,C,1)},i.toFixed=function(v,C){return v!=null&&(Ht(v,0,mr),v=v+this.e+1),Q(this,v,C)},i.toFormat=function(v,C,P){var F,R=this;if(P==null)v!=null&&C&&typeof C=="object"?(P=C,C=null):v&&typeof v=="object"?(P=v,v=C=null):P=x;else if(typeof P!="object")throw Error(Qr+"Argument not an object: "+P);if(F=R.toFixed(v,C),R.c){var l,g=F.split("."),y=+P.groupSize,E=+P.secondaryGroupSize,I=P.groupSeparator||"",_=g[0],M=g[1],N=R.s<0,m=N?_.slice(1):_,O=m.length;if(E&&(l=y,y=E,E=l,O-=l),y>0&&O>0){for(l=O%y||y,_=m.substr(0,l);l<O;l+=y)_+=I+m.substr(l,y);E>0&&(_+=I+m.slice(l)),N&&(_="-"+_)}F=M?_+(P.decimalSeparator||"")+((E=+P.fractionGroupSize)?M.replace(new RegExp("\\d{"+E+"}\\B","g"),"$&"+(P.fractionGroupSeparator||"")):M):_}return(P.prefix||"")+F+(P.suffix||"")},i.toFraction=function(v){var C,P,F,R,l,g,y,E,I,_,M,N,m=this,O=m.c;if(v!=null&&(y=new U(v),!y.isInteger()&&(y.c||y.s!==1)||y.lt(s)))throw Error(Qr+"Argument "+(y.isInteger()?"out of range: ":"not an integer: ")+q(y));if(!O)return new U(m);for(C=new U(s),I=P=new U(s),F=E=new U(s),N=_n(O),l=C.e=N.length-m.e-1,C.c[0]=Ow[(g=l%be)<0?be+g:g],v=!v||y.comparedTo(C)>0?l>0?C:I:y,g=d,d=1/0,y=new U(N),E.c[0]=0;_=e(y,C,0,1),R=P.plus(_.times(F)),R.comparedTo(v)!=1;)P=F,F=R,I=E.plus(_.times(R=I)),E=R,C=y.minus(_.times(R=C)),y=R;return R=e(v.minus(P),F,0,1),E=E.plus(R.times(I)),P=P.plus(R.times(F)),E.s=I.s=m.s,l=l*2,M=e(I,F,l,u).minus(m).abs().comparedTo(e(E,P,l,u).minus(m).abs())<1?[I,F]:[E,P],d=g,M},i.toNumber=function(){return+q(this)},i.toPrecision=function(v,C){return v!=null&&Ht(v,1,mr),Q(this,v,C,2)},i.toString=function(v){var C,P=this,F=P.s,R=P.e;return R===null?F?(C="Infinity",F<0&&(C="-"+C)):C="NaN":(v==null?C=R<=a||R>=c?Ud(_n(P.c),R):Os(_n(P.c),R,"0"):v===10&&V?(P=H(new U(P),o+R+1,u),C=Os(_n(P.c),P.e,"0")):(Ht(v,2,B.length,"Base"),C=r(Os(_n(P.c),R,"0"),10,v,F,!0)),F<0&&P.c[0]&&(C="-"+C)),C},i.valueOf=i.toJSON=function(){return q(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&U.set(t),U}function Nn(t){var e=t|0;return t>0||t===e?e:e-1}function _n(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=be-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Ia(t,e){var r,n,i=t.c,s=e.c,o=t.s,u=e.s,a=t.e,c=e.e;if(!o||!u)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-u:o;if(o!=u)return o;if(r=o<0,n=a==c,!i||!s)return n?0:!i^r?1:-1;if(!n)return a>c^r?1:-1;for(u=(a=i.length)<(c=s.length)?a:c,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return a==c?0:a>c^r?1:-1}function Ht(t,e,r,n){if(t<e||t>r||t!==Cn(t))throw Error(Qr+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Fd(t){var e=t.c.length-1;return Nn(t.e/be)==e&&t.c[e]%2!=0}function Ud(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Os(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var uH,Nw,Cn,Qr,L3,di,be,xw,Ow,so,mr,U3,Ou,rr=fe(()=>{h();uH=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Nw=Math.ceil,Cn=Math.floor,Qr="[BigNumber Error] ",L3=Qr+"Number primitive has more than 15 significant digits: ",di=1e14,be=14,xw=9007199254740991,Ow=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],so=1e7,mr=1e9;U3=F3(),Ou=U3});var Ie=D(ce=>{"use strict";h();Object.defineProperty(ce,"__esModule",{value:!0});ce.ErrParseTransactionOutcome=ce.ErrInvalidInnerTransaction=ce.ErrBadUsage=ce.ErrInvalidTokenIdentifier=ce.ErrIsCompletedFieldIsMissingOnTransaction=ce.ErrGasLimitShouldBe0ForInnerTransaction=ce.ErrInvalidRelayedV2BuilderArguments=ce.ErrInvalidRelayedV1BuilderArguments=ce.ErrNotImplemented=ce.ErrContractInteraction=ce.ErrCodec=ce.ErrCannotParseTransactionOutcome=ce.ErrCannotParseContractResults=ce.ErrMissingFieldOnEnum=ce.ErrMissingFieldOnStruct=ce.ErrTypingSystem=ce.ErrMock=ce.ErrContractHasNoAddress=ce.ErrContract=ce.ErrExpectedTransactionEventsNotFound=ce.ErrExpectedTransactionStatusNotReached=ce.ErrTransactionWatcherTimeout=ce.ErrAsyncTimerAborted=ce.ErrAsyncTimerAlreadyRunning=ce.ErrInvalidFunctionName=ce.ErrSignatureCannotCreate=ce.ErrTransactionOptionsInvalid=ce.ErrTransactionVersionInvalid=ce.ErrNonceInvalid=ce.ErrNotEnoughGas=ce.ErrAddressEmpty=ce.ErrAddressBadHrp=ce.ErrAddressCannotCreate=ce.ErrUnexpectedCondition=ce.ErrInvariantFailed=ce.ErrBadType=ce.ErrUnsupportedOperation=ce.ErrInvalidArgument=ce.Err=void 0;var Ce=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}summary(){let e=[];e.push({name:this.name,message:this.message});let r=this.inner;for(;r;)e.push({name:r.name,message:r.message}),r=r.inner;return e}};ce.Err=Ce;var Dw=class extends Ce{constructor(e,r){super(`Invalid argument: ${e}`,r)}};ce.ErrInvalidArgument=Dw;var Pw=class extends Ce{constructor(e,r="not specified"){super(`Operation "${e}" not supported. Reason: ${r}`)}};ce.ErrUnsupportedOperation=Pw;var Rw=class extends Ce{constructor(e,r,n){super(`Bad type of "${e}": ${n}. Expected type: ${r}`)}};ce.ErrBadType=Rw;var Bw=class extends Ce{constructor(e){super(`Invariant failed: [${e}]`)}};ce.ErrInvariantFailed=Bw;var Mw=class extends Ce{constructor(e){super(`Unexpected condition: [${e}]`)}};ce.ErrUnexpectedCondition=Mw;var Lw=class extends Ce{constructor(e,r){let n=`Cannot create address from: ${e}`;super(n,r)}};ce.ErrAddressCannotCreate=Lw;var Fw=class extends Ce{constructor(e,r){super(`Wrong address HRP. Expected: ${e}, got ${r}`)}};ce.ErrAddressBadHrp=Fw;var Uw=class extends Ce{constructor(){super("Address is empty")}};ce.ErrAddressEmpty=Uw;var qw=class extends Ce{constructor(e){super(`Not enough gas provided: ${e}`)}};ce.ErrNotEnoughGas=qw;var Vw=class extends Ce{constructor(e){super(`Invalid nonce: ${e}`)}};ce.ErrNonceInvalid=Vw;var kw=class extends Ce{constructor(e){super(`Invalid transaction version: ${e}`)}};ce.ErrTransactionVersionInvalid=kw;var Hw=class extends Ce{constructor(e){super(`Invalid transaction options: ${e}`)}};ce.ErrTransactionOptionsInvalid=Hw;var Gw=class extends Ce{constructor(e,r){let n=`Cannot create signature from: ${e}`;super(n,r)}};ce.ErrSignatureCannotCreate=Gw;var jw=class extends Ce{constructor(){super("Invalid function name")}};ce.ErrInvalidFunctionName=jw;var zw=class extends Ce{constructor(){super("Async timer already running")}};ce.ErrAsyncTimerAlreadyRunning=zw;var Qw=class extends Ce{constructor(){super("Async timer aborted")}};ce.ErrAsyncTimerAborted=Qw;var Kw=class extends Ce{constructor(){super("TransactionWatcher has timed out")}};ce.ErrTransactionWatcherTimeout=Kw;var Ww=class extends Ce{constructor(){super("Expected transaction status not reached")}};ce.ErrExpectedTransactionStatusNotReached=Ww;var $w=class extends Ce{constructor(){super("Expected transaction events not found")}};ce.ErrExpectedTransactionEventsNotFound=$w;var qd=class extends Ce{constructor(e){super(e)}};ce.ErrContract=qd;var Yw=class extends qd{constructor(){super(`
The smart contract has no address set. Make sure you provide the address in the constructor, or call setAddress() appropriately.
If you need to recompute the address of the contract, make use of SmartContract.computeAddress() (static method). 
`)}};ce.ErrContractHasNoAddress=Yw;var Jw=class extends Ce{constructor(e){super(e)}};ce.ErrMock=Jw;var Xw=class extends Ce{constructor(e){super(e)}};ce.ErrTypingSystem=Xw;var Zw=class extends Ce{constructor(e,r){super(`field ${e} does not exist on struct ${r}`)}};ce.ErrMissingFieldOnStruct=Zw;var ev=class extends Ce{constructor(e,r){super(`field ${e} does not exist on enum ${r}`)}};ce.ErrMissingFieldOnEnum=ev;var tv=class extends Ce{constructor(e){super(`cannot parse contract results: ${e}`)}};ce.ErrCannotParseContractResults=tv;var rv=class extends Ce{constructor(e,r){super(`cannot parse outcome of transaction ${e}: ${r}`)}};ce.ErrCannotParseTransactionOutcome=rv;var nv=class extends Ce{constructor(e){super(e)}};ce.ErrCodec=nv;var iv=class extends Ce{constructor(e){super(e)}};ce.ErrContractInteraction=iv;var sv=class extends Ce{constructor(){super("Method not yet implemented")}};ce.ErrNotImplemented=sv;var ov=class extends Ce{constructor(){super("invalid arguments for relayed v1 builder")}};ce.ErrInvalidRelayedV1BuilderArguments=ov;var av=class extends Ce{constructor(){super("invalid arguments for relayed v2 builder")}};ce.ErrInvalidRelayedV2BuilderArguments=av;var uv=class extends Ce{constructor(){super("gas limit must be 0 for the inner transaction for relayed v2")}};ce.ErrGasLimitShouldBe0ForInnerTransaction=uv;var cv=class extends Ce{constructor(){super("The transaction watcher requires the `isCompleted` property to be defined on the transaction object. Perhaps you've used the sdk-network-provider's `ProxyNetworkProvider.getTransaction()` and in that case you should also pass `withProcessStatus=true`.")}};ce.ErrIsCompletedFieldIsMissingOnTransaction=cv;var lv=class extends Ce{constructor(e){super(e)}};ce.ErrInvalidTokenIdentifier=lv;var fv=class extends Ce{constructor(e){super(e)}};ce.ErrBadUsage=fv;var hv=class extends Ce{constructor(e){super(e)}};ce.ErrInvalidInnerTransaction=hv;var dv=class extends Ce{constructor(e){super(e)}};ce.ErrParseTransactionOutcome=dv});var _a=D(xn=>{"use strict";h();var cH=xn&&xn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xn,"__esModule",{value:!0});xn.TokenPayment=xn.TokenComputer=xn.TokenTransfer=xn.Token=void 0;var Ta=cH((rr(),_e(fr))),Du=Ie(),q3="EGLD",V3=18;Ta.default.set({ROUNDING_MODE:1});var Vd=class{constructor(e){this.identifier=e.identifier,this.nonce=e.nonce||0n}};xn.Token=Vd;var kd=class t{constructor(e){if(this.isLegacyTokenTransferOptions(e)){let r=new Ta.default(e.amountAsBigInteger);if(!r.isInteger()||r.isNegative())throw new Du.ErrInvalidArgument(`bad amountAsBigInteger: ${e.amountAsBigInteger}`);this.tokenIdentifier=e.tokenIdentifier,this.nonce=e.nonce,this.amountAsBigInteger=r,this.numDecimals=e.numDecimals||0,this.token=new Vd({identifier:e.tokenIdentifier,nonce:BigInt(e.nonce)}),this.amount=BigInt(this.amountAsBigInteger.toFixed(0))}else this.token=e.token,this.amount=e.amount,this.tokenIdentifier=e.token.identifier,this.nonce=Number(e.token.nonce),this.amountAsBigInteger=new Ta.default(this.amount.toString()),this.numDecimals=0}isLegacyTokenTransferOptions(e){return e.tokenIdentifier!==void 0}static egldFromAmount(e){let r=new Ta.default(e).shiftedBy(V3).decimalPlaces(0);return this.egldFromBigInteger(r)}static egldFromBigInteger(e){return new t({tokenIdentifier:q3,nonce:0,amountAsBigInteger:e,numDecimals:V3})}static fungibleFromAmount(e,r,n){let i=new Ta.default(r).shiftedBy(n).decimalPlaces(0);return this.fungibleFromBigInteger(e,i,n)}static fungibleFromBigInteger(e,r,n=0){return new t({tokenIdentifier:e,nonce:0,amountAsBigInteger:r,numDecimals:n})}static nonFungible(e,r){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:1,numDecimals:0})}static semiFungible(e,r,n){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:0})}static metaEsdtFromAmount(e,r,n,i){let s=new Ta.default(n).shiftedBy(i).decimalPlaces(0);return this.metaEsdtFromBigInteger(e,r,s,i)}static metaEsdtFromBigInteger(e,r,n,i=0){return new t({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}toString(){return this.amount.toString()}valueOf(){return new Ta.default(this.amount.toString())}toPrettyString(){return`${this.toAmount()} ${this.tokenIdentifier}`}toAmount(){return this.amountAsBigInteger.shiftedBy(-this.numDecimals).toFixed(this.numDecimals)}isEgld(){return this.token.identifier==q3}isFungible(){return this.token.nonce==0n}};xn.TokenTransfer=kd;var gv=class{constructor(){}isFungible(e){return e.nonce===0n}extractNonceFromExtendedIdentifier(e){let r=e.split("-");if(this.checkIfExtendedIdentifierWasProvided(r),this.checkLengthOfRandomSequence(r[1]),r.length==2)return 0;let n=p.Buffer.from(r[2],"hex");return lH(n)}extractIdentifierFromExtendedIdentifier(e){let r=e.split("-");return this.checkIfExtendedIdentifierWasProvided(r),this.ensureTokenTickerValidity(r[0]),this.checkLengthOfRandomSequence(r[1]),r[0]+"-"+r[1]}checkIfExtendedIdentifierWasProvided(e){if(e.length<2||e.length>3)throw new Du.ErrInvalidTokenIdentifier("Invalid extended token identifier provided")}checkLengthOfRandomSequence(e){if(e.length!==6)throw new Du.ErrInvalidTokenIdentifier("The identifier is not valid. The random sequence does not have the right length")}ensureTokenTickerValidity(e){if(e.length<3||e.length>10)throw new Du.ErrInvalidTokenIdentifier("The token ticker should be between 3 and 10 characters");if(!e.match(/^[a-zA-Z0-9]+$/))throw new Du.ErrInvalidTokenIdentifier("The token ticker should only contain alphanumeric characters");if(e!=e.toUpperCase())throw new Du.ErrInvalidTokenIdentifier("The token ticker should be upper case")}};xn.TokenComputer=gv;function lH(t){return t.readUIntBE(0,t.length)}var pv=class extends kd{constructor(e,r,n,i){super({tokenIdentifier:e,nonce:r,amountAsBigInteger:n,numDecimals:i})}};xn.TokenPayment=pv});var hr=D(Ae=>{"use strict";h();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.UNKNOWN_SIGNER=Ae.SDK_JS_SIGNER=Ae.METACHAIN_ID=Ae.WasmVirtualMachine=Ae.CURRENT_NUMBER_OF_SHARDS_WITHOUT_META=Ae.BECH32_ADDRESS_LENGTH=Ae.HEX_TRANSACTION_HASH_LENGTH=Ae.MESSAGE_PREFIX=Ae.DEFAULT_MESSAGE_VERSION=Ae.ESDT_CONTRACT_ADDRESS=Ae.DEFAULT_HRP=Ae.DELEGATION_MANAGER_SC_ADDRESS=Ae.CONTRACT_DEPLOY_ADDRESS=Ae.VM_TYPE_WASM_VM=Ae.ARGUMENTS_SEPARATOR=Ae.ESDT_TRANSFER_VALUE=Ae.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME=Ae.ESDTNFT_TRANSFER_FUNCTION_NAME=Ae.ESDT_TRANSFER_FUNCTION_NAME=Ae.ESDT_TRANSFER_GAS_LIMIT=Ae.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS=Ae.TRANSACTION_VERSION_DEFAULT=Ae.TRANSACTION_OPTIONS_TX_GUARDED=Ae.TRANSACTION_OPTIONS_TX_HASH_SIGN=Ae.TRANSACTION_OPTIONS_DEFAULT=Ae.TRANSACTION_MIN_GAS_PRICE=void 0;Ae.TRANSACTION_MIN_GAS_PRICE=1e9;Ae.TRANSACTION_OPTIONS_DEFAULT=0;Ae.TRANSACTION_OPTIONS_TX_HASH_SIGN=1;Ae.TRANSACTION_OPTIONS_TX_GUARDED=2;Ae.TRANSACTION_VERSION_DEFAULT=2;Ae.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS=2;Ae.ESDT_TRANSFER_GAS_LIMIT=5e5;Ae.ESDT_TRANSFER_FUNCTION_NAME="ESDTTransfer";Ae.ESDTNFT_TRANSFER_FUNCTION_NAME="ESDTNFTTransfer";Ae.MULTI_ESDTNFT_TRANSFER_FUNCTION_NAME="MultiESDTNFTTransfer";Ae.ESDT_TRANSFER_VALUE="0";Ae.ARGUMENTS_SEPARATOR="@";Ae.VM_TYPE_WASM_VM=new Uint8Array([5,0]);Ae.CONTRACT_DEPLOY_ADDRESS="erd1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq6gq4hu";Ae.DELEGATION_MANAGER_SC_ADDRESS="erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqylllslmq6y6";Ae.DEFAULT_HRP="erd";Ae.ESDT_CONTRACT_ADDRESS="erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u";Ae.DEFAULT_MESSAGE_VERSION=1;Ae.MESSAGE_PREFIX=`Elrond Signed Message:
`;Ae.HEX_TRANSACTION_HASH_LENGTH=64;Ae.BECH32_ADDRESS_LENGTH=62;Ae.CURRENT_NUMBER_OF_SHARDS_WITHOUT_META=3;Ae.WasmVirtualMachine="0500";Ae.METACHAIN_ID=4294967295;Ae.SDK_JS_SIGNER="sdk-js";Ae.UNKNOWN_SIGNER="unknown"});var oo=D(Na=>{"use strict";h();Object.defineProperty(Na,"__esModule",{value:!0});Na.Logger=Na.LogLevel=void 0;var Ca;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.None=5]="None"})(Ca=Na.LogLevel||(Na.LogLevel={}));var Hd=class t{static setLevel(e){t.logLevel=e}static trace(e,...r){t.logLevel>=Ca.Debug||console.debug(e,r)}static debug(e,...r){t.logLevel>=Ca.Debug||console.debug(e,r)}static info(e,...r){t.logLevel>=Ca.Info||console.log(e,r)}static warn(e,...r){t.logLevel>=Ca.Warn||console.warn(e,r)}static error(e,...r){t.logLevel>=Ca.Error||console.error(e,r)}};Na.Logger=Hd;Hd.logLevel=Ca.Debug});var $l=D(On=>{"use strict";h();var fH=On&&On.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hH=On&&On.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dH=On&&On.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fH(e,t,r);return hH(e,t),e};Object.defineProperty(On,"__esModule",{value:!0});On.TransactionOptions=On.TransactionVersion=void 0;var gi=hr(),k3=dH(Ie()),mv=class t{constructor(e){if(e=Number(e),e<1)throw new k3.ErrTransactionVersionInvalid(e);this.value=e}static withDefaultVersion(){return new t(gi.TRANSACTION_VERSION_DEFAULT)}static withTxOptions(){return new t(gi.TRANSACTION_VERSION_DEFAULT)}valueOf(){return this.value}};On.TransactionVersion=mv;var yv=class t{constructor(e){if(e=Number(e),e<0)throw new k3.ErrTransactionOptionsInvalid(e);this.value=e}static withDefaultOptions(){return new t(gi.TRANSACTION_OPTIONS_DEFAULT)}static withOptions(e){let r=0;return e.hashSign&&(r|=gi.TRANSACTION_OPTIONS_TX_HASH_SIGN),e.guarded&&(r|=gi.TRANSACTION_OPTIONS_TX_GUARDED),new t(r)}isWithHashSign(){return(this.value&gi.TRANSACTION_OPTIONS_TX_HASH_SIGN)==gi.TRANSACTION_OPTIONS_TX_HASH_SIGN}isWithGuardian(){return(this.value&gi.TRANSACTION_OPTIONS_TX_GUARDED)==gi.TRANSACTION_OPTIONS_TX_GUARDED}setWithHashSign(){this.value|=gi.TRANSACTION_OPTIONS_TX_HASH_SIGN}setWithGuardian(){this.value|=gi.TRANSACTION_OPTIONS_TX_GUARDED}valueOf(){return this.value}};On.TransactionOptions=yv});var vv=D((Epe,j3)=>{"use strict";h();var jd="qpzry9x8gf2tvdw0s3jn54khce6mua7l",wv={};for(Yl=0;Yl<jd.length;Yl++){if(Gd=jd.charAt(Yl),wv[Gd]!==void 0)throw new TypeError(Gd+" is ambiguous");wv[Gd]=Yl}var Gd,Yl;function Pu(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function H3(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Pu(e)^n>>5}for(e=Pu(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Pu(e)^i&31}return e}function gH(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=H3(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=Pu(n)^o,i+=jd.charAt(o)}for(s=0;s<6;++s)n=Pu(n);for(n^=1,s=0;s<6;++s){var u=n>>(5-s)*5&31;i+=jd.charAt(u)}return i}function G3(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var u=H3(s);if(typeof u=="string")return u;for(var a=[],c=0;c<o.length;++c){var f=o.charAt(c),d=wv[f];if(d===void 0)return"Unknown character "+f;u=Pu(u)^d,!(c+6>=o.length)&&a.push(d)}return u!==1?"Invalid checksum for "+t:{prefix:s,words:a}}function pH(){var t=G3.apply(null,arguments);if(typeof t=="object")return t}function mH(t){var e=G3.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function zd(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,u=[],a=0;a<t.length;++a)for(i=i<<e|t[a],s+=e;s>=r;)s-=r,u.push(i>>s&o);if(n)s>0&&u.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return u}function yH(t){var e=zd(t,8,5,!0);if(Array.isArray(e))return e}function wH(t){var e=zd(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function vH(t){var e=zd(t,5,8,!1);if(Array.isArray(e))return e}function AH(t){var e=zd(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}j3.exports={decodeUnsafe:pH,decode:mH,encode:gH,toWordsUnsafe:yH,toWords:wH,fromWordsUnsafe:vH,fromWords:AH}});var Ru=D(Nt=>{"use strict";h();var EH=Nt&&Nt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bH=Nt&&Nt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SH=Nt&&Nt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EH(e,t,r);return bH(e,t),e},IH=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.addressToHex=Nt.bigIntToHex=Nt.byteArrayToHex=Nt.boolToHex=Nt.utf8ToHex=Nt.zeroPadStringIfOddLength=Nt.isPaddedHex=Nt.numberToPaddedHex=void 0;var TH=IH((rr(),_e(fr))),_H=Ve(),CH=SH(Bu());function NH(t){let e;typeof t=="bigint"||typeof t=="number"?e=t:e=new TH.default(t);let r=e.toString(16);return Qd(r)}Nt.numberToPaddedHex=NH;function xH(t){t=t||"";let e=p.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}Nt.isPaddedHex=xH;function Qd(t){return t=t||"",t.length%2==1?"0"+t:t}Nt.zeroPadStringIfOddLength=Qd;function z3(t){let e=p.Buffer.from(t).toString("hex");return Qd(e)}Nt.utf8ToHex=z3;function OH(t){return z3(t.toString())}Nt.boolToHex=OH;function DH(t){let e=p.Buffer.from(t).toString("hex");return Qd(e)}Nt.byteArrayToHex=DH;function PH(t){return t==0?"":CH.getHexMagnitudeOfBigInt(t)}Nt.bigIntToHex=PH;function RH(t){return _H.Address.fromBech32(t.toString()).pubkey().toString("hex")}Nt.addressToHex=RH});var Bu=D(nr=>{"use strict";h();var BH=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});nr.prependByteToBuffer=nr.flipBufferBitsInPlace=nr.getHexMagnitudeOfBigInt=nr.bigIntToBuffer=nr.bufferToBigInt=nr.cloneBuffer=nr.isMsbZero=nr.isMsbOne=void 0;var Av=BH((rr(),_e(fr))),MH=Ru();function Q3(t,e=0){return t[e]>>7==1}nr.isMsbOne=Q3;function LH(t,e=0){return!Q3(t,e)}nr.isMsbZero=LH;function FH(t){let e=p.Buffer.alloc(t.length);return t.copy(e),e}nr.cloneBuffer=FH;function UH(t){let e=t.toString("hex");return new Av.default(`0x${e}`,16)}nr.bufferToBigInt=UH;function qH(t){let e=K3(t);return p.Buffer.from(e,"hex")}nr.bigIntToBuffer=qH;function K3(t){return t=new Av.default(t),t?(t.isNegative()&&(t=t.multipliedBy(new Av.default(-1))),MH.numberToPaddedHex(t)):""}nr.getHexMagnitudeOfBigInt=K3;function VH(t){for(let e=0;e<t.length;e++)t[e]=~t[e]}nr.flipBufferBitsInPlace=VH;function kH(t,e){return p.Buffer.concat([p.Buffer.from([e]),t])}nr.prependByteToBuffer=kH});var Kd=D(Lt=>{"use strict";h();var HH=Lt&&Lt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GH=Lt&&Lt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),W3=Lt&&Lt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HH(e,t,r);return GH(e,t),e},jH=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.bufferToHex=Lt.addressToHex=Lt.bigIntToHex=Lt.utf8ToHex=Lt.bigIntToBuffer=Lt.bufferToBigInt=Lt.stringToBuffer=void 0;var zH=jH((rr(),_e(fr))),$3=W3(Bu()),QH=W3(Ru());function KH(t){return p.Buffer.from(t)}Lt.stringToBuffer=KH;function WH(t){return t.length==0?new zH.default(0):$3.bufferToBigInt(t)}Lt.bufferToBigInt=WH;function $H(t){return t==0?p.Buffer.from([]):$3.bigIntToBuffer(t)}Lt.bigIntToBuffer=$H;var Ev=Ru();Object.defineProperty(Lt,"utf8ToHex",{enumerable:!0,get:function(){return Ev.utf8ToHex}});Object.defineProperty(Lt,"bigIntToHex",{enumerable:!0,get:function(){return Ev.bigIntToHex}});Object.defineProperty(Lt,"addressToHex",{enumerable:!0,get:function(){return Ev.addressToHex}});function YH(t){let e=t.toString("hex");return QH.zeroPadStringIfOddLength(e)}Lt.bufferToHex=YH});var Ds=D((xpe,bv)=>{"use strict";h();var Mu=typeof Reflect=="object"?Reflect:null,Y3=Mu&&typeof Mu.apply=="function"?Mu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Wd;Mu&&typeof Mu.ownKeys=="function"?Wd=Mu.ownKeys:Object.getOwnPropertySymbols?Wd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wd=function(e){return Object.getOwnPropertyNames(e)};function JH(t){console&&console.warn&&console.warn(t)}var X3=Number.isNaN||function(e){return e!==e};function _t(){_t.init.call(this)}bv.exports=_t;bv.exports.once=tG;_t.EventEmitter=_t;_t.prototype._events=void 0;_t.prototype._eventsCount=0;_t.prototype._maxListeners=void 0;var J3=10;function $d(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return J3},set:function(t){if(typeof t!="number"||t<0||X3(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");J3=t}});_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X3(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Z3(t){return t._maxListeners===void 0?_t.defaultMaxListeners:t._maxListeners}_t.prototype.getMaxListeners=function(){return Z3(this)};_t.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")Y3(a,this,r);else for(var c=a.length,f=iN(a,c),n=0;n<c;++n)Y3(f[n],this,r);return!0};function eN(t,e,r,n){var i,s,o;if($d(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Z3(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,JH(u)}return t}_t.prototype.addListener=function(e,r){return eN(this,e,r,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(e,r){return eN(this,e,r,!0)};function XH(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function tN(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=XH.bind(n);return i.listener=r,n.wrapFn=i,i}_t.prototype.once=function(e,r){return $d(r),this.on(e,tN(this,e,r)),this};_t.prototype.prependOnceListener=function(e,r){return $d(r),this.prependListener(e,tN(this,e,r)),this};_t.prototype.removeListener=function(e,r){var n,i,s,o,u;if($d(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){u=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():ZH(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function rN(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?eG(i):iN(i,i.length)}_t.prototype.listeners=function(e){return rN(this,e,!0)};_t.prototype.rawListeners=function(e){return rN(this,e,!1)};_t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nN.call(t,e)};_t.prototype.listenerCount=nN;function nN(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Wd(this._events):[]};function iN(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function ZH(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function eG(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function tG(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}sN(t,e,s,{once:!0}),e!=="error"&&rG(t,i,{once:!0})})}function rG(t,e,r){typeof t.on=="function"&&sN(t,"error",e,r)}function sN(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Sv=D((Dpe,oN)=>{h();oN.exports=Ds().EventEmitter});var Iv=D(()=>{h()});var hN=D((Lpe,fN)=>{"use strict";h();function aN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(r),!0).forEach(function(n){nG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nG(t,e,r){return e=lN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lN(n.key),n)}}function sG(t,e,r){return e&&cN(t.prototype,e),r&&cN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lN(t){var e=oG(t,"string");return typeof e=="symbol"?e:String(e)}function oG(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aG=io(),Yd=aG.Buffer,uG=Iv(),Tv=uG.inspect,cG=Tv&&Tv.custom||"inspect";function lG(t,e,r){Yd.prototype.copy.call(t,e,r)}fN.exports=function(){function t(){iG(this,t),this.head=null,this.tail=null,this.length=0}return sG(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Yd.alloc(0);for(var n=Yd.allocUnsafe(r>>>0),i=this.head,s=0;i;)lG(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=Yd.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(u));break}++s}return this.length-=s,n}},{key:cG,value:function(r,n){return Tv(this,uN(uN({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var Cv=D((Upe,gN)=>{"use strict";h();function fG(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,S.default.nextTick(_v,this,t)):S.default.nextTick(_v,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?S.default.nextTick(Jd,r):(r._writableState.errorEmitted=!0,S.default.nextTick(dN,r,s)):S.default.nextTick(dN,r,s):e?(S.default.nextTick(Jd,r),e(s)):S.default.nextTick(Jd,r)}),this)}function dN(t,e){_v(t,e),Jd(t)}function Jd(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function hG(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function _v(t,e){t.emit("error",e)}function dG(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}gN.exports={destroy:fG,undestroy:hG,errorOrDestroy:dG}});var xa=D((Vpe,yN)=>{"use strict";h();function gG(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var mN={};function Dn(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var i=function(s){gG(o,s);function o(u,a,c){return s.call(this,n(u,a,c))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,mN[t]=i}function pN(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function pG(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function mG(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function yG(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Dn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Dn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&pG(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(mG(t," argument"))i="The ".concat(t," ").concat(n," ").concat(pN(e,"type"));else{var s=yG(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(pN(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Dn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Dn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Dn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Dn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Dn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Dn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Dn("ERR_STREAM_WRITE_AFTER_END","write after end");Dn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Dn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Dn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");yN.exports.codes=mN});var Nv=D((Hpe,wN)=>{"use strict";h();var wG=xa().codes.ERR_INVALID_OPT_VALUE;function vG(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function AG(t,e,r,n){var i=vG(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new wG(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}wN.exports={getHighWaterMark:AG}});var Lu=D((jpe,xv)=>{h();typeof Object.create=="function"?xv.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xv.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var AN=D((Qpe,vN)=>{h();vN.exports=EG;function EG(t,e){if(Ov("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Ov("throwDeprecation"))throw new Error(e);Ov("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Ov(t){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var Rv=D((Wpe,_N)=>{"use strict";h();_N.exports=Gt;function bN(t){var e=this;this.next=null,this.entry=null,this.finish=function(){WG(e,t)}}var Fu;Gt.WritableState=Xl;var bG={deprecate:AN()},SN=Sv(),Zd=io().Buffer,SG=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function IG(t){return Zd.from(t)}function TG(t){return Zd.isBuffer(t)||t instanceof SG}var Pv=Cv(),_G=Nv(),CG=_G.getHighWaterMark,ao=xa().codes,NG=ao.ERR_INVALID_ARG_TYPE,xG=ao.ERR_METHOD_NOT_IMPLEMENTED,OG=ao.ERR_MULTIPLE_CALLBACK,DG=ao.ERR_STREAM_CANNOT_PIPE,PG=ao.ERR_STREAM_DESTROYED,RG=ao.ERR_STREAM_NULL_VALUES,BG=ao.ERR_STREAM_WRITE_AFTER_END,MG=ao.ERR_UNKNOWN_ENCODING,Uu=Pv.errorOrDestroy;Lu()(Gt,SN);function LG(){}function Xl(t,e,r){Fu=Fu||Oa(),t=t||{},typeof r!="boolean"&&(r=e instanceof Fu),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=CG(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){GG(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new bN(this)}Xl.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Xl.prototype,"buffer",{get:bG.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Xd;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Xd=Function.prototype[Symbol.hasInstance],Object.defineProperty(Gt,Symbol.hasInstance,{value:function(e){return Xd.call(this,e)?!0:this!==Gt?!1:e&&e._writableState instanceof Xl}})):Xd=function(e){return e instanceof this};function Gt(t){Fu=Fu||Oa();var e=this instanceof Fu;if(!e&&!Xd.call(Gt,this))return new Gt(t);this._writableState=new Xl(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),SN.call(this)}Gt.prototype.pipe=function(){Uu(this,new DG)};function FG(t,e){var r=new BG;Uu(t,r),S.default.nextTick(e,r)}function UG(t,e,r,n){var i;return r===null?i=new RG:typeof r!="string"&&!e.objectMode&&(i=new NG("chunk",["string","Buffer"],r)),i?(Uu(t,i),S.default.nextTick(n,i),!1):!0}Gt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&TG(t);return s&&!Zd.isBuffer(t)&&(t=IG(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=LG),n.ending?FG(this,r):(s||UG(this,n,t,r))&&(n.pendingcb++,i=VG(this,n,s,t,e,r)),i};Gt.prototype.cork=function(){this._writableState.corked++};Gt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&IN(this,t))};Gt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new MG(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Gt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function qG(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Zd.from(e,r)),e}Object.defineProperty(Gt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function VG(t,e,r,n,i,s){if(!r){var o=qG(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Dv(t,e,!1,u,n,i,s);return a}function Dv(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new PG("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function kG(t,e,r,n,i){--e.pendingcb,r?(S.default.nextTick(i,n),S.default.nextTick(Jl,t,e),t._writableState.errorEmitted=!0,Uu(t,n)):(i(n),t._writableState.errorEmitted=!0,Uu(t,n),Jl(t,e))}function HG(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function GG(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new OG;if(HG(r),e)kG(t,r,n,e,i);else{var s=TN(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&IN(t,r),n?S.default.nextTick(EN,t,r,s,i):EN(t,r,s,i)}}function EN(t,e,r,n){r||jG(t,e),e.pendingcb--,n(),Jl(t,e)}function jG(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function IN(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)i[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;i.allBuffers=u,Dv(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new bN(e),e.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,c=r.encoding,f=r.callback,d=e.objectMode?1:a.length;if(Dv(t,e,!1,d,a,c,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Gt.prototype._write=function(t,e,r){r(new xG("_write()"))};Gt.prototype._writev=null;Gt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||KG(this,n,r),this};Object.defineProperty(Gt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function TN(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function zG(t,e){t._final(function(r){e.pendingcb--,r&&Uu(t,r),e.prefinished=!0,t.emit("prefinish"),Jl(t,e)})}function QG(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,S.default.nextTick(zG,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Jl(t,e){var r=TN(e);if(r&&(QG(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function KG(t,e,r){e.ending=!0,Jl(t,e),r&&(e.finished?S.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function WG(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Gt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Gt.prototype.destroy=Pv.destroy;Gt.prototype._undestroy=Pv.undestroy;Gt.prototype._destroy=function(t,e){e(t)}});var Oa=D((Ype,NN)=>{"use strict";h();var $G=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};NN.exports=Li;var CN=Lv(),Mv=Rv();Lu()(Li,CN);for(Bv=$G(Mv.prototype),eg=0;eg<Bv.length;eg++)tg=Bv[eg],Li.prototype[tg]||(Li.prototype[tg]=Mv.prototype[tg]);var Bv,tg,eg;function Li(t){if(!(this instanceof Li))return new Li(t);CN.call(this,t),Mv.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",YG)))}Object.defineProperty(Li.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Li.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Li.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function YG(){this._writableState.ended||S.default.nextTick(JG,this)}function JG(t){t.end()}Object.defineProperty(Li.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var DN=D((Fv,ON)=>{h();var rg=io(),Fi=rg.Buffer;function xN(t,e){for(var r in t)e[r]=t[r]}Fi.from&&Fi.alloc&&Fi.allocUnsafe&&Fi.allocUnsafeSlow?ON.exports=rg:(xN(rg,Fv),Fv.Buffer=Da);function Da(t,e,r){return Fi(t,e,r)}Da.prototype=Object.create(Fi.prototype);xN(Fi,Da);Da.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Fi(t,e,r)};Da.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Fi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Da.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Fi(t)};Da.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return rg.SlowBuffer(t)}});var Vv=D(RN=>{"use strict";h();var qv=DN().Buffer,PN=qv.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function XG(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function ZG(t){var e=XG(t);if(typeof e!="string"&&(qv.isEncoding===PN||!PN(t)))throw new Error("Unknown encoding: "+t);return e||t}RN.StringDecoder=Zl;function Zl(t){this.encoding=ZG(t);var e;switch(this.encoding){case"utf16le":this.text=sj,this.end=oj,e=4;break;case"utf8":this.fillLast=rj,e=4;break;case"base64":this.text=aj,this.end=uj,e=3;break;default:this.write=cj,this.end=lj;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=qv.allocUnsafe(e)}Zl.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Zl.prototype.end=ij;Zl.prototype.text=nj;Zl.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Uv(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function ej(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Uv(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Uv(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Uv(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function tj(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function rj(t){var e=this.lastTotal-this.lastNeed,r=tj(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function nj(t,e){var r=ej(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function ij(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function sj(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function oj(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function aj(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function uj(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function cj(t){return t.toString(this.encoding)}function lj(t){return t&&t.length?this.write(t):""}});var ng=D((t0e,LN)=>{"use strict";h();var BN=xa().codes.ERR_STREAM_PREMATURE_CLOSE;function fj(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function hj(){}function dj(t){return t.setHeader&&typeof t.abort=="function"}function MN(t,e,r){if(typeof e=="function")return MN(t,null,e);e||(e={}),r=fj(r||hj);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){i=!1,o=!0,n||r.call(t)},a=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,a=!0,i||r.call(t)},f=function(T){r.call(t,T)},d=function(){var T;if(n&&!a)return(!t._readableState||!t._readableState.ended)&&(T=new BN),r.call(t,T);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(T=new BN),r.call(t,T)},w=function(){t.req.on("finish",u)};return dj(t)?(t.on("complete",u),t.on("abort",d),t.req?w():t.on("request",w)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",u),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",u),t.removeListener("abort",d),t.removeListener("request",w),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",c),t.removeListener("error",f),t.removeListener("close",d)}}LN.exports=MN});var UN=D((n0e,FN)=>{"use strict";h();var ig;function uo(t,e,r){return e=gj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gj(t){var e=pj(t,"string");return typeof e=="symbol"?e:String(e)}function pj(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mj=ng(),co=Symbol("lastResolve"),Pa=Symbol("lastReject"),ef=Symbol("error"),sg=Symbol("ended"),Ra=Symbol("lastPromise"),kv=Symbol("handlePromise"),Ba=Symbol("stream");function lo(t,e){return{value:t,done:e}}function yj(t){var e=t[co];if(e!==null){var r=t[Ba].read();r!==null&&(t[Ra]=null,t[co]=null,t[Pa]=null,e(lo(r,!1)))}}function wj(t){S.default.nextTick(yj,t)}function vj(t,e){return function(r,n){t.then(function(){if(e[sg]){r(lo(void 0,!0));return}e[kv](r,n)},n)}}var Aj=Object.getPrototypeOf(function(){}),Ej=Object.setPrototypeOf((ig={get stream(){return this[Ba]},next:function(){var e=this,r=this[ef];if(r!==null)return Promise.reject(r);if(this[sg])return Promise.resolve(lo(void 0,!0));if(this[Ba].destroyed)return new Promise(function(o,u){S.default.nextTick(function(){e[ef]?u(e[ef]):o(lo(void 0,!0))})});var n=this[Ra],i;if(n)i=new Promise(vj(n,this));else{var s=this[Ba].read();if(s!==null)return Promise.resolve(lo(s,!1));i=new Promise(this[kv])}return this[Ra]=i,i}},uo(ig,Symbol.asyncIterator,function(){return this}),uo(ig,"return",function(){var e=this;return new Promise(function(r,n){e[Ba].destroy(null,function(i){if(i){n(i);return}r(lo(void 0,!0))})})}),ig),Aj),bj=function(e){var r,n=Object.create(Ej,(r={},uo(r,Ba,{value:e,writable:!0}),uo(r,co,{value:null,writable:!0}),uo(r,Pa,{value:null,writable:!0}),uo(r,ef,{value:null,writable:!0}),uo(r,sg,{value:e._readableState.endEmitted,writable:!0}),uo(r,kv,{value:function(s,o){var u=n[Ba].read();u?(n[Ra]=null,n[co]=null,n[Pa]=null,s(lo(u,!1))):(n[co]=s,n[Pa]=o)},writable:!0}),r));return n[Ra]=null,mj(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Pa];s!==null&&(n[Ra]=null,n[co]=null,n[Pa]=null,s(i)),n[ef]=i;return}var o=n[co];o!==null&&(n[Ra]=null,n[co]=null,n[Pa]=null,o(lo(void 0,!0))),n[sg]=!0}),e.on("readable",wj.bind(null,n)),n};FN.exports=bj});var VN=D((s0e,qN)=>{h();qN.exports=function(){throw new Error("Readable.from is not available in the browser")}});var Lv=D((u0e,YN)=>{"use strict";h();YN.exports=Fe;var qu;Fe.ReadableState=jN;var a0e=Ds().EventEmitter,GN=function(e,r){return e.listeners(r).length},rf=Sv(),og=io().Buffer,Sj=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ij(t){return og.from(t)}function Tj(t){return og.isBuffer(t)||t instanceof Sj}var Hv=Iv(),Ne;Hv&&Hv.debuglog?Ne=Hv.debuglog("stream"):Ne=function(){};var _j=hN(),$v=Cv(),Cj=Nv(),Nj=Cj.getHighWaterMark,ag=xa().codes,xj=ag.ERR_INVALID_ARG_TYPE,Oj=ag.ERR_STREAM_PUSH_AFTER_EOF,Dj=ag.ERR_METHOD_NOT_IMPLEMENTED,Pj=ag.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Vu,Gv,jv;Lu()(Fe,rf);var tf=$v.errorOrDestroy,zv=["error","close","destroy","pause","resume"];function Rj(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function jN(t,e,r){qu=qu||Oa(),t=t||{},typeof r!="boolean"&&(r=e instanceof qu),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Nj(this,t,"readableHighWaterMark",r),this.buffer=new _j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Vu||(Vu=Vv().StringDecoder),this.decoder=new Vu(t.encoding),this.encoding=t.encoding)}function Fe(t){if(qu=qu||Oa(),!(this instanceof Fe))return new Fe(t);var e=this instanceof qu;this._readableState=new jN(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),rf.call(this)}Object.defineProperty(Fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Fe.prototype.destroy=$v.destroy;Fe.prototype._undestroy=$v.undestroy;Fe.prototype._destroy=function(t,e){e(t)};Fe.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=og.from(t,e),e=""),n=!0),zN(this,t,e,!1,n)};Fe.prototype.unshift=function(t){return zN(this,t,null,!0,!1)};function zN(t,e,r,n,i){Ne("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,Lj(t,s);else{var o;if(i||(o=Bj(s,e)),o)tf(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==og.prototype&&(e=Ij(e)),n)s.endEmitted?tf(t,new Pj):Qv(t,s,e,!0);else if(s.ended)tf(t,new Oj);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Qv(t,s,e,!1):Wv(t,s)):Qv(t,s,e,!1)}else n||(s.reading=!1,Wv(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Qv(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ug(t)),Wv(t,e)}function Bj(t,e){var r;return!Tj(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new xj("chunk",["string","Buffer","Uint8Array"],e)),r}Fe.prototype.isPaused=function(){return this._readableState.flowing===!1};Fe.prototype.setEncoding=function(t){Vu||(Vu=Vv().StringDecoder);var e=new Vu(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var kN=1073741824;function Mj(t){return t>=kN?t=kN:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function HN(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Mj(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Fe.prototype.read=function(t){Ne("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ne("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Kv(this):ug(this),null;if(t=HN(t,e),t===0&&e.ended)return e.length===0&&Kv(this),null;var n=e.needReadable;Ne("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ne("length less than watermark",n)),e.ended||e.reading?(n=!1,Ne("reading or ended",n)):n&&(Ne("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=HN(r,e)));var i;return t>0?i=WN(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Kv(this)),i!==null&&this.emit("data",i),i};function Lj(t,e){if(Ne("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?ug(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,QN(t)))}}function ug(t){var e=t._readableState;Ne("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ne("emitReadable",e.flowing),e.emittedReadable=!0,S.default.nextTick(QN,t))}function QN(t){var e=t._readableState;Ne("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Yv(t)}function Wv(t,e){e.readingMore||(e.readingMore=!0,S.default.nextTick(Fj,t,e))}function Fj(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Ne("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Fe.prototype._read=function(t){tf(this,new Dj("_read()"))};Fe.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ne("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==S.default.stdout&&t!==S.default.stderr,s=i?u:x;n.endEmitted?S.default.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(B,V){Ne("onunpipe"),B===r&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,f())}function u(){Ne("onend"),t.end()}var a=Uj(r);t.on("drain",a);var c=!1;function f(){Ne("cleanup"),t.removeListener("close",A),t.removeListener("finish",T),t.removeListener("drain",a),t.removeListener("error",w),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",x),r.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&a()}r.on("data",d);function d(B){Ne("ondata");var V=t.write(B);Ne("dest.write",V),V===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&$N(n.pipes,t)!==-1)&&!c&&(Ne("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function w(B){Ne("onerror",B),x(),t.removeListener("error",w),GN(t,"error")===0&&tf(t,B)}Rj(t,"error",w);function A(){t.removeListener("finish",T),x()}t.once("close",A);function T(){Ne("onfinish"),t.removeListener("close",A),x()}t.once("finish",T);function x(){Ne("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ne("pipe resume"),r.resume()),t};function Uj(t){return function(){var r=t._readableState;Ne("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&GN(t,"data")&&(r.flowing=!0,Yv(t))}}Fe.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=$N(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Fe.prototype.on=function(t,e){var r=rf.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ne("on readable",n.length,n.reading),n.length?ug(this):n.reading||S.default.nextTick(qj,this)),r};Fe.prototype.addListener=Fe.prototype.on;Fe.prototype.removeListener=function(t,e){var r=rf.prototype.removeListener.call(this,t,e);return t==="readable"&&S.default.nextTick(KN,this),r};Fe.prototype.removeAllListeners=function(t){var e=rf.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&S.default.nextTick(KN,this),e};function KN(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function qj(t){Ne("readable nexttick read 0"),t.read(0)}Fe.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ne("resume"),t.flowing=!t.readableListening,Vj(this,t)),t.paused=!1,this};function Vj(t,e){e.resumeScheduled||(e.resumeScheduled=!0,S.default.nextTick(kj,t,e))}function kj(t,e){Ne("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Yv(t),e.flowing&&!e.reading&&t.read(0)}Fe.prototype.pause=function(){return Ne("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ne("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Yv(t){var e=t._readableState;for(Ne("flow",e.flowing);e.flowing&&t.read()!==null;);}Fe.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ne("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Ne("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(u){return function(){return t[u].apply(t,arguments)}}(i));for(var s=0;s<zv.length;s++)t.on(zv[s],this.emit.bind(this,zv[s]));return this._read=function(o){Ne("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Fe.prototype[Symbol.asyncIterator]=function(){return Gv===void 0&&(Gv=UN()),Gv(this)});Object.defineProperty(Fe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Fe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Fe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Fe._fromList=WN;Object.defineProperty(Fe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function WN(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Kv(t){var e=t._readableState;Ne("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,S.default.nextTick(Hj,e,t))}function Hj(t,e){if(Ne("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Fe.from=function(t,e){return jv===void 0&&(jv=VN()),jv(Fe,t,e)});function $N(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Jv=D((l0e,XN)=>{"use strict";h();XN.exports=Ps;var cg=xa().codes,Gj=cg.ERR_METHOD_NOT_IMPLEMENTED,jj=cg.ERR_MULTIPLE_CALLBACK,zj=cg.ERR_TRANSFORM_ALREADY_TRANSFORMING,Qj=cg.ERR_TRANSFORM_WITH_LENGTH_0,lg=Oa();Lu()(Ps,lg);function Kj(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new jj);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ps(t){if(!(this instanceof Ps))return new Ps(t);lg.call(this,t),this._transformState={afterTransform:Kj.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Wj)}function Wj(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){JN(t,e,r)}):JN(this,null,null)}Ps.prototype.push=function(t,e){return this._transformState.needTransform=!1,lg.prototype.push.call(this,t,e)};Ps.prototype._transform=function(t,e,r){r(new Gj("_transform()"))};Ps.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ps.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ps.prototype._destroy=function(t,e){lg.prototype._destroy.call(this,t,function(r){e(r)})};function JN(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Qj;if(t._transformState.transforming)throw new zj;return t.push(null)}});var tx=D((h0e,ex)=>{"use strict";h();ex.exports=nf;var ZN=Jv();Lu()(nf,ZN);function nf(t){if(!(this instanceof nf))return new nf(t);ZN.call(this,t)}nf.prototype._transform=function(t,e,r){r(null,t)}});var ox=D((g0e,sx)=>{"use strict";h();var Xv;function $j(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ix=xa().codes,Yj=ix.ERR_MISSING_ARGS,Jj=ix.ERR_STREAM_DESTROYED;function rx(t){if(t)throw t}function Xj(t){return t.setHeader&&typeof t.abort=="function"}function Zj(t,e,r,n){n=$j(n);var i=!1;t.on("close",function(){i=!0}),Xv===void 0&&(Xv=ng()),Xv(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Xj(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Jj("pipe"))}}}function nx(t){t()}function ez(t,e){return t.pipe(e)}function tz(t){return!t.length||typeof t[t.length-1]!="function"?rx:t.pop()}function rz(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=tz(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Yj("streams");var i,s=e.map(function(o,u){var a=u<e.length-1,c=u>0;return Zj(o,a,c,function(f){i||(i=f),f&&s.forEach(nx),!a&&(s.forEach(nx),n(i))})});return e.reduce(ez)}sx.exports=rz});var Zv=D((Pn,ax)=>{h();Pn=ax.exports=Lv();Pn.Stream=Pn;Pn.Readable=Pn;Pn.Writable=Rv();Pn.Duplex=Oa();Pn.Transform=Jv();Pn.PassThrough=tx();Pn.finished=ng();Pn.pipeline=ox()});var lx=D((y0e,cx)=>{h();var{Transform:nz}=Zv();cx.exports=t=>class ux extends nz{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!p.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return p.Buffer.isBuffer(r)||(r=p.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new ux(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var dx=D((v0e,hx)=>{h();var{Transform:iz}=Zv();hx.exports=t=>class fx extends iz{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!p.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return p.Buffer.isBuffer(r)||(r=p.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new fx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var px=D((E0e,gx)=>{h();var sz=lx(),oz=dx();gx.exports=function(t){let e=sz(t),r=oz(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var wx=D(yx=>{h();var mx=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];yx.p1600=function(t){for(let e=0;e<24;++e){let r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],a=t[6]^t[16]^t[26]^t[36]^t[46],c=t[7]^t[17]^t[27]^t[37]^t[47],f=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],w=f^(i<<1|s>>>31),A=d^(s<<1|i>>>31),T=t[0]^w,x=t[1]^A,B=t[10]^w,V=t[11]^A,U=t[20]^w,Q=t[21]^A,L=t[30]^w,k=t[31]^A,H=t[40]^w,q=t[41]^A;w=r^(o<<1|u>>>31),A=n^(u<<1|o>>>31);let v=t[2]^w,C=t[3]^A,P=t[12]^w,F=t[13]^A,R=t[22]^w,l=t[23]^A,g=t[32]^w,y=t[33]^A,E=t[42]^w,I=t[43]^A;w=i^(a<<1|c>>>31),A=s^(c<<1|a>>>31);let _=t[4]^w,M=t[5]^A,N=t[14]^w,m=t[15]^A,O=t[24]^w,Y=t[25]^A,$=t[34]^w,b=t[35]^A,j=t[44]^w,z=t[45]^A;w=o^(f<<1|d>>>31),A=u^(d<<1|f>>>31);let W=t[6]^w,ie=t[7]^A,te=t[16]^w,ee=t[17]^A,se=t[26]^w,oe=t[27]^A,J=t[36]^w,ue=t[37]^A,wt=t[46]^w,vt=t[47]^A;w=a^(r<<1|n>>>31),A=c^(n<<1|r>>>31);let Ni=t[8]^w,At=t[9]^A,Et=t[18]^w,xi=t[19]^A,bt=t[28]^w,St=t[29]^A,Oi=t[38]^w,It=t[39]^A,Tt=t[48]^w,Di=t[49]^A,Qe=T,Ke=x,ri=V<<4|B>>>28,We=B<<4|V>>>28,$e=U<<3|Q>>>29,ni=Q<<3|U>>>29,Ye=k<<9|L>>>23,Je=L<<9|k>>>23,ii=H<<18|q>>>14,Xe=q<<18|H>>>14,Ze=v<<1|C>>>31,si=C<<1|v>>>31,et=F<<12|P>>>20,tt=P<<12|F>>>20,oi=R<<10|l>>>22,rt=l<<10|R>>>22,nt=y<<13|g>>>19,ai=g<<13|y>>>19,it=E<<2|I>>>30,st=I<<2|E>>>30,ui=M<<30|_>>>2,ot=_<<30|M>>>2,at=N<<6|m>>>26,ci=m<<6|N>>>26,ut=Y<<11|O>>>21,ct=O<<11|Y>>>21,li=$<<15|b>>>17,lt=b<<15|$>>>17,ft=z<<29|j>>>3,fi=j<<29|z>>>3,ht=W<<28|ie>>>4,dt=ie<<28|W>>>4,hi=ee<<23|te>>>9,gt=te<<23|ee>>>9,pt=se<<25|oe>>>7,vn=oe<<25|se>>>7,An=J<<21|ue>>>11,En=ue<<21|J>>>11,bn=vt<<24|wt>>>8,Sn=wt<<24|vt>>>8,In=Ni<<27|At>>>5,ha=At<<27|Ni>>>5,da=Et<<20|xi>>>12,ga=xi<<20|Et>>>12,pa=St<<7|bt>>>25,ma=bt<<7|St>>>25,ya=Oi<<8|It>>>24,wa=It<<8|Oi>>>24,va=Tt<<14|Di>>>18,Aa=Di<<14|Tt>>>18;t[0]=Qe^~et&ut,t[1]=Ke^~tt&ct,t[10]=ht^~da&$e,t[11]=dt^~ga&ni,t[20]=Ze^~at&pt,t[21]=si^~ci&vn,t[30]=In^~ri&oi,t[31]=ha^~We&rt,t[40]=ui^~hi&pa,t[41]=ot^~gt&ma,t[2]=et^~ut&An,t[3]=tt^~ct&En,t[12]=da^~$e&nt,t[13]=ga^~ni&ai,t[22]=at^~pt&ya,t[23]=ci^~vn&wa,t[32]=ri^~oi&li,t[33]=We^~rt&lt,t[42]=hi^~pa&Ye,t[43]=gt^~ma&Je,t[4]=ut^~An&va,t[5]=ct^~En&Aa,t[14]=$e^~nt&ft,t[15]=ni^~ai&fi,t[24]=pt^~ya&ii,t[25]=vn^~wa&Xe,t[34]=oi^~li&bn,t[35]=rt^~lt&Sn,t[44]=pa^~Ye&it,t[45]=ma^~Je&st,t[6]=An^~va&Qe,t[7]=En^~Aa&Ke,t[16]=nt^~ft&ht,t[17]=ai^~fi&dt,t[26]=ya^~ii&Ze,t[27]=wa^~Xe&si,t[36]=li^~bn&In,t[37]=lt^~Sn&ha,t[46]=Ye^~it&ui,t[47]=Je^~st&ot,t[8]=va^~Qe&et,t[9]=Aa^~Ke&tt,t[18]=ft^~ht&da,t[19]=fi^~dt&ga,t[28]=ii^~Ze&at,t[29]=Xe^~si&ci,t[38]=bn^~In&ri,t[39]=Sn^~ha&We,t[48]=it^~ui&hi,t[49]=st^~ot&gt,t[0]^=mx[e*2],t[1]^=mx[e*2+1]}}});var Ax=D((T0e,vx)=>{h();var fg=wx();function ku(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}ku.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};ku.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(fg.p1600(this.state),this.count=0)};ku.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&fg.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),fg.p1600(this.state),this.count=0,this.squeezing=!0};ku.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);let e=p.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(fg.p1600(this.state),this.count=0);return e};ku.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};vx.exports=ku});var sf=D((C0e,Ex)=>{h();Ex.exports=px()(Ax())});var Ve=D(Kr=>{"use strict";h();var az=Kr&&Kr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uz=Kr&&Kr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bx=Kr&&Kr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&az(e,t,r);return uz(e,t),e},cz=Kr&&Kr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.AddressComputer=Kr.Address=void 0;var Hu=bx(vv()),lz=cz((rr(),_e(fr))),eA=hr(),Gu=bx(Ie()),fz=Kd(),hz=sf(),of="erd",hg=32,dz="0".repeat(16),dg=class t{constructor(e){if(this.valueHex="",!!e){if(e instanceof t)return t.fromAddress(e);if(ArrayBuffer.isView(e))return t.fromBuffer(p.Buffer.from(e));if(typeof e=="string")return t.fromString(e);throw new Gu.ErrAddressCannotCreate(e)}}static fromAddress(e){return t.fromValidHex(e.valueHex)}static fromValidHex(e){let r=t.empty();return r.valueHex=e,r}static fromBuffer(e){if(e.length!=hg)throw new Gu.ErrAddressCannotCreate(e);return t.fromValidHex(e.toString("hex"))}static fromString(e){return t.isValidHex(e)?t.fromValidHex(e):t.fromBech32(e)}static isValidHex(e){return p.Buffer.from(e,"hex").length==hg}static fromHex(e){if(!t.isValidHex(e))throw new Gu.ErrAddressCannotCreate(e);return t.fromValidHex(e)}static empty(){return new t("")}static fromBech32(e){let r;try{r=Hu.decode(e)}catch(s){throw new Gu.ErrAddressCannotCreate(e,s)}let n=r.prefix;if(n!=of)throw new Gu.ErrAddressBadHrp(of,n);let i=p.Buffer.from(Hu.fromWords(r.words));if(i.length!=hg)throw new Gu.ErrAddressCannotCreate(e);return t.fromValidHex(i.toString("hex"))}static isValid(e){let r=Hu.decodeUnsafe(e),n=r?.prefix,i=r?p.Buffer.from(Hu.fromWords(r.words)):void 0;return!(n!==of||i?.length!==hg)}hex(){return this.toHex()}toHex(){return this.isEmpty()?"":this.valueHex}bech32(){return this.toBech32()}toBech32(){if(this.isEmpty())return"";let e=Hu.toWords(this.pubkey());return Hu.encode(of,e)}pubkey(){return this.getPublicKey()}getPublicKey(){return this.isEmpty()?p.Buffer.from([]):p.Buffer.from(this.valueHex,"hex")}getHrp(){return of}isEmpty(){return!this.valueHex}equals(e){return e?this.valueHex==e.valueHex:!1}toString(){return this.toBech32()}toJSON(){return{bech32:this.toBech32(),pubkey:this.toHex()}}static Zero(){return new t("0".repeat(64))}isContractAddress(){return this.isSmartContract()}isSmartContract(){return this.toHex().startsWith(dz)}};Kr.Address=dg;var tA=class{constructor(e){this.numberOfShardsWithoutMeta=e||eA.CURRENT_NUMBER_OF_SHARDS_WITHOUT_META}computeContractAddress(e,r){let n=p.Buffer.alloc(8,0),i=e.getPublicKey(),s=i.slice(30),o=p.Buffer.alloc(8),u=new lz.default(r.toString()),a=fz.bigIntToBuffer(u);o.write(a.reverse().toString("hex"),"hex");let c=p.Buffer.concat([i,o]),f=hz("keccak256").update(c).digest(),d=p.Buffer.from(eA.WasmVirtualMachine,"hex"),w=p.Buffer.concat([n,d,f.slice(10,30),s]);return new dg(w)}getShardOfAddress(e){return this.getShardOfPubkey(e.getPublicKey(),this.numberOfShardsWithoutMeta)}getShardOfPubkey(e,r){let n=parseInt("11",2),i=parseInt("01",2),s=e[31];if(this.isPubkeyOfMetachain(e))return eA.METACHAIN_ID;let o=s&n;return o>r-1&&(o=s&i),o}isPubkeyOfMetachain(e){let r=p.Buffer.from([0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=p.Buffer.from(e).slice(0,r.length);return!!(r.equals(n)||p.Buffer.alloc(32).equals(p.Buffer.from(e)))}};Kr.AddressComputer=tA});var Rn=D(Ft=>{"use strict";h();var gz=Ft&&Ft.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pz=Ft&&Ft.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mz=Ft&&Ft.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gz(e,t,r);return pz(e,t),e};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.isEmpty=Ft.guardEmpty=Ft.guardNotEmpty=Ft.guardLength=Ft.guardSameLength=Ft.guardValueIsSetWithMessage=Ft.guardValueIsSet=Ft.guardTrue=void 0;var ju=mz(Ie());function yz(t,e){if(!t)throw new ju.ErrInvariantFailed(`[<${e}>] isn't true`)}Ft.guardTrue=yz;function wz(t,e){Sx(`${t} isn't set (null or undefined)`,e)}Ft.guardValueIsSet=wz;function Sx(t,e){if(e==null||e===void 0)throw new ju.ErrInvariantFailed(t)}Ft.guardValueIsSetWithMessage=Sx;function vz(t,e){if(t=t||[],e=e||[],t.length!=e.length)throw new ju.ErrInvariantFailed("arrays do not have the same length")}Ft.guardSameLength=vz;function Az(t,e){let r=t.length||0;if(r!=e)throw new ju.ErrInvariantFailed(`wrong length, expected: ${e}, actual: ${r}`)}Ft.guardLength=Az;function Ez(t,e){if(rA(t))throw new ju.ErrInvariantFailed(`${e} is empty`)}Ft.guardNotEmpty=Ez;function bz(t,e){if(!rA(t))throw new ju.ErrInvariantFailed(`${e} is not empty`)}Ft.guardEmpty=bz;function rA(t){return t.isEmpty?t.isEmpty():t.length===0}Ft.isEmpty=rA});var Ix=D(gg=>{"use strict";h();Object.defineProperty(gg,"__esModule",{value:!0});gg.TypeFormula=void 0;var nA=class{constructor(e,r){this.name=e,this.typeParameters=r}toString(){if(this.typeParameters.length>0){let e=this.typeParameters.map(r=>r.toString()).join(", ");return`${this.name}<${e}>`}else return this.name}};gg.TypeFormula=nA});var Tx=D(pg=>{"use strict";h();Object.defineProperty(pg,"__esModule",{value:!0});pg.TypeFormulaParser=void 0;var af=Ix(),Ui=class t{parseExpression(e){e=e.trim();let r=this.tokenizeExpression(e).filter(s=>s!==t.COMMA),n=[];for(let s of r)if(this.isPunctuation(s))if(this.isEndOfTypeParameters(s)){let o=this.acquireTypeWithParameters(n);n.push(o)}else if(this.isBeginningOfTypeParameters(s))n.push(s);else throw new Error(`Unexpected token (punctuation): ${s}`);else n.push(s);if(n.length!==1)throw new Error(`Unexpected stack length at end of parsing: ${n.length}`);if(t.PUNCTUATION.includes(n[0]))throw new Error("Unexpected root element.");let i=n[0];if(i instanceof af.TypeFormula)return i;if(typeof i=="string")return new af.TypeFormula(i,[]);throw new Error(`Unexpected item on stack: ${i}`)}tokenizeExpression(e){let r=[],n="";for(let i of e)this.isPunctuation(i)?(n&&(r.push(n.trim()),n=""),r.push(i)):n+=i;return n&&r.push(n.trim()),r}acquireTypeWithParameters(e){let r=this.acquireTypeParameters(e),n=e.pop();return new af.TypeFormula(n,r.reverse())}acquireTypeParameters(e){let r=[];for(;;){let n=e.pop();if(n===void 0)throw new Error("Badly specified type parameters");if(this.isBeginningOfTypeParameters(n))break;if(n instanceof af.TypeFormula)r.push(n);else if(typeof n=="string")r.push(new af.TypeFormula(n,[]));else throw new Error(`Unexpected type parameter object in stack: ${n}`)}return r}isPunctuation(e){return t.PUNCTUATION.includes(e)}isEndOfTypeParameters(e){return e===t.END_TYPE_PARAMETERS}isBeginningOfTypeParameters(e){return e===t.BEGIN_TYPE_PARAMETERS}};pg.TypeFormulaParser=Ui;Ui.BEGIN_TYPE_PARAMETERS="<";Ui.END_TYPE_PARAMETERS=">";Ui.COMMA=",";Ui.PUNCTUATION=[Ui.COMMA,Ui.BEGIN_TYPE_PARAMETERS,Ui.END_TYPE_PARAMETERS]});var _x=D(mg=>{"use strict";h();Object.defineProperty(mg,"__esModule",{value:!0});mg.getJavascriptPrototypesInHierarchy=void 0;function Sz(t,e){let r=[],n=Object.getPrototypeOf(t);for(;n&&e(n);)r.push(n),n=Object.getPrototypeOf(n);return r}mg.getJavascriptPrototypesInHierarchy=Sz});var sr=D(ir=>{"use strict";h();Object.defineProperty(ir,"__esModule",{value:!0});ir.NullType=ir.TypePlaceholder=ir.isTyped=ir.PrimitiveValue=ir.TypedValue=ir.CustomType=ir.PrimitiveType=ir.TypeCardinality=ir.Type=void 0;var iA=_x(),Cx=Rn(),fo=class t{constructor(e,r=[],n=uf.fixed(1)){Cx.guardValueIsSet("name",e),this.name=e,this.typeParameters=r,this.cardinality=n}getName(){return this.name}getClassName(){return t.ClassName}getClassHierarchy(){return iA.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getFullyQualifiedName(){let e=this.getTypeParameters().map(r=>r.getFullyQualifiedName()).join(", ");return this.isGenericType()?`multiversx:types:${this.getName()}<${e}>`:`multiversx:types:${this.getName()}`}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}getTypeParameters(){return this.typeParameters}isGenericType(){return this.typeParameters.length>0}getFirstTypeParameter(){return Cx.guardTrue(this.typeParameters.length>0,"type parameters length > 0"),this.typeParameters[0]}toString(){let e=this.getTypeParameters().map(n=>n.toString()).join(", "),r=e?`<${e}>`:"";return`${this.name}${r}`}equals(e){return t.equals(this,e)}static equals(e,r){return e.getFullyQualifiedName()==r.getFullyQualifiedName()}static equalsMany(e,r){return e.every((n,i)=>n.equals(r[i]))}static isAssignableFromMany(e,r){return e.every((n,i)=>n.isAssignableFrom(r[i]))}differs(e){return!this.equals(e)}valueOf(){return this.name}isAssignableFrom(e){if(!t.equalsMany(this.getTypeParameters(),e.getTypeParameters()))return!1;let n=this.getFullyQualifiedName();return t.getFullyQualifiedNamesInHierarchy(e).includes(n)?!0:e.hasClassOrSuperclass(this.getClassName())}static getFullyQualifiedNamesInHierarchy(e){return iA.getJavascriptPrototypesInHierarchy(e,i=>i.belongsToTypesystem).map(i=>i.getFullyQualifiedName.call(e))}getNamesOfDependencies(){let e=[];for(let r of this.typeParameters)e.push(r.getName()),e.push(...r.getNamesOfDependencies());return[...new Set(e)]}toJSON(){return{name:this.name,typeParameters:this.typeParameters.map(e=>e.toJSON())}}getCardinality(){return this.cardinality}belongsToTypesystem(){}};ir.Type=fo;fo.ClassName="Type";var uf=class t{constructor(e,r){this.lowerBound=e,this.upperBound=r}static fixed(e){return new t(e,e)}static variable(e){return new t(0,e)}isSingular(){return this.lowerBound==1&&this.upperBound==1}isSingularOrNone(){return this.lowerBound==0&&this.upperBound==1}isComposite(){return this.upperBound!=1}isFixed(){return this.lowerBound==this.upperBound}getLowerBound(){return this.lowerBound}getUpperBound(){return this.upperBound||t.MaxCardinality}};ir.TypeCardinality=uf;uf.MaxCardinality=4096;var yg=class t extends fo{constructor(e){super(e)}getClassName(){return t.ClassName}};ir.PrimitiveType=yg;yg.ClassName="PrimitiveType";var wg=class t extends fo{getClassName(){return t.ClassName}};ir.CustomType=wg;wg.ClassName="CustomType";var cf=class t{constructor(e){this.type=e}getClassName(){return t.ClassName}getClassHierarchy(){return iA.getJavascriptPrototypesInHierarchy(this,n=>n.belongsToTypesystem).map(n=>n.getClassName()).reverse()}getType(){return this.type}hasExactClass(e){return this.getClassName()==e}hasClassOrSuperclass(e){return this.getClassHierarchy().includes(e)}belongsToTypesystem(){}};ir.TypedValue=cf;cf.ClassName="TypedValue";var vg=class t extends cf{constructor(e){super(e)}getClassName(){return t.ClassName}};ir.PrimitiveValue=vg;vg.ClassName="PrimitiveValue";function Iz(t){return t.belongsToTypesystem!==void 0}ir.isTyped=Iz;var Ag=class t extends fo{constructor(){super("...")}getClassName(){return t.ClassName}};ir.TypePlaceholder=Ag;Ag.ClassName="TypePlaceholder";var Eg=class t extends fo{constructor(){super("?")}getClassName(){return t.ClassName}};ir.NullType=Eg;Eg.ClassName="NullType"});var lf=D(bg=>{"use strict";h();Object.defineProperty(bg,"__esModule",{value:!0});bg.TypeExpressionParser=void 0;var Tz=Tx(),_z=Ie(),Cz=sr(),sA=class{constructor(){this.backingTypeFormulaParser=new Tz.TypeFormulaParser}parse(e){try{return this.doParse(e)}catch(r){throw new _z.ErrTypingSystem(`Failed to parse type expression: ${e}. Error: ${r}`)}}doParse(e){let r=this.backingTypeFormulaParser.parseExpression(e);return this.typeFormulaToType(r)}typeFormulaToType(e){let r=e.typeParameters.map(n=>this.typeFormulaToType(n));return new Cz.Type(e.name,r)}};bg.TypeExpressionParser=sA});var aA=D(ho=>{"use strict";h();Object.defineProperty(ho,"__esModule",{value:!0});ho.EndpointParameterDefinition=ho.EndpointModifiers=ho.EndpointDefinition=void 0;var Nz=lf(),Nx="?",xz="N / A",oA=class t{constructor(e,r,n,i){this.input=[],this.output=[],this.name=e,this.input=r||[],this.output=n||[],this.modifiers=i}isConstructor(){return this.name=="constructor"}static fromJSON(e){e.name=e.name==null?Nx:e.name,e.onlyOwner=e.onlyOwner||!1,e.payableInTokens=e.payableInTokens||[],e.inputs=e.inputs||[],e.outputs=e.outputs||[];let r=e.inputs.map(s=>ff.fromJSON(s)),n=e.outputs.map(s=>ff.fromJSON(s)),i=new Sg(e.mutability,e.payableInTokens,e.onlyOwner);return new t(e.name,r,n,i)}};ho.EndpointDefinition=oA;var Sg=class{constructor(e,r,n){this.mutability=e||"",this.payableInTokens=r||[],this.onlyOwner=n||!1}isPayableInEGLD(){return this.isPayableInToken("EGLD")}isPayableInToken(e){return this.payableInTokens.includes(e)?!0:this.payableInTokens.includes(`!${e}`)?!1:!!this.payableInTokens.includes("*")}isPayable(){return this.payableInTokens.length!=0}isReadonly(){return this.mutability=="readonly"}isOnlyOwner(){return this.onlyOwner}};ho.EndpointModifiers=Sg;var ff=class t{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new Nz.TypeExpressionParser().parse(e.type);return new t(e.name||Nx,e.description||xz,r)}};ho.EndpointParameterDefinition=ff});var zu=D(Wr=>{"use strict";h();var Oz=Wr&&Wr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dz=Wr&&Wr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pz=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Oz(e,t,r);return Dz(e,t),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.Fields=Wr.Field=Wr.FieldDefinition=void 0;var uA=Pz(Ie()),Rz=lf(),cA=class t{constructor(e,r,n){this.name=e,this.description=r,this.type=n}static fromJSON(e){let r=new Rz.TypeExpressionParser().parse(e.type);return new t(e.name,e.description,r)}};Wr.FieldDefinition=cA;var lA=class{constructor(e,r=""){this.value=e,this.name=r}checkTyping(e){let r=this.value.getType();if(!r.equals(e.type))throw new uA.ErrTypingSystem(`check type of field "${e.name}; expected: ${e.type}, actual: ${r}"`);if(this.name!=e.name)throw new uA.ErrTypingSystem(`check name of field "${e.name}"`)}equals(e){return this.name==e.name&&this.value.equals(e.value)}};Wr.Field=lA;var fA=class{static checkTyping(e,r){if(e.length!=r.length)throw new uA.ErrTypingSystem("fields length vs. field definitions length");for(let n=0;n<e.length;n++){let i=e[n],s=r[n];i.checkTyping(s)}}static equals(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(!i.equals(s))return!1}return!0}static getNamesOfTypeDependencies(e){let r=[];for(let n of e)r.push(n.type.getName()),r.push(...n.type.getNamesOfDependencies());return[...new Set(r)]}};Wr.Fields=fA});var hf=D(go=>{"use strict";h();Object.defineProperty(go,"__esModule",{value:!0});go.EnumValue=go.EnumVariantDefinition=go.EnumType=void 0;var Bz=Ie(),hA=Rn(),Ig=zu(),Ox=sr(),xx=256,Tg=class t extends Ox.CustomType{constructor(e,r){super(e),this.variants=[],this.variants=r}getClassName(){return t.ClassName}static fromJSON(e){let n=t.assignMissingDiscriminants(e.variants||[]).map(i=>_g.fromJSON(i));return new t(e.name,n)}static assignMissingDiscriminants(e){return e.every(n=>n.discriminant==null)?e.map((n,i)=>({...n,discriminant:i})):e}getVariantByDiscriminant(e){let r=this.variants.find(n=>n.discriminant==e);return hA.guardValueIsSet(`variant by discriminant (${e})`,r),r}getVariantByName(e){let r=this.variants.find(n=>n.name==e);return hA.guardValueIsSet(`variant by name (${e})`,r),r}getNamesOfDependencies(){let e=[];for(let r of this.variants)e.push(...r.getNamesOfDependencies());return[...new Set(e)]}};go.EnumType=Tg;Tg.ClassName="EnumType";var _g=class t{constructor(e,r,n=[]){this.fieldsDefinitions=[],hA.guardTrue(r<xx,`discriminant for simple enum should be less than ${xx}`),this.name=e,this.discriminant=r,this.fieldsDefinitions=n}static fromJSON(e){let r=(e.fields||[]).map(n=>Ig.FieldDefinition.fromJSON(n));return new t(e.name,e.discriminant,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return Ig.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};go.EnumVariantDefinition=_g;var Cg=class t extends Ox.TypedValue{constructor(e,r,n){super(e),this.fields=[],this.name=r.name,this.discriminant=r.discriminant,this.fields=n,this.fieldsByName=new Map(n.map(s=>[s.name,s]));let i=r.getFieldsDefinitions();Ig.Fields.checkTyping(this.fields,i)}getClassName(){return t.ClassName}static fromName(e,r){let n=e.getVariantByName(r);return new t(e,n,[])}static fromDiscriminant(e,r){let n=e.getVariantByDiscriminant(r);return new t(e,n,[])}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields(),i=this.name==e.name,s=this.discriminant==e.discriminant,o=Ig.Fields.equals(r,n);return i&&s&&o}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new Bz.ErrMissingFieldOnEnum(e,this.getType().getName())}valueOf(){let e={name:this.name,fields:[]};return this.fields.forEach((r,n)=>e.fields[n]=r.value.valueOf()),e}};go.EnumValue=Cg;Cg.ClassName="EnumValue"});var Px=D(Qu=>{"use strict";h();Object.defineProperty(Qu,"__esModule",{value:!0});Qu.EventTopicDefinition=Qu.EventDefinition=void 0;var Mz=lf(),Dx="?",dA=class t{constructor(e,r){this.inputs=[],this.identifier=e,this.inputs=r||[]}static fromJSON(e){e.identifier=e.identifier==null?Dx:e.identifier,e.inputs=e.inputs||[];let r=e.inputs.map(n=>Ng.fromJSON(n));return new t(e.identifier,r)}};Qu.EventDefinition=dA;var Ng=class t{constructor(e){this.name=e.name,this.type=e.type,this.indexed=e.indexed}static fromJSON(e){let r=new Mz.TypeExpressionParser().parse(e.type);return new t({name:e.name||Dx,type:r,indexed:e.indexed})}};Qu.EventTopicDefinition=Ng});var Wu=D(Ku=>{"use strict";h();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.Struct=Ku.StructType=void 0;var Lz=Ie(),xg=zu(),Rx=sr(),Og=class t extends Rx.CustomType{constructor(e,r){super(e),this.fieldsDefinitions=[],this.fieldsDefinitions=r}getClassName(){return t.ClassName}static fromJSON(e){let r=(e.fields||[]).map(n=>xg.FieldDefinition.fromJSON(n));return new t(e.name,r)}getFieldsDefinitions(){return this.fieldsDefinitions}getFieldDefinition(e){return this.fieldsDefinitions.find(r=>r.name==e)}getNamesOfDependencies(){return xg.Fields.getNamesOfTypeDependencies(this.fieldsDefinitions)}};Ku.StructType=Og;Og.ClassName="StructType";var Dg=class t extends Rx.TypedValue{constructor(e,r){super(e),this.fields=r,this.fieldsByName=new Map(r.map(n=>[n.name,n])),this.checkTyping()}getClassName(){return t.ClassName}checkTyping(){let r=this.getType().getFieldsDefinitions();xg.Fields.checkTyping(this.fields,r)}getFields(){return this.fields}getFieldValue(e){let r=this.fieldsByName.get(e);if(r)return r.value.valueOf();throw new Lz.ErrMissingFieldOnStruct(e,this.getType().getName())}valueOf(){let e={};for(let r of this.fields)e[r.name]=r.value.valueOf();return e}equals(e){if(!this.getType().equals(e.getType()))return!1;let r=this.getFields(),n=e.getFields();return xg.Fields.equals(r,n)}};Ku.Struct=Dg;Dg.ClassName="Struct"});var Yu=D($u=>{"use strict";h();Object.defineProperty($u,"__esModule",{value:!0});$u.AddressValue=$u.AddressType=void 0;var Fz=Ve(),Bx=sr(),df=class t extends Bx.PrimitiveType{constructor(){super("Address")}getClassName(){return t.ClassName}};$u.AddressType=df;df.ClassName="AddressType";var Pg=class t extends Bx.PrimitiveValue{constructor(e){super(new df),this.value=new Fz.Address(e.bech32())}getClassName(){return t.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};$u.AddressValue=Pg;Pg.ClassName="AddressValue"});var Bg=D(Ju=>{"use strict";h();Object.defineProperty(Ju,"__esModule",{value:!0});Ju.OptionalValue=Ju.OptionalType=void 0;var Uz=Rn(),gf=sr(),pf=class t extends gf.Type{constructor(e){super("Optional",[e],gf.TypeCardinality.variable(1))}getClassName(){return t.ClassName}isAssignableFrom(e){if(!e.hasExactClass(t.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(gf.NullType.ClassName);return r||n}};Ju.OptionalType=pf;pf.ClassName="OptionalType";var Rg=class t extends gf.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return t.ClassName}static newMissing(){let e=new pf(new gf.NullType);return new t(e)}isSet(){return!!this.value}getTypedValue(){return Uz.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){return this.value?.equals(e.value)||!1}};Ju.OptionalValue=Rg;Rg.ClassName="OptionalValue"});var yf=D(Xu=>{"use strict";h();Object.defineProperty(Xu,"__esModule",{value:!0});Xu.BooleanValue=Xu.BooleanType=void 0;var Mx=sr(),mf=class t extends Mx.PrimitiveType{constructor(){super("bool")}getClassName(){return t.ClassName}};Xu.BooleanType=mf;mf.ClassName="BooleanType";var Mg=class t extends Mx.PrimitiveValue{constructor(e){super(new mf),this.value=e}getClassName(){return t.ClassName}equals(e){return this.value===e.value}isTrue(){return this.value===!0}isFalse(){return!this.isTrue()}valueOf(){return this.value}};Xu.BooleanValue=Mg;Mg.ClassName="BooleanValue"});var po=D(Zu=>{"use strict";h();Object.defineProperty(Zu,"__esModule",{value:!0});Zu.BytesValue=Zu.BytesType=void 0;var Lx=sr(),wf=class t extends Lx.PrimitiveType{constructor(){super("bytes")}getClassName(){return t.ClassName}};Zu.BytesType=wf;wf.ClassName="BytesType";var Lg=class t extends Lx.PrimitiveValue{constructor(e){super(new wf),this.value=e}getClassName(){return t.ClassName}static fromUTF8(e){let r=p.Buffer.from(e,"utf-8");return new t(r)}static fromHex(e){let r=p.Buffer.from(e,"hex");return new t(r)}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value.equals(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};Zu.BytesValue=Lg;Lg.ClassName="BytesValue"});var Ux=D(ec=>{"use strict";h();Object.defineProperty(ec,"__esModule",{value:!0});ec.CodeMetadataValue=ec.CodeMetadataType=void 0;var Fx=sr(),Fg=class extends Fx.PrimitiveType{constructor(){super("CodeMetadata")}};ec.CodeMetadataType=Fg;var gA=class extends Fx.PrimitiveValue{constructor(e){super(new Fg),this.value=e}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};ec.CodeMetadataValue=gA});var qg=D(tc=>{"use strict";h();Object.defineProperty(tc,"__esModule",{value:!0});tc.CompositeValue=tc.CompositeType=void 0;var qz=Rn(),pA=sr(),vf=class t extends pA.Type{constructor(...e){super("Composite",e,pA.TypeCardinality.variable(e.length))}getClassName(){return t.ClassName}};tc.CompositeType=vf;vf.ClassName="CompositeType";var Ug=class t extends pA.TypedValue{constructor(e,r){super(e),qz.guardLength(r,e.getTypeParameters().length),this.items=r}getClassName(){return t.ClassName}static fromItems(...e){let r=e.map(i=>i.getType()),n=new vf(...r);return new t(n,e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e?.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};tc.CompositeValue=Ug;Ug.ClassName="CompositeValue"});var yA=D(Vg=>{"use strict";h();Object.defineProperty(Vg,"__esModule",{value:!0});Vg.CollectionOfTypedValues=void 0;var mA=class{constructor(e){this.items=e}getLength(){return this.items.length}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getLength()!=e.getLength())return!1;for(let r=0;r<this.getLength();r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};Vg.CollectionOfTypedValues=mA});var Ef=D(qi=>{"use strict";h();Object.defineProperty(qi,"__esModule",{value:!0});qi.List=qi.OptionValue=qi.ListType=qi.OptionType=void 0;var Vz=Rn(),kz=yA(),La=sr(),Ma=class t extends La.Type{constructor(e){super("Option",[e])}getClassName(){return t.ClassName}isAssignableFrom(e){if(!e.hasExactClass(t.ClassName))return!1;let r=this.getFirstTypeParameter().equals(e.getFirstTypeParameter()),n=e.getFirstTypeParameter().hasExactClass(La.NullType.ClassName);return r||n}};qi.OptionType=Ma;Ma.ClassName="OptionType";var Af=class t extends La.Type{constructor(e){super("List",[e])}getClassName(){return t.ClassName}};qi.ListType=Af;Af.ClassName="ListType";var kg=class t extends La.TypedValue{constructor(e,r=null){super(e),this.value=r}getClassName(){return t.ClassName}static newMissing(){let e=new Ma(new La.NullType);return new t(e)}static newMissingTyped(e){return new t(new Ma(e))}static newProvided(e){let r=new Ma(e.getType());return new t(r,e)}isSet(){return!!this.value}getTypedValue(){return Vz.guardValueIsSet("value",this.value),this.value}valueOf(){return this.value?this.value.valueOf():null}equals(e){return this.value?.equals(e.value)||!1}};qi.OptionValue=kg;kg.ClassName="OptionValue";var Hg=class t extends La.TypedValue{constructor(e,r){super(e),this.backingCollection=new kz.CollectionOfTypedValues(r)}getClassName(){return t.ClassName}static fromItems(e){if(e.length==0)return new t(new La.TypePlaceholder,[]);let r=e[0].getType(),n=new Af(r);return new t(n,e)}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};qi.List=Hg;Hg.ClassName="List"});var zg=D(rc=>{"use strict";h();Object.defineProperty(rc,"__esModule",{value:!0});rc.ArrayVec=rc.ArrayVecType=void 0;var qx=Rn(),Hz=yA(),Vx=sr(),Gg=class t extends Vx.Type{constructor(e,r){super("Array",[r]),qx.guardTrue(e>0,"array length > 0"),this.length=e}getClassName(){return t.ClassName}};rc.ArrayVecType=Gg;Gg.ClassName="ArrayVecType";var jg=class t extends Vx.TypedValue{constructor(e,r){super(e),qx.guardLength(r,e.length),this.backingCollection=new Hz.CollectionOfTypedValues(r)}getClassName(){return t.ClassName}getLength(){return this.backingCollection.getLength()}getItems(){return this.backingCollection.getItems()}valueOf(){return this.backingCollection.valueOf()}equals(e){return this.backingCollection.equals(e.backingCollection)}};rc.ArrayVec=jg;jg.ClassName="ArrayVec"});var Sf=D(nc=>{"use strict";h();Object.defineProperty(nc,"__esModule",{value:!0});nc.H256Value=nc.H256Type=void 0;var kx=sr(),bf=class t extends kx.PrimitiveType{constructor(){super("H256")}getClassName(){return t.ClassName}};nc.H256Type=bf;bf.ClassName="H256Type";var Qg=class t extends kx.PrimitiveValue{constructor(e){super(new bf),this.value=e}getClassName(){return t.ClassName}equals(e){return this.value.equals(e.value)}valueOf(){return this.value}};nc.H256Value=Qg;Qg.ClassName="H256Value"});var Wg=D(ic=>{"use strict";h();Object.defineProperty(ic,"__esModule",{value:!0});ic.NothingValue=ic.NothingType=void 0;var Hx=sr(),If=class t extends Hx.PrimitiveType{constructor(){super("nothing")}getClassName(){return t.ClassName}};ic.NothingType=If;If.ClassName="NothingType";var Kg=class t extends Hx.PrimitiveValue{constructor(){super(new If)}getClassName(){return t.ClassName}equals(e){return!1}valueOf(){return{}}};ic.NothingValue=Kg;Kg.ClassName="NothingValue"});var Mf=D(Ee=>{"use strict";h();var Gz=Ee&&Ee.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jz=Ee&&Ee.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zz=Ee&&Ee.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gz(e,t,r);return jz(e,t),e},Qz=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.BigIntValue=Ee.BigUIntValue=Ee.I64Value=Ee.U64Value=Ee.I32Value=Ee.U32Value=Ee.I16Value=Ee.U16Value=Ee.I8Value=Ee.U8Value=Ee.NumericalValue=Ee.BigIntType=Ee.BigUIntType=Ee.I64Type=Ee.U64Type=Ee.I32Type=Ee.U32Type=Ee.I16Type=Ee.U16Type=Ee.I8Type=Ee.U8Type=Ee.NumericalType=void 0;var Kz=Qz((rr(),_e(fr))),Gx=zz(Ie()),jx=sr(),$r=class t extends jx.PrimitiveType{constructor(e,r,n){super(e),this.sizeInBytes=r,this.withSign=n}getClassName(){return t.ClassName}hasFixedSize(){return!!this.sizeInBytes}hasArbitrarySize(){return!this.hasFixedSize()}};Ee.NumericalType=$r;$r.ClassName="NumericalType";var Tf=class t extends $r{constructor(){super("u8",1,!1)}getClassName(){return t.ClassName}};Ee.U8Type=Tf;Tf.ClassName="U8Type";var _f=class t extends $r{constructor(){super("i8",1,!0)}getClassName(){return t.ClassName}};Ee.I8Type=_f;_f.ClassName="I8Type";var Cf=class t extends $r{constructor(){super("u16",2,!1)}getClassName(){return t.ClassName}};Ee.U16Type=Cf;Cf.ClassName="U16Type";var Nf=class t extends $r{constructor(){super("i16",2,!0)}getClassName(){return t.ClassName}};Ee.I16Type=Nf;Nf.ClassName="I16Type";var xf=class t extends $r{constructor(){super("u32",4,!1)}getClassName(){return t.ClassName}};Ee.U32Type=xf;xf.ClassName="U32Type";var Of=class t extends $r{constructor(){super("i32",4,!0)}getClassName(){return t.ClassName}};Ee.I32Type=Of;Of.ClassName="I32Type";var Df=class t extends $r{constructor(){super("u64",8,!1)}getClassName(){return t.ClassName}};Ee.U64Type=Df;Df.ClassName="U64Type";var Pf=class t extends $r{constructor(){super("i64",8,!0)}getClassName(){return t.ClassName}};Ee.I64Type=Pf;Pf.ClassName="I64Type";var Rf=class t extends $r{constructor(){super("BigUint",0,!1)}getClassName(){return t.ClassName}};Ee.BigUIntType=Rf;Rf.ClassName="BigUIntType";var Bf=class t extends $r{constructor(){super("Bigint",0,!0)}getClassName(){return t.ClassName}};Ee.BigIntType=Bf;Bf.ClassName="BigIntType";var Yr=class t extends jx.PrimitiveValue{constructor(e,r){if(super(e),typeof r=="bigint"&&(r=r.toString()),this.value=new Kz.default(r),this.sizeInBytes=e.sizeInBytes,this.withSign=e.withSign,this.value.isNaN())throw new Gx.ErrInvalidArgument(`not a number: ${r}`);if(!this.withSign&&this.value.isNegative())throw new Gx.ErrInvalidArgument(`negative, but type is unsigned: ${r}`)}getClassName(){return t.ClassName}equals(e){return this.value.isEqualTo(e.value)}valueOf(){return this.value}toString(){return this.value.toString()}};Ee.NumericalValue=Yr;Yr.ClassName="NumericalValue";var $g=class t extends Yr{constructor(e){super(new Tf,e)}getClassName(){return t.ClassName}};Ee.U8Value=$g;$g.ClassName="U8Value";var Yg=class t extends Yr{constructor(e){super(new _f,e)}getClassName(){return t.ClassName}};Ee.I8Value=Yg;Yg.ClassName="I8Value";var Jg=class t extends Yr{constructor(e){super(new Cf,e)}getClassName(){return t.ClassName}};Ee.U16Value=Jg;Jg.ClassName="U16Value";var Xg=class t extends Yr{constructor(e){super(new Nf,e)}getClassName(){return t.ClassName}};Ee.I16Value=Xg;Xg.ClassName="I16Value";var Zg=class t extends Yr{constructor(e){super(new xf,e)}getClassName(){return t.ClassName}};Ee.U32Value=Zg;Zg.ClassName="U32Value";var ep=class t extends Yr{constructor(e){super(new Of,e)}getClassName(){return t.ClassName}};Ee.I32Value=ep;ep.ClassName="I32Value";var tp=class t extends Yr{constructor(e){super(new Df,e)}getClassName(){return t.ClassName}};Ee.U64Value=tp;tp.ClassName="U64Value";var rp=class t extends Yr{constructor(e){super(new Pf,e)}getClassName(){return t.ClassName}};Ee.I64Value=rp;rp.ClassName="I64Value";var np=class t extends Yr{constructor(e){super(new Rf,e)}getClassName(){return t.ClassName}};Ee.BigUIntValue=np;np.ClassName="BigUIntValue";var ip=class t extends Yr{constructor(e){super(new Bf,e)}getClassName(){return t.ClassName}};Ee.BigIntValue=ip;ip.ClassName="BigIntValue"});var op=D(sc=>{"use strict";h();Object.defineProperty(sc,"__esModule",{value:!0});sc.StringValue=sc.StringType=void 0;var zx=sr(),Lf=class t extends zx.PrimitiveType{constructor(){super("utf-8 string")}getClassName(){return t.ClassName}};sc.StringType=Lf;Lf.ClassName="StringType";var sp=class t extends zx.PrimitiveValue{constructor(e){super(new Lf),this.value=e}getClassName(){return t.ClassName}static fromUTF8(e){return new t(e)}static fromHex(e){let r=p.Buffer.from(e,"hex").toString();return new t(r)}getLength(){return this.value.length}equals(e){return this.value===e.value}valueOf(){return this.value}};sc.StringValue=sp;sp.ClassName="StringValue"});var ac=D(oc=>{"use strict";h();Object.defineProperty(oc,"__esModule",{value:!0});oc.TokenIdentifierValue=oc.TokenIdentifierType=void 0;var Qx=sr(),Wz="EGLD",Ff=class t extends Qx.PrimitiveType{constructor(){super("TokenIdentifier")}getClassName(){return t.ClassName}};oc.TokenIdentifierType=Ff;Ff.ClassName="TokenIdentifierType";var ap=class t extends Qx.PrimitiveValue{constructor(e){super(new Ff),this.value=e}static egld(){return new t(Wz)}static esdtTokenIdentifier(e){return new t(e)}getClassName(){return t.ClassName}getLength(){return this.value.length}equals(e){return this.getLength()!=e.getLength()?!1:this.value==e.value}valueOf(){return this.value}toString(){return this.value.toString()}};oc.TokenIdentifierValue=ap;ap.ClassName="TokenIdentifierValue"});var cp=D(Bn=>{"use strict";h();var $z=Bn&&Bn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yz=Bn&&Bn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jz=Bn&&Bn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$z(e,t,r);return Yz(e,t),e};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.Tuple=Bn.TupleType=void 0;var Xz=Jz(Ie()),Kx=zu(),Wx=Wu(),Uf=class t extends Wx.StructType{constructor(...e){super(t.prepareName(e),t.prepareFieldDefinitions(e))}getClassName(){return t.ClassName}static prepareName(e){return`tuple<${e.map(i=>i.toString()).join(", ")}>`}static prepareFieldDefinitions(e){return e.map((n,i)=>new Kx.FieldDefinition($x(i),"anonymous tuple field",n))}};Bn.TupleType=Uf;Uf.ClassName="TupleType";function $x(t){return`field${t}`}var up=class t extends Wx.Struct{constructor(e,r){super(e,r)}getClassName(){return t.ClassName}static fromItems(e){if(e.length<1)throw new Xz.ErrTypingSystem("bad tuple items");let r=e.map(s=>s.getType()),n=new Uf(...r),i=e.map((s,o)=>new Kx.Field(s,$x(o)));return new t(n,i)}};Bn.Tuple=up;up.ClassName="Tuple"});var hp=D(mo=>{"use strict";h();Object.defineProperty(mo,"__esModule",{value:!0});mo.VariadicValue=mo.CountedVariadicType=mo.VariadicType=void 0;var uc=sr(),Fa=class t extends uc.Type{constructor(e,r=!1){super("Variadic",[e],uc.TypeCardinality.variable()),this.isCounted=r}getClassName(){return t.ClassName}};mo.VariadicType=Fa;Fa.ClassName="VariadicType";var lp=class extends uc.Type{constructor(e){super("Variadic",[e],uc.TypeCardinality.variable())}getClassName(){return Fa.ClassName}};mo.CountedVariadicType=lp;lp.ClassName="VariadicType";var fp=class t extends uc.TypedValue{constructor(e,r){super(e),this.items=r}getClassName(){return t.ClassName}static fromItems(...e){return this.createFromItems(e,!1)}static fromItemsCounted(...e){return this.createFromItems(e,!0)}static createFromItems(e,r){if(e.length==0)return new t(new Fa(new uc.TypePlaceholder,r),[]);let n=e[0].getType();return new t(new Fa(n,r),e)}getItems(){return this.items}valueOf(){return this.items.map(e=>e.valueOf())}equals(e){if(this.getType().differs(e.getType()))return!1;for(let r=0;r<this.items.length;r++){let n=this.items[r],i=e.items[r];if(!n.equals(i))return!1}return!0}};mo.VariadicValue=fp;fp.ClassName="VariadicValue"});var EA=D(ki=>{"use strict";h();var Zz=ki&&ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eQ=ki&&ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tQ=ki&&ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Zz(e,t,r);return eQ(e,t),e};Object.defineProperty(ki,"__esModule",{value:!0});ki.TypeMapper=void 0;var Yx=tQ(Ie()),rQ=Yu(),wA=Bg(),nQ=yf(),iQ=po(),sQ=Ux(),dp=qg(),vA=hf(),oQ=zu(),Jx=Ef(),Vi=zg(),aQ=Sf(),Xx=Wg(),Mn=Mf(),uQ=op(),Zx=Wu(),e6=ac(),yo=cp(),gp=hp(),AA=class{constructor(e=[]){this.openTypesFactories=new Map([["Option",(...r)=>new Jx.OptionType(r[0])],["List",(...r)=>new Jx.ListType(r[0])],["VarArgs",(...r)=>new gp.VariadicType(r[0])],["MultiResultVec",(...r)=>new gp.VariadicType(r[0])],["variadic",(...r)=>new gp.VariadicType(r[0])],["counted-variadic",(...r)=>new gp.VariadicType(r[0],!0)],["OptionalArg",(...r)=>new wA.OptionalType(r[0])],["optional",(...r)=>new wA.OptionalType(r[0])],["OptionalResult",(...r)=>new wA.OptionalType(r[0])],["multi",(...r)=>new dp.CompositeType(...r)],["MultiArg",(...r)=>new dp.CompositeType(...r)],["MultiResult",(...r)=>new dp.CompositeType(...r)],["multi",(...r)=>new dp.CompositeType(...r)],["tuple",(...r)=>new yo.TupleType(...r)],["tuple2",(...r)=>new yo.TupleType(...r)],["tuple3",(...r)=>new yo.TupleType(...r)],["tuple4",(...r)=>new yo.TupleType(...r)],["tuple5",(...r)=>new yo.TupleType(...r)],["tuple6",(...r)=>new yo.TupleType(...r)],["tuple7",(...r)=>new yo.TupleType(...r)],["tuple8",(...r)=>new yo.TupleType(...r)],["array2",(...r)=>new Vi.ArrayVecType(2,r[0])],["array8",(...r)=>new Vi.ArrayVecType(8,r[0])],["array16",(...r)=>new Vi.ArrayVecType(16,r[0])],["array20",(...r)=>new Vi.ArrayVecType(20,r[0])],["array32",(...r)=>new Vi.ArrayVecType(32,r[0])],["array46",(...r)=>new Vi.ArrayVecType(46,r[0])],["array48",(...r)=>new Vi.ArrayVecType(48,r[0])],["array64",(...r)=>new Vi.ArrayVecType(64,r[0])],["array128",(...r)=>new Vi.ArrayVecType(128,r[0])],["array256",(...r)=>new Vi.ArrayVecType(256,r[0])]]),this.closedTypesMap=new Map([["u8",new Mn.U8Type],["u16",new Mn.U16Type],["u32",new Mn.U32Type],["u64",new Mn.U64Type],["U64",new Mn.U64Type],["BigUint",new Mn.BigUIntType],["i8",new Mn.I8Type],["i16",new Mn.I16Type],["i32",new Mn.I32Type],["i64",new Mn.I64Type],["Bigint",new Mn.BigIntType],["BigInt",new Mn.BigIntType],["bool",new nQ.BooleanType],["bytes",new iQ.BytesType],["Address",new rQ.AddressType],["H256",new aQ.H256Type],["utf-8 string",new uQ.StringType],["TokenIdentifier",new e6.TokenIdentifierType],["EgldOrEsdtTokenIdentifier",new e6.TokenIdentifierType],["CodeMetadata",new sQ.CodeMetadataType],["nothing",new Xx.NothingType],["AsyncCall",new Xx.NothingType]]),this.learnedTypesMap=new Map;for(let r of e)this.learnedTypesMap.set(r.getName(),r)}mapType(e){let r=this.mapTypeRecursively(e);if(r)return r.isGenericType()||this.learnType(r),r;throw new Yx.ErrTypingSystem(`Cannot map the type "${e.getName()}" to a known type`)}mapTypeRecursively(e){let r=e.isGenericType(),n=this.learnedTypesMap.get(e.getName());if(n)return n;let i=this.closedTypesMap.get(e.getName());return i||(e.hasExactClass(vA.EnumType.ClassName)?this.mapEnumType(e):e.hasExactClass(Zx.StructType.ClassName)?this.mapStructType(e):r?this.mapGenericType(e):null)}learnType(e){this.learnedTypesMap.delete(e.getName()),this.learnedTypesMap.set(e.getName(),e)}mapStructType(e){let r=this.mappedFields(e.getFieldsDefinitions());return new Zx.StructType(e.getName(),r)}mapEnumType(e){let r=e.variants.map(i=>new vA.EnumVariantDefinition(i.name,i.discriminant,this.mappedFields(i.getFieldsDefinitions())));return new vA.EnumType(e.getName(),r)}mappedFields(e){return e.map(r=>new oQ.FieldDefinition(r.name,r.description,this.mapType(r.type)))}mapGenericType(e){let n=e.getTypeParameters().map(s=>this.mapType(s)),i=this.openTypesFactories.get(e.getName());if(!i)throw new Yx.ErrTypingSystem(`Cannot map the generic type "${e.getName()}" to a known type`);return i(...n)}};ki.TypeMapper=AA});var s6=D(Hi=>{"use strict";h();var cQ=Hi&&Hi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lQ=Hi&&Hi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fQ=Hi&&Hi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cQ(e,t,r);return lQ(e,t),e};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.AbiRegistry=void 0;var t6=fQ(Ie()),qf=Rn(),Vf=aA(),r6=hf(),bA=Px(),n6=Wu(),hQ=EA(),dQ="?",SA=class t{constructor(e){this.endpoints=[],this.customTypes=[],this.events=[],this.name=e.name,this.constructorDefinition=e.constructorDefinition,this.endpoints=e.endpoints,this.customTypes=e.customTypes,this.events=e.events||[]}static create(e){let r=e.name||dQ,n=e.constructor||{},i=e.endpoints||[],s=e.types||{},o=e.events||[],u=Vf.EndpointDefinition.fromJSON({name:"constructor",...n}),a=i.map(A=>Vf.EndpointDefinition.fromJSON(A)),c=[];for(let A in s){let T=s[A];if(T.type=="struct")c.push(n6.StructType.fromJSON({name:A,fields:T.fields}));else if(T.type=="enum"||T.type=="explicit-enum")c.push(r6.EnumType.fromJSON({name:A,variants:T.variants}));else throw new t6.ErrTypingSystem(`Cannot handle custom type: ${A}`)}let f=o.map(A=>bA.EventDefinition.fromJSON(A));return new t({name:r,constructorDefinition:u,endpoints:a,customTypes:c,events:f}).remapToKnownTypes()}getCustomType(e){let r=this.customTypes.find(n=>n.getName()==e);return qf.guardValueIsSetWithMessage(`custom type [${e}] not found`,r),r}getStruct(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass(n6.StructType.ClassName));return qf.guardValueIsSetWithMessage(`struct [${e}] not found`,r),r}getStructs(e){return e.map(r=>this.getStruct(r))}getEnum(e){let r=this.customTypes.find(n=>n.getName()==e&&n.hasExactClass(r6.EnumType.ClassName));return qf.guardValueIsSetWithMessage(`enum [${e}] not found`,r),r}getEnums(e){return e.map(r=>this.getEnum(r))}getEndpoints(){return this.endpoints}getEndpoint(e){let r=this.endpoints.find(n=>n.name==e);return qf.guardValueIsSetWithMessage(`endpoint [${e}] not found`,r),r}getEvent(e){let r=this.events.find(n=>n.identifier==e);return qf.guardValueIsSetWithMessage(`event [${e}] not found`,r),r}remapToKnownTypes(){let e=new hQ.TypeMapper([]),r=[];for(let u of this.customTypes)this.mapCustomTypeDepthFirst(u,this.customTypes,e,r);if(this.customTypes.length!=r.length)throw new t6.ErrTypingSystem("Did not re-map all custom types");let n=i6(this.constructorDefinition,e),i=[];for(let u of this.endpoints)i.push(i6(u,e));let s=this.events.map(u=>gQ(u,e));return new t({name:this.name,constructorDefinition:n,endpoints:i,customTypes:r,events:s})}mapCustomTypeDepthFirst(e,r,n,i){if(i.findIndex(u=>u.getName()==e.getName())>=0)return;for(let u of e.getNamesOfDependencies()){let a=r.find(c=>c.getName()==u);a&&this.mapCustomTypeDepthFirst(a,r,n,i)}let o=n.mapType(e);i.push(o)}};Hi.AbiRegistry=SA;function i6(t,e){let r=t.input.map(i=>new Vf.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type))),n=t.output.map(i=>new Vf.EndpointParameterDefinition(i.name,i.description,e.mapType(i.type)));return new Vf.EndpointDefinition(t.name,r,n,t.modifiers)}function gQ(t,e){let r=t.inputs.map(n=>new bA.EventTopicDefinition({name:n.name,type:e.mapType(n.type),indexed:n.indexed}));return new bA.EventDefinition(t.identifier,r)}});var a6=D(cc=>{"use strict";h();Object.defineProperty(cc,"__esModule",{value:!0});cc.createListOfTokenIdentifiers=cc.createListOfAddresses=void 0;var pQ=Yu(),o6=Ef(),mQ=ac();function yQ(t){let e=t.map(n=>new pQ.AddressValue(n));return o6.List.fromItems(e)}cc.createListOfAddresses=yQ;function wQ(t){let e=t.map(n=>new mQ.TokenIdentifierValue(n));return o6.List.fromItems(e)}cc.createListOfTokenIdentifiers=wQ});var E6=D(Dr=>{"use strict";h();var vQ=Dr&&Dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AQ=Dr&&Dr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EQ=Dr&&Dr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vQ(e,t,r);return AQ(e,t),e};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.onPrimitiveTypeSelect=Dr.onPrimitiveValueSelect=Dr.onTypedValueSelect=Dr.onTypeSelect=void 0;var mp=EQ(Ie()),u6=Yu(),c6=yf(),l6=po(),f6=hf(),pp=Ef(),h6=Sf(),d6=Mf(),g6=Wg(),p6=Wu(),m6=ac(),y6=cp(),w6=sr(),v6=zg(),A6=op();function bQ(t,e){if(t.hasExactClass(pp.OptionType.ClassName))return e.onOption();if(t.hasExactClass(pp.ListType.ClassName))return e.onList();if(t.hasExactClass(v6.ArrayVecType.ClassName))return e.onArray();if(t.hasClassOrSuperclass(w6.PrimitiveType.ClassName))return e.onPrimitive();if(t.hasExactClass(p6.StructType.ClassName))return e.onStruct();if(t.hasExactClass(y6.TupleType.ClassName))return e.onTuple();if(t.hasExactClass(f6.EnumType.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new mp.ErrTypingSystem(`type isn't known: ${t}`)}Dr.onTypeSelect=bQ;function SQ(t,e){if(t.hasClassOrSuperclass(w6.PrimitiveValue.ClassName))return e.onPrimitive();if(t.hasExactClass(pp.OptionValue.ClassName))return e.onOption();if(t.hasExactClass(pp.List.ClassName))return e.onList();if(t.hasExactClass(v6.ArrayVec.ClassName))return e.onArray();if(t.hasExactClass(p6.Struct.ClassName))return e.onStruct();if(t.hasExactClass(y6.Tuple.ClassName))return e.onTuple();if(t.hasExactClass(f6.EnumValue.ClassName))return e.onEnum();if(e.onOther)return e.onOther();throw new mp.ErrTypingSystem(`value isn't typed: ${t}`)}Dr.onTypedValueSelect=SQ;function IQ(t,e){if(t.hasExactClass(c6.BooleanValue.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(d6.NumericalValue.ClassName))return e.onNumerical();if(t.hasExactClass(u6.AddressValue.ClassName))return e.onAddress();if(t.hasExactClass(l6.BytesValue.ClassName))return e.onBytes();if(t.hasExactClass(A6.StringValue.ClassName))return e.onString();if(t.hasExactClass(h6.H256Value.ClassName))return e.onH256();if(t.hasExactClass(m6.TokenIdentifierValue.ClassName))return e.onTypeIdentifier();if(t.hasExactClass(g6.NothingValue.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new mp.ErrTypingSystem(`value isn't a primitive: ${t.getType()}`)}Dr.onPrimitiveValueSelect=IQ;function TQ(t,e){if(t.hasExactClass(c6.BooleanType.ClassName))return e.onBoolean();if(t.hasClassOrSuperclass(d6.NumericalType.ClassName))return e.onNumerical();if(t.hasExactClass(u6.AddressType.ClassName))return e.onAddress();if(t.hasExactClass(l6.BytesType.ClassName))return e.onBytes();if(t.hasExactClass(A6.StringType.ClassName))return e.onString();if(t.hasExactClass(h6.H256Type.ClassName))return e.onH256();if(t.hasExactClass(m6.TokenIdentifierType.ClassName))return e.onTokenIndetifier();if(t.hasExactClass(g6.NothingType.ClassName))return e.onNothing();if(e.onOther)return e.onOther();throw new mp.ErrTypingSystem(`type isn't a known primitive: ${t}`)}Dr.onPrimitiveTypeSelect=TQ});var dr=D(He=>{"use strict";h();var _Q=He&&He.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ut=He&&He.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_Q(e,t,r)};Object.defineProperty(He,"__esModule",{value:!0});Ut(s6(),He);Ut(Yu(),He);Ut(Bg(),He);Ut(yf(),He);Ut(po(),He);Ut(qg(),He);Ut(aA(),He);Ut(hf(),He);Ut(a6(),He);Ut(zu(),He);Ut(Ef(),He);Ut(zg(),He);Ut(Sf(),He);Ut(E6(),He);Ut(Wg(),He);Ut(Mf(),He);Ut(op(),He);Ut(Wu(),He);Ut(ac(),He);Ut(cp(),He);Ut(lf(),He);Ut(EA(),He);Ut(sr(),He);Ut(hp(),He)});var S6=D(Gi=>{"use strict";h();var CQ=Gi&&Gi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NQ=Gi&&Gi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xQ=Gi&&Gi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CQ(e,t,r);return NQ(e,t),e};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.OptionValueBinaryCodec=void 0;var b6=xQ(Ie()),yp=dr(),IA=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){if(e[0]==0)return[yp.OptionValue.newMissingTyped(r),1];if(e[0]!=1)throw new b6.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return[yp.OptionValue.newProvided(n),i+1]}decodeTopLevel(e,r){if(e.length==0)return new yp.OptionValue(r);if(e[0]!=1)throw new b6.ErrCodec("invalid buffer for optional value");let[n,i]=this.binaryCodec.decodeNested(e.slice(1),r);return new yp.OptionValue(r,n)}encodeNested(e){return e.isSet()?p.Buffer.concat([p.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):p.Buffer.from([0])}encodeTopLevel(e){return e.isSet()?p.Buffer.concat([p.Buffer.from([1]),this.binaryCodec.encodeNested(e.getTypedValue())]):p.Buffer.from([])}};Gi.OptionValueBinaryCodec=IA});var I6=D(wp=>{"use strict";h();Object.defineProperty(wp,"__esModule",{value:!0});wp.AddressBinaryCodec=void 0;var OQ=Ve(),DQ=dr(),TA=class{decodeNested(e){let r=e.slice(0,32),n=new OQ.Address(r);return[new DQ.AddressValue(n),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf().pubkey()}encodeTopLevel(e){return e.valueOf().pubkey()}};wp.AddressBinaryCodec=TA});var _6=D(ji=>{"use strict";h();var PQ=ji&&ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RQ=ji&&ji.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BQ=ji&&ji.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PQ(e,t,r);return RQ(e,t),e};Object.defineProperty(ji,"__esModule",{value:!0});ji.BooleanBinaryCodec=void 0;var MQ=BQ(Ie()),T6=dr(),kf=class t{decodeNested(e){let r=e.readUInt8(0);return[new T6.BooleanValue(r==t.TRUE),1]}decodeTopLevel(e){if(e.length>1)throw new MQ.ErrInvalidArgument("buffer should be of size <= 1");let r=e[0];return new T6.BooleanValue(r==t.TRUE)}encodeNested(e){return e.isTrue()?p.Buffer.from([t.TRUE]):p.Buffer.from([t.FALSE])}encodeTopLevel(e){return e.isTrue()?p.Buffer.from([t.TRUE]):p.Buffer.from([])}};ji.BooleanBinaryCodec=kf;kf.TRUE=1;kf.FALSE=0});var Ap=D(vp=>{"use strict";h();Object.defineProperty(vp,"__esModule",{value:!0});vp.SizeOfU32=void 0;vp.SizeOfU32=4});var N6=D(lc=>{"use strict";h();var LQ=lc&&lc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lc,"__esModule",{value:!0});lc.NumericalBinaryCodec=void 0;var Hf=LQ((rr(),_e(fr))),_A=dr(),C6=Ap(),$t=Bu(),CA=class{decodeNested(e,r){let n=0,i=r.sizeInBytes;i||(n=C6.SizeOfU32,i=e.readUInt32BE(0));let s=e.slice(n,n+i),o=this.decodeTopLevel(s,r),u=i+n;return[o,u]}decodeTopLevel(e,r){let n=$t.cloneBuffer(e);if(e.length==0)return new _A.NumericalValue(r,new Hf.default(0));if(!r.withSign||$t.isMsbZero(n)){let c=$t.bufferToBigInt(n);return new _A.NumericalValue(r,c)}$t.flipBufferBitsInPlace(n);let a=$t.bufferToBigInt(n).multipliedBy(new Hf.default(-1)).minus(new Hf.default(1));return new _A.NumericalValue(r,a)}encodeNested(e){if(e.sizeInBytes)return this.encodeNestedFixedSize(e,e.sizeInBytes);let r=this.encodeTopLevel(e),n=p.Buffer.alloc(C6.SizeOfU32);return n.writeUInt32BE(r.length),p.Buffer.concat([n,r])}encodeNestedFixedSize(e,r){if(e.value.isZero())return p.Buffer.alloc(r,0);if(!e.withSign){let o=$t.bigIntToBuffer(e.value),u=p.Buffer.alloc(r-o.length,0);return p.Buffer.concat([u,o])}if(e.value.isPositive()){let o=$t.bigIntToBuffer(e.value);$t.isMsbOne(o)&&(o=$t.prependByteToBuffer(o,0));let u=p.Buffer.alloc(r-o.length,0);return p.Buffer.concat([u,o])}let n=e.value.plus(new Hf.default(1)),i=$t.bigIntToBuffer(n);$t.flipBufferBitsInPlace(i),$t.isMsbZero(i)&&(i=$t.prependByteToBuffer(i,255));let s=p.Buffer.alloc(r-i.length,255);return p.Buffer.concat([s,i])}encodeTopLevel(e){let r=e.withSign;return e.value.isZero()?p.Buffer.alloc(0):r?this.encodePrimitive(e):$t.bigIntToBuffer(e.value)}encodePrimitive(e){if(e.value.isPositive()){let i=$t.bigIntToBuffer(e.value);return $t.isMsbOne(i)&&(i=$t.prependByteToBuffer(i,0)),i}let r=e.value.plus(new Hf.default(1)),n=$t.bigIntToBuffer(r);return $t.flipBufferBitsInPlace(n),$t.isMsbZero(n)&&(n=$t.prependByteToBuffer(n,255)),n}};lc.NumericalBinaryCodec=CA});var x6=D(Ep=>{"use strict";h();Object.defineProperty(Ep,"__esModule",{value:!0});Ep.H256BinaryCodec=void 0;var FQ=Sf(),NA=class{decodeNested(e){let r=e.slice(0,32);return[new FQ.H256Value(r),32]}decodeTopLevel(e){let[r,n]=this.decodeNested(e);return r}encodeNested(e){return e.valueOf()}encodeTopLevel(e){return e.valueOf()}};Ep.H256BinaryCodec=NA});var Ip=D(Sp=>{"use strict";h();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.BytesBinaryCodec=void 0;var O6=po(),bp=Ap(),xA=class{decodeNested(e){let r=e.readUInt32BE(0),n=e.slice(bp.SizeOfU32,bp.SizeOfU32+r);return[new O6.BytesValue(n),bp.SizeOfU32+r]}decodeTopLevel(e){return new O6.BytesValue(e)}encodeNested(e){let r=p.Buffer.alloc(bp.SizeOfU32);return r.writeUInt32BE(e.getLength()),p.Buffer.concat([r,e.valueOf()])}encodeTopLevel(e){return e.valueOf()}};Sp.BytesBinaryCodec=xA});var P6=D(Tp=>{"use strict";h();Object.defineProperty(Tp,"__esModule",{value:!0});Tp.TokenIdentifierCodec=void 0;var UQ=po(),D6=ac(),qQ=Ip(),OA=class{constructor(){this.bytesCodec=new qQ.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesCodec.decodeNested(e);return[new D6.TokenIdentifierValue(r.toString()),n]}decodeTopLevel(e){let r=this.bytesCodec.decodeTopLevel(e);return new D6.TokenIdentifierValue(r.toString())}encodeNested(e){let r=UQ.BytesValue.fromUTF8(e.valueOf());return this.bytesCodec.encodeNested(r)}encodeTopLevel(e){return p.Buffer.from(e.valueOf())}};Tp.TokenIdentifierCodec=OA});var B6=D(_p=>{"use strict";h();Object.defineProperty(_p,"__esModule",{value:!0});_p.NothingCodec=void 0;var R6=dr(),DA=class{decodeNested(){return[new R6.NothingValue,0]}decodeTopLevel(){return new R6.NothingValue}encodeNested(){return p.Buffer.from([])}encodeTopLevel(){return p.Buffer.from([])}};_p.NothingCodec=DA});var L6=D(Cp=>{"use strict";h();Object.defineProperty(Cp,"__esModule",{value:!0});Cp.StringBinaryCodec=void 0;var M6=dr(),VQ=po(),kQ=Ip(),PA=class{constructor(){this.bytesBinaryCodec=new kQ.BytesBinaryCodec}decodeNested(e){let[r,n]=this.bytesBinaryCodec.decodeNested(e);return[new M6.StringValue(r.valueOf().toString()),n]}decodeTopLevel(e){return new M6.StringValue(e.toString())}encodeNested(e){let r=VQ.BytesValue.fromUTF8(e.valueOf());return this.bytesBinaryCodec.encodeNested(r)}encodeTopLevel(e){return p.Buffer.from(e.valueOf())}};Cp.StringBinaryCodec=PA});var F6=D(xp=>{"use strict";h();Object.defineProperty(xp,"__esModule",{value:!0});xp.PrimitiveBinaryCodec=void 0;var Np=dr(),HQ=I6(),GQ=_6(),jQ=N6(),zQ=x6(),QQ=Ip(),KQ=P6(),WQ=B6(),$Q=L6(),RA=class{constructor(e){this.binaryCodec=e,this.booleanCodec=new GQ.BooleanBinaryCodec,this.numericalCodec=new jQ.NumericalBinaryCodec,this.addressCodec=new HQ.AddressBinaryCodec,this.h256Codec=new zQ.H256BinaryCodec,this.bytesCodec=new QQ.BytesBinaryCodec,this.stringCodec=new $Q.StringBinaryCodec,this.tokenIdentifierCodec=new KQ.TokenIdentifierCodec,this.nothingCodec=new WQ.NothingCodec}decodeNested(e,r){return Np.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeNested(e),onNumerical:()=>this.numericalCodec.decodeNested(e,r),onAddress:()=>this.addressCodec.decodeNested(e),onBytes:()=>this.bytesCodec.decodeNested(e),onString:()=>this.stringCodec.decodeNested(e),onH256:()=>this.h256Codec.decodeNested(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeNested(e),onNothing:()=>this.nothingCodec.decodeNested()})}decodeTopLevel(e,r){return Np.onPrimitiveTypeSelect(r,{onBoolean:()=>this.booleanCodec.decodeTopLevel(e),onNumerical:()=>this.numericalCodec.decodeTopLevel(e,r),onAddress:()=>this.addressCodec.decodeTopLevel(e),onBytes:()=>this.bytesCodec.decodeTopLevel(e),onString:()=>this.stringCodec.decodeTopLevel(e),onH256:()=>this.h256Codec.decodeTopLevel(e),onTokenIndetifier:()=>this.tokenIdentifierCodec.decodeTopLevel(e),onNothing:()=>this.nothingCodec.decodeTopLevel()})}encodeNested(e){return Np.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeNested(e),onNumerical:()=>this.numericalCodec.encodeNested(e),onAddress:()=>this.addressCodec.encodeNested(e),onBytes:()=>this.bytesCodec.encodeNested(e),onString:()=>this.stringCodec.encodeNested(e),onH256:()=>this.h256Codec.encodeNested(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeNested(e),onNothing:()=>this.nothingCodec.encodeNested()})}encodeTopLevel(e){return Np.onPrimitiveValueSelect(e,{onBoolean:()=>this.booleanCodec.encodeTopLevel(e),onNumerical:()=>this.numericalCodec.encodeTopLevel(e),onAddress:()=>this.addressCodec.encodeTopLevel(e),onBytes:()=>this.bytesCodec.encodeTopLevel(e),onString:()=>this.stringCodec.encodeTopLevel(e),onH256:()=>this.h256Codec.encodeTopLevel(e),onTypeIdentifier:()=>this.tokenIdentifierCodec.encodeTopLevel(e),onNothing:()=>this.nothingCodec.encodeTopLevel()})}};xp.PrimitiveBinaryCodec=RA});var V6=D(Op=>{"use strict";h();Object.defineProperty(Op,"__esModule",{value:!0});Op.ListBinaryCodec=void 0;var U6=dr(),q6=Ap(),BA=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.getFirstTypeParameter(),i=[],s=e.readUInt32BE(0);this.binaryCodec.constraints.checkListLength(s);let o=e,u=q6.SizeOfU32;e=o.slice(u);for(let a=0;a<s;a++){let[c,f]=this.binaryCodec.decodeNested(e,n);i.push(c),u+=f,e=o.slice(u)}return[new U6.List(r,i),u]}decodeTopLevel(e,r){let n=r.getFirstTypeParameter(),i=[],s=e,o=0;for(;e.length>0;){let[u,a]=this.binaryCodec.decodeNested(e,n);i.push(u),o+=a,e=s.slice(o),this.binaryCodec.constraints.checkListLength(i.length)}return new U6.List(r,i)}encodeNested(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=p.Buffer.alloc(q6.SizeOfU32);r.writeUInt32BE(e.getLength());let n=[];for(let s of e.getItems()){let o=this.binaryCodec.encodeNested(s);n.push(o)}return p.Buffer.concat([r,...n])}encodeTopLevel(e){this.binaryCodec.constraints.checkListLength(e.getLength());let r=[];for(let i of e.getItems()){let s=this.binaryCodec.encodeNested(i);r.push(s)}return p.Buffer.concat(r)}};Op.ListBinaryCodec=BA});var LA=D(Dp=>{"use strict";h();Object.defineProperty(Dp,"__esModule",{value:!0});Dp.FieldsBinaryCodec=void 0;var YQ=dr(),MA=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=[],i=0;for(let s of r){let[o,u]=this.binaryCodec.decodeNested(e,s.type);e=e.slice(u),i+=u;let a=new YQ.Field(o,s.name);n.push(a)}return[n,i]}encodeNested(e){let r=[];for(let n of e){let i=this.binaryCodec.encodeNested(n.value);r.push(i)}return p.Buffer.concat(r)}};Dp.FieldsBinaryCodec=MA});var UA=D(Pp=>{"use strict";h();Object.defineProperty(Pp,"__esModule",{value:!0});Pp.StructBinaryCodec=void 0;var JQ=dr(),XQ=LA(),FA=class{constructor(e){this.fieldsCodec=new XQ.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let n=r.getFieldsDefinitions(),[i,s]=this.fieldsCodec.decodeNested(e,n);return[new JQ.Struct(r,i),s]}encodeNested(e){let r=e.getFields();return this.fieldsCodec.encodeNested(r)}encodeTopLevel(e){return this.encodeNested(e)}};Pp.StructBinaryCodec=FA});var k6=D(Bp=>{"use strict";h();Object.defineProperty(Bp,"__esModule",{value:!0});Bp.EnumBinaryCodec=void 0;var Rp=dr(),ZQ=LA(),qA=class{constructor(e){this.binaryCodec=e,this.fieldsCodec=new ZQ.FieldsBinaryCodec(e)}decodeTopLevel(e,r){let[n]=this.decodeNested(e,r);return n}decodeNested(e,r){let[n,i]=this.readDiscriminant(e);e=e.slice(i);let s=r.getVariantByDiscriminant(n),o=s.getFieldsDefinitions(),[u,a]=this.fieldsCodec.decodeNested(e,o);return[new Rp.EnumValue(r,s,u),i+a]}readDiscriminant(e){let[r,n]=this.binaryCodec.decodeNested(e,new Rp.U8Type);return[r.valueOf(),n]}encodeNested(e){let r=new Rp.U8Value(e.discriminant),n=this.binaryCodec.encodeNested(r),i=e.getFields(),s=this.fieldsCodec.encodeNested(i);return p.Buffer.concat([n,s])}encodeTopLevel(e){let r=e.getFields(),n=r.length>0,i=this.fieldsCodec.encodeNested(r),s=new Rp.U8Value(e.discriminant),o=n?this.binaryCodec.encodeNested(s):this.binaryCodec.encodeTopLevel(s);return p.Buffer.concat([o,i])}};Bp.EnumBinaryCodec=qA});var H6=D(Mp=>{"use strict";h();Object.defineProperty(Mp,"__esModule",{value:!0});Mp.TupleBinaryCodec=void 0;var eK=UA(),VA=class{constructor(e){this.structCodec=new eK.StructBinaryCodec(e)}decodeTopLevel(e,r){return this.structCodec.decodeTopLevel(e,r)}decodeNested(e,r){return this.structCodec.decodeNested(e,r)}encodeNested(e){return this.structCodec.encodeNested(e)}encodeTopLevel(e){return this.structCodec.encodeTopLevel(e)}};Mp.TupleBinaryCodec=VA});var G6=D(Lp=>{"use strict";h();Object.defineProperty(Lp,"__esModule",{value:!0});Lp.ArrayVecBinaryCodec=void 0;var tK=dr(),kA=class{constructor(e){this.binaryCodec=e}decodeNested(e,r){let n=r.length,i=r.getFirstTypeParameter(),s=[],o=0;for(let u=0;u<n;u++){let[a,c]=this.binaryCodec.decodeNested(e,i);s.push(a),o+=c,e=e.slice(c)}return[new tK.ArrayVec(r,s),o]}decodeTopLevel(e,r){let[n,i]=this.decodeNested(e,r);return n}encodeNested(e){let r=[];for(let n of e.getItems()){let i=this.binaryCodec.encodeNested(n);r.push(i)}return p.Buffer.concat(r)}encodeTopLevel(e){return this.encodeNested(e)}};Lp.ArrayVecBinaryCodec=kA});var GA=D(Ln=>{"use strict";h();var rK=Ln&&Ln.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nK=Ln&&Ln.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iK=Ln&&Ln.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rK(e,t,r);return nK(e,t),e};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.BinaryCodecConstraints=Ln.BinaryCodec=void 0;var j6=iK(Ie()),Fp=dr(),z6=Rn(),sK=S6(),oK=F6(),aK=V6(),uK=UA(),cK=k6(),lK=H6(),fK=G6(),HA=class{constructor(e=null){this.constraints=e||new Up,this.optionCodec=new sK.OptionValueBinaryCodec(this),this.listCodec=new aK.ListBinaryCodec(this),this.arrayCodec=new fK.ArrayVecBinaryCodec(this),this.primitiveCodec=new oK.PrimitiveBinaryCodec(this),this.structCodec=new uK.StructBinaryCodec(this),this.tupleCodec=new lK.TupleBinaryCodec(this),this.enumCodec=new cK.EnumBinaryCodec(this)}decodeTopLevel(e,r){return this.constraints.checkBufferLength(e),Fp.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeTopLevel(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeTopLevel(e,r),onArray:()=>this.arrayCodec.decodeTopLevel(e,r),onPrimitive:()=>this.primitiveCodec.decodeTopLevel(e,r),onStruct:()=>this.structCodec.decodeTopLevel(e,r),onTuple:()=>this.tupleCodec.decodeTopLevel(e,r),onEnum:()=>this.enumCodec.decodeTopLevel(e,r)})}decodeNested(e,r){this.constraints.checkBufferLength(e);let[n,i]=Fp.onTypeSelect(r,{onOption:()=>this.optionCodec.decodeNested(e,r.getFirstTypeParameter()),onList:()=>this.listCodec.decodeNested(e,r),onArray:()=>this.arrayCodec.decodeNested(e,r),onPrimitive:()=>this.primitiveCodec.decodeNested(e,r),onStruct:()=>this.structCodec.decodeNested(e,r),onTuple:()=>this.tupleCodec.decodeNested(e,r),onEnum:()=>this.enumCodec.decodeNested(e,r)});return[n,i]}encodeNested(e){return z6.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),Fp.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeNested(e),onOption:()=>this.optionCodec.encodeNested(e),onList:()=>this.listCodec.encodeNested(e),onArray:()=>this.arrayCodec.encodeNested(e),onStruct:()=>this.structCodec.encodeNested(e),onTuple:()=>this.tupleCodec.encodeNested(e),onEnum:()=>this.enumCodec.encodeNested(e)})}encodeTopLevel(e){return z6.guardTrue(e.getType().getCardinality().isSingular(),"singular cardinality, thus encodable type"),Fp.onTypedValueSelect(e,{onPrimitive:()=>this.primitiveCodec.encodeTopLevel(e),onOption:()=>this.optionCodec.encodeTopLevel(e),onList:()=>this.listCodec.encodeTopLevel(e),onArray:()=>this.arrayCodec.encodeTopLevel(e),onStruct:()=>this.structCodec.encodeTopLevel(e),onTuple:()=>this.tupleCodec.encodeTopLevel(e),onEnum:()=>this.enumCodec.encodeTopLevel(e)})}};Ln.BinaryCodec=HA;var Up=class{constructor(e){this.maxBufferLength=e?.maxBufferLength||256e3,this.maxListLength=e?.maxListLength||128e3}checkBufferLength(e){if(e.length>this.maxBufferLength)throw new j6.ErrCodec(`Buffer too large: ${e.length} > ${this.maxBufferLength}`)}checkListLength(e){if(e>this.maxListLength)throw new j6.ErrCodec(`List too large: ${e} > ${this.maxListLength}`)}};Ln.BinaryCodecConstraints=Up});var Q6=D(Fn=>{"use strict";h();var hK=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.decodeBigNumber=Fn.decodeString=Fn.decodeBool=Fn.decodeUnsignedNumber=void 0;var dK=hK((rr(),_e(fr))),qp=dr(),gK=GA(),Vp=new gK.BinaryCodec;function pK(t){let e=Vp.decodeTopLevel(t,new qp.BigUIntType);return Number(e.valueOf())}Fn.decodeUnsignedNumber=pK;function mK(t){return!!Vp.decodeTopLevel(t,new qp.BooleanType).valueOf()}Fn.decodeBool=mK;function yK(t){let e=Vp.decodeTopLevel(t,new qp.BytesType);return String(e.valueOf())}Fn.decodeString=yK;function wK(t){let e=Vp.decodeTopLevel(t,new qp.BigUIntType);return new dK.default(e.valueOf())}Fn.decodeBigNumber=wK});var jA=D(wo=>{"use strict";h();var vK=wo&&wo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),K6=wo&&wo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vK(e,t,r)};Object.defineProperty(wo,"__esModule",{value:!0});K6(GA(),wo);K6(Q6(),wo)});var fc=D(kp=>{"use strict";h();Object.defineProperty(kp,"__esModule",{value:!0});kp.ArgSerializer=void 0;var W6=hr(),AK=jA(),$6=dr(),zA=Bg(),QA=qg(),KA=hp(),EK={codec:new AK.BinaryCodec},WA=class{constructor(e){e={...EK,...e},this.codec=e.codec}stringToValues(e,r){let n=this.stringToBuffers(e);return this.buffersToValues(n,r)}stringToBuffers(e){return e.split(W6.ARGUMENTS_SEPARATOR).map(r=>p.Buffer.from(r,"hex"))}buffersToValues(e,r){let n=this;e=e||[];let i=[],s=0,o=e.length;for(let d=0;d<r.length;d++){let A=r[d].type,T=u(A);i.push(T)}function u(d){if(d.hasExactClass(zA.OptionalType.ClassName)){let A=u(d.getFirstTypeParameter());return new zA.OptionalValue(d,A)}if(d.hasExactClass(KA.VariadicType.ClassName))return a(d);if(d.hasExactClass(QA.CompositeType.ClassName)){let A=[];for(let T of d.getTypeParameters())A.push(u(T));return new QA.CompositeValue(d,A)}return c(d)}function a(d){let w=d,A=[];if(w.isCounted){let T=u(new $6.U32Type).valueOf().toNumber();for(let x=0;x<T;x++)A.push(u(d.getFirstTypeParameter()))}else for(;!f();)A.push(u(d.getFirstTypeParameter()));return new KA.VariadicValue(w,A)}function c(d){if(f())return null;let w=e[s++];return n.codec.decodeTopLevel(w,d)}function f(){return s>=o}return i}valuesToString(e){let r=this.valuesToStrings(e),n=r.join(W6.ARGUMENTS_SEPARATOR),i=r.length;return{argumentsString:n,count:i}}valuesToStrings(e){return this.valuesToBuffers(e).map(i=>i.toString("hex"))}valuesToBuffers(e){let r=this,n=[];for(let o of e)i(o);function i(o){if(o.hasExactClass(zA.OptionalValue.ClassName)){let a=o;a.isSet()&&i(a.getTypedValue());return}if(o.hasExactClass(KA.VariadicValue.ClassName)){s(o);return}if(o.hasExactClass(QA.CompositeValue.ClassName)){let a=o;for(let c of a.getItems())i(c);return}let u=r.codec.encodeTopLevel(o);n.push(u)}function s(o){if(o.getType().isCounted){let a=new $6.U32Value(o.getItems().length);n.push(r.codec.encodeTopLevel(a))}for(let a of o.getItems())i(a)}return n}};kp.ArgSerializer=WA});var $A=D((xye,Y6)=>{h();Rs.notEqual=SK;Rs.notOk=IK;Rs.equal=bK;Rs.ok=Rs;Y6.exports=Rs;function bK(t,e,r){Rs(t==e,r)}function SK(t,e,r){Rs(t!=e,r)}function IK(t,e){Rs(!t,e)}function Rs(t,e){if(!t)throw new Error(e||"AssertionError")}});var X6=D((Dye,J6)=>{h();J6.exports=YA;YA.supported=typeof WebAssembly<"u";function YA(t){if(!YA.supported)return null;var e=t&&t.imports,r=TK("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMK00AElgMAIABCADcDACAAQQhqQgA3AwAgAEEQakIANwMAIABBGGpCADcDACAAQSBqQgA3AwAgAEEoakIANwMAIABBMGpCADcDACAAQThqQgA3AwAgAEHAAGpCADcDACAAQcgAakIANwMAIABB0ABqQgA3AwAgAEHYAGpCADcDACAAQeAAakIANwMAIABB6ABqQgA3AwAgAEHwAGpCADcDACAAQfgAakIANwMAIABBgAFqQoiS853/zPmE6gBBACkDAIU3AwAgAEGIAWpCu86qptjQ67O7f0EIKQMAhTcDACAAQZABakKr8NP0r+68tzxBECkDAIU3AwAgAEGYAWpC8e30+KWn/aelf0EYKQMAhTcDACAAQaABakLRhZrv+s+Uh9EAQSApAwCFNwMAIABBqAFqQp/Y+dnCkdqCm39BKCkDAIU3AwAgAEGwAWpC6/qG2r+19sEfQTApAwCFNwMAIABBuAFqQvnC+JuRo7Pw2wBBOCkDAIU3AwAgAEHAAWpCADcDACAAQcgBakIANwMAIABB0AFqQgA3AwALbQEDfyAAQcABaiEDIABByAFqIQQgBCkDAKchBQJAA0AgASACRg0BIAVBgAFGBEAgAyADKQMAIAWtfDcDAEEAIQUgABADCyAAIAVqIAEtAAA6AAAgBUEBaiEFIAFBAWohAQwACwsgBCAFrTcDAAtkAQN/IABBwAFqIQEgAEHIAWohAiABIAEpAwAgAikDAHw3AwAgAEHQAWpCfzcDACACKQMApyEDAkADQCADQYABRg0BIAAgA2pBADoAACADQQFqIQMMAAsLIAIgA603AwAgABADC+U7AiB+CX8gAEGAAWohISAAQYgBaiEiIABBkAFqISMgAEGYAWohJCAAQaABaiElIABBqAFqISYgAEGwAWohJyAAQbgBaiEoICEpAwAhASAiKQMAIQIgIykDACEDICQpAwAhBCAlKQMAIQUgJikDACEGICcpAwAhByAoKQMAIQhCiJLznf/M+YTqACEJQrvOqqbY0Ouzu38hCkKr8NP0r+68tzwhC0Lx7fT4paf9p6V/IQxC0YWa7/rPlIfRACENQp/Y+dnCkdqCm38hDkLr+obav7X2wR8hD0L5wvibkaOz8NsAIRAgACkDACERIABBCGopAwAhEiAAQRBqKQMAIRMgAEEYaikDACEUIABBIGopAwAhFSAAQShqKQMAIRYgAEEwaikDACEXIABBOGopAwAhGCAAQcAAaikDACEZIABByABqKQMAIRogAEHQAGopAwAhGyAAQdgAaikDACEcIABB4ABqKQMAIR0gAEHoAGopAwAhHiAAQfAAaikDACEfIABB+ABqKQMAISAgDSAAQcABaikDAIUhDSAPIABB0AFqKQMAhSEPIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBx8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAZfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgHXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBF8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAWfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgE3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIICB8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAefHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgG3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB98fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAUfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgF3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBh8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCASfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBV8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAYfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgGnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBR8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiASfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB18fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAcfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggH3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBN8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAXfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgFnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBt8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAVfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggEXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFICB8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAZfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgGnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBF8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAWfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBN8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAVfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggG3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIICB8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAffHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBx8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAdfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggF3x8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBl8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAUfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgHnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBN8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAdfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgF3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBt8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByARfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBl8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAUfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgFXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB58fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAYfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFnx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIICB8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAffHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgEnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBp8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAdfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgFnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBJ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAgfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgH3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIB58fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAVfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggG3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBF8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAYfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgF3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBR8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAafHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggE3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBl8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAcfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHnx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBx8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAYfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgH3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIB18fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByASfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggFHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBp8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAWfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgEXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHICB8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAVfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBd8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSATfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgG3x8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBd8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAgfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgH3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBp8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAcfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBF8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAZfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgHXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBN8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAefHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgGHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBJ8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAVfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgG3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBZ8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAbfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgE3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBl8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAVfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGHx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBd8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCASfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggFnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGICB8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAcfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgGnx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB98fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAUfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB58fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSARfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgEXx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBJ8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiATfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgFHx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBV8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAWfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggF3x8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBh8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAZfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgGnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBt8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAcfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHXx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB58fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAffHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgIHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB98fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAbfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBl8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAafHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgIHx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIB58fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAXfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEnx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIB18fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByARfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgE3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBx8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAYfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgFnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBR8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFICEgISkDACABIAmFhTcDACAiICIpAwAgAiAKhYU3AwAgIyAjKQMAIAMgC4WFNwMAICQgJCkDACAEIAyFhTcDACAlICUpAwAgBSANhYU3AwAgJiAmKQMAIAYgDoWFNwMAICcgJykDACAHIA+FhTcDACAoICgpAwAgCCAQhYU3AwAL"),n=null,i={buffer:r,memory:null,exports:null,realloc:s,onload:o};return o(function(){}),i;function s(a){i.exports.memory.grow(Math.ceil(Math.abs(a-i.memory.length)/65536)),i.memory=new Uint8Array(i.exports.memory.buffer)}function o(a){if(i.exports)return a();if(n){n.then(a.bind(null,null)).catch(a);return}try{if(t&&t.async)throw new Error("async");u({instance:new WebAssembly.Instance(new WebAssembly.Module(r),e)})}catch{n=WebAssembly.instantiate(r,e).then(u)}o(a)}function u(a){i.exports=a.instance.exports,i.memory=i.exports.memory&&i.exports.memory.buffer&&new Uint8Array(i.exports.memory.buffer)}}function TK(t){return typeof atob=="function"?new Uint8Array(atob(t).split("").map(_K)):new(io()).Buffer(t,"base64")}function _K(t){return t.charCodeAt(0)}});var sO=D((Mye,Qi)=>{h();var zi=$A(),xt=X6()(),Bs=64,Hp=[];Qi.exports=Un;var Z6=Qi.exports.BYTES_MIN=16,eO=Qi.exports.BYTES_MAX=64,Rye=Qi.exports.BYTES=32,tO=Qi.exports.KEYBYTES_MIN=16,rO=Qi.exports.KEYBYTES_MAX=64,Bye=Qi.exports.KEYBYTES=32,nO=Qi.exports.SALTBYTES=16,iO=Qi.exports.PERSONALBYTES=16;function Un(t,e,r,n,i){if(!(this instanceof Un))return new Un(t,e,r,n,i);if(!(xt&&xt.exports))throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),i!==!0&&(zi(t>=Z6,"digestLength must be at least "+Z6+", was given "+t),zi(t<=eO,"digestLength must be at most "+eO+", was given "+t),e!=null&&zi(e.length>=tO,"key must be at least "+tO+", was given "+e.length),e!=null&&zi(e.length<=rO,"key must be at least "+rO+", was given "+e.length),r!=null&&zi(r.length===nO,"salt must be exactly "+nO+", was given "+r.length),n!=null&&zi(n.length===iO,"personal must be exactly "+iO+", was given "+n.length)),Hp.length||(Hp.push(Bs),Bs+=216),this.digestLength=t,this.finalized=!1,this.pointer=Hp.pop(),xt.memory.fill(0,0,64),xt.memory[0]=this.digestLength,xt.memory[1]=e?e.length:0,xt.memory[2]=1,xt.memory[3]=1,r&&xt.memory.set(r,32),n&&xt.memory.set(n,48),this.pointer+216>xt.memory.length&&xt.realloc(this.pointer+216),xt.exports.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),xt.memory.fill(0,Bs,Bs+e.length),xt.memory[this.pointer+200]=128)}Un.prototype.update=function(t){return zi(this.finalized===!1,"Hash instance finalized"),zi(t,"input must be TypedArray or Buffer"),Bs+t.length>xt.memory.length&&xt.realloc(Bs+t.length),xt.memory.set(t,Bs),xt.exports.blake2b_update(this.pointer,Bs,Bs+t.length),this};Un.prototype.digest=function(t){if(zi(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,Hp.push(this.pointer),xt.exports.blake2b_final(this.pointer),!t||t==="binary")return xt.memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(t==="hex")return NK(xt.memory,this.pointer+128,this.digestLength);zi(t.length>=this.digestLength,"input must be TypedArray or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=xt.memory[this.pointer+128+e];return t};Un.prototype.final=Un.prototype.digest;Un.WASM=xt&&xt.buffer;Un.SUPPORTED=typeof WebAssembly<"u";Un.ready=function(t){if(t||(t=CK),!xt)return t(new Error("WebAssembly not supported"));var e=new Promise(function(r,n){xt.onload(function(i){i?n():r(),t(i)})});return e};Un.prototype.ready=Un.ready;function CK(){}function NK(t,e,r){for(var n="",i=0;i<r;i++)n+=xK(t[e+i]);return n}function xK(t){return t<16?"0"+t.toString(16):t.toString(16)}});var JA=D((qye,Jr)=>{h();var Eo=$A(),jf=sO();function Gp(t,e,r){var n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function oO(t,e,r,n){var i=t[e]+r;r<0&&(i+=4294967296);var s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function dO(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function vo(t,e,r,n,i,s){var o=Gf[i],u=Gf[i+1],a=Gf[s],c=Gf[s+1];Gp(Te,t,e),oO(Te,t,o,u);var f=Te[n]^Te[t],d=Te[n+1]^Te[t+1];Te[n]=d,Te[n+1]=f,Gp(Te,r,n),f=Te[e]^Te[r],d=Te[e+1]^Te[r+1],Te[e]=f>>>24^d<<8,Te[e+1]=d>>>24^f<<8,Gp(Te,t,e),oO(Te,t,a,c),f=Te[n]^Te[t],d=Te[n+1]^Te[t+1],Te[n]=f>>>16^d<<16,Te[n+1]=d>>>16^f<<16,Gp(Te,r,n),f=Te[e]^Te[r],d=Te[e+1]^Te[r+1],Te[e]=d>>>31^f<<1,Te[e+1]=f>>>31^d<<1}var gO=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),OK=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Pr=new Uint8Array(OK.map(function(t){return t*2})),Te=new Uint32Array(32),Gf=new Uint32Array(32);function pO(t,e){var r=0;for(r=0;r<16;r++)Te[r]=t.h[r],Te[r+16]=gO[r];for(Te[24]=Te[24]^t.t,Te[25]=Te[25]^t.t/4294967296,e&&(Te[28]=~Te[28],Te[29]=~Te[29]),r=0;r<32;r++)Gf[r]=dO(t.b,4*r);for(r=0;r<12;r++)vo(0,8,16,24,Pr[r*16+0],Pr[r*16+1]),vo(2,10,18,26,Pr[r*16+2],Pr[r*16+3]),vo(4,12,20,28,Pr[r*16+4],Pr[r*16+5]),vo(6,14,22,30,Pr[r*16+6],Pr[r*16+7]),vo(0,10,20,30,Pr[r*16+8],Pr[r*16+9]),vo(2,12,22,24,Pr[r*16+10],Pr[r*16+11]),vo(4,14,16,26,Pr[r*16+12],Pr[r*16+13]),vo(6,8,18,28,Pr[r*16+14],Pr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Te[r]^Te[r+16]}var Ao=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function hc(t,e,r,n){Ao.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,Ao[0]=t,e&&(Ao[1]=e.length),Ao[2]=1,Ao[3]=1,r&&Ao.set(r,32),n&&Ao.set(n,48);for(var i=0;i<16;i++)this.h[i]=gO[i]^dO(Ao,i*4);e&&(mO(this,e),this.c=128)}hc.prototype.update=function(t){return Eo(t!=null,"input must be Uint8Array or Buffer"),mO(this,t),this};hc.prototype.digest=function(t){var e=!t||t==="binary"||t==="hex"?new Uint8Array(this.outlen):t;return Eo(e.length>=this.outlen,"out must have at least outlen bytes of space"),DK(this,e),t==="hex"?PK(e):e};hc.prototype.final=hc.prototype.digest;hc.ready=function(t){jf.ready(function(){t()})};function mO(t,e){for(var r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,pO(t,!1),t.c=0),t.b[t.c++]=e[r]}function DK(t,e){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;pO(t,!0);for(var r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function PK(t){for(var e="",r=0;r<t.length;r++)e+=RK(t[r]);return e}function RK(t){return t<16?"0"+t.toString(16):t.toString(16)}var yO=hc;Jr.exports=function(e,r,n,i,s){return s!==!0&&(Eo(e>=aO,"outlen must be at least "+aO+", was given "+e),Eo(e<=uO,"outlen must be at most "+uO+", was given "+e),r!=null&&Eo(r.length>=cO,"key must be at least "+cO+", was given "+r.length),r!=null&&Eo(r.length<=lO,"key must be at most "+lO+", was given "+r.length),n!=null&&Eo(n.length===fO,"salt must be exactly "+fO+", was given "+n.length),i!=null&&Eo(i.length===hO,"personal must be exactly "+hO+", was given "+i.length)),new yO(e,r,n,i)};Jr.exports.ready=function(t){jf.ready(function(){t()})};Jr.exports.WASM_SUPPORTED=jf.SUPPORTED;Jr.exports.WASM_LOADED=!1;var aO=Jr.exports.BYTES_MIN=16,uO=Jr.exports.BYTES_MAX=64,Fye=Jr.exports.BYTES=32,cO=Jr.exports.KEYBYTES_MIN=16,lO=Jr.exports.KEYBYTES_MAX=64,Uye=Jr.exports.KEYBYTES=32,fO=Jr.exports.SALTBYTES=16,hO=Jr.exports.PERSONALBYTES=16;jf.ready(function(t){t||(Jr.exports.WASM_LOADED=!0,yO=jf)})});var wO=D(jp=>{"use strict";h();Object.defineProperty(jp,"__esModule",{value:!0});jp.Code=void 0;var BK=JA(),MK=32,XA=class t{constructor(e){this.hex=e}static fromBuffer(e){return new t(e.toString("hex"))}static fromHex(e){return new t(e)}toString(){return this.hex}valueOf(){return p.Buffer.from(this.hex,"hex")}computeHash(){let e=BK(MK).update(this.valueOf()).digest();return p.Buffer.from(e)}};jp.Code=XA});var ZA=D(zp=>{"use strict";h();Object.defineProperty(zp,"__esModule",{value:!0});zp.CodeMetadata=void 0;var dc=class t{constructor(e=!0,r=!1,n=!1,i=!1){this.upgradeable=e,this.readable=r,this.payable=n,this.payableBySc=i}static fromBytes(e){return t.fromBuffer(p.Buffer.from(e))}static fromBuffer(e){if(e.length<this.codeMetadataLength)throw new Error("Buffer is too short.");let r=e[0],n=e[1],i=(r&t.ByteZero.Upgradeable)!==0,s=(r&t.ByteZero.Readable)!==0,o=(n&t.ByteOne.Payable)!==0,u=(n&t.ByteOne.PayableBySc)!==0;return new t(i,s,o,u)}toggleUpgradeable(e){this.upgradeable=e}toggleReadable(e){this.readable=e}togglePayable(e){this.payable=e}togglePayableBySc(e){this.payableBySc=e}toBuffer(){let e=0,r=0;return this.upgradeable&&(e|=t.ByteZero.Upgradeable),this.readable&&(e|=t.ByteZero.Readable),this.payable&&(r|=t.ByteOne.Payable),this.payableBySc&&(r|=t.ByteOne.PayableBySc),p.Buffer.from([e,r])}toString(){return this.toBuffer().toString("hex")}toJSON(){return{upgradeable:this.upgradeable,readable:this.readable,payable:this.payable,payableBySc:this.payableBySc}}equals(e){return this.upgradeable==e.upgradeable&&this.readable==e.readable&&this.payable==e.payable&&this.payableBySc==e.payableBySc}};zp.CodeMetadata=dc;dc.codeMetadataLength=2;dc.ByteZero={Upgradeable:1,Reserved2:2,Readable:4};dc.ByteOne={Reserved1:1,Payable:2,PayableBySc:4}});var tE=D(Ki=>{"use strict";h();var LK=Ki&&Ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FK=Ki&&Ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UK=Ki&&Ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LK(e,t,r);return FK(e,t),e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ContractFunction=void 0;var qK=UK(Ie()),eE=class t{constructor(e){if(this.name=e,e==null)throw new qK.ErrInvalidFunctionName}static none(){return new t("untitled")}toString(){return this.name}valueOf(){return this.name}};Ki.ContractFunction=eE});var nE=D(Qp=>{"use strict";h();Object.defineProperty(Qp,"__esModule",{value:!0});Qp.Compatibility=void 0;var VK=Ve(),rE=class{static guardAddressIsSetAndNonZero(e,r,n){!e||e.bech32()==""?console.warn(`${r}: address should be set; ${n}. In the future, this will throw an exception instead of emitting a WARN.`):e.bech32()==VK.Address.Zero().bech32()&&console.warn(`${r}: address should not be the 'zero' address (also known as the 'contracts deployment address'); ${n}. In the future, this will throw an exception instead of emitting a WARN.`)}};Qp.Compatibility=rE});var Ms=D(Kp=>{"use strict";h();Object.defineProperty(Kp,"__esModule",{value:!0});Kp.TransactionPayload=void 0;var iE=class t{constructor(e){this.data=p.Buffer.from(e||[])}static fromEncoded(e){if(!e)return new t("");let r=p.Buffer.from(e,"base64").toString();return new t(r)}isEmpty(){return this.data.length==0}encoded(){return this.data.toString("base64")}valueOf(){return this.data}toString(){return this.data.toString()}getEncodedArguments(){return this.toString().split("@")}getRawArguments(){return this.getEncodedArguments().map(e=>p.Buffer.from(e,"hex"))}length(){return p.Buffer.from(this.data).length}};Kp.TransactionPayload=iE});var gc=D(Wp=>{"use strict";h();Object.defineProperty(Wp,"__esModule",{value:!0});Wp.TransactionBuilder=void 0;var kK=hr(),HK=Xr(),GK=Ms(),sE=class{constructor(e){this.config=e.config,this.sender=e.sender,this.receiver=e.receiver,this.dataParts=e.dataParts,this.providedGasLimit=e.gasLimit,this.addDataMovementGas=e.addDataMovementGas,this.amount=e.amount}computeGasLimit(e){return this.addDataMovementGas?this.config.minGasLimit+this.config.gasLimitPerByte*BigInt(e.length())+this.providedGasLimit:this.providedGasLimit}buildTransactionPayload(){let e=this.dataParts.join(kK.ARGUMENTS_SEPARATOR);return new GK.TransactionPayload(e)}build(){let e=this.buildTransactionPayload(),r=this.computeGasLimit(e);return new HK.Transaction({sender:this.sender.bech32(),receiver:this.receiver.bech32(),gasLimit:r,value:this.amount||0n,data:e.valueOf(),chainID:this.config.chainID})}};Wp.TransactionBuilder=sE});var vO=D($p=>{"use strict";h();Object.defineProperty($p,"__esModule",{value:!0});$p.DelegationTransactionsFactory=void 0;var jK=Ve(),zK=hr(),QK=Ie(),fn=qn(),Zr=gc(),oE=class{constructor(e){this.config=e.config,this.argSerializer=new fn.ArgSerializer}createTransactionForNewDelegationContract(e){let r=["createNewDelegationContract",...this.argSerializer.valuesToStrings([new fn.BigUIntValue(e.totalDelegationCap),new fn.BigUIntValue(e.serviceFee)])],n=this.config.gasLimitCreateDelegationContract+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:jK.Address.fromBech32(zK.DELEGATION_MANAGER_SC_ADDRESS),dataParts:r,gasLimit:n,addDataMovementGas:!0,amount:e.amount}).build()}createTransactionForAddingNodes(e){if(e.publicKeys.length!==e.signedMessages.length)throw new QK.Err("The number of public keys should match the number of signed messages");let r=e.signedMessages.map(o=>new fn.BytesValue(p.Buffer.from(o))),n=this.argSerializer.valuesToStrings(r),i=e.publicKeys.length,s=["addNodes"];for(let o=0;o<i;o++)s.push(e.publicKeys[o].hex(),n[o]);return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:s,gasLimit:this.computeExecutionGasLimitForNodesManagement(i),addDataMovementGas:!0}).build()}createTransactionForRemovingNodes(e){let r=["removeNodes"];for(let i of e.publicKeys)r.push(i.hex());let n=e.publicKeys.length;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:this.computeExecutionGasLimitForNodesManagement(n),addDataMovementGas:!0}).build()}createTransactionForStakingNodes(e){let r=["stakeNodes"];for(let o of e.publicKeys)r=r.concat(o.hex());let n=e.publicKeys.length,s=BigInt(n)*this.config.additionalGasLimitPerValidatorNode+this.config.gasLimitStake+this.config.gasLimitDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:s,addDataMovementGas:!0}).build()}createTransactionForUnbondingNodes(e){let r=["unBondNodes"];for(let s of e.publicKeys)r=r.concat(s.hex());let n=e.publicKeys.length,i=BigInt(n)*this.config.additionalGasLimitPerValidatorNode+this.config.gasLimitUnbond+this.config.gasLimitDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:i,addDataMovementGas:!0}).build()}createTransactionForUnstakingNodes(e){let r=["unStakeNodes"];for(let s of e.publicKeys)r=r.concat(s.hex());let n=e.publicKeys.length,i=BigInt(n)*this.config.additionalGasLimitPerValidatorNode+this.config.gasLimitUnstake+this.config.gasLimitDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:i,addDataMovementGas:!0}).build()}createTransactionForUnjailingNodes(e){let r=["unJailNodes"];for(let i of e.publicKeys)r.push(i.hex());let n=e.publicKeys.length;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:this.computeExecutionGasLimitForNodesManagement(n),addDataMovementGas:!0}).build()}createTransactionForChangingServiceFee(e){let r=["changeServiceFee",this.argSerializer.valuesToStrings([new fn.BigUIntValue(e.serviceFee)])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForModifyingDelegationCap(e){let r=["modifyTotalDelegationCap",this.argSerializer.valuesToStrings([new fn.BigUIntValue(e.delegationCap)])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForSettingAutomaticActivation(e){let r=["setAutomaticActivation",this.argSerializer.valuesToStrings([new fn.StringValue("true")])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForUnsettingAutomaticActivation(e){let r=["setAutomaticActivation",this.argSerializer.valuesToStrings([new fn.StringValue("false")])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForSettingCapCheckOnRedelegateRewards(e){let r=["setCheckCapOnReDelegateRewards",this.argSerializer.valuesToStrings([new fn.StringValue("true")])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForUnsettingCapCheckOnRedelegateRewards(e){let r=["setCheckCapOnReDelegateRewards",this.argSerializer.valuesToStrings([new fn.StringValue("false")])[0]],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}createTransactionForSettingMetadata(e){let r=["setMetaData",...this.argSerializer.valuesToStrings([new fn.StringValue(e.name),new fn.StringValue(e.website),new fn.StringValue(e.identifier)])],n=this.config.gasLimitDelegationOperations+this.config.additionalGasLimitForDelegationOperations;return new Zr.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.delegationContract,dataParts:r,gasLimit:n,addDataMovementGas:!0}).build()}computeExecutionGasLimitForNodesManagement(e){let r=this.config.additionalGasLimitPerValidatorNode*BigInt(e);return this.config.gasLimitDelegationOperations+r}};$p.DelegationTransactionsFactory=oE});var SO=D((t1e,bO)=>{h();var AO=(rr(),_e(fr)),EO=bO.exports;(function(){"use strict";function t(c){return c<10?"0"+c:c}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function u(c){return r.lastIndex=0,r.test(c)?'"'+c.replace(r,function(f){var d=s[f];return typeof d=="string"?d:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function a(c,f){var d,w,A,T,x=n,B,V=f[c],U=V!=null&&(V instanceof AO||AO.isBigNumber(V));switch(V&&typeof V=="object"&&typeof V.toJSON=="function"&&(V=V.toJSON(c)),typeof o=="function"&&(V=o.call(f,c,V)),typeof V){case"string":return U?V:u(V);case"number":return isFinite(V)?String(V):"null";case"boolean":case"null":case"bigint":return String(V);case"object":if(!V)return"null";if(n+=i,B=[],Object.prototype.toString.apply(V)==="[object Array]"){for(T=V.length,d=0;d<T;d+=1)B[d]=a(d,V)||"null";return A=B.length===0?"[]":n?`[
`+n+B.join(`,
`+n)+`
`+x+"]":"["+B.join(",")+"]",n=x,A}if(o&&typeof o=="object")for(T=o.length,d=0;d<T;d+=1)typeof o[d]=="string"&&(w=o[d],A=a(w,V),A&&B.push(u(w)+(n?": ":":")+A));else Object.keys(V).forEach(function(Q){var L=a(Q,V);L&&B.push(u(Q)+(n?": ":":")+L)});return A=B.length===0?"{}":n?`{
`+n+B.join(`,
`+n)+`
`+x+"}":"{"+B.join(",")+"}",n=x,A}}typeof EO.stringify!="function"&&(EO.stringify=function(c,f,d){var w;if(n="",i="",typeof d=="number")for(w=0;w<d;w+=1)i+=" ";else typeof d=="string"&&(i=d);if(o=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return a("",{"":c})})})()});var TO=D((n1e,IO)=>{h();var Yp=null,KK=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,WK=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,$K=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,o=function(x){throw{name:"SyntaxError",message:x,at:r,text:s}},u=function(x){return x&&x!==n&&o("Expected '"+x+"' instead of '"+n+"'"),n=s.charAt(r),r+=1,n},a=function(){var x,B="";for(n==="-"&&(B="-",u("-"));n>="0"&&n<="9";)B+=n,u();if(n===".")for(B+=".";u()&&n>="0"&&n<="9";)B+=n;if(n==="e"||n==="E")for(B+=n,u(),(n==="-"||n==="+")&&(B+=n,u());n>="0"&&n<="9";)B+=n,u();if(x=+B,!isFinite(x))o("Bad number");else return Yp==null&&(Yp=(rr(),_e(fr))),B.length>15?e.storeAsString?B:e.useNativeBigInt?BigInt(B):new Yp(B):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(x):new Yp(x):x},c=function(){var x,B,V="",U;if(n==='"')for(var Q=r;u();){if(n==='"')return r-1>Q&&(V+=s.substring(Q,r-1)),u(),V;if(n==="\\"){if(r-1>Q&&(V+=s.substring(Q,r-1)),u(),n==="u"){for(U=0,B=0;B<4&&(x=parseInt(u(),16),!!isFinite(x));B+=1)U=U*16+x;V+=String.fromCharCode(U)}else if(typeof i[n]=="string")V+=i[n];else break;Q=r}}o("Bad string")},f=function(){for(;n&&n<=" ";)u()},d=function(){switch(n){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}o("Unexpected '"+n+"'")},w,A=function(){var x=[];if(n==="["){if(u("["),f(),n==="]")return u("]"),x;for(;n;){if(x.push(w()),f(),n==="]")return u("]"),x;u(","),f()}}o("Bad array")},T=function(){var x,B=Object.create(null);if(n==="{"){if(u("{"),f(),n==="}")return u("}"),B;for(;n;){if(x=c(),f(),u(":"),e.strict===!0&&Object.hasOwnProperty.call(B,x)&&o('Duplicate key "'+x+'"'),KK.test(x)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?w():B[x]=w():WK.test(x)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?w():B[x]=w():B[x]=w(),f(),n==="}")return u("}"),B;u(","),f()}}o("Bad object")};return w=function(){switch(f(),n){case"{":return T();case"[":return A();case'"':return c();case"-":return a();default:return n>="0"&&n<="9"?a():d()}},function(x,B){var V;return s=x+"",r=0,n=" ",V=w(),f(),n&&o("Syntax error"),typeof B=="function"?function U(Q,L){var k,H,q=Q[L];return q&&typeof q=="object"&&Object.keys(q).forEach(function(v){H=U(q,v),H!==void 0?q[v]=H:delete q[v]}),B.call(Q,L,q)}({"":V},""):V}};IO.exports=$K});var aE=D((s1e,Jp)=>{h();var _O=SO().stringify,CO=TO();Jp.exports=function(t){return{parse:CO(t),stringify:_O}};Jp.exports.parse=CO();Jp.exports.stringify=_O});var xO=D(pc=>{"use strict";h();var YK=pc&&pc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pc,"__esModule",{value:!0});pc.RelayedTransactionsFactory=void 0;var JK=YK((rr(),_e(fr))),Xp=Ve(),Zp=Ie(),zf=qn(),NO=Xr(),XK=aE(),uE=class{constructor(e){this.config=e.config}createRelayedV1Transaction(e){if(!e.innerTransaction.gasLimit)throw new Zp.ErrInvalidInnerTransaction("The gas limit is not set for the inner transaction");if(!e.innerTransaction.signature.length)throw new Zp.ErrInvalidInnerTransaction("The inner transaction is not signed");let r=this.prepareInnerTransactionForRelayedV1(e.innerTransaction),n=`relayedTx@${p.Buffer.from(r).toString("hex")}`,i=this.config.gasLimitPerByte*BigInt(n.length),s=this.config.minGasLimit+i+e.innerTransaction.gasLimit;return new NO.Transaction({chainID:this.config.chainID,sender:e.relayerAddress.bech32(),receiver:e.innerTransaction.sender,gasLimit:s,data:p.Buffer.from(n)})}createRelayedV2Transaction(e){if(e.innerTransaction.gasLimit)throw new Zp.ErrInvalidInnerTransaction("The gas limit should not be set for the inner transaction");if(!e.innerTransaction.signature.length)throw new Zp.ErrInvalidInnerTransaction("The inner transaction is not signed");let{argumentsString:r}=new zf.ArgSerializer().valuesToString([new zf.AddressValue(Xp.Address.fromBech32(e.innerTransaction.receiver)),new zf.U64Value(new JK.default(e.innerTransaction.nonce.toString())),new zf.BytesValue(p.Buffer.from(e.innerTransaction.data)),new zf.BytesValue(p.Buffer.from(e.innerTransaction.signature))]),n=`relayedTxV2@${r}`,i=this.config.gasLimitPerByte*BigInt(n.length),s=e.innerTransactionGasLimit+this.config.minGasLimit+i;return new NO.Transaction({sender:e.relayerAddress.bech32(),receiver:e.innerTransaction.sender,value:0n,gasLimit:s,chainID:this.config.chainID,data:p.Buffer.from(n),version:e.innerTransaction.version,options:e.innerTransaction.options})}prepareInnerTransactionForRelayedV1(e){let r={nonce:e.nonce,sender:Xp.Address.fromBech32(e.sender).pubkey().toString("base64"),receiver:Xp.Address.fromBech32(e.receiver).pubkey().toString("base64"),value:e.value,gasPrice:e.gasPrice,gasLimit:e.gasLimit,data:p.Buffer.from(e.data).toString("base64"),signature:p.Buffer.from(e.signature).toString("base64"),chainID:p.Buffer.from(e.chainID).toString("base64"),version:e.version,options:e.options.valueOf()==0?void 0:e.options,guardian:e.guardian?Xp.Address.fromBech32(e.guardian).pubkey().toString("base64"):void 0,guardianSignature:e.guardianSignature.length?p.Buffer.from(e.guardianSignature).toString("base64"):void 0,sndUserName:e.senderUsername?p.Buffer.from(e.senderUsername).toString("base64"):void 0,rcvUserName:e.receiverUsername?p.Buffer.from(e.receiverUsername).toString("base64"):void 0};return XK.stringify(r)}};pc.RelayedTransactionsFactory=uE});var OO=D(e0=>{"use strict";h();Object.defineProperty(e0,"__esModule",{value:!0});e0.ArgumentErrorContext=void 0;var ZK=Ie(),cE=class{constructor(e,r,n){this.endpointName=e,this.argumentIndex=r,this.parameterDefinition=n}throwError(e){throw new ZK.ErrInvalidArgument(`Error when converting arguments for endpoint (endpoint name: ${this.endpointName}, argument index: ${this.argumentIndex}, name: ${this.parameterDefinition.name}, type: ${this.parameterDefinition.type})
Nested error: ${e}`)}convertError(e,r){this.throwError(`Can't convert argument (argument: ${e}, type ${typeof e}), wanted type: ${r})`)}unhandledType(e,r){this.throwError(`Unhandled type (function: ${e}, type: ${r})`)}guardSameLength(e,r){e=e||[],e.length!=r.length&&this.throwError(`Incorrect composite type length: have ${e.length}, expected ${r.length} (argument: ${e})`)}guardHasField(e,r){e=e||{},r in e||this.throwError(`Struct argument does not contain a field named "${r}" (argument: ${JSON.stringify(e)})`)}};e0.ArgumentErrorContext=cE});var t0=D(Ua=>{"use strict";h();var eW=Ua&&Ua.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.NativeSerializer=void 0;var tW=eW((rr(),_e(fr))),rW=Ve(),lE=Ie(),nW=Ru(),iW=OO(),ye=dr(),sW;(function(t){function e(L,k){L=L||[],r(L,k),n(k)&&(L=i(L,k));let H=k.input,q=[];for(let v=0;v<H.length;v++){let C=H[v],P=new iW.ArgumentErrorContext(k.name,v,C),F=o(L[v],C.type,P);q.push(F)}return q}t.nativeToTypedValues=e;function r(L,k){let{min:H,max:q}=s(k.input);if(!(H<=L.length&&L.length<=q))throw new lE.ErrInvalidArgument(`Wrong number of arguments for endpoint ${k.name}: expected between ${H} and ${q} arguments, have ${L.length}`)}function n(L){let k=L.input[L.input.length-1];return k?.type instanceof ye.VariadicType&&!k.type.isCounted}function i(L,k){let H=k.input.length-1,q=L[H];if(q?.belongsToTypesystem){if(!q.hasClassOrSuperclass(ye.VariadicValue.ClassName))throw new lE.ErrInvalidArgument(`Wrong argument type for endpoint ${k.name}: typed value provided; expected variadic type, have ${q.getClassName()}`)}else L[H]=L.slice(H);return L}function s(L){let k=[...L].reverse(),H=L.length,q=L.length,v=!1;k.length>0&&k[0].type.getCardinality().isComposite()&&(q=1/0,v=!0);for(let C of k){if(C.type.getCardinality().isSingular())break;H-=1}return{min:H,max:q,variadic:v}}t.getArgumentsCardinality=s;function o(L,k,H){if(L&&L.belongsToTypesystem)return L;if(k instanceof ye.OptionType)return u(L,k,H);if(k instanceof ye.OptionalType)return a(L,k,H);if(k instanceof ye.VariadicType)return c(L,k,H);if(k instanceof ye.CompositeType)return d(L,k,H);if(k instanceof ye.TupleType)return w(L,k,H);if(k instanceof ye.StructType)return A(L,k,H);if(k instanceof ye.ListType)return f(L,k,H);if(k instanceof ye.PrimitiveType)return T(L,k,H);if(k instanceof ye.EnumType)return x(L,k,H);H.throwError(`convertToTypedValue: unhandled type ${k}`)}function u(L,k,H){if(L==null)return ye.OptionValue.newMissing();let q=o(L,k.getFirstTypeParameter(),H);return ye.OptionValue.newProvided(q)}function a(L,k,H){if(L==null)return new ye.OptionalValue(k);let q=o(L,k.getFirstTypeParameter(),H);return new ye.OptionalValue(k,q)}function c(L,k,H){if(k.isCounted)throw new lE.ErrInvalidArgument('Counted variadic arguments must be explicitly typed. E.g. use "VariadicValue.fromItemsCounted()" or "new VariadicValue()"');L==null&&(L=[]),L.map===void 0&&H.convertError(L,"Variadic");let q=L.map(function(v){return o(v,k.getFirstTypeParameter(),H)});return new ye.VariadicValue(k,q)}function f(L,k,H){L.map===void 0&&H.convertError(L,"List");let q=L.map(function(v){return o(v,k.getFirstTypeParameter(),H)});return new ye.List(k,q)}function d(L,k,H){let q=[],v=k.getTypeParameters();H.guardSameLength(L,v);for(let C=0;C<v.length;C++)q.push(o(L[C],v[C],H));return new ye.CompositeValue(k,q)}function w(L,k,H){let q=[],v=k.getFieldsDefinitions();H.guardSameLength(L,v);for(let C=0;C<v.length;C++)q.push(o(L[C],v[C].type,H));return ye.Tuple.fromItems(q)}function A(L,k,H){let q=[],v=k.getFieldsDefinitions();for(let C=0;C<v.length;C++){let P=v[C].name;H.guardHasField(L,P);let F=L[P],R=o(F,v[C].type,H);q.push(new ye.Field(R,P))}return new ye.Struct(k,q)}function T(L,k,H){if(k instanceof ye.NumericalType){let q=new tW.default(L);return Q(q,k,H)}if(k instanceof ye.BytesType)return B(L,H);if(k instanceof ye.AddressType)return new ye.AddressValue(U(L,H));if(k instanceof ye.BooleanType)return new ye.BooleanValue(L);if(k instanceof ye.TokenIdentifierType)return new ye.TokenIdentifierValue(V(L,H));H.throwError(`(function: toPrimitive) unsupported type ${k}`)}function x(L,k,H){if(typeof L=="number")return ye.EnumValue.fromDiscriminant(k,L);if(typeof L=="string")return ye.EnumValue.fromName(k,L);if(typeof L=="object"){H.guardHasField(L,"name");let q=k.getVariantByName(L.name);H.guardHasField(L,"fields");let v=L.fields,C=[],P=q.getFieldsDefinitions();for(let F=0;F<P.length;F++){let R=P[F].name;H.guardHasField(v,R);let l=v[R],g=o(l,P[F].type,H);C.push(new ye.Field(g,R))}return new ye.EnumValue(k,q,C)}H.throwError(`(function: toEnumValue) unsupported native type ${typeof L}`)}function B(L,k){let H=L.valueOf();if(L===void 0&&k.convertError(L,"BytesValue"),L instanceof p.Buffer)return new ye.BytesValue(L);if(typeof L=="string")return ye.BytesValue.fromUTF8(L);if(H instanceof p.Buffer)return new ye.BytesValue(H);if(typeof H=="number")return ye.BytesValue.fromHex(nW.numberToPaddedHex(H));k.convertError(L,"BytesValue")}function V(L,k){if(L===void 0&&k.convertError(L,"Buffer"),L instanceof p.Buffer)return L.toString();if(typeof L=="string")return L;k.convertError(L,"Buffer")}function U(L,k){if(L.bech32)return L;if(L.getAddress)return L.getAddress();switch(L.constructor){case p.Buffer:case String:return new rW.Address(L);default:k.convertError(L,"Address")}}t.convertNativeToAddress=U;function Q(L,k,H){switch(k.constructor){case ye.U8Type:return new ye.U8Value(L);case ye.I8Type:return new ye.I8Value(L);case ye.U16Type:return new ye.U16Value(L);case ye.I16Type:return new ye.I16Value(L);case ye.U32Type:return new ye.U32Value(L);case ye.I32Type:return new ye.I32Value(L);case ye.U64Type:return new ye.U64Value(L);case ye.I64Type:return new ye.I64Value(L);case ye.BigUIntType:return new ye.BigUIntValue(L);case ye.BigIntType:return new ye.BigIntValue(L);default:H.unhandledType("convertNumericalType",k)}}})(sW=Ua.NativeSerializer||(Ua.NativeSerializer={}))});var hE=D(r0=>{"use strict";h();Object.defineProperty(r0,"__esModule",{value:!0});r0.TokenTransfersDataBuilder=void 0;var oW=fc(),pi=dr(),aW=_a(),fE=class{constructor(){this.tokenComputer=new aW.TokenComputer,this.argsSerializer=new oW.ArgSerializer}buildDataPartsForESDTTransfer(e){return["ESDTTransfer",...this.argsSerializer.valuesToStrings([new pi.TokenIdentifierValue(e.token.identifier),new pi.BigUIntValue(e.amount)])]}buildDataPartsForSingleESDTNFTTransfer(e,r){let n=e.token,i=this.tokenComputer.extractIdentifierFromExtendedIdentifier(n.identifier);return["ESDTNFTTransfer",...this.argsSerializer.valuesToStrings([new pi.TokenIdentifierValue(i),new pi.BigUIntValue(n.nonce),new pi.BigUIntValue(e.amount),new pi.AddressValue(r)])]}buildDataPartsForMultiESDTNFTTransfer(e,r){let n=[new pi.AddressValue(e),new pi.U32Value(r.length)];for(let s of r){let o=this.tokenComputer.extractIdentifierFromExtendedIdentifier(s.token.identifier);n.push(new pi.TokenIdentifierValue(o),new pi.BigUIntValue(s.token.nonce),new pi.BigUIntValue(s.amount))}return["MultiESDTNFTTransfer",...this.argsSerializer.valuesToStrings(n)]}};r0.TokenTransfersDataBuilder=fE});var gE=D(s0=>{"use strict";h();Object.defineProperty(s0,"__esModule",{value:!0});s0.SmartContractTransactionsFactory=void 0;var DO=Ve(),PO=hr(),RO=Ie(),uW=oo(),n0=qn(),cW=t0(),lW=_a(),i0=Ru(),fW=hE(),Qf=gc(),dE=class{constructor(e){this.config=e.config,this.abi=e.abi,this.tokenComputer=new lW.TokenComputer,this.dataArgsBuilder=new fW.TokenTransfersDataBuilder}createTransactionForDeploy(e){let r=e.nativeTransferAmount??0n,n=e.isUpgradeable??!0,i=e.isReadable??!0,s=e.isPayable??!1,o=e.isPayableBySmartContract??!0,u=e.arguments||[],a=new n0.CodeMetadata(n,i,s,o),c=[i0.byteArrayToHex(e.bytecode),i0.byteArrayToHex(PO.VM_TYPE_WASM_VM),a.toString()],f=this.abi?.constructorDefinition,d=this.argsToDataParts(u,f);return c.push(...d),new Qf.TransactionBuilder({config:this.config,sender:e.sender,receiver:DO.Address.fromBech32(PO.CONTRACT_DEPLOY_ADDRESS),dataParts:c,gasLimit:e.gasLimit,addDataMovementGas:!1,amount:r}).build()}createTransactionForExecute(e){let r=e.arguments||[],n=e.tokenTransfers||[],i=e.nativeTransferAmount??0n,s=n.length;if(i&&s)throw new RO.ErrBadUsage("Can't send both native tokens and custom tokens(ESDT/NFT)");let o=e.contract,u=[];if(s===1){let f=n[0];this.tokenComputer.isFungible(f.token)?u=this.dataArgsBuilder.buildDataPartsForESDTTransfer(f):(u=this.dataArgsBuilder.buildDataPartsForSingleESDTNFTTransfer(f,o),o=e.sender)}else s>1&&(u=this.dataArgsBuilder.buildDataPartsForMultiESDTNFTTransfer(o,n),o=e.sender);u.push(u.length?i0.utf8ToHex(e.function):e.function);let a=this.abi?.getEndpoint(e.function),c=this.argsToDataParts(r,a);return u.push(...c),new Qf.TransactionBuilder({config:this.config,sender:e.sender,receiver:o,dataParts:u,gasLimit:e.gasLimit,addDataMovementGas:!1,amount:i}).build()}createTransactionForUpgrade(e){let r=e.nativeTransferAmount??0n,n=e.isUpgradeable??!0,i=e.isReadable??!0,s=e.isPayable??!1,o=e.isPayableBySmartContract??!0,u=e.arguments||[],a=new n0.CodeMetadata(n,i,s,o),c=["upgradeContract",i0.byteArrayToHex(e.bytecode),a.toString()],f=this.getEndpointForUpgrade(),d=this.argsToDataParts(u,f);return c.push(...d),new Qf.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.contract,dataParts:c,gasLimit:e.gasLimit,addDataMovementGas:!1,amount:r}).build()}getEndpointForUpgrade(){if(this.abi)try{return this.abi.getEndpoint("upgrade")}catch{return uW.Logger.warn("In the ABI, cannot find the 'upgrade' endpoint definition. Will use the constructor definition (fallback)."),this.abi.constructorDefinition}}createTransactionForClaimingDeveloperRewards(e){let r=["ClaimDeveloperRewards"];return new Qf.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.contract,dataParts:r,gasLimit:this.config.gasLimitClaimDeveloperRewards,addDataMovementGas:!1}).build()}createTransactionForChangingOwnerAddress(e){let r=["ChangeOwnerAddress",DO.Address.fromBech32(e.newOwner.bech32()).toHex()];return new Qf.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.contract,dataParts:r,gasLimit:this.config.gasLimitChangeOwnerAddress,addDataMovementGas:!1}).build()}argsToDataParts(e,r){if(r){let n=cW.NativeSerializer.nativeToTypedValues(e,r);return new n0.ArgSerializer().valuesToStrings(n)}if(this.areArgsOfTypedValue(e))return new n0.ArgSerializer().valuesToStrings(e);throw new RO.Err("Can't convert args to TypedValues")}areArgsOfTypedValue(e){for(let r of e)if(!r.belongsToTypesystem)return!1;return!0}};s0.SmartContractTransactionsFactory=dE});var BO=D(o0=>{"use strict";h();Object.defineProperty(o0,"__esModule",{value:!0});o0.TokenManagementTransactionsFactory=void 0;var Wi=Ve(),$i=hr(),hW=oo(),Z=qn(),Yt=gc(),pE=class{constructor(e){this.config=e.config,this.argSerializer=new Z.ArgSerializer,this.trueAsString="true",this.falseAsString="false"}createTransactionForIssuingFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=[new Z.StringValue(e.tokenName),new Z.StringValue(e.tokenTicker),new Z.BigUIntValue(e.initialSupply),new Z.BigUIntValue(e.numDecimals),new Z.StringValue("canFreeze"),new Z.StringValue(this.boolToString(e.canFreeze)),new Z.StringValue("canWipe"),new Z.StringValue(this.boolToString(e.canWipe)),new Z.StringValue("canPause"),new Z.StringValue(this.boolToString(e.canPause)),new Z.StringValue("canChangeOwner"),new Z.StringValue(this.boolToString(e.canChangeOwner)),new Z.StringValue("canUpgrade"),new Z.StringValue(this.boolToString(e.canUpgrade)),new Z.StringValue("canAddSpecialRoles"),new Z.StringValue(this.boolToString(e.canAddSpecialRoles))],n=["issue",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitIssue,addDataMovementGas:!0,amount:this.config.issueCost}).build()}createTransactionForIssuingSemiFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=[new Z.StringValue(e.tokenName),new Z.StringValue(e.tokenTicker),new Z.StringValue("canFreeze"),new Z.StringValue(this.boolToString(e.canFreeze)),new Z.StringValue("canWipe"),new Z.StringValue(this.boolToString(e.canWipe)),new Z.StringValue("canPause"),new Z.StringValue(this.boolToString(e.canPause)),new Z.StringValue("canTransferNFTCreateRole"),new Z.StringValue(this.boolToString(e.canTransferNFTCreateRole)),new Z.StringValue("canChangeOwner"),new Z.StringValue(this.boolToString(e.canChangeOwner)),new Z.StringValue("canUpgrade"),new Z.StringValue(this.boolToString(e.canUpgrade)),new Z.StringValue("canAddSpecialRoles"),new Z.StringValue(this.boolToString(e.canAddSpecialRoles))],n=["issueSemiFungible",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitIssue,addDataMovementGas:!0,amount:this.config.issueCost}).build()}createTransactionForIssuingNonFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=[new Z.StringValue(e.tokenName),new Z.StringValue(e.tokenTicker),new Z.StringValue("canFreeze"),new Z.StringValue(this.boolToString(e.canFreeze)),new Z.StringValue("canWipe"),new Z.StringValue(this.boolToString(e.canWipe)),new Z.StringValue("canPause"),new Z.StringValue(this.boolToString(e.canPause)),new Z.StringValue("canTransferNFTCreateRole"),new Z.StringValue(this.boolToString(e.canTransferNFTCreateRole)),new Z.StringValue("canChangeOwner"),new Z.StringValue(this.boolToString(e.canChangeOwner)),new Z.StringValue("canUpgrade"),new Z.StringValue(this.boolToString(e.canUpgrade)),new Z.StringValue("canAddSpecialRoles"),new Z.StringValue(this.boolToString(e.canAddSpecialRoles))],n=["issueNonFungible",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitIssue,addDataMovementGas:!0,amount:this.config.issueCost}).build()}createTransactionForRegisteringMetaESDT(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=[new Z.StringValue(e.tokenName),new Z.StringValue(e.tokenTicker),new Z.BigUIntValue(e.numDecimals),new Z.StringValue("canFreeze"),new Z.StringValue(this.boolToString(e.canFreeze)),new Z.StringValue("canWipe"),new Z.StringValue(this.boolToString(e.canWipe)),new Z.StringValue("canPause"),new Z.StringValue(this.boolToString(e.canPause)),new Z.StringValue("canTransferNFTCreateRole"),new Z.StringValue(this.boolToString(e.canTransferNFTCreateRole)),new Z.StringValue("canChangeOwner"),new Z.StringValue(this.boolToString(e.canChangeOwner)),new Z.StringValue("canUpgrade"),new Z.StringValue(this.boolToString(e.canUpgrade)),new Z.StringValue("canAddSpecialRoles"),new Z.StringValue(this.boolToString(e.canAddSpecialRoles))],n=["registerMetaESDT",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitIssue,addDataMovementGas:!0,amount:this.config.issueCost}).build()}createTransactionForRegisteringAndSettingRoles(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["registerAndSetAllRoles",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenName),new Z.StringValue(e.tokenTicker),new Z.StringValue(e.tokenType),new Z.BigUIntValue(e.numDecimals)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:r,gasLimit:this.config.gasLimitIssue,addDataMovementGas:!0,amount:this.config.issueCost}).build()}createTransactionForSettingBurnRoleGlobally(e){let r=["setBurnRoleGlobally",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:r,gasLimit:this.config.gasLimitToggleBurnRoleGlobally,addDataMovementGas:!0}).build()}createTransactionForUnsettingBurnRoleGlobally(e){let r=["unsetBurnRoleGlobally",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:r,gasLimit:this.config.gasLimitToggleBurnRoleGlobally,addDataMovementGas:!0}).build()}createTransactionForSettingSpecialRoleOnFungibleToken(e){let r=[new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)];e.addRoleLocalMint&&r.push(new Z.StringValue("ESDTRoleLocalMint")),e.addRoleLocalBurn&&r.push(new Z.StringValue("ESDTRoleLocalBurn")),e.addRoleESDTTransferRole&&r.push(new Z.StringValue("ESDTTransferRole"));let n=["setSpecialRole",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitSetSpecialRole,addDataMovementGas:!0}).build()}createTransactionForSettingSpecialRoleOnSemiFungibleToken(e){let r=[new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)];e.addRoleNFTCreate&&r.push(new Z.StringValue("ESDTRoleNFTCreate")),e.addRoleNFTBurn&&r.push(new Z.StringValue("ESDTRoleNFTBurn")),e.addRoleNFTAddQuantity&&r.push(new Z.StringValue("ESDTRoleNFTAddQuantity")),e.addRoleESDTTransferRole&&r.push(new Z.StringValue("ESDTTransferRole"));let n=["setSpecialRole",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitSetSpecialRole,addDataMovementGas:!0}).build()}createTransactionForSettingSpecialRoleOnMetaESDT(e){return this.createTransactionForSettingSpecialRoleOnSemiFungibleToken(e)}createTransactionForSettingSpecialRoleOnNonFungibleToken(e){let r=[new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)];e.addRoleNFTCreate&&r.push(new Z.StringValue("ESDTRoleNFTCreate")),e.addRoleNFTBurn&&r.push(new Z.StringValue("ESDTRoleNFTBurn")),e.addRoleNFTUpdateAttributes&&r.push(new Z.StringValue("ESDTRoleNFTUpdateAttributes")),e.addRoleNFTAddURI&&r.push(new Z.StringValue("ESDTRoleNFTAddURI")),e.addRoleESDTTransferRole&&r.push(new Z.StringValue("ESDTTransferRole"));let n=["setSpecialRole",...this.argSerializer.valuesToStrings(r)];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:Wi.Address.fromBech32($i.ESDT_CONTRACT_ADDRESS),dataParts:n,gasLimit:this.config.gasLimitSetSpecialRole,addDataMovementGas:!0}).build()}createTransactionForCreatingNFT(e){let r=["ESDTNFTCreate",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.initialQuantity),new Z.StringValue(e.name),new Z.BigUIntValue(e.royalties),new Z.StringValue(e.hash),new Z.BytesValue(p.Buffer.from(e.attributes)),...e.uris.map(s=>new Z.StringValue(s))])],n=e.name+e.hash+e.attributes+e.uris.join(""),i=this.config.gasLimitStorePerByte+BigInt(n.length);return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtNftCreate+i,addDataMovementGas:!0}).build()}createTransactionForPausing(e){let r=["pause",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitPausing,addDataMovementGas:!0}).build()}createTransactionForUnpausing(e){let r=["unPause",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitPausing,addDataMovementGas:!0}).build()}createTransactionForFreezing(e){let r=["freeze",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitFreezing,addDataMovementGas:!0}).build()}createTransactionForUnfreezing(e){let r=["UnFreeze",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitFreezing,addDataMovementGas:!0}).build()}createTransactionForWiping(e){let r=["wipe",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.AddressValue(e.user)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitWiping,addDataMovementGas:!0}).build()}createTransactionForLocalMint(e){let r=["ESDTLocalMint",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.supplyToMint)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtLocalMint,addDataMovementGas:!0}).build()}createTransactionForLocalBurning(e){let r=["ESDTLocalBurn",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.supplyToBurn)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtLocalBurn,addDataMovementGas:!0}).build()}createTransactionForUpdatingAttributes(e){let r=["ESDTNFTUpdateAttributes",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.tokenNonce),new Z.BytesValue(p.Buffer.from(e.attributes))])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtNftUpdateAttributes,addDataMovementGas:!0}).build()}createTransactionForAddingQuantity(e){let r=["ESDTNFTAddQuantity",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.tokenNonce),new Z.BigUIntValue(e.quantityToAdd)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtNftAddQuantity,addDataMovementGas:!0}).build()}createTransactionForBurningQuantity(e){let r=["ESDTNFTBurn",...this.argSerializer.valuesToStrings([new Z.StringValue(e.tokenIdentifier),new Z.BigUIntValue(e.tokenNonce),new Z.BigUIntValue(e.quantityToBurn)])];return new Yt.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitEsdtNftBurn,addDataMovementGas:!0}).build()}notifyAboutUnsettingBurnRoleGlobally(){hW.Logger.info(`
==========
IMPORTANT!
==========
You are about to issue (register) a new token. This will set the role "ESDTRoleBurnForAll" (globally).
Once the token is registered, you can unset this role by calling "unsetBurnRoleGlobally" (in a separate transaction).`)}boolToString(e){return e?this.trueAsString:this.falseAsString}};o0.TokenManagementTransactionsFactory=pE});var yE=D(a0=>{"use strict";h();Object.defineProperty(a0,"__esModule",{value:!0});a0.TransactionsFactoryConfig=void 0;var dW=hr(),mE=class{constructor(e){this.chainID=e.chainID,this.addressHrp=dW.DEFAULT_HRP,this.minGasLimit=50000n,this.gasLimitPerByte=1500n,this.gasLimitIssue=60000000n,this.gasLimitToggleBurnRoleGlobally=60000000n,this.gasLimitEsdtLocalMint=300000n,this.gasLimitEsdtLocalBurn=300000n,this.gasLimitSetSpecialRole=60000000n,this.gasLimitPausing=60000000n,this.gasLimitFreezing=60000000n,this.gasLimitWiping=60000000n,this.gasLimitEsdtNftCreate=3000000n,this.gasLimitEsdtNftUpdateAttributes=1000000n,this.gasLimitEsdtNftAddQuantity=1000000n,this.gasLimitEsdtNftBurn=1000000n,this.gasLimitStorePerByte=10000n,this.issueCost=50000000000000000n,this.gasLimitStake=5000000n,this.gasLimitUnstake=5000000n,this.gasLimitUnbond=5000000n,this.gasLimitCreateDelegationContract=50000000n,this.gasLimitDelegationOperations=1000000n,this.additionalGasLimitPerValidatorNode=6000000n,this.additionalGasLimitForDelegationOperations=10000000n,this.gasLimitSaveKeyValue=100000n,this.gasLimitPersistPerByte=1000n,this.gasLimitSetGuardian=250000n,this.gasLimitGuardAccount=250000n,this.gasLimitUnguardAccount=250000n,this.gasLimitESDTTransfer=200000n,this.gasLimitESDTNFTTransfer=200000n,this.gasLimitMultiESDTNFTTransfer=200000n,this.gasLimitClaimDeveloperRewards=6000000n,this.gasLimitChangeOwnerAddress=6000000n}};a0.TransactionsFactoryConfig=mE});var FO=D(u0=>{"use strict";h();Object.defineProperty(u0,"__esModule",{value:!0});u0.TransferTransactionsFactory=void 0;var bo=Ie(),en=qn(),gW=_a(),Kf=Xr(),wE=Ms(),pW=hE(),MO=gc(),mW=1e5,LO=8e5,vE=class{constructor(e){this.isGasEstimator(e)?this.gasEstimator=e:(this.config=e.config,this.tokenComputer=new gW.TokenComputer,this.tokenTransfersDataBuilder=new pW.TokenTransfersDataBuilder)}isGasEstimator(e){return typeof e=="object"&&typeof e.forEGLDTransfer=="function"&&typeof e.forESDTTransfer=="function"&&typeof e.forESDTNFTTransfer=="function"&&typeof e.forMultiESDTNFTTransfer=="function"}isGasEstimatorDefined(){return this.gasEstimator!==void 0}ensureMembersAreDefined(){if(this.config===void 0)throw new bo.Err("'config' is not defined");if(this.tokenTransfersDataBuilder===void 0)throw new bo.Err("`dataArgsBuilder is not defined`");if(this.tokenComputer===void 0)throw new bo.Err("`tokenComputer is not defined`")}createTransactionForNativeTokenTransfer(e){this.ensureMembersAreDefined();let r=e.data||new Uint8Array;return new Kf.Transaction({sender:e.sender.bech32(),receiver:e.receiver.bech32(),chainID:this.config.chainID,gasLimit:this.computeGasForMoveBalance(this.config,r),data:r,value:e.nativeAmount})}createTransactionForESDTTokenTransfer(e){this.ensureMembersAreDefined();let r=e.tokenTransfers.length;if(r===0)throw new bo.ErrBadUsage("No token transfer has been provided");if(r===1)return this.createSingleESDTTransferTransaction(e);let n=this.tokenTransfersDataBuilder.buildDataPartsForMultiESDTNFTTransfer(e.receiver,e.tokenTransfers),i=this.config.gasLimitMultiESDTNFTTransfer*BigInt(r)+BigInt(LO);return new MO.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:n,gasLimit:i,addDataMovementGas:!0}).build()}createEGLDTransfer(e){if(!this.isGasEstimatorDefined())throw new bo.Err("You are calling a legacy function to create an EGLD transfer transaction. If this is your intent, then instantiate the class using a `GasEstimator`. Or, instead, use the new, recommended `createTransactionForNativeTokenTransfer` method.");let r=e.data?.length()||0,n=this.gasEstimator.forEGLDTransfer(r);return new Kf.Transaction({nonce:e.nonce,value:e.value,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||n,data:e.data,chainID:e.chainID})}createESDTTransfer(e){if(!this.isGasEstimatorDefined())throw new bo.Err("You are calling a legacy function to create an ESDT transfer transaction. If this is your intent, then instantiate the class using a `GasEstimator`. Or, instead, use the new, recommended `createTransactionForESDTTokenTransfer` method.");let{argumentsString:r}=new en.ArgSerializer().valuesToString([en.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new en.BigUIntValue(e.tokenTransfer.valueOf())]),n=`ESDTTransfer@${r}`,i=new wE.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTTransfer(s);return new Kf.Transaction({nonce:e.nonce,receiver:e.receiver,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createESDTNFTTransfer(e){if(!this.isGasEstimatorDefined())throw new bo.Err("You are calling a legacy function to create an ESDTNFT transfer transaction. If this is your intent, then instantiate the class using a `GasEstimator`. Or, instead, use the new, recommended `createTransactionForESDTTokenTransfer` method.");let{argumentsString:r}=new en.ArgSerializer().valuesToString([en.BytesValue.fromUTF8(e.tokenTransfer.tokenIdentifier),new en.U64Value(e.tokenTransfer.nonce),new en.BigUIntValue(e.tokenTransfer.valueOf()),new en.AddressValue(e.destination)]),n=`ESDTNFTTransfer@${r}`,i=new wE.TransactionPayload(n),s=i.length()||0,o=this.gasEstimator.forESDTNFTTransfer(s);return new Kf.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||o,data:i,chainID:e.chainID})}createMultiESDTNFTTransfer(e){if(!this.isGasEstimatorDefined())throw new bo.Err("You are calling a legacy function to create a MultiESDTNFT transfer transaction. If this is your intent, then instantiate the class using a `GasEstimator`. Or, instead, use the new, recommended `createTransactionForESDTTokenTransfer` method.");let r=[new en.AddressValue(e.destination),new en.U16Value(e.tokenTransfers.length)];for(let a of e.tokenTransfers)r.push(en.BytesValue.fromUTF8(a.tokenIdentifier),new en.U64Value(a.nonce),new en.BigUIntValue(a.valueOf()));let{argumentsString:n}=new en.ArgSerializer().valuesToString(r),i=`MultiESDTNFTTransfer@${n}`,s=new wE.TransactionPayload(i),o=s.length()||0,u=this.gasEstimator.forMultiESDTNFTTransfer(o,e.tokenTransfers.length);return new Kf.Transaction({nonce:e.nonce,receiver:e.sender,sender:e.sender,gasPrice:e.gasPrice,gasLimit:e.gasLimit||u,data:s,chainID:e.chainID})}createSingleESDTTransferTransaction(e){this.ensureMembersAreDefined();let r=[],n=e.tokenTransfers[0],i=0n,s=e.receiver;return this.tokenComputer.isFungible(n.token)?(r=this.tokenTransfersDataBuilder.buildDataPartsForESDTTransfer(n),i=this.config.gasLimitESDTTransfer+BigInt(mW)):(r=this.tokenTransfersDataBuilder.buildDataPartsForSingleESDTNFTTransfer(n,s),i=this.config.gasLimitESDTNFTTransfer+BigInt(LO),s=e.sender),new MO.TransactionBuilder({config:this.config,sender:e.sender,receiver:s,dataParts:r,gasLimit:i,addDataMovementGas:!0}).build()}computeGasForMoveBalance(e,r){return e.minGasLimit+e.gasLimitPerByte*BigInt(r.length)}};u0.TransferTransactionsFactory=vE});var UO=D(l0=>{"use strict";h();Object.defineProperty(l0,"__esModule",{value:!0});l0.AccountTransactionsFactory=void 0;var yW=Ve(),c0=gc(),AE=class{constructor(e){this.config=e.config}createTransactionForSavingKeyValue(e){let r="SaveKeyValue",n=this.computeDataPartsForSavingKeyValue(e.keyValuePairs),i=[r,...n],s=this.computeExtraGasForSavingKeyValue(e.keyValuePairs);return new c0.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:i,gasLimit:s,addDataMovementGas:!0}).build()}computeExtraGasForSavingKeyValue(e){let r=0n;return e.forEach((n,i)=>{r+=this.config.gasLimitPersistPerByte*BigInt(i.length+n.length)+this.config.gasLimitStorePerByte*BigInt(n.length)}),r+this.config.gasLimitSaveKeyValue}computeDataPartsForSavingKeyValue(e){let r=[];return e.forEach((n,i)=>{r.push(p.Buffer.from(i).toString("hex"),p.Buffer.from(n).toString("hex"))}),r}createTransactionForSettingGuardian(e){let r=["SetGuardian",yW.Address.fromBech32(e.guardianAddress.bech32()).toHex(),p.Buffer.from(e.serviceID).toString("hex")];return new c0.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitSetGuardian,addDataMovementGas:!0}).build()}createTransactionForGuardingAccount(e){let r=["GuardAccount"];return new c0.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitGuardAccount,addDataMovementGas:!0}).build()}createTransactionForUnguardingAccount(e){let r=["UnGuardAccount"];return new c0.TransactionBuilder({config:this.config,sender:e.sender,receiver:e.sender,dataParts:r,gasLimit:this.config.gasLimitUnguardAccount,addDataMovementGas:!0}).build()}};l0.AccountTransactionsFactory=AE});var f0=D(hn=>{"use strict";h();var wW=hn&&hn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qa=hn&&hn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wW(e,t,r)};Object.defineProperty(hn,"__esModule",{value:!0});qa(vO(),hn);qa(xO(),hn);qa(gE(),hn);qa(BO(),hn);qa(yE(),hn);qa(FO(),hn);qa(UO(),hn)});var SE=D(Vn=>{"use strict";h();var vW=Vn&&Vn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AW=Vn&&Vn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EW=Vn&&Vn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vW(e,t,r);return AW(e,t),e},bW=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.InteractionChecker=void 0;var EE=EW(Ie()),SW=bW((rr(),_e(fr))),bE=class{checkInteraction(e,r){this.checkPayable(e,r),this.checkArguments(e,r)}checkPayable(e,r){let n=!new SW.default(e.getValue().toString()).isZero(),i=r.modifiers.isPayableInEGLD();if(n&&!i)throw new EE.ErrContractInteraction("cannot send EGLD value to non-payable")}checkArguments(e,r){let n=r.input,i=e.getArguments(),s=n.length,o=i.length;if(s!=o)throw new EE.ErrContractInteraction(`bad arguments, expected: ${s}, got: ${o}`);for(let u=0;u<s;u++){let a=n[u].type,f=i[u].getType();if(!a.isAssignableFrom(f))throw new EE.ErrContractInteraction(`type mismatch at index ${u}, expected: ${a}, got: ${f}`)}}};Vn.InteractionChecker=bE});var Wf=D(h0=>{"use strict";h();Object.defineProperty(h0,"__esModule",{value:!0});h0.Query=void 0;var IW=Ve(),TW=fc(),IE=class{constructor(e){this.caller=e.caller||IW.Address.empty(),this.address=e.address,this.func=e.func,this.args=e.args||[],this.value=e.value||0}getEncodedArguments(){return new TW.ArgSerializer().valuesToStrings(this.args)}};h0.Query=IE});var CE=D(d0=>{"use strict";h();Object.defineProperty(d0,"__esModule",{value:!0});d0.Interaction=void 0;var qO=Ve(),_W=nE(),CW=hr(),TE=_a(),VO=f0(),NW=SE(),xW=Wf(),_E=class{constructor(e,r,n){this.nonce=0,this.value="0",this.gasLimit=0,this.gasPrice=void 0,this.chainID="",this.querent=qO.Address.empty(),this.sender=qO.Address.empty(),this.version=CW.TRANSACTION_VERSION_DEFAULT,this.contract=e,this.function=r,this.args=n,this.tokenTransfers=[]}getContractAddress(){return this.contract.getAddress()}getFunction(){return this.function}getEndpoint(){return this.contract.getEndpoint(this.function)}getArguments(){return this.args}getValue(){return this.value}getTokenTransfers(){return this.tokenTransfers}getGasLimit(){return this.gasLimit}getExplicitReceiver(){return this.explicitReceiver}buildTransaction(){_W.Compatibility.guardAddressIsSetAndNonZero(this.sender,"'sender' of interaction","use interaction.withSender()");let e=new VO.TransactionsFactoryConfig({chainID:this.chainID.valueOf()}),n=new VO.SmartContractTransactionsFactory({config:e}).createTransactionForExecute({sender:this.sender,contract:this.contract.getAddress(),function:this.function.valueOf(),gasLimit:BigInt(this.gasLimit.valueOf()),arguments:this.args,nativeTransferAmount:BigInt(this.value.toString()),tokenTransfers:this.tokenTransfers});return n.chainID=this.chainID.valueOf(),n.nonce=BigInt(this.nonce.valueOf()),n.version=this.version,this.gasPrice&&(n.gasPrice=BigInt(this.gasPrice.valueOf())),n}buildQuery(){return new xW.Query({address:this.contract.getAddress(),func:this.function,args:this.args,value:this.value,caller:this.querent})}withValue(e){return this.value=e,this}withSingleESDTTransfer(e){return this.tokenTransfers=[e].map(r=>new TE.TokenTransfer(r)),this}withSingleESDTNFTTransfer(e){return this.tokenTransfers=[e].map(r=>new TE.TokenTransfer(r)),this}withMultiESDTNFTTransfer(e){return this.tokenTransfers=e.map(r=>new TE.TokenTransfer(r)),this}withGasLimit(e){return this.gasLimit=e,this}withGasPrice(e){return this.gasPrice=e,this}withNonce(e){return this.nonce=e,this}useThenIncrementNonceOf(e){return this.withNonce(e.getNonceThenIncrement())}withChainID(e){return this.chainID=e,this}withSender(e){return this.sender=e,this}withVersion(e){return this.version=e,this}withQuerent(e){return this.querent=e,this}withExplicitReceiver(e){return this.explicitReceiver=e,this}check(){return new NW.InteractionChecker().checkInteraction(this,this.getEndpoint()),this}};d0.Interaction=_E});var NE=D(kO=>{"use strict";h();Object.defineProperty(kO,"__esModule",{value:!0})});var zO=D(yc=>{"use strict";h();Object.defineProperty(yc,"__esModule",{value:!0});yc.bech32m=yc.bech32=void 0;var g0="qpzry9x8gf2tvdw0s3jn54khce6mua7l",GO={};for(let t=0;t<g0.length;t++){let e=g0.charAt(t);GO[e]=t}function mc(t){let e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function HO(t){let e=1;for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=mc(e)^n>>5}e=mc(e);for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);e=mc(e)^n&31}return e}function xE(t,e,r,n){let i=0,s=0,o=(1<<r)-1,u=[];for(let a=0;a<t.length;++a)for(i=i<<e|t[a],s+=e;s>=r;)s-=r,u.push(i>>s&o);if(n)s>0&&u.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return u}function OW(t){return xE(t,8,5,!0)}function DW(t){let e=xE(t,5,8,!1);if(Array.isArray(e))return e}function PW(t){let e=xE(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function jO(t){let e;t==="bech32"?e=1:e=734539939;function r(o,u,a){if(a=a||90,o.length+7+u.length>a)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let c=HO(o);if(typeof c=="string")throw new Error(c);let f=o+"1";for(let d=0;d<u.length;++d){let w=u[d];if(w>>5)throw new Error("Non 5-bit word");c=mc(c)^w,f+=g0.charAt(w)}for(let d=0;d<6;++d)c=mc(c);c^=e;for(let d=0;d<6;++d){let w=c>>(5-d)*5&31;f+=g0.charAt(w)}return f}function n(o,u){if(u=u||90,o.length<8)return o+" too short";if(o.length>u)return"Exceeds length limit";let a=o.toLowerCase(),c=o.toUpperCase();if(o!==a&&o!==c)return"Mixed-case string "+o;o=a;let f=o.lastIndexOf("1");if(f===-1)return"No separator character for "+o;if(f===0)return"Missing prefix for "+o;let d=o.slice(0,f),w=o.slice(f+1);if(w.length<6)return"Data too short";let A=HO(d);if(typeof A=="string")return A;let T=[];for(let x=0;x<w.length;++x){let B=w.charAt(x),V=GO[B];if(V===void 0)return"Unknown character "+B;A=mc(A)^V,!(x+6>=w.length)&&T.push(V)}return A!==e?"Invalid checksum for "+o:{prefix:d,words:T}}function i(o,u){let a=n(o,u);if(typeof a=="object")return a}function s(o,u){let a=n(o,u);if(typeof a=="object")return a;throw new Error(a)}return{decodeUnsafe:i,decode:s,encode:r,toWords:OW,fromWordsUnsafe:DW,fromWords:PW}}yc.bech32=jO("bech32");yc.bech32m=jO("bech32m")});var KO=D(kn=>{"use strict";h();Object.defineProperty(kn,"__esModule",{value:!0});kn.TokenTransferProperties=kn.TransactionMetadataTransfer=kn.TransactionMetadata=kn.TransactionToDecode=kn.TransactionDecoder=void 0;var QO=zO(),OE=class{getTransactionMetadata(e){let r=this.getNormalTransactionMetadata(e),n=this.getEsdtTransactionMetadata(r);if(n)return n;let i=this.getNftTransferMetadata(r);if(i)return i;let s=this.getMultiTransferMetadata(r);return s||r}getNormalTransactionMetadata(e){let r=new Va;if(r.sender=e.sender,r.receiver=e.receiver,r.value=BigInt(e.value),e.data){let i=this.base64Decode(e.data).split("@"),s=i.slice(1);if(s.every(o=>this.isSmartContractArgument(o))&&(r.functionName=i[0],r.functionArgs=s),r.functionName==="relayedTx"&&r.functionArgs&&r.functionArgs.length===1)try{let o=JSON.parse(this.hexToString(r.functionArgs[0]));return o.value=o.value.toString(),o.sender=this.bech32Encode(this.base64ToHex(o.sender)),o.receiver=this.bech32Encode(this.base64ToHex(o.receiver)),this.getNormalTransactionMetadata(o)}catch{}if(r.functionName==="relayedTxV2"&&r.functionArgs&&r.functionArgs.length===4)try{let o=new p0;return o.sender=e.receiver,o.receiver=this.bech32Encode(r.functionArgs[0]),o.data=this.base64Encode(this.hexToString(r.functionArgs[2])),o.value="0",this.getNormalTransactionMetadata(o)}catch{}}return r}getMultiTransferMetadata(e){if(e.sender!==e.receiver||e.functionName!=="MultiESDTNFTTransfer")return;let r=e.functionArgs;if(!r||r.length<3||!this.isAddressValid(r[0]))return;let n=this.bech32Encode(r[0]),i=this.hexToNumber(r[1]),s=new Va;s.transfers||(s.transfers=[]);let o=2;for(let u=0;u<i;u++){let a=this.hexToString(r[o++]),c=r[o++],f=this.hexToBigInt(r[o++]);c?s.transfers.push({value:f,properties:{collection:a,identifier:`${a}-${c}`}}):s.transfers.push({value:f,properties:{token:a}})}return s.sender=e.sender,s.receiver=n,r.length>o&&(s.functionName=this.hexToString(r[o++]),s.functionArgs=r.slice(o++)),s}getNftTransferMetadata(e){if(e.sender!==e.receiver||e.functionName!=="ESDTNFTTransfer")return;let r=e.functionArgs;if(!r||r.length<4||!this.isAddressValid(r[3]))return;let n=this.hexToString(r[0]),i=r[1],s=this.hexToBigInt(r[2]),o=this.bech32Encode(r[3]),u=new Va;return u.sender=e.sender,u.receiver=o,u.value=s,r.length>4&&(u.functionName=this.hexToString(r[4]),u.functionArgs=r.slice(5)),u.transfers=[{value:s,properties:{collection:n,identifier:`${n}-${i}`}}],u}base64Encode(e){return p.Buffer.from(e).toString("base64")}base64Decode(e){return p.Buffer.from(e,"base64").toString("binary")}hexToNumber(e){return parseInt(e,16)}getEsdtTransactionMetadata(e){if(e.functionName!=="ESDTTransfer")return;let r=e.functionArgs;if(!r||r.length<2)return;let n=this.hexToString(r[0]),i=this.hexToBigInt(r[1]),s=new Va;return s.sender=e.sender,s.receiver=e.receiver,r.length>2&&(s.functionName=this.hexToString(r[2]),s.functionArgs=r.slice(3)),s.transfers=[{value:i,properties:{identifier:n}}],s.value=i,s}bech32Encode(e){let r=p.Buffer.from(e,"hex"),n=QO.bech32.toWords(r);return QO.bech32.encode("erd",n)}isAddressValid(e){return p.Buffer.from(e,"hex").length==32}isSmartContractArgument(e){return!(!this.isHex(e)||e.length%2!==0)}isHex(e){return new RegExp(/[^a-f0-9]/gi).test(e)===!1}base64ToHex(e){return p.Buffer.from(e,"base64").toString("hex")}hexToString(e){return p.Buffer.from(e,"hex").toString("ascii")}hexToBigInt(e){return BigInt(e?"0x"+e:0)}};kn.TransactionDecoder=OE;var p0=class{constructor(){this.sender="",this.receiver="",this.data="",this.value="0"}};kn.TransactionToDecode=p0;var Va=class{constructor(){this.sender="",this.receiver="",this.value=BigInt(0)}};kn.TransactionMetadata=Va;var DE=class{constructor(){this.value=BigInt(0)}};kn.TransactionMetadataTransfer=DE;var PE=class{};kn.TokenTransferProperties=PE});var RE=D(m0=>{"use strict";h();Object.defineProperty(m0,"__esModule",{value:!0});m0.ReturnCode=void 0;var mt=class t{constructor(e){this.text=e}static fromBuffer(e){let r=e.toString();return new t(r)}toString(){return this.text}valueOf(){return this.text}equals(e){return e?this.text==e.text:!1}isSuccess(){return this.equals(t.Ok)||this.equals(t.None)}};m0.ReturnCode=mt;mt.None=new mt("");mt.Ok=new mt("ok");mt.FunctionNotFound=new mt("function not found");mt.FunctionWrongSignature=new mt("wrong signature for function");mt.ContractNotFound=new mt("contract not found");mt.UserError=new mt("user error");mt.OutOfGas=new mt("out of gas");mt.AccountCollision=new mt("account collision");mt.OutOfFunds=new mt("out of funds");mt.CallStackOverFlow=new mt("call stack overflow");mt.ContractInvalid=new mt("contract invalid");mt.ExecutionFailed=new mt("execution failed");mt.Unknown=new mt("unknown")});var YO=D(y0=>{"use strict";h();Object.defineProperty(y0,"__esModule",{value:!0});y0.ResultsParser=void 0;var RW=KO(),WO=Ve(),$O=Ie(),So=oo(),BW=fc(),wc=RE(),vc;(function(t){t.OnTransactionCompleted="completedTxEvent",t.OnSignalError="signalError",t.OnWriteLog="writeLog"})(vc||(vc={}));var BE;(function(t){t.TooMuchGas="@too much gas provided for processing"})(BE||(BE={}));var MW={argsSerializer:new BW.ArgSerializer},ME=class{constructor(e){e={...MW,...e},this.argsSerializer=e.argsSerializer}parseQueryResponse(e,r){let n=e.getReturnDataParts(),i=this.argsSerializer.buffersToValues(n,r.output);return{returnCode:new wc.ReturnCode(e.returnCode.toString()),returnMessage:e.returnMessage,values:i,firstValue:i[0],secondValue:i[1],thirdValue:i[2],lastValue:i[i.length-1]}}parseUntypedQueryResponse(e){return{returnCode:new wc.ReturnCode(e.returnCode.toString()),returnMessage:e.returnMessage,values:e.getReturnDataParts()}}parseOutcome(e,r){let n=this.parseUntypedOutcome(e);return this.parseOutcomeFromUntypedBundle(n,r)}parseOutcomeFromUntypedBundle(e,r){let n=this.argsSerializer.buffersToValues(e.values,r.output);return{returnCode:e.returnCode,returnMessage:e.returnMessage,values:n,firstValue:n[0],secondValue:n[1],thirdValue:n[2],lastValue:n[n.length-1]}}parseUntypedOutcome(e){let r,n=this.parseTransactionMetadata(e);if(r=this.createBundleOnSimpleMoveBalance(e),r)return So.Logger.trace("parseUntypedOutcome(): on simple move balance"),r;if(r=this.createBundleOnInvalidTransaction(e),r)return So.Logger.trace("parseUntypedOutcome(): on invalid transaction"),r;if(r=this.createBundleOnEasilyFoundResultWithReturnData(e.contractResults),r)return So.Logger.trace("parseUntypedOutcome(): on easily found result with return data"),r;if(r=this.createBundleOnSignalError(e.logs),r)return So.Logger.trace("parseUntypedOutcome(): on signal error"),r;if(r=this.createBundleOnTooMuchGasWarning(e.logs),r)return So.Logger.trace("parseUntypedOutcome(): on 'too much gas' warning"),r;if(r=this.createBundleOnWriteLogWhereFirstTopicEqualsAddress(e.logs,e.sender),r)return So.Logger.trace("parseUntypedOutcome(): on writelog with topics[0] == tx.sender"),r;if(r=this.createBundleWithCustomHeuristics(e,n),r)return So.Logger.trace("parseUntypedOutcome(): with custom heuristics"),r;if(r=this.createBundleWithFallbackHeuristics(e,n),r)return So.Logger.trace("parseUntypedOutcome(): with fallback heuristics"),r;throw new $O.ErrCannotParseContractResults(`transaction ${e.hash.toString()}`)}parseTransactionMetadata(e){return new RW.TransactionDecoder().getTransactionMetadata({sender:e.sender.bech32(),receiver:e.receiver.bech32(),data:e.data.toString("base64"),value:e.value.toString()})}createBundleOnSimpleMoveBalance(e){let r=e.contractResults.items.length==0,n=e.logs.events.length==0;return r&&n?{returnCode:wc.ReturnCode.None,returnMessage:wc.ReturnCode.None.toString(),values:[]}:null}createBundleOnInvalidTransaction(e){return e.status.isInvalid()&&e.receipt.data?{returnCode:wc.ReturnCode.OutOfFunds,returnMessage:e.receipt.data,values:[]}:null}createBundleOnEasilyFoundResultWithReturnData(e){let r=e.items.find(o=>o.nonce.valueOf()!=0&&o.data.startsWith("@"));if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),s=r.returnMessage||n.toString();return{returnCode:n,returnMessage:s,values:i}}createBundleOnSignalError(e){let r=e.findSingleOrNoneEvent(vc.OnSignalError);if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),o=r.getLastTopic()?.toString()||n.toString();return{returnCode:n,returnMessage:o,values:i}}createBundleOnTooMuchGasWarning(e){let r=e.findSingleOrNoneEvent(vc.OnWriteLog,u=>u.findFirstOrNoneTopic(a=>a.toString().startsWith(BE.TooMuchGas))!=null);if(!r)return null;let{returnCode:n,returnDataParts:i}=this.sliceDataFieldInParts(r.data),o=r.getLastTopic()?.toString()||n.toString();return{returnCode:n,returnMessage:o,values:i}}createBundleOnWriteLogWhereFirstTopicEqualsAddress(e,r){let n=new WO.Address(r.bech32()).hex(),i=e.findSingleOrNoneEvent(vc.OnWriteLog,a=>a.findFirstOrNoneTopic(c=>c.hex()==n)!=null);if(!i)return null;let{returnCode:s,returnDataParts:o}=this.sliceDataFieldInParts(i.data),u=s.toString();return{returnCode:s,returnMessage:u,values:o}}createBundleWithCustomHeuristics(e,r){return null}createBundleWithFallbackHeuristics(e,r){let n=new WO.Address(r.receiver);for(let i of e.contractResults.items){let s=i.logs.findSingleOrNoneEvent(vc.OnWriteLog,o=>{let u=o.address.bech32()==e.sender.bech32(),a=o.topics[0]?.hex()==n.hex();return u&&a});if(s){let{returnCode:o,returnDataParts:u}=this.sliceDataFieldInParts(s.data),a=o.toString();return{returnCode:o,returnMessage:a,values:u}}}return null}sliceDataFieldInParts(e){let r=1;e.startsWith("ESDTTransfer")&&(r=3);let n=this.argsSerializer.stringToBuffers(e),i=n[r]||p.Buffer.from([]),s=n.slice(r+1);if(i.length==0)throw new $O.ErrCannotParseContractResults("no return code");return{returnCode:wc.ReturnCode.fromBuffer(i),returnDataParts:s}}parseEvent(e,r){let n=e.topics.map(o=>p.Buffer.from(o.valueOf())).slice(1),i=e.dataPayload?.valueOf()||p.Buffer.from([]),s=e.additionalData?.map(o=>p.Buffer.from(o.valueOf()))||[];return s.length===0&&i.length&&s.push(p.Buffer.from(i)),this.doParseEvent({topics:n,dataItems:s,eventDefinition:r})}doParseEvent(e){let r={},n=e.eventDefinition.inputs.filter(u=>u.indexed),i=this.argsSerializer.buffersToValues(e.topics,n);for(let u=0;u<n.length;u++)r[n[u].name]=i[u].valueOf();let s=e.eventDefinition.inputs.filter(u=>!u.indexed),o=this.argsSerializer.buffersToValues(e.dataItems,s);for(let u=0;u<s.length;u++)r[s[u].name]=o[u].valueOf();return r}};y0.ResultsParser=ME});var eD=D(v0=>{"use strict";h();Object.defineProperty(v0,"__esModule",{value:!0});v0.SmartContract=void 0;var w0=Ve(),LE=nE(),FE=hr(),LW=Ie(),UE=gE(),qE=yE(),FW=Rn(),JO=ZA(),XO=tE(),ZO=CE(),UW=t0(),qW=Wf(),VE=class{constructor(e={}){this.address=w0.Address.empty(),this.methodsExplicit={},this.methods={},this.address=e.address||w0.Address.empty(),this.abi=e.abi,this.abi&&this.setupMethods()}setupMethods(){let e=this,r=this.getAbi();for(let n of r.getEndpoints()){let i=n.name;this.methodsExplicit[i]=function(s){let o=new XO.ContractFunction(i);return new ZO.Interaction(e,o,s||[])},this.methods[i]=function(s){let o=new XO.ContractFunction(i),u=UW.NativeSerializer.nativeToTypedValues(s||[],n);return new ZO.Interaction(e,o,u||[])}}}setAddress(e){this.address=e}getAddress(){return this.address}getAbi(){return FW.guardValueIsSet("abi",this.abi),this.abi}getEndpoint(e){return this.getAbi().getEndpoint(e)}deploy({deployer:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:u,chainID:a}){LE.Compatibility.guardAddressIsSetAndNonZero(e,"'deployer' of SmartContract.deploy()","pass the actual address to deploy()");let c=new qE.TransactionsFactoryConfig({chainID:a.valueOf()}),f=new UE.SmartContractTransactionsFactory({config:c,abi:this.abi}),d=p.Buffer.from(r.toString(),"hex"),w=this.getMetadataPropertiesAsObject(n),A=f.createTransactionForDeploy({sender:e,bytecode:d,gasLimit:BigInt(o.valueOf()),arguments:i,isUpgradeable:w.upgradeable,isReadable:w.readable,isPayable:w.payable,isPayableBySmartContract:w.payableBySc});return A.setChainID(a),A.setValue(s??0),A.setGasPrice(u??FE.TRANSACTION_MIN_GAS_PRICE),A}getMetadataPropertiesAsObject(e){let r;return e?r=JO.CodeMetadata.fromBytes(p.Buffer.from(e.toString(),"hex")):r=new JO.CodeMetadata,r.toJSON()}upgrade({caller:e,code:r,codeMetadata:n,initArguments:i,value:s,gasLimit:o,gasPrice:u,chainID:a}){LE.Compatibility.guardAddressIsSetAndNonZero(e,"'caller' of SmartContract.upgrade()","pass the actual address to upgrade()"),this.ensureHasAddress();let c=new qE.TransactionsFactoryConfig({chainID:a.valueOf()}),f=new UE.SmartContractTransactionsFactory({config:c,abi:this.abi}),d=Uint8Array.from(p.Buffer.from(r.toString(),"hex")),w=this.getMetadataPropertiesAsObject(n),A=f.createTransactionForUpgrade({sender:e,contract:this.getAddress(),bytecode:d,gasLimit:BigInt(o.valueOf()),arguments:i,isUpgradeable:w.upgradeable,isReadable:w.readable,isPayable:w.payable,isPayableBySmartContract:w.payableBySc});return A.setChainID(a),A.setValue(s??0),A.setGasPrice(u??FE.TRANSACTION_MIN_GAS_PRICE),A}call({func:e,args:r,value:n,gasLimit:i,receiver:s,gasPrice:o,chainID:u,caller:a}){LE.Compatibility.guardAddressIsSetAndNonZero(a,"'caller' of SmartContract.call()","pass the actual address to call()"),this.ensureHasAddress();let c=new qE.TransactionsFactoryConfig({chainID:u.valueOf()}),f=new UE.SmartContractTransactionsFactory({config:c,abi:this.abi});r=r||[],n=n||0;let d=f.createTransactionForExecute({sender:a,contract:s||this.getAddress(),function:e.toString(),gasLimit:BigInt(i.valueOf()),arguments:r});return d.setChainID(u),d.setValue(n),d.setGasPrice(o??FE.TRANSACTION_MIN_GAS_PRICE),d}createQuery({func:e,args:r,value:n,caller:i}){return this.ensureHasAddress(),new qW.Query({address:this.getAddress(),func:e,args:r,value:n,caller:i})}ensureHasAddress(){if(!this.getAddress().bech32())throw new LW.ErrContractHasNoAddress}static computeAddress(e,r){let n=w0.Address.fromBech32(e.bech32());return new w0.AddressComputer().computeContractAddress(n,BigInt(r.valueOf()))}};v0.SmartContract=VE});var tD=D(Io=>{"use strict";h();Object.defineProperty(Io,"__esModule",{value:!0});Io.ContractCallPayloadBuilder=Io.ContractUpgradePayloadBuilder=Io.ContractDeployPayloadBuilder=void 0;var VW=hr(),jE=Ms(),zE=Rn(),kW=fc(),kE=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){zE.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`${e}@${VW.WasmVirtualMachine}@${r}`;return n=QE(n,this.arguments),new jE.TransactionPayload(n)}};Io.ContractDeployPayloadBuilder=kE;var HE=class{constructor(){this.code=null,this.codeMetadata="",this.arguments=[]}setCode(e){return this.code=e,this}setCodeMetadata(e){return this.codeMetadata=e,this}addInitArg(e){return this.arguments.push(e),this}setInitArgs(e){return this.arguments=e,this}build(){zE.guardValueIsSet("code",this.code);let e=this.code.toString(),r=this.codeMetadata.toString(),n=`upgradeContract@${e}@${r}`;return n=QE(n,this.arguments),new jE.TransactionPayload(n)}};Io.ContractUpgradePayloadBuilder=HE;var GE=class{constructor(){this.contractFunction=null,this.arguments=[]}setFunction(e){return this.contractFunction=e,this}addArg(e){return this.arguments.push(e),this}setArgs(e){return this.arguments=e,this}build(){zE.guardValueIsSet("calledFunction",this.contractFunction);let e=this.contractFunction.toString();return e=QE(e,this.arguments),new jE.TransactionPayload(e)}};Io.ContractCallPayloadBuilder=GE;function QE(t,e){let{argumentsString:r,count:n}=new kW.ArgSerializer().valuesToString(e);return n==0?t:`${t}@${r}`}});var qn=D(Jt=>{"use strict";h();var HW=Jt&&Jt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qr=Jt&&Jt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&HW(e,t,r)};Object.defineProperty(Jt,"__esModule",{value:!0});qr(fc(),Jt);qr(wO(),Jt);qr(jA(),Jt);qr(ZA(),Jt);qr(tE(),Jt);qr(CE(),Jt);qr(SE(),Jt);qr(NE(),Jt);qr(t0(),Jt);qr(Wf(),Jt);qr(YO(),Jt);qr(RE(),Jt);qr(eD(),Jt);qr(tD(),Jt);qr(dr(),Jt)});var Ac=D(or=>{"use strict";h();Object.defineProperty(or,"__esModule",{value:!0});or.gatherAllEvents=or.findEventsByFirstTopic=or.findEventsByIdentifier=or.findEventsByPredicate=or.SmartContractCallOutcome=or.TransactionOutcome=or.SmartContractResult=or.TransactionLogs=or.TransactionEvent=void 0;var KE=class{constructor(e){this.address="",this.identifier="",this.topics=[],this.dataItems=[],Object.assign(this,e)}};or.TransactionEvent=KE;var $f=class{constructor(e){this.address="",this.events=[],Object.assign(this,e)}};or.TransactionLogs=$f;var WE=class{constructor(e){this.sender="",this.receiver="",this.data=new Uint8Array,this.logs=new $f({}),Object.assign(this,e)}};or.SmartContractResult=WE;var $E=class{constructor(e){this.directSmartContractCallOutcome=new A0({}),this.smartContractResults=[],this.logs=new $f({}),Object.assign(this,e)}};or.TransactionOutcome=$E;var A0=class{constructor(e){this.function="",this.returnDataParts=[],this.returnMessage="",this.returnCode="",Object.assign(this,e)}};or.SmartContractCallOutcome=A0;function YE(t,e){return rD(t).filter(e)}or.findEventsByPredicate=YE;function GW(t,e){return YE(t,r=>r.identifier==e)}or.findEventsByIdentifier=GW;function jW(t,e){return YE(t,r=>r.topics[0]?.toString()==e)}or.findEventsByFirstTopic=jW;function rD(t){let e=[];e.push(...t.logs.events);for(let r of t.smartContractResults)e.push(...r.logs.events);return e}or.gatherAllEvents=rD});var XE=D(E0=>{"use strict";h();Object.defineProperty(E0,"__esModule",{value:!0});E0.TransactionsConverter=void 0;var zW=qn(),QW=Xr(),Ec=Ac(),JE=class{transactionToPlainObject(e){return{nonce:Number(e.nonce),value:e.value.toString(),receiver:e.receiver,sender:e.sender,senderUsername:this.toBase64OrUndefined(e.senderUsername),receiverUsername:this.toBase64OrUndefined(e.receiverUsername),gasPrice:Number(e.gasPrice),gasLimit:Number(e.gasLimit),data:this.toBase64OrUndefined(e.data),chainID:e.chainID.valueOf(),version:e.version,options:e.options==0?void 0:e.options,guardian:e.guardian?e.guardian:void 0,signature:this.toHexOrUndefined(e.signature),guardianSignature:this.toHexOrUndefined(e.guardianSignature)}}toBase64OrUndefined(e){return e&&e.length?p.Buffer.from(e).toString("base64"):void 0}toHexOrUndefined(e){return e&&e.length?p.Buffer.from(e).toString("hex"):void 0}plainObjectToTransaction(e){return new QW.Transaction({nonce:BigInt(e.nonce),value:BigInt(e.value||""),receiver:e.receiver,receiverUsername:this.bufferFromBase64(e.receiverUsername).toString(),sender:e.sender,senderUsername:this.bufferFromBase64(e.senderUsername).toString(),guardian:e.guardian,gasPrice:BigInt(e.gasPrice),gasLimit:BigInt(e.gasLimit),data:this.bufferFromBase64(e.data),chainID:String(e.chainID),version:Number(e.version),options:Number(e.options),signature:this.bufferFromHex(e.signature),guardianSignature:this.bufferFromHex(e.guardianSignature)})}bufferFromBase64(e){return p.Buffer.from(e||"","base64")}bufferFromHex(e){return p.Buffer.from(e||"","hex")}transactionOnNetworkToOutcome(e){let n=new zW.ResultsParser().parseUntypedOutcome(e),i=new Ec.SmartContractCallOutcome({function:e.function,returnCode:n.returnCode.toString(),returnMessage:n.returnMessage,returnDataParts:n.values}),s=e.contractResults.items.map(u=>this.smartContractResultOnNetworkToSmartContractResult(u)),o=new Ec.TransactionLogs({address:e.logs.address.bech32(),events:e.logs.events.map(u=>this.eventOnNetworkToEvent(u))});return new Ec.TransactionOutcome({logs:o,smartContractResults:s,directSmartContractCallOutcome:i})}smartContractResultOnNetworkToSmartContractResult(e){return new Ec.SmartContractResult({sender:e.sender.bech32(),receiver:e.receiver.bech32(),data:p.Buffer.from(e.data),logs:new Ec.TransactionLogs({address:e.logs.address.bech32(),events:e.logs.events.map(r=>this.eventOnNetworkToEvent(r))})})}eventOnNetworkToEvent(e){let r=e.dataPayload?.valueOf()||p.Buffer.from(e.data||""),n=e.additionalData?.map(i=>p.Buffer.from(i.valueOf()))||[];return n.length===0&&r.length&&n.push(p.Buffer.from(r)),new Ec.TransactionEvent({address:e.address.bech32(),identifier:e.identifier,topics:e.topics.map(i=>p.Buffer.from(i.hex(),"hex")),dataItems:n})}};E0.TransactionsConverter=JE});var nD=D(Yi=>{"use strict";h();var KW=Yi&&Yi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WW=Yi&&Yi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$W=Yi&&Yi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KW(e,t,r);return WW(e,t),e};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.Hash=void 0;var YW=$W(Ie()),ZE=class t{constructor(e){if(!e)this.hash=p.Buffer.from([]);else if(e instanceof p.Buffer)this.hash=e;else if(typeof e=="string")this.hash=p.Buffer.from(e,"hex");else throw new YW.ErrBadType("hash","buffer | string",e)}static empty(){return new t(p.Buffer.from([]))}isEmpty(){return this.hash.length==0}toString(){return this.hex()}hex(){return this.hash.toString("hex")}valueOf(){return this.hash}};Yi.Hash=ZE});var Yf=D(Hn=>{"use strict";h();var JW=Hn&&Hn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XW=Hn&&Hn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZW=Hn&&Hn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&JW(e,t,r);return XW(e,t),e};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.interpretSignatureAsBuffer=Hn.Signature=void 0;var iD=ZW(Ie()),sD=64,eb=class t{constructor(e){if(this.valueHex="",!!e){if(typeof e=="string")return t.fromHex(e);if(e instanceof p.Buffer)return t.fromBuffer(e)}}static empty(){return new t}static fromHex(e){if(e.startsWith("0x")&&(e=e.slice(2)),!t.isValidHex(e))throw new iD.ErrSignatureCannotCreate(e);return t.fromValidHex(e)}static isValidHex(e){return p.Buffer.from(e,"hex").length==sD}static fromValidHex(e){let r=new t;return r.valueHex=e,r}static fromBuffer(e){if(e.length!=sD)throw new iD.ErrSignatureCannotCreate(e);return t.fromValidHex(e.toString("hex"))}hex(){return this.valueHex}};Hn.Signature=eb;function e$(t){if(ArrayBuffer.isView(t))return p.Buffer.from(t);if(t.hex!=null)return p.Buffer.from(t.hex(),"hex");throw new Error(`Object cannot be interpreted as a signature: ${t}`)}Hn.interpretSignatureAsBuffer=e$});var aD=D((nwe,oD)=>{"use strict";h();oD.exports=t$;function t$(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(u,a){r[n]=function(f){if(s)if(s=!1,f)a(f);else{for(var d=new Array(arguments.length-1),w=0;w<d.length;)d[w++]=arguments[w];u.apply(null,d)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,a(c))}})}});var fD=D(lD=>{"use strict";h();var b0=lD;b0.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var bc=new Array(64),cD=new Array(123);for(mi=0;mi<64;)cD[bc[mi]=mi<26?mi+65:mi<52?mi+71:mi<62?mi-4:mi-59|43]=mi++;var mi;b0.encode=function(e,r,n){for(var i=null,s=[],o=0,u=0,a;r<n;){var c=e[r++];switch(u){case 0:s[o++]=bc[c>>2],a=(c&3)<<4,u=1;break;case 1:s[o++]=bc[a|c>>4],a=(c&15)<<2,u=2;break;case 2:s[o++]=bc[a|c>>6],s[o++]=bc[c&63],u=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return u&&(s[o++]=bc[a],s[o++]=61,u===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var uD="invalid encoding";b0.decode=function(e,r,n){for(var i=n,s=0,o,u=0;u<e.length;){var a=e.charCodeAt(u++);if(a===61&&s>1)break;if((a=cD[a])===void 0)throw Error(uD);switch(s){case 0:o=a,s=1;break;case 1:r[n++]=o<<2|(a&48)>>4,o=a,s=2;break;case 2:r[n++]=(o&15)<<4|(a&60)>>2,o=a,s=3;break;case 3:r[n++]=(o&3)<<6|a,s=0;break}}if(s===1)throw Error(uD);return n-i};b0.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var dD=D((awe,hD)=>{"use strict";h();hD.exports=S0;function S0(){this._listeners={}}S0.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};S0.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};S0.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var AD=D((cwe,vD)=>{"use strict";h();vD.exports=gD(gD);function gD(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(a,c,f){e[0]=a,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(a,c,f){e[0]=a,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(a,c){return r[0]=a[c],r[1]=a[c+1],r[2]=a[c+2],r[3]=a[c+3],e[0]}function u(a,c){return r[3]=a[c],r[2]=a[c+1],r[1]=a[c+2],r[0]=a[c+3],e[0]}t.readFloatLE=n?o:u,t.readFloatBE=n?u:o}():function(){function e(n,i,s,o){var u=i<0?1:0;if(u&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((u<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((u<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var a=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-a)*8388608)&8388607;n((u<<31|a+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,pD),t.writeFloatBE=e.bind(null,mD);function r(n,i,s){var o=n(i,s),u=(o>>31)*2+1,a=o>>>23&255,c=o&8388607;return a===255?c?NaN:u*(1/0):a===0?u*1401298464324817e-60*c:u*Math.pow(2,a-150)*(c+8388608)}t.readFloatLE=r.bind(null,yD),t.readFloatBE=r.bind(null,wD)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(a,c,f){e[0]=a,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(a,c,f){e[0]=a,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(a,c){return r[0]=a[c],r[1]=a[c+1],r[2]=a[c+2],r[3]=a[c+3],r[4]=a[c+4],r[5]=a[c+5],r[6]=a[c+6],r[7]=a[c+7],e[0]}function u(a,c){return r[7]=a[c],r[6]=a[c+1],r[5]=a[c+2],r[4]=a[c+3],r[3]=a[c+4],r[2]=a[c+5],r[1]=a[c+6],r[0]=a[c+7],e[0]}t.readDoubleLE=n?o:u,t.readDoubleBE=n?u:o}():function(){function e(n,i,s,o,u,a){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,u,a+i),n(1/o>0?0:2147483648,u,a+s);else if(isNaN(o))n(0,u,a+i),n(2146959360,u,a+s);else if(o>17976931348623157e292)n(0,u,a+i),n((c<<31|2146435072)>>>0,u,a+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,u,a+i),n((c<<31|f/4294967296)>>>0,u,a+s);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),f=o*Math.pow(2,-d),n(f*4503599627370496>>>0,u,a+i),n((c<<31|d+1023<<20|f*1048576&1048575)>>>0,u,a+s)}}}t.writeDoubleLE=e.bind(null,pD,0,4),t.writeDoubleBE=e.bind(null,mD,4,0);function r(n,i,s,o,u){var a=n(o,u+i),c=n(o,u+s),f=(c>>31)*2+1,d=c>>>20&2047,w=4294967296*(c&1048575)+a;return d===2047?w?NaN:f*(1/0):d===0?f*5e-324*w:f*Math.pow(2,d-1075)*(w+4503599627370496)}t.readDoubleLE=r.bind(null,yD,0,4),t.readDoubleBE=r.bind(null,wD,4,0)}(),t}function pD(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function mD(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function yD(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function wD(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var ED=D((exports,module)=>{"use strict";h();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var SD=D(bD=>{"use strict";h();var tb=bD;tb.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};tb.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],u=0,a;r<n;)a=e[r++],a<128?o[u++]=a:a>191&&a<224?o[u++]=(a&31)<<6|e[r++]&63:a>239&&a<365?(a=((a&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[u++]=55296+(a>>10),o[u++]=56320+(a&1023)):o[u++]=(a&15)<<12|(e[r++]&63)<<6|e[r++]&63,u>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),u=0);return s?(u&&s.push(String.fromCharCode.apply(String,o.slice(0,u))),s.join("")):String.fromCharCode.apply(String,o.slice(0,u))};tb.write=function(e,r,n){for(var i=n,s,o,u=0;u<e.length;++u)s=e.charCodeAt(u),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(u+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++u,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var TD=D((gwe,ID)=>{"use strict";h();ID.exports=r$;function r$(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(a){if(a<1||a>i)return t(a);o+a>n&&(s=t(n),o=0);var c=e.call(s,o,o+=a);return o&7&&(o=(o|7)+1),c}}});var CD=D((mwe,_D)=>{"use strict";h();_D.exports=yr;var Jf=_o();function yr(t,e){this.lo=t>>>0,this.hi=e>>>0}var ka=yr.zero=new yr(0,0);ka.toNumber=function(){return 0};ka.zzEncode=ka.zzDecode=function(){return this};ka.length=function(){return 1};var n$=yr.zeroHash="\0\0\0\0\0\0\0\0";yr.fromNumber=function(e){if(e===0)return ka;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new yr(n,i)};yr.from=function(e){if(typeof e=="number")return yr.fromNumber(e);if(Jf.isString(e))if(Jf.Long)e=Jf.Long.fromString(e);else return yr.fromNumber(parseInt(e,10));return e.low||e.high?new yr(e.low>>>0,e.high>>>0):ka};yr.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};yr.prototype.toLong=function(e){return Jf.Long?new Jf.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var To=String.prototype.charCodeAt;yr.fromHash=function(e){return e===n$?ka:new yr((To.call(e,0)|To.call(e,1)<<8|To.call(e,2)<<16|To.call(e,3)<<24)>>>0,(To.call(e,4)|To.call(e,5)<<8|To.call(e,6)<<16|To.call(e,7)<<24)>>>0)};yr.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};yr.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};yr.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};yr.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var _o=D(rb=>{"use strict";h();var we=rb;we.asPromise=aD();we.base64=fD();we.EventEmitter=dD();we.float=AD();we.inquire=ED();we.utf8=SD();we.pool=TD();we.LongBits=CD();we.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);we.global=we.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||rb;we.emptyArray=Object.freeze?Object.freeze([]):[];we.emptyObject=Object.freeze?Object.freeze({}):{};we.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};we.isString=function(e){return typeof e=="string"||e instanceof String};we.isObject=function(e){return e&&typeof e=="object"};we.isset=we.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};we.Buffer=function(){try{var t=we.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();we._Buffer_from=null;we._Buffer_allocUnsafe=null;we.newBuffer=function(e){return typeof e=="number"?we.Buffer?we._Buffer_allocUnsafe(e):new we.Array(e):we.Buffer?we._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};we.Array=typeof Uint8Array<"u"?Uint8Array:Array;we.Long=we.global.dcodeIO&&we.global.dcodeIO.Long||we.global.Long||we.inquire("long");we.key2Re=/^true|false|0|1$/;we.key32Re=/^-?(?:0|[1-9][0-9]*)$/;we.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;we.longToHash=function(e){return e?we.LongBits.from(e).toHash():we.LongBits.zeroHash};we.longFromHash=function(e,r){var n=we.LongBits.fromHash(e);return we.Long?we.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function ND(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}we.merge=ND;we.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function xD(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&ND(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}we.newError=xD;we.ProtocolError=xD("ProtocolError");we.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};we.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};we.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};we._configure=function(){var t=we.Buffer;if(!t){we._Buffer_from=we._Buffer_allocUnsafe=null;return}we._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},we._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var cb=D((Awe,RD)=>{"use strict";h();RD.exports=Ue;var Gn=_o(),nb,I0=Gn.LongBits,OD=Gn.base64,DD=Gn.utf8;function Xf(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function sb(){}function i$(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Ue(){this.len=0,this.head=new Xf(sb,0,0),this.tail=this.head,this.states=null}var PD=function(){return Gn.Buffer?function(){return(Ue.create=function(){return new nb})()}:function(){return new Ue}};Ue.create=PD();Ue.alloc=function(e){return new Gn.Array(e)};Gn.Array!==Array&&(Ue.alloc=Gn.pool(Ue.alloc,Gn.Array.prototype.subarray));Ue.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Xf(e,r,n),this.len+=r,this};function ob(t,e,r){e[r]=t&255}function s$(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function ab(t,e){this.len=t,this.next=void 0,this.val=e}ab.prototype=Object.create(Xf.prototype);ab.prototype.fn=s$;Ue.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ab((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Ue.prototype.int32=function(e){return e<0?this._push(ub,10,I0.fromNumber(e)):this.uint32(e)};Ue.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function ub(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Ue.prototype.uint64=function(e){var r=I0.from(e);return this._push(ub,r.length(),r)};Ue.prototype.int64=Ue.prototype.uint64;Ue.prototype.sint64=function(e){var r=I0.from(e).zzEncode();return this._push(ub,r.length(),r)};Ue.prototype.bool=function(e){return this._push(ob,1,e?1:0)};function ib(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Ue.prototype.fixed32=function(e){return this._push(ib,4,e>>>0)};Ue.prototype.sfixed32=Ue.prototype.fixed32;Ue.prototype.fixed64=function(e){var r=I0.from(e);return this._push(ib,4,r.lo)._push(ib,4,r.hi)};Ue.prototype.sfixed64=Ue.prototype.fixed64;Ue.prototype.float=function(e){return this._push(Gn.float.writeFloatLE,4,e)};Ue.prototype.double=function(e){return this._push(Gn.float.writeDoubleLE,8,e)};var o$=Gn.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};Ue.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(ob,1,0);if(Gn.isString(e)){var n=Ue.alloc(r=OD.length(e));OD.decode(e,n,0),e=n}return this.uint32(r)._push(o$,r,e)};Ue.prototype.string=function(e){var r=DD.length(e);return r?this.uint32(r)._push(DD.write,r,e):this._push(ob,1,0)};Ue.prototype.fork=function(){return this.states=new i$(this),this.head=this.tail=new Xf(sb,0,0),this.len=0,this};Ue.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Xf(sb,0,0),this.len=0),this};Ue.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Ue.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Ue._configure=function(t){nb=t,Ue.create=PD(),nb._configure()}});var LD=D((bwe,MD)=>{"use strict";h();MD.exports=Ji;var BD=cb();(Ji.prototype=Object.create(BD.prototype)).constructor=Ji;var Co=_o();function Ji(){BD.call(this)}Ji._configure=function(){Ji.alloc=Co._Buffer_allocUnsafe,Ji.writeBytesBuffer=Co.Buffer&&Co.Buffer.prototype instanceof Uint8Array&&Co.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Ji.prototype.bytes=function(e){Co.isString(e)&&(e=Co._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ji.writeBytesBuffer,r,e),this};function a$(t,e,r){t.length<40?Co.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ji.prototype.string=function(e){var r=Co.Buffer.byteLength(e);return this.uint32(r),r&&this._push(a$,r,e),this};Ji._configure()});var hb=D((Iwe,kD)=>{"use strict";h();kD.exports=Xt;var yi=_o(),fb,qD=yi.LongBits,u$=yi.utf8;function wi(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Xt(t){this.buf=t,this.pos=0,this.len=t.length}var FD=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Xt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Xt(e);throw Error("illegal buffer")},VD=function(){return yi.Buffer?function(r){return(Xt.create=function(i){return yi.Buffer.isBuffer(i)?new fb(i):FD(i)})(r)}:FD};Xt.create=VD();Xt.prototype._slice=yi.Array.prototype.subarray||yi.Array.prototype.slice;Xt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,wi(this,10);return e}}();Xt.prototype.int32=function(){return this.uint32()|0};Xt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function lb(){var t=new qD(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw wi(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw wi(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Xt.prototype.bool=function(){return this.uint32()!==0};function T0(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Xt.prototype.fixed32=function(){if(this.pos+4>this.len)throw wi(this,4);return T0(this.buf,this.pos+=4)};Xt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw wi(this,4);return T0(this.buf,this.pos+=4)|0};function UD(){if(this.pos+8>this.len)throw wi(this,8);return new qD(T0(this.buf,this.pos+=4),T0(this.buf,this.pos+=4))}Xt.prototype.float=function(){if(this.pos+4>this.len)throw wi(this,4);var e=yi.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Xt.prototype.double=function(){if(this.pos+8>this.len)throw wi(this,4);var e=yi.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Xt.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw wi(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=yi.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};Xt.prototype.string=function(){var e=this.bytes();return u$.read(e,0,e.length)};Xt.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw wi(this,e);this.pos+=e}else do if(this.pos>=this.len)throw wi(this);while(this.buf[this.pos++]&128);return this};Xt.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Xt._configure=function(t){fb=t,Xt.create=VD(),fb._configure();var e=yi.Long?"toLong":"toNumber";yi.merge(Xt.prototype,{int64:function(){return lb.call(this)[e](!1)},uint64:function(){return lb.call(this)[e](!0)},sint64:function(){return lb.call(this).zzDecode()[e](!1)},fixed64:function(){return UD.call(this)[e](!0)},sfixed64:function(){return UD.call(this)[e](!1)}})}});var zD=D((_we,jD)=>{"use strict";h();jD.exports=Ha;var GD=hb();(Ha.prototype=Object.create(GD.prototype)).constructor=Ha;var HD=_o();function Ha(t){GD.call(this,t)}Ha._configure=function(){HD.Buffer&&(Ha.prototype._slice=HD.Buffer.prototype.slice)};Ha.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Ha._configure()});var KD=D((Nwe,QD)=>{"use strict";h();QD.exports=Zf;var db=_o();(Zf.prototype=Object.create(db.EventEmitter.prototype)).constructor=Zf;function Zf(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");db.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r}Zf.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return db.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(a,c){if(a)return o.emit("error",a,e),s(a);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",c,e),s(null,c)})}catch(u){o.emit("error",u,e),setTimeout(function(){s(u)},0);return}};Zf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var $D=D(WD=>{"use strict";h();var c$=WD;c$.Service=KD()});var JD=D((Pwe,YD)=>{"use strict";h();YD.exports={}});var e8=D(ZD=>{"use strict";h();var tn=ZD;tn.build="minimal";tn.Writer=cb();tn.BufferWriter=LD();tn.Reader=hb();tn.BufferReader=zD();tn.util=_o();tn.rpc=$D();tn.roots=JD();tn.configure=XD;function XD(){tn.util._configure(),tn.Writer._configure(tn.BufferWriter),tn.Reader._configure(tn.BufferReader)}XD()});var r8=D((Lwe,t8)=>{"use strict";h();t8.exports=e8()});var i8=D((n8,eh)=>{"use strict";h();(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Pd=="function"&&typeof eh=="object"&&eh&&eh.exports&&(eh.exports=e(r8()))})(n8,function(t){"use strict";var e=t.Reader,r=t.Writer,n=t.util,i=t.roots.default||(t.roots.default={});return i.proto=function(){var s={};return s.Transaction=function(){function o(u){if(u)for(var a=Object.keys(u),c=0;c<a.length;++c)u[a[c]]!=null&&(this[a[c]]=u[a[c]])}return o.prototype.Nonce=n.Long?n.Long.fromBits(0,0,!0):0,o.prototype.Value=n.newBuffer([]),o.prototype.RcvAddr=n.newBuffer([]),o.prototype.RcvUserName=n.newBuffer([]),o.prototype.SndAddr=n.newBuffer([]),o.prototype.SndUserName=n.newBuffer([]),o.prototype.GasPrice=n.Long?n.Long.fromBits(0,0,!0):0,o.prototype.GasLimit=n.Long?n.Long.fromBits(0,0,!0):0,o.prototype.Data=n.newBuffer([]),o.prototype.ChainID=n.newBuffer([]),o.prototype.Version=0,o.prototype.Signature=n.newBuffer([]),o.prototype.Options=0,o.prototype.GuardianAddr=n.newBuffer([]),o.prototype.GuardianSignature=n.newBuffer([]),o.create=function(a){return new o(a)},o.encode=function(a,c){return c||(c=r.create()),a.Nonce!=null&&Object.hasOwnProperty.call(a,"Nonce")&&c.uint32(8).uint64(a.Nonce),a.Value!=null&&Object.hasOwnProperty.call(a,"Value")&&c.uint32(18).bytes(a.Value),a.RcvAddr!=null&&Object.hasOwnProperty.call(a,"RcvAddr")&&c.uint32(26).bytes(a.RcvAddr),a.RcvUserName!=null&&Object.hasOwnProperty.call(a,"RcvUserName")&&c.uint32(34).bytes(a.RcvUserName),a.SndAddr!=null&&Object.hasOwnProperty.call(a,"SndAddr")&&c.uint32(42).bytes(a.SndAddr),a.SndUserName!=null&&Object.hasOwnProperty.call(a,"SndUserName")&&c.uint32(50).bytes(a.SndUserName),a.GasPrice!=null&&Object.hasOwnProperty.call(a,"GasPrice")&&c.uint32(56).uint64(a.GasPrice),a.GasLimit!=null&&Object.hasOwnProperty.call(a,"GasLimit")&&c.uint32(64).uint64(a.GasLimit),a.Data!=null&&Object.hasOwnProperty.call(a,"Data")&&c.uint32(74).bytes(a.Data),a.ChainID!=null&&Object.hasOwnProperty.call(a,"ChainID")&&c.uint32(82).bytes(a.ChainID),a.Version!=null&&Object.hasOwnProperty.call(a,"Version")&&c.uint32(88).uint32(a.Version),a.Signature!=null&&Object.hasOwnProperty.call(a,"Signature")&&c.uint32(98).bytes(a.Signature),a.Options!=null&&Object.hasOwnProperty.call(a,"Options")&&c.uint32(104).uint32(a.Options),a.GuardianAddr!=null&&Object.hasOwnProperty.call(a,"GuardianAddr")&&c.uint32(114).bytes(a.GuardianAddr),a.GuardianSignature!=null&&Object.hasOwnProperty.call(a,"GuardianSignature")&&c.uint32(122).bytes(a.GuardianSignature),c},o.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},o.decode=function(a,c){a instanceof e||(a=e.create(a));for(var f=c===void 0?a.len:a.pos+c,d=new i.proto.Transaction;a.pos<f;){var w=a.uint32();switch(w>>>3){case 1:{d.Nonce=a.uint64();break}case 2:{d.Value=a.bytes();break}case 3:{d.RcvAddr=a.bytes();break}case 4:{d.RcvUserName=a.bytes();break}case 5:{d.SndAddr=a.bytes();break}case 6:{d.SndUserName=a.bytes();break}case 7:{d.GasPrice=a.uint64();break}case 8:{d.GasLimit=a.uint64();break}case 9:{d.Data=a.bytes();break}case 10:{d.ChainID=a.bytes();break}case 11:{d.Version=a.uint32();break}case 12:{d.Signature=a.bytes();break}case 13:{d.Options=a.uint32();break}case 14:{d.GuardianAddr=a.bytes();break}case 15:{d.GuardianSignature=a.bytes();break}default:a.skipType(w&7);break}}return d},o.decodeDelimited=function(a){return a instanceof e||(a=new e(a)),this.decode(a,a.uint32())},o.verify=function(a){return typeof a!="object"||a===null?"object expected":a.Nonce!=null&&a.hasOwnProperty("Nonce")&&!n.isInteger(a.Nonce)&&!(a.Nonce&&n.isInteger(a.Nonce.low)&&n.isInteger(a.Nonce.high))?"Nonce: integer|Long expected":a.Value!=null&&a.hasOwnProperty("Value")&&!(a.Value&&typeof a.Value.length=="number"||n.isString(a.Value))?"Value: buffer expected":a.RcvAddr!=null&&a.hasOwnProperty("RcvAddr")&&!(a.RcvAddr&&typeof a.RcvAddr.length=="number"||n.isString(a.RcvAddr))?"RcvAddr: buffer expected":a.RcvUserName!=null&&a.hasOwnProperty("RcvUserName")&&!(a.RcvUserName&&typeof a.RcvUserName.length=="number"||n.isString(a.RcvUserName))?"RcvUserName: buffer expected":a.SndAddr!=null&&a.hasOwnProperty("SndAddr")&&!(a.SndAddr&&typeof a.SndAddr.length=="number"||n.isString(a.SndAddr))?"SndAddr: buffer expected":a.SndUserName!=null&&a.hasOwnProperty("SndUserName")&&!(a.SndUserName&&typeof a.SndUserName.length=="number"||n.isString(a.SndUserName))?"SndUserName: buffer expected":a.GasPrice!=null&&a.hasOwnProperty("GasPrice")&&!n.isInteger(a.GasPrice)&&!(a.GasPrice&&n.isInteger(a.GasPrice.low)&&n.isInteger(a.GasPrice.high))?"GasPrice: integer|Long expected":a.GasLimit!=null&&a.hasOwnProperty("GasLimit")&&!n.isInteger(a.GasLimit)&&!(a.GasLimit&&n.isInteger(a.GasLimit.low)&&n.isInteger(a.GasLimit.high))?"GasLimit: integer|Long expected":a.Data!=null&&a.hasOwnProperty("Data")&&!(a.Data&&typeof a.Data.length=="number"||n.isString(a.Data))?"Data: buffer expected":a.ChainID!=null&&a.hasOwnProperty("ChainID")&&!(a.ChainID&&typeof a.ChainID.length=="number"||n.isString(a.ChainID))?"ChainID: buffer expected":a.Version!=null&&a.hasOwnProperty("Version")&&!n.isInteger(a.Version)?"Version: integer expected":a.Signature!=null&&a.hasOwnProperty("Signature")&&!(a.Signature&&typeof a.Signature.length=="number"||n.isString(a.Signature))?"Signature: buffer expected":a.Options!=null&&a.hasOwnProperty("Options")&&!n.isInteger(a.Options)?"Options: integer expected":a.GuardianAddr!=null&&a.hasOwnProperty("GuardianAddr")&&!(a.GuardianAddr&&typeof a.GuardianAddr.length=="number"||n.isString(a.GuardianAddr))?"GuardianAddr: buffer expected":a.GuardianSignature!=null&&a.hasOwnProperty("GuardianSignature")&&!(a.GuardianSignature&&typeof a.GuardianSignature.length=="number"||n.isString(a.GuardianSignature))?"GuardianSignature: buffer expected":null},o.fromObject=function(a){if(a instanceof i.proto.Transaction)return a;var c=new i.proto.Transaction;return a.Nonce!=null&&(n.Long?(c.Nonce=n.Long.fromValue(a.Nonce)).unsigned=!0:typeof a.Nonce=="string"?c.Nonce=parseInt(a.Nonce,10):typeof a.Nonce=="number"?c.Nonce=a.Nonce:typeof a.Nonce=="object"&&(c.Nonce=new n.LongBits(a.Nonce.low>>>0,a.Nonce.high>>>0).toNumber(!0))),a.Value!=null&&(typeof a.Value=="string"?n.base64.decode(a.Value,c.Value=n.newBuffer(n.base64.length(a.Value)),0):a.Value.length>=0&&(c.Value=a.Value)),a.RcvAddr!=null&&(typeof a.RcvAddr=="string"?n.base64.decode(a.RcvAddr,c.RcvAddr=n.newBuffer(n.base64.length(a.RcvAddr)),0):a.RcvAddr.length>=0&&(c.RcvAddr=a.RcvAddr)),a.RcvUserName!=null&&(typeof a.RcvUserName=="string"?n.base64.decode(a.RcvUserName,c.RcvUserName=n.newBuffer(n.base64.length(a.RcvUserName)),0):a.RcvUserName.length>=0&&(c.RcvUserName=a.RcvUserName)),a.SndAddr!=null&&(typeof a.SndAddr=="string"?n.base64.decode(a.SndAddr,c.SndAddr=n.newBuffer(n.base64.length(a.SndAddr)),0):a.SndAddr.length>=0&&(c.SndAddr=a.SndAddr)),a.SndUserName!=null&&(typeof a.SndUserName=="string"?n.base64.decode(a.SndUserName,c.SndUserName=n.newBuffer(n.base64.length(a.SndUserName)),0):a.SndUserName.length>=0&&(c.SndUserName=a.SndUserName)),a.GasPrice!=null&&(n.Long?(c.GasPrice=n.Long.fromValue(a.GasPrice)).unsigned=!0:typeof a.GasPrice=="string"?c.GasPrice=parseInt(a.GasPrice,10):typeof a.GasPrice=="number"?c.GasPrice=a.GasPrice:typeof a.GasPrice=="object"&&(c.GasPrice=new n.LongBits(a.GasPrice.low>>>0,a.GasPrice.high>>>0).toNumber(!0))),a.GasLimit!=null&&(n.Long?(c.GasLimit=n.Long.fromValue(a.GasLimit)).unsigned=!0:typeof a.GasLimit=="string"?c.GasLimit=parseInt(a.GasLimit,10):typeof a.GasLimit=="number"?c.GasLimit=a.GasLimit:typeof a.GasLimit=="object"&&(c.GasLimit=new n.LongBits(a.GasLimit.low>>>0,a.GasLimit.high>>>0).toNumber(!0))),a.Data!=null&&(typeof a.Data=="string"?n.base64.decode(a.Data,c.Data=n.newBuffer(n.base64.length(a.Data)),0):a.Data.length>=0&&(c.Data=a.Data)),a.ChainID!=null&&(typeof a.ChainID=="string"?n.base64.decode(a.ChainID,c.ChainID=n.newBuffer(n.base64.length(a.ChainID)),0):a.ChainID.length>=0&&(c.ChainID=a.ChainID)),a.Version!=null&&(c.Version=a.Version>>>0),a.Signature!=null&&(typeof a.Signature=="string"?n.base64.decode(a.Signature,c.Signature=n.newBuffer(n.base64.length(a.Signature)),0):a.Signature.length>=0&&(c.Signature=a.Signature)),a.Options!=null&&(c.Options=a.Options>>>0),a.GuardianAddr!=null&&(typeof a.GuardianAddr=="string"?n.base64.decode(a.GuardianAddr,c.GuardianAddr=n.newBuffer(n.base64.length(a.GuardianAddr)),0):a.GuardianAddr.length>=0&&(c.GuardianAddr=a.GuardianAddr)),a.GuardianSignature!=null&&(typeof a.GuardianSignature=="string"?n.base64.decode(a.GuardianSignature,c.GuardianSignature=n.newBuffer(n.base64.length(a.GuardianSignature)),0):a.GuardianSignature.length>=0&&(c.GuardianSignature=a.GuardianSignature)),c},o.toObject=function(a,c){c||(c={});var f={};if(c.defaults){if(n.Long){var d=new n.Long(0,0,!0);f.Nonce=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.Nonce=c.longs===String?"0":0;if(c.bytes===String?f.Value="":(f.Value=[],c.bytes!==Array&&(f.Value=n.newBuffer(f.Value))),c.bytes===String?f.RcvAddr="":(f.RcvAddr=[],c.bytes!==Array&&(f.RcvAddr=n.newBuffer(f.RcvAddr))),c.bytes===String?f.RcvUserName="":(f.RcvUserName=[],c.bytes!==Array&&(f.RcvUserName=n.newBuffer(f.RcvUserName))),c.bytes===String?f.SndAddr="":(f.SndAddr=[],c.bytes!==Array&&(f.SndAddr=n.newBuffer(f.SndAddr))),c.bytes===String?f.SndUserName="":(f.SndUserName=[],c.bytes!==Array&&(f.SndUserName=n.newBuffer(f.SndUserName))),n.Long){var d=new n.Long(0,0,!0);f.GasPrice=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.GasPrice=c.longs===String?"0":0;if(n.Long){var d=new n.Long(0,0,!0);f.GasLimit=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.GasLimit=c.longs===String?"0":0;c.bytes===String?f.Data="":(f.Data=[],c.bytes!==Array&&(f.Data=n.newBuffer(f.Data))),c.bytes===String?f.ChainID="":(f.ChainID=[],c.bytes!==Array&&(f.ChainID=n.newBuffer(f.ChainID))),f.Version=0,c.bytes===String?f.Signature="":(f.Signature=[],c.bytes!==Array&&(f.Signature=n.newBuffer(f.Signature))),f.Options=0,c.bytes===String?f.GuardianAddr="":(f.GuardianAddr=[],c.bytes!==Array&&(f.GuardianAddr=n.newBuffer(f.GuardianAddr))),c.bytes===String?f.GuardianSignature="":(f.GuardianSignature=[],c.bytes!==Array&&(f.GuardianSignature=n.newBuffer(f.GuardianSignature)))}return a.Nonce!=null&&a.hasOwnProperty("Nonce")&&(typeof a.Nonce=="number"?f.Nonce=c.longs===String?String(a.Nonce):a.Nonce:f.Nonce=c.longs===String?n.Long.prototype.toString.call(a.Nonce):c.longs===Number?new n.LongBits(a.Nonce.low>>>0,a.Nonce.high>>>0).toNumber(!0):a.Nonce),a.Value!=null&&a.hasOwnProperty("Value")&&(f.Value=c.bytes===String?n.base64.encode(a.Value,0,a.Value.length):c.bytes===Array?Array.prototype.slice.call(a.Value):a.Value),a.RcvAddr!=null&&a.hasOwnProperty("RcvAddr")&&(f.RcvAddr=c.bytes===String?n.base64.encode(a.RcvAddr,0,a.RcvAddr.length):c.bytes===Array?Array.prototype.slice.call(a.RcvAddr):a.RcvAddr),a.RcvUserName!=null&&a.hasOwnProperty("RcvUserName")&&(f.RcvUserName=c.bytes===String?n.base64.encode(a.RcvUserName,0,a.RcvUserName.length):c.bytes===Array?Array.prototype.slice.call(a.RcvUserName):a.RcvUserName),a.SndAddr!=null&&a.hasOwnProperty("SndAddr")&&(f.SndAddr=c.bytes===String?n.base64.encode(a.SndAddr,0,a.SndAddr.length):c.bytes===Array?Array.prototype.slice.call(a.SndAddr):a.SndAddr),a.SndUserName!=null&&a.hasOwnProperty("SndUserName")&&(f.SndUserName=c.bytes===String?n.base64.encode(a.SndUserName,0,a.SndUserName.length):c.bytes===Array?Array.prototype.slice.call(a.SndUserName):a.SndUserName),a.GasPrice!=null&&a.hasOwnProperty("GasPrice")&&(typeof a.GasPrice=="number"?f.GasPrice=c.longs===String?String(a.GasPrice):a.GasPrice:f.GasPrice=c.longs===String?n.Long.prototype.toString.call(a.GasPrice):c.longs===Number?new n.LongBits(a.GasPrice.low>>>0,a.GasPrice.high>>>0).toNumber(!0):a.GasPrice),a.GasLimit!=null&&a.hasOwnProperty("GasLimit")&&(typeof a.GasLimit=="number"?f.GasLimit=c.longs===String?String(a.GasLimit):a.GasLimit:f.GasLimit=c.longs===String?n.Long.prototype.toString.call(a.GasLimit):c.longs===Number?new n.LongBits(a.GasLimit.low>>>0,a.GasLimit.high>>>0).toNumber(!0):a.GasLimit),a.Data!=null&&a.hasOwnProperty("Data")&&(f.Data=c.bytes===String?n.base64.encode(a.Data,0,a.Data.length):c.bytes===Array?Array.prototype.slice.call(a.Data):a.Data),a.ChainID!=null&&a.hasOwnProperty("ChainID")&&(f.ChainID=c.bytes===String?n.base64.encode(a.ChainID,0,a.ChainID.length):c.bytes===Array?Array.prototype.slice.call(a.ChainID):a.ChainID),a.Version!=null&&a.hasOwnProperty("Version")&&(f.Version=a.Version),a.Signature!=null&&a.hasOwnProperty("Signature")&&(f.Signature=c.bytes===String?n.base64.encode(a.Signature,0,a.Signature.length):c.bytes===Array?Array.prototype.slice.call(a.Signature):a.Signature),a.Options!=null&&a.hasOwnProperty("Options")&&(f.Options=a.Options),a.GuardianAddr!=null&&a.hasOwnProperty("GuardianAddr")&&(f.GuardianAddr=c.bytes===String?n.base64.encode(a.GuardianAddr,0,a.GuardianAddr.length):c.bytes===Array?Array.prototype.slice.call(a.GuardianAddr):a.GuardianAddr),a.GuardianSignature!=null&&a.hasOwnProperty("GuardianSignature")&&(f.GuardianSignature=c.bytes===String?n.base64.encode(a.GuardianSignature,0,a.GuardianSignature.length):c.bytes===Array?Array.prototype.slice.call(a.GuardianSignature):a.GuardianSignature),f},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Transaction"},o}(),s}(),i})});var s8=D(jn=>{"use strict";h();var l$=jn&&jn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),f$=jn&&jn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h$=jn&&jn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&l$(e,t,r);return f$(e,t),e},d$=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jn,"__esModule",{value:!0});jn.ProtoSerializer=void 0;var g$=d$((rr(),_e(fr))),gb=Ve(),p$=hr(),m$=h$(Ie()),y$=Bu(),pb=class{serializeTransaction(e){let r=i8().proto,n=new gb.Address(e.getReceiver().bech32()).pubkey(),i=new gb.Address(e.getSender().bech32()).pubkey(),s=new r.Transaction({Nonce:e.getNonce().valueOf()?e.getNonce().valueOf():void 0,Value:this.serializeTransactionValue(e.getValue()),RcvAddr:n,RcvUserName:e.getReceiverUsername()?p.Buffer.from(e.getReceiverUsername()).toString("base64"):void 0,SndAddr:i,SndUserName:e.getSenderUsername()?p.Buffer.from(e.getSenderUsername()).toString("base64"):void 0,GasPrice:e.getGasPrice().valueOf(),GasLimit:e.getGasLimit().valueOf(),Data:e.getData().length()==0?null:e.getData().valueOf(),ChainID:p.Buffer.from(e.getChainID().valueOf()),Version:e.getVersion().valueOf(),Signature:e.getSignature()});if(e.getOptions().valueOf()!==p$.TRANSACTION_OPTIONS_DEFAULT&&(s.Options=e.getOptions().valueOf()),e.isGuardedTransaction()){let a=e.getGuardian();s.GuardianAddr=new gb.Address(a.bech32()).pubkey(),s.GuardianSignature=e.getGuardianSignature()}let o=r.Transaction.encode(s).finish();return p.Buffer.from(o)}serializeTransactionValue(e){let r=new g$.default(e.toString());if(r.isZero())return p.Buffer.from([0,0]);let n=y$.bigIntToBuffer(r);return n=p.Buffer.concat([p.Buffer.from([0]),n]),n}deserializeTransaction(e){throw new m$.ErrUnsupportedOperation("deserializeTransaction")}};jn.ProtoSerializer=pb});var o8=D(Ga=>{"use strict";h();var w$=Ga&&Ga.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),v$=Ga&&Ga.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&w$(e,t,r)};Object.defineProperty(Ga,"__esModule",{value:!0});v$(s8(),Ga)});var _0=D(zn=>{"use strict";h();var A$=zn&&zn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),E$=zn&&zn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),b$=zn&&zn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&A$(e,t,r);return E$(e,t),e},S$=zn&&zn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zn,"__esModule",{value:!0});zn.TransactionComputer=void 0;var th=b$(Ie()),a8=S$((rr(),_e(fr))),I$=o8(),T$=Xr(),rn=hr(),_$=JA(),C$=sf(),N$=32,mb=class{constructor(){}computeTransactionFee(e,r){let n=BigInt(r.MinGasLimit+e.data.length*r.GasPerDataByte);if(n>e.gasLimit)throw new th.ErrNotEnoughGas(parseInt(e.gasLimit.toString(),10));let i=e.gasPrice,s=n*i;if(n===e.gasLimit)return s;let o=e.gasLimit-n,u=BigInt(new a8.default(i.toString()).multipliedBy(new a8.default(r.GasPriceModifier)).toFixed(0)),a=o*u;return s+a}computeBytesForSigning(e){this.ensureValidTransactionFields(e);let r=this.toPlainObjectForSigning(e),n=JSON.stringify(r);return new Uint8Array(p.Buffer.from(n))}computeBytesForVerifying(e){return this.hasOptionsSetForHashSigning(e)?this.computeHashForSigning(e):this.computeBytesForSigning(e)}computeHashForSigning(e){let r=this.toPlainObjectForSigning(e),n=p.Buffer.from(JSON.stringify(r));return C$("keccak256").update(n).digest()}computeTransactionHash(e){let n=new I$.ProtoSerializer().serializeTransaction(new T$.Transaction(e)),i=_$(N$).update(n).digest("hex");return p.Buffer.from(i,"hex")}hasOptionsSetForGuardedTransaction(e){return(e.options&rn.TRANSACTION_OPTIONS_TX_GUARDED)==rn.TRANSACTION_OPTIONS_TX_GUARDED}hasOptionsSetForHashSigning(e){return(e.options&rn.TRANSACTION_OPTIONS_TX_HASH_SIGN)==rn.TRANSACTION_OPTIONS_TX_HASH_SIGN}applyGuardian(e,r){e.version<rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS&&(e.version=rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS),e.options=e.options|rn.TRANSACTION_OPTIONS_TX_GUARDED,e.guardian=r}applyOptionsForHashSigning(e){e.version<rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS&&(e.version=rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS),e.options=e.options|rn.TRANSACTION_OPTIONS_TX_HASH_SIGN}toPlainObjectForSigning(e){return{nonce:Number(e.nonce),value:e.value.toString(),receiver:e.receiver,sender:e.sender,senderUsername:this.toBase64OrUndefined(e.senderUsername),receiverUsername:this.toBase64OrUndefined(e.receiverUsername),gasPrice:Number(e.gasPrice),gasLimit:Number(e.gasLimit),data:this.toBase64OrUndefined(e.data),chainID:e.chainID,version:e.version,options:e.options?e.options:void 0,guardian:e.guardian?e.guardian:void 0}}toBase64OrUndefined(e){return e&&e.length?p.Buffer.from(e).toString("base64"):void 0}ensureValidTransactionFields(e){if(e.sender.length!==rn.BECH32_ADDRESS_LENGTH)throw new th.ErrBadUsage("Invalid `sender` field. Should be the bech32 address of the sender.");if(e.receiver.length!==rn.BECH32_ADDRESS_LENGTH)throw new th.ErrBadUsage("Invalid `receiver` field. Should be the bech32 address of the receiver.");if(!e.chainID.length)throw new th.ErrBadUsage("The `chainID` field is not set");if(e.version<rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS&&(this.hasOptionsSetForGuardedTransaction(e)||this.hasOptionsSetForHashSigning(e)))throw new th.ErrBadUsage(`Non-empty transaction options requires transaction version >= ${rn.MIN_TRANSACTION_VERSION_THAT_SUPPORTS_OPTIONS}`)}};zn.TransactionComputer=mb});var Xr=D(Sc=>{"use strict";h();Object.defineProperty(Sc,"__esModule",{value:!0});Sc.TransactionHash=Sc.Transaction=void 0;var u8=(rr(),_e(fr)),yb=Ve(),wb=hr(),c8=XE(),x$=nD(),l8=$l(),f8=Yf(),O$=Ms(),vb=_0(),Ab=class{constructor(e){this.nonce=BigInt(e.nonce?.valueOf()||0n),this.value=e.value?BigInt(new u8.BigNumber(e.value.toString()).toFixed(0)):0n,this.sender=this.addressAsBech32(e.sender),this.receiver=this.addressAsBech32(e.receiver),this.senderUsername=e.senderUsername||"",this.receiverUsername=e.receiverUsername||"",this.gasPrice=BigInt(e.gasPrice?.valueOf()||wb.TRANSACTION_MIN_GAS_PRICE),this.gasLimit=BigInt(e.gasLimit.valueOf()),this.data=e.data?.valueOf()||new Uint8Array,this.chainID=e.chainID.valueOf(),this.version=Number(e.version?.valueOf()||wb.TRANSACTION_VERSION_DEFAULT),this.options=Number(e.options?.valueOf()||wb.TRANSACTION_OPTIONS_DEFAULT),this.guardian=e.guardian?this.addressAsBech32(e.guardian):"",this.signature=e.signature||p.Buffer.from([]),this.guardianSignature=e.guardianSignature||p.Buffer.from([])}addressAsBech32(e){return typeof e=="string"?e:e.bech32()}getNonce(){return Number(this.nonce)}setNonce(e){this.nonce=BigInt(e.valueOf())}getValue(){return this.value}setValue(e){this.value=BigInt(e.toString())}getSender(){return yb.Address.fromBech32(this.sender)}setSender(e){this.sender=typeof e=="string"?e:e.bech32()}getReceiver(){return yb.Address.fromBech32(this.receiver)}getSenderUsername(){return this.senderUsername}setSenderUsername(e){this.senderUsername=e}getReceiverUsername(){return this.receiverUsername}setReceiverUsername(e){this.receiverUsername=e}getGuardian(){return new yb.Address(this.guardian)}getGasPrice(){return Number(this.gasPrice)}setGasPrice(e){this.gasPrice=BigInt(e.valueOf())}getGasLimit(){return Number(this.gasLimit)}setGasLimit(e){this.gasLimit=BigInt(e.valueOf())}getData(){return new O$.TransactionPayload(p.Buffer.from(this.data))}getChainID(){return this.chainID}setChainID(e){this.chainID=e.valueOf()}getVersion(){return new l8.TransactionVersion(this.version)}setVersion(e){this.version=e.valueOf()}getOptions(){return new l8.TransactionOptions(this.options.valueOf())}setOptions(e){this.options=e.valueOf()}getSignature(){return p.Buffer.from(this.signature)}getGuardianSignature(){return p.Buffer.from(this.guardianSignature)}setGuardian(e){this.guardian=typeof e=="string"?e:e.bech32()}getHash(){return C0.compute(this)}serializeForSigning(){let r=new vb.TransactionComputer().computeBytesForSigning(this);return p.Buffer.from(r)}isGuardedTransaction(){let e=this.guardian.length>0,r=this.guardianSignature.length>0;return this.getOptions().isWithGuardian()&&e&&r}toPlainObject(){return new c8.TransactionsConverter().transactionToPlainObject(this)}static fromPlainObject(e){return new c8.TransactionsConverter().plainObjectToTransaction(e)}applySignature(e){this.signature=f8.interpretSignatureAsBuffer(e)}applyGuardianSignature(e){this.guardianSignature=f8.interpretSignatureAsBuffer(e)}toSendable(){return this.toPlainObject()}computeFee(e){let n=new vb.TransactionComputer().computeTransactionFee(this,e);return new u8.BigNumber(n.toString())}};Sc.Transaction=Ab;var C0=class t extends x$.Hash{constructor(e){super(e)}static compute(e){let n=new vb.TransactionComputer().computeTransactionHash(e);return new t(p.Buffer.from(n).toString("hex"))}};Sc.TransactionHash=C0});var d8=D(N0=>{"use strict";h();Object.defineProperty(N0,"__esModule",{value:!0});N0.TokenOperationsFactory=void 0;var Eb=hr(),D$=oo(),h8=$l(),P$=Xr(),R$=Ms(),ae=Kd(),bb=class{constructor(e){this.config=e,this.trueAsHex=ae.utf8ToHex("true"),this.falseAsHex=ae.utf8ToHex("false")}issueFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issue",ae.utf8ToHex(e.tokenName),ae.utf8ToHex(e.tokenTicker),ae.bigIntToHex(e.initialSupply),ae.bigIntToHex(e.numDecimals),ae.utf8ToHex("canFreeze"),e.canFreeze?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canWipe"),e.canWipe?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canPause"),e.canPause?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canChangeOwner"),e.canChangeOwner?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canUpgrade"),e.canUpgrade?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canAddSpecialRoles"),e.canAddSpecialRoles?this.trueAsHex:this.falseAsHex];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}notifyAboutUnsettingBurnRoleGlobally(){D$.Logger.info(`
==========
IMPORTANT!
==========
You are about to issue (register) a new token. This will set the role "ESDTRoleBurnForAll" (globally).
Once the token is registered, you can unset this role by calling "unsetBurnRoleGlobally" (in a separate transaction).`)}issueSemiFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issueSemiFungible",ae.utf8ToHex(e.tokenName),ae.utf8ToHex(e.tokenTicker),ae.utf8ToHex("canFreeze"),e.canFreeze?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canWipe"),e.canWipe?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canPause"),e.canPause?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canTransferNFTCreateRole"),e.canTransferNFTCreateRole?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canChangeOwner"),e.canChangeOwner?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canUpgrade"),e.canUpgrade?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canAddSpecialRoles"),e.canAddSpecialRoles?this.trueAsHex:this.falseAsHex];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}issueNonFungible(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["issueNonFungible",ae.utf8ToHex(e.tokenName),ae.utf8ToHex(e.tokenTicker),ae.utf8ToHex("canFreeze"),e.canFreeze?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canWipe"),e.canWipe?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canPause"),e.canPause?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canTransferNFTCreateRole"),e.canTransferNFTCreateRole?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canChangeOwner"),e.canChangeOwner?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canUpgrade"),e.canUpgrade?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canAddSpecialRoles"),e.canAddSpecialRoles?this.trueAsHex:this.falseAsHex];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}registerMetaESDT(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["registerMetaESDT",ae.utf8ToHex(e.tokenName),ae.utf8ToHex(e.tokenTicker),ae.bigIntToHex(e.numDecimals),ae.utf8ToHex("canFreeze"),e.canFreeze?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canWipe"),e.canWipe?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canPause"),e.canPause?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canTransferNFTCreateRole"),e.canTransferNFTCreateRole?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canChangeOwner"),e.canChangeOwner?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canUpgrade"),e.canUpgrade?this.trueAsHex:this.falseAsHex,ae.utf8ToHex("canAddSpecialRoles"),e.canAddSpecialRoles?this.trueAsHex:this.falseAsHex];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}registerAndSetAllRoles(e){this.notifyAboutUnsettingBurnRoleGlobally();let r=["registerAndSetAllRoles",ae.utf8ToHex(e.tokenName),ae.utf8ToHex(e.tokenTicker),ae.utf8ToHex(e.tokenType),ae.bigIntToHex(e.numDecimals)];return this.createTransaction({sender:e.issuer,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,value:this.config.issueCost,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitIssue,dataParts:r})}setBurnRoleGlobally(e){let r=["setBurnRoleGlobally",ae.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitToggleBurnRoleGlobally,dataParts:r})}unsetBurnRoleGlobally(e){let r=["unsetBurnRoleGlobally",ae.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitToggleBurnRoleGlobally,dataParts:r})}setSpecialRoleOnFungible(e){let r=["setSpecialRole",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user),...e.addRoleLocalMint?[ae.utf8ToHex("ESDTRoleLocalMint")]:[],...e.addRoleLocalBurn?[ae.utf8ToHex("ESDTRoleLocalBurn")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}setSpecialRoleOnSemiFungible(e){let r=["setSpecialRole",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user),...e.addRoleNFTCreate?[ae.utf8ToHex("ESDTRoleNFTCreate")]:[],...e.addRoleNFTBurn?[ae.utf8ToHex("ESDTRoleNFTBurn")]:[],...e.addRoleNFTAddQuantity?[ae.utf8ToHex("ESDTRoleNFTAddQuantity")]:[],...e.addRoleESDTTransferRole?[ae.utf8ToHex("ESDTTransferRole")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}setSpecialRoleOnMetaESDT(e){return this.setSpecialRoleOnSemiFungible(e)}setSpecialRoleOnNonFungible(e){let r=["setSpecialRole",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user),...e.addRoleNFTCreate?[ae.utf8ToHex("ESDTRoleNFTCreate")]:[],...e.addRoleNFTBurn?[ae.utf8ToHex("ESDTRoleNFTBurn")]:[],...e.addRoleNFTUpdateAttributes?[ae.utf8ToHex("ESDTRoleNFTUpdateAttributes")]:[],...e.addRoleNFTAddURI?[ae.utf8ToHex("ESDTRoleNFTAddURI")]:[],...e.addRoleESDTTransferRole?[ae.utf8ToHex("ESDTTransferRole")]:[]];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitSetSpecialRole,dataParts:r})}nftCreate(e){let r=["ESDTNFTCreate",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.initialQuantity),ae.utf8ToHex(e.name),ae.bigIntToHex(e.royalties),ae.utf8ToHex(e.hash),ae.bufferToHex(e.attributes),...e.uris.map(ae.utf8ToHex)],i=(e.name+e.hash+e.attributes+e.uris.join("")).length*this.config.gasLimitStorePerByte.valueOf();return this.createTransaction({sender:e.creator,receiver:e.creator,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTCreate.valueOf()+i.valueOf(),dataParts:r})}pause(e){let r=["pause",ae.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitPausing,dataParts:r})}unpause(e){let r=["unPause",ae.utf8ToHex(e.tokenIdentifier)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitPausing,dataParts:r})}freeze(e){let r=["freeze",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitFreezing,dataParts:r})}unfreeze(e){let r=["unFreeze",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitFreezing,dataParts:r})}wipe(e){let r=["wipe",ae.utf8ToHex(e.tokenIdentifier),ae.addressToHex(e.user)];return this.createTransaction({sender:e.manager,receiver:this.config.esdtContractAddress,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitWiping,dataParts:r})}localMint(e){let r=["ESDTLocalMint",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.supplyToMint)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTLocalMint,dataParts:r})}localBurn(e){let r=["ESDTLocalBurn",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.supplyToBurn)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTLocalBurn,dataParts:r})}updateAttributes(e){let r=["ESDTNFTUpdateAttributes",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.tokenNonce),ae.bufferToHex(e.attributes)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTUpdateAttributes,dataParts:r})}addQuantity(e){let r=["ESDTNFTAddQuantity",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.tokenNonce),ae.bigIntToHex(e.quantityToAdd)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTAddQuantity,dataParts:r})}burnQuantity(e){let r=["ESDTNFTBurn",ae.utf8ToHex(e.tokenIdentifier),ae.bigIntToHex(e.tokenNonce),ae.bigIntToHex(e.quantityToBurn)];return this.createTransaction({sender:e.manager,receiver:e.manager,nonce:e.transactionNonce,gasPrice:e.gasPrice,gasLimitHint:e.gasLimit,executionGasLimit:this.config.gasLimitESDTNFTBurn,dataParts:r})}createTransaction({sender:e,receiver:r,nonce:n,value:i,gasPrice:s,gasLimitHint:o,executionGasLimit:u,dataParts:a}){let c=this.buildTransactionPayload(a),f=o||this.computeGasLimit(c,u),d=new h8.TransactionVersion(Eb.TRANSACTION_VERSION_DEFAULT),w=new h8.TransactionOptions(Eb.TRANSACTION_OPTIONS_DEFAULT);return new P$.Transaction({chainID:this.config.chainID,sender:e,receiver:r,gasLimit:f,gasPrice:s,nonce:n||0,value:i||0,data:c,version:d,options:w})}buildTransactionPayload(e){let r=e.join(Eb.ARGUMENTS_SEPARATOR);return new R$.TransactionPayload(r)}computeGasLimit(e,r){return this.config.minGasLimit.valueOf()+this.config.gasLimitPerByte.valueOf()*e.length()+r.valueOf()}};N0.TokenOperationsFactory=bb});var g8=D(x0=>{"use strict";h();Object.defineProperty(x0,"__esModule",{value:!0});x0.TokenOperationsFactoryConfig=void 0;var B$=Ve(),Sb=class{constructor(e){this.minGasPrice=1e9,this.minGasLimit=5e4,this.gasLimitPerByte=1500,this.gasLimitIssue=6e7,this.gasLimitToggleBurnRoleGlobally=6e7,this.gasLimitESDTLocalMint=3e5,this.gasLimitESDTLocalBurn=3e5,this.gasLimitSetSpecialRole=6e7,this.gasLimitPausing=6e7,this.gasLimitFreezing=6e7,this.gasLimitWiping=6e7,this.gasLimitESDTNFTCreate=3e6,this.gasLimitESDTNFTUpdateAttributes=1e6,this.gasLimitESDTNFTAddQuantity=1e6,this.gasLimitESDTNFTBurn=1e6,this.gasLimitStorePerByte=5e4,this.issueCost="50000000000000000",this.esdtContractAddress=B$.Address.fromBech32("erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u"),this.chainID=e}};x0.TokenOperationsFactoryConfig=Sb});var m8=D(O0=>{"use strict";h();Object.defineProperty(O0,"__esModule",{value:!0});O0.TokenOperationsOutcomeParser=void 0;var M$=Ve(),Ib=Ie(),p8=Kd(),Tb=class{parseIssueFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issue");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseIssueNonFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issueNonFungible");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseIssueSemiFungible(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"issueSemiFungible");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseRegisterMetaESDT(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"registerMetaESDT");return{tokenIdentifier:this.extractTokenIdentifier(r)}}parseRegisterAndSetAllRoles(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"registerAndSetAllRoles"),n=this.extractTokenIdentifier(r),s=this.findSingleEventByIdentifier(e,"ESDTSetRole").topics.slice(3).map(o=>o.valueOf().toString());return{tokenIdentifier:n,roles:s}}parseSetBurnRoleGlobally(e){return this.ensureNoError(e),{}}parseUnsetBurnRoleGlobally(e){return this.ensureNoError(e),{}}parseSetSpecialRole(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTSetRole"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=r.topics.slice(3).map(o=>o.valueOf().toString());return{userAddress:n,tokenIdentifier:i,roles:s}}parseNFTCreate(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTCreate"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,initialQuantity:s}}parseLocalMint(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTLocalMint"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=this.extractNonce(r),o=this.extractAmount(r);return{userAddress:n,tokenIdentifier:i,nonce:s,mintedSupply:o}}parseLocalBurn(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTLocalBurn"),n=r.address.toString(),i=this.extractTokenIdentifier(r),s=this.extractNonce(r),o=this.extractAmount(r);return{userAddress:n,tokenIdentifier:i,nonce:s,burntSupply:o}}parsePause(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTPause");return{}}parseUnpause(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTUnPause");return{}}parseFreeze(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTFreeze"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseUnfreeze(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTUnFreeze"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseWipe(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTWipe"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{userAddress:this.extractAddress(r),tokenIdentifier:n,nonce:i,balance:s}}parseUpdateAttributes(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTUpdateAttributes"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=r.topics[3]?.valueOf();return{tokenIdentifier:n,nonce:i,attributes:s}}parseAddQuantity(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTAddQuantity"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,addedQuantity:s}}parseBurnQuantity(e){this.ensureNoError(e);let r=this.findSingleEventByIdentifier(e,"ESDTNFTBurn"),n=this.extractTokenIdentifier(r),i=this.extractNonce(r),s=this.extractAmount(r);return{tokenIdentifier:n,nonce:i,burntQuantity:s}}ensureNoError(e){for(let r of e.logs.events)if(r.identifier=="signalError"){let n=p.Buffer.from(r.data.substring(1),"hex").toString(),i=r.topics[1]?.valueOf().toString();throw new Ib.ErrCannotParseTransactionOutcome(e.hash,`encountered signalError: ${i} (${n})`)}}findSingleEventByIdentifier(e,r){let n=this.gatherAllEvents(e).filter(i=>i.identifier==r);if(n.length==0)throw new Ib.ErrCannotParseTransactionOutcome(e.hash,`cannot find event of type ${r}`);if(n.length>1)throw new Ib.ErrCannotParseTransactionOutcome(e.hash,`more than one event of type ${r}`);return n[0]}gatherAllEvents(e){let r=[];r.push(...e.logs.events);for(let n of e.contractResults.items)r.push(...n.logs.events);return r}extractTokenIdentifier(e){return e.topics[0]?.valueOf().toString()}extractNonce(e){return p8.bufferToBigInt(e.topics[1]?.valueOf()).toFixed(0)}extractAmount(e){return p8.bufferToBigInt(e.topics[2]?.valueOf()).toFixed(0)}extractAddress(e){return M$.Address.fromBuffer(e.topics[3]?.valueOf()).toString()}};O0.TokenOperationsOutcomeParser=Tb});var Cb=D(Ls=>{"use strict";h();var L$=Ls&&Ls.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_b=Ls&&Ls.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&L$(e,t,r)};Object.defineProperty(Ls,"__esModule",{value:!0});_b(d8(),Ls);_b(g8(),Ls);_b(m8(),Ls)});var y8=D(D0=>{"use strict";h();Object.defineProperty(D0,"__esModule",{value:!0});D0.DelegationTransactionsOutcomeParser=void 0;var F$=Ve(),U$=Ie(),q$=Ac(),Nb=class{constructor(){}parseCreateNewDelegationContract(e){return this.ensureNoError(e.logs.events),q$.findEventsByIdentifier(e,"SCDeploy").map(n=>({contractAddress:this.extractContractAddress(n)}))}ensureNoError(e){for(let r of e)if(r.identifier=="signalError"){let n=p.Buffer.from(r.dataItems[0]?.toString().slice(1)).toString()||"",i=this.decodeTopicAsString(r.topics[1]);throw new U$.ErrParseTransactionOutcome(`encountered signalError: ${i} (${p.Buffer.from(n,"hex").toString()})`)}}extractContractAddress(e){if(!e.topics[0]?.length)return"";let r=p.Buffer.from(e.topics[0]);return F$.Address.fromBuffer(r).bech32()}decodeTopicAsString(e){return p.Buffer.from(e).toString()}};D0.DelegationTransactionsOutcomeParser=Nb});var A8=D(P0=>{"use strict";h();Object.defineProperty(P0,"__esModule",{value:!0});P0.SmartContractTransactionsOutcomeParser=void 0;var w8=Ve(),V$=Ie(),v8=qn(),k$=Ac(),xb=class{constructor(e){this.abi=e?.abi,this.legacyResultsParser=e?.legacyResultsParser||new v8.ResultsParser}parseDeploy(e){let r=e.transactionOutcome.directSmartContractCallOutcome,i=k$.findEventsByIdentifier(e.transactionOutcome,"SCDeploy").map(s=>this.parseScDeployEvent(s));return{returnCode:r.returnCode,returnMessage:r.returnMessage,contracts:i}}parseScDeployEvent(e){let r=e.topics[0],n=e.topics[1],i=e.topics[2],s=r?.length?new w8.Address(r).toBech32():"",o=n?.length?new w8.Address(n).toBech32():"";return{address:s,ownerAddress:o,codeHash:i}}parseExecute(e){let r=e.transactionOutcome.directSmartContractCallOutcome;if(!this.abi)return{values:r.returnDataParts,returnCode:r.returnCode,returnMessage:r.returnMessage};let n=e.function||r.function;if(!n)throw new V$.Err('Function name is not available in the transaction outcome, thus endpoint definition (ABI) cannot be picked (for parsing). Maybe provide the "function" parameter explicitly?');let i=this.abi.getEndpoint(n),s={returnCode:new v8.ReturnCode(r.returnCode),returnMessage:r.returnMessage,values:r.returnDataParts.map(u=>p.Buffer.from(u))},o=this.legacyResultsParser.parseOutcomeFromUntypedBundle(s,i);return{values:o.values.map(u=>u.valueOf()),returnCode:o.returnCode.toString(),returnMessage:o.returnMessage}}};P0.SmartContractTransactionsOutcomeParser=xb});var S8=D(R0=>{"use strict";h();Object.defineProperty(R0,"__esModule",{value:!0});R0.TokenManagementTransactionsOutcomeParser=void 0;var H$=Ve(),E8=Ie(),b8=Bu(),wr=Ac(),Ob=class{constructor(){}parseIssueFungible(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"issue").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseIssueNonFungible(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"issueNonFungible").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseIssueSemiFungible(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"issueSemiFungible").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseRegisterMetaEsdt(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"registerMetaESDT").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseRegisterAndSetAllRoles(e){this.ensureNoError(e.logs.events);let r=wr.findEventsByIdentifier(e,"registerAndSetAllRoles"),n=wr.findEventsByIdentifier(e,"ESDTSetRole");if(r.length!==n.length)throw new E8.ErrParseTransactionOutcome("Register Events and Set Role events mismatch. Should have the same number of events.");return r.map((i,s)=>{let o=this.extractTokenIdentifier(i),a=n[s].topics.slice(3).map(c=>this.decodeTopicAsString(c));return{tokenIdentifier:o,roles:a}})}parseSetBurnRoleGlobally(e){this.ensureNoError(e.logs.events)}parseUnsetBurnRoleGlobally(e){this.ensureNoError(e.logs.events)}parseSetSpecialRole(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTSetRole").map(n=>this.getOutputForSetSpecialRoleEvent(n))}getOutputForSetSpecialRoleEvent(e){let r=e.address,n=this.extractTokenIdentifier(e),s=e.topics.slice(3).map(o=>this.decodeTopicAsString(o));return{userAddress:r,tokenIdentifier:n,roles:s}}parseNftCreate(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTNFTCreate").map(n=>this.getOutputForNftCreateEvent(n))}getOutputForNftCreateEvent(e){let r=this.extractTokenIdentifier(e),n=this.extractNonce(e),i=this.extractAmount(e);return{tokenIdentifier:r,nonce:n,initialQuantity:i}}parseLocalMint(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTLocalMint").map(n=>this.getOutputForLocalMintEvent(n))}getOutputForLocalMintEvent(e){let r=e.address,n=this.extractTokenIdentifier(e),i=this.extractNonce(e),s=this.extractAmount(e);return{userAddress:r,tokenIdentifier:n,nonce:i,mintedSupply:s}}parseLocalBurn(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTLocalBurn").map(n=>this.getOutputForLocalBurnEvent(n))}getOutputForLocalBurnEvent(e){let r=e.address,n=this.extractTokenIdentifier(e),i=this.extractNonce(e),s=this.extractAmount(e);return{userAddress:r,tokenIdentifier:n,nonce:i,burntSupply:s}}parsePause(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTPause").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseUnpause(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTUnPause").map(n=>({tokenIdentifier:this.extractTokenIdentifier(n)}))}parseFreeze(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTFreeze").map(n=>this.getOutputForFreezeEvent(n))}getOutputForFreezeEvent(e){let r=this.extractAddress(e),n=this.extractTokenIdentifier(e),i=this.extractNonce(e),s=this.extractAmount(e);return{userAddress:r,tokenIdentifier:n,nonce:i,balance:s}}parseUnfreeze(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTUnFreeze").map(n=>this.getOutputForUnfreezeEvent(n))}getOutputForUnfreezeEvent(e){let r=this.extractAddress(e),n=this.extractTokenIdentifier(e),i=this.extractNonce(e),s=this.extractAmount(e);return{userAddress:r,tokenIdentifier:n,nonce:i,balance:s}}parseWipe(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTWipe").map(n=>this.getOutputForWipeEvent(n))}getOutputForWipeEvent(e){let r=this.extractAddress(e),n=this.extractTokenIdentifier(e),i=this.extractNonce(e),s=this.extractAmount(e);return{userAddress:r,tokenIdentifier:n,nonce:i,balance:s}}parseUpdateAttributes(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTNFTUpdateAttributes").map(n=>this.getOutputForUpdateAttributesEvent(n))}getOutputForUpdateAttributesEvent(e){let r=this.extractTokenIdentifier(e),n=this.extractNonce(e),i=e.topics[3]?e.topics[3]:new Uint8Array;return{tokenIdentifier:r,nonce:n,attributes:i}}parseAddQuantity(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTNFTAddQuantity").map(n=>this.getOutputForAddQuantityEvent(n))}getOutputForAddQuantityEvent(e){let r=this.extractTokenIdentifier(e),n=this.extractNonce(e),i=this.extractAmount(e);return{tokenIdentifier:r,nonce:n,addedQuantity:i}}parseBurnQuantity(e){return this.ensureNoError(e.logs.events),wr.findEventsByIdentifier(e,"ESDTNFTBurn").map(n=>this.getOutputForBurnQuantityEvent(n))}getOutputForBurnQuantityEvent(e){let r=this.extractTokenIdentifier(e),n=this.extractNonce(e),i=this.extractAmount(e);return{tokenIdentifier:r,nonce:n,burntQuantity:i}}ensureNoError(e){for(let r of e)if(r.identifier=="signalError"){let n=p.Buffer.from(r.dataItems[0]?.toString().slice(1)).toString()||"",i=this.decodeTopicAsString(r.topics[1]);throw new E8.ErrParseTransactionOutcome(`encountered signalError: ${i} (${p.Buffer.from(n,"hex").toString()})`)}}extractTokenIdentifier(e){return e.topics[0]?.length?this.decodeTopicAsString(e.topics[0]):""}extractNonce(e){if(!e.topics[1]?.length)return BigInt(0);let r=p.Buffer.from(e.topics[1]);return BigInt(b8.bufferToBigInt(r).toFixed(0))}extractAmount(e){if(!e.topics[2]?.length)return BigInt(0);let r=p.Buffer.from(e.topics[2]);return BigInt(b8.bufferToBigInt(r).toFixed(0))}extractAddress(e){if(!e.topics[3]?.length)return"";let r=p.Buffer.from(e.topics[3]);return H$.Address.fromBuffer(r).bech32()}decodeTopicAsString(e){return p.Buffer.from(e).toString()}};R0.TokenManagementTransactionsOutcomeParser=Ob});var I8=D(B0=>{"use strict";h();Object.defineProperty(B0,"__esModule",{value:!0});B0.TransactionEventsParser=void 0;var G$=qn(),Db=class{constructor(e){this.legacyResultsParser=new G$.ResultsParser,this.abi=e.abi,this.firstTopicIsIdentifier=e.firstTopicIsIdentifier??!0}parseEvents(e){let r=[];for(let n of e.events){let i=this.parseEvent({event:n});r.push(i)}return r}parseEvent(e){let r=e.event.topics.map(u=>p.Buffer.from(u)),n=this.firstTopicIsIdentifier?r[0]?.toString():e.event.identifier;this.firstTopicIsIdentifier&&r.shift();let i=e.event.dataItems.map(u=>p.Buffer.from(u)),s=this.abi.getEvent(n);return this.legacyResultsParser.doParseEvent({topics:r,dataItems:i,eventDefinition:s})}};B0.TransactionEventsParser=Db});var Pb=D(vi=>{"use strict";h();var j$=vi&&vi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rh=vi&&vi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&j$(e,t,r)};Object.defineProperty(vi,"__esModule",{value:!0});rh(y8(),vi);rh(Ac(),vi);rh(A8(),vi);rh(S8(),vi);rh(I8(),vi)});var Ic=D(M0=>{"use strict";h();Object.defineProperty(M0,"__esModule",{value:!0});M0.Account=void 0;var z$=Ve(),Rb=class{constructor(e){this.address=z$.Address.empty(),this.nonce=0,this.balance="0",this.address=e}update(e){this.nonce=e.nonce,this.balance=e.balance}incrementNonce(){this.nonce=this.nonce.valueOf()+1}getNonceThenIncrement(){let e=this.nonce;return this.nonce=this.nonce.valueOf()+1,e}toJSON(){return{address:this.address.bech32(),nonce:this.nonce.valueOf(),balance:this.balance.toString()}}};M0.Account=Rb});var Mb=D(Tc=>{"use strict";h();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.MessageComputer=Tc.Message=void 0;var nh=hr(),Q$=Ve(),K$=sf(),L0=class{constructor(e){this.data=e.data,this.signature=e.signature,this.address=e.address,this.version=e.version||nh.DEFAULT_MESSAGE_VERSION,this.signer=e.signer||nh.SDK_JS_SIGNER}};Tc.Message=L0;var Bb=class{constructor(){}computeBytesForSigning(e){let r=p.Buffer.from(e.data.length.toString()),n=p.Buffer.concat([r,e.data]),i=p.Buffer.concat([p.Buffer.from(nh.MESSAGE_PREFIX),n]);return K$("keccak256").update(i).digest()}computeBytesForVerifying(e){return this.computeBytesForSigning(e)}packMessage(e){return{message:p.Buffer.from(e.data).toString("hex"),signature:e.signature?p.Buffer.from(e.signature).toString("hex"):"",address:e.address?e.address.bech32():"",version:e.version,signer:e.signer}}unpackMessage(e){let r=this.trimHexPrefix(e.message),n=p.Buffer.from(r,"hex"),i=this.trimHexPrefix(e.signature||""),s=p.Buffer.from(i,"hex"),o;e.address&&(o=Q$.Address.fromBech32(e.address));let u=e.version||nh.DEFAULT_MESSAGE_VERSION,a=e.signer||nh.UNKNOWN_SIGNER;return new L0({data:n,signature:s,address:o,version:u,signer:a})}trimHexPrefix(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e}};Tc.MessageComputer=Bb});var Ub=D(Xi=>{"use strict";h();var W$=Xi&&Xi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$$=Xi&&Xi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Y$=Xi&&Xi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W$(e,t,r);return $$(e,t),e};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.AsyncTimer=void 0;var J$=Y$(Ie()),X$=Ie(),Lb=oo(),Fb=class{constructor(e){this.timeoutHandle=null,this.rejectionFunc=null,this.name=e,this.correlationTag=0}start(e){if(this.timeoutHandle)throw new J$.ErrAsyncTimerAlreadyRunning;return this.correlationTag++,Lb.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].start()`),new Promise((r,n)=>{this.rejectionFunc=n;let i=()=>{this.rejectionFunc=null,this.stop(),r()};this.timeoutHandle=setTimeout(i,e)})}abort(){Lb.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].abort()`),this.rejectionFunc&&(this.rejectionFunc(new X$.ErrAsyncTimerAborted),this.rejectionFunc=null),this.stop()}stop(){this.isStopped()||(Lb.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].stop()`),this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null))}isStopped(){return!this.timeoutHandle}};Xi.AsyncTimer=Fb});var U0=D(F0=>{"use strict";h();Object.defineProperty(F0,"__esModule",{value:!0});F0.TransactionWatcher=void 0;var qb=Ub(),T8=hr(),Fs=Ie(),_8=oo(),No=class t{constructor(e,r={}){this.fetcher=new Vb(e),this.pollingIntervalMilliseconds=r.pollingIntervalMilliseconds||t.DefaultPollingInterval,this.timeoutMilliseconds=r.timeoutMilliseconds||t.DefaultTimeout,this.patienceMilliseconds=r.patienceMilliseconds||t.DefaultPatience}async awaitPending(e){let r=s=>s.status.isPending(),n=async()=>{let s=this.transactionOrTxHashToTxHash(e);return await this.fetcher.getTransaction(s)},i=()=>new Fs.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)}async awaitCompleted(e){let r=s=>{if(s.isCompleted===void 0)throw new Fs.ErrIsCompletedFieldIsMissingOnTransaction;return s.isCompleted},n=async()=>{let s=this.transactionOrTxHashToTxHash(e);return await this.fetcher.getTransaction(s)},i=()=>new Fs.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)}async awaitAllEvents(e,r){let n=o=>{let u=this.getAllTransactionEvents(o).map(c=>c.identifier);return r.every(c=>u.includes(c))},i=async()=>{let o=this.transactionOrTxHashToTxHash(e);return await this.fetcher.getTransaction(o)},s=()=>new Fs.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)}async awaitAnyEvent(e,r){let n=o=>{let u=this.getAllTransactionEvents(o).map(c=>c.identifier);return r.find(c=>u.includes(c))!=null},i=async()=>{let o=this.transactionOrTxHashToTxHash(e);return await this.fetcher.getTransaction(o)},s=()=>new Fs.ErrExpectedTransactionEventsNotFound;return this.awaitConditionally(n,i,s)}async awaitOnCondition(e,r){let n=async()=>{let s=this.transactionOrTxHashToTxHash(e);return await this.fetcher.getTransaction(s)},i=()=>new Fs.ErrExpectedTransactionStatusNotReached;return this.awaitConditionally(r,n,i)}transactionOrTxHashToTxHash(e){let r=typeof e=="string"?e:e.getHash().hex();if(r.length!==T8.HEX_TRANSACTION_HASH_LENGTH)throw new Fs.Err(`Invalid transaction hash length. The length of a hex encoded hash should be ${T8.HEX_TRANSACTION_HASH_LENGTH}.`);return r}async awaitConditionally(e,r,n){let i=new qb.AsyncTimer("watcher:periodic"),s=new qb.AsyncTimer("watcher:patience"),o=new qb.AsyncTimer("watcher:timeout"),u=!1,a,c=!1;for(o.start(this.timeoutMilliseconds).finally(()=>{o.stop(),u=!0});!u;){await i.start(this.pollingIntervalMilliseconds);try{if(a=await r(),c=e(a),c||u)break}catch(f){if(_8.Logger.debug("TransactionWatcher.awaitConditionally(): cannot (yet) fetch data."),f instanceof Fs.ErrIsCompletedFieldIsMissingOnTransaction||!(f instanceof Fs.Err))throw f}}if(c&&await s.start(this.patienceMilliseconds),o.isStopped()||o.stop(),!a||!c)throw n();return a}getAllTransactionEvents(e){let r=[...e.logs.events];for(let n of e.contractResults.items)r.push(...n.logs.events);return r}};F0.TransactionWatcher=No;No.DefaultPollingInterval=6e3;No.DefaultTimeout=No.DefaultPollingInterval*15;No.DefaultPatience=0;No.NoopOnStatusReceived=t=>{};var Vb=class{constructor(e){this.fetcher=e}async getTransaction(e){return _8.Logger.debug(`transactionWatcher, getTransaction(${e})`),await this.fetcher.getTransaction(e)}}});var V0=D(q0=>{"use strict";h();Object.defineProperty(q0,"__esModule",{value:!0});q0.SignableMessage=void 0;var Z$=Ve(),eY=Yf(),tY=hr(),rY=sf(),kb=class{constructor(e){this.message=p.Buffer.from([]),this.signature=p.Buffer.from([]),this.version=1,this.signer="ErdJS",this.address=Z$.Address.empty(),Object.assign(this,e)}serializeForSigning(){let e=p.Buffer.from(this.message.length.toString()),r=p.Buffer.concat([e,this.message]),n=p.Buffer.concat([p.Buffer.from(tY.MESSAGE_PREFIX),r]);return rY("keccak256").update(n).digest()}serializeForSigningRaw(){return p.Buffer.concat([this.getMessageSize(),this.message])}getSignature(){return this.signature}applySignature(e){this.signature=eY.interpretSignatureAsBuffer(e)}getMessageSize(){let e=p.Buffer.alloc(4);return e.writeUInt32BE(this.message.length,0),e}toJSON(){return{address:this.address.bech32(),message:"0x"+this.message.toString("hex"),signature:"0x"+this.signature.toString("hex"),version:this.version,signer:this.signer}}};q0.SignableMessage=kb});var _c=D(vr=>{"use strict";h();var nY=vr&&vr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iY=vr&&vr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sY=vr&&vr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nY(e,t,r);return iY(e,t),e};Object.defineProperty(vr,"__esModule",{value:!0});vr.zeroPadStringIfOddLength=vr.isPaddedHex=vr.numberToPaddedHex=vr.Nonce=vr.Address=void 0;var C8=sY(vv()),oY="erd",Hb=class t{constructor(e){this.value=e}static fromPubkey(e){let r=C8.toWords(e),n=C8.encode(oY,r);return new t(n)}bech32(){return this.value}toString(){return this.bech32()}};vr.Address=Hb;var Gb=class{constructor(e){this.value=e}valueOf(){return this.value}hex(){return N8(this.value)}};vr.Nonce=Gb;function N8(t){let e=t.toString(16);return x8(e)}vr.numberToPaddedHex=N8;function aY(t){t=t||"";let e=p.Buffer.from(t,"hex").toString("hex");return t.toUpperCase()==e.toUpperCase()}vr.isPaddedHex=aY;function x8(t){return t=t||"",t.length%2==1?"0"+t:t}vr.zeroPadStringIfOddLength=x8});var O8=D(xo=>{"use strict";h();var uY=xo&&xo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xo,"__esModule",{value:!0});xo.EsdtContractAddress=xo.MaxUint64AsBigNumber=void 0;var cY=uY((rr(),_e(fr))),lY=_c();xo.MaxUint64AsBigNumber=new cY.default("18446744073709551615");xo.EsdtContractAddress=new lY.Address("erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u")});var zb=D(Cc=>{"use strict";h();var fY=Cc&&Cc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.ContractQueryResponse=void 0;var hY=fY((rr(),_e(fr))),dY=O8(),jb=class t{constructor(e){this.returnData=e?.returnData||[],this.returnCode=e?.returnCode||"",this.returnMessage=e?.returnMessage||"",this.gasUsed=e?.gasUsed||0}static fromHttpResponse(e){let r=e.returnData||e.ReturnData,n=e.returnCode||e.ReturnCode,i=e.returnMessage||e.ReturnMessage,s=new hY.default(e.gasRemaining||e.GasRemaining||0),o=dY.MaxUint64AsBigNumber.minus(s).toNumber();return new t({returnData:r,returnCode:n,returnMessage:i,gasUsed:o})}getReturnDataParts(){return this.returnData.map(e=>p.Buffer.from(e||"","base64"))}toJSON(){return{returnData:this.returnData,returnCode:this.returnCode,returnMessage:this.returnMessage,gasUsed:this.gasUsed.valueOf()}}};Cc.ContractQueryResponse=jb});var D8=D(Oo=>{"use strict";h();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.ErrAccountNotConnected=Oo.ErrCannotSignSingleTransaction=Oo.Err=void 0;var ih=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Oo.Err=ih;var Qb=class extends ih{constructor(){super("Cannot sign single transaction.")}};Oo.ErrCannotSignSingleTransaction=Qb;var Kb=class extends ih{constructor(){super("Account is not connected.")}};Oo.ErrAccountNotConnected=Kb});var P8=D(sh=>{"use strict";h();Object.defineProperty(sh,"__esModule",{value:!0});sh.Operation=void 0;var gY;(function(t){t.Connect="connect",t.Logout="logout",t.SignTransactions="signTransactions",t.SignMessage="signMessage",t.CancelAction="cancelAction"})(gY=sh.Operation||(sh.Operation={}))});var Wb=D(Nc=>{"use strict";h();var Do=Nc&&Nc.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.ExtensionProvider=void 0;var pY=Xr(),R8=D8(),oh=P8(),ah=class t{constructor(){if(this.account={address:""},this.initialized=!1,t._instance)throw new Error("Error: Instantiation failed: Use ExtensionProvider.getInstance() instead of new.");t._instance=this}static getInstance(){return t._instance}setAddress(e){return this.account.address=e,t._instance}init(){return Do(this,void 0,void 0,function*(){return window&&window.elrondWallet&&(this.initialized=!0),this.initialized})}login(e={}){return Do(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");let{token:r}=e,n=r||"";return yield this.startBgrMsgChannel(oh.Operation.Connect,n),this.account.address})}logout(){return Do(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");try{yield this.startBgrMsgChannel(oh.Operation.Logout,this.account.address),this.disconnect()}catch(e){console.warn("Extension origin url is already cleared!",e)}return!0})}disconnect(){this.account={address:""}}getAddress(){return Do(this,void 0,void 0,function*(){if(!this.initialized)throw new Error("Extension provider is not initialised, call init() first");return this.account?this.account.address:""})}isInitialized(){return this.initialized}isConnected(){return Do(this,void 0,void 0,function*(){return!!this.account.address})}signTransaction(e){return Do(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.signTransactions([e]);if(r.length!=1)throw new R8.ErrCannotSignSingleTransaction;return r[0]})}ensureConnected(){if(!this.account.address)throw new R8.ErrAccountNotConnected}signTransactions(e){return Do(this,void 0,void 0,function*(){this.ensureConnected();let r=yield this.startBgrMsgChannel(oh.Operation.SignTransactions,{from:this.account.address,transactions:e.map(n=>n.toPlainObject())});try{return r.map(i=>pY.Transaction.fromPlainObject(i))}catch(n){throw new Error(`Transaction canceled: ${n.message}.`)}})}signMessage(e){return Do(this,void 0,void 0,function*(){this.ensureConnected();let r={account:this.account.address,message:e.message.toString()},i=(yield this.startBgrMsgChannel(oh.Operation.SignMessage,r)).signature,s=p.Buffer.from(i,"hex");return e.applySignature(s),e})}cancelAction(){return this.startBgrMsgChannel(oh.Operation.CancelAction,{})}startBgrMsgChannel(e,r){return new Promise(n=>{window.postMessage({target:"erdw-inpage",type:e,data:r},window.origin);let i=s=>{s.isTrusted&&s.data.target==="erdw-contentScript"&&(s.data.type==="connectResponse"?(s.data.data&&s.data.data.address&&(this.account=s.data.data),window.removeEventListener("message",i),n(s.data.data)):(window.removeEventListener("message",i),n(s.data.data)))};window.addEventListener("message",i,!1)})}};Nc.ExtensionProvider=ah;ah._instance=new ah});function vY(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){AY(t);return}return e}function AY(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function uh(t,e={}){if(typeof t!="string")return t;let r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){let n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!wY.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(mY.test(t)||yY.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,vY)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}var mY,yY,wY,U8=fe(()=>{h();mY=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,yY=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,wY=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/});function EY(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function gr(t,...e){try{return EY(t(...e))}catch(r){return Promise.reject(r)}}function bY(t){let e=typeof t;return t===null||e!=="object"&&e!=="function"}function SY(t){let e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ch(t){if(bY(t))return String(t);if(SY(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ch(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function q8(){if(typeof p.Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}function V8(t){if(typeof t=="string")return t;q8();let e=p.Buffer.from(t).toString("base64");return $b+e}function k8(t){return typeof t!="string"||!t.startsWith($b)?t:(q8(),p.Buffer.from(t.slice($b.length),"base64"))}function Vr(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function H8(...t){return Vr(t.join(":"))}function lh(t){return t=Vr(t),t?t+":":""}var $b,G8=fe(()=>{h();$b="base64:"});function Q8(t={}){let e={mounts:{"":t.driver||TY()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(let f of e.mountpoints)if(c.startsWith(f))return{base:f,relativeKey:c.slice(f.length),driver:e.mounts[f]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,f)=>e.mountpoints.filter(d=>d.startsWith(c)||f&&c.startsWith(d)).map(d=>({relativeBase:c.length>d.length?c.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(c,f)=>{if(e.watching){f=Vr(f);for(let d of e.watchListeners)d(c,f)}},s=async()=>{if(!e.watching){e.watching=!0;for(let c in e.mounts)e.unwatch[c]=await j8(e.mounts[c],i,c)}},o=async()=>{if(e.watching){for(let c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},u=(c,f,d)=>{let w=new Map,A=T=>{let x=w.get(T.base);return x||(x={driver:T.driver,base:T.base,items:[]},w.set(T.base,x)),x};for(let T of c){let x=typeof T=="string",B=Vr(x?T:T.key),V=x?void 0:T.value,U=x||!T.options?f:{...f,...T.options},Q=r(B);A(Q).items.push({key:B,value:V,relativeKey:Q.relativeKey,options:U})}return Promise.all([...w.values()].map(T=>d(T))).then(T=>T.flat())},a={hasItem(c,f={}){c=Vr(c);let{relativeKey:d,driver:w}=r(c);return gr(w.hasItem,d,f)},getItem(c,f={}){c=Vr(c);let{relativeKey:d,driver:w}=r(c);return gr(w.getItem,d,f).then(A=>uh(A))},getItems(c,f){return u(c,f,d=>d.driver.getItems?gr(d.driver.getItems,d.items.map(w=>({key:w.relativeKey,options:w.options})),f).then(w=>w.map(A=>({key:H8(d.base,A.key),value:uh(A.value)}))):Promise.all(d.items.map(w=>gr(d.driver.getItem,w.relativeKey,w.options).then(A=>({key:w.key,value:uh(A)})))))},getItemRaw(c,f={}){c=Vr(c);let{relativeKey:d,driver:w}=r(c);return w.getItemRaw?gr(w.getItemRaw,d,f):gr(w.getItem,d,f).then(A=>k8(A))},async setItem(c,f,d={}){if(f===void 0)return a.removeItem(c);c=Vr(c);let{relativeKey:w,driver:A}=r(c);A.setItem&&(await gr(A.setItem,w,ch(f),d),A.watch||i("update",c))},async setItems(c,f){await u(c,f,async d=>{if(d.driver.setItems)return gr(d.driver.setItems,d.items.map(w=>({key:w.relativeKey,value:ch(w.value),options:w.options})),f);d.driver.setItem&&await Promise.all(d.items.map(w=>gr(d.driver.setItem,w.relativeKey,ch(w.value),w.options)))})},async setItemRaw(c,f,d={}){if(f===void 0)return a.removeItem(c,d);c=Vr(c);let{relativeKey:w,driver:A}=r(c);if(A.setItemRaw)await gr(A.setItemRaw,w,f,d);else if(A.setItem)await gr(A.setItem,w,V8(f),d);else return;A.watch||i("update",c)},async removeItem(c,f={}){typeof f=="boolean"&&(f={removeMeta:f}),c=Vr(c);let{relativeKey:d,driver:w}=r(c);w.removeItem&&(await gr(w.removeItem,d,f),(f.removeMeta||f.removeMata)&&await gr(w.removeItem,d+"$",f),w.watch||i("remove",c))},async getMeta(c,f={}){typeof f=="boolean"&&(f={nativeOnly:f}),c=Vr(c);let{relativeKey:d,driver:w}=r(c),A=Object.create(null);if(w.getMeta&&Object.assign(A,await gr(w.getMeta,d,f)),!f.nativeOnly){let T=await gr(w.getItem,d+"$",f).then(x=>uh(x));T&&typeof T=="object"&&(typeof T.atime=="string"&&(T.atime=new Date(T.atime)),typeof T.mtime=="string"&&(T.mtime=new Date(T.mtime)),Object.assign(A,T))}return A},setMeta(c,f,d={}){return this.setItem(c+"$",f,d)},removeMeta(c,f={}){return this.removeItem(c+"$",f)},async getKeys(c,f={}){c=lh(c);let d=n(c,!0),w=[],A=[];for(let T of d){let B=(await gr(T.driver.getKeys,T.relativeBase,f)).map(V=>T.mountpoint+Vr(V)).filter(V=>!w.some(U=>V.startsWith(U)));A.push(...B),w=[T.mountpoint,...w.filter(V=>!V.startsWith(T.mountpoint))]}return c?A.filter(T=>T.startsWith(c)&&!T.endsWith("$")):A.filter(T=>!T.endsWith("$"))},async clear(c,f={}){c=lh(c),await Promise.all(n(c,!1).map(async d=>{if(d.driver.clear)return gr(d.driver.clear,d.relativeBase,f);if(d.driver.removeItem){let w=await d.driver.getKeys(d.relativeBase||"",f);return Promise.all(w.map(A=>d.driver.removeItem(A,f)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>z8(c)))},async watch(c){return await s(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(f=>f!==c),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(c,f){if(c=lh(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((d,w)=>w.length-d.length)),e.mounts[c]=f,e.watching&&Promise.resolve(j8(f,i,c)).then(d=>{e.unwatch[c]=d}).catch(console.error),a},async unmount(c,f=!0){c=lh(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&(e.unwatch[c](),delete e.unwatch[c]),f&&await z8(e.mounts[c]),e.mountpoints=e.mountpoints.filter(d=>d!==c),delete e.mounts[c])},getMount(c=""){c=Vr(c)+":";let f=r(c);return{driver:f.driver,base:f.base}},getMounts(c="",f={}){return c=Vr(c),n(c,f.parents).map(w=>({driver:w.driver,base:w.mountpoint}))}};return a}function j8(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function z8(t){typeof t.dispose=="function"&&await gr(t.dispose)}var IY,TY,K8=fe(()=>{h();U8();G8();IY="memory",TY=()=>{let t=new Map;return{name:IY,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}}});function ja(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Jb(t,e){let r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);let n=ja(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}function fh(){return Yb||(Yb=Jb("keyval-store","keyval")),Yb}function Xb(t,e=fh()){return e("readonly",r=>ja(r.get(t)))}function W8(t,e,r=fh()){return r("readwrite",n=>(n.put(e,t),ja(n.transaction)))}function $8(t,e=fh()){return e("readwrite",r=>(r.delete(t),ja(r.transaction)))}function Y8(t=fh()){return t("readwrite",e=>(e.clear(),ja(e.transaction)))}function _Y(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ja(t.transaction)}function J8(t=fh()){return t("readonly",e=>{if(e.getAllKeys)return ja(e.getAllKeys());let r=[];return _Y(e,n=>r.push(n.key)).then(()=>r)})}var Yb,X8=fe(()=>{h()});var Z8={};Bt(Z8,{safeJsonParse:()=>Ro,safeJsonStringify:()=>Ai});function Ro(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return NY(t)}catch{return t}}function Ai(t){return typeof t=="string"?t:CY(t)||""}var CY,NY,xc=fe(()=>{h();CY=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),NY=t=>{let e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)}});var tP={};Bt(tP,{KeyValueStorage:()=>rS,default:()=>rS});function RY(t){var e;return[t[0],Ro((e=t[1])!=null?e:"")]}var xY,OY,DY,PY,eS,Zb,j0,tS,BY,eP,MY,LY,rS,rP=fe(()=>{h();K8();X8();xc();xY="idb-keyval",OY=(t={})=>{let e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i,n;return t.dbName&&t.storeName&&(n=Jb(t.dbName,t.storeName)),{name:xY,options:t,async hasItem(i){return!(typeof await Xb(r(i),n)>"u")},async getItem(i){return await Xb(r(i),n)??null},setItem(i,s){return W8(r(i),s,n)},removeItem(i){return $8(r(i),n)},getKeys(){return J8(n)},clear(){return Y8(n)}}},DY="WALLET_CONNECT_V2_INDEXED_DB",PY="keyvaluestorage",eS=class{constructor(){this.indexedDb=Q8({driver:OY({dbName:DY,storeName:PY})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Ai(r))}async removeItem(e){await this.indexedDb.removeItem(e)}},Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j0={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Zb<"u"&&Zb.localStorage?j0.exports=Zb.localStorage:typeof window<"u"&&window.localStorage?j0.exports=window.localStorage:j0.exports=new e})();tS=class{constructor(){this.localStorage=j0.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(RY)}async getItem(e){let r=this.localStorage.getItem(e);if(r!==null)return Ro(r)}async setItem(e,r){this.localStorage.setItem(e,Ai(r))}async removeItem(e){this.localStorage.removeItem(e)}},BY="wc_storage_version",eP=1,MY=async(t,e,r)=>{let n=BY,i=await e.getItem(n);if(i&&i>=eP){r(e);return}let s=await t.getKeys();if(!s.length){r(e);return}let o=[];for(;s.length;){let u=s.shift();if(!u)continue;let a=u.toLowerCase();if(a.includes("wc@")||a.includes("walletconnect")||a.includes("wc_")||a.includes("wallet_connect")){let c=await t.getItem(u);await e.setItem(u,c),o.push(u)}}await e.setItem(n,eP),r(e),LY(t,o)},LY=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})},rS=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let e=new tS;this.storage=e;try{let r=new eS;MY(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}});var Zi={};Bt(Zi,{__assign:()=>iS,__asyncDelegator:()=>$Y,__asyncGenerator:()=>WY,__asyncValues:()=>YY,__await:()=>hh,__awaiter:()=>HY,__classPrivateFieldGet:()=>eJ,__classPrivateFieldSet:()=>tJ,__createBinding:()=>jY,__decorate:()=>qY,__exportStar:()=>zY,__extends:()=>FY,__generator:()=>GY,__importDefault:()=>ZY,__importStar:()=>XY,__makeTemplateObject:()=>JY,__metadata:()=>kY,__param:()=>VY,__read:()=>nP,__rest:()=>UY,__spread:()=>QY,__spreadArrays:()=>KY,__values:()=>sS});function FY(t,e){nS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function UY(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function qY(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function VY(t,e){return function(r,n){e(r,n,t)}}function kY(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function HY(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})}function GY(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(f){return a([c,f])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function jY(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function zY(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function sS(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nP(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function QY(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nP(arguments[e]));return t}function KY(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,u=s.length;o<u;o++,i++)n[i]=s[o];return n}function hh(t){return this instanceof hh?(this.v=t,this):new hh(t)}function WY(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(w){n[w]&&(i[w]=function(A){return new Promise(function(T,x){s.push([w,A,T,x])>1||u(w,A)})})}function u(w,A){try{a(n[w](A))}catch(T){d(s[0][3],T)}}function a(w){w.value instanceof hh?Promise.resolve(w.value.v).then(c,f):d(s[0][2],w)}function c(w){u("next",w)}function f(w){u("throw",w)}function d(w,A){w(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function $Y(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:hh(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function YY(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof sS=="function"?sS(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(u,a){o=t[s](o),i(u,a,o.done,o.value)})}}function i(s,o,u,a){Promise.resolve(a).then(function(c){s({value:c,done:u})},o)}}function JY(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function XY(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ZY(t){return t&&t.__esModule?t:{default:t}}function eJ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function tJ(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var nS,iS,es=fe(()=>{h();nS=function(t,e){return nS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},nS(t,e)};iS=function(){return iS=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},iS.apply(this,arguments)}});var iP=D(z0=>{"use strict";h();Object.defineProperty(z0,"__esModule",{value:!0});z0.delay=void 0;function rJ(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}z0.delay=rJ});var sP=D(Oc=>{"use strict";h();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.ONE_THOUSAND=Oc.ONE_HUNDRED=void 0;Oc.ONE_HUNDRED=100;Oc.ONE_THOUSAND=1e3});var oP=D(le=>{"use strict";h();Object.defineProperty(le,"__esModule",{value:!0});le.ONE_YEAR=le.FOUR_WEEKS=le.THREE_WEEKS=le.TWO_WEEKS=le.ONE_WEEK=le.THIRTY_DAYS=le.SEVEN_DAYS=le.FIVE_DAYS=le.THREE_DAYS=le.ONE_DAY=le.TWENTY_FOUR_HOURS=le.TWELVE_HOURS=le.SIX_HOURS=le.THREE_HOURS=le.ONE_HOUR=le.SIXTY_MINUTES=le.THIRTY_MINUTES=le.TEN_MINUTES=le.FIVE_MINUTES=le.ONE_MINUTE=le.SIXTY_SECONDS=le.THIRTY_SECONDS=le.TEN_SECONDS=le.FIVE_SECONDS=le.ONE_SECOND=void 0;le.ONE_SECOND=1;le.FIVE_SECONDS=5;le.TEN_SECONDS=10;le.THIRTY_SECONDS=30;le.SIXTY_SECONDS=60;le.ONE_MINUTE=le.SIXTY_SECONDS;le.FIVE_MINUTES=le.ONE_MINUTE*5;le.TEN_MINUTES=le.ONE_MINUTE*10;le.THIRTY_MINUTES=le.ONE_MINUTE*30;le.SIXTY_MINUTES=le.ONE_MINUTE*60;le.ONE_HOUR=le.SIXTY_MINUTES;le.THREE_HOURS=le.ONE_HOUR*3;le.SIX_HOURS=le.ONE_HOUR*6;le.TWELVE_HOURS=le.ONE_HOUR*12;le.TWENTY_FOUR_HOURS=le.ONE_HOUR*24;le.ONE_DAY=le.TWENTY_FOUR_HOURS;le.THREE_DAYS=le.ONE_DAY*3;le.FIVE_DAYS=le.ONE_DAY*5;le.SEVEN_DAYS=le.ONE_DAY*7;le.THIRTY_DAYS=le.ONE_DAY*30;le.ONE_WEEK=le.SEVEN_DAYS;le.TWO_WEEKS=le.ONE_WEEK*2;le.THREE_WEEKS=le.ONE_WEEK*3;le.FOUR_WEEKS=le.ONE_WEEK*4;le.ONE_YEAR=le.ONE_DAY*365});var oS=D(Q0=>{"use strict";h();Object.defineProperty(Q0,"__esModule",{value:!0});var aP=(es(),_e(Zi));aP.__exportStar(sP(),Q0);aP.__exportStar(oP(),Q0)});var cP=D(Dc=>{"use strict";h();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.fromMiliseconds=Dc.toMiliseconds=void 0;var uP=oS();function nJ(t){return t*uP.ONE_THOUSAND}Dc.toMiliseconds=nJ;function iJ(t){return Math.floor(t/uP.ONE_THOUSAND)}Dc.fromMiliseconds=iJ});var fP=D(K0=>{"use strict";h();Object.defineProperty(K0,"__esModule",{value:!0});var lP=(es(),_e(Zi));lP.__exportStar(iP(),K0);lP.__exportStar(cP(),K0)});var hP=D(dh=>{"use strict";h();Object.defineProperty(dh,"__esModule",{value:!0});dh.Watch=void 0;var W0=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let n=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:n})}get(e){let r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){let r=this.get(e);return r.elapsed||Date.now()-r.started}};dh.Watch=W0;dh.default=W0});var dP=D($0=>{"use strict";h();Object.defineProperty($0,"__esModule",{value:!0});$0.IWatch=void 0;var aS=class{};$0.IWatch=aS});var gP=D(uS=>{"use strict";h();Object.defineProperty(uS,"__esModule",{value:!0});var sJ=(es(),_e(Zi));sJ.__exportStar(dP(),uS)});var za=D(Pc=>{"use strict";h();Object.defineProperty(Pc,"__esModule",{value:!0});var Y0=(es(),_e(Zi));Y0.__exportStar(fP(),Pc);Y0.__exportStar(hP(),Pc);Y0.__exportStar(gP(),Pc);Y0.__exportStar(oS(),Pc)});var cS,pP=fe(()=>{h();cS=class{}});var lS={};Bt(lS,{IEvents:()=>cS});var fS=fe(()=>{h();pP()});var mP=D(J0=>{"use strict";h();Object.defineProperty(J0,"__esModule",{value:!0});J0.IHeartBeat=void 0;var oJ=(fS(),_e(lS)),hS=class extends oJ.IEvents{constructor(e){super()}};J0.IHeartBeat=hS});var gS=D(dS=>{"use strict";h();Object.defineProperty(dS,"__esModule",{value:!0});var aJ=(es(),_e(Zi));aJ.__exportStar(mP(),dS)});var yP=D(Rc=>{"use strict";h();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.HEARTBEAT_EVENTS=Rc.HEARTBEAT_INTERVAL=void 0;var uJ=za();Rc.HEARTBEAT_INTERVAL=uJ.FIVE_SECONDS;Rc.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}});var mS=D(pS=>{"use strict";h();Object.defineProperty(pS,"__esModule",{value:!0});var cJ=(es(),_e(Zi));cJ.__exportStar(yP(),pS)});var wP=D(X0=>{"use strict";h();Object.defineProperty(X0,"__esModule",{value:!0});X0.HeartBeat=void 0;var yS=(es(),_e(Zi)),lJ=Ds(),fJ=za(),hJ=gS(),wS=mS(),vS=class t extends hJ.IHeartBeat{constructor(e){super(e),this.events=new lJ.EventEmitter,this.interval=wS.HEARTBEAT_INTERVAL,this.interval=e?.interval||wS.HEARTBEAT_INTERVAL}static init(e){return yS.__awaiter(this,void 0,void 0,function*(){let r=new t(e);return yield r.init(),r})}init(){return yS.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return yS.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),fJ.toMiliseconds(this.interval))})}pulse(){this.events.emit(wS.HEARTBEAT_EVENTS.pulse)}};X0.HeartBeat=vS});var vP=D(gh=>{"use strict";h();Object.defineProperty(gh,"__esModule",{value:!0});var AS=(es(),_e(Zi));AS.__exportStar(wP(),gh);AS.__exportStar(gS(),gh);AS.__exportStar(mS(),gh)});var EP=D((VAe,AP)=>{"use strict";h();function dJ(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}AP.exports=gJ;function gJ(t,e,r){var n=r&&r.stringify||dJ,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var u=1;u<s;u++)o[u]=n(e[u]);return o.join(" ")}if(typeof t!="string")return t;var a=e.length;if(a===0)return t;for(var c="",f=1-i,d=-1,w=t&&t.length||0,A=0;A<w;){if(t.charCodeAt(A)===37&&A+1<w){switch(d=d>-1?d:0,t.charCodeAt(A+1)){case 100:case 102:if(f>=a||e[f]==null)break;d<A&&(c+=t.slice(d,A)),c+=Number(e[f]),d=A+2,A++;break;case 105:if(f>=a||e[f]==null)break;d<A&&(c+=t.slice(d,A)),c+=Math.floor(Number(e[f])),d=A+2,A++;break;case 79:case 111:case 106:if(f>=a||e[f]===void 0)break;d<A&&(c+=t.slice(d,A));var T=typeof e[f];if(T==="string"){c+="'"+e[f]+"'",d=A+2,A++;break}if(T==="function"){c+=e[f].name||"<anonymous>",d=A+2,A++;break}c+=n(e[f]),d=A+2,A++;break;case 115:if(f>=a)break;d<A&&(c+=t.slice(d,A)),c+=String(e[f]),d=A+2,A++;break;case 37:d<A&&(c+=t.slice(d,A)),c+="%",d=A+2,A++,f--;break}++f}++A}return d===-1?t:(d<w&&(c+=t.slice(d)),c)}});var SS=D((HAe,TP)=>{"use strict";h();var bP=EP();TP.exports=ts;var ph=IJ().console||{},pJ={mapHttpRequest:Z0,mapHttpResponse:Z0,wrapRequestSerializer:ES,wrapResponseSerializer:ES,wrapErrorSerializer:ES,req:Z0,res:Z0,err:AJ};function mJ(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ts(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||ph;t.browser.write&&(t.browser.asObject=!0);let n=t.serializers||{},i=mJ(t.browser.serialize,n),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let u=t.level||"info",a=Object.create(r);a.log||(a.log=mh),Object.defineProperty(a,"levelVal",{get:f}),Object.defineProperty(a,"level",{get:d,set:w});let c={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:EJ(t)};a.levels=ts.levels,a.level=u,a.setMaxListeners=a.getMaxListeners=a.emit=a.addListener=a.on=a.prependListener=a.once=a.prependOnceListener=a.removeListener=a.removeAllListeners=a.listeners=a.listenerCount=a.eventNames=a.write=a.flush=mh,a.serializers=n,a._serialize=i,a._stdErrSerialize=s,a.child=A,e&&(a._logEvent=bS());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function w(T){if(T!=="silent"&&!this.levels.values[T])throw Error("unknown level "+T);this._level=T,Bc(c,a,"error","log"),Bc(c,a,"fatal","error"),Bc(c,a,"warn","error"),Bc(c,a,"info","log"),Bc(c,a,"debug","log"),Bc(c,a,"trace","log")}function A(T,x){if(!T)throw new Error("missing bindings for child Pino");x=x||{},i&&T.serializers&&(x.serializers=T.serializers);let B=x.serializers;if(i&&B){var V=Object.assign({},n,B),U=t.browser.serialize===!0?Object.keys(V):i;delete T.serializers,em([T],U,V,this._stdErrSerialize)}function Q(L){this._childLevel=(L._childLevel|0)+1,this.error=Mc(L,T,"error"),this.fatal=Mc(L,T,"fatal"),this.warn=Mc(L,T,"warn"),this.info=Mc(L,T,"info"),this.debug=Mc(L,T,"debug"),this.trace=Mc(L,T,"trace"),V&&(this.serializers=V,this._serialize=U),e&&(this._logEvent=bS([].concat(L._logEvent.bindings,T)))}return Q.prototype=this,new Q(this)}return a}ts.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ts.stdSerializers=pJ;ts.stdTimeFunctions=Object.assign({},{nullTime:SP,epochTime:IP,unixTime:bJ,isoTime:SJ});function Bc(t,e,r,n){let i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?mh:i[r]?i[r]:ph[r]||ph[n]||mh,yJ(t,e,r)}function yJ(t,e,r){!t.transmit&&e[r]===mh||(e[r]=function(n){return function(){let s=t.timestamp(),o=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ph?ph:this;for(var a=0;a<o.length;a++)o[a]=arguments[a];if(t.serialize&&!t.asObject&&em(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(u,wJ(this,r,o,s)):n.apply(u,o),t.transmit){let c=t.transmit.level||e.level,f=ts.levels.values[c],d=ts.levels.values[r];if(d<f)return;vJ(this,{ts:s,methodLevel:r,methodValue:d,transmitLevel:c,transmitValue:ts.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function wJ(t,e,r,n){t._serialize&&em(r,t._serialize,t.serializers,t._stdErrSerialize);let i=r.slice(),s=i[0],o={};n&&(o.time=n),o.level=ts.levels.values[e];let u=(t._childLevel|0)+1;if(u<1&&(u=1),s!==null&&typeof s=="object"){for(;u--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?bP(i.shift(),i):void 0}else typeof s=="string"&&(s=bP(i.shift(),i));return s!==void 0&&(o.msg=s),o}function em(t,e,r,n){for(let i in t)if(n&&t[i]instanceof Error)t[i]=ts.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(let s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function Mc(t,e,r){return function(){let n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function vJ(t,e,r){let n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,u=e.val,a=t._logEvent.bindings;em(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(c){return a.indexOf(c)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,u),t._logEvent=bS(a)}function bS(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function AJ(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function EJ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?SP:IP}function Z0(){return{}}function ES(t){return t}function mh(){}function SP(){return!1}function IP(){return Date.now()}function bJ(){return Math.round(Date.now()/1e3)}function SJ(){return new Date(Date.now()).toISOString()}function IJ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var CS={};Bt(CS,{MAX_LOG_SIZE_IN_BYTES_DEFAULT:()=>sm,PINO_CUSTOM_CONTEXT_KEY:()=>Lc,PINO_LOGGER_DEFAULTS:()=>xP,formatChildLoggerContext:()=>RP,generateChildLogger:()=>DJ,generateClientLogger:()=>BP,generatePlatformLogger:()=>PJ,generateServerLogger:()=>MP,getBrowserLoggerContext:()=>OP,getDefaultLoggerOptions:()=>OJ,getLoggerContext:()=>PP,pino:()=>NP.default,setBrowserLoggerContext:()=>DP});function OJ(t){return im(nm({},t),{level:t?.level||xP.level})}function OP(t,e=Lc){return t[e]||""}function DP(t,e,r=Lc){return t[r]=e,t}function PP(t,e=Lc){let r="";return typeof t.bindings>"u"?r=OP(t,e):r=t.bindings().context||"",r}function RP(t,e,r=Lc){let n=PP(t,r);return n.trim()?`${n}/${e}`:e}function DJ(t,e,r=Lc){let n=RP(t,e,r),i=t.child({context:n});return DP(i,n,r)}function BP(t){var e,r;let n=new TS((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:(0,Us.default)(im(nm({},t.opts),{level:"trace",browser:im(nm({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function MP(t){var e;let r=new _S((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:(0,Us.default)(im(nm({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function PJ(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?BP(t):MP(t)}var Us,NP,xP,Lc,sm,IS,tm,rm,TS,_S,TJ,_J,CJ,_P,NJ,xJ,CP,nm,im,NS=fe(()=>{h();Us=pe(SS()),NP=pe(SS());xc();xP={level:"info"},Lc="custom_context",sm=1e3*1024,IS=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},tm=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let r=new IS(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let r=e.value;return e=e.next,{done:!1,value:r}}}}},rm=class{constructor(e,r=sm){this.level=e??"error",this.levelValue=Us.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new tm(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Us.levels.values.error?console.error(e):r===Us.levels.values.warn?console.warn(e):r===Us.levels.values.debug?console.debug(e):r===Us.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ai({timestamp:new Date().toISOString(),log:e}));let r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new tm(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let r=this.getLogArray();return r.push(Ai({extraMetadata:e})),new Blob(r,{type:"application/json"})}},TS=class{constructor(e,r=sm){this.baseChunkLogger=new rm(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},_S=class{constructor(e,r=sm){this.baseChunkLogger=new rm(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}},TJ=Object.defineProperty,_J=Object.defineProperties,CJ=Object.getOwnPropertyDescriptors,_P=Object.getOwnPropertySymbols,NJ=Object.prototype.hasOwnProperty,xJ=Object.prototype.propertyIsEnumerable,CP=(t,e,r)=>e in t?TJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nm=(t,e)=>{for(var r in e||(e={}))NJ.call(e,r)&&CP(t,r,e[r]);if(_P)for(var r of _P(e))xJ.call(e,r)&&CP(t,r,e[r]);return t},im=(t,e)=>_J(t,CJ(e))});var KS=D(ar=>{"use strict";h();Object.defineProperty(ar,"__esModule",{value:!0});var Fc=(fS(),_e(lS)),LP=Ds();function RJ(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var BJ=RJ(LP),xS=class extends Fc.IEvents{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},OS=class{constructor(e,r,n){this.core=e,this.logger=r}},DS=class extends Fc.IEvents{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},PS=class{constructor(e,r){this.logger=e,this.core=r}},RS=class extends Fc.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},BS=class extends Fc.IEvents{constructor(e){super()}},MS=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},LS=class{constructor(){this.map=new Map}},FS=class extends Fc.IEvents{constructor(e,r){super(),this.relayer=e,this.logger=r}},US=class{constructor(e,r){this.core=e,this.logger=r}},qS=class extends Fc.IEvents{constructor(e,r){super(),this.core=e,this.logger=r}},VS=class{constructor(e,r){this.logger=e,this.core=r}},kS=class{constructor(e,r){this.projectId=e,this.logger=r}},HS=class{constructor(e,r){this.projectId=e,this.logger=r}},GS=class extends BJ.default{constructor(){super()}},jS=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},zS=class extends LP.EventEmitter{constructor(){super()}},QS=class{constructor(e){this.client=e}};ar.ICore=xS,ar.ICrypto=OS,ar.IEchoClient=HS,ar.IEngine=QS,ar.IEngineEvents=zS,ar.IExpirer=qS,ar.IJsonRpcHistory=DS,ar.IKeyChain=US,ar.IMessageTracker=PS,ar.IPairing=VS,ar.IPublisher=RS,ar.IRelayer=BS,ar.ISignClient=jS,ar.ISignClientEvents=GS,ar.IStore=MS,ar.ISubscriber=FS,ar.ISubscriberTopicMap=LS,ar.IVerify=kS});var UP=D(om=>{"use strict";h();Object.defineProperty(om,"__esModule",{value:!0});om.BrowserRandomSource=void 0;var FP=65536,WS=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=FP)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,FP)));return r}};om.BrowserRandomSource=WS});var Qn=D($S=>{"use strict";h();Object.defineProperty($S,"__esModule",{value:!0});function MJ(t){for(var e=0;e<t.length;e++)t[e]=0;return t}$S.wipe=MJ});var qP=D(()=>{h()});var VP=D(am=>{"use strict";h();Object.defineProperty(am,"__esModule",{value:!0});am.NodeRandomSource=void 0;var LJ=Qn(),YS=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Pd<"u"){let e=qP();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,LJ.wipe)(r),n}};am.NodeRandomSource=YS});var kP=D(um=>{"use strict";h();Object.defineProperty(um,"__esModule",{value:!0});um.SystemRandomSource=void 0;var FJ=UP(),UJ=VP(),JS=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new FJ.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new UJ.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};um.SystemRandomSource=JS});var HP=D(dn=>{"use strict";h();Object.defineProperty(dn,"__esModule",{value:!0});function qJ(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}dn.mul=Math.imul||qJ;function VJ(t,e){return t+e|0}dn.add=VJ;function kJ(t,e){return t-e|0}dn.sub=kJ;function HJ(t,e){return t<<e|t>>>32-e}dn.rotl=HJ;function GJ(t,e){return t<<32-e|t>>>e}dn.rotr=GJ;function jJ(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}dn.isInteger=Number.isInteger||jJ;dn.MAX_SAFE_INTEGER=9007199254740991;dn.isSafeInteger=function(t){return dn.isInteger(t)&&t>=-dn.MAX_SAFE_INTEGER&&t<=dn.MAX_SAFE_INTEGER}});var Uc=D(xe=>{"use strict";h();Object.defineProperty(xe,"__esModule",{value:!0});var GP=HP();function zJ(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}xe.readInt16BE=zJ;function QJ(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}xe.readUint16BE=QJ;function KJ(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}xe.readInt16LE=KJ;function WJ(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}xe.readUint16LE=WJ;function jP(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}xe.writeUint16BE=jP;xe.writeInt16BE=jP;function zP(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}xe.writeUint16LE=zP;xe.writeInt16LE=zP;function XS(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}xe.readInt32BE=XS;function ZS(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}xe.readUint32BE=ZS;function eI(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}xe.readInt32LE=eI;function tI(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}xe.readUint32LE=tI;function cm(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}xe.writeUint32BE=cm;xe.writeInt32BE=cm;function lm(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}xe.writeUint32LE=lm;xe.writeInt32LE=lm;function $J(t,e){e===void 0&&(e=0);var r=XS(t,e),n=XS(t,e+4);return r*4294967296+n-(n>>31)*4294967296}xe.readInt64BE=$J;function YJ(t,e){e===void 0&&(e=0);var r=ZS(t,e),n=ZS(t,e+4);return r*4294967296+n}xe.readUint64BE=YJ;function JJ(t,e){e===void 0&&(e=0);var r=eI(t,e),n=eI(t,e+4);return n*4294967296+r-(r>>31)*4294967296}xe.readInt64LE=JJ;function XJ(t,e){e===void 0&&(e=0);var r=tI(t,e),n=tI(t,e+4);return n*4294967296+r}xe.readUint64LE=XJ;function QP(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),cm(t/4294967296>>>0,e,r),cm(t>>>0,e,r+4),e}xe.writeUint64BE=QP;xe.writeInt64BE=QP;function KP(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),lm(t>>>0,e,r),lm(t/4294967296>>>0,e,r+4),e}xe.writeUint64LE=KP;xe.writeInt64LE=KP;function ZJ(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}xe.readUintBE=ZJ;function eX(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}xe.readUintLE=eX;function tX(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!GP.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}xe.writeUintBE=tX;function rX(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!GP.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}xe.writeUintLE=rX;function nX(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}xe.readFloat32BE=nX;function iX(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}xe.readFloat32LE=iX;function sX(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}xe.readFloat64BE=sX;function oX(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}xe.readFloat64LE=oX;function aX(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}xe.writeFloat32BE=aX;function uX(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}xe.writeFloat32LE=uX;function cX(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}xe.writeFloat64BE=cX;function lX(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}xe.writeFloat64LE=lX});var yh=D(Br=>{"use strict";h();Object.defineProperty(Br,"__esModule",{value:!0});Br.randomStringForEntropy=Br.randomString=Br.randomUint32=Br.randomBytes=Br.defaultRandomSource=void 0;var fX=kP(),hX=Uc(),WP=Qn();Br.defaultRandomSource=new fX.SystemRandomSource;function rI(t,e=Br.defaultRandomSource){return e.randomBytes(t)}Br.randomBytes=rI;function dX(t=Br.defaultRandomSource){let e=rI(4,t),r=(0,hX.readUint32LE)(e);return(0,WP.wipe)(e),r}Br.randomUint32=dX;var $P="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function YP(t,e=$P,r=Br.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;t>0;){let o=rI(Math.ceil(t*256/s),r);for(let u=0;u<o.length&&t>0;u++){let a=o[u];a<s&&(n+=e.charAt(a%i),t--)}(0,WP.wipe)(o)}return n}Br.randomString=YP;function gX(t,e=$P,r=Br.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return YP(n,e,r)}Br.randomStringForEntropy=gX});var ZP=D(qs=>{"use strict";h();Object.defineProperty(qs,"__esModule",{value:!0});var Vc=Uc(),qc=Qn();qs.DIGEST_LENGTH=64;qs.BLOCK_SIZE=128;var XP=function(){function t(){this.digestLength=qs.DIGEST_LENGTH,this.blockSize=qs.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){qc.wipe(this._buffer),qc.wipe(this._tempHi),qc.wipe(this._tempLo),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<qs.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(nI(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=nI(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%128<112?128:256;this._buffer[n]=128;for(var u=n+1;u<o-8;u++)this._buffer[u]=0;Vc.writeUint32BE(i,this._buffer,o-8),Vc.writeUint32BE(s,this._buffer,o-4),nI(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(var u=0;u<this.digestLength/8;u++)Vc.writeUint32BE(this._stateHi[u],e,u*8),Vc.writeUint32BE(this._stateLo[u],e,u*8+4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){qc.wipe(e.stateHi),qc.wipe(e.stateLo),e.buffer&&qc.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();qs.SHA512=XP;var JP=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function nI(t,e,r,n,i,s,o){for(var u=r[0],a=r[1],c=r[2],f=r[3],d=r[4],w=r[5],A=r[6],T=r[7],x=n[0],B=n[1],V=n[2],U=n[3],Q=n[4],L=n[5],k=n[6],H=n[7],q,v,C,P,F,R,l,g;o>=128;){for(var y=0;y<16;y++){var E=8*y+s;t[y]=Vc.readUint32BE(i,E),e[y]=Vc.readUint32BE(i,E+4)}for(var y=0;y<80;y++){var I=u,_=a,M=c,N=f,m=d,O=w,Y=A,$=T,b=x,j=B,z=V,W=U,ie=Q,te=L,ee=k,se=H;if(q=T,v=H,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=(d>>>14|Q<<18)^(d>>>18|Q<<14)^(Q>>>9|d<<23),v=(Q>>>14|d<<18)^(Q>>>18|d<<14)^(d>>>9|Q<<23),F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,q=d&w^~d&A,v=Q&L^~Q&k,F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,q=JP[y*2],v=JP[y*2+1],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,q=t[y%16],v=e[y%16],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,C=l&65535|g<<16,P=F&65535|R<<16,q=C,v=P,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=(u>>>28|x<<4)^(x>>>2|u<<30)^(x>>>7|u<<25),v=(x>>>28|u<<4)^(u>>>2|x<<30)^(u>>>7|x<<25),F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,q=u&a^u&c^a&c,v=x&B^x&V^B&V,F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,$=l&65535|g<<16,se=F&65535|R<<16,q=N,v=W,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=C,v=P,F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,N=l&65535|g<<16,W=F&65535|R<<16,a=I,c=_,f=M,d=N,w=m,A=O,T=Y,u=$,B=b,V=j,U=z,Q=W,L=ie,k=te,H=ee,x=se,y%16===15)for(var E=0;E<16;E++)q=t[E],v=e[E],F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=t[(E+9)%16],v=e[(E+9)%16],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,C=t[(E+1)%16],P=e[(E+1)%16],q=(C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7,v=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25),F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,C=t[(E+14)%16],P=e[(E+14)%16],q=(C>>>19|P<<13)^(P>>>29|C<<3)^C>>>6,v=(P>>>19|C<<13)^(C>>>29|P<<3)^(P>>>6|C<<26),F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,t[E]=l&65535|g<<16,e[E]=F&65535|R<<16}q=u,v=x,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[0],v=n[0],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[0]=u=l&65535|g<<16,n[0]=x=F&65535|R<<16,q=a,v=B,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[1],v=n[1],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[1]=a=l&65535|g<<16,n[1]=B=F&65535|R<<16,q=c,v=V,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[2],v=n[2],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[2]=c=l&65535|g<<16,n[2]=V=F&65535|R<<16,q=f,v=U,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[3],v=n[3],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[3]=f=l&65535|g<<16,n[3]=U=F&65535|R<<16,q=d,v=Q,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[4],v=n[4],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[4]=d=l&65535|g<<16,n[4]=Q=F&65535|R<<16,q=w,v=L,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[5],v=n[5],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[5]=w=l&65535|g<<16,n[5]=L=F&65535|R<<16,q=A,v=k,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[6],v=n[6],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[6]=A=l&65535|g<<16,n[6]=k=F&65535|R<<16,q=T,v=H,F=v&65535,R=v>>>16,l=q&65535,g=q>>>16,q=r[7],v=n[7],F+=v&65535,R+=v>>>16,l+=q&65535,g+=q>>>16,R+=F>>>16,l+=R>>>16,g+=l>>>16,r[7]=T=l&65535|g<<16,n[7]=H=F&65535|R<<16,s+=128,o-=128}return s}function pX(t){var e=new XP;e.update(t);var r=e.digest();return e.clean(),r}qs.hash=pX});var dR=D(Ge=>{"use strict";h();Object.defineProperty(Ge,"__esModule",{value:!0});Ge.convertSecretKeyToX25519=Ge.convertPublicKeyToX25519=Ge.verify=Ge.sign=Ge.extractPublicKeyFromSecretKey=Ge.generateKeyPair=Ge.generateKeyPairFromSeed=Ge.SEED_LENGTH=Ge.SECRET_KEY_LENGTH=Ge.PUBLIC_KEY_LENGTH=Ge.SIGNATURE_LENGTH=void 0;var mX=yh(),wh=ZP(),iR=Qn();Ge.SIGNATURE_LENGTH=64;Ge.PUBLIC_KEY_LENGTH=32;Ge.SECRET_KEY_LENGTH=64;Ge.SEED_LENGTH=32;function ve(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var yX=new Uint8Array(32);yX[0]=9;var oI=ve(),kc=ve([1]),wX=ve([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),vX=ve([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),eR=ve([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),tR=ve([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),AX=ve([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Bo(t,e){for(let r=0;r<16;r++)t[r]=e[r]|0}function iI(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function sR(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function vh(t,e){let r=ve(),n=ve();for(let i=0;i<16;i++)n[i]=e[i];iI(n),iI(n),iI(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,sR(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function oR(t,e){let r=0;for(let n=0;n<32;n++)r|=t[n]^e[n];return(1&r-1>>>8)-1}function rR(t,e){let r=new Uint8Array(32),n=new Uint8Array(32);return vh(r,t),vh(n,e),oR(r,n)}function aR(t){let e=new Uint8Array(32);return vh(e,t),e[0]&1}function EX(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Qa(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function Wa(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function Ct(t,e,r){let n,i,s=0,o=0,u=0,a=0,c=0,f=0,d=0,w=0,A=0,T=0,x=0,B=0,V=0,U=0,Q=0,L=0,k=0,H=0,q=0,v=0,C=0,P=0,F=0,R=0,l=0,g=0,y=0,E=0,I=0,_=0,M=0,N=r[0],m=r[1],O=r[2],Y=r[3],$=r[4],b=r[5],j=r[6],z=r[7],W=r[8],ie=r[9],te=r[10],ee=r[11],se=r[12],oe=r[13],J=r[14],ue=r[15];n=e[0],s+=n*N,o+=n*m,u+=n*O,a+=n*Y,c+=n*$,f+=n*b,d+=n*j,w+=n*z,A+=n*W,T+=n*ie,x+=n*te,B+=n*ee,V+=n*se,U+=n*oe,Q+=n*J,L+=n*ue,n=e[1],o+=n*N,u+=n*m,a+=n*O,c+=n*Y,f+=n*$,d+=n*b,w+=n*j,A+=n*z,T+=n*W,x+=n*ie,B+=n*te,V+=n*ee,U+=n*se,Q+=n*oe,L+=n*J,k+=n*ue,n=e[2],u+=n*N,a+=n*m,c+=n*O,f+=n*Y,d+=n*$,w+=n*b,A+=n*j,T+=n*z,x+=n*W,B+=n*ie,V+=n*te,U+=n*ee,Q+=n*se,L+=n*oe,k+=n*J,H+=n*ue,n=e[3],a+=n*N,c+=n*m,f+=n*O,d+=n*Y,w+=n*$,A+=n*b,T+=n*j,x+=n*z,B+=n*W,V+=n*ie,U+=n*te,Q+=n*ee,L+=n*se,k+=n*oe,H+=n*J,q+=n*ue,n=e[4],c+=n*N,f+=n*m,d+=n*O,w+=n*Y,A+=n*$,T+=n*b,x+=n*j,B+=n*z,V+=n*W,U+=n*ie,Q+=n*te,L+=n*ee,k+=n*se,H+=n*oe,q+=n*J,v+=n*ue,n=e[5],f+=n*N,d+=n*m,w+=n*O,A+=n*Y,T+=n*$,x+=n*b,B+=n*j,V+=n*z,U+=n*W,Q+=n*ie,L+=n*te,k+=n*ee,H+=n*se,q+=n*oe,v+=n*J,C+=n*ue,n=e[6],d+=n*N,w+=n*m,A+=n*O,T+=n*Y,x+=n*$,B+=n*b,V+=n*j,U+=n*z,Q+=n*W,L+=n*ie,k+=n*te,H+=n*ee,q+=n*se,v+=n*oe,C+=n*J,P+=n*ue,n=e[7],w+=n*N,A+=n*m,T+=n*O,x+=n*Y,B+=n*$,V+=n*b,U+=n*j,Q+=n*z,L+=n*W,k+=n*ie,H+=n*te,q+=n*ee,v+=n*se,C+=n*oe,P+=n*J,F+=n*ue,n=e[8],A+=n*N,T+=n*m,x+=n*O,B+=n*Y,V+=n*$,U+=n*b,Q+=n*j,L+=n*z,k+=n*W,H+=n*ie,q+=n*te,v+=n*ee,C+=n*se,P+=n*oe,F+=n*J,R+=n*ue,n=e[9],T+=n*N,x+=n*m,B+=n*O,V+=n*Y,U+=n*$,Q+=n*b,L+=n*j,k+=n*z,H+=n*W,q+=n*ie,v+=n*te,C+=n*ee,P+=n*se,F+=n*oe,R+=n*J,l+=n*ue,n=e[10],x+=n*N,B+=n*m,V+=n*O,U+=n*Y,Q+=n*$,L+=n*b,k+=n*j,H+=n*z,q+=n*W,v+=n*ie,C+=n*te,P+=n*ee,F+=n*se,R+=n*oe,l+=n*J,g+=n*ue,n=e[11],B+=n*N,V+=n*m,U+=n*O,Q+=n*Y,L+=n*$,k+=n*b,H+=n*j,q+=n*z,v+=n*W,C+=n*ie,P+=n*te,F+=n*ee,R+=n*se,l+=n*oe,g+=n*J,y+=n*ue,n=e[12],V+=n*N,U+=n*m,Q+=n*O,L+=n*Y,k+=n*$,H+=n*b,q+=n*j,v+=n*z,C+=n*W,P+=n*ie,F+=n*te,R+=n*ee,l+=n*se,g+=n*oe,y+=n*J,E+=n*ue,n=e[13],U+=n*N,Q+=n*m,L+=n*O,k+=n*Y,H+=n*$,q+=n*b,v+=n*j,C+=n*z,P+=n*W,F+=n*ie,R+=n*te,l+=n*ee,g+=n*se,y+=n*oe,E+=n*J,I+=n*ue,n=e[14],Q+=n*N,L+=n*m,k+=n*O,H+=n*Y,q+=n*$,v+=n*b,C+=n*j,P+=n*z,F+=n*W,R+=n*ie,l+=n*te,g+=n*ee,y+=n*se,E+=n*oe,I+=n*J,_+=n*ue,n=e[15],L+=n*N,k+=n*m,H+=n*O,q+=n*Y,v+=n*$,C+=n*b,P+=n*j,F+=n*z,R+=n*W,l+=n*ie,g+=n*te,y+=n*ee,E+=n*se,I+=n*oe,_+=n*J,M+=n*ue,s+=38*k,o+=38*H,u+=38*q,a+=38*v,c+=38*C,f+=38*P,d+=38*F,w+=38*R,A+=38*l,T+=38*g,x+=38*y,B+=38*E,V+=38*I,U+=38*_,Q+=38*M,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=Q+i+65535,i=Math.floor(n/65536),Q=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=Q+i+65535,i=Math.floor(n/65536),Q=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=u,t[3]=a,t[4]=c,t[5]=f,t[6]=d,t[7]=w,t[8]=A,t[9]=T,t[10]=x,t[11]=B,t[12]=V,t[13]=U,t[14]=Q,t[15]=L}function Ka(t,e){Ct(t,e,e)}function uR(t,e){let r=ve(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)Ka(r,r),n!==2&&n!==4&&Ct(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function bX(t,e){let r=ve(),n;for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)Ka(r,r),n!==1&&Ct(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function aI(t,e){let r=ve(),n=ve(),i=ve(),s=ve(),o=ve(),u=ve(),a=ve(),c=ve(),f=ve();Wa(r,t[1],t[0]),Wa(f,e[1],e[0]),Ct(r,r,f),Qa(n,t[0],t[1]),Qa(f,e[0],e[1]),Ct(n,n,f),Ct(i,t[3],e[3]),Ct(i,i,vX),Ct(s,t[2],e[2]),Qa(s,s,s),Wa(o,n,r),Wa(u,s,i),Qa(a,s,i),Qa(c,n,r),Ct(t[0],o,u),Ct(t[1],c,a),Ct(t[2],a,u),Ct(t[3],o,c)}function nR(t,e,r){for(let n=0;n<4;n++)sR(t[n],e[n],r)}function cI(t,e){let r=ve(),n=ve(),i=ve();uR(i,e[2]),Ct(r,e[0],i),Ct(n,e[1],i),vh(t,n),t[31]^=aR(r)<<7}function cR(t,e,r){Bo(t[0],oI),Bo(t[1],kc),Bo(t[2],kc),Bo(t[3],oI);for(let n=255;n>=0;--n){let i=r[n/8|0]>>(n&7)&1;nR(t,e,i),aI(e,t),aI(t,t),nR(t,e,i)}}function lI(t,e){let r=[ve(),ve(),ve(),ve()];Bo(r[0],eR),Bo(r[1],tR),Bo(r[2],kc),Ct(r[3],eR,tR),cR(t,r,e)}function lR(t){if(t.length!==Ge.SEED_LENGTH)throw new Error(`ed25519: seed must be ${Ge.SEED_LENGTH} bytes`);let e=(0,wh.hash)(t);e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(32),n=[ve(),ve(),ve(),ve()];lI(n,e),cI(r,n);let i=new Uint8Array(64);return i.set(t),i.set(r,32),{publicKey:r,secretKey:i}}Ge.generateKeyPairFromSeed=lR;function SX(t){let e=(0,mX.randomBytes)(32,t),r=lR(e);return(0,iR.wipe)(e),r}Ge.generateKeyPair=SX;function IX(t){if(t.length!==Ge.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${Ge.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}Ge.extractPublicKeyFromSecretKey=IX;var sI=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function fR(t,e){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*sI[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*sI[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*sI[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function uI(t){let e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let r=0;r<64;r++)t[r]=0;fR(t,e)}function TX(t,e){let r=new Float64Array(64),n=[ve(),ve(),ve(),ve()],i=(0,wh.hash)(t.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;let s=new Uint8Array(64);s.set(i.subarray(32),32);let o=new wh.SHA512;o.update(s.subarray(32)),o.update(e);let u=o.digest();o.clean(),uI(u),lI(n,u),cI(s,n),o.reset(),o.update(s.subarray(0,32)),o.update(t.subarray(32)),o.update(e);let a=o.digest();uI(a);for(let c=0;c<32;c++)r[c]=u[c];for(let c=0;c<32;c++)for(let f=0;f<32;f++)r[c+f]+=a[c]*i[f];return fR(s.subarray(32),r),s}Ge.sign=TX;function hR(t,e){let r=ve(),n=ve(),i=ve(),s=ve(),o=ve(),u=ve(),a=ve();return Bo(t[2],kc),EX(t[1],e),Ka(i,t[1]),Ct(s,i,wX),Wa(i,i,t[2]),Qa(s,t[2],s),Ka(o,s),Ka(u,o),Ct(a,u,o),Ct(r,a,i),Ct(r,r,s),bX(r,r),Ct(r,r,i),Ct(r,r,s),Ct(r,r,s),Ct(t[0],r,s),Ka(n,t[0]),Ct(n,n,s),rR(n,i)&&Ct(t[0],t[0],AX),Ka(n,t[0]),Ct(n,n,s),rR(n,i)?-1:(aR(t[0])===e[31]>>7&&Wa(t[0],oI,t[0]),Ct(t[3],t[0],t[1]),0)}function _X(t,e,r){let n=new Uint8Array(32),i=[ve(),ve(),ve(),ve()],s=[ve(),ve(),ve(),ve()];if(r.length!==Ge.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${Ge.SIGNATURE_LENGTH} bytes`);if(hR(s,t))return!1;let o=new wh.SHA512;o.update(r.subarray(0,32)),o.update(t),o.update(e);let u=o.digest();return uI(u),cR(i,s,u),lI(s,r.subarray(32)),aI(i,s),cI(n,i),!oR(r,n)}Ge.verify=_X;function CX(t){let e=[ve(),ve(),ve(),ve()];if(hR(e,t))throw new Error("Ed25519: invalid public key");let r=ve(),n=ve(),i=e[1];Qa(r,kc,i),Wa(n,kc,i),uR(n,n),Ct(r,r,n);let s=new Uint8Array(32);return vh(s,r),s}Ge.convertPublicKeyToX25519=CX;function NX(t){let e=(0,wh.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(e.subarray(0,32));return(0,iR.wipe)(e),r}Ge.convertSecretKeyToX25519=NX});var fm,hm,$a,Hc,dm,Ah,gm,pm,mm,Gc,ym,wm,gR,pR,vm=fe(()=>{h();fm="EdDSA",hm="JWT",$a=".",Hc="base64url",dm="utf8",Ah="utf8",gm=":",pm="did",mm="key",Gc="base58btc",ym="z",wm="K36",gR=32,pR=32});function Mo(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var Eh=fe(()=>{h()});function jc(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Mo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var Am=fe(()=>{h();Eh()});function Em(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=jc(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Mo(r)}var fI=fe(()=>{h();Am();Eh()});function xX(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var u=t.length,a=t.charAt(0),c=Math.log(u)/Math.log(256),f=Math.log(256)/Math.log(u);function d(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var x=0,B=0,V=0,U=T.length;V!==U&&T[V]===0;)V++,x++;for(var Q=(U-V)*f+1>>>0,L=new Uint8Array(Q);V!==U;){for(var k=T[V],H=0,q=Q-1;(k!==0||H<B)&&q!==-1;q--,H++)k+=256*L[q]>>>0,L[q]=k%u>>>0,k=k/u>>>0;if(k!==0)throw new Error("Non-zero carry");B=H,V++}for(var v=Q-B;v!==Q&&L[v]===0;)v++;for(var C=a.repeat(x);v<Q;++v)C+=t.charAt(L[v]);return C}function w(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var x=0;if(T[x]!==" "){for(var B=0,V=0;T[x]===a;)B++,x++;for(var U=(T.length-x)*c+1>>>0,Q=new Uint8Array(U);T[x];){var L=r[T.charCodeAt(x)];if(L===255)return;for(var k=0,H=U-1;(L!==0||k<V)&&H!==-1;H--,k++)L+=u*Q[H]>>>0,Q[H]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");V=k,x++}if(T[x]!==" "){for(var q=U-V;q!==U&&Q[q]===0;)q++;for(var v=new Uint8Array(B+(U-q)),C=B;q!==U;)v[C++]=Q[q++];return v}}}function A(T){var x=w(T);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:w,decode:A}}var OX,DX,mR,yR=fe(()=>{h();OX=xX,DX=OX,mR=DX});var xEe,wR,Vs,vR,AR,Lo=fe(()=>{h();xEe=new Uint8Array(0),wR=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Vs=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},vR=t=>new TextEncoder().encode(t),AR=t=>new TextDecoder().decode(t)});var hI,dI,gI,bR,pI,zc,Fo,PX,RX,jt,Ei=fe(()=>{h();yR();Lo();hI=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},dI=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bR(this,e)}},gI=class{constructor(e){this.decoders=e}or(e){return bR(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},bR=(t,e)=>new gI({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),pI=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new hI(e,r,n),this.decoder=new dI(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},zc=({name:t,prefix:e,encode:r,decode:n})=>new pI(t,e,r,n),Fo=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=mR(r,e);return zc({prefix:t,name:e,encode:n,decode:s=>Vs(i(s))})},PX=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),u=0,a=0,c=0;for(let f=0;f<s;++f){let d=i[t[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|d,u+=r,u>=8&&(u-=8,o[c++]=255&a>>u)}if(u>=r||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return o},RX=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,u=0;for(let a=0;a<t.length;++a)for(u=u<<8|t[a],o+=8;o>r;)o-=r,s+=e[i&u>>o];if(o&&(s+=e[i&u<<r-o]),n)for(;s.length*r&7;)s+="=";return s},jt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>zc({prefix:e,name:t,encode(i){return RX(i,n,r)},decode(i){return PX(i,n,r,t)}})});var mI={};Bt(mI,{identity:()=>BX});var BX,SR=fe(()=>{h();Ei();Lo();BX=zc({prefix:"\0",name:"identity",encode:t=>AR(t),decode:t=>vR(t)})});var yI={};Bt(yI,{base2:()=>MX});var MX,IR=fe(()=>{h();Ei();MX=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var wI={};Bt(wI,{base8:()=>LX});var LX,TR=fe(()=>{h();Ei();LX=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var vI={};Bt(vI,{base10:()=>FX});var FX,_R=fe(()=>{h();Ei();FX=Fo({prefix:"9",name:"base10",alphabet:"0123456789"})});var AI={};Bt(AI,{base16:()=>UX,base16upper:()=>qX});var UX,qX,CR=fe(()=>{h();Ei();UX=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qX=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var EI={};Bt(EI,{base32:()=>Qc,base32hex:()=>GX,base32hexpad:()=>zX,base32hexpadupper:()=>QX,base32hexupper:()=>jX,base32pad:()=>kX,base32padupper:()=>HX,base32upper:()=>VX,base32z:()=>KX});var Qc,VX,kX,HX,GX,jX,zX,QX,KX,bI=fe(()=>{h();Ei();Qc=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),VX=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kX=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),HX=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),GX=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jX=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zX=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QX=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),KX=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var SI={};Bt(SI,{base36:()=>WX,base36upper:()=>$X});var WX,$X,NR=fe(()=>{h();Ei();WX=Fo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$X=Fo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var II={};Bt(II,{base58btc:()=>rs,base58flickr:()=>YX});var rs,YX,TI=fe(()=>{h();Ei();rs=Fo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),YX=Fo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var _I={};Bt(_I,{base64:()=>JX,base64pad:()=>XX,base64url:()=>ZX,base64urlpad:()=>eZ});var JX,XX,ZX,eZ,xR=fe(()=>{h();Ei();JX=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),XX=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ZX=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eZ=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var CI={};Bt(CI,{base256emoji:()=>sZ});function nZ(t){return t.reduce((e,r)=>(e+=tZ[r],e),"")}function iZ(t){let e=[];for(let r of t){let n=rZ[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var OR,tZ,rZ,sZ,DR=fe(()=>{h();Ei();OR=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),tZ=OR.reduce((t,e,r)=>(t[r]=e,t),[]),rZ=OR.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);sZ=zc({prefix:"\u{1F680}",name:"base256emoji",encode:nZ,decode:iZ})});function BR(t,e,r){e=e||[],r=r||0;for(var n=r;t>=cZ;)e[r++]=t&255|PR,t/=128;for(;t&uZ;)e[r++]=t&255|PR,t>>>=7;return e[r]=t|0,BR.bytes=r-n+1,e}function NI(t,n){var r=0,n=n||0,i=0,s=n,o,u=t.length;do{if(s>=u)throw NI.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&RR)<<i:(o&RR)*Math.pow(2,i),i+=7}while(o>=fZ);return NI.bytes=s-n,r}var oZ,PR,aZ,uZ,cZ,lZ,fZ,RR,hZ,dZ,gZ,pZ,mZ,yZ,wZ,vZ,AZ,EZ,bZ,SZ,bh,MR=fe(()=>{h();oZ=BR,PR=128,aZ=127,uZ=~aZ,cZ=Math.pow(2,31);lZ=NI,fZ=128,RR=127;hZ=Math.pow(2,7),dZ=Math.pow(2,14),gZ=Math.pow(2,21),pZ=Math.pow(2,28),mZ=Math.pow(2,35),yZ=Math.pow(2,42),wZ=Math.pow(2,49),vZ=Math.pow(2,56),AZ=Math.pow(2,63),EZ=function(t){return t<hZ?1:t<dZ?2:t<gZ?3:t<pZ?4:t<mZ?5:t<yZ?6:t<wZ?7:t<vZ?8:t<AZ?9:10},bZ={encode:oZ,decode:lZ,encodingLength:EZ},SZ=bZ,bh=SZ});var Sh,Kc,Wc,Sm=fe(()=>{h();MR();Sh=(t,e=0)=>[bh.decode(t,e),bh.decode.bytes],Kc=(t,e,r=0)=>(bh.encode(t,e,r),e),Wc=t=>bh.encodingLength(t)});var Ya,LR,FR,$c,Th=fe(()=>{h();Lo();Sm();Ya=(t,e)=>{let r=e.byteLength,n=Wc(t),i=n+Wc(r),s=new Uint8Array(i+r);return Kc(t,s,0),Kc(r,s,n),s.set(e,i),new $c(t,r,e,s)},LR=t=>{let e=Vs(t),[r,n]=Sh(e),[i,s]=Sh(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new $c(r,i,o,e)},FR=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&wR(t.bytes,e.bytes),$c=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var OI,xI,DI=fe(()=>{h();Th();OI=({name:t,code:e,encode:r})=>new xI(t,e,r),xI=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Ya(this.code,r):r.then(n=>Ya(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var PI={};Bt(PI,{sha256:()=>IZ,sha512:()=>TZ});var qR,IZ,TZ,VR=fe(()=>{h();DI();qR=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),IZ=OI({name:"sha2-256",code:18,encode:qR("SHA-256")}),TZ=OI({name:"sha2-512",code:19,encode:qR("SHA-512")})});var RI={};Bt(RI,{identity:()=>NZ});var kR,_Z,HR,CZ,NZ,GR=fe(()=>{h();Lo();Th();kR=0,_Z="identity",HR=Vs,CZ=t=>Ya(kR,HR(t)),NZ={code:kR,name:_Z,encode:HR,digest:CZ}});var jR=fe(()=>{h();Lo()});var pbe,mbe,zR=fe(()=>{h();pbe=new TextEncoder,mbe=new TextDecoder});var _m,DZ,PZ,RZ,_h,BZ,QR,KR,Im,Tm,MZ,LZ,FZ,WR=fe(()=>{h();Sm();Th();TI();bI();Lo();_m=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Tm,byteLength:Tm,code:Im,version:Im,multihash:Im,bytes:Im,_baseCache:Tm,asCID:Tm})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==_h)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==BZ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ya(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&FR(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return PZ(r,i,e||rs.encoder);default:return RZ(r,i,e||Qc.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return LZ(/^0\.0/,FZ),!!(e&&(e[KR]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new t(r,n,i,s||QR(r,n,i.bytes))}else if(e!=null&&e[KR]===!0){let{version:r,multihash:n,code:i}=e,s=LR(n);return t.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==_h)throw new Error(`Version 0 CID must use dag-pb (code: ${_h}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=QR(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,_h,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=Vs(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new $c(r.multihashCode,r.digestSize,s,i);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,w]=Sh(e.subarray(r));return r+=w,d},i=n(),s=_h;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,u=n(),a=n(),c=r+a,f=c-o;return{version:i,codec:s,multihashCode:u,digestSize:a,multihashSize:f,size:c}}static parse(e,r){let[n,i]=DZ(e,r),s=t.decode(i);return s._baseCache.set(n,e),s}},DZ=(t,e)=>{switch(t[0]){case"Q":{let r=e||rs;return[rs.prefix,r.decode(`${rs.prefix}${t}`)]}case rs.prefix:{let r=e||rs;return[rs.prefix,r.decode(t)]}case Qc.prefix:{let r=e||Qc;return[Qc.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},PZ=(t,e,r)=>{let{prefix:n}=r;if(n!==rs.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},RZ=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},_h=112,BZ=18,QR=(t,e,r)=>{let n=Wc(t),i=n+Wc(e),s=new Uint8Array(i+r.byteLength);return Kc(t,s,0),Kc(e,s,n),s.set(r,i),s},KR=Symbol.for("@ipld/js-cid/CID"),Im={writable:!1,configurable:!1,enumerable:!0},Tm={writable:!1,enumerable:!1,configurable:!1},MZ="0.0.0-dev",LZ=(t,e)=>{if(t.test(MZ))console.warn(e);else throw new Error(e)},FZ=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var $R=fe(()=>{h();WR();Sm();Lo();DI();Th()});var BI,Cbe,YR=fe(()=>{h();SR();IR();TR();_R();CR();bI();NR();TI();xR();DR();VR();GR();jR();zR();$R();BI={...mI,...yI,...wI,...vI,...AI,...EI,...SI,...II,..._I,...CI},Cbe={...PI,...RI}});function XR(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var JR,MI,UZ,Cm,LI=fe(()=>{h();YR();Am();JR=XR("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),MI=XR("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=jc(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),UZ={utf8:JR,"utf-8":JR,hex:BI.base16,latin1:MI,ascii:MI,binary:MI,...BI},Cm=UZ});function ks(t,e="utf8"){let r=Cm[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var FI=fe(()=>{h();LI()});function ns(t,e="utf8"){let r=Cm[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Mo(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var UI=fe(()=>{h();LI();Eh()});function Ch(t){return Ro(ks(ns(t,Hc),dm))}function Nh(t){return ks(ns(Ai(t),dm),Hc)}function qI(t){let e=ns(wm,Gc),r=ym+ks(Em([e,t]),Gc);return[pm,mm,r].join(gm)}function VI(t){let[e,r,n]=t.split(gm);if(e!==pm||r!==mm)throw new Error('Issuer must be a DID with method "key"');if(n.slice(0,1)!==ym)throw new Error("Issuer must be a key in mulicodec format");let s=ns(n.slice(1),Gc);if(ks(s.slice(0,2),Gc)!==wm)throw new Error('Issuer must be a public key with type "Ed25519"');let u=s.slice(2);if(u.length!==32)throw new Error("Issuer must be a public key with length 32 bytes");return u}function ZR(t){return ks(t,Hc)}function eB(t){return ns(t,Hc)}function kI(t){return ns([Nh(t.header),Nh(t.payload)].join($a),Ah)}function qZ(t){let e=ks(t,Ah).split($a),r=Ch(e[0]),n=Ch(e[1]);return{header:r,payload:n}}function HI(t){return[Nh(t.header),Nh(t.payload),ZR(t.signature)].join($a)}function GI(t){let e=t.split($a),r=Ch(e[0]),n=Ch(e[1]),i=eB(e[2]),s=ns(e.slice(0,2).join($a),Ah);return{header:r,payload:n,signature:i,data:s}}var jI=fe(()=>{h();fI();FI();UI();xc();vm()});function VZ(t=(0,tB.randomBytes)(32)){return Yc.generateKeyPairFromSeed(t)}async function kZ(t,e,r,n,i=(0,rB.fromMiliseconds)(Date.now())){let s={alg:fm,typ:hm},o=qI(n.publicKey),u=i+r,a={iss:o,sub:t,aud:e,iat:i,exp:u},c=kI({header:s,payload:a}),f=Yc.sign(n.secretKey,c);return HI({header:s,payload:a,signature:f})}async function HZ(t){let{header:e,payload:r,data:n,signature:i}=GI(t);if(e.alg!==fm||e.typ!==hm)throw new Error("JWT must use EdDSA algorithm");let s=VI(r.iss);return Yc.verify(s,n,i)}var Yc,tB,rB,nB=fe(()=>{h();Yc=pe(dR()),tB=pe(yh()),rB=pe(za());vm();jI()});var iB=fe(()=>{h()});var sB={};Bt(sB,{DATA_ENCODING:()=>Ah,DID_DELIMITER:()=>gm,DID_METHOD:()=>mm,DID_PREFIX:()=>pm,JSON_ENCODING:()=>dm,JWT_DELIMITER:()=>$a,JWT_ENCODING:()=>Hc,JWT_IRIDIUM_ALG:()=>fm,JWT_IRIDIUM_TYP:()=>hm,KEY_PAIR_SEED_LENGTH:()=>pR,MULTICODEC_ED25519_BASE:()=>ym,MULTICODEC_ED25519_ENCODING:()=>Gc,MULTICODEC_ED25519_HEADER:()=>wm,MULTICODEC_ED25519_LENGTH:()=>gR,decodeData:()=>qZ,decodeIss:()=>VI,decodeJSON:()=>Ch,decodeJWT:()=>GI,decodeSig:()=>eB,encodeData:()=>kI,encodeIss:()=>qI,encodeJSON:()=>Nh,encodeJWT:()=>HI,encodeSig:()=>ZR,generateKeyPair:()=>VZ,signJWT:()=>kZ,verifyJWT:()=>HZ});var oB=fe(()=>{h();nB();vm();iB();jI()});var wB=D(qt=>{"use strict";h();var aB=qt&&qt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(qt,"__esModule",{value:!0});qt.getNodeVersion=qt.detectOS=qt.parseUserAgent=qt.browserName=qt.detect=qt.ReactNativeInfo=qt.BotInfo=qt.SearchBotDeviceInfo=qt.NodeInfo=qt.BrowserInfo=void 0;var lB=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();qt.BrowserInfo=lB;var fB=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=S.default.platform}return t}();qt.NodeInfo=fB;var hB=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();qt.SearchBotDeviceInfo=hB;var dB=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();qt.BotInfo=dB;var gB=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();qt.ReactNativeInfo=gB;var GZ=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,jZ=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,uB=3,zZ=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",GZ]],cB=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function QZ(t){return t?zI(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new gB:typeof navigator<"u"?zI(navigator.userAgent):yB()}qt.detect=QZ;function pB(t){return t!==""&&zZ.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function KZ(t){var e=pB(t);return e?e[0]:null}qt.browserName=KZ;function zI(t){var e=pB(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new dB;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<uB&&(i=aB(aB([],i,!0),WZ(uB-i.length),!0)):i=[];var s=i.join("."),o=mB(t),u=jZ.exec(t);return u&&u[1]?new hB(r,s,o,u[1]):new lB(r,s,o)}qt.parseUserAgent=zI;function mB(t){for(var e=0,r=cB.length;e<r;e++){var n=cB[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}qt.detectOS=mB;function yB(){var t=typeof S.default<"u"&&S.default.version;return t?new fB(S.default.version.slice(1)):null}qt.getNodeVersion=yB;function WZ(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var QI=D(Ot=>{"use strict";h();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.getLocalStorage=Ot.getLocalStorageOrThrow=Ot.getCrypto=Ot.getCryptoOrThrow=Ot.getLocation=Ot.getLocationOrThrow=Ot.getNavigator=Ot.getNavigatorOrThrow=Ot.getDocument=Ot.getDocumentOrThrow=Ot.getFromWindowOrThrow=Ot.getFromWindow=void 0;function Ja(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ot.getFromWindow=Ja;function Jc(t){let e=Ja(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ot.getFromWindowOrThrow=Jc;function $Z(){return Jc("document")}Ot.getDocumentOrThrow=$Z;function YZ(){return Ja("document")}Ot.getDocument=YZ;function JZ(){return Jc("navigator")}Ot.getNavigatorOrThrow=JZ;function XZ(){return Ja("navigator")}Ot.getNavigator=XZ;function ZZ(){return Jc("location")}Ot.getLocationOrThrow=ZZ;function eee(){return Ja("location")}Ot.getLocation=eee;function tee(){return Jc("crypto")}Ot.getCryptoOrThrow=tee;function ree(){return Ja("crypto")}Ot.getCrypto=ree;function nee(){return Jc("localStorage")}Ot.getLocalStorageOrThrow=nee;function iee(){return Ja("localStorage")}Ot.getLocalStorage=iee});var AB=D(Nm=>{"use strict";h();Object.defineProperty(Nm,"__esModule",{value:!0});Nm.getWindowMetadata=void 0;var vB=QI();function see(){let t,e;try{t=vB.getDocumentOrThrow(),e=vB.getLocationOrThrow()}catch{return null}function r(){let d=t.getElementsByTagName("link"),w=[];for(let A=0;A<d.length;A++){let T=d[A],x=T.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){let B=T.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let V=e.protocol+"//"+e.host;if(B.indexOf("/")===0)V+=B;else{let U=e.pathname.split("/");U.pop();let Q=U.join("/");V+=Q+"/"+B}w.push(V)}else if(B.indexOf("//")===0){let V=e.protocol+B;w.push(V)}else w.push(B)}}return w}function n(...d){let w=t.getElementsByTagName("meta");for(let A=0;A<w.length;A++){let T=w[A],x=["itemprop","property","name"].map(B=>T.getAttribute(B)).filter(B=>B?d.includes(B):!1);if(x.length&&x){let B=T.getAttribute("content");if(B)return B}}return""}function i(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return n("description","og:description","twitter:description","keywords")}let o=i(),u=s(),a=e.origin,c=r();return{description:u,url:a,icons:c,name:o}}Nm.getWindowMetadata=see});var bB=D((lSe,EB)=>{"use strict";h();EB.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var CB=D((hSe,_B)=>{"use strict";h();var TB="%[a-f0-9]{2}",SB=new RegExp("("+TB+")|([^%]+?)","gi"),IB=new RegExp("("+TB+")+","gi");function KI(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],KI(r),KI(n))}function oee(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(SB)||[],r=1;r<e.length;r++)t=KI(e,r).join(""),e=t.match(SB)||[];return t}}function aee(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=IB.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=oee(r[0]);n!==r[0]&&(e[r[0]]=n)}r=IB.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}_B.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return aee(t)}}});var xB=D((gSe,NB)=>{"use strict";h();NB.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var DB=D((mSe,OB)=>{"use strict";h();OB.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],u=t[o];(i?e.indexOf(o)!==-1:e(o,u,t))&&(r[o]=u)}return r}});var qB=D(nn=>{"use strict";h();var uee=bB(),cee=CB(),RB=xB(),lee=DB(),fee=t=>t==null,WI=Symbol("encodeFragmentIdentifier");function hee(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Zt(e,t),"[",i,"]"].join("")]:[...r,[Zt(e,t),"[",Zt(i,t),"]=",Zt(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Zt(e,t),"[]"].join("")]:[...r,[Zt(e,t),"[]=",Zt(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Zt(e,t),":list="].join("")]:[...r,[Zt(e,t),":list=",Zt(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[Zt(r,t),e,Zt(i,t)].join("")]:[[n,Zt(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,Zt(e,t)]:[...r,[Zt(e,t),"=",Zt(n,t)].join("")]}}function dee(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"comma":case"separator":return(r,n,i)=>{let s=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!s&&Hs(n,t).includes(t.arrayFormatSeparator);n=o?Hs(n,t):n;let u=s||o?n.split(t.arrayFormatSeparator).map(a=>Hs(a,t)):n===null?n:Hs(n,t);i[r]=u};case"bracket-separator":return(r,n,i)=>{let s=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!s){i[r]=n&&Hs(n,t);return}let o=n===null?[]:n.split(t.arrayFormatSeparator).map(u=>Hs(u,t));if(i[r]===void 0){i[r]=o;return}i[r]=[].concat(i[r],o)};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[].concat(i[r],n)}}}function BB(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Zt(t,e){return e.encode?e.strict?uee(t):encodeURIComponent(t):t}function Hs(t,e){return e.decode?cee(t):t}function MB(t){return Array.isArray(t)?t.sort():typeof t=="object"?MB(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function LB(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function gee(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function FB(t){t=LB(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function PB(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function UB(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),BB(e.arrayFormatSeparator);let r=dee(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let[s,o]=RB(e.decode?i.replace(/\+/g," "):i,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:Hs(o,e),r(Hs(s,e),o,n)}for(let i of Object.keys(n)){let s=n[i];if(typeof s=="object"&&s!==null)for(let o of Object.keys(s))s[o]=PB(s[o],e);else n[i]=PB(s,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,s)=>{let o=n[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=MB(o):i[s]=o,i},Object.create(null))}nn.extract=FB;nn.parse=UB;nn.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),BB(e.arrayFormatSeparator);let r=o=>e.skipNull&&fee(t[o])||e.skipEmptyString&&t[o]==="",n=hee(e),i={};for(let o of Object.keys(t))r(o)||(i[o]=t[o]);let s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{let u=t[o];return u===void 0?"":u===null?Zt(o,e):Array.isArray(u)?u.length===0&&e.arrayFormat==="bracket-separator"?Zt(o,e)+"[]":u.reduce(n(o),[]).join("&"):Zt(o,e)+"="+Zt(u,e)}).filter(o=>o.length>0).join("&")};nn.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=RB(t,"#");return Object.assign({url:r.split("?")[0]||"",query:UB(FB(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Hs(n,e)}:{})};nn.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[WI]:!0},e);let r=LB(t.url).split("?")[0]||"",n=nn.extract(t.url),i=nn.parse(n,{sort:!1}),s=Object.assign(i,t.query),o=nn.stringify(s,e);o&&(o=`?${o}`);let u=gee(t.url);return t.fragmentIdentifier&&(u=`#${e[WI]?Zt(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${o}${u}`};nn.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[WI]:!1},r);let{url:n,query:i,fragmentIdentifier:s}=nn.parseUrl(t,r);return nn.stringifyUrl({url:n,query:lee(i,e),fragmentIdentifier:s},r)};nn.exclude=(t,e,r)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return nn.pick(t,n,r)}});var kB=D(xm=>{"use strict";h();Object.defineProperty(xm,"__esModule",{value:!0});var Mr=Uc(),$I=Qn(),pee=20;function mee(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],a=r[7]<<24|r[6]<<16|r[5]<<8|r[4],c=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],A=r[27]<<24|r[26]<<16|r[25]<<8|r[24],T=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],V=e[11]<<24|e[10]<<16|e[9]<<8|e[8],U=e[15]<<24|e[14]<<16|e[13]<<8|e[12],Q=n,L=i,k=s,H=o,q=u,v=a,C=c,P=f,F=d,R=w,l=A,g=T,y=x,E=B,I=V,_=U,M=0;M<pee;M+=2)Q=Q+q|0,y^=Q,y=y>>>16|y<<16,F=F+y|0,q^=F,q=q>>>20|q<<12,L=L+v|0,E^=L,E=E>>>16|E<<16,R=R+E|0,v^=R,v=v>>>20|v<<12,k=k+C|0,I^=k,I=I>>>16|I<<16,l=l+I|0,C^=l,C=C>>>20|C<<12,H=H+P|0,_^=H,_=_>>>16|_<<16,g=g+_|0,P^=g,P=P>>>20|P<<12,k=k+C|0,I^=k,I=I>>>24|I<<8,l=l+I|0,C^=l,C=C>>>25|C<<7,H=H+P|0,_^=H,_=_>>>24|_<<8,g=g+_|0,P^=g,P=P>>>25|P<<7,L=L+v|0,E^=L,E=E>>>24|E<<8,R=R+E|0,v^=R,v=v>>>25|v<<7,Q=Q+q|0,y^=Q,y=y>>>24|y<<8,F=F+y|0,q^=F,q=q>>>25|q<<7,Q=Q+v|0,_^=Q,_=_>>>16|_<<16,l=l+_|0,v^=l,v=v>>>20|v<<12,L=L+C|0,y^=L,y=y>>>16|y<<16,g=g+y|0,C^=g,C=C>>>20|C<<12,k=k+P|0,E^=k,E=E>>>16|E<<16,F=F+E|0,P^=F,P=P>>>20|P<<12,H=H+q|0,I^=H,I=I>>>16|I<<16,R=R+I|0,q^=R,q=q>>>20|q<<12,k=k+P|0,E^=k,E=E>>>24|E<<8,F=F+E|0,P^=F,P=P>>>25|P<<7,H=H+q|0,I^=H,I=I>>>24|I<<8,R=R+I|0,q^=R,q=q>>>25|q<<7,L=L+C|0,y^=L,y=y>>>24|y<<8,g=g+y|0,C^=g,C=C>>>25|C<<7,Q=Q+v|0,_^=Q,_=_>>>24|_<<8,l=l+_|0,v^=l,v=v>>>25|v<<7;Mr.writeUint32LE(Q+n|0,t,0),Mr.writeUint32LE(L+i|0,t,4),Mr.writeUint32LE(k+s|0,t,8),Mr.writeUint32LE(H+o|0,t,12),Mr.writeUint32LE(q+u|0,t,16),Mr.writeUint32LE(v+a|0,t,20),Mr.writeUint32LE(C+c|0,t,24),Mr.writeUint32LE(P+f|0,t,28),Mr.writeUint32LE(F+d|0,t,32),Mr.writeUint32LE(R+w|0,t,36),Mr.writeUint32LE(l+A|0,t,40),Mr.writeUint32LE(g+T|0,t,44),Mr.writeUint32LE(y+x|0,t,48),Mr.writeUint32LE(E+B|0,t,52),Mr.writeUint32LE(I+V|0,t,56),Mr.writeUint32LE(_+U|0,t,60)}function VB(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var u=new Uint8Array(64),a=0;a<r.length;a+=64){mee(u,s,t);for(var c=a;c<a+64&&c<r.length;c++)n[c]=r[c]^u[c-a];wee(s,0,o)}return $I.wipe(u),i===0&&$I.wipe(s),n}xm.streamXOR=VB;function yee(t,e,r,n){return n===void 0&&(n=0),$I.wipe(r),VB(t,e,r,r,n)}xm.stream=yee;function wee(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var Om=D(Xc=>{"use strict";h();Object.defineProperty(Xc,"__esModule",{value:!0});function vee(t,e,r){return~(t-1)&e|t-1&r}Xc.select=vee;function Aee(t,e){return(t|0)-(e|0)-1>>>31&1}Xc.lessOrEqual=Aee;function HB(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Xc.compare=HB;function Eee(t,e){return t.length===0||e.length===0?!1:HB(t,e)!==0}Xc.equal=Eee});var jB=D(Gs=>{"use strict";h();Object.defineProperty(Gs,"__esModule",{value:!0});var bee=Om(),Dm=Qn();Gs.DIGEST_LENGTH=16;var GB=function(){function t(e){this.digestLength=Gs.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var u=e[10]|e[11]<<8;this._r[6]=(o>>>14|u<<2)&8191;var a=e[12]|e[13]<<8;this._r[7]=(u>>>11|a<<5)&8065;var c=e[14]|e[15]<<8;this._r[8]=(a>>>8|c<<8)&8191,this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,s=this._h[0],o=this._h[1],u=this._h[2],a=this._h[3],c=this._h[4],f=this._h[5],d=this._h[6],w=this._h[7],A=this._h[8],T=this._h[9],x=this._r[0],B=this._r[1],V=this._r[2],U=this._r[3],Q=this._r[4],L=this._r[5],k=this._r[6],H=this._r[7],q=this._r[8],v=this._r[9];n>=16;){var C=e[r+0]|e[r+1]<<8;s+=C&8191;var P=e[r+2]|e[r+3]<<8;o+=(C>>>13|P<<3)&8191;var F=e[r+4]|e[r+5]<<8;u+=(P>>>10|F<<6)&8191;var R=e[r+6]|e[r+7]<<8;a+=(F>>>7|R<<9)&8191;var l=e[r+8]|e[r+9]<<8;c+=(R>>>4|l<<12)&8191,f+=l>>>1&8191;var g=e[r+10]|e[r+11]<<8;d+=(l>>>14|g<<2)&8191;var y=e[r+12]|e[r+13]<<8;w+=(g>>>11|y<<5)&8191;var E=e[r+14]|e[r+15]<<8;A+=(y>>>8|E<<8)&8191,T+=E>>>5|i;var I=0,_=I;_+=s*x,_+=o*(5*v),_+=u*(5*q),_+=a*(5*H),_+=c*(5*k),I=_>>>13,_&=8191,_+=f*(5*L),_+=d*(5*Q),_+=w*(5*U),_+=A*(5*V),_+=T*(5*B),I+=_>>>13,_&=8191;var M=I;M+=s*B,M+=o*x,M+=u*(5*v),M+=a*(5*q),M+=c*(5*H),I=M>>>13,M&=8191,M+=f*(5*k),M+=d*(5*L),M+=w*(5*Q),M+=A*(5*U),M+=T*(5*V),I+=M>>>13,M&=8191;var N=I;N+=s*V,N+=o*B,N+=u*x,N+=a*(5*v),N+=c*(5*q),I=N>>>13,N&=8191,N+=f*(5*H),N+=d*(5*k),N+=w*(5*L),N+=A*(5*Q),N+=T*(5*U),I+=N>>>13,N&=8191;var m=I;m+=s*U,m+=o*V,m+=u*B,m+=a*x,m+=c*(5*v),I=m>>>13,m&=8191,m+=f*(5*q),m+=d*(5*H),m+=w*(5*k),m+=A*(5*L),m+=T*(5*Q),I+=m>>>13,m&=8191;var O=I;O+=s*Q,O+=o*U,O+=u*V,O+=a*B,O+=c*x,I=O>>>13,O&=8191,O+=f*(5*v),O+=d*(5*q),O+=w*(5*H),O+=A*(5*k),O+=T*(5*L),I+=O>>>13,O&=8191;var Y=I;Y+=s*L,Y+=o*Q,Y+=u*U,Y+=a*V,Y+=c*B,I=Y>>>13,Y&=8191,Y+=f*x,Y+=d*(5*v),Y+=w*(5*q),Y+=A*(5*H),Y+=T*(5*k),I+=Y>>>13,Y&=8191;var $=I;$+=s*k,$+=o*L,$+=u*Q,$+=a*U,$+=c*V,I=$>>>13,$&=8191,$+=f*B,$+=d*x,$+=w*(5*v),$+=A*(5*q),$+=T*(5*H),I+=$>>>13,$&=8191;var b=I;b+=s*H,b+=o*k,b+=u*L,b+=a*Q,b+=c*U,I=b>>>13,b&=8191,b+=f*V,b+=d*B,b+=w*x,b+=A*(5*v),b+=T*(5*q),I+=b>>>13,b&=8191;var j=I;j+=s*q,j+=o*H,j+=u*k,j+=a*L,j+=c*Q,I=j>>>13,j&=8191,j+=f*U,j+=d*V,j+=w*B,j+=A*x,j+=T*(5*v),I+=j>>>13,j&=8191;var z=I;z+=s*v,z+=o*q,z+=u*H,z+=a*k,z+=c*L,I=z>>>13,z&=8191,z+=f*Q,z+=d*U,z+=w*V,z+=A*B,z+=T*x,I+=z>>>13,z&=8191,I=(I<<2)+I|0,I=I+_|0,_=I&8191,I=I>>>13,M+=I,s=_,o=M,u=N,a=m,c=O,f=Y,d=$,w=b,A=j,T=z,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=u,this._h[3]=a,this._h[4]=c,this._h[5]=f,this._h[6]=d,this._h[7]=w,this._h[8]=A,this._h[9]=T},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,u;if(this._leftover){for(u=this._leftover,this._buffer[u++]=1;u<16;u++)this._buffer[u]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,u=2;u<10;u++)this._h[u]+=i,i=this._h[u]>>>13,this._h[u]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,u=1;u<10;u++)n[u]=this._h[u]+i,i=n[u]>>>13,n[u]&=8191;for(n[9]-=8192,s=(i^1)-1,u=0;u<10;u++)n[u]&=s;for(s=~s,u=0;u<10;u++)this._h[u]=this._h[u]&s|n[u];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,u=1;u<8;u++)o=(this._h[u]+this._pad[u]|0)+(o>>>16)|0,this._h[u]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Dm.wipe(this._buffer),Dm.wipe(this._r),Dm.wipe(this._h),Dm.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();Gs.Poly1305=GB;function See(t,e){var r=new GB(t);r.update(e);var n=r.digest();return r.clean(),n}Gs.oneTimeAuth=See;function Iee(t,e){return t.length!==Gs.DIGEST_LENGTH||e.length!==Gs.DIGEST_LENGTH?!1:bee.equal(t,e)}Gs.equal=Iee});var KB=D(js=>{"use strict";h();Object.defineProperty(js,"__esModule",{value:!0});var Pm=kB(),Tee=jB(),xh=Qn(),zB=Uc(),_ee=Om();js.KEY_LENGTH=32;js.NONCE_LENGTH=12;js.TAG_LENGTH=16;var QB=new Uint8Array(16),Cee=function(){function t(e){if(this.nonceLength=js.NONCE_LENGTH,this.tagLength=js.TAG_LENGTH,e.length!==js.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Pm.stream(this._key,s,o,4);var u=r.length+this.tagLength,a;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");a=i}else a=new Uint8Array(u);return Pm.streamXOR(this._key,s,r,a,4),this._authenticate(a.subarray(a.length-this.tagLength,a.length),o,a.subarray(0,a.length-this.tagLength),n),xh.wipe(s),a},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Pm.stream(this._key,s,o,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,o,r.subarray(0,r.length-this.tagLength),n),!_ee.equal(u,r.subarray(r.length-this.tagLength,r.length)))return null;var a=r.length-this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return Pm.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),c,4),xh.wipe(s),c},t.prototype.clean=function(){return xh.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new Tee.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(QB.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(QB.subarray(n.length%16));var o=new Uint8Array(8);i&&zB.writeUint64LE(i.length,o),s.update(o),zB.writeUint64LE(n.length,o),s.update(o);for(var u=s.digest(),a=0;a<u.length;a++)e[a]=u[a];s.clean(),xh.wipe(u),xh.wipe(o)},t}();js.ChaCha20Poly1305=Cee});var WB=D(YI=>{"use strict";h();Object.defineProperty(YI,"__esModule",{value:!0});function Nee(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}YI.isSerializableHash=Nee});var YB=D(Oh=>{"use strict";h();Object.defineProperty(Oh,"__esModule",{value:!0});var is=WB(),xee=Om(),Oee=Qn(),$B=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),is.isSerializableHash(this._inner)&&is.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Oee.wipe(n)}return t.prototype.reset=function(){if(!is.isSerializableHash(this._inner)||!is.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){is.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),is.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!is.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!is.isSerializableHash(this._inner)||!is.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!is.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Oh.HMAC=$B;function Dee(t,e,r){var n=new $B(t,e);n.update(r);var i=n.digest();return n.clean(),i}Oh.hmac=Dee;Oh.equal=xee.equal});var ZB=D(JI=>{"use strict";h();Object.defineProperty(JI,"__esModule",{value:!0});var JB=YB(),XB=Qn(),Pee=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=JB.hmac(this._hash,n,r);this._hmac=new JB.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),XB.wipe(this._buffer),XB.wipe(this._counter),this._bufpos=0},t}();JI.HKDF=Pee});var tM=D(Uo=>{"use strict";h();Object.defineProperty(Uo,"__esModule",{value:!0});var Bm=Uc(),Rm=Qn();Uo.DIGEST_LENGTH=32;Uo.BLOCK_SIZE=64;var eM=function(){function t(){this.digestLength=Uo.DIGEST_LENGTH,this.blockSize=Uo.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){Rm.wipe(this._buffer),Rm.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(XI(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=XI(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var u=n+1;u<o-8;u++)this._buffer[u]=0;Bm.writeUint32BE(i,this._buffer,o-8),Bm.writeUint32BE(s,this._buffer,o-4),XI(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var u=0;u<this.digestLength/4;u++)Bm.writeUint32BE(this._state[u],e,u*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){Rm.wipe(e.state),e.buffer&&Rm.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Uo.SHA256=eM;var Ree=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function XI(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],u=e[2],a=e[3],c=e[4],f=e[5],d=e[6],w=e[7],A=0;A<16;A++){var T=n+A*4;t[A]=Bm.readUint32BE(r,T)}for(var A=16;A<64;A++){var x=t[A-2],B=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10;x=t[A-15];var V=(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3;t[A]=(B+t[A-7]|0)+(V+t[A-16]|0)}for(var A=0;A<64;A++){var B=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&f^~c&d)|0)+(w+(Ree[A]+t[A]|0)|0)|0,V=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&u^o&u)|0;w=d,d=f,f=c,c=a+B|0,a=u,u=o,o=s,s=B+V|0}e[0]+=s,e[1]+=o,e[2]+=u,e[3]+=a,e[4]+=c,e[5]+=f,e[6]+=d,e[7]+=w,n+=64,i-=64}return n}function Bee(t){var e=new eM;e.update(t);var r=e.digest();return e.clean(),r}Uo.hash=Bee});var sM=D(zt=>{"use strict";h();Object.defineProperty(zt,"__esModule",{value:!0});zt.sharedKey=zt.generateKeyPair=zt.generateKeyPairFromSeed=zt.scalarMultBase=zt.scalarMult=zt.SHARED_KEY_LENGTH=zt.SECRET_KEY_LENGTH=zt.PUBLIC_KEY_LENGTH=void 0;var Mee=yh(),Lee=Qn();zt.PUBLIC_KEY_LENGTH=32;zt.SECRET_KEY_LENGTH=32;zt.SHARED_KEY_LENGTH=32;function ss(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var rM=new Uint8Array(32);rM[0]=9;var Fee=ss([56129,1]);function ZI(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function Dh(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function Uee(t,e){let r=ss(),n=ss();for(let i=0;i<16;i++)n[i]=e[i];ZI(n),ZI(n),ZI(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,Dh(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function qee(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Mm(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function Lm(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function zs(t,e,r){let n,i,s=0,o=0,u=0,a=0,c=0,f=0,d=0,w=0,A=0,T=0,x=0,B=0,V=0,U=0,Q=0,L=0,k=0,H=0,q=0,v=0,C=0,P=0,F=0,R=0,l=0,g=0,y=0,E=0,I=0,_=0,M=0,N=r[0],m=r[1],O=r[2],Y=r[3],$=r[4],b=r[5],j=r[6],z=r[7],W=r[8],ie=r[9],te=r[10],ee=r[11],se=r[12],oe=r[13],J=r[14],ue=r[15];n=e[0],s+=n*N,o+=n*m,u+=n*O,a+=n*Y,c+=n*$,f+=n*b,d+=n*j,w+=n*z,A+=n*W,T+=n*ie,x+=n*te,B+=n*ee,V+=n*se,U+=n*oe,Q+=n*J,L+=n*ue,n=e[1],o+=n*N,u+=n*m,a+=n*O,c+=n*Y,f+=n*$,d+=n*b,w+=n*j,A+=n*z,T+=n*W,x+=n*ie,B+=n*te,V+=n*ee,U+=n*se,Q+=n*oe,L+=n*J,k+=n*ue,n=e[2],u+=n*N,a+=n*m,c+=n*O,f+=n*Y,d+=n*$,w+=n*b,A+=n*j,T+=n*z,x+=n*W,B+=n*ie,V+=n*te,U+=n*ee,Q+=n*se,L+=n*oe,k+=n*J,H+=n*ue,n=e[3],a+=n*N,c+=n*m,f+=n*O,d+=n*Y,w+=n*$,A+=n*b,T+=n*j,x+=n*z,B+=n*W,V+=n*ie,U+=n*te,Q+=n*ee,L+=n*se,k+=n*oe,H+=n*J,q+=n*ue,n=e[4],c+=n*N,f+=n*m,d+=n*O,w+=n*Y,A+=n*$,T+=n*b,x+=n*j,B+=n*z,V+=n*W,U+=n*ie,Q+=n*te,L+=n*ee,k+=n*se,H+=n*oe,q+=n*J,v+=n*ue,n=e[5],f+=n*N,d+=n*m,w+=n*O,A+=n*Y,T+=n*$,x+=n*b,B+=n*j,V+=n*z,U+=n*W,Q+=n*ie,L+=n*te,k+=n*ee,H+=n*se,q+=n*oe,v+=n*J,C+=n*ue,n=e[6],d+=n*N,w+=n*m,A+=n*O,T+=n*Y,x+=n*$,B+=n*b,V+=n*j,U+=n*z,Q+=n*W,L+=n*ie,k+=n*te,H+=n*ee,q+=n*se,v+=n*oe,C+=n*J,P+=n*ue,n=e[7],w+=n*N,A+=n*m,T+=n*O,x+=n*Y,B+=n*$,V+=n*b,U+=n*j,Q+=n*z,L+=n*W,k+=n*ie,H+=n*te,q+=n*ee,v+=n*se,C+=n*oe,P+=n*J,F+=n*ue,n=e[8],A+=n*N,T+=n*m,x+=n*O,B+=n*Y,V+=n*$,U+=n*b,Q+=n*j,L+=n*z,k+=n*W,H+=n*ie,q+=n*te,v+=n*ee,C+=n*se,P+=n*oe,F+=n*J,R+=n*ue,n=e[9],T+=n*N,x+=n*m,B+=n*O,V+=n*Y,U+=n*$,Q+=n*b,L+=n*j,k+=n*z,H+=n*W,q+=n*ie,v+=n*te,C+=n*ee,P+=n*se,F+=n*oe,R+=n*J,l+=n*ue,n=e[10],x+=n*N,B+=n*m,V+=n*O,U+=n*Y,Q+=n*$,L+=n*b,k+=n*j,H+=n*z,q+=n*W,v+=n*ie,C+=n*te,P+=n*ee,F+=n*se,R+=n*oe,l+=n*J,g+=n*ue,n=e[11],B+=n*N,V+=n*m,U+=n*O,Q+=n*Y,L+=n*$,k+=n*b,H+=n*j,q+=n*z,v+=n*W,C+=n*ie,P+=n*te,F+=n*ee,R+=n*se,l+=n*oe,g+=n*J,y+=n*ue,n=e[12],V+=n*N,U+=n*m,Q+=n*O,L+=n*Y,k+=n*$,H+=n*b,q+=n*j,v+=n*z,C+=n*W,P+=n*ie,F+=n*te,R+=n*ee,l+=n*se,g+=n*oe,y+=n*J,E+=n*ue,n=e[13],U+=n*N,Q+=n*m,L+=n*O,k+=n*Y,H+=n*$,q+=n*b,v+=n*j,C+=n*z,P+=n*W,F+=n*ie,R+=n*te,l+=n*ee,g+=n*se,y+=n*oe,E+=n*J,I+=n*ue,n=e[14],Q+=n*N,L+=n*m,k+=n*O,H+=n*Y,q+=n*$,v+=n*b,C+=n*j,P+=n*z,F+=n*W,R+=n*ie,l+=n*te,g+=n*ee,y+=n*se,E+=n*oe,I+=n*J,_+=n*ue,n=e[15],L+=n*N,k+=n*m,H+=n*O,q+=n*Y,v+=n*$,C+=n*b,P+=n*j,F+=n*z,R+=n*W,l+=n*ie,g+=n*te,y+=n*ee,E+=n*se,I+=n*oe,_+=n*J,M+=n*ue,s+=38*k,o+=38*H,u+=38*q,a+=38*v,c+=38*C,f+=38*P,d+=38*F,w+=38*R,A+=38*l,T+=38*g,x+=38*y,B+=38*E,V+=38*I,U+=38*_,Q+=38*M,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=Q+i+65535,i=Math.floor(n/65536),Q=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=U+i+65535,i=Math.floor(n/65536),U=n-i*65536,n=Q+i+65535,i=Math.floor(n/65536),Q=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=u,t[3]=a,t[4]=c,t[5]=f,t[6]=d,t[7]=w,t[8]=A,t[9]=T,t[10]=x,t[11]=B,t[12]=V,t[13]=U,t[14]=Q,t[15]=L}function Ph(t,e){zs(t,e,e)}function Vee(t,e){let r=ss();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)Ph(r,r),n!==2&&n!==4&&zs(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function eT(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=ss(),s=ss(),o=ss(),u=ss(),a=ss(),c=ss();for(let A=0;A<31;A++)r[A]=t[A];r[31]=t[31]&127|64,r[0]&=248,qee(n,e);for(let A=0;A<16;A++)s[A]=n[A];i[0]=u[0]=1;for(let A=254;A>=0;--A){let T=r[A>>>3]>>>(A&7)&1;Dh(i,s,T),Dh(o,u,T),Mm(a,i,o),Lm(i,i,o),Mm(o,s,u),Lm(s,s,u),Ph(u,a),Ph(c,i),zs(i,o,i),zs(o,s,a),Mm(a,i,o),Lm(i,i,o),Ph(s,i),Lm(o,u,c),zs(i,o,Fee),Mm(i,i,u),zs(o,o,i),zs(i,u,c),zs(u,s,n),Ph(s,a),Dh(i,s,T),Dh(o,u,T)}for(let A=0;A<16;A++)n[A+16]=i[A],n[A+32]=o[A],n[A+48]=s[A],n[A+64]=u[A];let f=n.subarray(32),d=n.subarray(16);Vee(f,f),zs(d,d,f);let w=new Uint8Array(32);return Uee(w,d),w}zt.scalarMult=eT;function nM(t){return eT(t,rM)}zt.scalarMultBase=nM;function iM(t){if(t.length!==zt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${zt.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:nM(e),secretKey:e}}zt.generateKeyPairFromSeed=iM;function kee(t){let e=(0,Mee.randomBytes)(32,t),r=iM(e);return(0,Lee.wipe)(e),r}zt.generateKeyPair=kee;function Hee(t,e,r=!1){if(t.length!==zt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==zt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=eT(t,e);if(r){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}zt.sharedKey=Hee});function oM(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var aM=fe(()=>{h()});function uM(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var cM=fe(()=>{h()});function lM(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=jc(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return Mo(r)}var fM=fe(()=>{h();Am();Eh()});var tT={};Bt(tT,{compare:()=>oM,concat:()=>Em,equals:()=>uM,fromString:()=>ns,toString:()=>ks,xor:()=>lM});var rT=fe(()=>{h();aM();fI();cM();UI();FI();fM()});var hM={};Bt(hM,{RELAY_JSONRPC:()=>ete,isPublishMethod:()=>sT,isPublishParams:()=>oT,isPublishRequest:()=>Kee,isSubscribeMethod:()=>nT,isSubscribeParams:()=>iT,isSubscribeRequest:()=>Qee,isSubscriptionMethod:()=>cT,isSubscriptionParams:()=>lT,isSubscriptionRequest:()=>$ee,isUnsubscribeMethod:()=>aT,isUnsubscribeParams:()=>uT,isUnsubscribeRequest:()=>Wee,parsePublishRequest:()=>Jee,parseSubscribeRequest:()=>Yee,parseSubscriptionRequest:()=>Zee,parseUnsubscribeRequest:()=>Xee});function Xa(t,e,r="string"){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function Gee(t,e){let r=!0;return e.forEach(n=>{n in t||(r=!1)}),r}function jee(t,e){return Array.isArray(t)?t.length===e:Object.keys(t).length===e}function zee(t,e){return Array.isArray(t)?t.length>=e:Object.keys(t).length>=e}function Fm(t,e,r){return(r.length?zee(t,e.length):jee(t,e.length))?Gee(t,e):!1}function Um(t,e,r="_"){let n=t.split(r);return n[n.length-1].trim().toLowerCase()===e.trim().toLowerCase()}function Qee(t){return nT(t.method)&&iT(t.params)}function nT(t){return Um(t,"subscribe")}function iT(t){return Fm(t,["topic"],[])}function Kee(t){return sT(t.method)&&oT(t.params)}function sT(t){return Um(t,"publish")}function oT(t){return Fm(t,["message","topic","ttl"],["prompt","tag"])}function Wee(t){return aT(t.method)&&uT(t.params)}function aT(t){return Um(t,"unsubscribe")}function uT(t){return Fm(t,["id","topic"],[])}function $ee(t){return cT(t.method)&&lT(t.params)}function cT(t){return Um(t,"subscription")}function lT(t){return Fm(t,["id","data"],[])}function Yee(t){if(!nT(t.method))throw new Error("JSON-RPC Request has invalid subscribe method");if(!iT(t.params))throw new Error("JSON-RPC Request has invalid subscribe params");let e=t.params;return Xa(e,"topic"),e}function Jee(t){if(!sT(t.method))throw new Error("JSON-RPC Request has invalid publish method");if(!oT(t.params))throw new Error("JSON-RPC Request has invalid publish params");let e=t.params;return Xa(e,"topic"),Xa(e,"message"),Xa(e,"ttl","number"),e}function Xee(t){if(!aT(t.method))throw new Error("JSON-RPC Request has invalid unsubscribe method");if(!uT(t.params))throw new Error("JSON-RPC Request has invalid unsubscribe params");let e=t.params;return Xa(e,"id"),e}function Zee(t){if(!cT(t.method))throw new Error("JSON-RPC Request has invalid subscription method");if(!lT(t.params))throw new Error("JSON-RPC Request has invalid subscription params");let e=t.params;return Xa(e,"id"),Xa(e,"data"),e}var ete,dM=fe(()=>{h();ete={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}});var Qh=D(K=>{"use strict";h();Object.defineProperty(K,"__esModule",{value:!0});var tte=wB(),el=za(),il=QI(),rte=AB(),nte=qB(),KM=KB(),ite=ZB(),WM=yh(),FT=tM(),ste=sM(),Vt=(rT(),_e(tT)),ote=(dM(),_e(hM));function $M(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var Km=$M(nte),YM=$M(ste),ty=":";function JM(t){let[e,r]=t.split(ty);return{namespace:e,reference:r}}function XM(t){let{namespace:e,reference:r}=t;return[e,r].join(ty)}function UT(t){let[e,r,n]=t.split(ty);return{namespace:e,reference:r,address:n}}function ZM(t){let{namespace:e,reference:r,address:n}=t;return[e,r,n].join(ty)}function qT(t,e){let r=[];return t.forEach(n=>{let i=e(n);r.includes(i)||r.push(i)}),r}function e4(t){let{address:e}=UT(t);return e}function t4(t){let{namespace:e,reference:r}=UT(t);return XM({namespace:e,reference:r})}function ate(t,e){let{namespace:r,reference:n}=JM(e);return ZM({namespace:r,reference:n,address:t})}function ute(t){return qT(t,e4)}function r4(t){return qT(t,t4)}function cte(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...i.accounts)}),r}function lte(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...r4(i.accounts))}),r}function fte(t,e=[]){let r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;let i=t[n];r.push(...ry(n,i))}),r}function ry(t,e){return t.includes(":")?[t]:e.chains||[]}var hte=Object.defineProperty,gM=Object.getOwnPropertySymbols,dte=Object.prototype.hasOwnProperty,gte=Object.prototype.propertyIsEnumerable,pM=(t,e,r)=>e in t?hte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mM=(t,e)=>{for(var r in e||(e={}))dte.call(e,r)&&pM(t,r,e[r]);if(gM)for(var r of gM(e))gte.call(e,r)&&pM(t,r,e[r]);return t},n4="ReactNative",Gr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Wm=" ",pte=":",i4="/",VT=2,mte=1e3,s4="js";function kT(){return typeof S.default<"u"&&typeof S.default.versions<"u"&&typeof S.default.versions.node<"u"}function al(){return!il.getDocument()&&!!il.getNavigator()&&navigator.product===n4}function Hh(){return!kT()&&!!il.getNavigator()&&!!il.getDocument()}function tu(){return al()?Gr.reactNative:kT()?Gr.node:Hh()?Gr.browser:Gr.unknown}function yte(){var t;try{return al()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function o4(t,e){let r=Km.parse(t);return r=mM(mM({},r),e),t=Km.stringify(r),t}function wte(){return rte.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function vte(t,e){var r;let n=tu(),i={protocol:t,version:e,env:n};return n==="browser"&&(i.host=((r=il.getLocation())==null?void 0:r.host)||"unknown"),i}function a4(){if(tu()===Gr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){let{OS:r,Version:n}=global.Platform;return[r,n].join("-")}let t=tte.detect();if(t===null)return"unknown";let e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function u4(){var t;let e=tu();return e===Gr.browser?[e,((t=il.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function c4(t,e,r){let n=a4(),i=u4();return[[t,e].join("-"),[s4,r].join("-"),n,i].join("/")}function Ate({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:u}){let a=r.split("?"),c=c4(t,e,n),f={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0,origin:u||void 0},d=o4(a[1]||"",f);return a[0]+"?"+d}function Ete(t){let e=(t.match(/^[^:]+(?=:\/\/)/gi)||[])[0],r=typeof e<"u"?t.split("://")[1]:t;return e=e==="wss"?"https":"http",[e,r].join("://")}function bte(t,e,r){if(!t[e]||typeof t[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function l4(t,e=VT){return f4(t.split(i4),e)}function Ste(t){return l4(t).join(Wm)}function Ho(t,e){return t.filter(r=>e.includes(r)).length===t.length}function f4(t,e=VT){return t.slice(Math.max(t.length-e,0))}function Ite(t){return Object.fromEntries(t.entries())}function Tte(t){return new Map(Object.entries(t))}function _te(t,e){let r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}var Cte=t=>t;function h4(t){return t.trim().replace(/^\w/,e=>e.toUpperCase())}function Nte(t){return t.split(Wm).map(e=>h4(e)).join(Wm)}function xte(t=el.FIVE_MINUTES,e){let r=el.toMiliseconds(t||el.FIVE_MINUTES),n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,u)=>{s=setTimeout(()=>{u(new Error(e))},r),n=o,i=u})}}function Ote(t,e,r){return new Promise(async(n,i)=>{let s=setTimeout(()=>i(new Error(r)),e);try{let o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function HT(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Dte(t){return HT("topic",t)}function Pte(t){return HT("id",t)}function Rte(t){let[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Bte(t,e){return el.fromMiliseconds((e||Date.now())+el.toMiliseconds(t))}function Mte(t){return Date.now()>=el.toMiliseconds(t)}function Lte(t,e){return`${t}${e?`:${e}`:""}`}function Js(t=[],e=[]){return[...new Set([...t,...e])]}async function Fte({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;let i=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));let s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=tu();o===Gr.browser?s.startsWith("https://")||s.startsWith("http://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Gr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function Ute(t,e){try{return await t.getItem(e)||(Hh()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}function _T(t,e){return t.filter(r=>e.includes(r))}var d4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qte(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var g4={exports:{}};(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof S.default=="object"&&S.default.versions&&S.default.versions.node;o?i=d4:s&&(i=self);var u=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,a=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),f=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],w=[1,256,65536,16777216],A=[6,1536,393216,100663296],T=[0,8,16,24],x=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],B=[224,256,384,512],V=[128,256],U=["hex","buffer","arrayBuffer","array","digest"],Q={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(b){return Object.prototype.toString.call(b)==="[object Array]"}),a&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(b){return typeof b=="object"&&b.buffer&&b.buffer.constructor===ArrayBuffer});for(var L=function(b,j,z){return function(W){return new O(b,j,b).update(W)[z]()}},k=function(b,j,z){return function(W,ie){return new O(b,j,ie).update(W)[z]()}},H=function(b,j,z){return function(W,ie,te,ee){return g["cshake"+b].update(W,ie,te,ee)[z]()}},q=function(b,j,z){return function(W,ie,te,ee){return g["kmac"+b].update(W,ie,te,ee)[z]()}},v=function(b,j,z,W){for(var ie=0;ie<U.length;++ie){var te=U[ie];b[te]=j(z,W,te)}return b},C=function(b,j){var z=L(b,j,"hex");return z.create=function(){return new O(b,j,b)},z.update=function(W){return z.create().update(W)},v(z,L,b,j)},P=function(b,j){var z=k(b,j,"hex");return z.create=function(W){return new O(b,j,W)},z.update=function(W,ie){return z.create(ie).update(W)},v(z,k,b,j)},F=function(b,j){var z=Q[b],W=H(b,j,"hex");return W.create=function(ie,te,ee){return!te&&!ee?g["shake"+b].create(ie):new O(b,j,ie).bytepad([te,ee],z)},W.update=function(ie,te,ee,se){return W.create(te,ee,se).update(ie)},v(W,H,b,j)},R=function(b,j){var z=Q[b],W=q(b,j,"hex");return W.create=function(ie,te,ee){return new Y(b,j,te).bytepad(["KMAC",ee],z).bytepad([ie],z)},W.update=function(ie,te,ee,se){return W.create(ie,ee,se).update(te)},v(W,q,b,j)},l=[{name:"keccak",padding:w,bits:B,createMethod:C},{name:"sha3",padding:A,bits:B,createMethod:C},{name:"shake",padding:f,bits:V,createMethod:P},{name:"cshake",padding:d,bits:V,createMethod:F},{name:"kmac",padding:d,bits:V,createMethod:R}],g={},y=[],E=0;E<l.length;++E)for(var I=l[E],_=I.bits,M=0;M<_.length;++M){var N=I.name+"_"+_[M];if(y.push(N),g[N]=I.createMethod(_[M],I.padding),I.name!=="sha3"){var m=I.name+_[M];y.push(m),g[m]=g[N]}}function O(b,j,z){this.blocks=[],this.s=[],this.padding=j,this.outputBits=z,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(b<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=z>>5,this.extraBytes=(z&31)>>3;for(var W=0;W<50;++W)this.s[W]=0}O.prototype.update=function(b){if(this.finalized)throw new Error(r);var j,z=typeof b;if(z!=="string"){if(z==="object"){if(b===null)throw new Error(e);if(a&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!Array.isArray(b)&&(!a||!ArrayBuffer.isView(b)))throw new Error(e)}else throw new Error(e);j=!0}for(var W=this.blocks,ie=this.byteCount,te=b.length,ee=this.blockCount,se=0,oe=this.s,J,ue;se<te;){if(this.reset)for(this.reset=!1,W[0]=this.block,J=1;J<ee+1;++J)W[J]=0;if(j)for(J=this.start;se<te&&J<ie;++se)W[J>>2]|=b[se]<<T[J++&3];else for(J=this.start;se<te&&J<ie;++se)ue=b.charCodeAt(se),ue<128?W[J>>2]|=ue<<T[J++&3]:ue<2048?(W[J>>2]|=(192|ue>>6)<<T[J++&3],W[J>>2]|=(128|ue&63)<<T[J++&3]):ue<55296||ue>=57344?(W[J>>2]|=(224|ue>>12)<<T[J++&3],W[J>>2]|=(128|ue>>6&63)<<T[J++&3],W[J>>2]|=(128|ue&63)<<T[J++&3]):(ue=65536+((ue&1023)<<10|b.charCodeAt(++se)&1023),W[J>>2]|=(240|ue>>18)<<T[J++&3],W[J>>2]|=(128|ue>>12&63)<<T[J++&3],W[J>>2]|=(128|ue>>6&63)<<T[J++&3],W[J>>2]|=(128|ue&63)<<T[J++&3]);if(this.lastByteIndex=J,J>=ie){for(this.start=J-ie,this.block=W[ee],J=0;J<ee;++J)oe[J]^=W[J];$(oe),this.reset=!0}else this.start=J}return this},O.prototype.encode=function(b,j){var z=b&255,W=1,ie=[z];for(b=b>>8,z=b&255;z>0;)ie.unshift(z),b=b>>8,z=b&255,++W;return j?ie.push(W):ie.unshift(W),this.update(ie),ie.length},O.prototype.encodeString=function(b){var j,z=typeof b;if(z!=="string"){if(z==="object"){if(b===null)throw new Error(e);if(a&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!Array.isArray(b)&&(!a||!ArrayBuffer.isView(b)))throw new Error(e)}else throw new Error(e);j=!0}var W=0,ie=b.length;if(j)W=ie;else for(var te=0;te<b.length;++te){var ee=b.charCodeAt(te);ee<128?W+=1:ee<2048?W+=2:ee<55296||ee>=57344?W+=3:(ee=65536+((ee&1023)<<10|b.charCodeAt(++te)&1023),W+=4)}return W+=this.encode(W*8),this.update(b),W},O.prototype.bytepad=function(b,j){for(var z=this.encode(j),W=0;W<b.length;++W)z+=this.encodeString(b[W]);var ie=j-z%j,te=[];return te.length=ie,this.update(te),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var b=this.blocks,j=this.lastByteIndex,z=this.blockCount,W=this.s;if(b[j>>2]|=this.padding[j&3],this.lastByteIndex===this.byteCount)for(b[0]=b[z],j=1;j<z+1;++j)b[j]=0;for(b[z-1]|=2147483648,j=0;j<z;++j)W[j]^=b[j];$(W)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var b=this.blockCount,j=this.s,z=this.outputBlocks,W=this.extraBytes,ie=0,te=0,ee="",se;te<z;){for(ie=0;ie<b&&te<z;++ie,++te)se=j[ie],ee+=c[se>>4&15]+c[se&15]+c[se>>12&15]+c[se>>8&15]+c[se>>20&15]+c[se>>16&15]+c[se>>28&15]+c[se>>24&15];te%b===0&&($(j),ie=0)}return W&&(se=j[ie],ee+=c[se>>4&15]+c[se&15],W>1&&(ee+=c[se>>12&15]+c[se>>8&15]),W>2&&(ee+=c[se>>20&15]+c[se>>16&15])),ee},O.prototype.arrayBuffer=function(){this.finalize();var b=this.blockCount,j=this.s,z=this.outputBlocks,W=this.extraBytes,ie=0,te=0,ee=this.outputBits>>3,se;W?se=new ArrayBuffer(z+1<<2):se=new ArrayBuffer(ee);for(var oe=new Uint32Array(se);te<z;){for(ie=0;ie<b&&te<z;++ie,++te)oe[te]=j[ie];te%b===0&&$(j)}return W&&(oe[ie]=j[ie],se=se.slice(0,ee)),se},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var b=this.blockCount,j=this.s,z=this.outputBlocks,W=this.extraBytes,ie=0,te=0,ee=[],se,oe;te<z;){for(ie=0;ie<b&&te<z;++ie,++te)se=te<<2,oe=j[ie],ee[se]=oe&255,ee[se+1]=oe>>8&255,ee[se+2]=oe>>16&255,ee[se+3]=oe>>24&255;te%b===0&&$(j)}return W&&(se=te<<2,oe=j[ie],ee[se]=oe&255,W>1&&(ee[se+1]=oe>>8&255),W>2&&(ee[se+2]=oe>>16&255)),ee};function Y(b,j,z){O.call(this,b,j,z)}Y.prototype=new O,Y.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var $=function(b){var j,z,W,ie,te,ee,se,oe,J,ue,wt,vt,Ni,At,Et,xi,bt,St,Oi,It,Tt,Di,Qe,Ke,ri,We,$e,ni,Ye,Je,ii,Xe,Ze,si,et,tt,oi,rt,nt,ai,it,st,ui,ot,at,ci,ut,ct,li,lt,ft,fi,ht,dt,hi,gt,pt,vn,An,En,bn,Sn,In;for(W=0;W<48;W+=2)ie=b[0]^b[10]^b[20]^b[30]^b[40],te=b[1]^b[11]^b[21]^b[31]^b[41],ee=b[2]^b[12]^b[22]^b[32]^b[42],se=b[3]^b[13]^b[23]^b[33]^b[43],oe=b[4]^b[14]^b[24]^b[34]^b[44],J=b[5]^b[15]^b[25]^b[35]^b[45],ue=b[6]^b[16]^b[26]^b[36]^b[46],wt=b[7]^b[17]^b[27]^b[37]^b[47],vt=b[8]^b[18]^b[28]^b[38]^b[48],Ni=b[9]^b[19]^b[29]^b[39]^b[49],j=vt^(ee<<1|se>>>31),z=Ni^(se<<1|ee>>>31),b[0]^=j,b[1]^=z,b[10]^=j,b[11]^=z,b[20]^=j,b[21]^=z,b[30]^=j,b[31]^=z,b[40]^=j,b[41]^=z,j=ie^(oe<<1|J>>>31),z=te^(J<<1|oe>>>31),b[2]^=j,b[3]^=z,b[12]^=j,b[13]^=z,b[22]^=j,b[23]^=z,b[32]^=j,b[33]^=z,b[42]^=j,b[43]^=z,j=ee^(ue<<1|wt>>>31),z=se^(wt<<1|ue>>>31),b[4]^=j,b[5]^=z,b[14]^=j,b[15]^=z,b[24]^=j,b[25]^=z,b[34]^=j,b[35]^=z,b[44]^=j,b[45]^=z,j=oe^(vt<<1|Ni>>>31),z=J^(Ni<<1|vt>>>31),b[6]^=j,b[7]^=z,b[16]^=j,b[17]^=z,b[26]^=j,b[27]^=z,b[36]^=j,b[37]^=z,b[46]^=j,b[47]^=z,j=ue^(ie<<1|te>>>31),z=wt^(te<<1|ie>>>31),b[8]^=j,b[9]^=z,b[18]^=j,b[19]^=z,b[28]^=j,b[29]^=z,b[38]^=j,b[39]^=z,b[48]^=j,b[49]^=z,At=b[0],Et=b[1],ci=b[11]<<4|b[10]>>>28,ut=b[10]<<4|b[11]>>>28,ni=b[20]<<3|b[21]>>>29,Ye=b[21]<<3|b[20]>>>29,En=b[31]<<9|b[30]>>>23,bn=b[30]<<9|b[31]>>>23,st=b[40]<<18|b[41]>>>14,ui=b[41]<<18|b[40]>>>14,si=b[2]<<1|b[3]>>>31,et=b[3]<<1|b[2]>>>31,xi=b[13]<<12|b[12]>>>20,bt=b[12]<<12|b[13]>>>20,ct=b[22]<<10|b[23]>>>22,li=b[23]<<10|b[22]>>>22,Je=b[33]<<13|b[32]>>>19,ii=b[32]<<13|b[33]>>>19,Sn=b[42]<<2|b[43]>>>30,In=b[43]<<2|b[42]>>>30,dt=b[5]<<30|b[4]>>>2,hi=b[4]<<30|b[5]>>>2,tt=b[14]<<6|b[15]>>>26,oi=b[15]<<6|b[14]>>>26,St=b[25]<<11|b[24]>>>21,Oi=b[24]<<11|b[25]>>>21,lt=b[34]<<15|b[35]>>>17,ft=b[35]<<15|b[34]>>>17,Xe=b[45]<<29|b[44]>>>3,Ze=b[44]<<29|b[45]>>>3,Ke=b[6]<<28|b[7]>>>4,ri=b[7]<<28|b[6]>>>4,gt=b[17]<<23|b[16]>>>9,pt=b[16]<<23|b[17]>>>9,rt=b[26]<<25|b[27]>>>7,nt=b[27]<<25|b[26]>>>7,It=b[36]<<21|b[37]>>>11,Tt=b[37]<<21|b[36]>>>11,fi=b[47]<<24|b[46]>>>8,ht=b[46]<<24|b[47]>>>8,ot=b[8]<<27|b[9]>>>5,at=b[9]<<27|b[8]>>>5,We=b[18]<<20|b[19]>>>12,$e=b[19]<<20|b[18]>>>12,vn=b[29]<<7|b[28]>>>25,An=b[28]<<7|b[29]>>>25,ai=b[38]<<8|b[39]>>>24,it=b[39]<<8|b[38]>>>24,Di=b[48]<<14|b[49]>>>18,Qe=b[49]<<14|b[48]>>>18,b[0]=At^~xi&St,b[1]=Et^~bt&Oi,b[10]=Ke^~We&ni,b[11]=ri^~$e&Ye,b[20]=si^~tt&rt,b[21]=et^~oi&nt,b[30]=ot^~ci&ct,b[31]=at^~ut&li,b[40]=dt^~gt&vn,b[41]=hi^~pt&An,b[2]=xi^~St&It,b[3]=bt^~Oi&Tt,b[12]=We^~ni&Je,b[13]=$e^~Ye&ii,b[22]=tt^~rt&ai,b[23]=oi^~nt&it,b[32]=ci^~ct&lt,b[33]=ut^~li&ft,b[42]=gt^~vn&En,b[43]=pt^~An&bn,b[4]=St^~It&Di,b[5]=Oi^~Tt&Qe,b[14]=ni^~Je&Xe,b[15]=Ye^~ii&Ze,b[24]=rt^~ai&st,b[25]=nt^~it&ui,b[34]=ct^~lt&fi,b[35]=li^~ft&ht,b[44]=vn^~En&Sn,b[45]=An^~bn&In,b[6]=It^~Di&At,b[7]=Tt^~Qe&Et,b[16]=Je^~Xe&Ke,b[17]=ii^~Ze&ri,b[26]=ai^~st&si,b[27]=it^~ui&et,b[36]=lt^~fi&ot,b[37]=ft^~ht&at,b[46]=En^~Sn&dt,b[47]=bn^~In&hi,b[8]=Di^~At&xi,b[9]=Qe^~Et&bt,b[18]=Xe^~Ke&We,b[19]=Ze^~ri&$e,b[28]=st^~si&tt,b[29]=ui^~et&oi,b[38]=fi^~ot&ci,b[39]=ht^~at&ut,b[48]=Sn^~dt&gt,b[49]=In^~hi&pt,b[0]^=x[W],b[1]^=x[W+1]};if(u)t.exports=g;else for(E=0;E<y.length;++E)i[y[E]]=g[y[E]]})()})(g4);var Vte=g4.exports,kte="logger/5.7.0",yM=!1,wM=!1,jm={debug:1,default:2,info:2,warning:3,error:4,off:5},vM=jm.default,fT=null;function Hte(){try{let t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken implementation")}catch(t){return t.message}return null}var AM=Hte(),CT;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(CT||(CT={}));var Si;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Si||(Si={}));var EM="0123456789abcdef",kt=class t{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){let n=e.toLowerCase();jm[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(vM>jm[n])&&console.log.apply(console,r)}debug(...e){this._log(t.levels.DEBUG,e)}info(...e){this._log(t.levels.INFO,e)}warn(...e){this._log(t.levels.WARNING,e)}makeError(e,r,n){if(wM)return this.makeError("censored error",r,{});r||(r=t.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.keys(n).forEach(a=>{let c=n[a];try{if(c instanceof Uint8Array){let f="";for(let d=0;d<c.length;d++)f+=EM[c[d]>>4],f+=EM[c[d]&15];i.push(a+"=Uint8Array(0x"+f+")")}else i.push(a+"="+JSON.stringify(c))}catch{i.push(a+"="+JSON.stringify(n[a].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);let s=e,o="";switch(r){case Si.NUMERIC_FAULT:{o="NUMERIC_FAULT";let a=e;switch(a){case"overflow":case"underflow":case"division-by-zero":o+="-"+a;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Si.CALL_EXCEPTION:case Si.INSUFFICIENT_FUNDS:case Si.MISSING_NEW:case Si.NONCE_EXPIRED:case Si.REPLACEMENT_UNDERPRICED:case Si.TRANSACTION_REPLACED:case Si.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");let u=new Error(e);return u.reason=s,u.code=r,Object.keys(n).forEach(function(a){u[a]=n[a]}),u}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){AM&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:AM})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return fT||(fT=new t(kte)),fT}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yM){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}wM=!!e,yM=!!r}static setLogLevel(e){let r=jm[e.toLowerCase()];if(r==null){t.globalLogger().warn("invalid log level - "+e);return}vM=r}static from(e){return new t(e)}};kt.errors=Si,kt.levels=CT;var Gte="bytes/5.7.0",er=new kt(Gte);function p4(t){return!!t.toHexString}function tl(t){return t.slice||(t.slice=function(){let e=Array.prototype.slice.call(arguments);return tl(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function jte(t){return gn(t)&&!(t.length%2)||ul(t)}function bM(t){return typeof t=="number"&&t==t&&t%1===0}function ul(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!bM(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){let r=t[e];if(!bM(r)||r<0||r>=256)return!1}return!0}function Qt(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid arrayify value");let r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),tl(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),p4(t)&&(t=t.toHexString()),gn(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":er.throwArgumentError("hex data is odd-length","value",t));let n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return tl(new Uint8Array(n))}return ul(t)?tl(new Uint8Array(t)):er.throwArgumentError("invalid arrayify value","value",t)}function zte(t){let e=t.map(i=>Qt(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),tl(n)}function Qte(t,e){t=Qt(t),t.length>e&&er.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(e);return r.set(t,e-t.length),tl(r)}function gn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}var hT="0123456789abcdef";function kr(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=hT[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),p4(t))return t.toHexString();if(gn(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":er.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(ul(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=hT[(i&240)>>4]+hT[i&15]}return r}return er.throwArgumentError("invalid hexlify value","value",t)}function Kte(t){if(typeof t!="string")t=kr(t);else if(!gn(t)||t.length%2)return null;return(t.length-2)/2}function SM(t,e,r){return typeof t!="string"?t=kr(t):(!gn(t)||t.length%2)&&er.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function fs(t,e){for(typeof t!="string"?t=kr(t):gn(t)||er.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&er.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function m4(t){let e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(jte(t)){let r=Qt(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=kr(r.slice(0,32)),e.s=kr(r.slice(32,64))):r.length===65?(e.r=kr(r.slice(0,32)),e.s=kr(r.slice(32,64)),e.v=r[64]):er.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:er.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=kr(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){let i=Qte(Qt(e._vs),32);e._vs=kr(i);let s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&er.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;let o=kr(i);e.s==null?e.s=o:e.s!==o&&er.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?er.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{let i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&er.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!gn(e.r)?er.throwArgumentError("signature missing or invalid r","signature",t):e.r=fs(e.r,32),e.s==null||!gn(e.s)?er.throwArgumentError("signature missing or invalid s","signature",t):e.s=fs(e.s,32);let r=Qt(e.s);r[0]>=128&&er.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);let n=kr(r);e._vs&&(gn(e._vs)||er.throwArgumentError("signature invalid _vs","signature",t),e._vs=fs(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&er.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function GT(t){return"0x"+Vte.keccak_256(Qt(t))}var y4={exports:{}},Wte={},$te=Object.freeze({__proto__:null,default:Wte}),Yte=qte($te);(function(t){(function(e,r){function n(l,g){if(!l)throw new Error(g||"Assertion failed")}function i(l,g){l.super_=g;var y=function(){};y.prototype=g.prototype,l.prototype=new y,l.prototype.constructor=l}function s(l,g,y){if(s.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((g==="le"||g==="be")&&(y=g,g=10),this._init(l||0,g||10,y||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Yte.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,g){return l.cmp(g)>0?l:g},s.min=function(l,g){return l.cmp(g)<0?l:g},s.prototype._init=function(l,g,y){if(typeof l=="number")return this._initNumber(l,g,y);if(typeof l=="object")return this._initArray(l,g,y);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),l=l.toString().replace(/\s+/g,"");var E=0;l[0]==="-"&&(E++,this.negative=1),E<l.length&&(g===16?this._parseHex(l,E,y):(this._parseBase(l,g,E),y==="le"&&this._initArray(this.toArray(),g,y)))},s.prototype._initNumber=function(l,g,y){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),g,y)},s.prototype._initArray=function(l,g,y){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var I,_,M=0;if(y==="be")for(E=l.length-1,I=0;E>=0;E-=3)_=l[E]|l[E-1]<<8|l[E-2]<<16,this.words[I]|=_<<M&67108863,this.words[I+1]=_>>>26-M&67108863,M+=24,M>=26&&(M-=26,I++);else if(y==="le")for(E=0,I=0;E<l.length;E+=3)_=l[E]|l[E+1]<<8|l[E+2]<<16,this.words[I]|=_<<M&67108863,this.words[I+1]=_>>>26-M&67108863,M+=24,M>=26&&(M-=26,I++);return this._strip()};function u(l,g){var y=l.charCodeAt(g);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;n(!1,"Invalid character in "+l)}function a(l,g,y){var E=u(l,y);return y-1>=g&&(E|=u(l,y-1)<<4),E}s.prototype._parseHex=function(l,g,y){this.length=Math.ceil((l.length-g)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var I=0,_=0,M;if(y==="be")for(E=l.length-1;E>=g;E-=2)M=a(l,g,E)<<I,this.words[_]|=M&67108863,I>=18?(I-=18,_+=1,this.words[_]|=M>>>26):I+=8;else{var N=l.length-g;for(E=N%2===0?g+1:g;E<l.length;E+=2)M=a(l,g,E)<<I,this.words[_]|=M&67108863,I>=18?(I-=18,_+=1,this.words[_]|=M>>>26):I+=8}this._strip()};function c(l,g,y,E){for(var I=0,_=0,M=Math.min(l.length,y),N=g;N<M;N++){var m=l.charCodeAt(N)-48;I*=E,m>=49?_=m-49+10:m>=17?_=m-17+10:_=m,n(m>=0&&_<E,"Invalid character"),I+=_}return I}s.prototype._parseBase=function(l,g,y){this.words=[0],this.length=1;for(var E=0,I=1;I<=67108863;I*=g)E++;E--,I=I/g|0;for(var _=l.length-y,M=_%E,N=Math.min(_,_-M)+y,m=0,O=y;O<N;O+=E)m=c(l,O,O+E,g),this.imuln(I),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(M!==0){var Y=1;for(m=c(l,O,l.length,g),O=0;O<M;O++)Y*=g;this.imuln(Y),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var g=0;g<this.length;g++)l.words[g]=this.words[g];l.length=this.length,l.negative=this.negative,l.red=this.red};function f(l,g){l.words=g.words,l.length=g.length,l.negative=g.negative,l.red=g.red}if(s.prototype._move=function(l){f(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,g){l=l||10,g=g|0||1;var y;if(l===16||l==="hex"){y="";for(var E=0,I=0,_=0;_<this.length;_++){var M=this.words[_],N=((M<<E|I)&16777215).toString(16);I=M>>>24-E&16777215,E+=2,E>=26&&(E-=26,_--),I!==0||_!==this.length-1?y=w[6-N.length]+N+y:y=N+y}for(I!==0&&(y=I.toString(16)+y);y.length%g!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(l===(l|0)&&l>=2&&l<=36){var m=A[l],O=T[l];y="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var $=Y.modrn(O).toString(l);Y=Y.idivn(O),Y.isZero()?y=$+y:y=w[m-$.length]+$+y}for(this.isZero()&&(y="0"+y);y.length%g!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(l,g){return this.toArrayLike(o,l,g)}),s.prototype.toArray=function(l,g){return this.toArrayLike(Array,l,g)};var x=function(l,g){return l.allocUnsafe?l.allocUnsafe(g):new l(g)};s.prototype.toArrayLike=function(l,g,y){this._strip();var E=this.byteLength(),I=y||Math.max(1,E);n(E<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var _=x(l,I),M=g==="le"?"LE":"BE";return this["_toArrayLike"+M](_,E),_},s.prototype._toArrayLikeLE=function(l,g){for(var y=0,E=0,I=0,_=0;I<this.length;I++){var M=this.words[I]<<_|E;l[y++]=M&255,y<l.length&&(l[y++]=M>>8&255),y<l.length&&(l[y++]=M>>16&255),_===6?(y<l.length&&(l[y++]=M>>24&255),E=0,_=0):(E=M>>>24,_+=2)}if(y<l.length)for(l[y++]=E;y<l.length;)l[y++]=0},s.prototype._toArrayLikeBE=function(l,g){for(var y=l.length-1,E=0,I=0,_=0;I<this.length;I++){var M=this.words[I]<<_|E;l[y--]=M&255,y>=0&&(l[y--]=M>>8&255),y>=0&&(l[y--]=M>>16&255),_===6?(y>=0&&(l[y--]=M>>24&255),E=0,_=0):(E=M>>>24,_+=2)}if(y>=0)for(l[y--]=E;y>=0;)l[y--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var g=l,y=0;return g>=4096&&(y+=13,g>>>=13),g>=64&&(y+=7,g>>>=7),g>=8&&(y+=4,g>>>=4),g>=2&&(y+=2,g>>>=2),y+g},s.prototype._zeroBits=function(l){if(l===0)return 26;var g=l,y=0;return g&8191||(y+=13,g>>>=13),g&127||(y+=7,g>>>=7),g&15||(y+=4,g>>>=4),g&3||(y+=2,g>>>=2),g&1||y++,y},s.prototype.bitLength=function(){var l=this.words[this.length-1],g=this._countBits(l);return(this.length-1)*26+g};function B(l){for(var g=new Array(l.bitLength()),y=0;y<g.length;y++){var E=y/26|0,I=y%26;g[y]=l.words[E]>>>I&1}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,g=0;g<this.length;g++){var y=this._zeroBits(this.words[g]);if(l+=y,y!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]|l.words[g];return this._strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var g;this.length>l.length?g=l:g=this;for(var y=0;y<g.length;y++)this.words[y]=this.words[y]&l.words[y];return this.length=g.length,this._strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var g,y;this.length>l.length?(g=this,y=l):(g=l,y=this);for(var E=0;E<y.length;E++)this.words[E]=g.words[E]^y.words[E];if(this!==g)for(;E<g.length;E++)this.words[E]=g.words[E];return this.length=g.length,this._strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var g=Math.ceil(l/26)|0,y=l%26;this._expand(g),y>0&&g--;for(var E=0;E<g;E++)this.words[E]=~this.words[E]&67108863;return y>0&&(this.words[E]=~this.words[E]&67108863>>26-y),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,g){n(typeof l=="number"&&l>=0);var y=l/26|0,E=l%26;return this._expand(y+1),g?this.words[y]=this.words[y]|1<<E:this.words[y]=this.words[y]&~(1<<E),this._strip()},s.prototype.iadd=function(l){var g;if(this.negative!==0&&l.negative===0)return this.negative=0,g=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,g=this.isub(l),l.negative=1,g._normSign();var y,E;this.length>l.length?(y=this,E=l):(y=l,E=this);for(var I=0,_=0;_<E.length;_++)g=(y.words[_]|0)+(E.words[_]|0)+I,this.words[_]=g&67108863,I=g>>>26;for(;I!==0&&_<y.length;_++)g=(y.words[_]|0)+I,this.words[_]=g&67108863,I=g>>>26;if(this.length=y.length,I!==0)this.words[this.length]=I,this.length++;else if(y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this},s.prototype.add=function(l){var g;return l.negative!==0&&this.negative===0?(l.negative=0,g=this.sub(l),l.negative^=1,g):l.negative===0&&this.negative!==0?(this.negative=0,g=l.sub(this),this.negative=1,g):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var g=this.iadd(l);return l.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var y=this.cmp(l);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,I;y>0?(E=this,I=l):(E=l,I=this);for(var _=0,M=0;M<I.length;M++)g=(E.words[M]|0)-(I.words[M]|0)+_,_=g>>26,this.words[M]=g&67108863;for(;_!==0&&M<E.length;M++)g=(E.words[M]|0)+_,_=g>>26,this.words[M]=g&67108863;if(_===0&&M<E.length&&E!==this)for(;M<E.length;M++)this.words[M]=E.words[M];return this.length=Math.max(this.length,M),E!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function V(l,g,y){y.negative=g.negative^l.negative;var E=l.length+g.length|0;y.length=E,E=E-1|0;var I=l.words[0]|0,_=g.words[0]|0,M=I*_,N=M&67108863,m=M/67108864|0;y.words[0]=N;for(var O=1;O<E;O++){for(var Y=m>>>26,$=m&67108863,b=Math.min(O,g.length-1),j=Math.max(0,O-l.length+1);j<=b;j++){var z=O-j|0;I=l.words[z]|0,_=g.words[j]|0,M=I*_+$,Y+=M/67108864|0,$=M&67108863}y.words[O]=$|0,m=Y|0}return m!==0?y.words[O]=m|0:y.length--,y._strip()}var U=function(l,g,y){var E=l.words,I=g.words,_=y.words,M=0,N,m,O,Y=E[0]|0,$=Y&8191,b=Y>>>13,j=E[1]|0,z=j&8191,W=j>>>13,ie=E[2]|0,te=ie&8191,ee=ie>>>13,se=E[3]|0,oe=se&8191,J=se>>>13,ue=E[4]|0,wt=ue&8191,vt=ue>>>13,Ni=E[5]|0,At=Ni&8191,Et=Ni>>>13,xi=E[6]|0,bt=xi&8191,St=xi>>>13,Oi=E[7]|0,It=Oi&8191,Tt=Oi>>>13,Di=E[8]|0,Qe=Di&8191,Ke=Di>>>13,ri=E[9]|0,We=ri&8191,$e=ri>>>13,ni=I[0]|0,Ye=ni&8191,Je=ni>>>13,ii=I[1]|0,Xe=ii&8191,Ze=ii>>>13,si=I[2]|0,et=si&8191,tt=si>>>13,oi=I[3]|0,rt=oi&8191,nt=oi>>>13,ai=I[4]|0,it=ai&8191,st=ai>>>13,ui=I[5]|0,ot=ui&8191,at=ui>>>13,ci=I[6]|0,ut=ci&8191,ct=ci>>>13,li=I[7]|0,lt=li&8191,ft=li>>>13,fi=I[8]|0,ht=fi&8191,dt=fi>>>13,hi=I[9]|0,gt=hi&8191,pt=hi>>>13;y.negative=l.negative^g.negative,y.length=19,N=Math.imul($,Ye),m=Math.imul($,Je),m=m+Math.imul(b,Ye)|0,O=Math.imul(b,Je);var vn=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(vn>>>26)|0,vn&=67108863,N=Math.imul(z,Ye),m=Math.imul(z,Je),m=m+Math.imul(W,Ye)|0,O=Math.imul(W,Je),N=N+Math.imul($,Xe)|0,m=m+Math.imul($,Ze)|0,m=m+Math.imul(b,Xe)|0,O=O+Math.imul(b,Ze)|0;var An=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(An>>>26)|0,An&=67108863,N=Math.imul(te,Ye),m=Math.imul(te,Je),m=m+Math.imul(ee,Ye)|0,O=Math.imul(ee,Je),N=N+Math.imul(z,Xe)|0,m=m+Math.imul(z,Ze)|0,m=m+Math.imul(W,Xe)|0,O=O+Math.imul(W,Ze)|0,N=N+Math.imul($,et)|0,m=m+Math.imul($,tt)|0,m=m+Math.imul(b,et)|0,O=O+Math.imul(b,tt)|0;var En=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(En>>>26)|0,En&=67108863,N=Math.imul(oe,Ye),m=Math.imul(oe,Je),m=m+Math.imul(J,Ye)|0,O=Math.imul(J,Je),N=N+Math.imul(te,Xe)|0,m=m+Math.imul(te,Ze)|0,m=m+Math.imul(ee,Xe)|0,O=O+Math.imul(ee,Ze)|0,N=N+Math.imul(z,et)|0,m=m+Math.imul(z,tt)|0,m=m+Math.imul(W,et)|0,O=O+Math.imul(W,tt)|0,N=N+Math.imul($,rt)|0,m=m+Math.imul($,nt)|0,m=m+Math.imul(b,rt)|0,O=O+Math.imul(b,nt)|0;var bn=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(bn>>>26)|0,bn&=67108863,N=Math.imul(wt,Ye),m=Math.imul(wt,Je),m=m+Math.imul(vt,Ye)|0,O=Math.imul(vt,Je),N=N+Math.imul(oe,Xe)|0,m=m+Math.imul(oe,Ze)|0,m=m+Math.imul(J,Xe)|0,O=O+Math.imul(J,Ze)|0,N=N+Math.imul(te,et)|0,m=m+Math.imul(te,tt)|0,m=m+Math.imul(ee,et)|0,O=O+Math.imul(ee,tt)|0,N=N+Math.imul(z,rt)|0,m=m+Math.imul(z,nt)|0,m=m+Math.imul(W,rt)|0,O=O+Math.imul(W,nt)|0,N=N+Math.imul($,it)|0,m=m+Math.imul($,st)|0,m=m+Math.imul(b,it)|0,O=O+Math.imul(b,st)|0;var Sn=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,N=Math.imul(At,Ye),m=Math.imul(At,Je),m=m+Math.imul(Et,Ye)|0,O=Math.imul(Et,Je),N=N+Math.imul(wt,Xe)|0,m=m+Math.imul(wt,Ze)|0,m=m+Math.imul(vt,Xe)|0,O=O+Math.imul(vt,Ze)|0,N=N+Math.imul(oe,et)|0,m=m+Math.imul(oe,tt)|0,m=m+Math.imul(J,et)|0,O=O+Math.imul(J,tt)|0,N=N+Math.imul(te,rt)|0,m=m+Math.imul(te,nt)|0,m=m+Math.imul(ee,rt)|0,O=O+Math.imul(ee,nt)|0,N=N+Math.imul(z,it)|0,m=m+Math.imul(z,st)|0,m=m+Math.imul(W,it)|0,O=O+Math.imul(W,st)|0,N=N+Math.imul($,ot)|0,m=m+Math.imul($,at)|0,m=m+Math.imul(b,ot)|0,O=O+Math.imul(b,at)|0;var In=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(In>>>26)|0,In&=67108863,N=Math.imul(bt,Ye),m=Math.imul(bt,Je),m=m+Math.imul(St,Ye)|0,O=Math.imul(St,Je),N=N+Math.imul(At,Xe)|0,m=m+Math.imul(At,Ze)|0,m=m+Math.imul(Et,Xe)|0,O=O+Math.imul(Et,Ze)|0,N=N+Math.imul(wt,et)|0,m=m+Math.imul(wt,tt)|0,m=m+Math.imul(vt,et)|0,O=O+Math.imul(vt,tt)|0,N=N+Math.imul(oe,rt)|0,m=m+Math.imul(oe,nt)|0,m=m+Math.imul(J,rt)|0,O=O+Math.imul(J,nt)|0,N=N+Math.imul(te,it)|0,m=m+Math.imul(te,st)|0,m=m+Math.imul(ee,it)|0,O=O+Math.imul(ee,st)|0,N=N+Math.imul(z,ot)|0,m=m+Math.imul(z,at)|0,m=m+Math.imul(W,ot)|0,O=O+Math.imul(W,at)|0,N=N+Math.imul($,ut)|0,m=m+Math.imul($,ct)|0,m=m+Math.imul(b,ut)|0,O=O+Math.imul(b,ct)|0;var ha=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(ha>>>26)|0,ha&=67108863,N=Math.imul(It,Ye),m=Math.imul(It,Je),m=m+Math.imul(Tt,Ye)|0,O=Math.imul(Tt,Je),N=N+Math.imul(bt,Xe)|0,m=m+Math.imul(bt,Ze)|0,m=m+Math.imul(St,Xe)|0,O=O+Math.imul(St,Ze)|0,N=N+Math.imul(At,et)|0,m=m+Math.imul(At,tt)|0,m=m+Math.imul(Et,et)|0,O=O+Math.imul(Et,tt)|0,N=N+Math.imul(wt,rt)|0,m=m+Math.imul(wt,nt)|0,m=m+Math.imul(vt,rt)|0,O=O+Math.imul(vt,nt)|0,N=N+Math.imul(oe,it)|0,m=m+Math.imul(oe,st)|0,m=m+Math.imul(J,it)|0,O=O+Math.imul(J,st)|0,N=N+Math.imul(te,ot)|0,m=m+Math.imul(te,at)|0,m=m+Math.imul(ee,ot)|0,O=O+Math.imul(ee,at)|0,N=N+Math.imul(z,ut)|0,m=m+Math.imul(z,ct)|0,m=m+Math.imul(W,ut)|0,O=O+Math.imul(W,ct)|0,N=N+Math.imul($,lt)|0,m=m+Math.imul($,ft)|0,m=m+Math.imul(b,lt)|0,O=O+Math.imul(b,ft)|0;var da=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(da>>>26)|0,da&=67108863,N=Math.imul(Qe,Ye),m=Math.imul(Qe,Je),m=m+Math.imul(Ke,Ye)|0,O=Math.imul(Ke,Je),N=N+Math.imul(It,Xe)|0,m=m+Math.imul(It,Ze)|0,m=m+Math.imul(Tt,Xe)|0,O=O+Math.imul(Tt,Ze)|0,N=N+Math.imul(bt,et)|0,m=m+Math.imul(bt,tt)|0,m=m+Math.imul(St,et)|0,O=O+Math.imul(St,tt)|0,N=N+Math.imul(At,rt)|0,m=m+Math.imul(At,nt)|0,m=m+Math.imul(Et,rt)|0,O=O+Math.imul(Et,nt)|0,N=N+Math.imul(wt,it)|0,m=m+Math.imul(wt,st)|0,m=m+Math.imul(vt,it)|0,O=O+Math.imul(vt,st)|0,N=N+Math.imul(oe,ot)|0,m=m+Math.imul(oe,at)|0,m=m+Math.imul(J,ot)|0,O=O+Math.imul(J,at)|0,N=N+Math.imul(te,ut)|0,m=m+Math.imul(te,ct)|0,m=m+Math.imul(ee,ut)|0,O=O+Math.imul(ee,ct)|0,N=N+Math.imul(z,lt)|0,m=m+Math.imul(z,ft)|0,m=m+Math.imul(W,lt)|0,O=O+Math.imul(W,ft)|0,N=N+Math.imul($,ht)|0,m=m+Math.imul($,dt)|0,m=m+Math.imul(b,ht)|0,O=O+Math.imul(b,dt)|0;var ga=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(ga>>>26)|0,ga&=67108863,N=Math.imul(We,Ye),m=Math.imul(We,Je),m=m+Math.imul($e,Ye)|0,O=Math.imul($e,Je),N=N+Math.imul(Qe,Xe)|0,m=m+Math.imul(Qe,Ze)|0,m=m+Math.imul(Ke,Xe)|0,O=O+Math.imul(Ke,Ze)|0,N=N+Math.imul(It,et)|0,m=m+Math.imul(It,tt)|0,m=m+Math.imul(Tt,et)|0,O=O+Math.imul(Tt,tt)|0,N=N+Math.imul(bt,rt)|0,m=m+Math.imul(bt,nt)|0,m=m+Math.imul(St,rt)|0,O=O+Math.imul(St,nt)|0,N=N+Math.imul(At,it)|0,m=m+Math.imul(At,st)|0,m=m+Math.imul(Et,it)|0,O=O+Math.imul(Et,st)|0,N=N+Math.imul(wt,ot)|0,m=m+Math.imul(wt,at)|0,m=m+Math.imul(vt,ot)|0,O=O+Math.imul(vt,at)|0,N=N+Math.imul(oe,ut)|0,m=m+Math.imul(oe,ct)|0,m=m+Math.imul(J,ut)|0,O=O+Math.imul(J,ct)|0,N=N+Math.imul(te,lt)|0,m=m+Math.imul(te,ft)|0,m=m+Math.imul(ee,lt)|0,O=O+Math.imul(ee,ft)|0,N=N+Math.imul(z,ht)|0,m=m+Math.imul(z,dt)|0,m=m+Math.imul(W,ht)|0,O=O+Math.imul(W,dt)|0,N=N+Math.imul($,gt)|0,m=m+Math.imul($,pt)|0,m=m+Math.imul(b,gt)|0,O=O+Math.imul(b,pt)|0;var pa=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(pa>>>26)|0,pa&=67108863,N=Math.imul(We,Xe),m=Math.imul(We,Ze),m=m+Math.imul($e,Xe)|0,O=Math.imul($e,Ze),N=N+Math.imul(Qe,et)|0,m=m+Math.imul(Qe,tt)|0,m=m+Math.imul(Ke,et)|0,O=O+Math.imul(Ke,tt)|0,N=N+Math.imul(It,rt)|0,m=m+Math.imul(It,nt)|0,m=m+Math.imul(Tt,rt)|0,O=O+Math.imul(Tt,nt)|0,N=N+Math.imul(bt,it)|0,m=m+Math.imul(bt,st)|0,m=m+Math.imul(St,it)|0,O=O+Math.imul(St,st)|0,N=N+Math.imul(At,ot)|0,m=m+Math.imul(At,at)|0,m=m+Math.imul(Et,ot)|0,O=O+Math.imul(Et,at)|0,N=N+Math.imul(wt,ut)|0,m=m+Math.imul(wt,ct)|0,m=m+Math.imul(vt,ut)|0,O=O+Math.imul(vt,ct)|0,N=N+Math.imul(oe,lt)|0,m=m+Math.imul(oe,ft)|0,m=m+Math.imul(J,lt)|0,O=O+Math.imul(J,ft)|0,N=N+Math.imul(te,ht)|0,m=m+Math.imul(te,dt)|0,m=m+Math.imul(ee,ht)|0,O=O+Math.imul(ee,dt)|0,N=N+Math.imul(z,gt)|0,m=m+Math.imul(z,pt)|0,m=m+Math.imul(W,gt)|0,O=O+Math.imul(W,pt)|0;var ma=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(ma>>>26)|0,ma&=67108863,N=Math.imul(We,et),m=Math.imul(We,tt),m=m+Math.imul($e,et)|0,O=Math.imul($e,tt),N=N+Math.imul(Qe,rt)|0,m=m+Math.imul(Qe,nt)|0,m=m+Math.imul(Ke,rt)|0,O=O+Math.imul(Ke,nt)|0,N=N+Math.imul(It,it)|0,m=m+Math.imul(It,st)|0,m=m+Math.imul(Tt,it)|0,O=O+Math.imul(Tt,st)|0,N=N+Math.imul(bt,ot)|0,m=m+Math.imul(bt,at)|0,m=m+Math.imul(St,ot)|0,O=O+Math.imul(St,at)|0,N=N+Math.imul(At,ut)|0,m=m+Math.imul(At,ct)|0,m=m+Math.imul(Et,ut)|0,O=O+Math.imul(Et,ct)|0,N=N+Math.imul(wt,lt)|0,m=m+Math.imul(wt,ft)|0,m=m+Math.imul(vt,lt)|0,O=O+Math.imul(vt,ft)|0,N=N+Math.imul(oe,ht)|0,m=m+Math.imul(oe,dt)|0,m=m+Math.imul(J,ht)|0,O=O+Math.imul(J,dt)|0,N=N+Math.imul(te,gt)|0,m=m+Math.imul(te,pt)|0,m=m+Math.imul(ee,gt)|0,O=O+Math.imul(ee,pt)|0;var ya=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(ya>>>26)|0,ya&=67108863,N=Math.imul(We,rt),m=Math.imul(We,nt),m=m+Math.imul($e,rt)|0,O=Math.imul($e,nt),N=N+Math.imul(Qe,it)|0,m=m+Math.imul(Qe,st)|0,m=m+Math.imul(Ke,it)|0,O=O+Math.imul(Ke,st)|0,N=N+Math.imul(It,ot)|0,m=m+Math.imul(It,at)|0,m=m+Math.imul(Tt,ot)|0,O=O+Math.imul(Tt,at)|0,N=N+Math.imul(bt,ut)|0,m=m+Math.imul(bt,ct)|0,m=m+Math.imul(St,ut)|0,O=O+Math.imul(St,ct)|0,N=N+Math.imul(At,lt)|0,m=m+Math.imul(At,ft)|0,m=m+Math.imul(Et,lt)|0,O=O+Math.imul(Et,ft)|0,N=N+Math.imul(wt,ht)|0,m=m+Math.imul(wt,dt)|0,m=m+Math.imul(vt,ht)|0,O=O+Math.imul(vt,dt)|0,N=N+Math.imul(oe,gt)|0,m=m+Math.imul(oe,pt)|0,m=m+Math.imul(J,gt)|0,O=O+Math.imul(J,pt)|0;var wa=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(wa>>>26)|0,wa&=67108863,N=Math.imul(We,it),m=Math.imul(We,st),m=m+Math.imul($e,it)|0,O=Math.imul($e,st),N=N+Math.imul(Qe,ot)|0,m=m+Math.imul(Qe,at)|0,m=m+Math.imul(Ke,ot)|0,O=O+Math.imul(Ke,at)|0,N=N+Math.imul(It,ut)|0,m=m+Math.imul(It,ct)|0,m=m+Math.imul(Tt,ut)|0,O=O+Math.imul(Tt,ct)|0,N=N+Math.imul(bt,lt)|0,m=m+Math.imul(bt,ft)|0,m=m+Math.imul(St,lt)|0,O=O+Math.imul(St,ft)|0,N=N+Math.imul(At,ht)|0,m=m+Math.imul(At,dt)|0,m=m+Math.imul(Et,ht)|0,O=O+Math.imul(Et,dt)|0,N=N+Math.imul(wt,gt)|0,m=m+Math.imul(wt,pt)|0,m=m+Math.imul(vt,gt)|0,O=O+Math.imul(vt,pt)|0;var va=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(va>>>26)|0,va&=67108863,N=Math.imul(We,ot),m=Math.imul(We,at),m=m+Math.imul($e,ot)|0,O=Math.imul($e,at),N=N+Math.imul(Qe,ut)|0,m=m+Math.imul(Qe,ct)|0,m=m+Math.imul(Ke,ut)|0,O=O+Math.imul(Ke,ct)|0,N=N+Math.imul(It,lt)|0,m=m+Math.imul(It,ft)|0,m=m+Math.imul(Tt,lt)|0,O=O+Math.imul(Tt,ft)|0,N=N+Math.imul(bt,ht)|0,m=m+Math.imul(bt,dt)|0,m=m+Math.imul(St,ht)|0,O=O+Math.imul(St,dt)|0,N=N+Math.imul(At,gt)|0,m=m+Math.imul(At,pt)|0,m=m+Math.imul(Et,gt)|0,O=O+Math.imul(Et,pt)|0;var Aa=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,N=Math.imul(We,ut),m=Math.imul(We,ct),m=m+Math.imul($e,ut)|0,O=Math.imul($e,ct),N=N+Math.imul(Qe,lt)|0,m=m+Math.imul(Qe,ft)|0,m=m+Math.imul(Ke,lt)|0,O=O+Math.imul(Ke,ft)|0,N=N+Math.imul(It,ht)|0,m=m+Math.imul(It,dt)|0,m=m+Math.imul(Tt,ht)|0,O=O+Math.imul(Tt,dt)|0,N=N+Math.imul(bt,gt)|0,m=m+Math.imul(bt,pt)|0,m=m+Math.imul(St,gt)|0,O=O+Math.imul(St,pt)|0;var dw=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(dw>>>26)|0,dw&=67108863,N=Math.imul(We,lt),m=Math.imul(We,ft),m=m+Math.imul($e,lt)|0,O=Math.imul($e,ft),N=N+Math.imul(Qe,ht)|0,m=m+Math.imul(Qe,dt)|0,m=m+Math.imul(Ke,ht)|0,O=O+Math.imul(Ke,dt)|0,N=N+Math.imul(It,gt)|0,m=m+Math.imul(It,pt)|0,m=m+Math.imul(Tt,gt)|0,O=O+Math.imul(Tt,pt)|0;var gw=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(gw>>>26)|0,gw&=67108863,N=Math.imul(We,ht),m=Math.imul(We,dt),m=m+Math.imul($e,ht)|0,O=Math.imul($e,dt),N=N+Math.imul(Qe,gt)|0,m=m+Math.imul(Qe,pt)|0,m=m+Math.imul(Ke,gt)|0,O=O+Math.imul(Ke,pt)|0;var pw=(M+N|0)+((m&8191)<<13)|0;M=(O+(m>>>13)|0)+(pw>>>26)|0,pw&=67108863,N=Math.imul(We,gt),m=Math.imul(We,pt),m=m+Math.imul($e,gt)|0,O=Math.imul($e,pt);var mw=(M+N|0)+((m&8191)<<13)|0;return M=(O+(m>>>13)|0)+(mw>>>26)|0,mw&=67108863,_[0]=vn,_[1]=An,_[2]=En,_[3]=bn,_[4]=Sn,_[5]=In,_[6]=ha,_[7]=da,_[8]=ga,_[9]=pa,_[10]=ma,_[11]=ya,_[12]=wa,_[13]=va,_[14]=Aa,_[15]=dw,_[16]=gw,_[17]=pw,_[18]=mw,M!==0&&(_[19]=M,y.length++),y};Math.imul||(U=V);function Q(l,g,y){y.negative=g.negative^l.negative,y.length=l.length+g.length;for(var E=0,I=0,_=0;_<y.length-1;_++){var M=I;I=0;for(var N=E&67108863,m=Math.min(_,g.length-1),O=Math.max(0,_-l.length+1);O<=m;O++){var Y=_-O,$=l.words[Y]|0,b=g.words[O]|0,j=$*b,z=j&67108863;M=M+(j/67108864|0)|0,z=z+N|0,N=z&67108863,M=M+(z>>>26)|0,I+=M>>>26,M&=67108863}y.words[_]=N,E=M,M=I}return E!==0?y.words[_]=E:y.length--,y._strip()}function L(l,g,y){return Q(l,g,y)}s.prototype.mulTo=function(l,g){var y,E=this.length+l.length;return this.length===10&&l.length===10?y=U(this,l,g):E<63?y=V(this,l,g):E<1024?y=Q(this,l,g):y=L(this,l,g),y},s.prototype.mul=function(l){var g=new s(null);return g.words=new Array(this.length+l.length),this.mulTo(l,g)},s.prototype.mulf=function(l){var g=new s(null);return g.words=new Array(this.length+l.length),L(this,l,g)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var g=l<0;g&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var y=0,E=0;E<this.length;E++){var I=(this.words[E]|0)*l,_=(I&67108863)+(y&67108863);y>>=26,y+=I/67108864|0,y+=_>>>26,this.words[E]=_&67108863}return y!==0&&(this.words[E]=y,this.length++),g?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var g=B(l);if(g.length===0)return new s(1);for(var y=this,E=0;E<g.length&&g[E]===0;E++,y=y.sqr());if(++E<g.length)for(var I=y.sqr();E<g.length;E++,I=I.sqr())g[E]!==0&&(y=y.mul(I));return y},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var g=l%26,y=(l-g)/26,E=67108863>>>26-g<<26-g,I;if(g!==0){var _=0;for(I=0;I<this.length;I++){var M=this.words[I]&E,N=(this.words[I]|0)-M<<g;this.words[I]=N|_,_=M>>>26-g}_&&(this.words[I]=_,this.length++)}if(y!==0){for(I=this.length-1;I>=0;I--)this.words[I+y]=this.words[I];for(I=0;I<y;I++)this.words[I]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,g,y){n(typeof l=="number"&&l>=0);var E;g?E=(g-g%26)/26:E=0;var I=l%26,_=Math.min((l-I)/26,this.length),M=67108863^67108863>>>I<<I,N=y;if(E-=_,E=Math.max(0,E),N){for(var m=0;m<_;m++)N.words[m]=this.words[m];N.length=_}if(_!==0)if(this.length>_)for(this.length-=_,m=0;m<this.length;m++)this.words[m]=this.words[m+_];else this.words[0]=0,this.length=1;var O=0;for(m=this.length-1;m>=0&&(O!==0||m>=E);m--){var Y=this.words[m]|0;this.words[m]=O<<26-I|Y>>>I,O=Y&M}return N&&O!==0&&(N.words[N.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,g,y){return n(this.negative===0),this.iushrn(l,g,y)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,y=(l-g)/26,E=1<<g;if(this.length<=y)return!1;var I=this.words[y];return!!(I&E)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,y=(l-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(g!==0&&y++,this.length=Math.min(y,this.length),g!==0){var E=67108863^67108863>>>g<<g;this.words[this.length-1]&=E}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,g,y){var E=l.length+y,I;this._expand(E);var _,M=0;for(I=0;I<l.length;I++){_=(this.words[I+y]|0)+M;var N=(l.words[I]|0)*g;_-=N&67108863,M=(_>>26)-(N/67108864|0),this.words[I+y]=_&67108863}for(;I<this.length-y;I++)_=(this.words[I+y]|0)+M,M=_>>26,this.words[I+y]=_&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,I=0;I<this.length;I++)_=-(this.words[I]|0)+M,M=_>>26,this.words[I]=_&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,g){var y=this.length-l.length,E=this.clone(),I=l,_=I.words[I.length-1]|0,M=this._countBits(_);y=26-M,y!==0&&(I=I.ushln(y),E.iushln(y),_=I.words[I.length-1]|0);var N=E.length-I.length,m;if(g!=="mod"){m=new s(null),m.length=N+1,m.words=new Array(m.length);for(var O=0;O<m.length;O++)m.words[O]=0}var Y=E.clone()._ishlnsubmul(I,1,N);Y.negative===0&&(E=Y,m&&(m.words[N]=1));for(var $=N-1;$>=0;$--){var b=(E.words[I.length+$]|0)*67108864+(E.words[I.length+$-1]|0);for(b=Math.min(b/_|0,67108863),E._ishlnsubmul(I,b,$);E.negative!==0;)b--,E.negative=0,E._ishlnsubmul(I,1,$),E.isZero()||(E.negative^=1);m&&(m.words[$]=b)}return m&&m._strip(),E._strip(),g!=="div"&&y!==0&&E.iushrn(y),{div:m||null,mod:E}},s.prototype.divmod=function(l,g,y){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,I,_;return this.negative!==0&&l.negative===0?(_=this.neg().divmod(l,g),g!=="mod"&&(E=_.div.neg()),g!=="div"&&(I=_.mod.neg(),y&&I.negative!==0&&I.iadd(l)),{div:E,mod:I}):this.negative===0&&l.negative!==0?(_=this.divmod(l.neg(),g),g!=="mod"&&(E=_.div.neg()),{div:E,mod:_.mod}):this.negative&l.negative?(_=this.neg().divmod(l.neg(),g),g!=="div"&&(I=_.mod.neg(),y&&I.negative!==0&&I.isub(l)),{div:_.div,mod:I}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?g==="div"?{div:this.divn(l.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,g)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var g=this.divmod(l);if(g.mod.isZero())return g.div;var y=g.div.negative!==0?g.mod.isub(l):g.mod,E=l.ushrn(1),I=l.andln(1),_=y.cmp(E);return _<0||I===1&&_===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(l){var g=l<0;g&&(l=-l),n(l<=67108863);for(var y=(1<<26)%l,E=0,I=this.length-1;I>=0;I--)E=(y*E+(this.words[I]|0))%l;return g?-E:E},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var g=l<0;g&&(l=-l),n(l<=67108863);for(var y=0,E=this.length-1;E>=0;E--){var I=(this.words[E]|0)+y*67108864;this.words[E]=I/l|0,y=I%l}return this._strip(),g?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var g=this,y=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var E=new s(1),I=new s(0),_=new s(0),M=new s(1),N=0;g.isEven()&&y.isEven();)g.iushrn(1),y.iushrn(1),++N;for(var m=y.clone(),O=g.clone();!g.isZero();){for(var Y=0,$=1;!(g.words[0]&$)&&Y<26;++Y,$<<=1);if(Y>0)for(g.iushrn(Y);Y-- >0;)(E.isOdd()||I.isOdd())&&(E.iadd(m),I.isub(O)),E.iushrn(1),I.iushrn(1);for(var b=0,j=1;!(y.words[0]&j)&&b<26;++b,j<<=1);if(b>0)for(y.iushrn(b);b-- >0;)(_.isOdd()||M.isOdd())&&(_.iadd(m),M.isub(O)),_.iushrn(1),M.iushrn(1);g.cmp(y)>=0?(g.isub(y),E.isub(_),I.isub(M)):(y.isub(g),_.isub(E),M.isub(I))}return{a:_,b:M,gcd:y.iushln(N)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var g=this,y=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var E=new s(1),I=new s(0),_=y.clone();g.cmpn(1)>0&&y.cmpn(1)>0;){for(var M=0,N=1;!(g.words[0]&N)&&M<26;++M,N<<=1);if(M>0)for(g.iushrn(M);M-- >0;)E.isOdd()&&E.iadd(_),E.iushrn(1);for(var m=0,O=1;!(y.words[0]&O)&&m<26;++m,O<<=1);if(m>0)for(y.iushrn(m);m-- >0;)I.isOdd()&&I.iadd(_),I.iushrn(1);g.cmp(y)>=0?(g.isub(y),E.isub(I)):(y.isub(g),I.isub(E))}var Y;return g.cmpn(1)===0?Y=E:Y=I,Y.cmpn(0)<0&&Y.iadd(l),Y},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var g=this.clone(),y=l.clone();g.negative=0,y.negative=0;for(var E=0;g.isEven()&&y.isEven();E++)g.iushrn(1),y.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;y.isEven();)y.iushrn(1);var I=g.cmp(y);if(I<0){var _=g;g=y,y=_}else if(I===0||y.cmpn(1)===0)break;g.isub(y)}while(!0);return y.iushln(E)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var g=l%26,y=(l-g)/26,E=1<<g;if(this.length<=y)return this._expand(y+1),this.words[y]|=E,this;for(var I=E,_=y;I!==0&&_<this.length;_++){var M=this.words[_]|0;M+=I,I=M>>>26,M&=67108863,this.words[_]=M}return I!==0&&(this.words[_]=I,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var g=l<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var y;if(this.length>1)y=1;else{g&&(l=-l),n(l<=67108863,"Number is too big");var E=this.words[0]|0;y=E===l?0:E<l?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var g=this.ucmp(l);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var g=0,y=this.length-1;y>=0;y--){var E=this.words[y]|0,I=l.words[y]|0;if(E!==I){E<I?g=-1:E>I&&(g=1);break}}return g},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new F(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var k={k256:null,p224:null,p192:null,p25519:null};function H(l,g){this.name=l,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},H.prototype.ireduce=function(l){var g=l,y;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),y=g.bitLength();while(y>this.n);var E=y<this.n?-1:g.ucmp(this.p);return E===0?(g.words[0]=0,g.length=1):E>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},H.prototype.split=function(l,g){l.iushrn(this.n,0,g)},H.prototype.imulK=function(l){return l.imul(this.k)};function q(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(q,H),q.prototype.split=function(l,g){for(var y=4194303,E=Math.min(l.length,9),I=0;I<E;I++)g.words[I]=l.words[I];if(g.length=E,l.length<=9){l.words[0]=0,l.length=1;return}var _=l.words[9];for(g.words[g.length++]=_&y,I=10;I<l.length;I++){var M=l.words[I]|0;l.words[I-10]=(M&y)<<4|_>>>22,_=M}_>>>=22,l.words[I-10]=_,_===0&&l.length>10?l.length-=10:l.length-=9},q.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var g=0,y=0;y<l.length;y++){var E=l.words[y]|0;g+=E*977,l.words[y]=g&67108863,g=E*64+(g/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function v(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(v,H);function C(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(C,H);function P(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(P,H),P.prototype.imulK=function(l){for(var g=0,y=0;y<l.length;y++){var E=(l.words[y]|0)*19+g,I=E&67108863;E>>>=26,l.words[y]=I,g=E}return g!==0&&(l.words[l.length++]=g),l},s._prime=function(l){if(k[l])return k[l];var g;if(l==="k256")g=new q;else if(l==="p224")g=new v;else if(l==="p192")g=new C;else if(l==="p25519")g=new P;else throw new Error("Unknown prime "+l);return k[l]=g,g};function F(l){if(typeof l=="string"){var g=s._prime(l);this.m=g.p,this.prime=g}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}F.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},F.prototype._verify2=function(l,g){n((l.negative|g.negative)===0,"red works only with positives"),n(l.red&&l.red===g.red,"red works only with red numbers")},F.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(f(l,l.umod(this.m)._forceRed(this)),l)},F.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},F.prototype.add=function(l,g){this._verify2(l,g);var y=l.add(g);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},F.prototype.iadd=function(l,g){this._verify2(l,g);var y=l.iadd(g);return y.cmp(this.m)>=0&&y.isub(this.m),y},F.prototype.sub=function(l,g){this._verify2(l,g);var y=l.sub(g);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},F.prototype.isub=function(l,g){this._verify2(l,g);var y=l.isub(g);return y.cmpn(0)<0&&y.iadd(this.m),y},F.prototype.shl=function(l,g){return this._verify1(l),this.imod(l.ushln(g))},F.prototype.imul=function(l,g){return this._verify2(l,g),this.imod(l.imul(g))},F.prototype.mul=function(l,g){return this._verify2(l,g),this.imod(l.mul(g))},F.prototype.isqr=function(l){return this.imul(l,l.clone())},F.prototype.sqr=function(l){return this.mul(l,l)},F.prototype.sqrt=function(l){if(l.isZero())return l.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(l,y)}for(var E=this.m.subn(1),I=0;!E.isZero()&&E.andln(1)===0;)I++,E.iushrn(1);n(!E.isZero());var _=new s(1).toRed(this),M=_.redNeg(),N=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,N).cmp(M)!==0;)m.redIAdd(M);for(var O=this.pow(m,E),Y=this.pow(l,E.addn(1).iushrn(1)),$=this.pow(l,E),b=I;$.cmp(_)!==0;){for(var j=$,z=0;j.cmp(_)!==0;z++)j=j.redSqr();n(z<b);var W=this.pow(O,new s(1).iushln(b-z-1));Y=Y.redMul(W),O=W.redSqr(),$=$.redMul(O),b=z}return Y},F.prototype.invm=function(l){var g=l._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},F.prototype.pow=function(l,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return l.clone();var y=4,E=new Array(1<<y);E[0]=new s(1).toRed(this),E[1]=l;for(var I=2;I<E.length;I++)E[I]=this.mul(E[I-1],l);var _=E[0],M=0,N=0,m=g.bitLength()%26;for(m===0&&(m=26),I=g.length-1;I>=0;I--){for(var O=g.words[I],Y=m-1;Y>=0;Y--){var $=O>>Y&1;if(_!==E[0]&&(_=this.sqr(_)),$===0&&M===0){N=0;continue}M<<=1,M|=$,N++,!(N!==y&&(I!==0||Y!==0))&&(_=this.mul(_,E[M]),N=0,M=0)}m=26}return _},F.prototype.convertTo=function(l){var g=l.umod(this.m);return g===l?g.clone():g},F.prototype.convertFrom=function(l){var g=l.clone();return g.red=null,g},s.mont=function(l){return new R(l)};function R(l){F.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(R,F),R.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},R.prototype.convertFrom=function(l){var g=this.imod(l.mul(this.rinv));return g.red=null,g},R.prototype.imul=function(l,g){if(l.isZero()||g.isZero())return l.words[0]=0,l.length=1,l;var y=l.imul(g),E=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(E).iushrn(this.shift),_=I;return I.cmp(this.m)>=0?_=I.isub(this.m):I.cmpn(0)<0&&(_=I.iadd(this.m)),_._forceRed(this)},R.prototype.mul=function(l,g){if(l.isZero()||g.isZero())return new s(0)._forceRed(this);var y=l.mul(g),E=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(E).iushrn(this.shift),_=I;return I.cmp(this.m)>=0?_=I.isub(this.m):I.cmpn(0)<0&&(_=I.iadd(this.m)),_._forceRed(this)},R.prototype.invm=function(l){var g=this.imod(l._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,d4)})(y4);var Se=y4.exports,w4="bignumber/5.7.0",$m=Se.BN,Ks=new kt(w4),dT={},IM=9007199254740991;function Jte(t){return t!=null&&(Cr.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||gn(t)||typeof t=="bigint"||ul(t))}var TM=!1,Cr=class t{constructor(e,r){e!==dT&&Ks.throwError("cannot call constructor directly; use BigNumber.from",kt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return sn(De(this).fromTwos(e))}toTwos(e){return sn(De(this).toTwos(e))}abs(){return this._hex[0]==="-"?t.from(this._hex.substring(1)):this}add(e){return sn(De(this).add(De(e)))}sub(e){return sn(De(this).sub(De(e)))}div(e){return t.from(e).isZero()&&Kn("division-by-zero","div"),sn(De(this).div(De(e)))}mul(e){return sn(De(this).mul(De(e)))}mod(e){let r=De(e);return r.isNeg()&&Kn("division-by-zero","mod"),sn(De(this).umod(r))}pow(e){let r=De(e);return r.isNeg()&&Kn("negative-power","pow"),sn(De(this).pow(r))}and(e){let r=De(e);return(this.isNegative()||r.isNeg())&&Kn("unbound-bitwise-result","and"),sn(De(this).and(r))}or(e){let r=De(e);return(this.isNegative()||r.isNeg())&&Kn("unbound-bitwise-result","or"),sn(De(this).or(r))}xor(e){let r=De(e);return(this.isNegative()||r.isNeg())&&Kn("unbound-bitwise-result","xor"),sn(De(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Kn("negative-width","mask"),sn(De(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Kn("negative-width","shl"),sn(De(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Kn("negative-width","shr"),sn(De(this).shrn(e))}eq(e){return De(this).eq(De(e))}lt(e){return De(this).lt(De(e))}lte(e){return De(this).lte(De(e))}gt(e){return De(this).gt(De(e))}gte(e){return De(this).gte(De(e))}isNegative(){return this._hex[0]==="-"}isZero(){return De(this).isZero()}toNumber(){try{return De(this).toNumber()}catch{Kn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ks.throwError("this platform does not support BigInt",kt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?TM||(TM=!0,Ks.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ks.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",kt.errors.UNEXPECTED_ARGUMENT,{}):Ks.throwError("BigNumber.toString does not accept parameters",kt.errors.UNEXPECTED_ARGUMENT,{})),De(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof t)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new t(dT,Vh(e)):e.match(/^-?[0-9]+$/)?new t(dT,Vh(new $m(e))):Ks.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Kn("underflow","BigNumber.from",e),(e>=IM||e<=-IM)&&Kn("overflow","BigNumber.from",e),t.from(String(e));let r=e;if(typeof r=="bigint")return t.from(r.toString());if(ul(r))return t.from(kr(r));if(r)if(r.toHexString){let n=r.toHexString();if(typeof n=="string")return t.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(gn(n)||n[0]==="-"&&gn(n.substring(1))))return t.from(n)}return Ks.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function Vh(t){if(typeof t!="string")return Vh(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Ks.throwArgumentError("invalid hex","value",t),t=Vh(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function sn(t){return Cr.from(Vh(t))}function De(t){let e=Cr.from(t).toHexString();return e[0]==="-"?new $m("-"+e.substring(3),16):new $m(e.substring(2),16)}function Kn(t,e,r){let n={fault:t,operation:e};return r!=null&&(n.value=r),Ks.throwError(t,kt.errors.NUMERIC_FAULT,n)}function Xte(t){return new $m(t,36).toString(16)}var Hr=new kt(w4),Fh={},v4=Cr.from(0),A4=Cr.from(-1);function E4(t,e,r,n){let i={fault:e,operation:r};return n!==void 0&&(i.value=n),Hr.throwError(t,kt.errors.NUMERIC_FAULT,i)}var Uh="0";for(;Uh.length<256;)Uh+=Uh;function jT(t){if(typeof t!="number")try{t=Cr.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Uh.substring(0,t):Hr.throwArgumentError("invalid decimal size","decimals",t)}function gT(t,e){e==null&&(e=0);let r=jT(e);t=Cr.from(t);let n=t.lt(v4);n&&(t=t.mul(A4));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];let s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Qs(t,e){e==null&&(e=0);let r=jT(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Hr.throwArgumentError("invalid decimal value","value",t);let n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Hr.throwArgumentError("missing value","value",t);let i=t.split(".");i.length>2&&Hr.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&E4("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";let u=Cr.from(s),a=Cr.from(o),c=u.mul(r).add(a);return n&&(c=c.mul(A4)),c}var qh=class t{constructor(e,r,n,i){e!==Fh&&Hr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",kt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=jT(i),Object.freeze(this)}static from(e){if(e instanceof t)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{let s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Hr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){let s=(o,u,a)=>e[o]==null?a:(typeof e[o]!==u&&Hr.throwArgumentError("invalid fixed format ("+o+" not "+u+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Hr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Hr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new t(Fh,r,n,i)}},Ym=class t{constructor(e,r,n,i){e!==Fh&&Hr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",kt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Hr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);let r=Qs(this._value,this.format.decimals),n=Qs(e._value,e.format.decimals);return t.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);let r=Qs(this._value,this.format.decimals),n=Qs(e._value,e.format.decimals);return t.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);let r=Qs(this._value,this.format.decimals),n=Qs(e._value,e.format.decimals);return t.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);let r=Qs(this._value,this.format.decimals),n=Qs(e._value,e.format.decimals);return t.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){let e=this.toString().split(".");e.length===1&&e.push("0");let r=t.from(e[0],this.format),n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(_M.toFormat(r.format))),r}ceiling(){let e=this.toString().split(".");e.length===1&&e.push("0");let r=t.from(e[0],this.format),n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(_M.toFormat(r.format))),r}round(e){e==null&&(e=0);let r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Hr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;let n=t.from("1"+Uh.substring(0,e),this.format),i=Zte.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Hr.throwArgumentError("invalid byte width","width",e);let r=Cr.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return fs(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return t.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!Jte(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),t.fromString(gT(e,r),qh.from(n))}static fromString(e,r){r==null&&(r="fixed");let n=qh.from(r),i=Qs(e,n.decimals);!n.signed&&i.lt(v4)&&E4("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=fs(s,n.width/8));let o=gT(i,n.decimals);return new t(Fh,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");let n=qh.from(r);if(Qt(e).length>n.width/8)throw new Error("overflow");let i=Cr.from(e);n.signed&&(i=i.fromTwos(n.width));let s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=gT(i,n.decimals);return new t(Fh,s,o,n)}static from(e,r){if(typeof e=="string")return t.fromString(e,r);if(ul(e))return t.fromBytes(e,r);try{return t.fromValue(e,0,r)}catch(n){if(n.code!==kt.errors.INVALID_ARGUMENT)throw n}return Hr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}},_M=Ym.from(1),Zte=Ym.from("0.5"),ere="strings/5.7.0",b4=new kt(ere),Jm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Jm||(Jm={}));var rl;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(rl||(rl={}));function tre(t,e,r,n,i){return b4.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function S4(t,e,r,n,i){if(t===rl.BAD_PREFIX||t===rl.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===rl.OVERRUN?r.length-e-1:0}function rre(t,e,r,n,i){return t===rl.OVERLONG?(n.push(i),0):(n.push(65533),S4(t,e,r))}Object.freeze({error:tre,ignore:S4,replace:rre});function pT(t,e=Jm.current){e!=Jm.current&&(b4.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;let s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");let o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return Qt(r)}function nre(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function mT(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function CM(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}CM("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),mT("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),mT("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),mT("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",nre),CM("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");var I4="hash/5.7.0";function ire(t){t=atob(t);let e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Qt(e)}function T4(t,e){e==null&&(e=1);let r=[],n=r.forEach,i=function(s,o){n.call(s,function(u){o>0&&Array.isArray(u)?i(u,o-1):r.push(u)})};return i(t,e),r}function sre(t){let e={};for(let r=0;r<t.length;r++){let n=t[r];e[n[0]]=n[1]}return e}function ore(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let k=1;k<n;k++)s.push(i+=r());let o=r(),u=e;e+=o;let a=0,c=0;function f(){return a==0&&(c=c<<8|t[e++],a=8),c>>--a&1}let d=31,w=Math.pow(2,d),A=w>>>1,T=A>>1,x=w-1,B=0;for(let k=0;k<d;k++)B=B<<1|f();let V=[],U=0,Q=w;for(;;){let k=Math.floor(((B-U+1)*i-1)/Q),H=0,q=n;for(;q-H>1;){let P=H+q>>>1;k<s[P]?q=P:H=P}if(H==0)break;V.push(H);let v=U+Math.floor(Q*s[H]/i),C=U+Math.floor(Q*s[H+1]/i)-1;for(;!((v^C)&A);)B=B<<1&x|f(),v=v<<1&x,C=C<<1&x|1;for(;v&~C&T;)B=B&A|B<<1&x>>>1|f(),v=v<<1^A,C=(C^A)<<1|A|1;U=v,Q=1+C-v}let L=n-4;return V.map(k=>{switch(k-L){case 3:return L+65792+(t[u++]<<16|t[u++]<<8|t[u++]);case 2:return L+256+(t[u++]<<8|t[u++]);case 1:return L+t[u++];default:return k-1}})}function are(t){let e=0;return()=>t[e++]}function ure(t){return are(ore(t))}function cre(t){return t&1?~t>>1:t>>1}function lre(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function NM(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function fre(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=cre(e());return r}function Xm(t,e){let r=NM(t(),t),n=t(),i=NM(n,t),s=lre(n,t);for(let o=0;o<n;o++)for(let u=0;u<s[o];u++)r.push(i[o]+u);return e?r.map(o=>e[o]):r}function hre(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(gre(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(pre(r,t))}return sre(T4(e))}function dre(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function _4(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)fre(t,r).forEach((s,o)=>n[o].push(s));return n}function gre(t,e){let r=1+e(),n=e(),i=dre(e),s=_4(i.length,1+t,e);return T4(s.map((o,u)=>{let a=o[0],c=o.slice(1);return Array(i[u]).fill(void 0).map((f,d)=>{let w=d*n;return[a+d*r,c.map(A=>A+w)]})}))}function pre(t,e){let r=1+e();return _4(r,1+t,e).map(n=>[n[0],n.slice(1)])}function mre(t){let e=Xm(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let c=Xm(t,e);if(c.length==0)break;n.push({set:new Set(c),node:r()})}n.sort((c,f)=>f.set.size-c.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let u=i==1,a=i==2;return{branches:n,valid:s,fe0f:o,save:u,check:a}}}function yre(){return ure(ire("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}var qm=yre();new Set(Xm(qm)),new Set(Xm(qm)),hre(qm),mre(qm),new kt(I4);var wre=new Uint8Array(32);wre.fill(0);var vre=`Ethereum Signed Message:
`;function C4(t){return typeof t=="string"&&(t=pT(t)),GT(zte([pT(vre),pT(String(t.length)),t]))}var Are="rlp/5.7.0";new kt(Are);var Ere="address/5.7.0",Lh=new kt(Ere);function xM(t){gn(t,20)||Lh.throwArgumentError("invalid address","address",t),t=t.toLowerCase();let e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);let n=Qt(GT(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}var bre=9007199254740991;function Sre(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}var zT={};for(let t=0;t<10;t++)zT[String(t)]=String(t);for(let t=0;t<26;t++)zT[String.fromCharCode(65+t)]=String(10+t);var OM=Math.floor(Sre(bre));function Ire(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>zT[n]).join("");for(;e.length>=OM;){let n=e.substring(0,OM);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Tre(t){let e=null;if(typeof t!="string"&&Lh.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=xM(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Lh.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Ire(t)&&Lh.throwArgumentError("bad icap checksum","address",t),e=Xte(t.substring(4));e.length<40;)e="0"+e;e=xM("0x"+e)}else Lh.throwArgumentError("invalid address","address",t);return e}var _re="properties/5.7.0";new kt(_re);function Rh(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}new kt(I4);var Cre=new Uint8Array(32);Cre.fill(0),Cr.from(-1);var Nre=Cr.from(0),xre=Cr.from(1);Cr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),fs(xre.toHexString(),32),fs(Nre.toHexString(),32);var os={},Pe={},Gh=N4;function N4(t,e){if(!t)throw new Error(e||"Assertion failed")}N4.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var NT={exports:{}};typeof Object.create=="function"?NT.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:NT.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};var Ore=Gh,Dre=NT.exports;Pe.inherits=Dre;function Pre(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Rre(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):Pre(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Pe.toArray=Rre;function Bre(t){for(var e="",r=0;r<t.length;r++)e+=O4(t[r].toString(16));return e}Pe.toHex=Bre;function x4(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Pe.htonl=x4;function Mre(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=x4(i)),r+=D4(i.toString(16))}return r}Pe.toHex32=Mre;function O4(t){return t.length===1?"0"+t:t}Pe.zero2=O4;function D4(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Pe.zero8=D4;function Lre(t,e,r,n){var i=r-e;Ore(i%4===0);for(var s=new Array(i/4),o=0,u=e;o<s.length;o++,u+=4){var a;n==="big"?a=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:a=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[o]=a>>>0}return s}Pe.join32=Lre;function Fre(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Pe.split32=Fre;function Ure(t,e){return t>>>e|t<<32-e}Pe.rotr32=Ure;function qre(t,e){return t<<e|t>>>32-e}Pe.rotl32=qre;function Vre(t,e){return t+e>>>0}Pe.sum32=Vre;function kre(t,e,r){return t+e+r>>>0}Pe.sum32_3=kre;function Hre(t,e,r,n){return t+e+r+n>>>0}Pe.sum32_4=Hre;function Gre(t,e,r,n,i){return t+e+r+n+i>>>0}Pe.sum32_5=Gre;function jre(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,u=(o<n?1:0)+r+i;t[e]=u>>>0,t[e+1]=o}Pe.sum64=jre;function zre(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Pe.sum64_hi=zre;function Qre(t,e,r,n){var i=e+n;return i>>>0}Pe.sum64_lo=Qre;function Kre(t,e,r,n,i,s,o,u){var a=0,c=e;c=c+n>>>0,a+=c<e?1:0,c=c+s>>>0,a+=c<s?1:0,c=c+u>>>0,a+=c<u?1:0;var f=t+r+i+o+a;return f>>>0}Pe.sum64_4_hi=Kre;function Wre(t,e,r,n,i,s,o,u){var a=e+n+s+u;return a>>>0}Pe.sum64_4_lo=Wre;function $re(t,e,r,n,i,s,o,u,a,c){var f=0,d=e;d=d+n>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+u>>>0,f+=d<u?1:0,d=d+c>>>0,f+=d<c?1:0;var w=t+r+i+o+a+f;return w>>>0}Pe.sum64_5_hi=$re;function Yre(t,e,r,n,i,s,o,u,a,c){var f=e+n+s+u+c;return f>>>0}Pe.sum64_5_lo=Yre;function Jre(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Pe.rotr64_hi=Jre;function Xre(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Pe.rotr64_lo=Xre;function Zre(t,e,r){return t>>>r}Pe.shr64_hi=Zre;function ene(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Pe.shr64_lo=ene;var cl={},DM=Pe,tne=Gh;function Vm(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}cl.BlockHash=Vm,Vm.prototype.update=function(t,e){if(t=DM.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=DM.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},Vm.prototype.digest=function(t){return this.update(this._pad()),tne(this.pending===null),this._digest(t)},Vm.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=t&255}else for(n[i++]=t&255,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var Zc={},ms={},rne=Pe,hs=rne.rotr32;function nne(t,e,r,n){if(t===0)return P4(e,r,n);if(t===1||t===3)return B4(e,r,n);if(t===2)return R4(e,r,n)}ms.ft_1=nne;function P4(t,e,r){return t&e^~t&r}ms.ch32=P4;function R4(t,e,r){return t&e^t&r^e&r}ms.maj32=R4;function B4(t,e,r){return t^e^r}ms.p32=B4;function ine(t){return hs(t,2)^hs(t,13)^hs(t,22)}ms.s0_256=ine;function sne(t){return hs(t,6)^hs(t,11)^hs(t,25)}ms.s1_256=sne;function one(t){return hs(t,7)^hs(t,18)^t>>>3}ms.g0_256=one;function ane(t){return hs(t,17)^hs(t,19)^t>>>10}ms.g1_256=ane;var sl=Pe,une=cl,cne=ms,yT=sl.rotl32,Bh=sl.sum32,lne=sl.sum32_5,fne=cne.ft_1,M4=une.BlockHash,hne=[1518500249,1859775393,2400959708,3395469782];function us(){if(!(this instanceof us))return new us;M4.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}sl.inherits(us,M4);var dne=us;us.blockSize=512,us.outSize=160,us.hmacStrength=80,us.padLength=64,us.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=yT(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],a=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),f=lne(yT(i,5),fne(c,s,o,u),a,r[n],hne[c]);a=u,u=o,o=yT(s,30),s=i,i=f}this.h[0]=Bh(this.h[0],i),this.h[1]=Bh(this.h[1],s),this.h[2]=Bh(this.h[2],o),this.h[3]=Bh(this.h[3],u),this.h[4]=Bh(this.h[4],a)},us.prototype._digest=function(t){return t==="hex"?sl.toHex32(this.h,"big"):sl.split32(this.h,"big")};var ol=Pe,gne=cl,ll=ms,pne=Gh,bi=ol.sum32,mne=ol.sum32_4,yne=ol.sum32_5,wne=ll.ch32,vne=ll.maj32,Ane=ll.s0_256,Ene=ll.s1_256,bne=ll.g0_256,Sne=ll.g1_256,L4=gne.BlockHash,Ine=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cs(){if(!(this instanceof cs))return new cs;L4.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ine,this.W=new Array(64)}ol.inherits(cs,L4);var F4=cs;cs.blockSize=512,cs.outSize=256,cs.hmacStrength=192,cs.padLength=64,cs.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=mne(Sne(r[n-2]),r[n-7],bne(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],a=this.h[4],c=this.h[5],f=this.h[6],d=this.h[7];for(pne(this.k.length===r.length),n=0;n<r.length;n++){var w=yne(d,Ene(a),wne(a,c,f),this.k[n],r[n]),A=bi(Ane(i),vne(i,s,o));d=f,f=c,c=a,a=bi(u,w),u=o,o=s,s=i,i=bi(w,A)}this.h[0]=bi(this.h[0],i),this.h[1]=bi(this.h[1],s),this.h[2]=bi(this.h[2],o),this.h[3]=bi(this.h[3],u),this.h[4]=bi(this.h[4],a),this.h[5]=bi(this.h[5],c),this.h[6]=bi(this.h[6],f),this.h[7]=bi(this.h[7],d)},cs.prototype._digest=function(t){return t==="hex"?ol.toHex32(this.h,"big"):ol.split32(this.h,"big")};var xT=Pe,U4=F4;function Ws(){if(!(this instanceof Ws))return new Ws;U4.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}xT.inherits(Ws,U4);var Tne=Ws;Ws.blockSize=512,Ws.outSize=224,Ws.hmacStrength=192,Ws.padLength=64,Ws.prototype._digest=function(t){return t==="hex"?xT.toHex32(this.h.slice(0,7),"big"):xT.split32(this.h.slice(0,7),"big")};var on=Pe,_ne=cl,Cne=Gh,ds=on.rotr64_hi,gs=on.rotr64_lo,q4=on.shr64_hi,V4=on.shr64_lo,qo=on.sum64,wT=on.sum64_hi,vT=on.sum64_lo,Nne=on.sum64_4_hi,xne=on.sum64_4_lo,One=on.sum64_5_hi,Dne=on.sum64_5_lo,k4=_ne.BlockHash,Pne=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ii(){if(!(this instanceof Ii))return new Ii;k4.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Pne,this.W=new Array(160)}on.inherits(Ii,k4);var H4=Ii;Ii.blockSize=1024,Ii.outSize=512,Ii.hmacStrength=192,Ii.padLength=128,Ii.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=Gne(r[n-4],r[n-3]),s=jne(r[n-4],r[n-3]),o=r[n-14],u=r[n-13],a=kne(r[n-30],r[n-29]),c=Hne(r[n-30],r[n-29]),f=r[n-32],d=r[n-31];r[n]=Nne(i,s,o,u,a,c,f,d),r[n+1]=xne(i,s,o,u,a,c,f,d)}},Ii.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],a=this.h[5],c=this.h[6],f=this.h[7],d=this.h[8],w=this.h[9],A=this.h[10],T=this.h[11],x=this.h[12],B=this.h[13],V=this.h[14],U=this.h[15];Cne(this.k.length===r.length);for(var Q=0;Q<r.length;Q+=2){var L=V,k=U,H=qne(d,w),q=Vne(d,w),v=Rne(d,w,A,T,x),C=Bne(d,w,A,T,x,B),P=this.k[Q],F=this.k[Q+1],R=r[Q],l=r[Q+1],g=One(L,k,H,q,v,C,P,F,R,l),y=Dne(L,k,H,q,v,C,P,F,R,l);L=Fne(n,i),k=Une(n,i),H=Mne(n,i,s,o,u),q=Lne(n,i,s,o,u,a);var E=wT(L,k,H,q),I=vT(L,k,H,q);V=x,U=B,x=A,B=T,A=d,T=w,d=wT(c,f,g,y),w=vT(f,f,g,y),c=u,f=a,u=s,a=o,s=n,o=i,n=wT(g,y,E,I),i=vT(g,y,E,I)}qo(this.h,0,n,i),qo(this.h,2,s,o),qo(this.h,4,u,a),qo(this.h,6,c,f),qo(this.h,8,d,w),qo(this.h,10,A,T),qo(this.h,12,x,B),qo(this.h,14,V,U)},Ii.prototype._digest=function(t){return t==="hex"?on.toHex32(this.h,"big"):on.split32(this.h,"big")};function Rne(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Bne(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function Mne(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function Lne(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function Fne(t,e){var r=ds(t,e,28),n=ds(e,t,2),i=ds(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Une(t,e){var r=gs(t,e,28),n=gs(e,t,2),i=gs(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function qne(t,e){var r=ds(t,e,14),n=ds(t,e,18),i=ds(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Vne(t,e){var r=gs(t,e,14),n=gs(t,e,18),i=gs(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function kne(t,e){var r=ds(t,e,1),n=ds(t,e,8),i=q4(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Hne(t,e){var r=gs(t,e,1),n=gs(t,e,8),i=V4(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Gne(t,e){var r=ds(t,e,19),n=ds(e,t,29),i=q4(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function jne(t,e){var r=gs(t,e,19),n=gs(e,t,29),i=V4(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var OT=Pe,G4=H4;function $s(){if(!(this instanceof $s))return new $s;G4.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}OT.inherits($s,G4);var zne=$s;$s.blockSize=1024,$s.outSize=384,$s.hmacStrength=192,$s.padLength=128,$s.prototype._digest=function(t){return t==="hex"?OT.toHex32(this.h.slice(0,12),"big"):OT.split32(this.h.slice(0,12),"big")},Zc.sha1=dne,Zc.sha224=Tne,Zc.sha256=F4,Zc.sha384=zne,Zc.sha512=H4;var j4={},Za=Pe,Qne=cl,km=Za.rotl32,PM=Za.sum32,Mh=Za.sum32_3,RM=Za.sum32_4,z4=Qne.BlockHash;function as(){if(!(this instanceof as))return new as;z4.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Za.inherits(as,z4),j4.ripemd160=as,as.blockSize=512,as.outSize=160,as.hmacStrength=192,as.padLength=64,as.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],u=r,a=n,c=i,f=s,d=o,w=0;w<80;w++){var A=PM(km(RM(r,BM(w,n,i,s),t[$ne[w]+e],Kne(w)),Jne[w]),o);r=o,o=s,s=km(i,10),i=n,n=A,A=PM(km(RM(u,BM(79-w,a,c,f),t[Yne[w]+e],Wne(w)),Xne[w]),d),u=d,d=f,f=km(c,10),c=a,a=A}A=Mh(this.h[1],i,f),this.h[1]=Mh(this.h[2],s,d),this.h[2]=Mh(this.h[3],o,u),this.h[3]=Mh(this.h[4],r,a),this.h[4]=Mh(this.h[0],n,c),this.h[0]=A},as.prototype._digest=function(t){return t==="hex"?Za.toHex32(this.h,"little"):Za.split32(this.h,"little")};function BM(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Kne(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Wne(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var $ne=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Yne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Jne=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Xne=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Zne=Pe,eie=Gh;function nl(t,e,r){if(!(this instanceof nl))return new nl(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Zne.toArray(e,r))}var tie=nl;nl.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),eie(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},nl.prototype.update=function(t,e){return this.inner.update(t,e),this},nl.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=t;e.utils=Pe,e.common=cl,e.sha=Zc,e.ripemd=j4,e.hmac=tie,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(os);function fl(t,e,r){return r={path:e,exports:{},require:function(n,i){return rie(n,i??r.path)}},t(r,r.exports),r.exports}function rie(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var QT=Q4;function Q4(t,e){if(!t)throw new Error(e||"Assertion failed")}Q4.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Ti=fl(function(t,e){var r=e;function n(o,u){if(Array.isArray(o))return o.slice();if(!o)return[];var a=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)a[c]=o[c]|0;return a}if(u==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var c=0;c<o.length;c+=2)a.push(parseInt(o[c]+o[c+1],16))}else for(var c=0;c<o.length;c++){var f=o.charCodeAt(c),d=f>>8,w=f&255;d?a.push(d,w):a.push(w)}return a}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var u="",a=0;a<o.length;a++)u+=i(o[a].toString(16));return u}r.toHex=s,r.encode=function(o,u){return u==="hex"?s(o):o}}),pn=fl(function(t,e){var r=e;r.assert=QT,r.toArray=Ti.toArray,r.zero2=Ti.zero2,r.toHex=Ti.toHex,r.encode=Ti.encode;function n(a,c,f){var d=new Array(Math.max(a.bitLength(),f)+1);d.fill(0);for(var w=1<<c+1,A=a.clone(),T=0;T<d.length;T++){var x,B=A.andln(w-1);A.isOdd()?(B>(w>>1)-1?x=(w>>1)-B:x=B,A.isubn(x)):x=0,d[T]=x,A.iushrn(1)}return d}r.getNAF=n;function i(a,c){var f=[[],[]];a=a.clone(),c=c.clone();for(var d=0,w=0,A;a.cmpn(-d)>0||c.cmpn(-w)>0;){var T=a.andln(3)+d&3,x=c.andln(3)+w&3;T===3&&(T=-1),x===3&&(x=-1);var B;T&1?(A=a.andln(7)+d&7,(A===3||A===5)&&x===2?B=-T:B=T):B=0,f[0].push(B);var V;x&1?(A=c.andln(7)+w&7,(A===3||A===5)&&T===2?V=-x:V=x):V=0,f[1].push(V),2*d===B+1&&(d=1-d),2*w===V+1&&(w=1-w),a.iushrn(1),c.iushrn(1)}return f}r.getJSF=i;function s(a,c,f){var d="_"+c;a.prototype[c]=function(){return this[d]!==void 0?this[d]:this[d]=f.call(this)}}r.cachedProperty=s;function o(a){return typeof a=="string"?r.toArray(a,"hex"):a}r.parseBytes=o;function u(a){return new Se(a,"hex","le")}r.intFromLE=u}),Hm=pn.getNAF,nie=pn.getJSF,Zm=pn.assert;function Vo(t,e){this.type=t,this.p=new Se(e.p,16),this.red=e.prime?Se.red(e.prime):Se.mont(this.p),this.zero=new Se(0).toRed(this.red),this.one=new Se(1).toRed(this.red),this.two=new Se(2).toRed(this.red),this.n=e.n&&new Se(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ru=Vo;Vo.prototype.point=function(){throw new Error("Not implemented")},Vo.prototype.validate=function(){throw new Error("Not implemented")},Vo.prototype._fixedNafMul=function(t,e){Zm(t.precomputed);var r=t._getDoubles(),n=Hm(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s=[],o,u;for(o=0;o<n.length;o+=r.step){u=0;for(var a=o+r.step-1;a>=o;a--)u=(u<<1)+n[a];s.push(u)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(o=0;o<s.length;o++)u=s[o],u===d?f=f.mixedAdd(r.points[o]):u===-d&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},Vo.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=Hm(e,r,this._bitLength),o=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var a=0;u>=0&&s[u]===0;u--)a++;if(u>=0&&a++,o=o.dblp(a),u<0)break;var c=s[u];Zm(c!==0),t.type==="affine"?c>0?o=o.mixedAdd(i[c-1>>1]):o=o.mixedAdd(i[-c-1>>1].neg()):c>0?o=o.add(i[c-1>>1]):o=o.add(i[-c-1>>1].neg())}return t.type==="affine"?o.toP():o},Vo.prototype._wnafMulAdd=function(t,e,r,n,i){var s=this._wnafT1,o=this._wnafT2,u=this._wnafT3,a=0,c,f,d;for(c=0;c<n;c++){d=e[c];var w=d._getNAFPoints(t);s[c]=w.wnd,o[c]=w.points}for(c=n-1;c>=1;c-=2){var A=c-1,T=c;if(s[A]!==1||s[T]!==1){u[A]=Hm(r[A],s[A],this._bitLength),u[T]=Hm(r[T],s[T],this._bitLength),a=Math.max(u[A].length,a),a=Math.max(u[T].length,a);continue}var x=[e[A],null,null,e[T]];e[A].y.cmp(e[T].y)===0?(x[1]=e[A].add(e[T]),x[2]=e[A].toJ().mixedAdd(e[T].neg())):e[A].y.cmp(e[T].y.redNeg())===0?(x[1]=e[A].toJ().mixedAdd(e[T]),x[2]=e[A].add(e[T].neg())):(x[1]=e[A].toJ().mixedAdd(e[T]),x[2]=e[A].toJ().mixedAdd(e[T].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],V=nie(r[A],r[T]);for(a=Math.max(V[0].length,a),u[A]=new Array(a),u[T]=new Array(a),f=0;f<a;f++){var U=V[0][f]|0,Q=V[1][f]|0;u[A][f]=B[(U+1)*3+(Q+1)],u[T][f]=0,o[A]=x}}var L=this.jpoint(null,null,null),k=this._wnafT4;for(c=a;c>=0;c--){for(var H=0;c>=0;){var q=!0;for(f=0;f<n;f++)k[f]=u[f][c]|0,k[f]!==0&&(q=!1);if(!q)break;H++,c--}if(c>=0&&H++,L=L.dblp(H),c<0)break;for(f=0;f<n;f++){var v=k[f];v!==0&&(v>0?d=o[f][v-1>>1]:v<0&&(d=o[f][-v-1>>1].neg()),d.type==="affine"?L=L.mixedAdd(d):L=L.add(d))}}for(c=0;c<n;c++)o[c]=null;return i?L:L.toP()};function Wn(t,e){this.curve=t,this.type=e,this.precomputed=null}Vo.BasePoint=Wn,Wn.prototype.eq=function(){throw new Error("Not implemented")},Wn.prototype.validate=function(){return this.curve.validate(this)},Vo.prototype.decodePoint=function(t,e){t=pn.toArray(t,e);var r=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*r){t[0]===6?Zm(t[t.length-1]%2===0):t[0]===7&&Zm(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));return n}else if((t[0]===2||t[0]===3)&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),t[0]===3);throw new Error("Unknown point format")},Wn.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Wn.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},Wn.prototype.encode=function(t,e){return pn.encode(this._encode(e),t)},Wn.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Wn.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((t.bitLength()+1)/e.step):!1},Wn.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var s=0;s<t;s++)n=n.dbl();r.push(n)}return{step:t,points:r}},Wn.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=r===1?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},Wn.prototype._getBeta=function(){return null},Wn.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var KT=fl(function(t){typeof Object.create=="function"?t.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}}),iie=pn.assert;function Yn(t){ru.call(this,"short",t),this.a=new Se(t.a,16).toRed(this.red),this.b=new Se(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}KT(Yn,ru);var sie=Yn;Yn.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,r;if(t.beta)e=new Se(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)r=new Se(t.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))===0?r=i[0]:(r=i[1],iie(this.g.mul(r).x.cmp(this.g.x.redMul(e))===0))}var s;return t.basis?s=t.basis.map(function(o){return{a:new Se(o.a,16),b:new Se(o.b,16)}}):s=this._getEndoBasis(r),{beta:e,lambda:r,basis:s}}},Yn.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:Se.mont(t),r=new Se(2).toRed(e).redInvm(),n=r.redNeg(),i=new Se(3).toRed(e).redNeg().redSqrt().redMul(r),s=n.redAdd(i).fromRed(),o=n.redSub(i).fromRed();return[s,o]},Yn.prototype._getEndoBasis=function(t){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=t,n=this.n.clone(),i=new Se(1),s=new Se(0),o=new Se(0),u=new Se(1),a,c,f,d,w,A,T,x=0,B,V;r.cmpn(0)!==0;){var U=n.div(r);B=n.sub(U.mul(r)),V=o.sub(U.mul(i));var Q=u.sub(U.mul(s));if(!f&&B.cmp(e)<0)a=T.neg(),c=i,f=B.neg(),d=V;else if(f&&++x===2)break;T=B,n=r,r=B,o=i,i=V,u=s,s=Q}w=B.neg(),A=V;var L=f.sqr().add(d.sqr()),k=w.sqr().add(A.sqr());return k.cmp(L)>=0&&(w=a,A=c),f.negative&&(f=f.neg(),d=d.neg()),w.negative&&(w=w.neg(),A=A.neg()),[{a:f,b:d},{a:w,b:A}]},Yn.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),o=i.mul(r.a),u=s.mul(n.a),a=i.mul(r.b),c=s.mul(n.b),f=t.sub(o).sub(u),d=a.add(c).neg();return{k1:f,k2:d}},Yn.prototype.pointFromX=function(t,e){t=new Se(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(n.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},Yn.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0},Yn.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),u=t[s],a=u._getBeta();o.k1.negative&&(o.k1.ineg(),u=u.neg(!0)),o.k2.negative&&(o.k2.ineg(),a=a.neg(!0)),n[s*2]=u,n[s*2+1]=a,i[s*2]=o.k1,i[s*2+1]=o.k2}for(var c=this._wnafMulAdd(1,n,i,s*2,r),f=0;f<s*2;f++)n[f]=null,i[f]=null;return c};function Ar(t,e,r,n){ru.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Se(e,16),this.y=new Se(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}KT(Ar,ru.BasePoint),Yn.prototype.point=function(t,e,r){return new Ar(this,t,e,r)},Yn.prototype.pointFromJSON=function(t,e){return Ar.fromJSON(this,t,e)},Ar.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},Ar.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Ar.fromJSON=function(t,e,r){typeof e=="string"&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(o){return t.point(o[0],o[1],r)}var s=e[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Ar.prototype.isInfinity=function(){return this.inf},Ar.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Ar.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Ar.prototype.getX=function(){return this.x.fromRed()},Ar.prototype.getY=function(){return this.y.fromRed()},Ar.prototype.mul=function(t){return t=new Se(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Ar.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Ar.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Ar.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)},Ar.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(i){return i.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},Ar.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function _r(t,e,r,n){ru.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Se(0)):(this.x=new Se(e,16),this.y=new Se(r,16),this.z=new Se(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}KT(_r,ru.BasePoint),Yn.prototype.jpoint=function(t,e,r){return new _r(this,t,e,r)},_r.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},_r.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_r.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(r.redMul(this.z)),u=n.redSub(i),a=s.redSub(o);if(u.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=u.redSqr(),f=c.redMul(u),d=n.redMul(c),w=a.redSqr().redIAdd(f).redISub(d).redISub(d),A=a.redMul(d.redISub(w)).redISub(s.redMul(f)),T=this.z.redMul(t.z).redMul(u);return this.curve.jpoint(w,A,T)},_r.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,s=t.y.redMul(e).redMul(this.z),o=r.redSub(n),u=i.redSub(s);if(o.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var a=o.redSqr(),c=a.redMul(o),f=r.redMul(a),d=u.redSqr().redIAdd(c).redISub(f).redISub(f),w=u.redMul(f.redISub(d)).redISub(i.redMul(c)),A=this.z.redMul(o);return this.curve.jpoint(d,w,A)},_r.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,u=this.z,a=u.redSqr().redSqr(),c=o.redAdd(o);for(e=0;e<t;e++){var f=s.redSqr(),d=c.redSqr(),w=d.redSqr(),A=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(a)),T=s.redMul(d),x=A.redSqr().redISub(T.redAdd(T)),B=T.redISub(x),V=A.redMul(B);V=V.redIAdd(V).redISub(w);var U=c.redMul(u);e+1<t&&(a=a.redMul(w)),s=x,u=U,c=V}return this.curve.jpoint(s,c.redMul(i),u)},_r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_r.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var u=n.redAdd(n).redIAdd(n),a=u.redSqr().redISub(o).redISub(o),c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),t=a,e=u.redMul(o.redISub(a)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),w=d.redSqr(),A=this.x.redAdd(d).redSqr().redISub(f).redISub(w);A=A.redIAdd(A);var T=f.redAdd(f).redIAdd(f),x=T.redSqr(),B=w.redIAdd(w);B=B.redIAdd(B),B=B.redIAdd(B),t=x.redISub(A).redISub(A),e=T.redMul(A.redISub(t)).redISub(B),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(t,e,r)},_r.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var u=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),a=u.redSqr().redISub(o).redISub(o);t=a;var c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),e=u.redMul(o.redISub(a)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),w=this.x.redMul(d),A=this.x.redSub(f).redMul(this.x.redAdd(f));A=A.redAdd(A).redIAdd(A);var T=w.redIAdd(w);T=T.redIAdd(T);var x=T.redAdd(T);t=A.redSqr().redISub(x),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var B=d.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),e=A.redMul(T.redISub(t)).redISub(B)}return this.curve.jpoint(t,e,r)},_r.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=e.redSqr(),o=r.redSqr(),u=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(i)),a=e.redAdd(e);a=a.redIAdd(a);var c=a.redMul(o),f=u.redSqr().redISub(c.redAdd(c)),d=c.redISub(f),w=o.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=u.redMul(d).redISub(w),T=r.redAdd(r).redMul(n);return this.curve.jpoint(f,A,T)},_r.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),s=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(n);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var u=o.redSqr(),a=n.redIAdd(n);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);var c=i.redIAdd(o).redSqr().redISub(s).redISub(u).redISub(a),f=e.redMul(c);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(u).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var w=this.y.redMul(c.redMul(a.redISub(c)).redISub(o.redMul(u)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=this.z.redAdd(o).redSqr().redISub(r).redISub(u);return this.curve.jpoint(d,w,A)},_r.prototype.mul=function(t,e){return t=new Se(t,e),this.curve._wnafMul(this,t)},_r.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)===0},_r.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},_r.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_r.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var zm=fl(function(t,e){var r=e;r.base=ru,r.short=sie,r.mont=null,r.edwards=null}),Qm=fl(function(t,e){var r=e,n=pn.assert;function i(u){u.type==="short"?this.curve=new zm.short(u):u.type==="edwards"?this.curve=new zm.edwards(u):this.curve=new zm.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(u,a){Object.defineProperty(r,u,{configurable:!0,enumerable:!0,get:function(){var c=new i(a);return Object.defineProperty(r,u,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:os.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:os.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:os.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:os.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:os.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:os.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:os.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:os.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ko(t){if(!(this instanceof ko))return new ko(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ti.toArray(t.entropy,t.entropyEnc||"hex"),r=Ti.toArray(t.nonce,t.nonceEnc||"hex"),n=Ti.toArray(t.pers,t.persEnc||"hex");QT(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var MM=ko;ko.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},ko.prototype._hmac=function(){return new os.hmac(this.hash,this.K)},ko.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},ko.prototype.reseed=function(t,e,r,n){typeof e!="string"&&(n=r,r=e,e=null),t=Ti.toArray(t,e),r=Ti.toArray(r,n),QT(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},ko.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(n=r,r=e,e=null),r&&(r=Ti.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this._reseed++,Ti.encode(s,e)};var AT=pn.assert;function Lr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ET=Lr;Lr.fromPublic=function(t,e,r){return e instanceof Lr?e:new Lr(t,{pub:e,pubEnc:r})},Lr.fromPrivate=function(t,e,r){return e instanceof Lr?e:new Lr(t,{priv:e,privEnc:r})},Lr.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Lr.prototype.getPublic=function(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Lr.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv},Lr.prototype._importPrivate=function(t,e){this.priv=new Se(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Lr.prototype._importPublic=function(t,e){if(t.x||t.y){this.ec.curve.type==="mont"?AT(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&AT(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,e)},Lr.prototype.derive=function(t){return t.validate()||AT(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Lr.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Lr.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Lr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var oie=pn.assert;function ny(t,e){if(t instanceof ny)return t;this._importDER(t,e)||(oie(t.r&&t.s,"Signature without r or s"),this.r=new Se(t.r,16),this.s=new Se(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Gm=ny;function aie(){this.place=0}function bT(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function LM(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ny.prototype._importDER=function(t,e){t=pn.toArray(t,e);var r=new aie;if(t[r.place++]!==48)return!1;var n=bT(t,r);if(n===!1||n+r.place!==t.length||t[r.place++]!==2)return!1;var i=bT(t,r);if(i===!1)return!1;var s=t.slice(r.place,i+r.place);if(r.place+=i,t[r.place++]!==2)return!1;var o=bT(t,r);if(o===!1||t.length!==o+r.place)return!1;var u=t.slice(r.place,o+r.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Se(s),this.s=new Se(u),this.recoveryParam=null,!0};function ST(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ny.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),r[0]&128&&(r=[0].concat(r)),e=LM(e),r=LM(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var n=[2];ST(n,e.length),n=n.concat(e),n.push(2),ST(n,r.length);var i=n.concat(r),s=[48];return ST(s,i.length),s=s.concat(i),pn.encode(s,t)};var uie=function(){throw new Error("unsupported")},K4=pn.assert;function $n(t){if(!(this instanceof $n))return new $n(t);typeof t=="string"&&(K4(Object.prototype.hasOwnProperty.call(Qm,t),"Unknown curve "+t),t=Qm[t]),t instanceof Qm.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var cie=$n;$n.prototype.keyPair=function(t){return new ET(this,t)},$n.prototype.keyFromPrivate=function(t,e){return ET.fromPrivate(this,t,e)},$n.prototype.keyFromPublic=function(t,e){return ET.fromPublic(this,t,e)},$n.prototype.genKeyPair=function(t){t||(t={});for(var e=new MM({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||uie(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Se(2));;){var i=new Se(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},$n.prototype._truncateToN=function(t,e){var r=t.byteLength()*8-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},$n.prototype.sign=function(t,e,r,n){typeof r=="object"&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new Se(t,16));for(var i=this.n.byteLength(),s=e.getPrivate().toArray("be",i),o=t.toArray("be",i),u=new MM({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),a=this.n.sub(new Se(1)),c=0;;c++){var f=n.k?n.k(c):new Se(u.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(a)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var w=d.getX(),A=w.umod(this.n);if(A.cmpn(0)!==0){var T=f.invm(this.n).mul(A.mul(e.getPrivate()).iadd(t));if(T=T.umod(this.n),T.cmpn(0)!==0){var x=(d.getY().isOdd()?1:0)|(w.cmp(A)!==0?2:0);return n.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),x^=1),new Gm({r:A,s:T,recoveryParam:x})}}}}}},$n.prototype.verify=function(t,e,r,n){t=this._truncateToN(new Se(t,16)),r=this.keyFromPublic(r,n),e=new Gm(e,"hex");var i=e.r,s=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o=s.invm(this.n),u=o.mul(t).umod(this.n),a=o.mul(i).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(u,r.getPublic(),a),c.isInfinity()?!1:c.eqXToP(i)):(c=this.g.mulAdd(u,r.getPublic(),a),c.isInfinity()?!1:c.getX().umod(this.n).cmp(i)===0)},$n.prototype.recoverPubKey=function(t,e,r,n){K4((3&r)===r,"The recovery param is more than two bits"),e=new Gm(e,n);var i=this.n,s=new Se(t),o=e.r,u=e.s,a=r&1,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?o=this.curve.pointFromX(o.add(this.curve.n),a):o=this.curve.pointFromX(o,a);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),w=u.mul(f).umod(i);return this.g.mulAdd(d,o,w)},$n.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Gm(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var lie=fl(function(t,e){var r=e;r.version="6.5.4",r.utils=pn,r.rand=function(){throw new Error("unsupported")},r.curve=zm,r.curves=Qm,r.ec=cie,r.eddsa=null}),fie=lie.ec,hie="signing-key/5.7.0",DT=new kt(hie),IT=null;function ls(){return IT||(IT=new fie("secp256k1")),IT}var PT=class{constructor(e){Rh(this,"curve","secp256k1"),Rh(this,"privateKey",kr(e)),Kte(this.privateKey)!==32&&DT.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=ls().keyFromPrivate(Qt(this.privateKey));Rh(this,"publicKey","0x"+r.getPublic(!1,"hex")),Rh(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Rh(this,"_isSigningKey",!0)}_addPoint(e){let r=ls().keyFromPublic(Qt(this.publicKey)),n=ls().keyFromPublic(Qt(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){let r=ls().keyFromPrivate(Qt(this.privateKey)),n=Qt(e);n.length!==32&&DT.throwArgumentError("bad digest length","digest",e);let i=r.sign(n,{canonical:!0});return m4({recoveryParam:i.recoveryParam,r:fs("0x"+i.r.toString(16),32),s:fs("0x"+i.s.toString(16),32)})}computeSharedSecret(e){let r=ls().keyFromPrivate(Qt(this.privateKey)),n=ls().keyFromPublic(Qt(W4(e)));return fs("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function die(t,e){let r=m4(e),n={r:Qt(r.r),s:Qt(r.s)};return"0x"+ls().recoverPubKey(Qt(t),n,r.recoveryParam).encode("hex",!1)}function W4(t,e){let r=Qt(t);if(r.length===32){let n=new PT(r);return e?"0x"+ls().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?kr(r):"0x"+ls().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+ls().keyFromPublic(r).getPublic(!0,"hex"):kr(r)}return DT.throwArgumentError("invalid public or private key","key","[REDACTED]")}var gie="transactions/5.7.0";new kt(gie);var FM;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(FM||(FM={}));function pie(t){let e=W4(t);return Tre(SM(GT(SM(e,1)),12))}function mie(t,e){return pie(die(Qt(t),e))}var yie="https://rpc.walletconnect.com/v1";async function $4(t,e,r,n,i,s){switch(r.t){case"eip191":return Y4(t,e,r.s);case"eip1271":return await J4(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function Y4(t,e,r){return mie(C4(e),r).toLowerCase()===t.toLowerCase()}async function J4(t,e,r,n,i,s){try{let o="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",a="0000000000000000000000000000000000000000000000000000000000000041",c=r.substring(2),f=C4(e).substring(2),d=o+f+u+a+c,w=await fetch(`${s||yie}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:wie(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:A}=await w.json();return A?A.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function wie(){return Date.now()+Math.floor(Math.random()*1e3)}var vie=Object.defineProperty,Aie=Object.defineProperties,Eie=Object.getOwnPropertyDescriptors,UM=Object.getOwnPropertySymbols,bie=Object.prototype.hasOwnProperty,Sie=Object.prototype.propertyIsEnumerable,qM=(t,e,r)=>e in t?vie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,WT=(t,e)=>{for(var r in e||(e={}))bie.call(e,r)&&qM(t,r,e[r]);if(UM)for(var r of UM(e))Sie.call(e,r)&&qM(t,r,e[r]);return t},X4=(t,e)=>Aie(t,Eie(e)),Iie="did:pkh:",iy=t=>t?.split(":"),$T=t=>{let e=t&&iy(t);if(e)return t.includes(Iie)?e[3]:e[1]},Tie=t=>{let e=t&&iy(t);if(e)return e[2]+":"+e[3]},YT=t=>{let e=t&&iy(t);if(e)return e.pop()};async function _ie(t){let{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=Z4(i,i.iss),o=YT(i.iss);return await $4(o,s,n,$T(i.iss),r)}var Z4=(t,e)=>{let r=`${t.domain} wants you to sign in with your Ethereum account:`,n=YT(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0,s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,u=`Chain ID: ${$T(e)}`,a=`Nonce: ${t.nonce}`,c=`Issued At: ${t.iat}`,f=t.resources?`Resources:${t.resources.map(w=>`
- ${w}`).join("")}`:void 0,d=oy(t.resources);if(d){let w=jo(d);i=ZT(i,w)}return[r,n,"",i,"",s,o,u,a,c,f].filter(w=>w!=null).join(`
`)};function Cie(t,e,r){return r.includes("did:pkh:")||(r=`did:pkh:${r}`),{h:{t:"caip122"},p:{iss:r,domain:t.domain,aud:t.aud,version:t.version,nonce:t.nonce,iat:t.iat,statement:t.statement,requestId:t.requestId,resources:t.resources,nbf:t.nbf,exp:t.exp},s:e}}function Nie(t){var e;let{authPayload:r,chains:n,methods:i}=t,s=r.statement||"";if(!(n!=null&&n.length))return r;let o=r.chains,u=_T(o,n);if(!(u!=null&&u.length))throw new Error("No supported chains");let a=e5(r.resources);if(!a)return r;ps(a);let c=t5(a,"eip155"),f=r?.resources||[];if(c!=null&&c.length){let d=r5(c),w=_T(d,i);if(!(w!=null&&w.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(d)}, supported: ${JSON.stringify(i)}`);let A=JT("request",w,{chains:u}),T=o5(a,"eip155",A);f=((e=r?.resources)==null?void 0:e.slice(0,-1))||[],f.push(sy(T))}return X4(WT({},r),{statement:u5(s,oy(f)),chains:u,resources:r!=null&&r.resources||f.length>0?f:void 0})}function e5(t){let e=oy(t);if(e&&XT(e))return jo(e)}function xie(t,e){var r;return(r=t?.att)==null?void 0:r.hasOwnProperty(e)}function t5(t,e){var r,n;return(r=t?.att)!=null&&r[e]?Object.keys((n=t?.att)==null?void 0:n[e]):[]}function Oie(t){return t?.map(e=>Object.keys(e))||[]}function r5(t){return t?.map(e=>{var r;return(r=e.split("/"))==null?void 0:r[1]})||[]}function n5(t){return p.Buffer.from(JSON.stringify(t)).toString("base64")}function i5(t){return JSON.parse(p.Buffer.from(t,"base64").toString("utf-8"))}function ps(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");let e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{let n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{let s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function s5(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:JT(e,r,n)}}}function o5(t,e,r){var n;return t.att[e]=WT({},r),((n=Object.keys(t.att))==null?void 0:n.sort((i,s)=>i.localeCompare(s))).reduce((i,s)=>(i.att[s]=t.att[s],i),{att:{}})}function JT(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));let n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function sy(t){return ps(t),`urn:recap:${n5(t).replace(/=/g,"")}`}function jo(t){let e=i5(t.replace("urn:recap:",""));return ps(e),e}function Die(t,e,r){let n=s5(t,e,r);return sy(n)}function XT(t){return t&&t.includes("urn:recap:")}function Pie(t,e){let r=jo(t),n=jo(e),i=a5(r,n);return sy(i)}function a5(t,e){ps(t),ps(e);let r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((u,a)=>u.localeCompare(a)).forEach(u=>{var a,c;n.att[i]=X4(WT({},n.att[i]),{[u]:((a=t.att[i])==null?void 0:a[u])||((c=e.att[i])==null?void 0:c[u])})})}),n}function ZT(t="",e){ps(e);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;let n=[],i=0;Object.keys(e.att).forEach(u=>{let a=Object.keys(e.att[u]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));a.sort((d,w)=>d.action.localeCompare(w.action));let c={};a.forEach(d=>{c[d.ability]||(c[d.ability]=[]),c[d.ability].push(d.action)});let f=Object.keys(c).map(d=>(i++,`(${i}) '${d}': '${c[d].join("', '")}' for '${u}'.`));n.push(f.join(", ").replace(".,","."))});let s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function Rie(t){var e;let r=jo(t);ps(r);let n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function Bie(t){let e=jo(t);ps(e);let r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function u5(t,e){if(!e)return t;let r=jo(e);return ps(r),ZT(t,r)}function oy(t){if(!t)return;let e=t?.[t.length-1];return XT(e)?e:void 0}var e_="base10",jr="base16",ey="base64pad",ay="utf8",t_=0,hl=1,Mie=0,VM=1,RT=12,r_=32;function Lie(){let t=YM.generateKeyPair();return{privateKey:Vt.toString(t.secretKey,jr),publicKey:Vt.toString(t.publicKey,jr)}}function Fie(){let t=WM.randomBytes(r_);return Vt.toString(t,jr)}function Uie(t,e){let r=YM.sharedKey(Vt.fromString(t,jr),Vt.fromString(e,jr),!0),n=new ite.HKDF(FT.SHA256,r).expand(r_);return Vt.toString(n,jr)}function qie(t){let e=FT.hash(Vt.fromString(t,jr));return Vt.toString(e,jr)}function Vie(t){let e=FT.hash(Vt.fromString(t,ay));return Vt.toString(e,jr)}function c5(t){return Vt.fromString(`${t}`,e_)}function jh(t){return Number(Vt.toString(t,e_))}function kie(t){let e=c5(typeof t.type<"u"?t.type:t_);if(jh(e)===hl&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let r=typeof t.senderPublicKey<"u"?Vt.fromString(t.senderPublicKey,jr):void 0,n=typeof t.iv<"u"?Vt.fromString(t.iv,jr):WM.randomBytes(RT),i=new KM.ChaCha20Poly1305(Vt.fromString(t.symKey,jr)).seal(n,Vt.fromString(t.message,ay));return l5({type:e,sealed:i,iv:n,senderPublicKey:r})}function Hie(t){let e=new KM.ChaCha20Poly1305(Vt.fromString(t.symKey,jr)),{sealed:r,iv:n}=n_(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Vt.toString(i,ay)}function l5(t){if(jh(t.type)===hl){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Vt.toString(Vt.concat([t.type,t.senderPublicKey,t.iv,t.sealed]),ey)}return Vt.toString(Vt.concat([t.type,t.iv,t.sealed]),ey)}function n_(t){let e=Vt.fromString(t,ey),r=e.slice(Mie,VM),n=VM;if(jh(r)===hl){let u=n+r_,a=u+RT,c=e.slice(n,u),f=e.slice(u,a),d=e.slice(a);return{type:r,sealed:d,iv:f,senderPublicKey:c}}let i=n+RT,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Gie(t,e){let r=n_(t);return f5({type:jh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Vt.toString(r.senderPublicKey,jr):void 0,receiverPublicKey:e?.receiverPublicKey})}function f5(t){let e=t?.type||t_;if(e===hl){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function jie(t){return t.type===hl&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var h5="irn";function zie(t){return t?.relay||{protocol:h5}}function Qie(t){let e=ote.RELAY_JSONRPC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Kie=Object.defineProperty,Wie=Object.defineProperties,$ie=Object.getOwnPropertyDescriptors,kM=Object.getOwnPropertySymbols,Yie=Object.prototype.hasOwnProperty,Jie=Object.prototype.propertyIsEnumerable,HM=(t,e,r)=>e in t?Kie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,GM=(t,e)=>{for(var r in e||(e={}))Yie.call(e,r)&&HM(t,r,e[r]);if(kM)for(var r of kM(e))Jie.call(e,r)&&HM(t,r,e[r]);return t},Xie=(t,e)=>Wie(t,$ie(e));function d5(t,e="-"){let r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){let s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Zie(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;let e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Km.parse(s),u=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:n,topic:g5(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:d5(o),methods:u,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function g5(t){return t.startsWith("//")?t.substring(2):t}function p5(t,e="-"){let r="relay",n={};return Object.keys(t).forEach(i=>{let s=r+e+i;t[i]&&(n[s]=t[i])}),n}function ese(t){return`${t.protocol}:${t.topic}@${t.version}?`+Km.stringify(GM(Xie(GM({symKey:t.symKey},p5(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}var tse=Object.defineProperty,rse=Object.defineProperties,nse=Object.getOwnPropertyDescriptors,jM=Object.getOwnPropertySymbols,ise=Object.prototype.hasOwnProperty,sse=Object.prototype.propertyIsEnumerable,zM=(t,e,r)=>e in t?tse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ose=(t,e)=>{for(var r in e||(e={}))ise.call(e,r)&&zM(t,r,e[r]);if(jM)for(var r of jM(e))sse.call(e,r)&&zM(t,r,e[r]);return t},ase=(t,e)=>rse(t,nse(e));function nu(t){let e=[];return t.forEach(r=>{let[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function m5(t){let e=[];return Object.values(t).forEach(r=>{e.push(...nu(r.accounts))}),e}function y5(t,e){let r=[];return Object.values(t).forEach(n=>{nu(n.accounts).includes(e)&&r.push(...n.methods)}),r}function w5(t,e){let r=[];return Object.values(t).forEach(n=>{nu(n.accounts).includes(e)&&r.push(...n.events)}),r}function use(t,e){let r=x5(t,e);if(r)throw new Error(r.message);let n={};for(let[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}function cse(t){let{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:n}=t,i=BT(e),s=BT(r),o={};Object.keys(n).forEach(c=>{let f=n[c].chains,d=n[c].methods,w=n[c].events,A=n[c].accounts;f.forEach(T=>{if(!A.some(x=>x.includes(T)))throw new Error(`No accounts provided for chain ${T} in namespace ${c}`)}),o[c]={chains:f,methods:d,events:w,accounts:A}});let u=D5(e,o,"approve()");if(u)throw new Error(u.message);let a={};return!Object.keys(e).length&&!Object.keys(r).length?o:(Object.keys(i).forEach(c=>{let f=n[c].chains.filter(T=>{var x,B;return(B=(x=i[c])==null?void 0:x.chains)==null?void 0:B.includes(T)}),d=n[c].methods.filter(T=>{var x,B;return(B=(x=i[c])==null?void 0:x.methods)==null?void 0:B.includes(T)}),w=n[c].events.filter(T=>{var x,B;return(B=(x=i[c])==null?void 0:x.events)==null?void 0:B.includes(T)}),A=f.map(T=>n[c].accounts.filter(x=>x.includes(`${T}:`))).flat();a[c]={chains:f,methods:d,events:w,accounts:A}}),Object.keys(s).forEach(c=>{var f,d,w,A,T,x;if(!n[c])return;let B=(d=(f=s[c])==null?void 0:f.chains)==null?void 0:d.filter(L=>n[c].chains.includes(L)),V=n[c].methods.filter(L=>{var k,H;return(H=(k=s[c])==null?void 0:k.methods)==null?void 0:H.includes(L)}),U=n[c].events.filter(L=>{var k,H;return(H=(k=s[c])==null?void 0:k.events)==null?void 0:H.includes(L)}),Q=B?.map(L=>n[c].accounts.filter(k=>k.includes(`${L}:`))).flat();a[c]={chains:Js((w=a[c])==null?void 0:w.chains,B),methods:Js((A=a[c])==null?void 0:A.methods,V),events:Js((T=a[c])==null?void 0:T.events,U),accounts:Js((x=a[c])==null?void 0:x.accounts,Q)}}),a)}function i_(t){return t.includes(":")}function v5(t){return i_(t)?t.split(":")[0]:t}function BT(t){var e,r,n;let i={};if(!uy(t))return i;for(let[s,o]of Object.entries(t)){let u=i_(s)?[s]:o.chains,a=o.methods||[],c=o.events||[],f=v5(s);i[f]=ase(ose({},i[f]),{chains:Js(u,(e=i[f])==null?void 0:e.chains),methods:Js(a,(r=i[f])==null?void 0:r.methods),events:Js(c,(n=i[f])==null?void 0:n.events)})}return i}function A5(t){let e={};return t?.forEach(r=>{let[n,i]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[]}),e[n].accounts.push(r),e[n].chains.push(`${n}:${i}`)}),e}function lse(t,e){e=e.map(n=>n.replace("did:pkh:",""));let r=A5(e);for(let[n,i]of Object.entries(r))i.methods?i.methods=Js(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}var E5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},b5={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ys(t,e){let{message:r,code:n}=b5[t];return{message:e?`${r} ${e}`:r,code:n}}function eu(t,e){let{message:r,code:n}=E5[t];return{message:e?`${r} ${e}`:r,code:n}}function zh(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function uy(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Go(t){return typeof t>"u"}function mn(t,e){return e&&Go(t)?!0:typeof t=="string"&&!!t.trim().length}function cy(t,e){return e&&Go(t)?!0:typeof t=="number"&&!isNaN(t)}function fse(t,e){let{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r),s=!0;return Ho(i,n)?(n.forEach(o=>{let{accounts:u,methods:a,events:c}=t.namespaces[o],f=nu(u),d=r[o];(!Ho(ry(o,d),f)||!Ho(d.methods,a)||!Ho(d.events,c))&&(s=!1)}),s):!1}function kh(t){return mn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function S5(t){if(mn(t,!1)&&t.includes(":")){let e=t.split(":");if(e.length===3){let r=e[0]+":"+e[1];return!!e[2]&&kh(r)}}return!1}function hse(t){if(mn(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function dse(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function gse(t){return t?.topic}function pse(t,e){let r=null;return mn(t?.publicKey,!1)||(r=Ys("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function MT(t){let e=!0;return zh(t)?t.length&&(e=t.every(r=>mn(r,!1))):e=!1,e}function I5(t,e,r){let n=null;return zh(e)&&e.length?e.forEach(i=>{n||kh(i)||(n=eu("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):kh(t)||(n=eu("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function T5(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;let o=I5(i,ry(i,s),`${e} ${r}`);o&&(n=o)}),n}function _5(t,e){let r=null;return zh(t)?t.forEach(n=>{r||S5(n)||(r=eu("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=eu("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function C5(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=_5(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function N5(t,e){let r=null;return MT(t?.methods)?MT(t?.events)||(r=eu("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=eu("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function s_(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;let i=N5(n,`${e}, namespace`);i&&(r=i)}),r}function mse(t,e,r){let n=null;if(t&&uy(t)){let i=s_(t,e);i&&(n=i);let s=T5(t,e,r);s&&(n=s)}else n=Ys("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function x5(t,e){let r=null;if(t&&uy(t)){let n=s_(t,e);n&&(r=n);let i=C5(t,e);i&&(r=i)}else r=Ys("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function O5(t){return mn(t.protocol,!0)}function yse(t,e){let r=!1;return e&&!t?r=!0:t&&zh(t)&&t.length&&t.forEach(n=>{r=O5(n)}),r}function wse(t){return typeof t=="number"}function vse(t){return typeof t<"u"&&typeof t!==null}function Ase(t){return!(!t||typeof t!="object"||!t.code||!cy(t.code,!1)||!t.message||!mn(t.message,!1))}function Ese(t){return!(Go(t)||!mn(t.method,!1))}function bse(t){return!(Go(t)||Go(t.result)&&Go(t.error)||!cy(t.id,!1)||!mn(t.jsonrpc,!1))}function Sse(t){return!(Go(t)||!mn(t.name,!1))}function Ise(t,e){return!(!kh(e)||!m5(t).includes(e))}function Tse(t,e,r){return mn(r,!1)?y5(t,e).includes(r):!1}function _se(t,e,r){return mn(r,!1)?w5(t,e).includes(r):!1}function D5(t,e,r){let n=null,i=Cse(t),s=Nse(e),o=Object.keys(i),u=Object.keys(s),a=QM(Object.keys(t)),c=QM(Object.keys(e)),f=a.filter(d=>!c.includes(d));return f.length&&(n=Ys("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),Ho(o,u)||(n=Ys("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;let w=nu(e[d].accounts);w.includes(d)||(n=Ys("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${w.toString()}`))}),o.forEach(d=>{n||(Ho(i[d].methods,s[d].methods)?Ho(i[d].events,s[d].events)||(n=Ys("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=Ys("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function Cse(t){let e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function QM(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Nse(t){let e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:nu(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function xse(t,e){return cy(t,!1)&&t<=e.max&&t>=e.min}function Ose(){let t=tu();return new Promise(e=>{switch(t){case Gr.browser:e(P5());break;case Gr.reactNative:e(R5());break;case Gr.node:e(B5());break;default:e(!0)}})}function P5(){return Hh()&&navigator?.onLine}async function R5(){return al()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function B5(){return!0}function Dse(t){switch(tu()){case Gr.browser:M5(t);break;case Gr.reactNative:L5(t);break;case Gr.node:break}}function M5(t){!al()&&Hh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function L5(t){al()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}var TT={},LT=class{static get(e){return TT[e]}static set(e,r){TT[e]=r}static delete(e){delete TT[e]}};K.BASE10=e_,K.BASE16=jr,K.BASE64=ey,K.COLON=pte,K.DEFAULT_DEPTH=VT,K.EMPTY_SPACE=Wm,K.ENV_MAP=Gr,K.INTERNAL_ERRORS=b5,K.MemoryStore=LT,K.ONE_THOUSAND=mte,K.REACT_NATIVE_PRODUCT=n4,K.RELAYER_DEFAULT_PROTOCOL=h5,K.SDK_ERRORS=E5,K.SDK_TYPE=s4,K.SLASH=i4,K.TYPE_0=t_,K.TYPE_1=hl,K.UTF8=ay,K.addResourceToRecap=o5,K.appendToQueryString=o4,K.assertType=bte,K.assignAbilityToActions=JT,K.base64Decode=i5,K.base64Encode=n5,K.buildApprovedNamespaces=cse,K.buildAuthObject=Cie,K.buildNamespacesFromAuth=lse,K.buildRecapStatement=u5,K.calcExpiry=Bte,K.capitalize=Nte,K.capitalizeWord=h4,K.createDelayedPromise=xte,K.createEncodedRecap=Die,K.createExpiringPromise=Ote,K.createRecap=s5,K.decodeRecap=jo,K.decodeTypeByte=jh,K.decrypt=Hie,K.deriveSymKey=Uie,K.deserialize=n_,K.encodeRecap=sy,K.encodeTypeByte=c5,K.encrypt=kie,K.engineEvent=Lte,K.enumify=Cte,K.formatAccountId=ZM,K.formatAccountWithChain=ate,K.formatChainId=XM,K.formatExpirerTarget=HT,K.formatIdTarget=Pte,K.formatMessage=Z4,K.formatMessageContext=Ste,K.formatRelayParams=p5,K.formatRelayRpcUrl=Ate,K.formatStatementFromRecap=ZT,K.formatTopicTarget=Dte,K.formatUA=c4,K.formatUri=ese,K.generateKeyPair=Lie,K.generateRandomBytes32=Fie,K.getAccountsChains=nu,K.getAccountsFromNamespaces=cte,K.getAddressFromAccount=e4,K.getAddressesFromAccounts=ute,K.getAppMetadata=wte,K.getBrowserOnlineStatus=P5,K.getBundleId=yte,K.getChainFromAccount=t4,K.getChainsFromAccounts=r4,K.getChainsFromNamespace=ry,K.getChainsFromNamespaces=lte,K.getChainsFromRecap=Bie,K.getChainsFromRequiredNamespaces=fte,K.getCommonValuesInArrays=_T,K.getDecodedRecapFromResources=e5,K.getDeepLink=Ute,K.getDidAddress=YT,K.getDidAddressSegments=iy,K.getDidChainId=$T,K.getEnvironment=tu,K.getHttpUrl=Ete,K.getInternalError=Ys,K.getJavascriptID=u4,K.getJavascriptOS=a4,K.getLastItems=f4,K.getMethodsFromRecap=Rie,K.getNamespacedDidChainId=Tie,K.getNamespacesChains=m5,K.getNamespacesEventsForChainId=w5,K.getNamespacesFromAccounts=A5,K.getNamespacesMethodsForChainId=y5,K.getNodeOnlineStatus=B5,K.getReCapActions=r5,K.getReactNativeOnlineStatus=R5,K.getRecapAbilitiesFromResource=Oie,K.getRecapFromResources=oy,K.getRecapResource=t5,K.getRelayClientMetadata=vte,K.getRelayProtocolApi=Qie,K.getRelayProtocolName=zie,K.getRequiredNamespacesFromNamespaces=use,K.getSdkError=eu,K.getUniqueValues=qT,K.handleDeeplinkRedirect=Fte,K.hasOverlap=Ho,K.hashKey=qie,K.hashMessage=Vie,K.isBrowser=Hh,K.isCaipNamespace=i_,K.isConformingNamespaces=D5,K.isExpired=Mte,K.isNode=kT,K.isOnline=Ose,K.isProposalStruct=dse,K.isReactNative=al,K.isRecap=XT,K.isSessionCompatible=fse,K.isSessionStruct=gse,K.isTypeOneEnvelope=jie,K.isUndefined=Go,K.isValidAccountId=S5,K.isValidAccounts=_5,K.isValidActions=N5,K.isValidArray=zh,K.isValidChainId=kh,K.isValidChains=I5,K.isValidController=pse,K.isValidEip1271Signature=J4,K.isValidEip191Signature=Y4,K.isValidErrorReason=Ase,K.isValidEvent=Sse,K.isValidId=wse,K.isValidNamespaceAccounts=C5,K.isValidNamespaceActions=s_,K.isValidNamespaceChains=T5,K.isValidNamespaceMethodsOrEvents=MT,K.isValidNamespaces=x5,K.isValidNamespacesChainId=Ise,K.isValidNamespacesEvent=_se,K.isValidNamespacesRequest=Tse,K.isValidNumber=cy,K.isValidObject=uy,K.isValidParams=vse,K.isValidRecap=ps,K.isValidRelay=O5,K.isValidRelays=yse,K.isValidRequest=Ese,K.isValidRequestExpiry=xse,K.isValidRequiredNamespaces=mse,K.isValidResponse=bse,K.isValidString=mn,K.isValidUrl=hse,K.mapEntries=_te,K.mapToObj=Ite,K.mergeArrays=Js,K.mergeEncodedRecaps=Pie,K.mergeRecaps=a5,K.normalizeNamespaces=BT,K.objToMap=Tte,K.parseAccountId=UT,K.parseChainId=JM,K.parseContextNames=l4,K.parseExpirerTarget=Rte,K.parseNamespaceKey=v5,K.parseRelayParams=d5,K.parseTopic=g5,K.parseUri=Zie,K.populateAuthPayload=Nie,K.recapHasResource=xie,K.serialize=l5,K.subscribeToBrowserNetworkChange=M5,K.subscribeToNetworkChange=Dse,K.subscribeToReactNativeNetworkChange=L5,K.validateDecoding=Gie,K.validateEncoding=f5,K.validateSignedCacao=_ie,K.verifySignature=$4});var F5,U5,q5,V5,ly,Kh,o_,fy,zo,Wh,hy=fe(()=>{h();F5="PARSE_ERROR",U5="INVALID_REQUEST",q5="METHOD_NOT_FOUND",V5="INVALID_PARAMS",ly="INTERNAL_ERROR",Kh="SERVER_ERROR",o_=[-32700,-32600,-32601,-32602,-32603],fy=[-32e3,-32099],zo={[F5]:{code:-32700,message:"Parse error"},[U5]:{code:-32600,message:"Invalid Request"},[q5]:{code:-32601,message:"Method not found"},[V5]:{code:-32602,message:"Invalid params"},[ly]:{code:-32603,message:"Internal error"},[Kh]:{code:-32e3,message:"Server error"}},Wh=Kh});function Pse(t){return t<=fy[0]&&t>=fy[1]}function dy(t){return o_.includes(t)}function k5(t){return typeof t=="number"}function gy(t){return Object.keys(zo).includes(t)?zo[t]:zo[Wh]}function py(t){let e=Object.values(zo).find(r=>r.code===t);return e||zo[Wh]}function Rse(t){if(typeof t.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof t.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!k5(t.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${t.error.code}`};if(dy(t.error.code)){let e=py(t.error.code);if(e.message!==zo[Wh].message&&t.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${t.error.code}`}}return{valid:!0}}function a_(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var u_=fe(()=>{h();hy()});var G5=D(Qo=>{"use strict";h();Object.defineProperty(Qo,"__esModule",{value:!0});Qo.isBrowserCryptoAvailable=Qo.getSubtleCrypto=Qo.getBrowerCrypto=void 0;function c_(){return(global===null||global===void 0?void 0:global.crypto)||(global===null||global===void 0?void 0:global.msCrypto)||{}}Qo.getBrowerCrypto=c_;function H5(){let t=c_();return t.subtle||t.webkitSubtle}Qo.getSubtleCrypto=H5;function Bse(){return!!c_()&&!!H5()}Qo.isBrowserCryptoAvailable=Bse});var Q5=D(Ko=>{"use strict";h();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.isBrowser=Ko.isNode=Ko.isReactNative=void 0;function j5(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ko.isReactNative=j5;function z5(){return typeof S.default<"u"&&typeof S.default.versions<"u"&&typeof S.default.versions.node<"u"}Ko.isNode=z5;function Mse(){return!j5()&&!z5()}Ko.isBrowser=Mse});var l_=D(my=>{"use strict";h();Object.defineProperty(my,"__esModule",{value:!0});var K5=(es(),_e(Zi));K5.__exportStar(G5(),my);K5.__exportStar(Q5(),my)});var Er={};Bt(Er,{isNodeJs:()=>$5});var W5,$5,Y5=fe(()=>{h();W5=pe(l_());Tr(Er,pe(l_()));$5=W5.isNode});function f_(t=3){let e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function h_(t=6){return BigInt(f_(t))}function d_(t,e,r){return{id:r||f_(),jsonrpc:"2.0",method:t,params:e}}function Lse(t,e){return{id:t,jsonrpc:"2.0",result:e}}function g_(t,e,r){return{id:t,jsonrpc:"2.0",error:J5(e,r)}}function J5(t,e){return typeof t>"u"?gy(ly):(typeof t=="string"&&(t=Object.assign(Object.assign({},gy(Kh)),{message:t})),typeof e<"u"&&(t.data=e),dy(t.code)&&(t=py(t.code)),t)}var X5=fe(()=>{h();u_();hy()});function Fse(t){return t.includes("*")?wy(t):!/\W/g.test(t)}function yy(t){return t==="*"}function wy(t){return yy(t)?!0:!(!t.includes("*")||t.split("*").length!==2||t.split("*").filter(e=>e.trim()==="").length!==1)}function Use(t){return!yy(t)&&wy(t)&&!t.split("*")[0].trim()}function qse(t){return!yy(t)&&wy(t)&&!t.split("*")[1].trim()}var Z5=fe(()=>{h()});var eL=fe(()=>{h()});var dl,p_=fe(()=>{h();dl=class{}});var m_,vy,$h,tL=fe(()=>{h();p_();m_=class extends dl{constructor(e){super()}},vy=class extends dl{constructor(){super()}},$h=class extends vy{constructor(e){super()}}});var rL=fe(()=>{h()});var nL=fe(()=>{h();eL();p_();tL();rL()});var iL=fe(()=>{h();nL()});function Hse(t){let e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function sL(t,e){let r=Hse(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Gse(t){return sL(t,Vse)}function Ay(t){return sL(t,kse)}function y_(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}var Vse,kse,oL=fe(()=>{h();Vse="^https?:",kse="^wss?:"});function w_(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function jse(t){return w_(t)&&"method"in t}function v_(t){return w_(t)&&(aL(t)||Ey(t))}function aL(t){return"result"in t}function Ey(t){return"error"in t}function zse(t){return"error"in t&&t.valid===!1}var uL=fe(()=>{h()});var Fr={};Bt(Fr,{DEFAULT_ERROR:()=>Wh,IBaseJsonRpcProvider:()=>vy,IEvents:()=>dl,IJsonRpcConnection:()=>m_,IJsonRpcProvider:()=>$h,INTERNAL_ERROR:()=>ly,INVALID_PARAMS:()=>V5,INVALID_REQUEST:()=>U5,METHOD_NOT_FOUND:()=>q5,PARSE_ERROR:()=>F5,RESERVED_ERROR_CODES:()=>o_,SERVER_ERROR:()=>Kh,SERVER_ERROR_CODE_RANGE:()=>fy,STANDARD_ERROR_MAP:()=>zo,formatErrorMessage:()=>J5,formatJsonRpcError:()=>g_,formatJsonRpcRequest:()=>d_,formatJsonRpcResult:()=>Lse,getBigIntRpcId:()=>h_,getError:()=>gy,getErrorByCode:()=>py,isHttpUrl:()=>Gse,isJsonRpcError:()=>Ey,isJsonRpcPayload:()=>w_,isJsonRpcRequest:()=>jse,isJsonRpcResponse:()=>v_,isJsonRpcResult:()=>aL,isJsonRpcValidationInvalid:()=>zse,isLocalhostUrl:()=>y_,isNodeJs:()=>$5,isReservedErrorCode:()=>dy,isServerErrorCode:()=>Pse,isValidDefaultRoute:()=>yy,isValidErrorCode:()=>k5,isValidLeadingWildcardRoute:()=>Use,isValidRoute:()=>Fse,isValidTrailingWildcardRoute:()=>qse,isValidWildcardRoute:()=>wy,isWsUrl:()=>Ay,parseConnectionError:()=>a_,payloadId:()=>f_,validateJsonRpcError:()=>Rse});var Yh=fe(()=>{h();hy();u_();Y5();Tr(Fr,Er);X5();Z5();iL();oL();uL()});var cL,by,lL,A_=fe(()=>{h();cL=pe(Ds());Yh();by=class extends $h{constructor(e){super(e),this.events=new cL.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(d_(e.method,e.params||[],e.id||h_().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Ey(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),v_(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}},lL=by});var fL={};Bt(fL,{JsonRpcProvider:()=>by,default:()=>Qse});var Qse,hL=fe(()=>{h();A_();A_();Qse=lL});var gL=D((rTe,dL)=>{"use strict";h();dL.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var wL={};Bt(wL,{WsConnection:()=>E_,default:()=>E_});var yL,Kse,Wse,pL,mL,$se,E_,vL=fe(()=>{h();yL=pe(Ds());xc();Yh();Kse=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:gL(),Wse=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",pL=t=>t.split("?")[0],mL=10,$se=Kse(),E_=class{constructor(e){if(this.url=e,this.events=new yL.EventEmitter,this.registering=!1,!Ay(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ai(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Ay(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{let i=new URLSearchParams(e).get("origin"),s=(0,Fr.isReactNative)()?{headers:{origin:i}}:{rejectUnauthorized:!y_(e)},o=new $se(e,[],s);Wse()?o.onerror=u=>{let a=u;n(this.emitError(a.error))}:o.on("error",u=>{n(this.emitError(u))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let r=typeof e.data=="string"?Ro(e.data):e.data;this.events.emit("payload",r)}onError(e,r){let n=this.parseError(r),i=n.message||n.toString(),s=g_(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return a_(e,pL(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>mL&&this.events.setMaxListeners(mL)}emitError(e){let r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${pL(this.url)}`));return this.events.emit("register_error",r),r}}});var eF=D((Jh,pl)=>{h();var Yse=200,P_="__lodash_hash_undefined__",Oy=1,DL=2,PL=9007199254740991,Sy="[object Arguments]",T_="[object Array]",Jse="[object AsyncFunction]",RL="[object Boolean]",BL="[object Date]",ML="[object Error]",LL="[object Function]",Xse="[object GeneratorFunction]",Iy="[object Map]",FL="[object Number]",Zse="[object Null]",gl="[object Object]",AL="[object Promise]",eoe="[object Proxy]",UL="[object RegExp]",Ty="[object Set]",qL="[object String]",toe="[object Symbol]",roe="[object Undefined]",__="[object WeakMap]",VL="[object ArrayBuffer]",_y="[object DataView]",noe="[object Float32Array]",ioe="[object Float64Array]",soe="[object Int8Array]",ooe="[object Int16Array]",aoe="[object Int32Array]",uoe="[object Uint8Array]",coe="[object Uint8ClampedArray]",loe="[object Uint16Array]",foe="[object Uint32Array]",hoe=/[\\^$.*+?()[\]{}|]/g,doe=/^\[object .+?Constructor\]$/,goe=/^(?:0|[1-9]\d*)$/,Mt={};Mt[noe]=Mt[ioe]=Mt[soe]=Mt[ooe]=Mt[aoe]=Mt[uoe]=Mt[coe]=Mt[loe]=Mt[foe]=!0;Mt[Sy]=Mt[T_]=Mt[VL]=Mt[RL]=Mt[_y]=Mt[BL]=Mt[ML]=Mt[LL]=Mt[Iy]=Mt[FL]=Mt[gl]=Mt[UL]=Mt[Ty]=Mt[qL]=Mt[__]=!1;var kL=typeof global=="object"&&global&&global.Object===Object&&global,poe=typeof self=="object"&&self&&self.Object===Object&&self,Xs=kL||poe||Function("return this")(),HL=typeof Jh=="object"&&Jh&&!Jh.nodeType&&Jh,EL=HL&&typeof pl=="object"&&pl&&!pl.nodeType&&pl,GL=EL&&EL.exports===HL,b_=GL&&kL.process,bL=function(){try{return b_&&b_.binding&&b_.binding("util")}catch{}}(),SL=bL&&bL.isTypedArray;function moe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function yoe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function woe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function voe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Aoe(t){return function(e){return t(e)}}function Eoe(t,e){return t.has(e)}function boe(t,e){return t?.[e]}function Soe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function Ioe(t,e){return function(r){return t(e(r))}}function Toe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var _oe=Array.prototype,Coe=Function.prototype,Dy=Object.prototype,S_=Xs["__core-js_shared__"],jL=Coe.toString,ys=Dy.hasOwnProperty,IL=function(){var t=/[^.]+$/.exec(S_&&S_.keys&&S_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),zL=Dy.toString,Noe=RegExp("^"+jL.call(ys).replace(hoe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),TL=GL?Xs.Buffer:void 0,Cy=Xs.Symbol,_L=Xs.Uint8Array,QL=Dy.propertyIsEnumerable,xoe=_oe.splice,iu=Cy?Cy.toStringTag:void 0,CL=Object.getOwnPropertySymbols,Ooe=TL?TL.isBuffer:void 0,Doe=Ioe(Object.keys,Object),C_=ml(Xs,"DataView"),Xh=ml(Xs,"Map"),N_=ml(Xs,"Promise"),x_=ml(Xs,"Set"),O_=ml(Xs,"WeakMap"),Zh=ml(Object,"create"),Poe=au(C_),Roe=au(Xh),Boe=au(N_),Moe=au(x_),Loe=au(O_),NL=Cy?Cy.prototype:void 0,I_=NL?NL.valueOf:void 0;function su(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Foe(){this.__data__=Zh?Zh(null):{},this.size=0}function Uoe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function qoe(t){var e=this.__data__;if(Zh){var r=e[t];return r===P_?void 0:r}return ys.call(e,t)?e[t]:void 0}function Voe(t){var e=this.__data__;return Zh?e[t]!==void 0:ys.call(e,t)}function koe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Zh&&e===void 0?P_:e,this}su.prototype.clear=Foe;su.prototype.delete=Uoe;su.prototype.get=qoe;su.prototype.has=Voe;su.prototype.set=koe;function Zs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Hoe(){this.__data__=[],this.size=0}function Goe(t){var e=this.__data__,r=Py(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():xoe.call(e,r,1),--this.size,!0}function joe(t){var e=this.__data__,r=Py(e,t);return r<0?void 0:e[r][1]}function zoe(t){return Py(this.__data__,t)>-1}function Qoe(t,e){var r=this.__data__,n=Py(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}Zs.prototype.clear=Hoe;Zs.prototype.delete=Goe;Zs.prototype.get=joe;Zs.prototype.has=zoe;Zs.prototype.set=Qoe;function ou(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Koe(){this.size=0,this.__data__={hash:new su,map:new(Xh||Zs),string:new su}}function Woe(t){var e=Ry(this,t).delete(t);return this.size-=e?1:0,e}function $oe(t){return Ry(this,t).get(t)}function Yoe(t){return Ry(this,t).has(t)}function Joe(t,e){var r=Ry(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}ou.prototype.clear=Koe;ou.prototype.delete=Woe;ou.prototype.get=$oe;ou.prototype.has=Yoe;ou.prototype.set=Joe;function Ny(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ou;++e<r;)this.add(t[e])}function Xoe(t){return this.__data__.set(t,P_),this}function Zoe(t){return this.__data__.has(t)}Ny.prototype.add=Ny.prototype.push=Xoe;Ny.prototype.has=Zoe;function $o(t){var e=this.__data__=new Zs(t);this.size=e.size}function eae(){this.__data__=new Zs,this.size=0}function tae(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function rae(t){return this.__data__.get(t)}function nae(t){return this.__data__.has(t)}function iae(t,e){var r=this.__data__;if(r instanceof Zs){var n=r.__data__;if(!Xh||n.length<Yse-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ou(n)}return r.set(t,e),this.size=r.size,this}$o.prototype.clear=eae;$o.prototype.delete=tae;$o.prototype.get=rae;$o.prototype.has=nae;$o.prototype.set=iae;function sae(t,e){var r=xy(t),n=!r&&Aae(t),i=!r&&!n&&D_(t),s=!r&&!n&&!i&&ZL(t),o=r||n||i||s,u=o?voe(t.length,String):[],a=u.length;for(var c in t)(e||ys.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||pae(c,a)))&&u.push(c);return u}function Py(t,e){for(var r=t.length;r--;)if($L(t[r][0],e))return r;return-1}function oae(t,e,r){var n=e(t);return xy(t)?n:yoe(n,r(t))}function td(t){return t==null?t===void 0?roe:Zse:iu&&iu in Object(t)?dae(t):vae(t)}function xL(t){return ed(t)&&td(t)==Sy}function KL(t,e,r,n,i){return t===e?!0:t==null||e==null||!ed(t)&&!ed(e)?t!==t&&e!==e:aae(t,e,r,n,KL,i)}function aae(t,e,r,n,i,s){var o=xy(t),u=xy(e),a=o?T_:Wo(t),c=u?T_:Wo(e);a=a==Sy?gl:a,c=c==Sy?gl:c;var f=a==gl,d=c==gl,w=a==c;if(w&&D_(t)){if(!D_(e))return!1;o=!0,f=!1}if(w&&!f)return s||(s=new $o),o||ZL(t)?WL(t,e,r,n,i,s):fae(t,e,a,r,n,i,s);if(!(r&Oy)){var A=f&&ys.call(t,"__wrapped__"),T=d&&ys.call(e,"__wrapped__");if(A||T){var x=A?t.value():t,B=T?e.value():e;return s||(s=new $o),i(x,B,r,n,s)}}return w?(s||(s=new $o),hae(t,e,r,n,i,s)):!1}function uae(t){if(!XL(t)||yae(t))return!1;var e=YL(t)?Noe:doe;return e.test(au(t))}function cae(t){return ed(t)&&JL(t.length)&&!!Mt[td(t)]}function lae(t){if(!wae(t))return Doe(t);var e=[];for(var r in Object(t))ys.call(t,r)&&r!="constructor"&&e.push(r);return e}function WL(t,e,r,n,i,s){var o=r&Oy,u=t.length,a=e.length;if(u!=a&&!(o&&a>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var f=-1,d=!0,w=r&DL?new Ny:void 0;for(s.set(t,e),s.set(e,t);++f<u;){var A=t[f],T=e[f];if(n)var x=o?n(T,A,f,e,t,s):n(A,T,f,t,e,s);if(x!==void 0){if(x)continue;d=!1;break}if(w){if(!woe(e,function(B,V){if(!Eoe(w,V)&&(A===B||i(A,B,r,n,s)))return w.push(V)})){d=!1;break}}else if(!(A===T||i(A,T,r,n,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function fae(t,e,r,n,i,s,o){switch(r){case _y:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case VL:return!(t.byteLength!=e.byteLength||!s(new _L(t),new _L(e)));case RL:case BL:case FL:return $L(+t,+e);case ML:return t.name==e.name&&t.message==e.message;case UL:case qL:return t==e+"";case Iy:var u=Soe;case Ty:var a=n&Oy;if(u||(u=Toe),t.size!=e.size&&!a)return!1;var c=o.get(t);if(c)return c==e;n|=DL,o.set(t,e);var f=WL(u(t),u(e),n,i,s,o);return o.delete(t),f;case toe:if(I_)return I_.call(t)==I_.call(e)}return!1}function hae(t,e,r,n,i,s){var o=r&Oy,u=OL(t),a=u.length,c=OL(e),f=c.length;if(a!=f&&!o)return!1;for(var d=a;d--;){var w=u[d];if(!(o?w in e:ys.call(e,w)))return!1}var A=s.get(t);if(A&&s.get(e))return A==e;var T=!0;s.set(t,e),s.set(e,t);for(var x=o;++d<a;){w=u[d];var B=t[w],V=e[w];if(n)var U=o?n(V,B,w,e,t,s):n(B,V,w,t,e,s);if(!(U===void 0?B===V||i(B,V,r,n,s):U)){T=!1;break}x||(x=w=="constructor")}if(T&&!x){var Q=t.constructor,L=e.constructor;Q!=L&&"constructor"in t&&"constructor"in e&&!(typeof Q=="function"&&Q instanceof Q&&typeof L=="function"&&L instanceof L)&&(T=!1)}return s.delete(t),s.delete(e),T}function OL(t){return oae(t,Sae,gae)}function Ry(t,e){var r=t.__data__;return mae(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ml(t,e){var r=boe(t,e);return uae(r)?r:void 0}function dae(t){var e=ys.call(t,iu),r=t[iu];try{t[iu]=void 0;var n=!0}catch{}var i=zL.call(t);return n&&(e?t[iu]=r:delete t[iu]),i}var gae=CL?function(t){return t==null?[]:(t=Object(t),moe(CL(t),function(e){return QL.call(t,e)}))}:Iae,Wo=td;(C_&&Wo(new C_(new ArrayBuffer(1)))!=_y||Xh&&Wo(new Xh)!=Iy||N_&&Wo(N_.resolve())!=AL||x_&&Wo(new x_)!=Ty||O_&&Wo(new O_)!=__)&&(Wo=function(t){var e=td(t),r=e==gl?t.constructor:void 0,n=r?au(r):"";if(n)switch(n){case Poe:return _y;case Roe:return Iy;case Boe:return AL;case Moe:return Ty;case Loe:return __}return e});function pae(t,e){return e=e??PL,!!e&&(typeof t=="number"||goe.test(t))&&t>-1&&t%1==0&&t<e}function mae(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function yae(t){return!!IL&&IL in t}function wae(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Dy;return t===r}function vae(t){return zL.call(t)}function au(t){if(t!=null){try{return jL.call(t)}catch{}try{return t+""}catch{}}return""}function $L(t,e){return t===e||t!==t&&e!==e}var Aae=xL(function(){return arguments}())?xL:function(t){return ed(t)&&ys.call(t,"callee")&&!QL.call(t,"callee")},xy=Array.isArray;function Eae(t){return t!=null&&JL(t.length)&&!YL(t)}var D_=Ooe||Tae;function bae(t,e){return KL(t,e)}function YL(t){if(!XL(t))return!1;var e=td(t);return e==LL||e==Xse||e==Jse||e==eoe}function JL(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PL}function XL(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ed(t){return t!=null&&typeof t=="object"}var ZL=SL?Aoe(SL):cae;function Sae(t){return Eae(t)?sae(t):lae(t)}function Iae(){return[]}function Tae(){return!1}pl.exports=bae});var R_=D((uTe,tF)=>{h();tF.exports=function(t,e){return e=e||{},new Promise(function(r,n){var i=new XMLHttpRequest,s=[],o=[],u={},a=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return s},entries:function(){return o},get:function(f){return u[f.toLowerCase()]},has:function(f){return f.toLowerCase()in u}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(f,d,w){s.push(d=d.toLowerCase()),o.push([d,w]),u[d]=u[d]?u[d]+","+w:w}),r(a())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)})}});var nF=D((lTe,rF)=>{h();rF.exports=self.fetch||(self.fetch=R_().default||R_())});var lU=D(de=>{"use strict";h();Object.defineProperty(de,"__esModule",{value:!0});var uu=Ds(),_ae=(rP(),_e(tP)),id=vP(),yt=(NS(),_e(CS)),ws=KS(),iF=(xc(),_e(Z8)),Cae=(oB(),_e(sB)),ne=Qh(),Nae=(rT(),_e(tT)),Oe=za(),xae=(hL(),_e(fL)),an=(Yh(),_e(Fr)),Oae=(vL(),_e(wL)),Dae=eF(),Pae=nF();function sd(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function Rae(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var Bae=sd(uu),Mae=sd(_ae),By=Rae(Cae),Lae=sd(Oae),Fae=sd(Dae),Uae=sd(Pae);function qae(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var u=t.length,a=t.charAt(0),c=Math.log(u)/Math.log(256),f=Math.log(256)/Math.log(u);function d(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var x=0,B=0,V=0,U=T.length;V!==U&&T[V]===0;)V++,x++;for(var Q=(U-V)*f+1>>>0,L=new Uint8Array(Q);V!==U;){for(var k=T[V],H=0,q=Q-1;(k!==0||H<B)&&q!==-1;q--,H++)k+=256*L[q]>>>0,L[q]=k%u>>>0,k=k/u>>>0;if(k!==0)throw new Error("Non-zero carry");B=H,V++}for(var v=Q-B;v!==Q&&L[v]===0;)v++;for(var C=a.repeat(x);v<Q;++v)C+=t.charAt(L[v]);return C}function w(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var x=0;if(T[x]!==" "){for(var B=0,V=0;T[x]===a;)B++,x++;for(var U=(T.length-x)*c+1>>>0,Q=new Uint8Array(U);T[x];){var L=r[T.charCodeAt(x)];if(L===255)return;for(var k=0,H=U-1;(L!==0||k<V)&&H!==-1;H--,k++)L+=u*Q[H]>>>0,Q[H]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");V=k,x++}if(T[x]!==" "){for(var q=U-V;q!==U&&Q[q]===0;)q++;for(var v=new Uint8Array(B+(U-q)),C=B;q!==U;)v[C++]=Q[q++];return v}}}function A(T){var x=w(T);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:w,decode:A}}var Vae=qae,kae=Vae,EF=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Hae=t=>new TextEncoder().encode(t),Gae=t=>new TextDecoder().decode(t),L_=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},F_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bF(this,e)}},U_=class{constructor(e){this.decoders=e}or(e){return bF(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},bF=(t,e)=>new U_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),q_=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new L_(e,r,n),this.decoder=new F_(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},$y=({name:t,prefix:e,encode:r,decode:n})=>new q_(t,e,r,n),od=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=kae(r,e);return $y({prefix:t,name:e,encode:n,decode:s=>EF(i(s))})},jae=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),u=0,a=0,c=0;for(let f=0;f<s;++f){let d=i[t[f]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|d,u+=r,u>=8&&(u-=8,o[c++]=255&a>>u)}if(u>=r||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return o},zae=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,u=0;for(let a=0;a<t.length;++a)for(u=u<<8|t[a],o+=8;o>r;)o-=r,s+=e[i&u>>o];if(o&&(s+=e[i&u<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Nr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>$y({prefix:e,name:t,encode(i){return zae(i,n,r)},decode(i){return jae(i,n,r,t)}}),Qae=$y({prefix:"\0",name:"identity",encode:t=>Gae(t),decode:t=>Hae(t)}),Kae=Object.freeze({__proto__:null,identity:Qae}),Wae=Nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),$ae=Object.freeze({__proto__:null,base2:Wae}),Yae=Nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Jae=Object.freeze({__proto__:null,base8:Yae}),Xae=od({prefix:"9",name:"base10",alphabet:"0123456789"}),Zae=Object.freeze({__proto__:null,base10:Xae}),eue=Nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tue=Nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rue=Object.freeze({__proto__:null,base16:eue,base16upper:tue}),nue=Nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iue=Nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sue=Nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oue=Nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aue=Nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uue=Nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cue=Nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lue=Nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fue=Nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),hue=Object.freeze({__proto__:null,base32:nue,base32upper:iue,base32pad:sue,base32padupper:oue,base32hex:aue,base32hexupper:uue,base32hexpad:cue,base32hexpadupper:lue,base32z:fue}),due=od({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gue=od({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pue=Object.freeze({__proto__:null,base36:due,base36upper:gue}),mue=od({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yue=od({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wue=Object.freeze({__proto__:null,base58btc:mue,base58flickr:yue}),vue=Nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Aue=Nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Eue=Nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bue=Nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Sue=Object.freeze({__proto__:null,base64:vue,base64pad:Aue,base64url:Eue,base64urlpad:bue}),SF=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Iue=SF.reduce((t,e,r)=>(t[r]=e,t),[]),Tue=SF.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function _ue(t){return t.reduce((e,r)=>(e+=Iue[r],e),"")}function Cue(t){let e=[];for(let r of t){let n=Tue[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Nue=$y({prefix:"\u{1F680}",name:"base256emoji",encode:_ue,decode:Cue}),xue=Object.freeze({__proto__:null,base256emoji:Nue}),Oue=IF,sF=128,Due=127,Pue=~Due,Rue=Math.pow(2,31);function IF(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Rue;)e[r++]=t&255|sF,t/=128;for(;t&Pue;)e[r++]=t&255|sF,t>>>=7;return e[r]=t|0,IF.bytes=r-n+1,e}var Bue=V_,Mue=128,oF=127;function V_(t,n){var r=0,n=n||0,i=0,s=n,o,u=t.length;do{if(s>=u)throw V_.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&oF)<<i:(o&oF)*Math.pow(2,i),i+=7}while(o>=Mue);return V_.bytes=s-n,r}var Lue=Math.pow(2,7),Fue=Math.pow(2,14),Uue=Math.pow(2,21),que=Math.pow(2,28),Vue=Math.pow(2,35),kue=Math.pow(2,42),Hue=Math.pow(2,49),Gue=Math.pow(2,56),jue=Math.pow(2,63),zue=function(t){return t<Lue?1:t<Fue?2:t<Uue?3:t<que?4:t<Vue?5:t<kue?6:t<Hue?7:t<Gue?8:t<jue?9:10},Que={encode:Oue,decode:Bue,encodingLength:zue},TF=Que,aF=(t,e,r=0)=>(TF.encode(t,e,r),e),uF=t=>TF.encodingLength(t),k_=(t,e)=>{let r=e.byteLength,n=uF(t),i=n+uF(r),s=new Uint8Array(i+r);return aF(t,s,0),aF(r,s,n),s.set(e,i),new H_(t,r,e,s)},H_=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}},_F=({name:t,code:e,encode:r})=>new G_(t,e,r),G_=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?k_(this.code,r):r.then(n=>k_(this.code,n))}else throw Error("Unknown type, must be binary type")}},CF=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Kue=_F({name:"sha2-256",code:18,encode:CF("SHA-256")}),Wue=_F({name:"sha2-512",code:19,encode:CF("SHA-512")}),$ue=Object.freeze({__proto__:null,sha256:Kue,sha512:Wue}),NF=0,Yue="identity",xF=EF,Jue=t=>k_(NF,xF(t)),Xue={code:NF,name:Yue,encode:xF,digest:Jue},Zue=Object.freeze({__proto__:null,identity:Xue});new TextEncoder,new TextDecoder;var cF={...Kae,...$ae,...Jae,...Zae,...rue,...hue,...pue,...wue,...Sue,...xue};({...$ue,...Zue});function OF(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ece(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?OF(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function DF(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var lF=DF("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),B_=DF("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=ece(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),tce={utf8:lF,"utf-8":lF,hex:cF.base16,latin1:B_,ascii:B_,binary:B_,...cF};function rce(t,e="utf8"){let r=tce[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?OF(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var W_="wc",PF=2,Yy="core",eo=`${W_}@2:${Yy}:`,RF={name:Yy,logger:"error"},BF={database:":memory:"},MF="crypto",j_="client_ed25519_seed",LF=Oe.ONE_DAY,FF="keychain",UF="0.3",qF="messages",VF="0.3",kF=Oe.SIX_HOURS,HF="publisher",GF="irn",jF="error",$_="wss://relay.walletconnect.com",z_="wss://relay.walletconnect.org",zF="relayer",Zn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},QF="_subscription",yn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},KF=Oe.ONE_SECOND,nce={database:":memory:"},WF="2.12.2",$F=1e4,YF="0.3",JF="WALLETCONNECT_CLIENT_ID",_i={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ice=Oe.THIRTY_DAYS,XF="subscription",ZF="0.3",eU=Oe.FIVE_SECONDS*1e3,tU="pairing",rU="0.3",sce=Oe.THIRTY_DAYS,yl={wc_pairingDelete:{req:{ttl:Oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:Oe.ONE_DAY,prompt:!1,tag:0}}},nd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Jn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},nU="history",iU="0.3",sU="expirer",Xn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},oU="0.3",oce=Oe.ONE_DAY,My="verify-api",wl="https://verify.walletconnect.com",Ly="https://verify.walletconnect.org",aU=[wl,Ly],uU="echo",cU="https://echo.walletconnect.com",Fy=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=FF,this.version=UF,this.initialized=!1,this.storagePrefix=eo,this.init=async()=>{if(!this.initialized){let n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();let i=this.keychain.get(n);if(typeof i>"u"){let{message:s}=ne.getInternalError("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=yt.generateChildLogger(r,this.name)}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ne.mapToObj(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ne.objToMap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Uy=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=MF,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();let i=await this.getClientSeed(),s=By.generateKeyPair(i);return By.encodeIss(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let i=ne.generateKeyPair();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();let s=await this.getClientSeed(),o=By.generateKeyPair(s),u=ne.generateRandomBytes32(),a=LF;return await By.signJWT(u,i,a,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();let u=this.getPrivateKey(i),a=ne.deriveSymKey(u,s);return this.setSymKey(a,o)},this.setSymKey=async(i,s)=>{this.isInitialized();let o=s||ne.hashKey(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();let u=ne.validateEncoding(o),a=iF.safeJsonStringify(s);if(ne.isTypeOneEnvelope(u)){let w=u.senderPublicKey,A=u.receiverPublicKey;i=await this.generateSharedKey(w,A)}let c=this.getSymKey(i),{type:f,senderPublicKey:d}=u;return ne.encrypt({type:f,symKey:c,message:a,senderPublicKey:d})},this.decode=async(i,s,o)=>{this.isInitialized();let u=ne.validateDecoding(s,o);if(ne.isTypeOneEnvelope(u)){let a=u.receiverPublicKey,c=u.senderPublicKey;i=await this.generateSharedKey(a,c)}try{let a=this.getSymKey(i),c=ne.decrypt({symKey:a,encoded:s});return iF.safeJsonParse(c)}catch(a){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(a)}},this.getPayloadType=i=>{let s=ne.deserialize(i);return ne.decodeTypeByte(s.type)},this.getPayloadSenderPublicKey=i=>{let s=ne.deserialize(i);return s.senderPublicKey?Nae.toString(s.senderPublicKey,ne.BASE16):void 0},this.core=e,this.logger=yt.generateChildLogger(r,this.name),this.keychain=n||new Fy(this.core,this.logger)}get context(){return yt.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(j_)}catch{e=ne.generateRandomBytes32(),await this.keychain.set(j_,e)}return rce(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},qy=class extends ws.IMessageTracker{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=qF,this.version=VF,this.initialized=!1,this.storagePrefix=eo,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();let s=ne.hashMessage(i),o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();let s=this.get(n),o=ne.hashMessage(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=yt.generateChildLogger(e,this.name),this.core=r}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ne.mapToObj(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ne.objToMap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Q_=class extends ws.IPublisher{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new uu.EventEmitter,this.name=HF,this.queue=new Map,this.publishTimeout=Oe.toMiliseconds(Oe.ONE_MINUTE),this.failedPublishTimeout=Oe.toMiliseconds(Oe.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});let u=s?.ttl||kF,a=ne.getRelayProtocolName(s),c=s?.prompt||!1,f=s?.tag||0,d=s?.id||an.getBigIntRpcId().toString(),w={topic:n,message:i,opts:{ttl:u,relay:a,prompt:c,tag:f,id:d}},A=`Failed to publish payload, please try again. id:${d} tag:${f}`,T=Date.now(),x,B=1;try{for(;x===void 0;){if(Date.now()-T>this.publishTimeout)throw new Error(A);this.logger.trace({id:d,attempts:B},`publisher.publish - attempt ${B}`),x=await await ne.createExpiringPromise(this.rpcPublish(n,i,u,a,c,f,d).catch(V=>this.logger.warn(V)),this.publishTimeout,A),B++,x||await new Promise(V=>setTimeout(V,this.failedPublishTimeout))}this.relayer.events.emit(Zn.publish,w),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:i,opts:s}})}catch(V){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(V),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw V;this.queue.set(d,w)}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=yt.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return yt.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,u){var a,c,f,d;let w={method:ne.getRelayProtocolApi(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:u};return ne.isUndefined((a=w.params)==null?void 0:a.prompt)&&((c=w.params)==null||delete c.prompt),ne.isUndefined((f=w.params)==null?void 0:f.tag)&&((d=w.params)==null||delete d.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:w}),this.relayer.request(w)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(id.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Zn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Zn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}},K_=class{constructor(){this.map=new Map,this.set=(e,r)=>{let n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let n=this.get(e);if(!this.exists(e,r))return;let i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}},ace=Object.defineProperty,uce=Object.defineProperties,cce=Object.getOwnPropertyDescriptors,fF=Object.getOwnPropertySymbols,lce=Object.prototype.hasOwnProperty,fce=Object.prototype.propertyIsEnumerable,hF=(t,e,r)=>e in t?ace(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rd=(t,e)=>{for(var r in e||(e={}))lce.call(e,r)&&hF(t,r,e[r]);if(fF)for(var r of fF(e))fce.call(e,r)&&hF(t,r,e[r]);return t},M_=(t,e)=>uce(t,cce(e)),Vy=class extends ws.ISubscriber{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new K_,this.events=new uu.EventEmitter,this.name=XF,this.version=ZF,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=eo,this.subscribeTimeout=Oe.toMiliseconds(Oe.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{let s=ne.getRelayProtocolName(i),o={topic:n,relay:s};this.pending.set(n,o);let u=await this.rpcSubscribe(n,s);return typeof u=="string"&&(this.onSubscribe(u,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),u}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;let i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{let u=new Oe.Watch;u.start(i);let a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),u.stop(i),s(!0)),u.elapsed(i)>=eU&&(clearInterval(a),u.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=yt.generateChildLogger(r,this.name),this.clientId=""}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){let n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{let i=ne.getRelayProtocolName(n);await this.rpcUnsubscribe(e,r,i);let s=ne.getSdkError("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){let n={method:ne.getRelayProtocolApi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ne.createExpiringPromise(this.relayer.request(n).catch(i=>this.logger.warn(i)),this.subscribeTimeout)?ne.hashMessage(e+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Zn.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;let r=e[0].relay,n={method:ne.getRelayProtocolApi(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ne.createExpiringPromise(this.relayer.request(n).catch(i=>this.logger.warn(i)),this.subscribeTimeout)}catch{this.relayer.events.emit(Zn.connection_stalled)}}rpcUnsubscribe(e,r,n){let i={method:ne.getRelayProtocolApi(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,M_(rd({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,rd({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,rd({},r)),this.topicMap.set(r.topic,e),this.events.emit(_i.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let r=this.subscriptions.get(e);if(!r){let{message:n}=ne.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});let n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(_i.deleted,M_(rd({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(_i.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){let n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(_i.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:r}=ne.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let r=await this.rpcBatchSubscribe(e);ne.isValidArray(r)&&this.onBatchSubscribe(r.map((n,i)=>M_(rd({},e[i]),{id:n})))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(id.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.events.on(_i.created,async e=>{let r=_i.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(_i.deleted,async e=>{let r=_i.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}},hce=Object.defineProperty,dF=Object.getOwnPropertySymbols,dce=Object.prototype.hasOwnProperty,gce=Object.prototype.propertyIsEnumerable,gF=(t,e,r)=>e in t?hce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pce=(t,e)=>{for(var r in e||(e={}))dce.call(e,r)&&gF(t,r,e[r]);if(dF)for(var r of dF(e))gce.call(e,r)&&gF(t,r,e[r]);return t},ky=class extends ws.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new uu.EventEmitter,this.name=zF,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=Oe.toMiliseconds(Oe.THIRTY_SECONDS+Oe.ONE_SECOND),this.request=async r=>{var n,i;this.logger.debug("Publishing Request Payload");let s=r.id||an.getBigIntRpcId().toString();await this.toEstablishConnection();try{let o=this.provider.request(r);this.requestsInFlight.set(s,{promise:o,request:r}),this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - attempt to publish...");let u=await new Promise(async(a,c)=>{let f=()=>{c(new Error(`relayer.request - publish interrupted, id: ${s}`))};this.provider.on(yn.disconnect,f);let d=await o;this.provider.off(yn.disconnect,f),a(d)});return this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - published"),u}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}finally{this.requestsInFlight.delete(s)}},this.resetPingTimeout=()=>{if(ne.isNode())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(Zn.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Zn.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(yn.payload,this.onPayloadHandler),this.provider.on(yn.connect,this.onConnectHandler),this.provider.on(yn.disconnect,this.onDisconnectHandler),this.provider.on(yn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?yt.generateChildLogger(e.logger,this.name):yt.pino(yt.getDefaultLoggerOptions({level:e.logger||jF})),this.messages=new qy(this.logger,e.core),this.subscriber=new Vy(this,this.logger),this.publisher=new Q_(this,this.logger),this.relayUrl=e?.relayUrl||$_,this.projectId=e.projectId,this.bundleId=ne.getBundleId(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${z_}...`),await this.restartTransport(z_)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},$F)}get context(){return yt.getLoggerContext(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"",s,o=u=>{u.topic===e&&(this.subscriber.off(_i.created,o),s())};return await Promise.all([new Promise(u=>{s=u,this.subscriber.on(_i.created,o)}),new Promise(async u=>{i=await this.subscriber.subscribe(e,r)||i,u()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await ne.createExpiringPromise(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect(),await this.createProvider()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(r,n)=>{let i=()=>{this.provider.off(yn.disconnect,i),n(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(yn.disconnect,i),await ne.createExpiringPromise(this.provider.connect(),Oe.toMiliseconds(Oe.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{n(s)}),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){this.logger.error(r);let n=r;if(!this.isConnectionStalled(n.message))throw r}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ne.isOnline())throw new Error("No internet connection detected. Please restart your network and try again.")}startPingTimeout(){var e,r,n,i,s;if(ne.isNode())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o)}}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new xae.JsonRpcProvider(new Lae.default(ne.formatRelayRpcUrl({sdkVersion:WF,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){let{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),an.isJsonRpcRequest(e)){if(!e.method.endsWith(QF))return;let r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(pce({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else an.isJsonRpcResponse(e)&&this.events.emit(Zn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Zn.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let r=an.formatJsonRpcResult(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(yn.payload,this.onPayloadHandler),this.provider.off(yn.connect,this.onConnectHandler),this.provider.off(yn.disconnect,this.onDisconnectHandler),this.provider.off(yn.error,this.onProviderErrorHandler)}async registerEventListeners(){let e=await ne.isOnline();ne.subscribeToNetworkChange(async r=>{e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.events.emit(Zn.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},Oe.toMiliseconds(KF))}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}},mce=Object.defineProperty,pF=Object.getOwnPropertySymbols,yce=Object.prototype.hasOwnProperty,wce=Object.prototype.propertyIsEnumerable,mF=(t,e,r)=>e in t?mce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yF=(t,e)=>{for(var r in e||(e={}))yce.call(e,r)&&mF(t,r,e[r]);if(pF)for(var r of pF(e))wce.call(e,r)&&mF(t,r,e[r]);return t},Hy=class extends ws.IStore{constructor(e,r,n,i=eo,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=YF,this.cached=[],this.initialized=!1,this.storagePrefix=eo,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ne.isUndefined(o)?this.map.set(this.getKey(o),o):ne.isProposalStruct(o)?this.map.set(o.id,o):ne.isSessionStruct(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,u)=>{this.isInitialized(),this.map.has(o)?await this.update(o,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:u}),this.map.set(o,u),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(u=>Object.keys(o).every(a=>Fae.default(u[a],o[a]))):this.values),this.update=async(o,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:u});let a=yF(yF({},this.getData(o)),u);this.map.set(o,a),await this.persist()},this.delete=async(o,u)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:u}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=yt.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){let{message:i}=ne.getInternalError("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}let{message:n}=ne.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:r}=ne.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Gy=class{constructor(e,r){this.core=e,this.logger=r,this.name=tU,this.version=rU,this.events=new Bae.default,this.initialized=!1,this.storagePrefix=eo,this.ignoredPayloadTypes=[ne.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();let i=ne.generateRandomBytes32(),s=await this.core.crypto.setSymKey(i),o=ne.calcExpiry(Oe.FIVE_MINUTES),u={protocol:GF},a={topic:s,expiry:o,relay:u,active:!1},c=ne.formatUri({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:u,expiryTimestamp:o,methods:n?.methods});return await this.pairings.set(s,a),await this.core.relayer.subscribe(s),this.core.expirer.set(s,o),{topic:s,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);let{topic:i,symKey:s,relay:o,expiryTimestamp:u,methods:a}=ne.parseUri(n.uri),c;if(this.pairings.keys.includes(i)&&(c=this.pairings.get(i),c.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);let f=u||ne.calcExpiry(Oe.FIVE_MINUTES),d={topic:i,relay:o,expiry:f,active:!1,methods:a};return await this.pairings.set(i,d),this.core.expirer.set(i,f),n.activatePairing&&await this.activate({topic:i}),this.events.emit(nd.create,d),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),d},this.activate=async({topic:n})=>{this.isInitialized();let i=ne.calcExpiry(Oe.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);let{topic:i}=n;if(this.pairings.keys.includes(i)){let s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:u,reject:a}=ne.createDelayedPromise();this.events.once(ne.engineEvent("pairing_ping",s),({error:c})=>{c?a(c):u()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);let{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ne.getSdkError("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{let o=an.formatJsonRpcRequest(i,s),u=await this.core.crypto.encode(n,o),a=yl[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,u,a),o.id},this.sendResult=async(n,i,s)=>{let o=an.formatJsonRpcResult(n,s),u=await this.core.crypto.encode(i,o),a=await this.core.history.get(i,n),c=yl[a.request.method].res;await this.core.relayer.publish(i,u,c),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{let o=an.formatJsonRpcError(n,s),u=await this.core.crypto.encode(i,o),a=await this.core.history.get(i,n),c=yl[a.request.method]?yl[a.request.method].res:yl.unregistered_method.res;await this.core.relayer.publish(i,u,c),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ne.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{let n=this.pairings.getAll().filter(i=>ne.isExpired(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{let{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{let{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{let{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(nd.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{let{id:s}=i;setTimeout(()=>{an.isJsonRpcResult(i)?this.events.emit(ne.engineEvent("pairing_ping",s),{}):an.isJsonRpcError(i)&&this.events.emit(ne.engineEvent("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{let{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(nd.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{let{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;let u=ne.getSdkError("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,u),this.logger.error(u)}catch(u){await this.sendError(s,n,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(ne.getSdkError("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var i;if(!ne.isValidParams(n)){let{message:o}=ne.getInternalError("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(o)}if(!ne.isValidUrl(n.uri)){let{message:o}=ne.getInternalError("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(o)}let s=ne.parseUri(n.uri);if(!((i=s?.relay)!=null&&i.protocol)){let{message:o}=ne.getInternalError("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(o)}if(!(s!=null&&s.symKey)){let{message:o}=ne.getInternalError("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(o)}if(s!=null&&s.expiryTimestamp&&Oe.toMiliseconds(s?.expiryTimestamp)<Date.now()){let{message:o}=ne.getInternalError("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}},this.isValidPing=async n=>{if(!ne.isValidParams(n)){let{message:s}=ne.getInternalError("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!ne.isValidParams(n)){let{message:s}=ne.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}let{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!ne.isValidString(n,!1)){let{message:i}=ne.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){let{message:i}=ne.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(ne.isExpired(this.pairings.get(n).expiry)){await this.deletePairing(n);let{message:i}=ne.getInternalError("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=yt.generateChildLogger(r,this.name),this.pairings=new Hy(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Zn.message,async e=>{let{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;let i=await this.core.crypto.decode(r,n);try{an.isJsonRpcRequest(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):an.isJsonRpcResponse(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Xn.expired,async e=>{let{topic:r}=ne.parseExpirerTarget(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(nd.expire,{topic:r}))})}},jy=class extends ws.IJsonRpcHistory{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new uu.EventEmitter,this.name=nU,this.version=iU,this.cached=[],this.initialized=!1,this.storagePrefix=eo,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;let o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:ne.calcExpiry(Oe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Jn.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;let i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=an.isJsonRpcError(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Jn.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Jn.deleted,s)}}),this.persist()},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=yt.generateChildLogger(r,this.name)}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;let n={topic:r.topic,request:an.formatJsonRpcRequest(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let r=this.records.get(e);if(!r){let{message:n}=ne.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jn.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:r}=ne.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Jn.created,e=>{let r=Jn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Jn.updated,e=>{let r=Jn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Jn.deleted,e=>{let r=Jn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(id.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{Oe.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Jn.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},zy=class extends ws.IExpirer{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new uu.EventEmitter,this.name=sU,this.version=oU,this.cached=[],this.initialized=!1,this.storagePrefix=eo,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{let i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();let s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Xn.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();let i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){let i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Xn.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=yt.generateChildLogger(r,this.name)}get context(){return yt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ne.formatTopicTarget(e);if(typeof e=="number")return ne.formatIdTarget(e);let{message:r}=ne.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Xn.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:r}=ne.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let r=this.expirations.get(e);if(!r){let{message:n}=ne.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){let{expiry:n}=r;Oe.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Xn.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(id.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Xn.created,e=>{let r=Xn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Xn.expired,e=>{let r=Xn.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Xn.deleted,e=>{let r=Xn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=ne.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}},Qy=class extends ws.IVerify{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=My,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||ne.isReactNative()||!ne.isBrowser())return;let i=this.getVerifyUrl(n?.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Ly;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";let i=this.getVerifyUrl(n?.verifyUrl),s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(o),s=await this.fetchAttestation(n.attestationId,Ly)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);let s=this.startAbortTimer(Oe.ONE_SECOND*2),o=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n,i=s=>{s.data==="verify_ready"&&(this.onInit(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{let o=document.getElementById(My);if(o)return this.iframe=o,this.onInit(),s();window.addEventListener("message",i);let u=document.createElement("iframe");u.id=My,u.src=`${this.verifyUrl}/${this.projectId}`,u.style.display="none",document.body.append(u),this.iframe=u,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},Oe.toMiliseconds(Oe.FIVE_SECONDS)))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let i=n||wl;return aU.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${wl}`),i=wl),i},this.logger=yt.generateChildLogger(r,this.name),this.verifyUrl=wl,this.abortController=new AbortController,this.isDevEnv=ne.isNode()&&S.default.env.IS_VITEST}get context(){return yt.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Oe.toMiliseconds(e))}},Ky=class extends ws.IEchoClient{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=uU,this.registerDeviceToken=async n=>{let{clientId:i,token:s,notificationType:o,enableEncrypted:u=!1}=n,a=`${cU}/${this.projectId}/clients`;await Uae.default(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:u})})},this.logger=yt.generateChildLogger(r,this.context)}},vce=Object.defineProperty,wF=Object.getOwnPropertySymbols,Ace=Object.prototype.hasOwnProperty,Ece=Object.prototype.propertyIsEnumerable,vF=(t,e,r)=>e in t?vce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,AF=(t,e)=>{for(var r in e||(e={}))Ace.call(e,r)&&vF(t,r,e[r]);if(wF)for(var r of wF(e))Ece.call(e,r)&&vF(t,r,e[r]);return t},Wy=class t extends ws.ICore{constructor(e){var r;super(e),this.protocol=W_,this.version=PF,this.name=Yy,this.events=new uu.EventEmitter,this.initialized=!1,this.on=(o,u)=>this.events.on(o,u),this.once=(o,u)=>this.events.once(o,u),this.off=(o,u)=>this.events.off(o,u),this.removeListener=(o,u)=>this.events.removeListener(o,u),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||$_,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let n=yt.getDefaultLoggerOptions({level:typeof e?.logger=="string"&&e.logger?e.logger:RF.logger}),{logger:i,chunkLoggerController:s}=yt.generatePlatformLogger({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,u;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=yt.generateChildLogger(i,this.name),this.heartbeat=new id.HeartBeat,this.crypto=new Uy(this,this.logger,e?.keychain),this.history=new jy(this,this.logger),this.expirer=new zy(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Mae.default(AF(AF({},BF),e?.storageOptions)),this.relayer=new ky({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Gy(this,this.logger),this.verify=new Qy(this.projectId||"",this.logger),this.echoClient=new Ky(this.projectId||"",this.logger)}static async init(e){let r=new t(e);await r.initialize();let n=await r.crypto.getClientId();return await r.storage.setItem(JF,n),r}get context(){return yt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},bce=Wy;de.CORE_CONTEXT=Yy,de.CORE_DEFAULT=RF,de.CORE_PROTOCOL=W_,de.CORE_STORAGE_OPTIONS=BF,de.CORE_STORAGE_PREFIX=eo,de.CORE_VERSION=PF,de.CRYPTO_CLIENT_SEED=j_,de.CRYPTO_CONTEXT=MF,de.CRYPTO_JWT_TTL=LF,de.Core=bce,de.Crypto=Uy,de.ECHO_CONTEXT=uU,de.ECHO_URL=cU,de.EXPIRER_CONTEXT=sU,de.EXPIRER_DEFAULT_TTL=oce,de.EXPIRER_EVENTS=Xn,de.EXPIRER_STORAGE_VERSION=oU,de.EchoClient=Ky,de.Expirer=zy,de.HISTORY_CONTEXT=nU,de.HISTORY_EVENTS=Jn,de.HISTORY_STORAGE_VERSION=iU,de.JsonRpcHistory=jy,de.KEYCHAIN_CONTEXT=FF,de.KEYCHAIN_STORAGE_VERSION=UF,de.KeyChain=Fy,de.MESSAGES_CONTEXT=qF,de.MESSAGES_STORAGE_VERSION=VF,de.MessageTracker=qy,de.PAIRING_CONTEXT=tU,de.PAIRING_DEFAULT_TTL=sce,de.PAIRING_EVENTS=nd,de.PAIRING_RPC_OPTS=yl,de.PAIRING_STORAGE_VERSION=rU,de.PENDING_SUB_RESOLUTION_TIMEOUT=eU,de.PUBLISHER_CONTEXT=HF,de.PUBLISHER_DEFAULT_TTL=kF,de.Pairing=Gy,de.RELAYER_CONTEXT=zF,de.RELAYER_DEFAULT_LOGGER=jF,de.RELAYER_DEFAULT_PROTOCOL=GF,de.RELAYER_DEFAULT_RELAY_URL=$_,de.RELAYER_EVENTS=Zn,de.RELAYER_FAILOVER_RELAY_URL=z_,de.RELAYER_PROVIDER_EVENTS=yn,de.RELAYER_RECONNECT_TIMEOUT=KF,de.RELAYER_SDK_VERSION=WF,de.RELAYER_STORAGE_OPTIONS=nce,de.RELAYER_SUBSCRIBER_SUFFIX=QF,de.RELAYER_TRANSPORT_CUTOFF=$F,de.Relayer=ky,de.STORE_STORAGE_VERSION=YF,de.SUBSCRIBER_CONTEXT=XF,de.SUBSCRIBER_DEFAULT_TTL=ice,de.SUBSCRIBER_EVENTS=_i,de.SUBSCRIBER_STORAGE_VERSION=ZF,de.Store=Hy,de.Subscriber=Vy,de.TRUSTED_VERIFY_URLS=aU,de.VERIFY_CONTEXT=My,de.VERIFY_FALLBACK_SERVER=Ly,de.VERIFY_SERVER=wl,de.Verify=Qy,de.WALLETCONNECT_CLIENT_ID=JF,de.default=Wy});var _U=D(Be=>{"use strict";h();Object.defineProperty(Be,"__esModule",{value:!0});var un=lU(),Jy=(NS(),_e(CS)),dU=KS(),G=Qh(),gU=Ds(),Dt=za(),qe=(Yh(),_e(Fr));function Sce(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Ice=Sce(gU),i2="wc",s2=2,o2="client",r1=`${i2}@${s2}:${o2}:`,Xy={name:o2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Tce={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_authenticate:"session_authenticate",session_request_expire:"session_request_expire"},_ce={database:":memory:"},Y_="WALLETCONNECT_DEEPLINK_CHOICE",Cce={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Nce="history",xce="0.3",pU="proposal",Oce=Dt.THIRTY_DAYS,mU="Proposal expired",yU="session",cu=Dt.SEVEN_DAYS,wU="engine",wn={wc_sessionPropose:{req:{ttl:Dt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Dt.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Dt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Dt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Dt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Dt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Dt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Dt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Dt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Dt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Dt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Dt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Dt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Dt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Dt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Dt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Dt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Dt.ONE_HOUR,prompt:!1,tag:1117}}},Zy={min:Dt.FIVE_MINUTES,max:Dt.SEVEN_DAYS},vs={idle:"IDLE",active:"ACTIVE"},vU="request",AU=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],EU="wc",Dce=1.5,bU="auth",SU="authKeys",IU="pairingTopics",TU="requests",ud=`${EU}@${1.5}:${bU}:`,ad=`${ud}:PUB_KEY`,Pce=Object.defineProperty,Rce=Object.defineProperties,Bce=Object.getOwnPropertyDescriptors,fU=Object.getOwnPropertySymbols,Mce=Object.prototype.hasOwnProperty,Lce=Object.prototype.propertyIsEnumerable,hU=(t,e,r)=>e in t?Pce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,br=(t,e)=>{for(var r in e||(e={}))Mce.call(e,r)&&hU(t,r,e[r]);if(fU)for(var r of fU(e))Lce.call(e,r)&&hU(t,r,e[r]);return t},vl=(t,e)=>Rce(t,Bce(e)),J_=class extends dU.IEngine{constructor(e){super(e),this.name=wU,this.events=new Ice.default,this.initialized=!1,this.requestQueue={state:vs.idle,queue:[]},this.sessionRequestQueue={state:vs.idle,queue:[]},this.requestQueueDelay=Dt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(wn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Dt.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();let n=vl(br({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);let{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:u,relays:a}=n,c=i,f,d=!1;try{c&&(d=this.client.core.pairing.pairings.get(c).active)}catch(L){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),L}if(!c||!d){let{topic:L,uri:k}=await this.client.core.pairing.create();c=L,f=k}if(!c){let{message:L}=G.getInternalError("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(L)}let w=await this.client.core.crypto.generateKeyPair(),A=wn.wc_sessionPropose.req.ttl||Dt.FIVE_MINUTES,T=G.calcExpiry(A),x=br({requiredNamespaces:s,optionalNamespaces:o,relays:a??[{protocol:un.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:T},u&&{sessionProperties:u}),{reject:B,resolve:V,done:U}=G.createDelayedPromise(A,mU);this.events.once(G.engineEvent("session_connect"),async({error:L,session:k})=>{if(L)B(L);else if(k){k.self.publicKey=w;let H=vl(br({},k),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(k.topic,H),await this.setExpiry(k.topic,k.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:k.peer.metadata}),V(H)}});let Q=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:x,throwOnFailedPublish:!0});return await this.setProposal(Q,br({id:Q},x)),{uri:f,approval:U}},this.pair=async r=>{await this.isInitialized();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async r=>{await this.isInitialized();try{await this.isValidApprove(r)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),U}let{id:n,relayProtocol:i,namespaces:s,sessionProperties:o,sessionConfig:u}=r,a;try{a=this.client.proposal.get(n)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${n}) failed`),U}let{pairingTopic:c,proposer:f,requiredNamespaces:d,optionalNamespaces:w}=a;c=c||"";let A=await this.client.core.crypto.generateKeyPair(),T=f.publicKey,x=await this.client.core.crypto.generateSharedKey(A,T),B=br(br({relay:{protocol:i??"irn"},namespaces:s,pairingTopic:c,controller:{publicKey:A,metadata:this.client.metadata},expiry:G.calcExpiry(cu)},o&&{sessionProperties:o}),u&&{sessionConfig:u});await this.client.core.relayer.subscribe(x);let V=vl(br({},B),{topic:x,requiredNamespaces:d,optionalNamespaces:w,pairingTopic:c,acknowledged:!1,self:B.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:A});await this.client.session.set(x,V);try{await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}),await this.sendRequest({topic:x,method:"wc_sessionSettle",params:B,throwOnFailedPublish:!0})}catch(U){throw this.client.logger.error(U),this.client.session.delete(x,G.getSdkError("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),U}return await this.client.core.pairing.updateMetadata({topic:c,metadata:f.metadata}),await this.client.proposal.delete(n,G.getSdkError("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}),await this.setExpiry(x,G.calcExpiry(cu)),{topic:x,acknowledged:()=>new Promise(U=>setTimeout(()=>U(this.client.session.get(x)),500))}},this.reject=async r=>{await this.isInitialized();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}let{id:n,reason:i}=r,s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i}),await this.client.proposal.delete(n,G.getSdkError("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}let{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:u}=G.createDelayedPromise(),a=qe.payloadId(),c=qe.getBigIntRpcId().toString(),f=this.client.session.get(n).namespaces;return this.events.once(G.engineEvent("session_update",a),({error:d})=>{d?u(d):o()}),await this.client.session.update(n,{namespaces:i}),this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:c}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:f}),u(d)}),{acknowledged:s}},this.extend=async r=>{await this.isInitialized();try{await this.isValidExtend(r)}catch(a){throw this.client.logger.error("extend() -> isValidExtend() failed"),a}let{topic:n}=r,i=qe.payloadId(),{done:s,resolve:o,reject:u}=G.createDelayedPromise();return this.events.once(G.engineEvent("session_extend",i),({error:a})=>{a?u(a):o()}),await this.setExpiry(n,G.calcExpiry(cu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(a=>{u(a)}),{acknowledged:s}},this.request=async r=>{await this.isInitialized();try{await this.isValidRequest(r)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}let{chainId:n,request:i,topic:s,expiry:o=wn.wc_sessionRequest.req.ttl}=r,u=this.client.session.get(s),a=qe.payloadId(),c=qe.getBigIntRpcId().toString(),{done:f,resolve:d,reject:w}=G.createDelayedPromise(o,"Request expired. Please try again.");return this.events.once(G.engineEvent("session_request",a),({error:A,result:T})=>{A?w(A):d(T)}),await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:vl(br({},i),{expiryTimestamp:G.calcExpiry(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(T=>w(T)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),A()}),new Promise(async A=>{var T;if(!((T=u.sessionConfig)!=null&&T.disableDeepLink)){let x=await G.getDeepLink(this.client.core.storage,Y_);G.handleDeeplinkRedirect({id:a,topic:s,wcDeepLink:x})}A()}),f()]).then(A=>A[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);let{topic:n,response:i}=r,{id:s}=i;qe.isJsonRpcResult(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):qe.isJsonRpcError(i)&&await this.sendError({id:s,topic:n,error:i.error}),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}let{topic:n}=r;if(this.client.session.keys.includes(n)){let i=qe.payloadId(),s=qe.getBigIntRpcId().toString(),{done:o,resolve:u,reject:a}=G.createDelayedPromise();this.events.once(G.engineEvent("session_ping",i),({error:c})=>{c?a(c):u()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);let{topic:n,event:i,chainId:s}=r,o=qe.getBigIntRpcId().toString();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);let{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:G.getSdkError("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{let{message:i}=G.getInternalError("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>G.isSessionCompatible(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async r=>{this.isInitialized(),this.isValidAuthenticate(r);let{chains:n,statement:i="",uri:s,domain:o,nonce:u,type:a,exp:c,nbf:f,methods:d=[]}=r,w=[...r.resources||[]],{topic:A,uri:T}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:A,uri:T}});let x=await this.client.core.crypto.generateKeyPair(),B=G.hashKey(x);if(await Promise.all([this.client.auth.authKeys.set(ad,{responseTopic:B,publicKey:x}),this.client.auth.pairingTopics.set(B,{topic:B,pairingTopic:A})]),await this.client.core.relayer.subscribe(B),this.client.logger.info(`sending request to new pairing topic: ${A}`),d.length>0){let{namespace:R}=G.parseChainId(n[0]),l=G.createEncodedRecap(R,"request",d);G.getRecapFromResources(w)&&(l=G.mergeEncodedRecaps(l,w.pop())),w.push(l)}let V=G.calcExpiry(wn.wc_sessionPropose.req.ttl),U={authPayload:{type:a??"caip122",chains:n,statement:i,aud:s,domain:o,version:"1",nonce:u,iat:new Date().toISOString(),exp:c,nbf:f,resources:w},requester:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:V},Q={eip155:{chains:n,methods:[...new Set(["personal_sign",...d])],events:["chainChanged","accountsChanged"]}},L={requiredNamespaces:{},optionalNamespaces:Q,relays:[{protocol:"irn"}],proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:V},{done:k,resolve:H,reject:q}=G.createDelayedPromise(wn.wc_sessionAuthenticate.req.ttl,"Request expired"),v=async({error:R,session:l})=>{if(this.events.off(G.engineEvent("session_request",P),C),R)q(R);else if(l){l.self.publicKey=x,await this.client.session.set(l.topic,l),await this.setExpiry(l.topic,l.expiry),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:l.peer.metadata});let g=this.client.session.get(l.topic);H({session:g})}},C=async R=>{if(R.error){let M=G.getSdkError("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return R.error.code===M.code?void 0:(this.events.off(G.engineEvent("session_connect"),v),q(R.error.message))}this.events.off(G.engineEvent("session_connect"),v);let{cacaos:l,responder:g}=R.result,y=[],E=[];for(let M of l){await G.validateSignedCacao({cacao:M,projectId:this.client.core.projectId})||(this.client.logger.error(M,"Signature verification failed"),q(G.getSdkError("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:N}=M,m=G.getRecapFromResources(N.resources),O=[G.getNamespacedDidChainId(N.iss)],Y=G.getDidAddress(N.iss);if(m){let $=G.getMethodsFromRecap(m),b=G.getChainsFromRecap(m);y.push(...$),O.push(...b)}for(let $ of O)E.push(`${$}:${Y}`)}let I=await this.client.core.crypto.generateSharedKey(x,g.publicKey),_;y.length>0&&(_={topic:I,acknowledged:!0,self:{publicKey:x,metadata:this.client.metadata},peer:g,controller:g.publicKey,expiry:G.calcExpiry(cu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:A,namespaces:G.buildNamespacesFromAuth([...new Set(y)],[...new Set(E)])},await this.client.core.relayer.subscribe(I),await this.client.session.set(I,_),_=this.client.session.get(I)),H({auths:l,session:_})},P=qe.payloadId(),F=qe.payloadId();this.events.once(G.engineEvent("session_connect"),v),this.events.once(G.engineEvent("session_request",P),C);try{await Promise.all([this.sendRequest({topic:A,method:"wc_sessionAuthenticate",params:U,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:A,method:"wc_sessionPropose",params:L,expiry:wn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:F})])}catch(R){throw this.events.off(G.engineEvent("session_connect"),v),this.events.off(G.engineEvent("session_request",P),C),R}return await this.setProposal(F,br({id:F},L)),await this.client.auth.requests.set(P,{authPayload:U.authPayload,requester:U.requester,expiryTimestamp:V,id:P,pairingTopic:A,verifyContext:{}}),{uri:T,response:k}},this.approveSessionAuthenticate=async r=>{this.isInitialized();let{id:n,auths:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);let o=s.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),a=G.hashKey(o),c={type:G.TYPE_1,receiverPublicKey:o,senderPublicKey:u},f=[],d=[];for(let T of i){if(!await G.validateSignedCacao({cacao:T,projectId:this.client.core.projectId})){let Q=G.getSdkError("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:a,error:Q,encodeOpts:c}),new Error(Q.message)}let{p:x}=T,B=G.getRecapFromResources(x.resources),V=[G.getNamespacedDidChainId(x.iss)],U=G.getDidAddress(x.iss);if(B){let Q=G.getMethodsFromRecap(B),L=G.getChainsFromRecap(B);f.push(...Q),V.push(...L)}for(let Q of V)d.push(`${Q}:${U}`)}let w=await this.client.core.crypto.generateSharedKey(u,o),A;return f?.length>0&&(A={topic:w,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:o,metadata:s.requester.metadata},controller:o,expiry:G.calcExpiry(cu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:G.buildNamespacesFromAuth([...new Set(f)],[...new Set(d)])},await this.client.core.relayer.subscribe(w),await this.client.session.set(w,A)),await this.sendResult({topic:a,id:n,result:{cacaos:i,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:c,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(n,{message:"fullfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),{session:A}},this.rejectSessionAuthenticate=async r=>{await this.isInitialized();let{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);let o=s.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),a=G.hashKey(o),c={type:G.TYPE_1,receiverPublicKey:o,senderPublicKey:u};await this.sendError({id:n,topic:a,error:i,encodeOpts:c}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,G.getSdkError("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();let{request:n,iss:i}=r;return G.formatMessage(n,i)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{let n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,u;return((o=s.peerMetadata)==null?void 0:o.url)&&((u=s.peerMetadata)==null?void 0:u.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{let{topic:n,expirerHasDeleted:i=!1,emitEvent:s=!0,id:o=0}=r,{self:u}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,G.getSdkError("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),i||this.client.core.expirer.del(n),this.client.core.storage.removeItem(Y_).catch(a=>this.client.logger.warn(a)),this.getPendingSessionRequests().forEach(a=>{a.topic===n&&this.deletePendingSessionRequest(a.id,G.getSdkError("USER_DISCONNECTED"))}),s&&this.client.events.emit("session_delete",{id:o,topic:n})},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,G.getSdkError("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=vs.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,G.calcExpiry(wn.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{let{id:n,topic:i,params:s,verifyContext:o}=r,u=s.request.expiryTimestamp||G.calcExpiry(wn.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o}),u&&this.client.core.expirer.set(n,u)},this.sendRequest=async r=>{let{topic:n,method:i,params:s,expiry:o,relayRpcId:u,clientRpcId:a,throwOnFailedPublish:c}=r,f=qe.formatJsonRpcRequest(i,s,a);if(G.isBrowser()&&AU.includes(i)){let A=G.hashMessage(JSON.stringify(f));this.client.core.verify.register({attestationId:A})}let d;try{d=await this.client.core.crypto.encode(n,f)}catch(A){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),A}let w=wn[i].req;return o&&(w.ttl=o),u&&(w.id=u),this.client.core.history.set(n,f),c?(w.internal=vl(br({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,d,w)):this.client.core.relayer.publish(n,d,w).catch(A=>this.client.logger.error(A)),f.id},this.sendResult=async r=>{let{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:u}=r,a=qe.formatJsonRpcResult(n,s),c;try{c=await this.client.core.crypto.encode(i,a,u)}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),w}let f;try{f=await this.client.core.history.get(i,n)}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),w}let d=wn[f.request.method].res;o?(d.internal=vl(br({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(w=>this.client.logger.error(w)),await this.client.core.history.resolve(a)},this.sendError=async r=>{let{id:n,topic:i,error:s,encodeOpts:o}=r,u=qe.formatJsonRpcError(n,s),a;try{a=await this.client.core.crypto.encode(i,u,o)}catch(d){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),d}let c;try{c=await this.client.core.history.get(i,n)}catch(d){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),d}let f=wn[c.request.method].res;this.client.core.relayer.publish(i,a,f),await this.client.core.history.resolve(u)},this.cleanup=async()=>{let r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;G.isExpired(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{G.isExpired(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===vs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=vs.active;let r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=vs.idle},this.processRequest=r=>{let{topic:n,payload:i}=r,s=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:s}))switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{let{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{let{topic:n}=r,{message:i}=G.getInternalError("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=r=>{let{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(r,n)=>{let{params:i,id:s}=n;try{this.isValidConnect(br({},n.params));let o=i.expiryTimestamp||G.calcExpiry(wn.wc_sessionPropose.req.ttl),u=br({id:s,pairingTopic:r,expiryTimestamp:o},i);await this.setProposal(s,u);let a=G.hashMessage(JSON.stringify(n)),c=await this.getVerifyContext(a,u.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:u,verifyContext:c})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{let{id:i}=n;if(qe.isJsonRpcResult(n)){let{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});let o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});let u=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});let a=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let c=await this.client.core.crypto.generateSharedKey(u,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});let f=await this.client.core.relayer.subscribe(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else if(qe.isJsonRpcError(n)){await this.client.proposal.delete(i,G.getSdkError("USER_DISCONNECTED"));let s=G.engineEvent("session_connect");if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners, 954`);this.events.emit(G.engineEvent("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(r,n)=>{let{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);let{relay:o,controller:u,expiry:a,namespaces:c,sessionProperties:f,pairingTopic:d,sessionConfig:w}=n.params,A=br(br({topic:r,relay:o,expiry:a,namespaces:c,acknowledged:!0,pairingTopic:d,requiredNamespaces:{},optionalNamespaces:{},controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},f&&{sessionProperties:f}),w&&{sessionConfig:w});await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0});let T=G.engineEvent("session_connect");if(this.events.listenerCount(T)===0)throw new Error(`emitting ${T} without any listeners 997`);this.events.emit(G.engineEvent("session_connect"),{session:A}),this.cleanupDuplicatePairings(A)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{let{id:i}=n;qe.isJsonRpcResult(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(G.engineEvent("session_approve",i),{})):qe.isJsonRpcError(n)&&(await this.client.session.delete(r,G.getSdkError("USER_DISCONNECTED")),this.events.emit(G.engineEvent("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{let{params:i,id:s}=n;try{let o=`${r}_session_update`,u=G.MemoryStore.get(o);if(u&&this.isRequestOutOfSync(u,s)){this.client.logger.info(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:G.getSdkError("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(br({topic:r},i));try{G.MemoryStore.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(a){throw G.MemoryStore.delete(o),a}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{let{id:i}=n,s=G.engineEvent("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);qe.isJsonRpcResult(n)?this.events.emit(G.engineEvent("session_update",i),{}):qe.isJsonRpcError(n)&&this.events.emit(G.engineEvent("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{let{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,G.calcExpiry(cu)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{let{id:i}=n,s=G.engineEvent("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);qe.isJsonRpcResult(n)?this.events.emit(G.engineEvent("session_extend",i),{}):qe.isJsonRpcError(n)&&this.events.emit(G.engineEvent("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{let{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{let{id:i}=n,s=G.engineEvent("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{qe.isJsonRpcResult(n)?this.events.emit(G.engineEvent("session_ping",i),{}):qe.isJsonRpcError(n)&&this.events.emit(G.engineEvent("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{let{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(un.RELAYER_EVENTS.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:G.getSdkError("USER_DISCONNECTED")})])}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{let{id:i,params:s}=n;try{await this.isValidRequest(br({topic:r},s));let o=G.hashMessage(JSON.stringify(qe.formatJsonRpcRequest("wc_sessionRequest",s,i))),u=this.client.session.get(r),a=await this.getVerifyContext(o,u.peer.metadata),c={id:i,topic:r,params:s,verifyContext:a};await this.setPendingSessionRequest(c),this.addSessionRequestToSessionRequestQueue(c),this.processSessionRequestQueue()}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{let{id:i}=n,s=G.engineEvent("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);qe.isJsonRpcResult(n)?this.events.emit(G.engineEvent("session_request",i),{result:n.result}):qe.isJsonRpcError(n)&&this.events.emit(G.engineEvent("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{let{id:i,params:s}=n;try{let o=`${r}_session_event_${s.event.name}`,u=G.MemoryStore.get(o);if(u&&this.isRequestOutOfSync(u,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(br({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),G.MemoryStore.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,n)=>{let{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),qe.isJsonRpcResult(n)?this.events.emit(G.engineEvent("session_request",i),{result:n.result}):qe.isJsonRpcError(n)&&this.events.emit(G.engineEvent("session_request",i),{error:n.error})},this.onSessionAuthenticateRequest=async(r,n)=>{let{requester:i,authPayload:s,expiryTimestamp:o}=n.params,u=G.hashMessage(JSON.stringify(n)),a=await this.getVerifyContext(u,this.client.metadata),c={requester:i,pairingTopic:r,id:n.id,authPayload:s,verifyContext:a,expiryTimestamp:o};await this.client.auth.requests.set(n.id,c),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id})},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=vs.idle,this.processSessionRequestQueue()},Dt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{let i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{let o=s.request.id,u=G.engineEvent("session_request",o);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(G.engineEvent("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===vs.active){this.client.logger.info("session request queue is already active.");return}let r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=vs.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;let n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,qe.formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async r=>{if(!G.isValidParams(r)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(a)}let{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:u}=r;if(G.isUndefined(n)||await this.isValidPairingTopic(n),!G.isValidRelays(u,!0)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(a)}!G.isUndefined(i)&&G.isValidObject(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!G.isUndefined(s)&&G.isValidObject(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),G.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{let i=G.isValidRequiredNamespaces(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!G.isValidParams(r))throw new Error(G.getInternalError("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);let u=this.client.proposal.get(n),a=G.isValidNamespaces(i,"approve()");if(a)throw new Error(a.message);let c=G.isConformingNamespaces(u.requiredNamespaces,i,"approve()");if(c)throw new Error(c.message);if(!G.isValidString(s,!0)){let{message:f}=G.getInternalError("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}G.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!G.isValidParams(r)){let{message:s}=G.getInternalError("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}let{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!G.isValidErrorReason(i)){let{message:s}=G.getInternalError("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!G.isValidParams(r)){let{message:c}=G.getInternalError("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}let{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!G.isValidRelay(n)){let{message:c}=G.getInternalError("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}let u=G.isValidController(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);let a=G.isValidNamespaces(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);if(G.isExpired(o)){let{message:c}=G.getInternalError("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async r=>{if(!G.isValidParams(r)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(a)}let{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);let s=this.client.session.get(n),o=G.isValidNamespaces(i,"update()");if(o)throw new Error(o.message);let u=G.isConformingNamespaces(s.requiredNamespaces,i,"update()");if(u)throw new Error(u.message)},this.isValidExtend=async r=>{if(!G.isValidParams(r)){let{message:i}=G.getInternalError("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}let{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!G.isValidParams(r)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(a)}let{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);let{namespaces:u}=this.client.session.get(n);if(!G.isValidNamespacesChainId(u,s)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(a)}if(!G.isValidRequest(i)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(a)}if(!G.isValidNamespacesRequest(u,s,i.method)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(a)}if(o&&!G.isValidRequestExpiry(o,Zy)){let{message:a}=G.getInternalError("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Zy.min} and ${Zy.max}`);throw new Error(a)}},this.isValidRespond=async r=>{var n;if(!G.isValidParams(r)){let{message:o}=G.getInternalError("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}let{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!G.isValidResponse(s)){let{message:o}=G.getInternalError("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!G.isValidParams(r)){let{message:i}=G.getInternalError("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!G.isValidParams(r)){let{message:u}=G.getInternalError("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(u)}let{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);let{namespaces:o}=this.client.session.get(n);if(!G.isValidNamespacesChainId(o,s)){let{message:u}=G.getInternalError("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(u)}if(!G.isValidEvent(i)){let{message:u}=G.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}if(!G.isValidNamespacesEvent(o,s,i.name)){let{message:u}=G.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}},this.isValidDisconnect=async r=>{if(!G.isValidParams(r)){let{message:i}=G.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}let{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=r=>{let{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!G.isValidString(i,!1))throw new Error("uri is required parameter");if(!G.isValidString(s,!1))throw new Error("domain is required parameter");if(!G.isValidString(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(a=>G.parseChainId(a).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:u}=G.parseChainId(n[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(r,n)=>{let i={verified:{verifyUrl:n.verifyUrl||un.VERIFY_SERVER,validation:"UNKNOWN",origin:n.url||""}};try{let s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!G.isValidString(i,!1)){let{message:s}=G.getInternalError("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{let n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0,s=this.recentlyDeletedLimit/2;for(let o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{let n=this.recentlyDeletedMap.get(r);if(n){let{message:i}=G.getInternalError("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}}async isInitialized(){if(!this.initialized){let{message:e}=G.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(un.RELAYER_EVENTS.message,async e=>{let{topic:r,message:n}=e,{publicKey:i}=this.client.auth.authKeys.keys.includes(ad)?this.client.auth.authKeys.get(ad):{responseTopic:void 0,publicKey:void 0},s=await this.client.core.crypto.decode(r,n,{receiverPublicKey:i});try{qe.isJsonRpcRequest(s)?(this.client.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):qe.isJsonRpcResponse(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.client.core.history.delete(r,s.id)):this.onRelayEventUnknownPayload({topic:r,payload:s})}catch(o){this.client.logger.error(o)}})}registerExpirerEvents(){this.client.core.expirer.on(un.EXPIRER_EVENTS.expired,async e=>{let{topic:r,id:n}=G.parseExpirerTarget(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,G.getInternalError("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(un.PAIRING_EVENTS.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(un.PAIRING_EVENTS.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!G.isValidString(e,!1)){let{message:r}=G.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:r}=G.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(G.isExpired(this.client.core.pairing.pairings.get(e).expiry)){let{message:r}=G.getInternalError("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!G.isValidString(e,!1)){let{message:r}=G.getInternalError("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:r}=G.getInternalError("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(G.isExpired(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:r}=G.getInternalError("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){let{message:r}=G.getInternalError("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(G.isValidString(e,!1)){let{message:r}=G.getInternalError("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{let{message:r}=G.getInternalError("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!G.isValidId(e)){let{message:r}=G.getInternalError("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){let{message:r}=G.getInternalError("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(G.isExpired(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:r}=G.getInternalError("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},X_=class extends un.Store{constructor(e,r){super(e,r,pU,r1),this.core=e,this.logger=r}},e1=class extends un.Store{constructor(e,r){super(e,r,yU,r1),this.core=e,this.logger=r}},Z_=class extends un.Store{constructor(e,r){super(e,r,vU,r1,n=>n.id),this.core=e,this.logger=r}},e2=class extends un.Store{constructor(e,r){super(e,r,SU,ud,()=>ad),this.core=e,this.logger=r}},t2=class extends un.Store{constructor(e,r){super(e,r,IU,ud),this.core=e,this.logger=r}},r2=class extends un.Store{constructor(e,r){super(e,r,TU,ud,n=>n.id),this.core=e,this.logger=r}},n2=class{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new e2(this.core,this.logger),this.pairingTopics=new t2(this.core,this.logger),this.requests=new r2(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}},t1=class t extends dU.ISignClient{constructor(e){super(e),this.protocol=i2,this.version=s2,this.name=Xy.name,this.events=new gU.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async n=>{try{return await this.engine.authenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||Xy.name,this.metadata=e?.metadata||G.getAppMetadata();let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Jy.pino(Jy.getDefaultLoggerOptions({level:e?.logger||Xy.logger}));this.core=e?.core||new un.Core(e),this.logger=Jy.generateChildLogger(r,this.name),this.session=new e1(this.core,this.logger),this.proposal=new X_(this.core,this.logger),this.pendingRequest=new Z_(this.core,this.logger),this.engine=new J_(this),this.auth=new n2(this.core,this.logger)}static async init(e){let r=new t(e);return await r.initialize(),r}get context(){return Jy.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}},Fce=e1,Uce=t1;Be.AUTH_CONTEXT=bU,Be.AUTH_KEYS_CONTEXT=SU,Be.AUTH_PAIRING_TOPIC_CONTEXT=IU,Be.AUTH_PROTOCOL=EU,Be.AUTH_PUBLIC_KEY_NAME=ad,Be.AUTH_REQUEST_CONTEXT=TU,Be.AUTH_STORAGE_PREFIX=ud,Be.AUTH_VERSION=Dce,Be.ENGINE_CONTEXT=wU,Be.ENGINE_QUEUE_STATES=vs,Be.ENGINE_RPC_OPTS=wn,Be.HISTORY_CONTEXT=Nce,Be.HISTORY_EVENTS=Cce,Be.HISTORY_STORAGE_VERSION=xce,Be.METHODS_TO_VERIFY=AU,Be.PROPOSAL_CONTEXT=pU,Be.PROPOSAL_EXPIRY=Oce,Be.PROPOSAL_EXPIRY_MESSAGE=mU,Be.REQUEST_CONTEXT=vU,Be.SESSION_CONTEXT=yU,Be.SESSION_EXPIRY=cu,Be.SESSION_REQUEST_EXPIRY_BOUNDARIES=Zy,Be.SIGN_CLIENT_CONTEXT=o2,Be.SIGN_CLIENT_DEFAULT=Xy,Be.SIGN_CLIENT_EVENTS=Tce,Be.SIGN_CLIENT_PROTOCOL=i2,Be.SIGN_CLIENT_STORAGE_OPTIONS=_ce,Be.SIGN_CLIENT_STORAGE_PREFIX=r1,Be.SIGN_CLIENT_VERSION=s2,Be.SessionStore=Fce,Be.SignClient=Uce,Be.WALLETCONNECT_DEEPLINK_CHOICE=Y_,Be.default=t1});var n1=D(Yo=>{"use strict";h();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.OptionalOperation=Yo.Operation=void 0;var qce;(function(t){t.SIGN_TRANSACTION="mvx_signTransaction",t.SIGN_TRANSACTIONS="mvx_signTransactions",t.SIGN_MESSAGE="mvx_signMessage"})(qce=Yo.Operation||(Yo.Operation={}));var Vce;(function(t){t.SIGN_LOGIN_TOKEN="mvx_signLoginToken",t.SIGN_NATIVE_AUTH_TOKEN="mvx_signNativeAuthToken",t.CANCEL_ACTION="mvx_cancelAction"})(Vce=Yo.OptionalOperation||(Yo.OptionalOperation={}))});var a2=D(As=>{"use strict";h();Object.defineProperty(As,"__esModule",{value:!0});As.WALLETCONNECT_SIGN_LOGIN_DELAY=As.WALLETCONNECT_MULTIVERSX_OPTIONAL_METHODS=As.WALLETCONNECT_MULTIVERSX_METHODS=As.WALLETCONNECT_MULTIVERSX_NAMESPACE=void 0;var CU=n1();As.WALLETCONNECT_MULTIVERSX_NAMESPACE="mvx";As.WALLETCONNECT_MULTIVERSX_METHODS=Object.values(CU.Operation);As.WALLETCONNECT_MULTIVERSX_OPTIONAL_METHODS=Object.values(CU.OptionalOperation);As.WALLETCONNECT_SIGN_LOGIN_DELAY=500});var l2=D(Ci=>{"use strict";h();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.WalletConnectV2ProviderErrorMessagesEnum=Ci.ErrBadAddress=Ci.ErrNotImplemented=Ci.Err=void 0;var cd=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Ci.Err=cd;var u2=class extends cd{constructor(){super("Method not yet implemented")}};Ci.ErrNotImplemented=u2;var c2=class extends cd{constructor(e,r){super(`Bad address: ${e}`,r)}};Ci.ErrBadAddress=c2;var kce;(function(t){t.unableToInit="WalletConnect is unable to init",t.notInitialized="WalletConnect is not initialized",t.unableToConnect="WalletConnect is unable to connect",t.unableToConnectExisting="WalletConnect is unable to connect to existing pairing",t.unableToSignLoginToken="WalletConnect could not sign login token",t.unableToSign="WalletConnect could not sign the message",t.unableToLogin="WalletConnect is unable to login",t.unableToHandleTopic="WalletConnect: Unable to handle topic update",t.unableToHandleEvent="WalletConnect: Unable to handle events",t.unableToHandleCleanup="WalletConnect: Unable to handle cleanup",t.sessionNotConnected="WalletConnect Session is not connected",t.sessionDeleted="WalletConnect Session Deleted",t.sessionExpired="WalletConnect Session Expired",t.alreadyLoggedOut="WalletConnect: Already logged out",t.pingFailed="WalletConnect Ping Failed",t.invalidAddress="WalletConnect: Invalid address",t.requestDifferentChain="WalletConnect: Request Chain Id different than Connection Chain Id",t.invalidMessageResponse="WalletConnect could not sign the message",t.invalidMessageSignature="WalletConnect: Invalid message signature",t.invalidTransactionResponse="WalletConnect could not sign the transactions. Invalid signatures",t.invalidCustomRequestResponse="WalletConnect could not send the custom request",t.transactionError="Transaction canceled",t.connectionError="WalletConnect could not establish a connection",t.invalidGuardian="WalletConnect: Invalid Guardian"})(kce=Ci.WalletConnectV2ProviderErrorMessagesEnum||(Ci.WalletConnectV2ProviderErrorMessagesEnum={}))});var h2=D(i1=>{"use strict";h();Object.defineProperty(i1,"__esModule",{value:!0});i1.Logger=void 0;var f2=class{static error(e){console.error(e)}static trace(e){console.trace(e)}};i1.Logger=f2});var NU=D(()=>{"use strict";h();global.Buffer||(global.Buffer=io().Buffer)});var p2=D(Al=>{"use strict";h();Object.defineProperty(Al,"__esModule",{value:!0});Al.SmartContractQueryResponse=Al.SmartContractQuery=void 0;var d2=class{constructor(e){this.contract=e.contract,this.caller=e.caller,this.value=e.value,this.function=e.function,this.arguments=e.arguments}};Al.SmartContractQuery=d2;var g2=class{constructor(e){this.function=e.function,this.returnCode=e.returnCode,this.returnMessage=e.returnMessage,this.returnDataParts=e.returnDataParts}};Al.SmartContractQueryResponse=g2});var OU=D(s1=>{"use strict";h();Object.defineProperty(s1,"__esModule",{value:!0});s1.QueryRunnerAdapter=void 0;var xU=Ve(),Hce=p2(),m2=class{constructor(e){this.networkProvider=e.networkProvider}async runQuery(e){let r={address:xU.Address.fromBech32(e.contract),caller:e.caller?xU.Address.fromBech32(e.caller):void 0,func:e.function,value:e.value,getEncodedArguments:()=>e.arguments.map(i=>p.Buffer.from(i).toString("hex"))},n=await this.networkProvider.queryContract(r);return new Hce.SmartContractQueryResponse({function:e.function,returnCode:n.returnCode.toString(),returnMessage:n.returnMessage,returnDataParts:n.getReturnDataParts()})}};s1.QueryRunnerAdapter=m2});var DU=D(lu=>{"use strict";h();var Gce=lu&&lu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jce=lu&&lu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gce(e,t,r)};Object.defineProperty(lu,"__esModule",{value:!0});jce(OU(),lu)});var PU=D(fu=>{"use strict";h();var zce=fu&&fu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qce=fu&&fu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zce(e,t,r)};Object.defineProperty(fu,"__esModule",{value:!0});Qce(XE(),fu)});var BU=D(hu=>{"use strict";h();Object.defineProperty(hu,"__esModule",{value:!0});hu.GasEstimator=hu.DefaultGasConfiguration=void 0;hu.DefaultGasConfiguration={minGasLimit:5e4,gasPerDataByte:1500,gasCostESDTTransfer:2e5,gasCostESDTNFTTransfer:2e5,gasCostESDTNFTMultiTransfer:2e5};var Kce=1e5,RU=8e5,y2=class{constructor(e){this.gasConfiguration=e||hu.DefaultGasConfiguration}forEGLDTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasPerDataByte*e}forESDTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTTransfer+this.gasConfiguration.gasPerDataByte*e+Kce}forESDTNFTTransfer(e){return this.gasConfiguration.minGasLimit+this.gasConfiguration.gasCostESDTNFTTransfer+this.gasConfiguration.gasPerDataByte*e+RU}forMultiESDTNFTTransfer(e,r){return this.gasConfiguration.minGasLimit+(this.gasConfiguration.gasCostESDTNFTMultiTransfer+RU)*r+this.gasConfiguration.gasPerDataByte*e}};hu.GasEstimator=y2});var LU=D(MU=>{"use strict";h();Object.defineProperty(MU,"__esModule",{value:!0})});var UU=D(FU=>{"use strict";h();Object.defineProperty(FU,"__esModule",{value:!0})});var qU=D(o1=>{"use strict";h();Object.defineProperty(o1,"__esModule",{value:!0});o1.RelayedTransactionV1Builder=void 0;var w2=Ve(),Wce=Ie(),$ce=Xr(),Yce=Ms(),Jce=aE(),v2=class{setInnerTransaction(e){return this.innerTransaction=e,this}setNetworkConfig(e){return this.netConfig=e,this}setRelayerAddress(e){return this.relayerAddress=e,this}setRelayerNonce(e){return this.relayerNonce=e,this}setRelayedTransactionVersion(e){return this.relayedTransactionVersion=e,this}setRelayedTransactionOptions(e){return this.relayedTransactionOptions=e,this}setRelayedTransactionGuardian(e){return this.relayedTransactionGuardian=e,this}build(){if(!this.innerTransaction||!this.netConfig||!this.relayerAddress||!this.innerTransaction.getSignature())throw new Wce.ErrInvalidRelayedV1BuilderArguments;let e=this.prepareInnerTransaction(),r=`relayedTx@${p.Buffer.from(e).toString("hex")}`,n=new Yce.TransactionPayload(r),i=this.netConfig.MinGasLimit+this.netConfig.GasPerDataByte*n.length()+this.innerTransaction.getGasLimit().valueOf(),s=new $ce.Transaction({nonce:this.relayerNonce,sender:this.relayerAddress,receiver:this.innerTransaction.getSender(),value:0,gasLimit:i,data:n,chainID:this.netConfig.ChainID,version:this.relayedTransactionVersion,options:this.relayedTransactionOptions,guardian:this.relayedTransactionGuardian});return this.relayerNonce&&s.setNonce(this.relayerNonce),s}prepareInnerTransaction(){if(!this.innerTransaction)return"";let e={nonce:this.innerTransaction.getNonce().valueOf(),sender:new w2.Address(this.innerTransaction.getSender().bech32()).pubkey().toString("base64"),receiver:new w2.Address(this.innerTransaction.getReceiver().bech32()).pubkey().toString("base64"),value:BigInt(this.innerTransaction.getValue().toString()),gasPrice:this.innerTransaction.getGasPrice().valueOf(),gasLimit:this.innerTransaction.getGasLimit().valueOf(),data:this.innerTransaction.getData().valueOf().toString("base64"),signature:this.innerTransaction.getSignature().toString("base64"),chainID:p.Buffer.from(this.innerTransaction.getChainID().valueOf()).toString("base64"),version:this.innerTransaction.getVersion().valueOf(),options:this.innerTransaction.getOptions().valueOf()==0?void 0:this.innerTransaction.getOptions().valueOf(),guardian:this.innerTransaction.getGuardian().bech32()?new w2.Address(this.innerTransaction.getGuardian().bech32()).pubkey().toString("base64"):void 0,guardianSignature:this.innerTransaction.getGuardianSignature().toString("hex")?this.innerTransaction.getGuardianSignature().toString("base64"):void 0,sndUserName:this.innerTransaction.getSenderUsername()?p.Buffer.from(this.innerTransaction.getSenderUsername()).toString("base64"):void 0,rcvUserName:this.innerTransaction.getReceiverUsername()?p.Buffer.from(this.innerTransaction.getReceiverUsername()).toString("base64"):void 0};return Jce.stringify(e)}};o1.RelayedTransactionV1Builder=v2});var kU=D(a1=>{"use strict";h();Object.defineProperty(a1,"__esModule",{value:!0});a1.RelayedTransactionV2Builder=void 0;var VU=Ie(),ld=qn(),Xce=Xr(),Zce=Ms(),A2=class{setInnerTransaction(e){return this.innerTransaction=e,this}setInnerTransactionGasLimit(e){return this.innerTransactionGasLimit=e,this}setNetworkConfig(e){return this.netConfig=e,this}setRelayerAddress(e){return this.relayerAddress=e,this}setRelayerNonce(e){return this.relayerNonce=e,this}build(){if(!this.innerTransaction||!this.innerTransactionGasLimit||!this.relayerAddress||!this.netConfig||!this.innerTransaction.getSignature())throw new VU.ErrInvalidRelayedV2BuilderArguments;if(this.innerTransaction.getGasLimit()!=0)throw new VU.ErrGasLimitShouldBe0ForInnerTransaction;let{argumentsString:e}=new ld.ArgSerializer().valuesToString([new ld.AddressValue(this.innerTransaction.getReceiver()),new ld.U64Value(this.innerTransaction.getNonce().valueOf()),new ld.BytesValue(this.innerTransaction.getData().valueOf()),new ld.BytesValue(this.innerTransaction.getSignature())]),r=`relayedTxV2@${e}`,n=new Zce.TransactionPayload(r),i=new Xce.Transaction({sender:this.relayerAddress,receiver:this.innerTransaction.getSender(),value:0,gasLimit:this.innerTransactionGasLimit.valueOf()+this.netConfig.MinGasLimit+this.netConfig.GasPerDataByte*n.length(),data:n,chainID:this.netConfig.ChainID,version:this.innerTransaction.getVersion(),options:this.innerTransaction.getOptions()});return this.relayerNonce&&i.setNonce(this.relayerNonce),i}};a1.RelayedTransactionV2Builder=A2});var HU=D(c1=>{"use strict";h();Object.defineProperty(c1,"__esModule",{value:!0});c1.SmartContractQueriesController=void 0;var ele=Ie(),tle=p2(),u1=qn(),E2=class{constructor(e){this.abi=e.abi,this.queryRunner=e.queryRunner,this.legacyResultsParser=new u1.ResultsParser}createQuery(e){let r=this.encodeArguments(e.function,e.arguments);return new tle.SmartContractQuery({contract:e.contract,caller:e.caller,function:e.function,arguments:r,value:e.value})}encodeArguments(e,r){let n=this.abi?.getEndpoint(e);if(n){let i=u1.NativeSerializer.nativeToTypedValues(r,n);return new u1.ArgSerializer().valuesToBuffers(i)}if(this.areArgsOfTypedValue(r))return new u1.ArgSerializer().valuesToBuffers(r);if(this.areArgsBuffers(r))return r.map(i=>p.Buffer.from(i));throw new ele.Err("cannot encode arguments: when ABI is not available, they must be either typed values or buffers")}areArgsOfTypedValue(e){for(let r of e)if(!r.belongsToTypesystem)return!1;return!0}areArgsBuffers(e){for(let r of e)if(!ArrayBuffer.isView(r))return!1;return!0}async runQuery(e){return await this.queryRunner.runQuery(e)}parseQueryResponse(e){if(!this.abi)return e.returnDataParts;let r={returnCode:e.returnCode,returnMessage:e.returnMessage,getReturnDataParts:()=>e.returnDataParts.map(u=>p.Buffer.from(u))},n=e.function,i=this.abi.getEndpoint(n);return this.legacyResultsParser.parseQueryResponse(r,i).values.map(u=>u.valueOf())}};c1.SmartContractQueriesController=E2});var GU=D(ke=>{"use strict";h();var rle=ke&&ke.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pt=ke&&ke.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rle(e,t,r)};Object.defineProperty(ke,"__esModule",{value:!0});NU();Pt(Ic(),ke);Pt(DU(),ke);Pt(Ve(),ke);Pt(Ub(),ke);Pt(PU(),ke);Pt(Ie(),ke);Pt(BU(),ke);Pt(LU(),ke);Pt(UU(),ke);Pt(oo(),ke);Pt(Mb(),ke);Pt($l(),ke);Pt(qU(),ke);Pt(kU(),ke);Pt(V0(),ke);Pt(HU(),ke);Pt(qn(),ke);Pt(Cb(),ke);Pt(_a(),ke);Pt(Xr(),ke);Pt(_0(),ke);Pt(Ms(),ke);Pt(U0(),ke);Pt(f0(),ke);Pt(Pb(),ke);Pt(Rn(),ke)});var $U=D(ur=>{"use strict";h();var nle=ur&&ur.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.sleep=ur.getMetadata=ur.applyTransactionSignature=ur.getAddressFromSession=ur.addressIsValid=ur.getConnectionParams=ur.getCurrentTopic=ur.getCurrentSession=void 0;var QU=GU(),jU=Yf(),ile=Qh(),l1=a2(),to=l2(),b2=h2(),zU=n1();function KU(t,e){if(!e)throw new Error(to.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=e.find(WU(t)).filter(n=>n.acknowledged);if(r.length>0){let n=r.length-1;return r[n]}if(e.session.length>0){let n=e.session.keys.length-1;return e.session.get(e.session.keys[n])}throw b2.Logger.error(to.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),new Error(to.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected)}ur.getCurrentSession=KU;function sle(t,e){if(!e)throw new Error(to.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=KU(t,e);if(!r?.topic)throw new Error(to.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);return r.topic}ur.getCurrentTopic=sle;function WU(t,e){var r,n,i;let s=[...l1.WALLETCONNECT_MULTIVERSX_METHODS,...(r=e?.methods)!==null&&r!==void 0?r:[]];!((n=e?.methods)===null||n===void 0)&&n.includes(zU.OptionalOperation.SIGN_LOGIN_TOKEN)||s.push(zU.OptionalOperation.SIGN_LOGIN_TOKEN);let o=[`${l1.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${t}`],u=(i=e?.events)!==null&&i!==void 0?i:[];return{requiredNamespaces:{[l1.WALLETCONNECT_MULTIVERSX_NAMESPACE]:{methods:s,chains:o,events:u}}}}ur.getConnectionParams=WU;function ole(t){try{return!QU.Address.fromBech32(t).isEmpty()}catch{return!1}}ur.addressIsValid=ole;function ale(t){let e=t.namespaces[l1.WALLETCONNECT_MULTIVERSX_NAMESPACE];if(e&&e.accounts){let r=e.accounts[0],[n,i,s]=r.split(":");return s}return""}ur.getAddressFromSession=ale;function ule({transaction:t,response:e}){if(!e)throw b2.Logger.error(to.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse),new Error(to.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);let{signature:r,guardianSignature:n,version:i,options:s,guardian:o}=e,u=t.getGuardian().bech32();if(u&&u!==o)throw b2.Logger.error(to.WalletConnectV2ProviderErrorMessagesEnum.invalidGuardian),new Error(to.WalletConnectV2ProviderErrorMessagesEnum.invalidGuardian);return o&&t.setGuardian(QU.Address.fromBech32(o)),i&&t.setVersion(i),s!=null&&t.setOptions(s),t.applySignature(new jU.Signature(r)),n&&t.applyGuardianSignature(new jU.Signature(n)),t}ur.applyTransactionSignature=ule;function cle(t){if(t)return Object.assign(Object.assign({},t),{url:ile.getAppMetadata().url})}ur.getMetadata=cle;function lle(t){return nle(this,void 0,void 0,function*(){return yield new Promise(e=>setTimeout(()=>{e()},t))})}ur.sleep=lle});var fd=D(cn=>{"use strict";h();var tr=cn&&cn.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})},fle=cn&&cn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});cn.WalletConnectV2Provider=cn.OptionalOperation=cn.Operation=cn.WalletConnectV2ProviderErrorMessagesEnum=void 0;var hle=Yf(),dle=fle(_U()),S2=Qh(),du=a2(),he=l2();Object.defineProperty(cn,"WalletConnectV2ProviderErrorMessagesEnum",{enumerable:!0,get:function(){return he.WalletConnectV2ProviderErrorMessagesEnum}});var Me=h2(),Jo=n1();Object.defineProperty(cn,"Operation",{enumerable:!0,get:function(){return Jo.Operation}});Object.defineProperty(cn,"OptionalOperation",{enumerable:!0,get:function(){return Jo.OptionalOperation}});var xr=$U(),I2=class{constructor(e,r,n,i,s){this.chainId="",this.address="",this.signature="",this.isInitializing=!1,this.processingTopic="",this.options={},this.onClientConnect=e,this.chainId=r,this.walletConnectV2Relay=n,this.walletConnectV2ProjectId=i,this.options=s}reset(){this.address="",this.signature="",this.walletConnector=void 0,this.session=void 0,this.pairings=void 0}init(){var e,r;return tr(this,void 0,void 0,function*(){if(this.isInitialized())return this.isInitialized();try{if(!this.isInitializing){this.isInitializing=!0,this.reset();let n=!((e=this.options)===null||e===void 0)&&e.metadata?{metadata:xr.getMetadata((r=this.options)===null||r===void 0?void 0:r.metadata)}:{},i=yield dle.default.init(Object.assign(Object.assign(Object.assign({},this.options),{relayUrl:this.walletConnectV2Relay,projectId:this.walletConnectV2ProjectId}),n));this.walletConnector=i,this.isInitializing=!1,yield this.subscribeToEvents(i),yield this.checkPersistedState(i)}}catch{throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToInit)}finally{return this.isInitializing=!1,this.isInitialized()}})}isInitialized(){return!!this.walletConnector&&!this.isInitializing}isConnected(){return new Promise((e,r)=>e(!!(this.isInitialized()&&typeof this.session<"u")))}connect(e){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);let r=xr.getConnectionParams(this.chainId,e);try{return yield this.walletConnector.connect(Object.assign({pairingTopic:e?.topic},r))}catch{throw this.reset(),Me.Logger.error(e?.topic?he.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:he.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect),new Error(e?.topic?he.WalletConnectV2ProviderErrorMessagesEnum.unableToConnectExisting:he.WalletConnectV2ProviderErrorMessagesEnum.unableToConnect)}})}login(e){var r;return tr(this,void 0,void 0,function*(){if(this.isInitializing=!0,typeof this.walletConnector>"u"&&(yield this.connect()),typeof this.walletConnector>"u")throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session<"u"&&(yield this.logout({topic:(r=this.session)===null||r===void 0?void 0:r.topic}));try{if(e&&e.approval){let n=yield e.approval();if(e.token){yield xr.sleep(du.WALLETCONNECT_SIGN_LOGIN_DELAY);let i=xr.getAddressFromSession(n),o=n.namespaces[du.WALLETCONNECT_MULTIVERSX_NAMESPACE].methods.includes(Jo.OptionalOperation.SIGN_NATIVE_AUTH_TOKEN)?Jo.OptionalOperation.SIGN_NATIVE_AUTH_TOKEN:Jo.OptionalOperation.SIGN_LOGIN_TOKEN,{signature:u}=yield this.walletConnector.request({chainId:`${du.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:n.topic,request:{method:o,params:{token:e.token,address:i}}});if(!u)throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToSignLoginToken);return yield this.onSessionConnected({session:n,signature:u})}return yield this.onSessionConnected({session:n,signature:""})}}catch{throw this.reset(),Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToLogin)}finally{this.isInitializing=!1}return""})}logout(e){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{if(this.processingTopic===(e?.topic||xr.getCurrentTopic(this.chainId,this.walletConnector)))return!0;if(e?.topic)this.processingTopic=e.topic,yield this.walletConnector.disconnect({topic:e.topic,reason:S2.getSdkError("USER_DISCONNECTED")});else{let r=xr.getCurrentTopic(this.chainId,this.walletConnector);this.processingTopic=r,yield this.walletConnector.disconnect({topic:r,reason:S2.getSdkError("USER_DISCONNECTED")}),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0})}}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.alreadyLoggedOut)}finally{this.processingTopic=""}return!0})}getAddress(){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.address})}getSignature(){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return this.signature})}getPairings(){var e,r,n,i,s;return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return(s=(i=(n=(r=(e=this.walletConnector)===null||e===void 0?void 0:e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll({active:!0}))!==null&&s!==void 0?s:[]})}signMessage(e){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);try{let r=yield this.getAddress(),{signature:n}=yield this.walletConnector.request({chainId:`${du.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:xr.getCurrentTopic(this.chainId,this.walletConnector),request:{method:Jo.Operation.SIGN_MESSAGE,params:{address:r,message:e.message.toString()}}});if(!n)throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageResponse);try{e.applySignature(new hle.Signature(n))}catch{throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidMessageSignature)}}catch{throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToSign)}return e})}signTransaction(e){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=e.toPlainObject();if(this.chainId!==e.getChainID().valueOf())throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);try{let n=yield this.walletConnector.request({chainId:`${du.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:xr.getCurrentTopic(this.chainId,this.walletConnector),request:{method:Jo.Operation.SIGN_TRANSACTION,params:{transaction:r}}});return xr.applyTransactionSignature({transaction:e,response:n})}catch{throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}signTransactions(e){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);let r=e.map(n=>{if(this.chainId!==n.getChainID().valueOf())throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.requestDifferentChain);return n.toPlainObject()});try{let{signatures:n}=yield this.walletConnector.request({chainId:`${du.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:xr.getCurrentTopic(this.chainId,this.walletConnector),request:{method:Jo.Operation.SIGN_TRANSACTIONS,params:{transactions:r}}});if(!n)throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);if(!Array.isArray(n)||e.length!==n.length)throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidTransactionResponse);for(let[i,s]of e.entries()){let o=n[i];xr.applyTransactionSignature({transaction:s,response:o})}return e}catch{throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.transactionError)}})}sendCustomRequest(e){var r;return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(typeof this.session>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected),this.onClientConnect.onClientLogout(),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);if(!((r=e?.request)===null||r===void 0)&&r.method){try{let n=Object.assign({},e.request),{method:i}=n,{response:s}=yield this.walletConnector.request({chainId:`${du.WALLETCONNECT_MULTIVERSX_NAMESPACE}:${this.chainId}`,topic:xr.getCurrentTopic(this.chainId,this.walletConnector),request:Object.assign(Object.assign({},n),{method:i})});s||Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse)}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.invalidCustomRequestResponse)}return}})}ping(){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized),new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);typeof this.session>"u"&&Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionNotConnected);try{let e=xr.getCurrentTopic(this.chainId,this.walletConnector);return yield this.walletConnector.ping({topic:e}),!0}catch{return Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.pingFailed),!1}})}loginAccount(e){return tr(this,void 0,void 0,function*(){return e?xr.addressIsValid(e.address)?(this.address=e.address,e.signature&&(this.signature=e.signature),this.onClientConnect.onClientLogin(),this.address):(Me.Logger.error(`${he.WalletConnectV2ProviderErrorMessagesEnum.invalidAddress} ${e.address}`),this.walletConnector&&(yield this.logout()),""):""})}onSessionConnected(e){return tr(this,void 0,void 0,function*(){if(!e)return"";this.session=e.session;let r=xr.getAddressFromSession(e.session);return r?(yield this.loginAccount({address:r,signature:e.signature}),r):""})}handleTopicUpdateEvent({topic:e}){return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u"){Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);return}try{let r=yield this.getPairings();if(this.address&&!this.isInitializing&&r)if(r?.length===0)this.onClientConnect.onClientLogout();else{let n=r[r.length-1];n?.topic===e&&this.onClientConnect.onClientLogout()}}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleTopic)}finally{this.pairings=yield this.getPairings()}})}handleSessionEvents({topic:e,params:r}){var n;return tr(this,void 0,void 0,function*(){if(typeof this.walletConnector>"u")throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.session&&((n=this.session)===null||n===void 0?void 0:n.topic)!==e)return;let{event:i}=r;if(i?.name&&xr.getCurrentTopic(this.chainId,this.walletConnector)===e){let s=i.data;this.onClientConnect.onClientEvent(s)}})}subscribeToEvents(e){var r,n,i,s;return tr(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);try{e.on("session_update",({topic:o,params:u})=>{var a;if(!this.session||((a=this.session)===null||a===void 0?void 0:a.topic)!==o)return;let{namespaces:c}=u,f=e.session.get(o),d=Object.assign(Object.assign({},f),{namespaces:c});this.onSessionConnected({session:d})}),e.on("session_event",this.handleSessionEvents.bind(this)),e.on("session_delete",({topic:o})=>tr(this,void 0,void 0,function*(){var u;this.isInitializing&&(this.onClientConnect.onClientLogout(),this.reset()),!(!this.session||((u=this.session)===null||u===void 0?void 0:u.topic)!==o)&&(Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionDeleted),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),e.on("session_expire",({topic:o})=>tr(this,void 0,void 0,function*(){var u;!this.session||((u=this.session)===null||u===void 0?void 0:u.topic)!==o||(Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.sessionExpired),this.onClientConnect.onClientLogout(),this.reset(),yield this.cleanupPendingPairings({deletePairings:!0}))})),(n=(r=e.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0||n.events.on("pairing_delete",this.handleTopicUpdateEvent.bind(this)),(s=(i=e.core)===null||i===void 0?void 0:i.pairing)===null||s===void 0||s.events.on("pairing_expire",this.handleTopicUpdateEvent.bind(this))}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleEvent)}})}checkPersistedState(e){return tr(this,void 0,void 0,function*(){if(typeof e>"u")throw new Error(he.WalletConnectV2ProviderErrorMessagesEnum.notInitialized);if(this.pairings=yield this.getPairings(),!(typeof this.session<"u")&&e.session.length&&!this.address&&!this.isInitializing){let r=xr.getCurrentSession(this.chainId,e);if(r)return yield this.onSessionConnected({session:r}),r}})}cleanupPendingPairings(e={}){var r,n,i,s,o,u,a,c;return tr(this,void 0,void 0,function*(){if(!(typeof this.walletConnector>"u"))try{let f=(i=(n=(r=this.walletConnector.core)===null||r===void 0?void 0:r.pairing)===null||n===void 0?void 0:n.pairings)===null||i===void 0?void 0:i.getAll({active:!1});if(!S2.isValidArray(f))return;for(let d of f)if(e.deletePairings)(o=(s=this.walletConnector.core)===null||s===void 0?void 0:s.expirer)===null||o===void 0||o.set(d.topic,0);else try{yield(c=(a=(u=this.walletConnector.core)===null||u===void 0?void 0:u.relayer)===null||a===void 0?void 0:a.subscriber)===null||c===void 0?void 0:c.unsubscribe(d.topic)}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleCleanup)}}catch{Me.Logger.error(he.WalletConnectV2ProviderErrorMessagesEnum.unableToHandleCleanup)}})}};cn.WalletConnectV2Provider=I2});var JU=D((ZTe,YU)=>{"use strict";h();YU.exports=Error});var ZU=D((t_e,XU)=>{"use strict";h();XU.exports=EvalError});var tq=D((n_e,eq)=>{"use strict";h();eq.exports=RangeError});var nq=D((s_e,rq)=>{"use strict";h();rq.exports=ReferenceError});var T2=D((a_e,iq)=>{"use strict";h();iq.exports=SyntaxError});var El=D((c_e,sq)=>{"use strict";h();sq.exports=TypeError});var aq=D((f_e,oq)=>{"use strict";h();oq.exports=URIError});var cq=D((d_e,uq)=>{"use strict";h();uq.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var hq=D((p_e,fq)=>{"use strict";h();var lq=typeof Symbol<"u"&&Symbol,gle=cq();fq.exports=function(){return typeof lq!="function"||typeof Symbol!="function"||typeof lq("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:gle()}});var gq=D((y_e,dq)=>{"use strict";h();var _2={__proto__:null,foo:{}},ple=Object;dq.exports=function(){return{__proto__:_2}.foo===_2.foo&&!(_2 instanceof ple)}});var yq=D((v_e,mq)=>{"use strict";h();var mle="Function.prototype.bind called on incompatible ",yle=Object.prototype.toString,wle=Math.max,vle="[object Function]",pq=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},Ale=function(e,r){for(var n=[],i=r||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},Ele=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};mq.exports=function(e){var r=this;if(typeof r!="function"||yle.apply(r)!==vle)throw new TypeError(mle+r);for(var n=Ale(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,pq(n,arguments));return Object(f)===f?f:this}return r.apply(e,pq(n,arguments))},o=wle(0,r.length-n.length),u=[],a=0;a<o;a++)u[a]="$"+a;if(i=Function("binder","return function ("+Ele(u,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var f1=D((E_e,wq)=>{"use strict";h();var ble=yq();wq.exports=Function.prototype.bind||ble});var Aq=D((S_e,vq)=>{"use strict";h();var Sle=Function.prototype.call,Ile=Object.prototype.hasOwnProperty,Tle=f1();vq.exports=Tle.call(Sle,Ile)});var mu=D((T_e,Tq)=>{"use strict";h();var Re,_le=JU(),Cle=ZU(),Nle=tq(),xle=nq(),Tl=T2(),Il=El(),Ole=aq(),Iq=Function,C2=function(t){try{return Iq('"use strict"; return ('+t+").constructor;")()}catch{}},gu=Object.getOwnPropertyDescriptor;if(gu)try{gu({},"")}catch{gu=null}var N2=function(){throw new Il},Dle=gu?function(){try{return arguments.callee,N2}catch{try{return gu(arguments,"callee").get}catch{return N2}}}():N2,bl=hq()(),Ple=gq()(),Sr=Object.getPrototypeOf||(Ple?function(t){return t.__proto__}:null),Sl={},Rle=typeof Uint8Array>"u"||!Sr?Re:Sr(Uint8Array),pu={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Re:ArrayBuffer,"%ArrayIteratorPrototype%":bl&&Sr?Sr([][Symbol.iterator]()):Re,"%AsyncFromSyncIteratorPrototype%":Re,"%AsyncFunction%":Sl,"%AsyncGenerator%":Sl,"%AsyncGeneratorFunction%":Sl,"%AsyncIteratorPrototype%":Sl,"%Atomics%":typeof Atomics>"u"?Re:Atomics,"%BigInt%":typeof BigInt>"u"?Re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_le,"%eval%":eval,"%EvalError%":Cle,"%Float32Array%":typeof Float32Array>"u"?Re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Re:FinalizationRegistry,"%Function%":Iq,"%GeneratorFunction%":Sl,"%Int8Array%":typeof Int8Array>"u"?Re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bl&&Sr?Sr(Sr([][Symbol.iterator]())):Re,"%JSON%":typeof JSON=="object"?JSON:Re,"%Map%":typeof Map>"u"?Re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bl||!Sr?Re:Sr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Re:Promise,"%Proxy%":typeof Proxy>"u"?Re:Proxy,"%RangeError%":Nle,"%ReferenceError%":xle,"%Reflect%":typeof Reflect>"u"?Re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bl||!Sr?Re:Sr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bl&&Sr?Sr(""[Symbol.iterator]()):Re,"%Symbol%":bl?Symbol:Re,"%SyntaxError%":Tl,"%ThrowTypeError%":Dle,"%TypedArray%":Rle,"%TypeError%":Il,"%Uint8Array%":typeof Uint8Array>"u"?Re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Re:Uint32Array,"%URIError%":Ole,"%WeakMap%":typeof WeakMap>"u"?Re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Re:WeakSet};if(Sr)try{null.error}catch(t){Eq=Sr(Sr(t)),pu["%Error.prototype%"]=Eq}var Eq,Ble=function t(e){var r;if(e==="%AsyncFunction%")r=C2("async function () {}");else if(e==="%GeneratorFunction%")r=C2("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=C2("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Sr&&(r=Sr(i.prototype))}return pu[e]=r,r},bq={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hd=f1(),h1=Aq(),Mle=hd.call(Function.call,Array.prototype.concat),Lle=hd.call(Function.apply,Array.prototype.splice),Sq=hd.call(Function.call,String.prototype.replace),d1=hd.call(Function.call,String.prototype.slice),Fle=hd.call(Function.call,RegExp.prototype.exec),Ule=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qle=/\\(\\)?/g,Vle=function(e){var r=d1(e,0,1),n=d1(e,-1);if(r==="%"&&n!=="%")throw new Tl("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Tl("invalid intrinsic syntax, expected opening `%`");var i=[];return Sq(e,Ule,function(s,o,u,a){i[i.length]=u?Sq(a,qle,"$1"):o||s}),i},kle=function(e,r){var n=e,i;if(h1(bq,n)&&(i=bq[n],n="%"+i[0]+"%"),h1(pu,n)){var s=pu[n];if(s===Sl&&(s=Ble(n)),typeof s>"u"&&!r)throw new Il("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Tl("intrinsic "+e+" does not exist!")};Tq.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Il("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Il('"allowMissing" argument must be a boolean');if(Fle(/^%?[^%]*%?$/,e)===null)throw new Tl("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Vle(e),i=n.length>0?n[0]:"",s=kle("%"+i+"%",r),o=s.name,u=s.value,a=!1,c=s.alias;c&&(i=c[0],Lle(n,Mle([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var w=n[f],A=d1(w,0,1),T=d1(w,-1);if((A==='"'||A==="'"||A==="`"||T==='"'||T==="'"||T==="`")&&A!==T)throw new Tl("property names with quotes must have matching quotes");if((w==="constructor"||!d)&&(a=!0),i+="."+w,o="%"+i+"%",h1(pu,o))u=pu[o];else if(u!=null){if(!(w in u)){if(!r)throw new Il("base intrinsic for "+e+" exists, but the property is not available.");return}if(gu&&f+1>=n.length){var x=gu(u,w);d=!!x,d&&"get"in x&&!("originalValue"in x.get)?u=x.get:u=u[w]}else d=h1(u,w),u=u[w];d&&!a&&(pu[o]=u)}}return u}});var p1=D((C_e,_q)=>{"use strict";h();var Hle=mu(),g1=Hle("%Object.defineProperty%",!0)||!1;if(g1)try{g1({},"a",{value:1})}catch{g1=!1}_q.exports=g1});var x2=D((x_e,Cq)=>{"use strict";h();var Gle=mu(),m1=Gle("%Object.getOwnPropertyDescriptor%",!0);if(m1)try{m1([],"length")}catch{m1=null}Cq.exports=m1});var Dq=D((D_e,Oq)=>{"use strict";h();var Nq=p1(),jle=T2(),_l=El(),xq=x2();Oq.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new _l("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new _l("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _l("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _l("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _l("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _l("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,a=!!xq&&xq(e,r);if(Nq)Nq(e,r,{configurable:o===null&&a?a.configurable:!o,enumerable:i===null&&a?a.enumerable:!i,value:n,writable:s===null&&a?a.writable:!s});else if(u||!i&&!s&&!o)e[r]=n;else throw new jle("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Bq=D((R_e,Rq)=>{"use strict";h();var O2=p1(),Pq=function(){return!!O2};Pq.hasArrayLengthDefineBug=function(){if(!O2)return null;try{return O2([],"length",{value:1}).length!==1}catch{return!0}};Rq.exports=Pq});var qq=D((M_e,Uq)=>{"use strict";h();var zle=mu(),Mq=Dq(),Qle=Bq()(),Lq=x2(),Fq=El(),Kle=zle("%Math.floor%");Uq.exports=function(e,r){if(typeof e!="function")throw new Fq("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Kle(r)!==r)throw new Fq("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&Lq){var o=Lq(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(Qle?Mq(e,"length",r,!0,!0):Mq(e,"length",r)),e}});var zq=D((F_e,y1)=>{"use strict";h();var D2=f1(),w1=mu(),Wle=qq(),$le=El(),Hq=w1("%Function.prototype.apply%"),Gq=w1("%Function.prototype.call%"),jq=w1("%Reflect.apply%",!0)||D2.call(Gq,Hq),Vq=p1(),Yle=w1("%Math.max%");y1.exports=function(e){if(typeof e!="function")throw new $le("a function is required");var r=jq(D2,Gq,arguments);return Wle(r,1+Yle(0,e.length-(arguments.length-1)),!0)};var kq=function(){return jq(D2,Hq,arguments)};Vq?Vq(y1.exports,"apply",{value:kq}):y1.exports.apply=kq});var $q=D((q_e,Wq)=>{"use strict";h();var Qq=mu(),Kq=zq(),Jle=Kq(Qq("String.prototype.indexOf"));Wq.exports=function(e,r){var n=Qq(e,!!r);return typeof n=="function"&&Jle(e,".prototype.")>-1?Kq(n):n}});var Yq=D(()=>{h()});var m7=D((j_e,p7)=>{h();var k2=typeof Map=="function"&&Map.prototype,P2=Object.getOwnPropertyDescriptor&&k2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,A1=k2&&P2&&typeof P2.get=="function"?P2.get:null,Jq=k2&&Map.prototype.forEach,H2=typeof Set=="function"&&Set.prototype,R2=Object.getOwnPropertyDescriptor&&H2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,E1=H2&&R2&&typeof R2.get=="function"?R2.get:null,Xq=H2&&Set.prototype.forEach,Xle=typeof WeakMap=="function"&&WeakMap.prototype,gd=Xle?WeakMap.prototype.has:null,Zle=typeof WeakSet=="function"&&WeakSet.prototype,pd=Zle?WeakSet.prototype.has:null,efe=typeof WeakRef=="function"&&WeakRef.prototype,Zq=efe?WeakRef.prototype.deref:null,tfe=Boolean.prototype.valueOf,rfe=Object.prototype.toString,nfe=Function.prototype.toString,ife=String.prototype.match,G2=String.prototype.slice,Zo=String.prototype.replace,sfe=String.prototype.toUpperCase,e7=String.prototype.toLowerCase,c7=RegExp.prototype.test,t7=Array.prototype.concat,Es=Array.prototype.join,ofe=Array.prototype.slice,r7=Math.floor,L2=typeof BigInt=="function"?BigInt.prototype.valueOf:null,B2=Object.getOwnPropertySymbols,F2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ur=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Cl||!0)?Symbol.toStringTag:null,l7=Object.prototype.propertyIsEnumerable,n7=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function i7(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||c7.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-r7(-t):r7(t);if(n!==t){var i=String(n),s=G2.call(e,i.length+1);return Zo.call(i,r,"$&_")+"."+Zo.call(Zo.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Zo.call(e,r,"$&_")}var U2=Yq(),s7=U2.custom,o7=h7(s7)?s7:null;p7.exports=function t(e,r,n,i){var s=r||{};if(Xo(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Xo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Xo(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return g7(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return u?i7(e,a):a}if(typeof e=="bigint"){var c=String(e)+"n";return u?i7(e,c):c}var f=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return q2(e)?"[Array]":"[Object]";var d=Ife(s,n);if(typeof i>"u")i=[];else if(d7(i,e)>=0)return"[Circular]";function w(l,g,y){if(g&&(i=ofe.call(i),i.push(g)),y){var E={depth:s.depth};return Xo(s,"quoteStyle")&&(E.quoteStyle=s.quoteStyle),t(l,E,n+1,i)}return t(l,s,n+1,i)}if(typeof e=="function"&&!a7(e)){var A=pfe(e),T=v1(e,w);return"[Function"+(A?": "+A:" (anonymous)")+"]"+(T.length>0?" { "+Es.call(T,", ")+" }":"")}if(h7(e)){var x=Cl?Zo.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):F2.call(e);return typeof e=="object"&&!Cl?dd(x):x}if(Efe(e)){for(var B="<"+e7.call(String(e.nodeName)),V=e.attributes||[],U=0;U<V.length;U++)B+=" "+V[U].name+"="+f7(afe(V[U].value),"double",s);return B+=">",e.childNodes&&e.childNodes.length&&(B+="..."),B+="</"+e7.call(String(e.nodeName))+">",B}if(q2(e)){if(e.length===0)return"[]";var Q=v1(e,w);return d&&!Sfe(Q)?"["+V2(Q,d)+"]":"[ "+Es.call(Q,", ")+" ]"}if(cfe(e)){var L=v1(e,w);return!("cause"in Error.prototype)&&"cause"in e&&!l7.call(e,"cause")?"{ ["+String(e)+"] "+Es.call(t7.call("[cause]: "+w(e.cause),L),", ")+" }":L.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Es.call(L,", ")+" }"}if(typeof e=="object"&&o){if(o7&&typeof e[o7]=="function"&&U2)return U2(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(mfe(e)){var k=[];return Jq&&Jq.call(e,function(l,g){k.push(w(g,e,!0)+" => "+w(l,e))}),u7("Map",A1.call(e),k,d)}if(vfe(e)){var H=[];return Xq&&Xq.call(e,function(l){H.push(w(l,e))}),u7("Set",E1.call(e),H,d)}if(yfe(e))return M2("WeakMap");if(Afe(e))return M2("WeakSet");if(wfe(e))return M2("WeakRef");if(ffe(e))return dd(w(Number(e)));if(dfe(e))return dd(w(L2.call(e)));if(hfe(e))return dd(tfe.call(e));if(lfe(e))return dd(w(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===global)return"{ [object globalThis] }";if(!ufe(e)&&!a7(e)){var q=v1(e,w),v=n7?n7(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",P=!v&&Ur&&Object(e)===e&&Ur in e?G2.call(ea(e),8,-1):C?"Object":"",F=v||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",R=F+(P||C?"["+Es.call(t7.call([],P||[],C||[]),": ")+"] ":"");return q.length===0?R+"{}":d?R+"{"+V2(q,d)+"}":R+"{ "+Es.call(q,", ")+" }"}return String(e)};function f7(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function afe(t){return Zo.call(String(t),/"/g,"&quot;")}function q2(t){return ea(t)==="[object Array]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function ufe(t){return ea(t)==="[object Date]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function a7(t){return ea(t)==="[object RegExp]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function cfe(t){return ea(t)==="[object Error]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function lfe(t){return ea(t)==="[object String]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function ffe(t){return ea(t)==="[object Number]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function hfe(t){return ea(t)==="[object Boolean]"&&(!Ur||!(typeof t=="object"&&Ur in t))}function h7(t){if(Cl)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!F2)return!1;try{return F2.call(t),!0}catch{}return!1}function dfe(t){if(!t||typeof t!="object"||!L2)return!1;try{return L2.call(t),!0}catch{}return!1}var gfe=Object.prototype.hasOwnProperty||function(t){return t in this};function Xo(t,e){return gfe.call(t,e)}function ea(t){return rfe.call(t)}function pfe(t){if(t.name)return t.name;var e=ife.call(nfe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function d7(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function mfe(t){if(!A1||!t||typeof t!="object")return!1;try{A1.call(t);try{E1.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function yfe(t){if(!gd||!t||typeof t!="object")return!1;try{gd.call(t,gd);try{pd.call(t,pd)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function wfe(t){if(!Zq||!t||typeof t!="object")return!1;try{return Zq.call(t),!0}catch{}return!1}function vfe(t){if(!E1||!t||typeof t!="object")return!1;try{E1.call(t);try{A1.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Afe(t){if(!pd||!t||typeof t!="object")return!1;try{pd.call(t,pd);try{gd.call(t,gd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Efe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function g7(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return g7(G2.call(t,0,e.maxStringLength),e)+n}var i=Zo.call(Zo.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,bfe);return f7(i,"single",e)}function bfe(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+sfe.call(e.toString(16))}function dd(t){return"Object("+t+")"}function M2(t){return t+" { ? }"}function u7(t,e,r,n){var i=n?V2(r,n):Es.call(r,", ");return t+" ("+e+") {"+i+"}"}function Sfe(t){for(var e=0;e<t.length;e++)if(d7(t[e],`
`)>=0)return!1;return!0}function Ife(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Es.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Es.call(Array(e+1),r)}}function V2(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Es.call(t,","+r)+`
`+e.prev}function v1(t,e){var r=q2(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Xo(t,i)?e(t[i],t):""}var s=typeof B2=="function"?B2(t):[],o;if(Cl){o={};for(var u=0;u<s.length;u++)o["$"+s[u]]=s[u]}for(var a in t)Xo(t,a)&&(r&&String(Number(a))===a&&a<t.length||Cl&&o["$"+a]instanceof Symbol||(c7.call(/[^\w$]/,a)?n.push(e(a,t)+": "+e(t[a],t)):n.push(a+": "+e(t[a],t))));if(typeof B2=="function")for(var c=0;c<s.length;c++)l7.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}});var v7=D((Q_e,w7)=>{"use strict";h();var y7=mu(),Nl=$q(),Tfe=m7(),_fe=El(),b1=y7("%WeakMap%",!0),S1=y7("%Map%",!0),Cfe=Nl("WeakMap.prototype.get",!0),Nfe=Nl("WeakMap.prototype.set",!0),xfe=Nl("WeakMap.prototype.has",!0),Ofe=Nl("Map.prototype.get",!0),Dfe=Nl("Map.prototype.set",!0),Pfe=Nl("Map.prototype.has",!0),j2=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Rfe=function(t,e){var r=j2(t,e);return r&&r.value},Bfe=function(t,e,r){var n=j2(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Mfe=function(t,e){return!!j2(t,e)};w7.exports=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new _fe("Side channel does not contain "+Tfe(s))},get:function(s){if(b1&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Cfe(e,s)}else if(S1){if(r)return Ofe(r,s)}else if(n)return Rfe(n,s)},has:function(s){if(b1&&s&&(typeof s=="object"||typeof s=="function")){if(e)return xfe(e,s)}else if(S1){if(r)return Pfe(r,s)}else if(n)return Mfe(n,s);return!1},set:function(s,o){b1&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new b1),Nfe(e,s,o)):S1?(r||(r=new S1),Dfe(r,s,o)):(n||(n={key:{},next:null}),Bfe(n,s,o))}};return i}});var I1=D((W_e,A7)=>{"use strict";h();var Lfe=String.prototype.replace,Ffe=/%20/g,z2={RFC1738:"RFC1738",RFC3986:"RFC3986"};A7.exports={default:z2.RFC3986,formatters:{RFC1738:function(t){return Lfe.call(t,Ffe,"+")},RFC3986:function(t){return String(t)}},RFC1738:z2.RFC1738,RFC3986:z2.RFC3986}});var K2=D((Y_e,b7)=>{"use strict";h();var Ufe=I1(),Q2=Object.prototype.hasOwnProperty,yu=Array.isArray,bs=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),qfe=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(yu(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},E7=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Vfe=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(yu(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Q2.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return yu(e)&&!yu(r)&&(i=E7(e,n)),yu(e)&&yu(r)?(r.forEach(function(s,o){if(Q2.call(e,o)){var u=e[o];u&&typeof u=="object"&&s&&typeof s=="object"?e[o]=t(u,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var u=r[o];return Q2.call(s,o)?s[o]=t(s[o],u,n):s[o]=u,s},i)},kfe=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Hfe=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Gfe=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var u="",a=0;a<o.length;++a){var c=o.charCodeAt(a);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===Ufe.RFC1738&&(c===40||c===41)){u+=o.charAt(a);continue}if(c<128){u=u+bs[c];continue}if(c<2048){u=u+(bs[192|c>>6]+bs[128|c&63]);continue}if(c<55296||c>=57344){u=u+(bs[224|c>>12]+bs[128|c>>6&63]+bs[128|c&63]);continue}a+=1,c=65536+((c&1023)<<10|o.charCodeAt(a)&1023),u+=bs[240|c>>18]+bs[128|c>>12&63]+bs[128|c>>6&63]+bs[128|c&63]}return u},jfe=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],u=Object.keys(o),a=0;a<u.length;++a){var c=u[a],f=o[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:c}),n.push(f))}return qfe(r),e},zfe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Qfe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Kfe=function(e,r){return[].concat(e,r)},Wfe=function(e,r){if(yu(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)};b7.exports={arrayToObject:E7,assign:kfe,combine:Kfe,compact:jfe,decode:Hfe,encode:Gfe,isBuffer:Qfe,isRegExp:zfe,maybeMap:Wfe,merge:Vfe}});var N7=D((X_e,C7)=>{"use strict";h();var T7=v7(),$2=K2(),md=I1(),$fe=Object.prototype.hasOwnProperty,S7={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},wu=Array.isArray,Yfe=String.prototype.split,Jfe=Array.prototype.push,_7=function(t,e){Jfe.apply(t,wu(e)?e:[e])},Xfe=Date.prototype.toISOString,I7=md.default,Or={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:$2.encode,encodeValuesOnly:!1,format:I7,formatter:md.formatters[I7],indices:!1,serializeDate:function(e){return Xfe.call(e)},skipNulls:!1,strictNullHandling:!1},Zfe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},W2={},ehe=function t(e,r,n,i,s,o,u,a,c,f,d,w,A,T,x){for(var B=e,V=x,U=0,Q=!1;(V=V.get(W2))!==void 0&&!Q;){var L=V.get(e);if(U+=1,typeof L<"u"){if(L===U)throw new RangeError("Cyclic object value");Q=!0}typeof V.get(W2)>"u"&&(U=0)}if(typeof u=="function"?B=u(r,B):B instanceof Date?B=f(B):n==="comma"&&wu(B)&&(B=$2.maybeMap(B,function(I){return I instanceof Date?f(I):I})),B===null){if(i)return o&&!A?o(r,Or.encoder,T,"key",d):r;B=""}if(Zfe(B)||$2.isBuffer(B)){if(o){var k=A?r:o(r,Or.encoder,T,"key",d);if(n==="comma"&&A){for(var H=Yfe.call(String(B),","),q="",v=0;v<H.length;++v)q+=(v===0?"":",")+w(o(H[v],Or.encoder,T,"value",d));return[w(k)+"="+q]}return[w(k)+"="+w(o(B,Or.encoder,T,"value",d))]}return[w(r)+"="+w(String(B))]}var C=[];if(typeof B>"u")return C;var P;if(n==="comma"&&wu(B))P=[{value:B.length>0?B.join(",")||null:void 0}];else if(wu(u))P=u;else{var F=Object.keys(B);P=a?F.sort(a):F}for(var R=0;R<P.length;++R){var l=P[R],g=typeof l=="object"&&typeof l.value<"u"?l.value:B[l];if(!(s&&g===null)){var y=wu(B)?typeof n=="function"?n(r,l):r:r+(c?"."+l:"["+l+"]");x.set(e,U);var E=T7();E.set(W2,x),_7(C,t(g,y,n,i,s,o,u,a,c,f,d,w,A,T,E))}}return C},the=function(e){if(!e)return Or;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Or.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=md.default;if(typeof e.format<"u"){if(!$fe.call(md.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=md.formatters[n],s=Or.filter;return(typeof e.filter=="function"||wu(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Or.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Or.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Or.charsetSentinel,delimiter:typeof e.delimiter>"u"?Or.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Or.encode,encoder:typeof e.encoder=="function"?e.encoder:Or.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Or.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Or.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Or.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Or.strictNullHandling}};C7.exports=function(t,e){var r=t,n=the(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):wu(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var u;e&&e.arrayFormat in S7?u=e.arrayFormat:e&&"indices"in e?u=e.indices?"indices":"repeat":u="indices";var a=S7[u];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=T7(),f=0;f<i.length;++f){var d=i[f];n.skipNulls&&r[d]===null||_7(o,ehe(r[d],d,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var w=o.join(n.delimiter),A=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?A+="utf8=%26%2310003%3B&":A+="utf8=%E2%9C%93&"),w.length>0?A+w:""}});var D7=D((e2e,O7)=>{"use strict";h();var xl=K2(),Y2=Object.prototype.hasOwnProperty,rhe=Array.isArray,Ir={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:xl.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},nhe=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},x7=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},ihe="utf8=%26%2310003%3B",she="utf8=%E2%9C%93",ohe=function(e,r){var n={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),u=-1,a,c=r.charset;if(r.charsetSentinel)for(a=0;a<o.length;++a)o[a].indexOf("utf8=")===0&&(o[a]===she?c="utf-8":o[a]===ihe&&(c="iso-8859-1"),u=a,a=o.length);for(a=0;a<o.length;++a)if(a!==u){var f=o[a],d=f.indexOf("]="),w=d===-1?f.indexOf("="):d+1,A,T;w===-1?(A=r.decoder(f,Ir.decoder,c,"key"),T=r.strictNullHandling?null:""):(A=r.decoder(f.slice(0,w),Ir.decoder,c,"key"),T=xl.maybeMap(x7(f.slice(w+1),r),function(x){return r.decoder(x,Ir.decoder,c,"value")})),T&&r.interpretNumericEntities&&c==="iso-8859-1"&&(T=nhe(T)),f.indexOf("[]=")>-1&&(T=rhe(T)?[T]:T),Y2.call(n,A)?n[A]=xl.combine(n[A],T):n[A]=T}return n},ahe=function(t,e,r,n){for(var i=n?e:x7(e,r),s=t.length-1;s>=0;--s){var o,u=t[s];if(u==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var a=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,c=parseInt(a,10);!r.parseArrays&&a===""?o={0:i}:!isNaN(c)&&u!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=i):a!=="__proto__"&&(o[a]=i)}i=o}return i},uhe=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,a=n.depth>0&&o.exec(s),c=a?s.slice(0,a.index):s,f=[];if(c){if(!n.plainObjects&&Y2.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var d=0;n.depth>0&&(a=u.exec(s))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&Y2.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(a[1])}return a&&f.push("["+s.slice(a.index)+"]"),ahe(f,r,n,i)}},che=function(e){if(!e)return Ir;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?Ir.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Ir.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ir.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ir.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ir.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ir.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ir.comma,decoder:typeof e.decoder=="function"?e.decoder:Ir.decoder,delimiter:typeof e.delimiter=="string"||xl.isRegExp(e.delimiter)?e.delimiter:Ir.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ir.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ir.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ir.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ir.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ir.strictNullHandling}};O7.exports=function(t,e){var r=che(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?ohe(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var u=s[o],a=uhe(u,n[u],r,typeof t=="string");i=xl.merge(i,a,r)}return r.allowSparse===!0?i:xl.compact(i)}});var R7=D((r2e,P7)=>{"use strict";h();var lhe=N7(),fhe=D7(),hhe=I1();P7.exports={formats:hhe,parse:fhe,stringify:lhe}});var J2=D(je=>{"use strict";h();Object.defineProperty(je,"__esModule",{value:!0});je.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED=je.WALLET_PROVIDER_CALLBACK_PARAM=je.WALLET_PROVIDER_SIGN_MESSAGE_URL=je.WALLET_PROVIDER_GUARD_TRANSACTION_URL=je.WALLET_PROVIDER_SIGN_TRANSACTION_URL=je.WALLET_PROVIDER_SEND_TRANSACTION_URL=je.WALLET_PROVIDER_DISCONNECT_URL=je.WALLET_PROVIDER_CONNECT_URL=je.XALIAS_PROVIDER_TESTNET=je.XALIAS_PROVIDER_DEVNET=je.XALIAS_PROVIDER_MAINNET=je.WALLET_PROVIDER_TESTNET=je.WALLET_PROVIDER_DEVNET=je.WALLET_PROVIDER_MAINNET=void 0;je.WALLET_PROVIDER_MAINNET="https://wallet.multiversx.com/dapp/init";je.WALLET_PROVIDER_DEVNET="https://devnet-wallet.multiversx.com/dapp/init";je.WALLET_PROVIDER_TESTNET="https://testnet-wallet.multiversx.com/dapp/init";je.XALIAS_PROVIDER_MAINNET="https://xalias.com";je.XALIAS_PROVIDER_DEVNET="https://devnet.xalias.com";je.XALIAS_PROVIDER_TESTNET="https://testnet.xalias.com";je.WALLET_PROVIDER_CONNECT_URL="hook/login";je.WALLET_PROVIDER_DISCONNECT_URL="hook/logout";je.WALLET_PROVIDER_SEND_TRANSACTION_URL="hook/transaction";je.WALLET_PROVIDER_SIGN_TRANSACTION_URL="hook/sign";je.WALLET_PROVIDER_GUARD_TRANSACTION_URL="hook/2fa";je.WALLET_PROVIDER_SIGN_MESSAGE_URL="hook/sign-message";je.WALLET_PROVIDER_CALLBACK_PARAM="walletProviderStatus";je.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED="transactionsSigned"});var B7=D(Ol=>{"use strict";h();Object.defineProperty(Ol,"__esModule",{value:!0});Ol.ErrCannotSignedMessage=Ol.ErrCannotGetSignedTransactions=void 0;var X2=class extends Error{constructor(){super("Cannot get signed transaction(s)")}};Ol.ErrCannotGetSignedTransactions=X2;var Z2=class extends Error{constructor(){super("Cannot get signed message")}};Ol.ErrCannotSignedMessage=Z2});var M7=D(T1=>{"use strict";h();Object.defineProperty(T1,"__esModule",{value:!0});T1.PlainSignedTransaction=void 0;var eC=class{constructor(e){this.nonce=0,this.value="",this.receiver="",this.sender="",this.gasPrice=0,this.gasLimit=0,this.data="",this.chainID="",this.version=0,this.signature="",Object.assign(this,e)}};T1.PlainSignedTransaction=eC});var Dl=D(na=>{"use strict";h();var ta=na&&na.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})},dhe=na&&na.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(na,"__esModule",{value:!0});na.WalletProvider=void 0;var tC=dhe(R7()),ra=J2(),rC=B7(),ghe=M7(),nC=class t{constructor(e){this.walletUrl=e}login(e){return ta(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:ra.WALLET_PROVIDER_CONNECT_URL,callbackUrl:e?.callbackUrl,params:{token:e?.token}});return yield this.redirect(r,e?.redirectDelayMilliseconds),r})}redirect(e,r){return ta(this,void 0,void 0,function*(){r?yield this.redirectLater(e,r):this.redirectImmediately(e)})}redirectImmediately(e){window.location.href=e}redirectLater(e,r){return ta(this,void 0,void 0,function*(){yield new Promise(n=>{setTimeout(()=>{window.location.href=e,n(!0)},r)})})}logout(e){return ta(this,void 0,void 0,function*(){let r=this.buildWalletUrl({endpoint:ra.WALLET_PROVIDER_DISCONNECT_URL,callbackUrl:e?.callbackUrl});return yield this.redirect(r,e?.redirectDelayMilliseconds),!0})}signMessage(e,r){return ta(this,void 0,void 0,function*(){let n=this.buildWalletUrl({endpoint:ra.WALLET_PROVIDER_SIGN_MESSAGE_URL,callbackUrl:r?.callbackUrl,params:{message:e.message.toString()}});return yield this.redirect(n),n})}getMessageSignatureFromWalletUrl(){var e,r;let n=window.location.search.slice(1);console.info("getMessageSignatureFromWalletUrl(), url:",n);let i=tC.default.parse(n);if((((e=i.status)===null||e===void 0?void 0:e.toString())||"")!=="signed")throw new rC.ErrCannotSignedMessage;return((r=i.signature)===null||r===void 0?void 0:r.toString())||""}guardTransactions(e,r){return ta(this,void 0,void 0,function*(){this.redirectTransactionsToEndpoint(ra.WALLET_PROVIDER_GUARD_TRANSACTION_URL,e,r)})}signTransactions(e,r){return ta(this,void 0,void 0,function*(){this.redirectTransactionsToEndpoint(ra.WALLET_PROVIDER_SIGN_TRANSACTION_URL,e,r)})}signTransaction(e,r){return ta(this,void 0,void 0,function*(){yield this.signTransactions([e],r)})}getTransactionsFromWalletUrl(e=window.location.search){let r=tC.default.parse(e.slice(1));return t.isTxSignReturnSuccess(r)?this.getTxSignReturnValue(r):[]}static isTxSignReturnSuccess(e){return e.hasOwnProperty(ra.WALLET_PROVIDER_CALLBACK_PARAM)&&e[ra.WALLET_PROVIDER_CALLBACK_PARAM]===ra.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED}getTxSignReturnValue(e){console.info("getTxSignReturnValue(), urlParams:",e);let r=["nonce","value","receiver","sender","gasPrice","gasLimit","chainID","version","signature"];for(let s of r)if(!e[s]||!Array.isArray(e[s]))throw new rC.ErrCannotGetSignedTransactions;let n=e.nonce.length;for(let s of r)if(e[s].length!==n)throw new rC.ErrCannotGetSignedTransactions;let i=[];for(let s=0;s<n;s++){let o=new ghe.PlainSignedTransaction(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({nonce:parseInt(e.nonce[s]),value:e.value[s],receiver:e.receiver[s],sender:e.sender[s],gasPrice:parseInt(e.gasPrice[s]),gasLimit:parseInt(e.gasLimit[s]),data:e.data&&e.data[s]?e.data[s]:"",chainID:e.chainID[s],version:parseInt(e.version[s])},e.guardian&&e.guardian[s]?{guardian:e.guardian[s]}:{}),e.guardianSignature&&e.guardianSignature[s]?{guardianSignature:e.guardianSignature[s]}:{}),e.options&&e.options[s]?{options:parseInt(e.options[s])}:{}),e.senderUsername&&e.senderUsername[s]?{senderUsername:e.senderUsername[s]}:{}),e.receiverUsername&&e.receiverUsername[s]?{receiverUsername:e.receiverUsername[s]}:{}),{signature:e.signature[s]}));i.push(o)}return i}static prepareWalletTransaction(e){let r=e.toPlainObject();return r.data?r.data=p.Buffer.from(r.data,"base64").toString():r.data="",r}buildWalletUrl(e){let r=e?.callbackUrl||window.location.href,n=tC.default.stringify(e.params||{}),i=n?`${n}&callbackUrl=${r}`:`callbackUrl=${r}`,s=`${this.baseWalletUrl()}/${e.endpoint}?${i}`;return console.info(`Redirecting to Wallet URL: ${decodeURI(s)}`),s}baseWalletUrl(){let e=this.walletUrl.split("/"),r=e[0],n=e[2];return r+"//"+n}redirectTransactionsToEndpoint(e,r,n){let i={};r.map(o=>{let u=t.prepareWalletTransaction(o);for(let a in u)u.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=[]),i[a].push(u[a])});let s=this.buildWalletUrl({endpoint:e,callbackUrl:n?.callbackUrl,params:i});window.location.href=s}};na.WalletProvider=nC});var p9=D((h2e,g9)=>{"use strict";h();function K7(t,e){return function(){return t.apply(e,arguments)}}var{toString:phe}=Object.prototype,{getPrototypeOf:pC}=Object,x1=(t=>e=>{let r=phe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Is=t=>(t=t.toLowerCase(),e=>x1(e)===t),O1=t=>e=>typeof e===t,{isArray:Ml}=Array,wd=O1("undefined");function mhe(t){return t!==null&&!wd(t)&&t.constructor!==null&&!wd(t.constructor)&&ei(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var W7=Is("ArrayBuffer");function yhe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&W7(t.buffer),e}var whe=O1("string"),ei=O1("function"),$7=O1("number"),D1=t=>t!==null&&typeof t=="object",vhe=t=>t===!0||t===!1,_1=t=>{if(x1(t)!=="object")return!1;let e=pC(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ahe=Is("Date"),Ehe=Is("File"),bhe=Is("Blob"),She=Is("FileList"),Ihe=t=>D1(t)&&ei(t.pipe),The=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ei(t.append)&&((e=x1(t))==="formdata"||e==="object"&&ei(t.toString)&&t.toString()==="[object FormData]"))},_he=Is("URLSearchParams"),Che=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vd(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Ml(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{let s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length,u;for(n=0;n<o;n++)u=s[n],e.call(null,t[u],u,t)}}function Y7(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}var J7=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,X7=t=>!wd(t)&&t!==J7;function uC(){let{caseless:t}=X7(this)&&this||{},e={},r=(n,i)=>{let s=t&&Y7(e,i)||i;_1(e[s])&&_1(n)?e[s]=uC(e[s],n):_1(n)?e[s]=uC({},n):Ml(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&vd(arguments[n],r);return e}var Nhe=(t,e,r,{allOwnKeys:n}={})=>(vd(e,(i,s)=>{r&&ei(i)?t[s]=K7(i,r):t[s]=i},{allOwnKeys:n}),t),xhe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ohe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Dhe=(t,e,r,n)=>{let i,s,o,u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!u[o]&&(e[o]=t[o],u[o]=!0);t=r!==!1&&pC(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Phe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},Rhe=t=>{if(!t)return null;if(Ml(t))return t;let e=t.length;if(!$7(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Bhe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pC(Uint8Array)),Mhe=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),i;for(;(i=n.next())&&!i.done;){let s=i.value;e.call(t,s[0],s[1])}},Lhe=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Fhe=Is("HTMLFormElement"),Uhe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),L7=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),qhe=Is("RegExp"),Z7=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};vd(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},Vhe=t=>{Z7(t,(e,r)=>{if(ei(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(ei(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},khe=(t,e)=>{let r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Ml(t)?n(t):n(String(t).split(e)),r},Hhe=()=>{},Ghe=(t,e)=>(t=+t,Number.isFinite(t)?t:e),iC="abcdefghijklmnopqrstuvwxyz",F7="0123456789",e9={DIGIT:F7,ALPHA:iC,ALPHA_DIGIT:iC+iC.toUpperCase()+F7},jhe=(t=16,e=e9.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function zhe(t){return!!(t&&ei(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Qhe=t=>{let e=new Array(10),r=(n,i)=>{if(D1(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let s=Ml(n)?[]:{};return vd(n,(o,u)=>{let a=r(o,i+1);!wd(a)&&(s[u]=a)}),e[i]=void 0,s}}return n};return r(t,0)},Khe=Is("AsyncFunction"),Whe=t=>t&&(D1(t)||ei(t))&&ei(t.then)&&ei(t.catch),re={isArray:Ml,isArrayBuffer:W7,isBuffer:mhe,isFormData:The,isArrayBufferView:yhe,isString:whe,isNumber:$7,isBoolean:vhe,isObject:D1,isPlainObject:_1,isUndefined:wd,isDate:Ahe,isFile:Ehe,isBlob:bhe,isRegExp:qhe,isFunction:ei,isStream:Ihe,isURLSearchParams:_he,isTypedArray:Bhe,isFileList:She,forEach:vd,merge:uC,extend:Nhe,trim:Che,stripBOM:xhe,inherits:Ohe,toFlatObject:Dhe,kindOf:x1,kindOfTest:Is,endsWith:Phe,toArray:Rhe,forEachEntry:Mhe,matchAll:Lhe,isHTMLForm:Fhe,hasOwnProperty:L7,hasOwnProp:L7,reduceDescriptors:Z7,freezeMethods:Vhe,toObjectSet:khe,toCamelCase:Uhe,noop:Hhe,toFiniteNumber:Ghe,findKey:Y7,global:J7,isContextDefined:X7,ALPHABET:e9,generateString:jhe,isSpecCompliantForm:zhe,toJSONObject:Qhe,isAsyncFn:Khe,isThenable:Whe};function Le(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}re.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var t9=Le.prototype,r9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{r9[t]={value:t}});Object.defineProperties(Le,r9);Object.defineProperty(t9,"isAxiosError",{value:!0});Le.from=(t,e,r,n,i,s)=>{let o=Object.create(t9);return re.toFlatObject(t,o,function(a){return a!==Error.prototype},u=>u!=="isAxiosError"),Le.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var $he=null;function cC(t){return re.isPlainObject(t)||re.isArray(t)}function n9(t){return re.endsWith(t,"[]")?t.slice(0,-2):t}function U7(t,e,r){return t?t.concat(e).map(function(i,s){return i=n9(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Yhe(t){return re.isArray(t)&&!t.some(cC)}var Jhe=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function P1(t,e,r){if(!re.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=re.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,B){return!re.isUndefined(B[x])});let n=r.metaTokens,i=r.visitor||f,s=r.dots,o=r.indexes,a=(r.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(i))throw new TypeError("visitor must be a function");function c(T){if(T===null)return"";if(re.isDate(T))return T.toISOString();if(!a&&re.isBlob(T))throw new Le("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(T)||re.isTypedArray(T)?a&&typeof Blob=="function"?new Blob([T]):p.Buffer.from(T):T}function f(T,x,B){let V=T;if(T&&!B&&typeof T=="object"){if(re.endsWith(x,"{}"))x=n?x:x.slice(0,-2),T=JSON.stringify(T);else if(re.isArray(T)&&Yhe(T)||(re.isFileList(T)||re.endsWith(x,"[]"))&&(V=re.toArray(T)))return x=n9(x),V.forEach(function(Q,L){!(re.isUndefined(Q)||Q===null)&&e.append(o===!0?U7([x],L,s):o===null?x:x+"[]",c(Q))}),!1}return cC(T)?!0:(e.append(U7(B,x,s),c(T)),!1)}let d=[],w=Object.assign(Jhe,{defaultVisitor:f,convertValue:c,isVisitable:cC});function A(T,x){if(!re.isUndefined(T)){if(d.indexOf(T)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(T),re.forEach(T,function(V,U){(!(re.isUndefined(V)||V===null)&&i.call(e,V,re.isString(U)?U.trim():U,x,w))===!0&&A(V,x?x.concat(U):[U])}),d.pop()}}if(!re.isObject(t))throw new TypeError("data must be an object");return A(t),e}function q7(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function mC(t,e){this._pairs=[],t&&P1(t,this,e)}var i9=mC.prototype;i9.append=function(e,r){this._pairs.push([e,r])};i9.toString=function(e){let r=e?function(n){return e.call(this,n,q7)}:q7;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Xhe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s9(t,e,r){if(!e)return t;let n=r&&r.encode||Xhe,i=r&&r.serialize,s;if(i?s=i(e,r):s=re.isURLSearchParams(e)?e.toString():new mC(e,r).toString(n),s){let o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}var lC=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(n){n!==null&&e(n)})}},V7=lC,o9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zhe=typeof URLSearchParams<"u"?URLSearchParams:mC,ede=typeof FormData<"u"?FormData:null,tde=typeof Blob<"u"?Blob:null,rde={isBrowser:!0,classes:{URLSearchParams:Zhe,FormData:ede,Blob:tde},protocols:["http","https","file","blob","url","data"]},a9=typeof window<"u"&&typeof document<"u",nde=(t=>a9&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),ide=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sde=Object.freeze({__proto__:null,hasBrowserEnv:a9,hasStandardBrowserWebWorkerEnv:ide,hasStandardBrowserEnv:nde}),Ss={...sde,...rde};function ode(t,e){return P1(t,new Ss.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Ss.isNode&&re.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function ade(t){return re.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ude(t){let e={},r=Object.keys(t),n,i=r.length,s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function u9(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;let u=Number.isFinite(+o),a=s>=r.length;return o=!o&&re.isArray(i)?i.length:o,a?(re.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!u):((!i[o]||!re.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&re.isArray(i[o])&&(i[o]=ude(i[o])),!u)}if(re.isFormData(t)&&re.isFunction(t.entries)){let r={};return re.forEachEntry(t,(n,i)=>{e(ade(n),i,r,0)}),r}return null}function cde(t,e,r){if(re.isString(t))try{return(e||JSON.parse)(t),re.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var yC={transitional:o9,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=re.isObject(e);if(s&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return i?JSON.stringify(u9(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ode(e,this.formSerializer).toString();if((u=re.isFileList(e))||n.indexOf("multipart/form-data")>-1){let a=this.env&&this.env.FormData;return P1(u?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),cde(e)):e}],transformResponse:[function(e){let r=this.transitional||yC.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&re.isString(e)&&(n&&!this.responseType||i)){let o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?Le.from(u,Le.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ss.classes.FormData,Blob:Ss.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],t=>{yC.headers[t]={}});var wC=yC,lde=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fde=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&lde[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},k7=Symbol("internals");function yd(t){return t&&String(t).trim().toLowerCase()}function C1(t){return t===!1||t==null?t:re.isArray(t)?t.map(C1):String(t)}function hde(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var dde=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sC(t,e,r,n,i){if(re.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!re.isString(e)){if(re.isString(n))return e.indexOf(n)!==-1;if(re.isRegExp(n))return n.test(e)}}function gde(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function pde(t,e){let r=re.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}var Pl=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function s(u,a,c){let f=yd(a);if(!f)throw new Error("header name must be a non-empty string");let d=re.findKey(i,f);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||a]=C1(u))}let o=(u,a)=>re.forEach(u,(c,f)=>s(c,f,a));return re.isPlainObject(e)||e instanceof this.constructor?o(e,r):re.isString(e)&&(e=e.trim())&&!dde(e)?o(fde(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=yd(e),e){let n=re.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return hde(i);if(re.isFunction(r))return r.call(this,i,n);if(re.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=yd(e),e){let n=re.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||sC(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function s(o){if(o=yd(o),o){let u=re.findKey(n,o);u&&(!r||sC(n,n[u],u,r))&&(delete n[u],i=!0)}}return re.isArray(e)?e.forEach(s):s(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let s=r[n];(!e||sC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){let r=this,n={};return re.forEach(this,(i,s)=>{let o=re.findKey(n,s);if(o){r[o]=C1(i),delete r[s];return}let u=e?gde(s):String(s).trim();u!==s&&delete r[s],r[u]=C1(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return re.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&re.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[k7]=this[k7]={accessors:{}}).accessors,i=this.prototype;function s(o){let u=yd(o);n[u]||(pde(i,o),n[u]=!0)}return re.isArray(e)?e.forEach(s):s(e),this}};Pl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(Pl.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});re.freezeMethods(Pl);var ro=Pl;function oC(t,e){let r=this||wC,n=e||r,i=ro.from(n.headers),s=n.data;return re.forEach(t,function(u){s=u.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function c9(t){return!!(t&&t.__CANCEL__)}function Ad(t,e,r){Le.call(this,t??"canceled",Le.ERR_CANCELED,e,r),this.name="CanceledError"}re.inherits(Ad,Le,{__CANCEL__:!0});function mde(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Le("Request failed with status code "+r.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var yde=Ss.hasStandardBrowserEnv?{write(t,e,r,n,i,s){let o=[t+"="+encodeURIComponent(e)];re.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),re.isString(n)&&o.push("path="+n),re.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wde(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vde(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function l9(t,e){return t&&!wde(e)?vde(t,e):e}var Ade=Ss.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){let o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){let u=re.isString(o)?i(o):o;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function Ede(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bde(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){let c=Date.now(),f=n[s];o||(o=c),r[i]=a,n[i]=c;let d=s,w=0;for(;d!==i;)w+=r[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;let A=f&&c-f;return A?Math.round(w*1e3/A):void 0}}function H7(t,e){let r=0,n=bde(50,250);return i=>{let s=i.loaded,o=i.lengthComputable?i.total:void 0,u=s-r,a=n(u),c=s<=o;r=s;let f={loaded:s,total:o,progress:o?s/o:void 0,bytes:u,rate:a||void 0,estimated:a&&o&&c?(o-s)/a:void 0,event:i};f[e?"download":"upload"]=!0,t(f)}}var Sde=typeof XMLHttpRequest<"u",Ide=Sde&&function(t){return new Promise(function(r,n){let i=t.data,s=ro.from(t.headers).normalize(),{responseType:o,withXSRFToken:u}=t,a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let f;if(re.isFormData(i)){if(Ss.hasStandardBrowserEnv||Ss.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((f=s.getContentType())!==!1){let[x,...B]=f?f.split(";").map(V=>V.trim()).filter(Boolean):[];s.setContentType([x||"multipart/form-data",...B].join("; "))}}let d=new XMLHttpRequest;if(t.auth){let x=t.auth.username||"",B=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(x+":"+B))}let w=l9(t.baseURL,t.url);d.open(t.method.toUpperCase(),s9(w,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function A(){if(!d)return;let x=ro.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),V={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:x,config:t,request:d};mde(function(Q){r(Q),c()},function(Q){n(Q),c()},V),d=null}if("onloadend"in d?d.onloadend=A:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(A)},d.onabort=function(){d&&(n(new Le("Request aborted",Le.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new Le("Network Error",Le.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let B=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",V=t.transitional||o9;t.timeoutErrorMessage&&(B=t.timeoutErrorMessage),n(new Le(B,V.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,t,d)),d=null},Ss.hasStandardBrowserEnv&&(u&&re.isFunction(u)&&(u=u(t)),u||u!==!1&&Ade(w))){let x=t.xsrfHeaderName&&t.xsrfCookieName&&yde.read(t.xsrfCookieName);x&&s.set(t.xsrfHeaderName,x)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&re.forEach(s.toJSON(),function(B,V){d.setRequestHeader(V,B)}),re.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",H7(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",H7(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=x=>{d&&(n(!x||x.type?new Ad(null,t,d):x),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));let T=Ede(w);if(T&&Ss.protocols.indexOf(T)===-1){n(new Le("Unsupported protocol "+T+":",Le.ERR_BAD_REQUEST,t));return}d.send(i||null)})},fC={http:$he,xhr:Ide};re.forEach(fC,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var G7=t=>`- ${t}`,Tde=t=>re.isFunction(t)||t===null||t===!1,f9={getAdapter:t=>{t=re.isArray(t)?t:[t];let{length:e}=t,r,n,i={};for(let s=0;s<e;s++){r=t[s];let o;if(n=r,!Tde(r)&&(n=fC[(o=String(r)).toLowerCase()],n===void 0))throw new Le(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){let s=Object.entries(i).map(([u,a])=>`adapter ${u} `+(a===!1?"is not supported by the environment":"is not available in the build")),o=e?s.length>1?`since :
`+s.map(G7).join(`
`):" "+G7(s[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:fC};function aC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ad(null,t)}function j7(t){return aC(t),t.headers=ro.from(t.headers),t.data=oC.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),f9.getAdapter(t.adapter||wC.adapter)(t).then(function(n){return aC(t),n.data=oC.call(t,t.transformResponse,n),n.headers=ro.from(n.headers),n},function(n){return c9(n)||(aC(t),n&&n.response&&(n.response.data=oC.call(t,t.transformResponse,n.response),n.response.headers=ro.from(n.response.headers))),Promise.reject(n)})}var z7=t=>t instanceof ro?{...t}:t;function Rl(t,e){e=e||{};let r={};function n(c,f,d){return re.isPlainObject(c)&&re.isPlainObject(f)?re.merge.call({caseless:d},c,f):re.isPlainObject(f)?re.merge({},f):re.isArray(f)?f.slice():f}function i(c,f,d){if(re.isUndefined(f)){if(!re.isUndefined(c))return n(void 0,c,d)}else return n(c,f,d)}function s(c,f){if(!re.isUndefined(f))return n(void 0,f)}function o(c,f){if(re.isUndefined(f)){if(!re.isUndefined(c))return n(void 0,c)}else return n(void 0,f)}function u(c,f,d){if(d in e)return n(c,f);if(d in t)return n(void 0,c)}let a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(c,f)=>i(z7(c),z7(f),!0)};return re.forEach(Object.keys(Object.assign({},t,e)),function(f){let d=a[f]||i,w=d(t[f],e[f],f);re.isUndefined(w)&&d!==u||(r[f]=w)}),r}var h9="1.6.8",vC={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vC[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Q7={};vC.transitional=function(e,r,n){function i(s,o){return"[Axios v"+h9+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,u)=>{if(e===!1)throw new Le(i(o," has been removed"+(r?" in "+r:"")),Le.ERR_DEPRECATED);return r&&!Q7[o]&&(Q7[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,u):!0}};function _de(t,e,r){if(typeof t!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-- >0;){let s=n[i],o=e[s];if(o){let u=t[s],a=u===void 0||o(u,s,t);if(a!==!0)throw new Le("option "+s+" must be "+a,Le.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Le("Unknown option "+s,Le.ERR_BAD_OPTION)}}var hC={assertOptions:_de,validators:vC},ia=hC.validators,Bl=class{constructor(e){this.defaults=e,this.interceptors={request:new V7,response:new V7}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Rl(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&hC.assertOptions(n,{silentJSONParsing:ia.transitional(ia.boolean),forcedJSONParsing:ia.transitional(ia.boolean),clarifyTimeoutError:ia.transitional(ia.boolean)},!1),i!=null&&(re.isFunction(i)?r.paramsSerializer={serialize:i}:hC.assertOptions(i,{encode:ia.function,serialize:ia.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&re.merge(s.common,s[r.method]);s&&re.forEach(["delete","get","head","post","put","patch","common"],T=>{delete s[T]}),r.headers=ro.concat(o,s);let u=[],a=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(a=a&&x.synchronous,u.unshift(x.fulfilled,x.rejected))});let c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let f,d=0,w;if(!a){let T=[j7.bind(this),void 0];for(T.unshift.apply(T,u),T.push.apply(T,c),w=T.length,f=Promise.resolve(r);d<w;)f=f.then(T[d++],T[d++]);return f}w=u.length;let A=r;for(d=0;d<w;){let T=u[d++],x=u[d++];try{A=T(A)}catch(B){x.call(this,B);break}}try{f=j7.call(this,A)}catch(T){return Promise.reject(T)}for(d=0,w=c.length;d<w;)f=f.then(c[d++],c[d++]);return f}getUri(e){e=Rl(this.defaults,e);let r=l9(e.baseURL,e.url);return s9(r,e.params,e.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(e){Bl.prototype[e]=function(r,n){return this.request(Rl(n||{},{method:e,url:r,data:(n||{}).data}))}});re.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,u){return this.request(Rl(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Bl.prototype[e]=r(),Bl.prototype[e+"Form"]=r(!0)});var N1=Bl,dC=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});let n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s,o=new Promise(u=>{n.subscribe(u),s=u}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,u){n.reason||(n.reason=new Ad(s,o,u),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},Cde=dC;function Nde(t){return function(r){return t.apply(null,r)}}function xde(t){return re.isObject(t)&&t.isAxiosError===!0}var gC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gC).forEach(([t,e])=>{gC[e]=t});var Ode=gC;function d9(t){let e=new N1(t),r=K7(N1.prototype.request,e);return re.extend(r,N1.prototype,e,{allOwnKeys:!0}),re.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return d9(Rl(t,i))},r}var cr=d9(wC);cr.Axios=N1;cr.CanceledError=Ad;cr.CancelToken=Cde;cr.isCancel=c9;cr.VERSION=h9;cr.toFormData=P1;cr.AxiosError=Le;cr.Cancel=cr.CanceledError;cr.all=function(e){return Promise.all(e)};cr.spread=Nde;cr.isAxiosError=xde;cr.mergeConfig=Rl;cr.AxiosHeaders=ro;cr.formToJSON=t=>u9(re.isHTMLForm(t)?new FormData(t):t);cr.getAdapter=f9.getAdapter;cr.HttpStatusCode=Ode;cr.default=cr;g9.exports=cr});var m9=D(R1=>{"use strict";h();Object.defineProperty(R1,"__esModule",{value:!0});R1.NativeAuthClientConfig=void 0;var AC=class{constructor(){this.origin=typeof window<"u"&&typeof window.location<"u"?window.location.hostname:"",this.apiUrl="https://api.multiversx.com",this.expirySeconds=60*60*24}};R1.NativeAuthClientConfig=AC});var bC=D(Ll=>{"use strict";h();var vu=Ll&&Ll.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(f){try{c(n.next(f))}catch(d){o(d)}}function a(f){try{c(n.throw(f))}catch(d){o(d)}}function c(f){f.done?s(f.value):i(f.value).then(u,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.NativeAuthClient=void 0;var Dde=p9(),Pde=m9(),EC=class{constructor(e){this.config=Object.assign(new Pde.NativeAuthClientConfig,e)}getToken(e,r,n){let i=this.encodeValue(e),s=this.encodeValue(r);return`${i}.${s}.${n}`}initialize(e={}){return vu(this,void 0,void 0,function*(){let r=yield this.getCurrentBlockHash(),n=this.encodeValue(JSON.stringify(e));return`${this.encodeValue(this.config.origin)}.${r}.${this.config.expirySeconds}.${n}`})}getCurrentBlockHash(){return vu(this,void 0,void 0,function*(){return this.config.gatewayUrl?yield this.getCurrentBlockHashWithGateway():yield this.getCurrentBlockHashWithApi()})}getCurrentBlockHashWithGateway(){return vu(this,void 0,void 0,function*(){let e=yield this.getCurrentRound(),r=`${this.config.gatewayUrl}/blocks/by-round/${e}`;return(yield this.get(r)).data.data.blocks.filter(o=>o.shard===this.config.blockHashShard)[0].hash})}getCurrentRound(){return vu(this,void 0,void 0,function*(){if(!this.config.gatewayUrl)throw new Error("Gateway URL not set");if(!this.config.blockHashShard)throw new Error("Blockhash shard not set");let e=`${this.config.gatewayUrl}/network/status/${this.config.blockHashShard}`;return(yield this.get(e)).data.data.status.erd_current_round})}getCurrentBlockHashWithApi(){return vu(this,void 0,void 0,function*(){try{let e=`${this.config.apiUrl}/blocks/latest?ttl=${this.config.expirySeconds}&fields=hash`,r=yield this.get(e);if(r.data[0].hash!==void 0)return r.data[0].hash}catch{}return this.getCurrentBlockHashWithApiFallback()})}getCurrentBlockHashWithApiFallback(){return vu(this,void 0,void 0,function*(){let e=`${this.config.apiUrl}/blocks?size=1&fields=hash`;return this.config.blockHashShard!==void 0&&(e+=`&shard=${this.config.blockHashShard}`),(yield this.get(e)).data[0].hash})}encodeValue(e){return this.escape(p.Buffer.from(e,"utf8").toString("base64"))}escape(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}get(e){return vu(this,void 0,void 0,function*(){return yield Dde.default.get(e,{headers:this.config.extraRequestHeaders})})}};Ll.NativeAuthClient=EC});var A9=D(M1=>{"use strict";h();Object.defineProperty(M1,"__esModule",{value:!0});M1.TransactionStatus=void 0;var IC=class t{constructor(e){this.status=(e||"").toLowerCase()}static createUnknown(){return new t("unknown")}isPending(){return this.status=="received"||this.status=="pending"}isExecuted(){return this.isSuccessful()||this.isFailed()||this.isInvalid()}isSuccessful(){return this.status=="executed"||this.status=="success"||this.status=="successful"}isFailed(){return this.status=="fail"||this.status=="failed"||this.status=="unsuccessful"||this.isInvalid()}isInvalid(){return this.status=="invalid"}toString(){return this.status}valueOf(){return this.status}equals(e){return e?this.status==e.status:!1}};M1.TransactionStatus=IC});var b9=D(L1=>{"use strict";h();Object.defineProperty(L1,"__esModule",{value:!0});L1.TransactionReceipt=void 0;var E9=_c(),TC=class t{constructor(){this.value="",this.sender=new E9.Address(""),this.data="",this.hash=""}static fromHttpResponse(e){let r=new t;return r.value=(e.value||0).toString(),r.sender=new E9.Address(e.sender),r.data=e.data,r.hash=e.txHash,r}};L1.TransactionReceipt=TC});var S9=D(Ts=>{"use strict";h();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.ErrContractQuery=Ts.ErrNetworkProvider=Ts.ErrUnexpectedCondition=Ts.Err=void 0;var Ul=class extends Error{constructor(e,r){super(e),this.inner=void 0,this.inner=r}};Ts.Err=Ul;var _C=class extends Ul{constructor(e){super(`Unexpected condition: [${e}]`)}};Ts.ErrUnexpectedCondition=_C;var CC=class extends Ul{constructor(e,r,n){let i=`Request error on url [${e}]: [${r}]`;super(i,n)}};Ts.ErrNetworkProvider=CC;var NC=class extends Ul{constructor(e){super(e.message.replace("executeQuery:",""))}};Ts.ErrContractQuery=NC});var T9=D(sa=>{"use strict";h();Object.defineProperty(sa,"__esModule",{value:!0});sa.TransactionEventTopic=sa.TransactionEventData=sa.TransactionEvent=void 0;var I9=_c(),xC=class t{constructor(e){this.address=new I9.Address(""),this.identifier="",this.topics=[],this.data="",this.dataPayload=new ql(p.Buffer.from("","utf8")),this.additionalData=[],Object.assign(this,e)}static fromHttpResponse(e){let r=new t;return r.address=new I9.Address(e.address),r.identifier=e.identifier||"",r.topics=(e.topics||[]).map(n=>new F1(n)),r.dataPayload=ql.fromBase64(e.data),r.additionalData=(e.additionalData||[]).map(ql.fromBase64),r.data=r.dataPayload.toString(),r}findFirstOrNoneTopic(e){return this.topics.filter(r=>e(r))[0]}getLastTopic(){return this.topics[this.topics.length-1]}};sa.TransactionEvent=xC;var ql=class t{constructor(e){this.raw=e}static fromBase64(e){return new t(p.Buffer.from(e||"","base64"))}toString(){return this.raw.toString("utf8")}hex(){return this.raw.toString("hex")}valueOf(){return this.raw}};sa.TransactionEventData=ql;var F1=class{constructor(e){this.raw=p.Buffer.from(e||"","base64")}toString(){return this.raw.toString("utf8")}hex(){return this.raw.toString("hex")}valueOf(){return this.raw}};sa.TransactionEventTopic=F1});var DC=D(U1=>{"use strict";h();Object.defineProperty(U1,"__esModule",{value:!0});U1.TransactionLogs=void 0;var Mde=S9(),_9=_c(),Lde=T9(),OC=class t{constructor(e){this.address=new _9.Address(""),this.events=[],Object.assign(this,e)}static fromHttpResponse(e){let r=new t;return r.address=new _9.Address(e.address),r.events=(e.events||[]).map(n=>Lde.TransactionEvent.fromHttpResponse(n)),r}findSingleOrNoneEvent(e,r){let n=this.findEvents(e,r);if(n.length>1)throw new Mde.ErrUnexpectedCondition(`more than one event of type ${e}`);return n[0]}findFirstOrNoneEvent(e,r){return this.findEvents(e,r)[0]}findEvents(e,r){let n=this.events.filter(i=>i.identifier==e);return r&&(n=n.filter(i=>r(i))),n}};U1.TransactionLogs=OC});var N9=D(Vl=>{"use strict";h();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.ContractResultItem=Vl.ContractResults=void 0;var C9=DC(),q1=_c(),PC=class t{constructor(e){this.items=e,this.items.sort(function(r,n){return r.nonce.valueOf()-n.nonce.valueOf()})}static fromProxyHttpResponse(e){let r=e.map(n=>Ed.fromProxyHttpResponse(n));return new t(r)}static fromApiHttpResponse(e){let r=e.map(n=>Ed.fromApiHttpResponse(n));return new t(r)}};Vl.ContractResults=PC;var Ed=class t{constructor(e){this.hash="",this.nonce=0,this.value="",this.receiver=new q1.Address(""),this.sender=new q1.Address(""),this.data="",this.previousHash="",this.originalHash="",this.gasLimit=0,this.gasPrice=0,this.callType=0,this.returnMessage="",this.logs=new C9.TransactionLogs,Object.assign(this,e)}static fromProxyHttpResponse(e){return t.fromHttpResponse(e)}static fromApiHttpResponse(e){let r=t.fromHttpResponse(e);return r.data=p.Buffer.from(r.data,"base64").toString(),r.callType=Number(r.callType),r}static fromHttpResponse(e){let r=new t;return r.hash=e.hash,r.nonce=Number(e.nonce||0),r.value=(e.value||0).toString(),r.receiver=new q1.Address(e.receiver),r.sender=new q1.Address(e.sender),r.previousHash=e.prevTxHash,r.originalHash=e.originalTxHash,r.gasLimit=Number(e.gasLimit||0),r.gasPrice=Number(e.gasPrice||0),r.data=e.data||"",r.callType=e.callType,r.returnMessage=e.returnMessage,r.logs=C9.TransactionLogs.fromHttpResponse(e.logs||{}),r}};Vl.ContractResultItem=Ed});var x9=D(V1=>{"use strict";h();Object.defineProperty(V1,"__esModule",{value:!0});V1.ContractQueryRequest=void 0;var RC=class{constructor(e){this.query=e}toHttpRequest(){var e;let r={},n=this.query;return r.scAddress=n.address.bech32(),r.caller=!((e=n.caller)===null||e===void 0)&&e.bech32()?n.caller.bech32():void 0,r.funcName=n.func.toString(),r.value=n.value?n.value.toString():void 0,r.args=n.getEncodedArguments(),r}};V1.ContractQueryRequest=RC});var k9=D((pCe,V9)=>{h();V9.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var oa=D(Eu=>{h();var BC,Fde=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Eu.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Eu.getSymbolTotalCodewords=function(e){return Fde[e]};Eu.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Eu.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');BC=e};Eu.isKanjiModeEnabled=function(){return typeof BC<"u"};Eu.toSJIS=function(e){return BC(e)}});var j1=D(ti=>{h();ti.L={bit:1};ti.M={bit:0};ti.Q={bit:3};ti.H={bit:2};function Ude(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return ti.L;case"m":case"medium":return ti.M;case"q":case"quartile":return ti.Q;case"h":case"high":return ti.H;default:throw new Error("Unknown EC Level: "+t)}}ti.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};ti.from=function(e,r){if(ti.isValid(e))return e;try{return Ude(e)}catch{return r}}});var j9=D((ECe,G9)=>{h();function H9(){this.buffer=[],this.length=0}H9.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};G9.exports=H9});var Q9=D((SCe,z9)=>{h();function bd(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}bd.prototype.set=function(t,e,r,n){let i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};bd.prototype.get=function(t,e){return this.data[t*this.size+e]};bd.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};bd.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};z9.exports=bd});var K9=D(z1=>{h();var qde=oa().getSymbolSize;z1.getRowColCoords=function(e){if(e===1)return[];let r=Math.floor(e/7)+2,n=qde(e),i=n===145?26:Math.ceil((n-13)/(2*r-2))*2,s=[n-7];for(let o=1;o<r-1;o++)s[o]=s[o-1]-i;return s.push(6),s.reverse()};z1.getPositions=function(e){let r=[],n=z1.getRowColCoords(e),i=n.length;for(let s=0;s<i;s++)for(let o=0;o<i;o++)s===0&&o===0||s===0&&o===i-1||s===i-1&&o===0||r.push([n[s],n[o]]);return r}});var Y9=D($9=>{h();var Vde=oa().getSymbolSize,W9=7;$9.getPositions=function(e){let r=Vde(e);return[[0,0],[r-W9,0],[0,r-W9]]}});var J9=D(Rt=>{h();Rt.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var bu={N1:3,N2:3,N3:40,N4:10};Rt.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};Rt.from=function(e){return Rt.isValid(e)?parseInt(e,10):void 0};Rt.getPenaltyN1=function(e){let r=e.size,n=0,i=0,s=0,o=null,u=null;for(let a=0;a<r;a++){i=s=0,o=u=null;for(let c=0;c<r;c++){let f=e.get(a,c);f===o?i++:(i>=5&&(n+=bu.N1+(i-5)),o=f,i=1),f=e.get(c,a),f===u?s++:(s>=5&&(n+=bu.N1+(s-5)),u=f,s=1)}i>=5&&(n+=bu.N1+(i-5)),s>=5&&(n+=bu.N1+(s-5))}return n};Rt.getPenaltyN2=function(e){let r=e.size,n=0;for(let i=0;i<r-1;i++)for(let s=0;s<r-1;s++){let o=e.get(i,s)+e.get(i,s+1)+e.get(i+1,s)+e.get(i+1,s+1);(o===4||o===0)&&n++}return n*bu.N2};Rt.getPenaltyN3=function(e){let r=e.size,n=0,i=0,s=0;for(let o=0;o<r;o++){i=s=0;for(let u=0;u<r;u++)i=i<<1&2047|e.get(o,u),u>=10&&(i===1488||i===93)&&n++,s=s<<1&2047|e.get(u,o),u>=10&&(s===1488||s===93)&&n++}return n*bu.N3};Rt.getPenaltyN4=function(e){let r=0,n=e.data.length;for(let s=0;s<n;s++)r+=e.data[s];return Math.abs(Math.ceil(r*100/n/5)-10)*bu.N4};function kde(t,e,r){switch(t){case Rt.Patterns.PATTERN000:return(e+r)%2===0;case Rt.Patterns.PATTERN001:return e%2===0;case Rt.Patterns.PATTERN010:return r%3===0;case Rt.Patterns.PATTERN011:return(e+r)%3===0;case Rt.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2===0;case Rt.Patterns.PATTERN101:return e*r%2+e*r%3===0;case Rt.Patterns.PATTERN110:return(e*r%2+e*r%3)%2===0;case Rt.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}Rt.applyMask=function(e,r){let n=r.size;for(let i=0;i<n;i++)for(let s=0;s<n;s++)r.isReserved(s,i)||r.xor(s,i,kde(e,s,i))};Rt.getBestMask=function(e,r){let n=Object.keys(Rt.Patterns).length,i=0,s=1/0;for(let o=0;o<n;o++){r(o),Rt.applyMask(o,e);let u=Rt.getPenaltyN1(e)+Rt.getPenaltyN2(e)+Rt.getPenaltyN3(e)+Rt.getPenaltyN4(e);Rt.applyMask(o,e),u<s&&(s=u,i=o)}return i}});var LC=D(MC=>{h();var aa=j1(),Q1=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],K1=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];MC.getBlocksCount=function(e,r){switch(r){case aa.L:return Q1[(e-1)*4+0];case aa.M:return Q1[(e-1)*4+1];case aa.Q:return Q1[(e-1)*4+2];case aa.H:return Q1[(e-1)*4+3];default:return}};MC.getTotalCodewordsCount=function(e,r){switch(r){case aa.L:return K1[(e-1)*4+0];case aa.M:return K1[(e-1)*4+1];case aa.Q:return K1[(e-1)*4+2];case aa.H:return K1[(e-1)*4+3];default:return}}});var X9=D($1=>{h();var Sd=new Uint8Array(512),W1=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Sd[r]=e,W1[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Sd[r]=Sd[r-255]})();$1.log=function(e){if(e<1)throw new Error("log("+e+")");return W1[e]};$1.exp=function(e){return Sd[e]};$1.mul=function(e,r){return e===0||r===0?0:Sd[W1[e]+W1[r]]}});var Z9=D(Id=>{h();var FC=X9();Id.mul=function(e,r){let n=new Uint8Array(e.length+r.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<r.length;s++)n[i+s]^=FC.mul(e[i],r[s]);return n};Id.mod=function(e,r){let n=new Uint8Array(e);for(;n.length-r.length>=0;){let i=n[0];for(let o=0;o<r.length;o++)n[o]^=FC.mul(r[o],i);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n};Id.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=Id.mul(r,new Uint8Array([1,FC.exp(n)]));return r}});var rV=D((FCe,tV)=>{h();var eV=Z9();function UC(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}UC.prototype.initialize=function(e){this.degree=e,this.genPoly=eV.generateECPolynomial(this.degree)};UC.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let r=new Uint8Array(e.length+this.degree);r.set(e);let n=eV.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(n,i),s}return n};tV.exports=UC});var qC=D(nV=>{h();nV.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var VC=D(no=>{h();var iV="[0-9]+",Hde="[A-Z $%*+\\-./:]+",Td="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Td=Td.replace(/u/g,"\\u");var Gde="(?:(?![A-Z0-9 $%*+\\-./:]|"+Td+`)(?:.|[\r
]))+`;no.KANJI=new RegExp(Td,"g");no.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");no.BYTE=new RegExp(Gde,"g");no.NUMERIC=new RegExp(iV,"g");no.ALPHANUMERIC=new RegExp(Hde,"g");var jde=new RegExp("^"+Td+"$"),zde=new RegExp("^"+iV+"$"),Qde=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");no.testKanji=function(e){return jde.test(e)};no.testNumeric=function(e){return zde.test(e)};no.testAlphanumeric=function(e){return Qde.test(e)}});var ua=D(lr=>{h();var Kde=qC(),kC=VC();lr.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};lr.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};lr.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};lr.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};lr.MIXED={bit:-1};lr.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!Kde.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]};lr.getBestModeForData=function(e){return kC.testNumeric(e)?lr.NUMERIC:kC.testAlphanumeric(e)?lr.ALPHANUMERIC:kC.testKanji(e)?lr.KANJI:lr.BYTE};lr.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};lr.isValid=function(e){return e&&e.bit&&e.ccBits};function Wde(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return lr.NUMERIC;case"alphanumeric":return lr.ALPHANUMERIC;case"kanji":return lr.KANJI;case"byte":return lr.BYTE;default:throw new Error("Unknown mode: "+t)}}lr.from=function(e,r){if(lr.isValid(e))return e;try{return Wde(e)}catch{return r}}});var cV=D(Su=>{h();var Y1=oa(),$de=LC(),sV=j1(),ca=ua(),HC=qC(),aV=7973,oV=Y1.getBCHDigit(aV);function Yde(t,e,r){for(let n=1;n<=40;n++)if(e<=Su.getCapacity(n,r,t))return n}function uV(t,e){return ca.getCharCountIndicator(t,e)+4}function Jde(t,e){let r=0;return t.forEach(function(n){let i=uV(n.mode,e);r+=i+n.getBitsLength()}),r}function Xde(t,e){for(let r=1;r<=40;r++)if(Jde(t,r)<=Su.getCapacity(r,e,ca.MIXED))return r}Su.from=function(e,r){return HC.isValid(e)?parseInt(e,10):r};Su.getCapacity=function(e,r,n){if(!HC.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=ca.BYTE);let i=Y1.getSymbolTotalCodewords(e),s=$de.getTotalCodewordsCount(e,r),o=(i-s)*8;if(n===ca.MIXED)return o;let u=o-uV(n,e);switch(n){case ca.NUMERIC:return Math.floor(u/10*3);case ca.ALPHANUMERIC:return Math.floor(u/11*2);case ca.KANJI:return Math.floor(u/13);case ca.BYTE:default:return Math.floor(u/8)}};Su.getBestVersionForData=function(e,r){let n,i=sV.from(r,sV.M);if(Array.isArray(e)){if(e.length>1)return Xde(e,i);if(e.length===0)return 1;n=e[0]}else n=e;return Yde(n.mode,n.getLength(),i)};Su.getEncodedBits=function(e){if(!HC.isValid(e)||e<7)throw new Error("Invalid QR Code version");let r=e<<12;for(;Y1.getBCHDigit(r)-oV>=0;)r^=aV<<Y1.getBCHDigit(r)-oV;return e<<12|r}});var dV=D(hV=>{h();var GC=oa(),fV=1335,Zde=21522,lV=GC.getBCHDigit(fV);hV.getEncodedBits=function(e,r){let n=e.bit<<3|r,i=n<<10;for(;GC.getBCHDigit(i)-lV>=0;)i^=fV<<GC.getBCHDigit(i)-lV;return(n<<10|i)^Zde}});var pV=D(($Ce,gV)=>{h();var ege=ua();function Hl(t){this.mode=ege.NUMERIC,this.data=t.toString()}Hl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Hl.prototype.getLength=function(){return this.data.length};Hl.prototype.getBitsLength=function(){return Hl.getBitsLength(this.data.length)};Hl.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);let s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};gV.exports=Hl});var yV=D((JCe,mV)=>{h();var tge=ua(),jC=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Gl(t){this.mode=tge.ALPHANUMERIC,this.data=t}Gl.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Gl.prototype.getLength=function(){return this.data.length};Gl.prototype.getBitsLength=function(){return Gl.getBitsLength(this.data.length)};Gl.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=jC.indexOf(this.data[r])*45;n+=jC.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(jC.indexOf(this.data[r]),6)};mV.exports=Gl});var vV=D((ZCe,wV)=>{"use strict";h();wV.exports=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer}});var EV=D((t3e,AV)=>{h();var rge=vV(),nge=ua();function jl(t){this.mode=nge.BYTE,typeof t=="string"&&(t=rge(t)),this.data=new Uint8Array(t)}jl.getBitsLength=function(e){return e*8};jl.prototype.getLength=function(){return this.data.length};jl.prototype.getBitsLength=function(){return jl.getBitsLength(this.data.length)};jl.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};AV.exports=jl});var SV=D((n3e,bV)=>{h();var ige=ua(),sge=oa();function zl(t){this.mode=ige.KANJI,this.data=t}zl.getBitsLength=function(e){return e*13};zl.prototype.getLength=function(){return this.data.length};zl.prototype.getBitsLength=function(){return zl.getBitsLength(this.data.length)};zl.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=sge.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};bV.exports=zl});var IV=D((s3e,zC)=>{"use strict";h();var _d={single_source_shortest_paths:function(t,e,r){var n={},i={};i[e]=0;var s=_d.PriorityQueue.make();s.push(e,0);for(var o,u,a,c,f,d,w,A,T;!s.empty();){o=s.pop(),u=o.value,c=o.cost,f=t[u]||{};for(a in f)f.hasOwnProperty(a)&&(d=f[a],w=c+d,A=i[a],T=typeof i[a]>"u",(T||A>w)&&(i[a]=w,s.push(a,w),n[a]=u))}if(typeof r<"u"&&typeof i[r]>"u"){var x=["Could not find a path from ",e," to ",r,"."].join("");throw new Error(x)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e,i;n;)r.push(n),i=t[n],n=t[n];return r.reverse(),r},find_path:function(t,e,r){var n=_d.single_source_shortest_paths(t,e,r);return _d.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(t){var e=_d.PriorityQueue,r={},n;t=t||{};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.queue=[],r.sorter=t.sorter||e.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var r={value:t,cost:e};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof zC<"u"&&(zC.exports=_d)});var PV=D(Ql=>{h();var ze=ua(),CV=pV(),NV=yV(),xV=EV(),OV=SV(),Cd=VC(),J1=oa(),oge=IV();function TV(t){return unescape(encodeURIComponent(t)).length}function Nd(t,e,r){let n=[],i;for(;(i=t.exec(r))!==null;)n.push({data:i[0],index:i.index,mode:e,length:i[0].length});return n}function DV(t){let e=Nd(Cd.NUMERIC,ze.NUMERIC,t),r=Nd(Cd.ALPHANUMERIC,ze.ALPHANUMERIC,t),n,i;return J1.isKanjiModeEnabled()?(n=Nd(Cd.BYTE,ze.BYTE,t),i=Nd(Cd.KANJI,ze.KANJI,t)):(n=Nd(Cd.BYTE_KANJI,ze.BYTE,t),i=[]),e.concat(r,n,i).sort(function(o,u){return o.index-u.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function QC(t,e){switch(e){case ze.NUMERIC:return CV.getBitsLength(t);case ze.ALPHANUMERIC:return NV.getBitsLength(t);case ze.KANJI:return OV.getBitsLength(t);case ze.BYTE:return xV.getBitsLength(t)}}function age(t){return t.reduce(function(e,r){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===r.mode?(e[e.length-1].data+=r.data,e):(e.push(r),e)},[])}function uge(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];switch(n.mode){case ze.NUMERIC:e.push([n,{data:n.data,mode:ze.ALPHANUMERIC,length:n.length},{data:n.data,mode:ze.BYTE,length:n.length}]);break;case ze.ALPHANUMERIC:e.push([n,{data:n.data,mode:ze.BYTE,length:n.length}]);break;case ze.KANJI:e.push([n,{data:n.data,mode:ze.BYTE,length:TV(n.data)}]);break;case ze.BYTE:e.push([{data:n.data,mode:ze.BYTE,length:TV(n.data)}])}}return e}function cge(t,e){let r={},n={start:{}},i=["start"];for(let s=0;s<t.length;s++){let o=t[s],u=[];for(let a=0;a<o.length;a++){let c=o[a],f=""+s+a;u.push(f),r[f]={node:c,lastCount:0},n[f]={};for(let d=0;d<i.length;d++){let w=i[d];r[w]&&r[w].node.mode===c.mode?(n[w][f]=QC(r[w].lastCount+c.length,c.mode)-QC(r[w].lastCount,c.mode),r[w].lastCount+=c.length):(r[w]&&(r[w].lastCount=c.length),n[w][f]=QC(c.length,c.mode)+4+ze.getCharCountIndicator(c.mode,e))}}i=u}for(let s=0;s<i.length;s++)n[i[s]].end=0;return{map:n,table:r}}function _V(t,e){let r,n=ze.getBestModeForData(t);if(r=ze.from(e,n),r!==ze.BYTE&&r.bit<n.bit)throw new Error('"'+t+'" cannot be encoded with mode '+ze.toString(r)+`.
 Suggested mode is: `+ze.toString(n));switch(r===ze.KANJI&&!J1.isKanjiModeEnabled()&&(r=ze.BYTE),r){case ze.NUMERIC:return new CV(t);case ze.ALPHANUMERIC:return new NV(t);case ze.KANJI:return new OV(t);case ze.BYTE:return new xV(t)}}Ql.fromArray=function(e){return e.reduce(function(r,n){return typeof n=="string"?r.push(_V(n,null)):n.data&&r.push(_V(n.data,n.mode)),r},[])};Ql.fromString=function(e,r){let n=DV(e,J1.isKanjiModeEnabled()),i=uge(n),s=cge(i,r),o=oge.find_path(s.map,"start","end"),u=[];for(let a=1;a<o.length-1;a++)u.push(s.table[o[a]].node);return Ql.fromArray(age(u))};Ql.rawSplit=function(e){return Ql.fromArray(DV(e,J1.isKanjiModeEnabled()))}});var BV=D(RV=>{h();var Z1=oa(),KC=j1(),lge=j9(),fge=Q9(),hge=K9(),dge=Y9(),YC=J9(),JC=LC(),gge=rV(),X1=cV(),pge=dV(),mge=ua(),WC=PV();function yge(t,e){let r=t.size,n=dge.getPositions(e);for(let i=0;i<n.length;i++){let s=n[i][0],o=n[i][1];for(let u=-1;u<=7;u++)if(!(s+u<=-1||r<=s+u))for(let a=-1;a<=7;a++)o+a<=-1||r<=o+a||(u>=0&&u<=6&&(a===0||a===6)||a>=0&&a<=6&&(u===0||u===6)||u>=2&&u<=4&&a>=2&&a<=4?t.set(s+u,o+a,!0,!0):t.set(s+u,o+a,!1,!0))}}function wge(t){let e=t.size;for(let r=8;r<e-8;r++){let n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function vge(t,e){let r=hge.getPositions(e);for(let n=0;n<r.length;n++){let i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let u=-2;u<=2;u++)o===-2||o===2||u===-2||u===2||o===0&&u===0?t.set(i+o,s+u,!0,!0):t.set(i+o,s+u,!1,!0)}}function Age(t,e){let r=t.size,n=X1.getEncodedBits(e),i,s,o;for(let u=0;u<18;u++)i=Math.floor(u/3),s=u%3+r-8-3,o=(n>>u&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function $C(t,e,r){let n=t.size,i=pge.getEncodedBits(e,r),s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function Ege(t,e){let r=t.size,n=-1,i=r-1,s=7,o=0;for(let u=r-1;u>0;u-=2)for(u===6&&u--;;){for(let a=0;a<2;a++)if(!t.isReserved(i,u-a)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(i,u-a,c),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function bge(t,e,r){let n=new lge;r.forEach(function(a){n.put(a.mode.bit,4),n.put(a.getLength(),mge.getCharCountIndicator(a.mode,t)),a.write(n)});let i=Z1.getSymbolTotalCodewords(t),s=JC.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let u=(o-n.getLengthInBits())/8;for(let a=0;a<u;a++)n.put(a%2?17:236,8);return Sge(n,t,e)}function Sge(t,e,r){let n=Z1.getSymbolTotalCodewords(e),i=JC.getTotalCodewordsCount(e,r),s=n-i,o=JC.getBlocksCount(e,r),u=n%o,a=o-u,c=Math.floor(n/o),f=Math.floor(s/o),d=f+1,w=c-f,A=new gge(w),T=0,x=new Array(o),B=new Array(o),V=0,U=new Uint8Array(t.buffer);for(let q=0;q<o;q++){let v=q<a?f:d;x[q]=U.slice(T,T+v),B[q]=A.encode(x[q]),T+=v,V=Math.max(V,v)}let Q=new Uint8Array(n),L=0,k,H;for(k=0;k<V;k++)for(H=0;H<o;H++)k<x[H].length&&(Q[L++]=x[H][k]);for(k=0;k<w;k++)for(H=0;H<o;H++)Q[L++]=B[H][k];return Q}function Ige(t,e,r,n){let i;if(Array.isArray(t))i=WC.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){let f=WC.rawSplit(t);c=X1.getBestVersionForData(f,r)}i=WC.fromString(t,c||40)}else throw new Error("Invalid data");let s=X1.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let o=bge(e,r,i),u=Z1.getSymbolSize(e),a=new fge(u);return yge(a,e),wge(a),vge(a,e),$C(a,r,0),e>=7&&Age(a,e),Ege(a,o),isNaN(n)&&(n=YC.getBestMask(a,$C.bind(null,a,r))),YC.applyMask(n,a),$C(a,r,n),{modules:a,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}RV.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=KC.M,i,s;return typeof r<"u"&&(n=KC.from(r.errorCorrectionLevel,KC.M),i=X1.from(r.version),s=YC.from(r.maskPattern),r.toSJISFunc&&Z1.setToSJISFunction(r.toSJISFunc)),Ige(e,i,n,s)}});var XC=D(Iu=>{h();function MV(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+e.slice(0,6).join("")}}Iu.getOptions=function(e){e||(e={}),e.color||(e.color={});let r=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:r,color:{dark:MV(e.color.dark||"#000000ff"),light:MV(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Iu.getScale=function(e,r){return r.width&&r.width>=e+r.margin*2?r.width/(e+r.margin*2):r.scale};Iu.getImageWidth=function(e,r){let n=Iu.getScale(e,r);return Math.floor((e+r.margin*2)*n)};Iu.qrToImageData=function(e,r,n){let i=r.modules.size,s=r.modules.data,o=Iu.getScale(i,n),u=Math.floor((i+n.margin*2)*o),a=n.margin*o,c=[n.color.light,n.color.dark];for(let f=0;f<u;f++)for(let d=0;d<u;d++){let w=(f*u+d)*4,A=n.color.light;if(f>=a&&d>=a&&f<u-a&&d<u-a){let T=Math.floor((f-a)/o),x=Math.floor((d-a)/o);A=c[s[T*i+x]?1:0]}e[w++]=A.r,e[w++]=A.g,e[w++]=A.b,e[w]=A.a}}});var LV=D(ew=>{h();var ZC=XC();function Tge(t,e,r){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}function _ge(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}ew.render=function(e,r,n){let i=n,s=r;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),r||(s=_ge()),i=ZC.getOptions(i);let o=ZC.getImageWidth(e.modules.size,i),u=s.getContext("2d"),a=u.createImageData(o,o);return ZC.qrToImageData(a.data,e,i),Tge(u,s,o),u.putImageData(a,0,0),s};ew.renderToDataURL=function(e,r,n){let i=n;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),i||(i={});let s=ew.render(e,r,i),o=i.type||"image/png",u=i.rendererOpts||{};return s.toDataURL(o,u.quality)}});var qV=D(UV=>{h();var Cge=XC();function FV(t,e){let r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function e3(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Nge(t,e,r){let n="",i=0,s=!1,o=0;for(let u=0;u<t.length;u++){let a=Math.floor(u%e),c=Math.floor(u/e);!a&&!s&&(s=!0),t[u]?(o++,u>0&&a>0&&t[u-1]||(n+=s?e3("M",a+r,.5+c+r):e3("m",i,0),i=0,s=!1),a+1<e&&t[u+1]||(n+=e3("h",o),o=0)):i++}return n}UV.render=function(e,r,n){let i=Cge.getOptions(r),s=e.modules.size,o=e.modules.data,u=s+i.margin*2,a=i.color.light.a?"<path "+FV(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",c="<path "+FV(i.color.dark,"stroke")+' d="'+Nge(o,s,i.margin)+'"/>',f='viewBox="0 0 '+u+" "+u+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+f+' shape-rendering="crispEdges">'+a+c+`</svg>
`;return typeof n=="function"&&n(null,w),w}});var kV=D(xd=>{h();var xge=k9(),t3=BV(),VV=LV(),Oge=qV();function r3(t,e,r,n,i){let s=[].slice.call(arguments,1),o=s.length,u=typeof s[o-1]=="function";if(!u&&!xge())throw new Error("Callback required as last argument");if(u){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(a,c){try{let f=t3.create(r,n);a(t(f,e,n))}catch(f){c(f)}})}try{let a=t3.create(r,n);i(null,t(a,e,n))}catch(a){i(a)}}xd.create=t3.create;xd.toCanvas=r3.bind(null,VV.render);xd.toDataURL=r3.bind(null,VV.renderToDataURL);xd.toString=r3.bind(null,function(t,e,r){return Oge.render(t,r)})});var XV=D(la=>{"use strict";h();var kge=la&&la.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JV=la&&la.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kge(e,t,r)};Object.defineProperty(la,"__esModule",{value:!0});JV(Dl(),la);JV(J2(),la)});h();var h3=pe(_a(),1),d3=pe(Cb(),1),hw=pe(f0(),1),g3=pe(Pb(),1),Qge=pe(Ve(),1),Kge=pe(Ic(),1),Wge=pe(Xr(),1),$ge=pe(_0(),1),Ak=pe(Mb(),1),Yge=pe(U0(),1),Jge=pe(V0(),1),Ek=pe(po(),1),_s=pe(Mf(),1),bk=pe(yf(),1),Sk=pe(Yu(),1),Xge=pe(NE(),1),Zge=pe(zb(),1);h();h();var F8=pe(Wb(),1);h();h();var k0="elvenjs_state",B8="https://devnet-api.multiversx.com";var Po="/dapp/init",H0="devnet",M8="https://maiar.page.link/?apn=com.elrond.maiar.wallet&isi=1519405832&ibi=com.elrond.maiar.wallet&link=https://xportal.com/",L8=["wss://relay.walletconnect.com"],Rr={devnet:{id:"devnet",shortId:"D",name:"Devnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://devnet-wallet.multiversx.com",xAliasAddress:"https://devnet.xalias.com",apiAddress:"https://devnet-api.multiversx.com",explorerAddress:"https://devnet-explorer.multiversx.com",apiTimeout:1e4},testnet:{id:"testnet",shortId:"T",name:"Testnet",egldLabel:"xEGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://testnet-wallet.multiversx.com",xAliasAddress:"https://testnet.xalias.com",apiAddress:"https://testnet-api.multiversx.com",explorerAddress:"https://testnet-explorer.multiversx.com",apiTimeout:1e4},mainnet:{id:"mainnet",shortId:"1",name:"Mainnet",egldLabel:"EGLD",egldDenomination:"18",decimals:"4",gasPerDataByte:"1500",walletAddress:"https://wallet.multiversx.com",xAliasAddress:"https://xalias.com",apiAddress:"https://api.multiversx.com",explorerAddress:"https://explorer.multiversx.com",apiTimeout:1e4}};var me={get(t){let e=localStorage.getItem(k0);if(!e)return{};let r=JSON.parse(e);return t?r[t]:r},set(t,e){let r=this.get();r[t]=e,localStorage.setItem(k0,JSON.stringify(r))},clear(){localStorage.removeItem(k0)}};var G0=async()=>{let t=F8.ExtensionProvider.getInstance();try{let e=await t.init(),r=me.get();if(r?.address&&t.setAddress(r.address),!e){console.warn("Something went wrong when trying to initialize the ExtensionProvider..");return}return t}catch{console.warn("Can't initialize the Dapp Provider!")}};var u3=pe(Wb(),1),c3=pe(fd(),1),l3=pe(Dl(),1),vk=pe(bC(),1),fw=pe(V0(),1);h();var w9=pe(fd(),1);h();h();var ge=class{static set(e,r){if(!e)return;let n={...this.events,[e]:r};this.events=n}static get(e){if(!(!e||!this.events))return this.events[e]}static run(e,...r){!e||!this.events||this.events[e]?.(...r)}static clear(){this.events=void 0}};h();var y9=(U=>(U.onLoginStart="onLoginStart",U.onLoginSuccess="onLoginSuccess",U.onLoginFailure="onLoginFailure",U.onLogoutStart="onLogoutStart",U.onLogoutSuccess="onLogoutSuccess",U.onLogoutFailure="onLogoutFailure",U.onQrPending="onQrPending",U.onQrLoaded="onQrLoaded",U.onTxStart="onTxStart",U.onTxSent="onTxSent",U.onTxFinalized="onTxFinalized",U.onTxFailure="onTxFailure",U.onSignMsgStart="onSignMsgStart",U.onSignMsgFinalized="onSignMsgFinalized",U.onSignMsgFailure="onSignMsgFailure",U.onQueryStart="onQueryStart",U.onQueryFinalized="onQueryFinalized",U.onQueryFailure="onQueryFailure",U))(y9||{}),SC=(o=>(o.ledger="ledger",o.mobile="mobile",o.webWallet="web-wallet",o.browserExtension="browser-extension",o.xAlias="x-alias",o.xPortalHub="x-portal-hub",o))(SC||{}),Rde=(r=>(r.mvx_cancelAction="mvx_cancelAction",r.mvx_signNativeAuthToken="mvx_signNativeAuthToken",r))(Rde||{}),Bde=(e=>(e.hasWebWalletGuardianSign="hasWebWalletGuardianSign",e))(Bde||{});h();var Kt=t=>typeof t=="string"?t.toUpperCase():t instanceof Error?t.message:JSON.stringify(t);var Fl=async t=>{if(!t.dappProvider)throw new Error("Logout failed: There is no active session!");ge.run("onLogoutStart");try{let e=await t.dappProvider.logout();return e&&(me.clear(),ge.run("onLogoutSuccess")),e}catch(e){let r=Kt(e);console.warn(`Something went wrong trying to logout the user: ${r}`),ge.run("onLogoutFailure",r)}};h();function B1(t){return t[Math.floor(Math.random()*t.length)]}var v9=async t=>{if(!t.initOptions.walletConnectV2ProjectId||!t.initOptions.chainType)return;let e={onClientLogin:()=>{},onClientLogout:()=>Fl(t),onClientEvent:i=>{console.log("wc2 session event: ",i)}},r=B1(t.initOptions.walletConnectV2RelayAddresses),n=new w9.WalletConnectV2Provider(e,Rr[t.initOptions.chainType].shortId,r,t.initOptions.walletConnectV2ProjectId);try{return await n.init(),n}catch{console.warn("Can't initialize the Dapp Provider!")}};h();var k1=pe(Ve(),1),O9=pe(A9(),1),D9=pe(b9(),1),P9=pe(DC(),1),R9=pe(N9(),1),B9=pe(zb(),1),M9=pe(x9(),1),L9=pe(Wf(),1);var H1=class{constructor({apiUrl:e,chainType:r,apiTimeout:n}){this.chainType=r||H0,this.apiUrl=e||Rr[this.chainType]?.apiAddress,this.apiTimeout=n||Rr[this.chainType]?.apiTimeout}async apiGet(e,r){if(typeof fetch<"u"){let n=new AbortController,i=setTimeout(()=>n.abort(),this.apiTimeout),s={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:n.signal};try{let o=await fetch(this.apiUrl+"/"+e,Object.assign(s,r||{})),u=await o.json();if(!o.ok){let a=u?.error||o.status;return clearTimeout(i),Promise.reject(a)}return clearTimeout(i),u}catch(o){this.handleApiError(o,e)}}}async apiPost(e,r,n){if(typeof fetch<"u"){let i=new AbortController,s=setTimeout(()=>i.abort(),this.apiTimeout),o={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r||{}),signal:i.signal};try{let u=await fetch(this.apiUrl+"/"+e,Object.assign(o,n||{})),a=await u.json();if(!u.ok){let c=a?.error||u.status;return clearTimeout(s),Promise.reject(c)}return clearTimeout(s),a}catch(u){this.handleApiError(u,e)}}}handleApiError(e,r){if(!e.response)throw new Error(`Request error on url [${r}]: [${e.toString()}]`);let n=e.response.data,i=n.error||n.message||JSON.stringify(n);throw new Error(i)}async sendTransaction(e){return(await this.apiPost("transactions",e.toSendable())).txHash}async getAccount(e){let r=await this.apiGet(`accounts/${e.bech32()}`);return{address:new k1.Address(r?.address||""),nonce:Number(r?.nonce||0),balance:BigInt(r?.balance||0),code:r?.code||"",userName:r?.username||""}}async getGuardianData(e){let r=await this.apiGet(`address/${e.bech32()}/guardian-data`);return{guarded:r?.data?.guardianData?.guarded||!1,activeGuardian:r?.data?.guardianData?.activeGuardian,pendingGuardian:r?.data?.guardianData?.pendingGuardian}}async getTransaction(e){let r=await this.apiGet(`transactions/${e}`),n=new O9.TransactionStatus(r.status);return{hash:e,type:r.type||"",nonce:r.nonce||0,round:r.round,epoch:r.epoch||0,value:(r.value||0).toString(),sender:new k1.Address(r.sender),receiver:new k1.Address(r.receiver),gasPrice:r.gasPrice||0,gasLimit:r.gasLimit||0,data:p.Buffer.from(r.data||"","base64"),status:n,timestamp:r.timestamp||0,blockNonce:r.blockNonce||0,hyperblockNonce:r.hyperblockNonce||0,hyperblockHash:r.hyperblockHash||"",receipt:D9.TransactionReceipt.fromHttpResponse(r.receipt||{}),logs:P9.TransactionLogs.fromHttpResponse(r.logs||{}),contractResults:R9.ContractResults.fromApiHttpResponse(r.results||[]),isCompleted:!n.isPending()}}async queryContract({address:e,func:r,args:n,value:i,caller:s}){try{let o=new L9.Query({address:e,func:r,args:n,value:i,caller:s}),u=new M9.ContractQueryRequest(o).toHttpRequest(),a=await this.apiPost("query",u);return B9.ContractQueryResponse.fromHttpResponse(a)}catch(o){this.handleApiError(o,"query")}}};h();h();var kl=()=>new Date().setHours(new Date().getHours()+24),G1=t=>Date.now()>t;h();var F9=pe(Ve(),1),U9=pe(Ic(),1);var Au=async t=>{let e=me.get("address"),r=me.get("expires");if(!(r&&G1(r))&&e&&t.networkProvider){let i=new F9.Address(e),s=new U9.Account(i);try{let o=await t.networkProvider.getAccount(i),u=await t.networkProvider.getGuardianData(i);me.set("address",e),me.set("activeGuardian",u.guarded&&u.activeGuardian?.address?u.activeGuardian.address:""),me.set("nonce",o.nonce.valueOf()),me.set("balance",o.balance.toString()),s.update(o)}catch(o){let u=Kt(o);console.warn(`Something went wrong trying to synchronize the user account: ${u}`)}}};var q9=async(t,e,r,n="/")=>{let i=await G0(),o={callbackUrl:encodeURIComponent(`${window.location.origin}${n}`),token:e};try{if(i&&!await i.login(o))throw new Error("There were problems while logging in!")}catch(a){let c=Kt(a);throw new Error(c)}if(!i)throw new Error("There were problems with auth provider initialization!");let{signature:u}=i.account;if(me.set("loginToken",e),u&&me.set("signature",u),t.networkProvider&&u)try{let a=await i.getAddress();if(!a)throw new Error("Canceled!");me.set("address",a),me.set("loginMethod","browser-extension"),me.set("expires",kl()),await Au(t);let c=r.getToken(a,e,u);return me.set("accessToken",c),ge.run("onLoginSuccess"),i}catch(a){throw new Error(`Something went wrong trying to synchronize the user account: ${a?.message}`)}};h();h();var HV=pe(kV(),1),GV=pe(fd(),1);var Dge=t=>{let e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild?.cloneNode(!0)},Pge=t=>{let e=`${M8}?wallet-connect=${encodeURIComponent(t)}`,r=document.createElement("a");return r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer nofollow"),r.setAttribute("target","_blank"),r.textContent="xPortal login",r.classList.add("elven-qr-code-deep-link"),r},Rge=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairings"),t},Bge=()=>{let t=document.createElement("div");return t.textContent="Existing WalletConnect pairings:",t.classList.add("elven-wc-pairings-header"),t},n3={},Mge=(t,e)=>{let r=document.createElement("button");return r.classList.add("elven-wc-pairings-remove-btn"),r.textContent="\u2716",n3[t.topic]=new AbortController,r.addEventListener("click",n=>{n.stopImmediatePropagation(),e(t.topic)},{signal:n3[t.topic].signal}),r},tw={},Lge=(t,e,r)=>{let n=document.createElement("div"),i=document.createElement("div");n.classList.add("elven-wc-pairing-item"),n.setAttribute("id",t.topic),i.classList.add("elven-wc-pairing-item-description"),i.textContent=`${t.peerMetadata?.description} (${t.peerMetadata?.url})`,n.appendChild(i);let s=Mge(t,e);return n.appendChild(s),tw[t.topic]=new AbortController,n.addEventListener("click",()=>r(t.topic),{signal:tw[t.topic].signal}),n},Fge=()=>{let t=document.createElement("div");return t.classList.add("elven-wc-pairing-item-confirm-msessage"),t.setAttribute("id","elven-wc-pairing-item-confirm-msessage"),t.innerText="Confirm on xPortal app!",t},Uge=t=>{if(!t)return;document.getElementById(t)?.remove()},qge=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Vge=async t=>t?await HV.default.toString(t,{type:"svg"}):void 0,jV=async(t,e,r,n)=>{if(!t)throw new Error("Please provide the QR Code and WalletConnect Pairings container id!");let i=null;typeof t=="string"?i=document.getElementById(t):t instanceof HTMLElement&&(i=t);let s=await Vge(e),o;if(s&&(o=Dge(s)),i&&o&&(i.replaceChildren(),i.appendChild(o),qge()&&i.appendChild(Pge(e))),i&&r instanceof GV.WalletConnectV2Provider){let u=r.pairings,a=async f=>{try{f&&(await r.logout({topic:f}),Uge(f))}catch(d){let w=Kt(d);console.warn(`Something went wrong trying to remove the existing pairing: ${w}`)}finally{tw[f].abort()}},c=async f=>{try{let{approval:d}=await r.connect({topic:f,methods:["mvx_cancelAction","mvx_signNativeAuthToken"]});document.getElementById("elven-wc-pairing-item-confirm-msessage")||document.getElementById(f)?.after(Fge()),await r.login({approval:d,token:n})}catch(d){let w=Kt(d);console.warn(`Something went wrong trying to login the user: ${w}`)}finally{for(let d of Object.values(tw))d?.abort();for(let d of Object.values(n3))d?.abort()}};if(u&&u.length>0){let f=Rge();i.appendChild(f);let d=Bge();f.appendChild(d);for(let w of u){let A=Lge(w,a,c);f.appendChild(A)}}}return i};var rw=pe(fd(),1);var zV=async(t,e,r,n)=>{if(!n)throw new Error("You haven't provided the QR code container DOM element id");let i=B1(t.initOptions.walletConnectV2RelayAddresses);if(!i||!t.networkProvider)throw new Error("Something wen't wrong with the initialization (ApiNetworkProvider or Wallet Connect Bridge address), plese try to refresh the page!");if(!t.initOptions.walletConnectV2ProjectId)throw new Error("Please provide your WalletConnect project id. You can get it here: https://cloud.walletconnect.com)");if(!t.initOptions.chainType)throw new Error("Please provide the chain type in ElvenJS.init function!");let s,o={onClientLogin:async()=>{if(t.dappProvider instanceof rw.WalletConnectV2Provider){let a=await t.dappProvider.getAddress(),c=await t.dappProvider.getSignature();me.set("address",a),me.set("loginMethod","mobile"),me.set("expires",kl()),await Au(t),c&&me.set("signature",c),me.set("loginToken",e);let f=r.getToken(a,e,c);me.set("accessToken",f),ge.run("onLoginSuccess"),s?.replaceChildren()}},onClientLogout:async()=>{t.dappProvider instanceof rw.WalletConnectV2Provider&&await Fl(t)},onClientEvent:a=>{console.log("wc2 session event: ",a)}},u=new rw.WalletConnectV2Provider(o,Rr[t.initOptions.chainType].shortId,i,t.initOptions.walletConnectV2ProjectId);try{if(u){t.dappProvider=u,ge.run("onQrPending"),await u.init();let{uri:a,approval:c}=await u.connect({methods:["mvx_cancelAction","mvx_signNativeAuthToken"]}),f=e?`${a}&token=${e}`:a;return n&&f&&(s=await jV(n,f,u,e),ge.run("onQrLoaded")),await u.login({approval:c,token:e}),u}}catch(a){let c=Kt(a);console.warn(`Something went wrong trying to login the user: ${c}`),ge.run("onLoginFailure",c)}};h();var QV=pe(Dl(),1);var i3=async(t,e,r,n)=>{let i=new QV.WalletProvider(`${t}${Po}`),o={callbackUrl:typeof window<"u"?encodeURIComponent(`${window.location.origin}${n||"/"}`):"/",token:e};try{return me.set("loginMethod",Rr[r].xAliasAddress===t?"x-alias":"web-wallet"),await i.login(o),me.set("expires",kl()),me.set("loginToken",e),i}catch(u){let a=Kt(u);console.warn(`Something went wrong trying to login the user: ${a}`),me.set("loginMethod",""),ge.run("onLoginFailure",a)}};h();var ln=t=>{if(typeof window<"u"){let e=new URL(window.location.href);return new URLSearchParams(e.search).get(t)}};h();var KV=pe(Dl(),1);var WV=pe(bC(),1),s3=async(t,e)=>{let r=ln("signature"),n=ln("address"),i=me.get("address"),s=me.get("loginToken");if(r&&me.set("signature",r),n||i){n&&(me.set("address",n),window.history.replaceState(null,"",window.location.pathname));let o=new KV.WalletProvider(`${t}${Po}`);if(r&&e&&n){let a=new WV.NativeAuthClient({apiUrl:e,origin:window.location.origin}).getToken(n,s,r);me.set("accessToken",a)}return o}};h();var $V=pe(Ic(),1),YV=pe(U0(),1);var nw=async(t,e)=>{ge.run("onTxSent",t);let n=await new YV.TransactionWatcher(e).awaitCompleted(t),i=n.sender,s=new $V.Account(i),o=await e.getAccount(i);s.update(o),me.set("address",s.address.bech32()),me.set("balance",s.balance.toString()),ge.run("onTxFinalized",n)};h();var Kl=pe(XV(),1),ek=pe(Xr(),1);h();var ZV=pe(Ic(),1);var iw=t=>{let e=t.getSender(),r=new ZV.Account(e),n=t.nonce.valueOf();r.incrementNonce(),me.set("nonce",(n+1n).toString())};var tk=async(t,e,r,n)=>{if(ln(Kl.WALLET_PROVIDER_CALLBACK_PARAM)===Kl.WALLET_PROVIDER_CALLBACK_PARAM_TX_SIGNED&&t&&e){let s=me.get("activeGuardian"),o=me.get("loginMethod"),u=ln("hasWebWalletGuardianSign"),a;if("getTransactionsFromWalletUrl"in t){if(a=t.getTransactionsFromWalletUrl()?.[0],!a)return;o==="web-wallet"&&(a.data=p.Buffer.from(a.data).toString("base64"))}else s&&o!=="web-wallet"&&o!=="x-alias"&&u&&(a=new Kl.WalletProvider(`${r}${Po}`).getTransactionsFromWalletUrl()?.[0]);if(a){let c=ek.Transaction.fromPlainObject(a);c.nonce=BigInt(n),iw(c);try{ge.run("onTxStart",c),await e.sendTransaction(c),await nw(c,e)}catch(f){let w=`Getting transaction information failed! ${Kt(f)}`;throw ge.run("onTxFailure",c,w),new Error(w)}finally{window.history.replaceState(null,"",window.location.pathname)}}window.history.replaceState(null,"",window.location.pathname)}};h();var sw=pe($l(),1),rk=pe(Ve(),1),nk=pe(Dl(),1);var ik=t=>{let e=me.get("activeGuardian");if(e){let r={guarded:!0};t.setVersion(sw.TransactionVersion.withTxOptions()),t.setOptions(sw.TransactionOptions.withOptions(r)),t.setGuardian(rk.Address.fromBech32(e))}return t},sk=async(t,e)=>{let r=new nk.WalletProvider(`${e}${Po}`),n=window?.location.href,i=new URL(n);i.searchParams.set("hasWebWalletGuardianSign","true"),await r.guardTransactions([t],{callbackUrl:encodeURIComponent(i.toString())})},ok=t=>{let e=me.get("activeGuardian");return!(!me.get("address")||!e||t.isGuardedTransaction())};h();var ak=()=>{let t=!ln("walletProviderStatus"),e=ln("status")==="signed",r=ln("message"),n=ln("signature");t&&e&&r&&n&&(ge.run("onSignMsgFinalized",r,n),window.history.replaceState(null,"",window.location.pathname))};h();var a3=pe(Xr(),1);h();var uk=(e=>(e.reloginResponse="RELOGIN_RESPONSE",e))(uk||{}),ck=(u=>(u.handshakeResponse="HANDSHAKE_RESPONSE",u.loginResponse="LOGIN_RESPONSE",u.disconnectResponse="DISCONNECT_RESPONSE",u.cancelResponse="CANCEL_RESPONSE",u.signTransactionsResponse="SIGN_TRANSACTIONS_RESPONSE",u.signMessageResponse="SIGN_MESSAGE_RESPONSE",u.noneResponse="NONE_RESPONSE",u))(ck||{}),o3={...ck,...uk},lk=(r=>(r.signTransactionsWithGuardianResponse="SIGN_TRANSACTIONS_WITH_GUARDIAN_RESPONSE",r.reloginRequest="RELOGIN_REQUEST",r))(lk||{}),fk=(o=>(o.signTransactionsRequest="SIGN_TRANSACTIONS_REQUEST",o.signMessageRequest="SIGN_MESSAGE_REQUEST",o.loginRequest="LOGIN_REQUEST",o.logoutRequest="LOGOUT_REQUEST",o.cancelAction="CANCEL_ACTION_REQUEST",o.finalizeHandshakeRequest="FINALIZE_HANDSHAKE_REQUEST",o))(fk||{}),Tu={...fk,...lk};h();var hk=typeof window<"u"?window:{},dk=()=>hk.ReactNativeWebView?"reactNative":hk.webkit?"ios":"web",_u=()=>typeof window<"u"&&typeof window?.location<"u"?window?.parent?.origin??"*":"*",ow=t=>Object.prototype.toString.call(t)==="[object String]";h();var aw={signTransactions:{ios:t=>window.webkit.messageHandlers.signTransactions.postMessage(t,_u()),reactNative:t=>window?.ReactNativeWebView.postMessage(JSON.stringify({type:Tu.signTransactionsRequest,message:t})),web:t=>window?.postMessage(JSON.stringify({type:Tu.signTransactionsRequest,message:t}),_u())},signMessage:{ios:t=>window.webkit.messageHandlers.signMessage.postMessage(t),reactNative:t=>window?.ReactNativeWebView.postMessage(JSON.stringify({type:Tu.signMessageRequest,message:t})),web:t=>window?.postMessage(JSON.stringify({type:Tu.signMessageRequest,message:t}),_u())},logout:{ios:()=>window.webkit.messageHandlers.logout.postMessage(),reactNative:()=>window?.ReactNativeWebView.postMessage(JSON.stringify({type:Tu.logoutRequest})),web:()=>window?.postMessage(JSON.stringify({type:Tu.logoutRequest}),_u())}};var uw=dk(),cw="message",gk=t=>{let e=r=>{let n=r.data;if(!(r.target.origin!=_u()&&uw!="reactNative"))try{n=JSON.parse(n),t(n)}catch{console.error("error parsing response")}};document&&document.addEventListener(cw,e),window&&window.addEventListener(cw,e)},fa=class{constructor(){}async logout(){return aw.logout[uw](),new Promise(e=>{e(!0)})}async signMessage(e){try{return aw.signMessage[uw](e),await new Promise((n,i)=>{window.signMessageResponse=(o,u)=>{if(u){i(u),window.signMessageResponse=null;return}n(o),window.signMessageResponse=null};function s(o){let{message:u,type:a}=o;if(a===o3.signMessageResponse&&u!=null){let{signedMessage:c,error:f}=u;f?i(f):n(c)}document?.removeEventListener(cw,s)}gk(s)})}catch(r){throw console.error("error sending transaction",r),r}}async signTransactions(e){try{let r=e.map(i=>i.toPlainObject());return aw.signTransactions[uw](r),await new Promise((i,s)=>{window.transactionsSigned=(u,a)=>{if(u=JSON.parse(u),a){s(a),window.transactionsSigned=null;return}i(u.map(c=>a3.Transaction.fromPlainObject(c))),window.transactionsSigned=null};function o(u){let{message:a,type:c}=u;if(c===o3.signTransactionsResponse){let{transactions:f,error:d}=a;try{d?s(d):i(f.map(w=>a3.Transaction.fromPlainObject(w)))}catch{s("Unable to sign")}}document&&document.removeEventListener(cw,o)}gk(o)})}catch(r){throw console.error("error sending transaction",r),r}}async signTransaction(e){return(await this.signTransactions([e]))[0]}};h();h();h();function Gge(t){try{let e=atob(t),r=btoa(e),n=p.Buffer.from(t,"base64").toString(),i=p.Buffer.from(n).toString("base64");if(t===r&&t===i||e===n)return!0}catch{return!1}return!1}function Wl(t){return Gge(t)?atob(t):t}h();var pk=t=>{if(!t||!ow(t))return null;let e=t.split(".");if(e.length!==4)return null;try{let[r,n,i,s]=e,o=JSON.parse(Wl(s)),u=Wl(r);return{ttl:Number(i),extraInfo:o,origin:u,blockHash:n}}catch(r){return console.error(`Error trying to decode ${t}:`,r),null}};var mk=t=>{if(!t||!ow(t))return null;let e=t.split(".");if(e.length!==3)return console.error("Invalid nativeAuthToken. You may be trying to decode a loginToken. Try using decodeLoginToken method instead"),null;try{let[r,n,i]=e,s=Wl(r),o=Wl(n),u=pk(o);if(!u)return{address:s,body:o,signature:i,blockHash:"",origin:"",ttl:0};let a={...u,address:s,body:o,signature:i};return u.extraInfo?.timestamp||delete a.extraInfo,a}catch{return null}};function yk(t,e){let r=mk(t);if(r==null)return;let{signature:n,address:i,body:s}=r;n&&t&&i&&(me.set("loginToken",s),me.set("accessToken",t),me.set("signature",n),me.set("address",i),me.set("loginMethod","x-portal-hub"),e.dappProvider=new fa)}h();var wk=t=>{t.onLoginStart&&ge.set("onLoginStart",t.onLoginStart),t.onLoginSuccess&&ge.set("onLoginSuccess",t.onLoginSuccess),t.onLoginFailure&&ge.set("onLoginFailure",t.onLoginFailure),t.onLogoutStart&&ge.set("onLogoutStart",t.onLogoutStart),t.onLogoutSuccess&&ge.set("onLogoutSuccess",t.onLogoutSuccess),t.onLogoutFailure&&ge.set("onLogoutFailure",t.onLogoutFailure),t.onQrPending&&ge.set("onQrPending",t.onQrPending),t.onQrLoaded&&ge.set("onQrLoaded",t.onQrLoaded),t.onTxStart&&ge.set("onTxStart",t.onTxStart),t.onTxSent&&ge.set("onTxSent",t.onTxSent),t.onTxFinalized&&ge.set("onTxFinalized",t.onTxFinalized),t.onTxFailure&&ge.set("onTxFailure",t.onTxFailure),t.onSignMsgStart&&ge.set("onSignMsgStart",t.onSignMsgStart),t.onSignMsgFinalized&&ge.set("onSignMsgFinalized",t.onSignMsgFinalized),t.onSignMsgFailure&&ge.set("onSignMsgFailure",t.onSignMsgFailure),t.onQueryStart&&ge.set("onQueryStart",t.onQueryStart),t.onQueryFinalized&&ge.set("onQueryFinalized",t.onQueryFinalized),t.onQueryFailure&&ge.set("onQueryFailure",t.onQueryFailure)};h();var lw=async t=>{ge.run("onLoginStart");try{await t(()=>{ge.run("onLoginSuccess")})}catch(e){let r=Kt(e);console.warn(`Something went wrong trying to login the user: ${r}`),ge.run("onLoginFailure",r)}};var f3=class{static async init(e){let r=me.get();if(r.expires&&G1(r.expires)){me.clear(),this.dappProvider=void 0;return}this.initOptions={chainType:H0,apiUrl:B8,apiTimeout:1e4,walletConnectV2ProjectId:"",walletConnectV2RelayAddresses:L8,...e},this.networkProvider=new H1(this.initOptions),wk(this.initOptions);let n=ln("accessToken");n&&await lw(async s=>{yk(n,this),await Au(this),s()}),(r?.address||(r.loginMethod==="web-wallet"||r.loginMethod==="x-alias")&&ln("address"))&&r?.loginMethod&&(await lw(async s=>{r.loginMethod==="browser-extension"&&(this.dappProvider=await G0()),r.loginMethod==="mobile"&&(this.dappProvider=await v9(this)),r.loginMethod==="x-portal-hub"&&(this.dappProvider=new fa),r.loginMethod==="web-wallet"&&this.initOptions?.chainType&&(this.dappProvider=await s3(Rr[this.initOptions.chainType].walletAddress,this.initOptions.apiUrl)),r.loginMethod==="x-alias"&&this.initOptions?.chainType&&(this.dappProvider=await s3(Rr[this.initOptions.chainType].xAliasAddress,this.initOptions.apiUrl)),await Au(this),s()}),this.initOptions?.chainType&&(await tk(this.dappProvider,this.networkProvider,Rr[this.initOptions.chainType][r.loginMethod==="x-alias"?"xAliasAddress":"walletAddress"],r.nonce),ak()))}static async login(e,r){if(!Object.values(SC).includes(e)){let i="Wrong login method!";throw ge.run("onLoginFailure",i),new Error(i)}if(!this.networkProvider){let i="Login failed: Use ElvenJs.init() first!";throw ge.run("onLoginFailure",i),new Error(i)}await lw(async()=>{let i=new vk.NativeAuthClient({apiUrl:this.initOptions?.apiUrl,origin:window.location.origin}),s=await i.initialize();if(e==="browser-extension"){let o=await q9(this,s,i,r?.callbackRoute);this.dappProvider=o}if(e==="mobile"){let o=await zV(this,s,i,r?.qrCodeContainer);this.dappProvider=o}if(e==="web-wallet"&&this.initOptions?.chainType){let o=await i3(Rr[this.initOptions.chainType].walletAddress,s,this.initOptions?.chainType,r?.callbackRoute);this.dappProvider=o}if(e==="x-alias"&&this.initOptions?.chainType){let o=await i3(Rr[this.initOptions.chainType].xAliasAddress,s,this.initOptions?.chainType,r?.callbackRoute);this.dappProvider=o}})}static async logout(){try{let e=await Fl(this);return this.dappProvider=void 0,e}catch(e){let r=Kt(e);console.warn("Something went wrong when logging out: ",r)}}static async signAndSendTransaction(e){if(!this.dappProvider){let n="Transaction signing failed: There is no active session!";throw ge.run("onTxFailure",e,n),new Error(n)}if(!this.networkProvider){let n="Transaction signing failed: There is no active network provider!";throw ge.run("onTxFailure",e,n),new Error(n)}let r=ik(e);try{ge.run("onTxStart",e);let n=me.get();if(e.nonce=n.nonce,this.dappProvider instanceof u3.ExtensionProvider&&(r=await this.dappProvider.signTransaction(e)),this.dappProvider instanceof c3.WalletConnectV2Provider&&(r=await this.dappProvider.signTransaction(e)),this.dappProvider instanceof fa&&(r=await this.dappProvider.signTransaction(e)),this.dappProvider instanceof l3.WalletProvider&&await this.dappProvider.signTransaction(e),n.loginMethod!=="web-wallet"&&n.loginMethod!=="x-alias"){let i=ok(r);if(i||iw(r),i&&this.initOptions?.chainType){await sk(r,Rr[this.initOptions.chainType].walletAddress);return}await this.networkProvider.sendTransaction(r),await nw(r,this.networkProvider)}}catch(n){let i=Kt(n);throw ge.run("onTxFailure",r,`Getting transaction information failed! ${i}`),new Error(`Getting transaction information failed! ${i}`)}return r}static async signMessage(e,r){if(!this.dappProvider){let i="Message signing failed: There is no active session!";throw ge.run("onSignMsgFailure",e,i),new Error(i)}if(!this.networkProvider){let i="Message signing failed: There is no active network provider!";throw ge.run("onSignMsgFailure",e,i),new Error(i)}let n="";try{if(ge.run("onSignMsgStart",e),this.dappProvider instanceof u3.ExtensionProvider&&(n=(await this.dappProvider.signMessage(new fw.SignableMessage({message:p.Buffer.from(e)}))).getSignature().toString("hex")),this.dappProvider instanceof c3.WalletConnectV2Provider&&(n=(await this.dappProvider.signMessage(new fw.SignableMessage({message:p.Buffer.from(e)}))).getSignature().toString("hex")),this.dappProvider instanceof fa&&(n=await this.dappProvider.signMessage(e)),this.dappProvider instanceof l3.WalletProvider){let s=u=>encodeURIComponent(u).replace(/[!'()*]/g,a=>`%${a.charCodeAt(0).toString(16).toUpperCase()}`),o=r?.callbackUrl||window.location.origin;await this.dappProvider.signMessage(new fw.SignableMessage({message:p.Buffer.from(e)}),{callbackUrl:encodeURIComponent(`${o}${o.includes("?")?"&":"?"}message=${s(e)}`)})}let i=me.get();return i.loginMethod!=="web-wallet"&&i.loginMethod!=="x-alias"&&ge.run("onSignMsgFinalized",e,n),{message:e,messageSignature:n}}catch(i){let s=Kt(i);throw ge.run("onSignMsgFailure",e,s),new Error(`Message signing failed! ${s}`)}}static async queryContract({address:e,func:r,args:n=[],value:i=0,caller:s}){if(!this.networkProvider)throw new Error("Query failed: There is no active network provider!");if(!e||!r)throw new Error("Query failed: The Query arguments are not valid! Address and func required");let o={address:e,func:r,args:n,value:i,caller:s};try{ge.run("onQueryStart",o);let u=await this.networkProvider.queryContract(o);return ge.run("onQueryFinalized",u),u}catch(u){let a=Kt(u);throw ge.run("onQueryFinalized",o,a),new Error(`Smart contract query failed! ${a}`)}}static{this.storage=me}static{this.destroy=()=>{this.networkProvider=void 0,this.dappProvider=void 0,this.initOptions=void 0,ge.clear()}}};h();rr();Ou.config({ROUNDING_MODE:Ou.ROUND_FLOOR});var jge=({amount:t,decimals:e})=>{if(e<0)throw new Error("Decimal places shouldn't be negative number!");return BigInt(new Ou(t).shiftedBy(e).toFixed())},zge=({amount:t,decimals:e,rounding:r=e})=>{if(e<0)throw new Error("Decimal places shouldn't be negative number!");return new Ou(t).shiftedBy(-e).decimalPlaces(r).toFixed()};var export_Account=Kge.Account;var export_Address=Qge.Address;var export_AddressType=Sk.AddressType;var export_AddressValue=Sk.AddressValue;var export_BigUIntType=_s.BigUIntType;var export_BigUIntValue=_s.BigUIntValue;var export_BooleanType=bk.BooleanType;var export_BooleanValue=bk.BooleanValue;var export_BytesType=Ek.BytesType;var export_BytesValue=Ek.BytesValue;var export_ContractQueryResponse=Zge.ContractQueryResponse;var export_Message=Ak.Message;var export_MessageComputer=Ak.MessageComputer;var export_QueryArguments=Xge.QueryArguments;var export_SignableMessage=Jge.SignableMessage;var export_SmartContractTransactionsFactory=hw.SmartContractTransactionsFactory;var export_SmartContractTransactionsOutcomeParser=g3.SmartContractTransactionsOutcomeParser;var export_Token=h3.Token;var export_TokenComputer=h3.TokenComputer;var export_TokenManagementTransactionsFactory=hw.TokenManagementTransactionsFactory;var export_TokenManagementTransactionsOutcomeParser=g3.TokenManagementTransactionsOutcomeParser;var export_TokenOperationsFactory=d3.TokenOperationsFactory;var export_TokenOperationsFactoryConfig=d3.TokenOperationsFactoryConfig;var export_TokenOperationsOutcomeParser=d3.TokenOperationsOutcomeParser;var export_TokenTransfer=h3.TokenTransfer;var export_Transaction=Wge.Transaction;var export_TransactionComputer=$ge.TransactionComputer;var export_TransactionEventsParser=g3.TransactionEventsParser;var export_TransactionWatcher=Yge.TransactionWatcher;var export_TransactionsFactoryConfig=hw.TransactionsFactoryConfig;var export_TransferTransactionsFactory=hw.TransferTransactionsFactory;var export_U16Type=_s.U16Type;var export_U16Value=_s.U16Value;var export_U32Type=_s.U32Type;var export_U32Value=_s.U32Value;var export_U64Type=_s.U64Type;var export_U64Value=_s.U64Value;var export_U8Type=_s.U8Type;var export_U8Value=_s.U8Value;export{export_Account as Account,export_Address as Address,export_AddressType as AddressType,export_AddressValue as AddressValue,export_BigUIntType as BigUIntType,export_BigUIntValue as BigUIntValue,export_BooleanType as BooleanType,export_BooleanValue as BooleanValue,export_BytesType as BytesType,export_BytesValue as BytesValue,export_ContractQueryResponse as ContractQueryResponse,Rde as DappCoreWCV2CustomMethodsEnum,f3 as ElvenJS,y9 as EventStoreEvents,SC as LoginMethodsEnum,export_Message as Message,export_MessageComputer as MessageComputer,export_QueryArguments as QueryArguments,export_SignableMessage as SignableMessage,export_SmartContractTransactionsFactory as SmartContractTransactionsFactory,export_SmartContractTransactionsOutcomeParser as SmartContractTransactionsOutcomeParser,export_Token as Token,export_TokenComputer as TokenComputer,export_TokenManagementTransactionsFactory as TokenManagementTransactionsFactory,export_TokenManagementTransactionsOutcomeParser as TokenManagementTransactionsOutcomeParser,export_TokenOperationsFactory as TokenOperationsFactory,export_TokenOperationsFactoryConfig as TokenOperationsFactoryConfig,export_TokenOperationsOutcomeParser as TokenOperationsOutcomeParser,export_TokenTransfer as TokenTransfer,export_Transaction as Transaction,export_TransactionComputer as TransactionComputer,export_TransactionEventsParser as TransactionEventsParser,export_TransactionWatcher as TransactionWatcher,export_TransactionsFactoryConfig as TransactionsFactoryConfig,export_TransferTransactionsFactory as TransferTransactionsFactory,export_U16Type as U16Type,export_U16Value as U16Value,export_U32Type as U32Type,export_U32Value as U32Value,export_U64Type as U64Type,export_U64Value as U64Value,export_U8Type as U8Type,export_U8Value as U8Value,Bde as WebWalletUrlParamsEnum,zge as formatAmount,jge as parseAmount};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@walletconnect/utils/dist/index.cjs.js:
  (**
  * [js-sha3]{@link https://github.com/emn178/js-sha3}
  *
  * @version 0.8.0
  * @author Chen, Yi-Cyuan [emn178@gmail.com]
  * @copyright Chen, Yi-Cyuan 2015-2018
  * @license MIT
  *)
*/
